"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[3147],{83147:function(t,e,n){n.d(e,{r:function(){return R}});var i=n(72602),a=n(12145),s=n(63025),r=n(9783),o=n(27773),l=Math.round;function u(t){return t}var h={translate:function(t,e){var n=this._canvasOptions,i=this._categoriesToPoints[null===t||void 0===t?void 0:t.valueOf()],a=this.translateSpecialCase(t),s=n.startPointIndex||0,o=this._options.stick?0:.5;if((0,r.$K)(a))return l(a);if(!i&&0!==i)return null;e=e||0;var u=i+o-s+.5*e;return l(this._calculateProjection(n.interval*u))},getInterval:function(){return this._canvasOptions.interval},getEventScale:function(t){var e=t.deltaScale||1;return 1-(1-e)/(.75+this.visibleCategories.length/this._categories.length)},zoom:function(t,e){var n,i=this._categories,a=this._canvasOptions,s=this._options.stick,r=a.invert,l=a.interval*e,u=t/l,h=(this.visibleCategories||[]).length,c=parseInt((a.startPointIndex||0)+u+.5),v=parseInt((0,o.zB)(a.canvasLength/l)+(s?1:0))||1;r&&(c=parseInt((a.startPointIndex||0)+h-u+.5)-v),c<0&&(c=0),n=c+v,n>i.length&&(n=i.length,c=n-v,c<0&&(c=0));var g=i.slice(parseInt(c),parseInt(n)),f=this._getDiscreteInterval(g.length,a);return e=f/a.interval,t=this.translate(r?g[g.length-1]:g[0])*e-(a.startPoint+(s?0:f/2)),{min:g[0],max:g[g.length-1],translate:t,scale:e}},getMinScale:function(t){var e=this._canvasOptions,n=(this.visibleCategories||this._categories).length;return n+=(parseInt(.1*n)||1)*(t?-2:2),e.canvasLength/(Math.max(n,1)*e.interval)},getScale:function(t,e){var n=this._canvasOptions,i=this.getCanvasVisibleArea(),a=!this._options.stick&&1,s=(0,r.$K)(t)?this.translate(t,-a):null,o=(0,r.$K)(e)?this.translate(e,+a):null;return null===s&&(s=n.invert?i.max:i.min),null===o&&(o=n.invert?i.min:i.max),this.canvasLength/Math.abs(o-s)},isValid:function(t){return!!(0,r.$K)(t)&&this._categoriesToPoints[t.valueOf()]>=0},getCorrectValue:u,to:function(t,e){var n=this._canvasOptions,i=this._categoriesToPoints[null===t||void 0===t?void 0:t.valueOf()],a=n.startPointIndex||0,s=i+(this._options.stick?0:.5)-a+(this._businessRange.invert?-1:1)*e*.5;return l(this._calculateProjection(n.interval*s))},from:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._canvasOptions,i=n.startPoint,a=this.visibleCategories||this._categories,s=a.length,r=this._options.stick?.5:0,o=l((t-i)/n.interval+r-.5-.5*e);return o>=s&&(o=s-1),o<0&&(o=0),n.invert&&(o=s-o-1),a[o]},_add:function(){return NaN},toValue:u,isValueProlonged:!0,getRangeByMinZoomValue(t,e){var n=this._categories,i=n.indexOf(e.minVisible),a=n.indexOf(e.maxVisible),s=i+t-1,r=a-t+1;return n[s]?[e.minVisible,n[s]]:[n[r],e.maxVisible]}},c=n(40566),v=Math.floor,g={_intervalize:function(t,e){if((0,r.$K)(t))return"datetime"===this._businessRange.dataType?(t=(0,r.kE)(t)?new Date(t):new Date(t.getTime()),t=c.Z.correctDateWithUnitBeginning(t,e,null,this._options.firstDayOfWeek)):t=(0,o.zB)(v((0,o.zB)(t/e))*e,e),t},translate:function(t,e,n){var i=this.translateSpecialCase(t);return(0,r.$K)(i)?Math.round(i):(n=n||this._options.interval,this.isValid(t,n)?this.to(t,e,n):null)},getInterval:function(){return Math.round(this._canvasOptions.ratioOfCanvasRange*(this._businessRange.interval||Math.abs(this._canvasOptions.rangeMax-this._canvasOptions.rangeMin)))},zoom:function(){},getMinScale:function(){},getScale:function(){},_parse:function(t){return"datetime"===this._businessRange.dataType?new Date(t):Number(t)},fromValue:function(t){return this._parse(t)},toValue:function(t){return this._parse(t)},isValid:function(t,e){var n=this._canvasOptions,i=n.rangeMin,a=n.rangeMax;return e=e||this._options.interval,null!==t&&!isNaN(t)&&(t="datetime"===this._businessRange.dataType&&(0,r.kE)(t)?new Date(t):t,e!==this._options.interval&&(i=this._intervalize(i,e),a=this._intervalize(a,e)),!(t.valueOf()<i||t.valueOf()>=c.Z.addInterval(a,e)))},to:function(t,e,n){n=n||this._options.interval;var i=this._intervalize(t,n),a=c.Z.addInterval(i,n),s=this._to(i),r=this._to(a);return e?e>0&&(s=r):s=v((s+r)/2),s},_to:function(t){var e=this._canvasOptions,n=e.rangeMinVisible,i=e.rangeMaxVisible,a=t-n;return t<n?a=0:t>i&&(a=c.Z.addInterval(i,this._options.interval)-n),this._conversionValue(this._calculateProjection(a*this._canvasOptions.ratioOfCanvasRange))},from:function(t,e){var n,i=this._options.interval,a=i,s=this._canvasOptions,r=s.rangeMinVisible,o=s.rangeMaxVisible;return"datetime"===this._businessRange.dataType&&(a=c.Z.dateToMilliseconds(i)),n=this._calculateUnProjection((t-this._canvasOptions.startPoint)/this._canvasOptions.ratioOfCanvasRange),n=this._intervalize(c.Z.addInterval(n,a/2,e>0),i),n<r?n=r:n>o&&(n=o),n},_add:function(){return NaN},isValueProlonged:!0};function f(t){return null!==t?new Date(t):t}var _={fromValue:f,toValue:f,_add:c.Z.addDateInterval,convert:c.Z.dateToMilliseconds},d=n(77344),b={fromValue:function(t){return null!==t?(0,d.RI)(t,this._canvasOptions.base,this._businessRange.allowNegatives,this._businessRange.linearThreshold):t},toValue:function(t){return null!==t?(0,d.p3)(t,this._canvasOptions.base,this._businessRange.allowNegatives,this._businessRange.linearThreshold):t},getMinBarSize:function(t){var e=this.getCanvasVisibleArea(),n=this.from(e.min+t),i=this._canvasOptions;return Math.pow(i.base,i.rangeMinVisible+this.fromValue(this.from(e.min))-this.fromValue((0,r.$K)(n)?n:this.from(e.max)))},checkMinBarSize:function(t,e,n){var i,a,s=this._canvasOptions,o=n-t,l=this.constructor.prototype.checkMinBarSize;return(0,r.$K)(e)&&o>0?(i=l(this.fromValue(n/o),this.fromValue(e)-s.rangeMinVisible),a=Math.pow(s.base,this.fromValue(o)+i)-o):a=l(t,e),a}},p=Math.abs,m=["width","height","left","top","bottom","right"],V={to(t){var e=this._canvasOptions.startPoint+(this._options.conversionValue?t:Math.round(t));return e>this._canvasOptions.endPoint?this._canvasOptions.endPoint:e},from(t){return t-this._canvasOptions.startPoint}},O=function(t){return(0,a.S6)(m,(function(e,n){t[n]=parseInt(t[n])||0})),t},k=function(t){var e={};return t.forEach((function(t,n){e[t.valueOf()]=n})),e},M=function(t){function e(e,n){!(0,r.$K)(t[e])&&(0,r.$K)(t[n])&&(t[e]=t[n])}return t instanceof s.e||(t=new s.e(t)),e("minVisible","min"),e("maxVisible","max"),t};function P(t,e){var n,i,a,s,r="logarithmic"===e.axisType?function(t){return(0,d.RI)(t,e.base)}:function(t){return t},o=[],l=t.length,u=0;for(s=0;s<l;s++)n=t[s],i=r(n.from),a=r(n.to),u+=a-i,o.push({trFrom:i,trTo:a,from:n.from,to:n.to,length:u,cumulativeWidth:n.cumulativeWidth});return o}function x(t){var e=t.min,n=t.max,i=t.minVisible,a=t.maxVisible,s="logarithmic"===t.axisType;return s&&(a=(0,d.RI)(a,t.base,t.allowNegatives,t.linearThreshold),i=(0,d.RI)(i,t.base,t.allowNegatives,t.linearThreshold),e=(0,d.RI)(e,t.base,t.allowNegatives,t.linearThreshold),n=(0,d.RI)(n,t.base,t.allowNegatives,t.linearThreshold)),{base:t.base,rangeMin:e,rangeMax:n,rangeMinVisible:i,rangeMaxVisible:a}}function B(t){return{isStartSide:t?function(t,e,n,i){return t<=e[e.length-1][i]}:function(t,e,n,i){return t<e[0][n]},isEndSide:t?function(t,e,n,i){return t>e[0][n]}:function(t,e,n,i){return t>=e[e.length-1][i]},isInBreak:t?function(t,e,n,i){return t>e[i]&&t<=e[n]}:function(t,e,n,i){return t>=e[n]&&t<e[i]},isBetweenBreaks:t?function(t,e,n,i,a){return t>=e[a]&&t<n[i]}:function(t,e,n,i,a){return t<e[i]&&t>=n[a]},getLength:t?function(t,e){return e.length-t.length}:function(t){return t.length},getBreaksSize:t?function(t,e){return e.cumulativeWidth-t.cumulativeWidth}:function(t){return t.cumulativeWidth}}}var R=function(t,e,n){this.update(t,e,n)};R.prototype={constructor:R,reinit:function(){var t=this,e=t._options,n=t._businessRange,a=n.categories||[],s={},r=t._prepareCanvasOptions(),o=(0,d.Xc)(a,n.minVisible,n.maxVisible).categories,l=o.length;if(n.isEmpty())s=V;else switch(n.axisType){case"logarithmic":s=b;break;case"semidiscrete":s=g,r.ratioOfCanvasRange=r.canvasLength/(c.Z.addInterval(r.rangeMaxVisible,e.interval)-r.rangeMinVisible);break;case"discrete":s=h,t._categories=a,r.interval=t._getDiscreteInterval(e.addSpiderCategory?l+1:l,r),t._categoriesToPoints=k(a),l&&(r.startPointIndex=t._categoriesToPoints[o[0].valueOf()],t.visibleCategories=o);break;default:"datetime"===n.dataType&&(s=_)}(t._oldMethods||[]).forEach((function(e){delete t[e]})),t._oldMethods=Object.keys(s),(0,i.l)(t,s),t._conversionValue=e.conversionValue?function(t){return t}:function(t){return Math.round(t)},t.sc={},t._checkingMethodsAboutBreaks=[B(!1),B(t.isInverted())],t._translateBreaks(),t._calculateSpecialValues()},_translateBreaks:function(){var t,e,n,i,a=this._breaks,s=this._options.breaksSize;if(void 0!==a)for(t=0,i=a.length;t<i;t++)e=a[t],n=this.translate(e.to),e.end=n,e.start=e.gapSize?n:this.isInverted()?n+s:n-s},_checkValueAboutBreaks:function(t,e,n,i,a){var s,r,o,l,u={length:0,breaksSize:void 0,inBreak:!1},h=t[t.length-1];if(a.isStartSide(e,t,n,i))return u;if(a.isEndSide(e,t,n,i))return{length:h.length,breaksSize:h.cumulativeWidth,inBreak:!1};for(s=0,r=t.length;s<r;s++){if(o=t[s],l=t[s-1],a.isInBreak(e,o,n,i)){u.inBreak=!0,u.break=o;break}if(l&&a.isBetweenBreaks(e,o,l,n,i)){u={length:a.getLength(l,h),breaksSize:a.getBreaksSize(l,h),inBreak:!1};break}}return u},isInverted:function(){return!(this._options.isHorizontal^this._businessRange.invert)},_getDiscreteInterval:function(t,e){var n=t-(this._options.stick?1:0);return n>0?e.canvasLength/n:e.canvasLength},_prepareCanvasOptions(){var t,e=this._businessRange,n=this._canvasOptions=x(e),i=this._canvas,a=this._breaks;return n.startPadding=i.startPadding||0,n.endPadding=i.endPadding||0,this._options.isHorizontal?(n.startPoint=i.left+n.startPadding,t=i.width,n.endPoint=i.width-i.right-n.endPadding,n.invert=e.invert):(n.startPoint=i.top+n.startPadding,t=i.height,n.endPoint=i.height-i.bottom-n.endPadding,n.invert=!e.invert),this.canvasLength=n.canvasLength=n.endPoint-n.startPoint,n.rangeDoubleError=Math.pow(10,(0,d.wg)(n.rangeMax-n.rangeMin)-(0,d.wg)(t)-2),n.ratioOfCanvasRange=n.canvasLength/(n.rangeMaxVisible-n.rangeMinVisible),void 0!==a&&(n.ratioOfCanvasRange=(n.canvasLength-a[a.length-1].cumulativeWidth)/(n.rangeMaxVisible-n.rangeMinVisible-a[a.length-1].length)),n},updateCanvas:function(t){this._canvas=O(t),this.reinit()},updateBusinessRange:function(t){var e=t.breaks||[];this._userBreaks=t.userBreaks||[],this._businessRange=M(t),this._breaks=e.length?P(e,this._businessRange):void 0,this.reinit()},update:function(t,e,n){this._options=(0,i.l)(this._options||{},n),this._canvas=O(e),this.updateBusinessRange(t)},getBusinessRange:function(){return this._businessRange},getEventScale:function(t){return t.deltaScale||1},getCanvasVisibleArea:function(){return{min:this._canvasOptions.startPoint,max:this._canvasOptions.endPoint}},_calculateSpecialValues:function(){var t,e=this._canvasOptions,n=e.startPoint-e.startPadding,i=e.endPoint+e.endPadding,a=this._businessRange,s=a.minVisible,o=a.maxVisible,l=n+e.canvasLength/2;if(s<0&&o>0&&s!==o&&(t=this.translate(0,1)),!(0,r.$K)(t)){var u=a.invert^(s<0&&o<=0);t=this._options.isHorizontal?u?i:n:u?n:i}this.sc={canvas_position_default:t,canvas_position_left:n,canvas_position_top:n,canvas_position_center:l,canvas_position_middle:l,canvas_position_right:i,canvas_position_bottom:i,canvas_position_start:e.invert?i:n,canvas_position_end:e.invert?n:i}},translateSpecialCase(t){return this.sc[t]},_calculateProjection:function(t){var e=this._canvasOptions;return e.invert?e.endPoint-t:e.startPoint+t},_calculateUnProjection:function(t){var e=this._canvasOptions;return"datetime"===this._businessRange.dataType&&(t=Math.round(t)),e.invert?e.rangeMaxVisible.valueOf()-t:e.rangeMinVisible.valueOf()+t},getMinBarSize:function(t){var e=this.getCanvasVisibleArea(),n=this.from(e.min+t);return p(this.from(e.min)-((0,r.$K)(n)?n:this.from(e.max)))},checkMinBarSize:function(t,e,n){return p(t)<e?t>=0?e:-e:t},translate(t,e){var n=this.translateSpecialCase(t);return(0,r.$K)(n)?Math.round(n):isNaN(t)?null:this.to(t,e)},getInterval:function(t){var e,n=this._canvasOptions;return t=null!==(e=t)&&void 0!==e?e:this._businessRange.interval,t?Math.round(n.ratioOfCanvasRange*t):Math.round(n.endPoint-n.startPoint)},zoom(t,e,n){var i=this._canvasOptions;if(i.rangeMinVisible.valueOf()===i.rangeMaxVisible.valueOf()&&0!==t)return this.zoomZeroLengthRange(t,e);var a=i.startPoint,s=i.endPoint,l=this.isInverted(),u=(a+t)/e,h=(s+t)/e;n=n||{};var c,v,g=this.to(l?n.endValue:n.startValue),f=this.to(l?n.startValue:n.endValue);return g>u&&(h-=u-g,u=g,c=l?n.endValue:n.startValue),f<h&&(u-=h-f,h=f,v=l?n.startValue:n.endValue),f-g<h-u&&(u=g,h=f),t=(s-a)*u/(h-u)-a,e=(a+t)/u||1,c=(0,r.$K)(c)?c:(0,o.zB)(this.from(u,1)),v=(0,r.$K)(v)?v:(0,o.zB)(this.from(h,-1)),e<=1&&(c=this._correctValueAboutBreaks(c,1===e?t:-1),v=this._correctValueAboutBreaks(v,1===e?t:1)),c>v?(c=c>n.endValue?n.endValue:c,v=v<n.startValue?n.startValue:v):(c=c<n.startValue?n.startValue:c,v=v>n.endValue?n.endValue:v),{min:c,max:v,translate:(0,o.zB)(t),scale:(0,o.zB)(e)}},_correctValueAboutBreaks(t,e){var n=this._userBreaks.filter((e=>t>=e.from&&t<=e.to));return n.length?e>0?n[0].to:n[0].from:t},zoomZeroLengthRange(t,e){var n=this._canvasOptions,i=n.rangeMin,a=n.rangeMax,s=(a.valueOf()!==i.valueOf()?a.valueOf()-i.valueOf():p(n.rangeMinVisible.valueOf()-i.valueOf()))/n.canvasLength,l=(0,r.J_)(a)||(0,r.J_)(i),u="logarithmic"===this._businessRange.axisType,h=n.rangeMinVisible.valueOf()-s,c=n.rangeMaxVisible.valueOf()+s;return h=u?(0,o.zB)((0,d.p3)(h,n.base)):l?new Date(h):h,c=u?(0,o.zB)((0,d.p3)(c,n.base)):l?new Date(c):c,{min:h,max:c,translate:t,scale:e}},getMinScale:function(t){var{dataType:e,interval:n}=this._businessRange;return"datetime"===e&&1===n?this.getDateTimeMinScale(t):t?1.1:.9},getDateTimeMinScale(t){var e=this._canvasOptions,n=e.canvasLength/e.ratioOfCanvasRange;return n+=(parseInt(.1*n)||1)*(t?-2:2),e.canvasLength/(Math.max(n,1)*e.ratioOfCanvasRange)},getScale:function(t,e){var n=this._canvasOptions;return n.rangeMax===n.rangeMin?1:(t=(0,r.$K)(t)?this.fromValue(t):n.rangeMin,e=(0,r.$K)(e)?this.fromValue(e):n.rangeMax,(n.rangeMax-n.rangeMin)/Math.abs(t-e))},isValid:function(t){var e=this._canvasOptions;return t=this.fromValue(t),null!==t&&!isNaN(t)&&t.valueOf()+e.rangeDoubleError>=e.rangeMin&&t.valueOf()-e.rangeDoubleError<=e.rangeMax},getCorrectValue:function(t,e){var n,i=this._breaks;return t=this.fromValue(t),this._breaks&&(n=this._checkValueAboutBreaks(i,t,"trFrom","trTo",this._checkingMethodsAboutBreaks[0]),!0===n.inBreak)?this.toValue(e>0?n.break.trTo:n.break.trFrom):this.toValue(t)},to:function(t,e){var n=this.getBusinessRange();if((0,r.$K)(n.maxVisible)&&(0,r.$K)(n.minVisible)&&n.maxVisible.valueOf()===n.minVisible.valueOf())return(0,r.$K)(t)&&n.maxVisible.valueOf()===t.valueOf()?this.translateSpecialCase(0===t&&this._options.shiftZeroValue?"canvas_position_default":"canvas_position_middle"):null;t=this.fromValue(t);var i=this._canvasOptions,a=this._breaks,s={length:0},o=0;return void 0!==a&&(s=this._checkValueAboutBreaks(a,t,"trFrom","trTo",this._checkingMethodsAboutBreaks[0]),o=(0,r.$K)(s.breaksSize)?s.breaksSize:0),!0===s.inBreak?e>0?s.break.start:e<0?s.break.end:null:this._conversionValue(this._calculateProjection((t-i.rangeMinVisible-s.length)*i.ratioOfCanvasRange+o))},from:function(t,e){var n=this._breaks,i={length:0},a=this._canvasOptions,s=a.startPoint,o=0;return void 0!==n&&(i=this._checkValueAboutBreaks(n,t,"start","end",this._checkingMethodsAboutBreaks[1]),o=(0,r.$K)(i.breaksSize)?i.breaksSize:0),!0===i.inBreak?e>0?this.toValue(i.break.trTo):e<0?this.toValue(i.break.trFrom):null:this.toValue(this._calculateUnProjection((t-s-o)/a.ratioOfCanvasRange+i.length))},isValueProlonged:!1,getRange:function(){return[this.toValue(this._canvasOptions.rangeMin),this.toValue(this._canvasOptions.rangeMax)]},getScreenRange:function(){return[this._canvasOptions.startPoint,this._canvasOptions.endPoint]},add:function(t,e,n){return this._add(t,e,(this._businessRange.invert?-1:1)*n)},_add:function(t,e,n){return this.toValue(this.fromValue(t)+e*n)},fromValue:function(t){return null!==t?Number(t):null},toValue:function(t){return null!==t?Number(t):null},ratioOfCanvasRange(){return this._canvasOptions.ratioOfCanvasRange},convert:t=>t,getRangeByMinZoomValue(t,e){return e.minVisible+t<=this._businessRange.max?[e.minVisible,e.minVisible+t]:[e.maxVisible-t,e.maxVisible]}}}}]);