"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[407],{2308:function(e,t,i){var s=i(53342);t.A=s.Ay},7698:function(e,t,i){var s=i(69135);t.A=s.Ay},11697:function(e,t,i){i.d(t,{A:function(){return k}});var s=i(82950),n=(i(55101),i(74567)),o=i(82454),a=i(66529),r=i(92324),l=i(35754),p=i(7686),h=i(85563),u=i(39889),d=i(66703),c=i(44956),_=i(89214),m=i(50172),g=(i(69375),i(82438),i(12266),i(99819),i(57327),i(32225),i(61928)),v=i(85386),C=i(90218),f=i(47759),S=i(8055),E=i(1767),b=i(27996),I=i(92240),A=i(93821),y=i(43499),D=i(46361),w=i(12590);const x=(0,b.zk)(),V=["startswith","contains","endwith","notcontains"],T="android"!==C.A.real().platform;class O extends D.A{_supportedKeys(){const e=super._supportedKeys();return(0,s.A)({},e,{tab(t){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(t);const{focusedElement:e}=this._list.option(),i=(0,h.A)(e);i.length&&this._setSelectedElement(i)}e.tab(t)},space:u.lQ,home:u.lQ,end:u.lQ})}_allowSelectItemByTab(){const{opened:e,applyValueMode:t}=this.option();return e&&"instantly"===t}_setSelectedElement(e){const t=this._valueGetter(this._list._getItemData(e));this._setValue(t)}_setValue(e){this.option("value",e)}_getDefaultOptions(){return(0,s.A)({},super._getDefaultOptions(),I.A._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:o.A.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:u.lQ,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])}_setOptionsByReference(){super._setOptionsByReference(),(0,c.X)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})}_init(){super._init(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()}_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)}_initItems(){const{items:e}=this.option();e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())}_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()}_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})}_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({item:new S.M("item")})}_isEditable(){const{searchEnabled:e}=this.option();return super._isEditable()||e}_saveFocusOnWidget(){var e;null!==(e=this._list)&&void 0!==e&&e.initialOption("focusStateEnabled")&&this._focusInput()}_fitIntoRange(e,t,i){return e>i?t:e<t?i:e}_items(){const e=this._getPlainItems(!this._list&&this._dataSource.items()),t=new v.A(e).filter("disabled","<>",!0).toArray();return t}_calcNextItem(e){const t=this._items(),i=this._fitIntoRange(this._getSelectedIndex()+e,0,t.length-1);return t[i]}_getSelectedIndex(){const e=this._items(),t=this.option("selectedItem");let i=-1;return(0,_.__)(e,(e,s)=>{if(this._isValueEquals(s,t))return i=e,!1}),i}_createPopup(){super._createPopup(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const e=this._popup.$content();g.A.off(e,"mouseup"),g.A.on(e,"mouseup",this._saveFocusOnWidget.bind(this))}_updateCustomBoundaryContainer(){const e=this.option("dropDownOptions.container"),t=e&&(0,h.A)(e);if(t&&t.length&&!(0,m.l6)(t.get(0))){const e=[].slice.call(t.parents());e.unshift(t.get(0)),(0,_.__)(e,(e,t)=>t!==(0,h.A)("body").get(0)&&("hidden"===x.getComputedStyle(t).overflowY?(this._$customBoundaryContainer=(0,h.A)(t),!1):void 0))}}_popupWrapperClass(){return"dx-dropdownlist-popup-wrapper"}_renderInputValue(){var e=this;let{value:t,renderOnly:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=t??this._getCurrentValue();return this._rejectValueLoading(),i?super._renderInputValue(s):this._loadInputValue(s,function(){e._setSelectedItem(...arguments)}).always(super._renderInputValue.bind(this,s))}_loadInputValue(e,t){return this._loadItem(e).always(t)}_getItemFromPlain(e,t){let i,s;return t&&"object"!==typeof e&&(t.itemByValue||(t.itemByValue={},i=this._getPlainItems(),i.forEach(function(e){t.itemByValue[this._valueGetter(e)]=e},this)),s=t.itemByValue[e]),s||(i=this._getPlainItems(),s=(0,u.VM)(i,t=>this._isValueEquals(this._valueGetter(t),e))[0]),s}_resetInputText(){this._renderInputValue({renderOnly:!0})}_loadItem(e,t){const i=this._getItemFromPlain(e,t);return void 0!==i?(0,d.cY)().resolve(i).promise():this._loadValue(e)}_getPlainItems(e){let t=[];const{grouped:i}=this.option();e=e||this.option("items")||this._dataSource.items()||[];for(let n=0;n<e.length;n++){var s;i&&null!==(s=e[n])&&void 0!==s&&s.items?t=t.concat(e[n].items):t.push(e[n])}return t}_updateActiveDescendant(e){var t;const i=this.option("opened"),s=null===(t=this._list)||void 0===t?void 0:t.getFocusedItemId(),n=(0,h.A)(`#${s}`).length>0,o=i&&n&&s;this.setAria({activedescendant:o||null},e)}_setSelectedItem(e){const t=this._displayValue(e);this.option("selectedItem",(0,u.YD)(e,null)),this.option("displayValue",t)}_displayValue(e){return this._displayGetter(e)}_refreshSelected(){const e={};this._listItemElements().each((t,i)=>{const s=(0,h.A)(i),n=this._valueGetter(s.data("dxListItemData")),o=this._isSelectedValue(n,e);o?this._list.selectItem(s):this._list.unselectItem(s)})}_popupShownHandler(){super._popupShownHandler(),this._setFocusPolicy()}_setFocusPolicy(){this.option("focusStateEnabled")&&this._list&&this._list.option("focusedElement",null)}_isSelectedValue(e,t){return this._isValueEquals(e,this.option("value"))}_validateSearchMode(){const e=this.option("searchMode"),t=e.toLowerCase();if(!V.includes(t))throw A.A.Error("E1019",e)}_clearSelectedItem(){this.option("selectedItem",null)}_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(()=>{this._isCustomValueAllowed()||this._clearSelectedItem()})}_isCustomValueAllowed(){return this.option("displayCustomValue")}clear(){super.clear(),this._clearFilter(),this._clearSelectedItem()}_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):(0,h.A)()}_popupConfig(){return(0,s.A)({},super._popupConfig(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})}_renderPopupContent(){super._renderPopupContent(),this._renderList()}_getKeyboardListeners(){const e=this._canListHaveFocus();return e?super._getKeyboardListeners():super._getKeyboardListeners().concat([this._list])}_renderList(){this._listId=`dx-${(new f.A)._value}`;const e=(0,h.A)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=e,this._list=this._createComponent(e,w.A,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()}_renderPreventBlurOnListClick(){const e=(0,n.b4)("mousedown","dxDropDownList");g.A.off(this._$list,e),g.A.on(this._$list,e,e=>e.preventDefault())}_getControlsAria(){return this._list&&this._listId}_renderOpenedState(){super._renderOpenedState(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)}_getAriaHasPopup(){return"listbox"}_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()}_shouldRefreshDataSource(){const e=!!this._list.option("dataSource");return e!==this._needPassDataSourceToList()}_isDesktopDevice(){return"desktop"===C.A.real().deviceType}_listConfig(){const{noDataText:e,grouped:t,wrapItemText:i,itemTemplate:s,groupTemplate:n,hoverStateEnabled:o,focusStateEnabled:a,encodeNoDataText:r,useItemTextAsTitle:l}=this.option(),p={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:e,encodeNoDataText:r,grouped:t,wrapItemText:i,useItemTextAsTitle:l,onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:s,indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:n,onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&o,focusStateEnabled:!!this._isDesktopDevice()&&a,_onItemsRendered:()=>{this._popup.repaint()}};return this._canListHaveFocus()||(p.tabIndex=null),p}_canListHaveFocus(){return!1}_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null}_dataSourceOptions(){return{paginate:!1}}_getSpecificDataSourceOption(){const{grouped:e}=this.option(),t=this.option("dataSource");return t&&e?(0,y.s)(t):t}_dataSourceFromUrlLoadMode(){return"raw"}_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()}_setListOption(e,t){this._setWidgetOption("_list",arguments)}_listItemClickAction(e){this._listItemClickHandler(e),this._itemClickAction(e)}_listItemClickHandler(e){}_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))}_needPassDataSourceToList(){const{showDataBeforeSearch:e}=this.option();return e||this._isMinSearchLengthExceeded()}_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")}_needClearFilter(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()}_canKeepDataSource(){const e=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!e&&!this._isLastMinSearchLengthExceeded}_searchValue(){return this._input().val()||""}_getSearchEvent(){return(0,n.b4)("input",`${this.NAME}Search`)}_getCompositionStartEvent(){return(0,n.b4)("compositionstart",`${this.NAME}CompositionStart`)}_getCompositionEndEvent(){return(0,n.b4)("compositionend",`${this.NAME}CompositionEnd`)}_getSetFocusPolicyEvent(){return(0,n.b4)("input",`${this.NAME}FocusPolicy`)}_renderEvents(){super._renderEvents(),g.A.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(g.A.on(this._input(),this._getSearchEvent(),e=>{this._searchHandler(e)}),T&&(g.A.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),g.A.on(this._input(),this._getCompositionEndEvent(),e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())})))}_shouldRenderSearchEvent(){return this.option("searchEnabled")}_refreshEvents(){g.A.off(this._input(),this._getSearchEvent()),g.A.off(this._input(),this._getSetFocusPolicyEvent()),T&&(g.A.off(this._input(),this._getCompositionStartEvent()),g.A.off(this._input(),this._getCompositionEndEvent())),super._refreshEvents()}_isTextCompositionInProgress(e){if(!arguments.length)return this._isTextComposition;this._isTextComposition=e}_searchHandler(e,t){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();const{searchTimeout:i}=this.option();i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(t)},i)):this._searchDataSource(t)}_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()}_searchDataSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(e)}_filterDataSource(e){this._clearSearchTimer();const t=this._dataController;t.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),t.searchOperation(this.option("searchMode")),t.searchValue(e),t.load().done(this._dataSourceFiltered.bind(this,e))}_clearFilter(){const e=this._dataController;e.searchValue()&&e.searchValue(null)}_dataSourceFiltered(e){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()}_shouldOpenPopup(){return this._hasItemsToShow()}_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&(this._updatePopupWidth(),this._updateListDimensions()))}_dataSourceChangedHandler(e){0===this._dataController.pageIndex()?this.option().items=e:this.option().items=this.option().items.concat(e)}_hasItemsToShow(){const e=this._dataController,t=e.items()||[],i=t.length,s=this._needPassDataSourceToList();return!(!s||!i)}_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer}_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()}_dimensionChanged(){super._dimensionChanged(),this._updateListDimensions()}_needPopupRepaint(){const e=this._dataController,t=e.pageIndex(),i=(0,m.O9)(this._pageIndex)&&t<=this._pageIndex||e.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=t,i}_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())}_getMaxHeight(){const e=this.$element(),t=this._$customBoundaryContainer,i=e.offset().top-(t?t.offset().top:0),s=(0,E.P$)(x),n=t?Math.min((0,E.P$)(t),s):s,o=Math.max(i,n-i-(0,E.P$)(e));return Math.min(.5*n,o)}_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,super._clean()}_dispose(){this._clearSearchTimer(),super._dispose()}_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)}_setSubmitValue(){const e=this.option("value"),t=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(t)}_shouldUseDisplayValue(e){return"this"===this.option("valueExpr")&&(0,m.Gv)(e)}_optionChanged(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),super._optionChanged(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:super._optionChanged(e)}}}O.include(I.A),(0,a.A)("dxDropDownList",O);var P=O;class H extends P{_supportedKeys(){const e=this,t=super._supportedKeys(),i=function(e){const t=this._isEditable();t?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(e.preventDefault(),this.clear()),this._savedTextRemoveEvent=e,this._preventSubstitution=!0},n=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return(0,s.A)({},t,{tab(){const{opened:e}=this.option(),i=e&&!!this._popup.getFocusableElements().length;i||this._resetCaretPosition(!0),t.tab&&t.tab.apply(this,arguments),i||this._cancelSearchIfNeed()},upArrow(e){if(t.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(e),!0},downArrow(e){if(t.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(e),!0},leftArrow(){var e;n(),null===(e=t.leftArrow)||void 0===e||e.apply(this,arguments)},rightArrow(){var e;n(),null===(e=t.rightArrow)||void 0===e||e.apply(this,arguments)},home(){var e;n(),null===(e=t.home)||void 0===e||e.apply(this,arguments)},end(){var e;n(),null===(e=t.end)||void 0===e||e.apply(this,arguments)},escape(){var e;const i=null===(e=t.escape)||void 0===e?void 0:e.apply(this,arguments);return this._cancelEditing(),i??!0},enter(e){const i=this.option("opened"),s=this._input().val().trim(),n=s&&this._list&&!this._list.option("focusedElement");if(!s&&(0,m.O9)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(e),this.option({selectedItem:null,value:null}),this.close();else{var o;if(this.option("acceptCustomValue"))return e.preventDefault(),n&&(i&&this._toggleOpenState(),this._valueChangeEventHandler(e)),i;if(null!==(o=t.enter)&&void 0!==o&&o.apply(this,arguments))return i}},space(e){const t=this.option("opened"),i=this.option("searchEnabled"),s=this.option("acceptCustomValue");if(t&&!i&&!s)return e.preventDefault(),this._valueChangeEventHandler(e),!0},backspace:i,del:i})}_getDefaultOptions(){return(0,s.A)({},super._getDefaultOptions(),{placeholder:o.A.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",acceptCustomValue:!1,onCustomItemCreating(e){(0,m.O9)(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})}_init(){super._init(),this._initCustomItemCreatingAction()}_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),super._initMarkup(),this._$container.addClass("dx-selectbox-container")}_createPopup(){super._createPopup(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)}_popupWrapperClass(){return`${super._popupWrapperClass()} dx-selectbox-popup-wrapper`}_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))}_renderOpenedState(){super._renderOpenedState(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())}_focusSelectedElement(){const e=this._searchValue();if(!e)return void this._focusListElement(null);const{items:t,selectedItem:i}=this.option(),s=this._list._itemElements(),n=(null===t||void 0===t?void 0:t.indexOf(i))??-1,o=-1===n||this._isCustomItemSelected()?null:s.eq(n);this._focusListElement(o)}_renderFocusedElement(){if(!this._list)return;const e=this._searchValue();if(!e||this.option("acceptCustomValue"))return void this._focusListElement(null);const t=this._list._itemElements(),i=t.not(".dx-state-disabled").eq(0);this._focusListElement(i)}_focusListElement(e){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,l.cc)(e)),delete this._preventInputValueRender}_scrollToSelectedItem(){if(!this._list)return;const{selectedItem:e}=this._list.option();this._list.scrollToItem(e)}_listContentReadyHandler(){super._listContentReadyHandler();const e=this._dataController.paginate();e&&this._needPopupRepaint()||this._scrollToSelectedItem()}_renderValue(){return this._renderInputValue(),this._setSubmitValue(),(0,d.cY)().resolve()}_renderInputValue(){return super._renderInputValue(...arguments).always(()=>{this._renderInputValueAsync()})}_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})}_renderInputValueImpl(){return this._renderField(),(0,d.cY)().resolve()}_setNextItem(e){const t=this._calcNextItem(e),i=this._valueGetter(t);this._setValue(i)}_setNextValue(e){const t=this._dataController.isLoaded()?(0,d.cY)().resolve():this._dataController.load();t.done(()=>{const t=this._getSelectedIndex(),i=this._dataController.pageSize(),s=this._dataController.isLastPage(),o=t===this._items().length-1;this._saveValueChangeEvent(e);const a="downArrow"===(0,n.YD)(e)?1:-1;i&&!s&&o&&a>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,a))):this._setNextItem(a)})}_setSelectedItem(e){const t=!this._isCustomValueAllowed()&&void 0===e;super._setSelectedItem(t?null:e),t||this._isEditable()&&!this._isCustomItemSelected()||this._setListOption("selectedItem",this.option("selectedItem"))}_isCustomValueAllowed(){return this.option("acceptCustomValue")||super._isCustomValueAllowed()}_displayValue(e){return e=!(0,m.O9)(e)&&this._isCustomValueAllowed()?this.option("value"):e,super._displayValue(e)}_listConfig(){const e=(0,c.X)(super._listConfig(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this),_onItemsRendered:()=>{this._popup.repaint(),this.option("opened")&&this._scrollToSelectedItem()}});return this.option("showSelectionControls")&&(0,c.X)(e,{showSelectionControls:!0,selectByClick:!0}),e}_listFocusedItemChangeHandler(e){if(this._preventInputValueRender)return;const t=e.component,i=(0,h.A)(t.option("focusedElement")),s=t._getItemData(i);this._updateField(s)}_updateField(e){const t=this._getTemplateByOption("fieldTemplate");if(!t||!this.option("fieldTemplate")){const t=this._displayGetter(e);return this.option("text",t),void this._renderDisplayText(t)}this._renderField()}_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):u.lQ}_selectionChangeHandler(e){(0,_.__)(e.addedItems||[],(e,t)=>{this._setValue(this._valueGetter(t))})}_getActualSearchValue(){return this._dataController.searchValue()}_isInlineAutocompleteEnabled(){const{searchEnabled:e,acceptCustomValue:t,searchMode:i}=this.option();return e&&!t&&"startswith"===i}_getAriaAutocomplete(){const{disabled:e,readOnly:t,searchEnabled:i}=this.option(),s=!(t||e),n=i&&s;if(!n)return"none";const o=this._isInlineAutocompleteEnabled(),a=o?"both":"list";return a}_toggleOpenState(e){if(!this.option("disabled")){if(e=arguments.length?e:!this.option("opened"),e||this._shouldClearFilter()||this._restoreInputText(!0),this._wasSearch()&&e){this._wasSearch(!1);const e=this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded();if(e&&this._dataController.getDataSource()){if(this._searchTimer)return;const e=this._getActualSearchValue();e&&this._wasSearch(!0),this._filterDataSource(e||null)}else this._setListOption("items",[])}e&&this._scrollToSelectedItem(),super._toggleOpenState(e)}}_renderTooltip(){const{tooltipEnabled:e,displayValue:t}=this.option();e&&this.$element().attr("title",t)}_renderDimensions(){super._renderDimensions(),this._updatePopupWidth(),this._updateListDimensions()}_isValueEqualInputText(){const e=this.option("selectedItem");if(null===e)return!1;const t=this._displayGetter(e),i=t?String(t):"",s=this._searchValue();return i===s}_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),super._popupHidingHandler()}_popupHiddenHandler(){super._popupHiddenHandler(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))}_restoreInputText(e){var t;this.option("readOnly")||null===(t=this._loadItemDeferred)||void 0===t||t.always(()=>{const{acceptCustomValue:t,text:i,selectedItem:s,customItemCreateEvent:n}=this.option();if(t){if(!e&&!this._isValueChanging){let e=null;(0,m.O9)(s)?e=s:""!==n&&(e=this._createCustomItem(i)),this._updateField(e),this._clearFilter()}}else this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(e=>{const t=(0,u.YD)(e,s);this._setSelectedItem(t),this._updateField(t),this._clearFilter()})})}_valueChangeEventIncludesBlur(){const e=this.option(this._getValueChangeEventOptionName());return e.includes("blur")}_isPreventedFocusOutEvent(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()}_focusOutHandler(e){if(!this._isPreventedFocusOutEvent(e)){const t=this._isOverlayNestedTarget(e.relatedTarget);t||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)}e.target=this._input().get(0),super._focusOutHandler(e)}_cancelSearchIfNeed(e){const{searchEnabled:t}=this.option(),i=this._isOverlayNestedTarget(null===e||void 0===e?void 0:e.relatedTarget),s=this._wasSearch()&&t&&!i;if(s){var n;const e=null===(n=this._popup)||void 0===n?void 0:n._hideAnimationProcessing;this._clearSearchTimer(),e?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}}_shouldCancelSearch(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e}_isOverlayNestedTarget(e){return!!(0,h.A)(e).closest(".dx-selectbox-popup-wrapper").length}_clearTextValue(){const e=this.option("selectedItem"),t=this._displayGetter(e),i=e&&""!==t;i&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent}_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()}_isFocused(){const e=r.A.getActiveElement(this.element());return super._isFocused()&&(0,h.A)(e).closest(this._input()).length>0}_getValueChangeEventOptionName(){return"customItemCreateEvent"}_renderValueChangeEvent(){this._isEditable()&&super._renderValueChangeEvent()}_fieldRenderData(){const{focusedElement:e}=this.option(),t=this._list&&this.option("opened")&&(0,h.A)(e);return null!==t&&void 0!==t&&t.length?this._list._getItemData(t):this.option("selectedItem")}_isSelectedValue(e,t){return this._isValueEquals(e,this.option("value"))}_shouldCloseOnItemClick(){const{selectionMode:e}=this.option();return!(this.option("showSelectionControls")&&"single"!==e)}_listItemClickHandler(e){const t=this._getCurrentValue();this._focusListElement((0,h.A)(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&t===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()}_shouldClearFilter(){return this._wasSearch()}_completeSelection(e){this._setValue(e)}_loadItem(e,t){const i=this,s=(0,d.cY)();return super._loadItem(e,t).done(e=>{s.resolve(e)}).fail(t=>{if(null!==t&&void 0!==t&&t.shouldSkipCallback)return;const n=i.option("selectedItem");i.option("acceptCustomValue")&&e===i._valueGetter(n)?s.resolve(n):s.reject()}),s.promise()}_loadInputValue(e,t){return this._loadItemDeferred=this._loadItem(e).always(t),this._loadItemDeferred}_isCustomItemSelected(){const e=this.option("selectedItem"),t=this._searchValue(),i=this._displayGetter(e);return!i||t!==i.toString()}_valueChangeEventHandler(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))}_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")}_createCustomItem(e){const t={text:e},i=this._customItemCreatingAction(t),s=(0,u.YD)(i,t.customItem);return(0,m.O9)(i)&&p.A.log("W0015","onCustomItemCreating","customItem"),s}_customItemAddedHandler(e){const t=this._searchValue(),i=this._createCustomItem(t);if(this._saveValueChangeEvent(e),void 0===i)throw this._renderValue(),p.A.Error("E0121");(0,m.yL)(i)?(0,d.Sx)(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)}_setCustomItem(e){this._disposed||(e=e||null,this.option("selectedItem",e),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)),this._isValueChanging=!1)}_clearValueHandler(e){return this._preventFiltering=!0,super._clearValueHandler(e),this._searchCanceled(),!1}_wasSearch(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e}_searchHandler(e){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),super._searchHandler(arguments))}_dataSourceFiltered(e){super._dataSourceFiltered(),null!==e&&(this._renderInputSubstitution(),this._renderFocusedElement())}_valueSubstituted(){const e=this._input().get(0),t=this._searchValue().length,i=0===e.selectionStart&&e.selectionEnd===t,s=e.selectionStart!==e.selectionEnd,n=t===e.selectionEnd;return this._wasSearch()&&s&&!i&&n&&this._shouldSubstitutionBeRendered()}_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()}_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered())return void delete this._preventSubstitution;const e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!e)return;const t=this._input(),i=t.val().length;if(0===i)return;const s=t.get(0),n=this._displayGetter(e).toString();s.value=n,this._caret({start:i,end:n.length})}_dispose(){this._renderInputValueAsync=u.lQ,delete this._loadItemDeferred,super._dispose()}_optionChanged(e){switch(e.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":super._optionChanged(e),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:super._optionChanged(e)}}}(0,a.A)("dxSelectBox",H);var k=H},46361:function(e,t,i){i.d(t,{E:function(){return k},A:function(){return K}});i(82438),i(99819);var s=i(82950),n=i(93076),o=i(22044),a=i(59981),r=i(61928),l=i(74567),p=i(82454),h=i(66529),u=i(90218),d=i(35754),c=i(47759),_=i(85563),m=i(6815),g=i(26228),v=i(39889),C=i(44956),f=i(89214),S=i(94360),E=i(50172),b=i(27996),I=i(2308),A=i(93821),y=i(7698),D=i(29018),w=i(83684),x=i(98793),V=i(99408);const T="dx-dropdowneditor-button-visible",O="dxDropDownEditor-selectLabel";class P extends V.A{constructor(e,t,i){super(e,t,i),this.currentTemplate=null}_attachEvents(e){const{editor:t}=this;e.option("onClick",e=>{var i;(null!==(i=t._shouldCallOpenHandler)&&void 0!==i&&i.call(t)||!t.option("openOnFieldClick"))&&t._openHandler(e)}),r.A.on(e.$element(),"mousedown",e=>{t.$element().is(".dx-state-focused")&&e.preventDefault()})}_create(){const{editor:e}=this,t=(0,_.A)("<div>"),i=this._getOptions();this._addToContainer(t);const s=e._createComponent(t,x.A,(0,C.X)({},i,{elementAttr:{"aria-label":p.A.format(O)}}));return this._legacyRender(e.$element(),t,i.visible),{$element:t,instance:s}}_getOptions(){const{editor:e}=this,t=this._isVisible(),i=e.option("readOnly"),s={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:i,visible:t};return this._addTemplate(s),s}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,i){e.toggleClass(T,i),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){const e=super.update();if(e){const{editor:e,instance:t}=this,i=e.$element(),s=this._getOptions();null===t||void 0===t||t.option(s),this._legacyRender(i,null===t||void 0===t?void 0:t.$element(),s.visible)}}}var H=i(13819);const k="dx-dropdowneditor",L="dx-dropdowneditor-input-wrapper",F="dx-dropdowneditor-overlay",$="dx-dropdowneditor-overlay-flipped",B="dx-dropdowneditor-active",R="dx-dropdowneditor-field-clickable",M="dx-dropdowneditor-field-template-wrapper",G="ios"===u.A.current().platform;function W(){return(0,_.A)("<div>").addClass(M)}class N extends w.A{_supportedKeys(){return(0,s.A)({},super._supportedKeys(),{tab:e=>{if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length)return void this.close();const t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&(r.A.trigger(t,"focus"),t.select()),e.preventDefault()},escape:e=>(this.option("opened")&&e.preventDefault(),this.close(),!0),upArrow:e=>!(!(0,l.By)(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey))||(this.close(),!1),downArrow:e=>!(!(0,l.By)(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey))||(this._validatedOpening(),!1),enter:e=>(this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0)})}_getDefaultButtons(){return super._getDefaultButtons().concat([{name:"dropDown",Ctor:P}])}_getDefaultOptions(){return(0,s.A)({},super._getDefaultOptions(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:p.A.format("OK"),cancelButtonText:p.A.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto",_userDropDownOptions:{}})}_useTemplates(){return!0}_getDefaultPopupPosition(e){const t=(0,S.n)(e);return{offset:{h:0,v:-1},my:`${t} top`,at:`${t} bottom`,collision:"flip flip"}}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device(e){const t="generic"===e.platform;return t},options:{popupPosition:{offset:{v:0}}}}])}_inputWrapper(){return this.$element().find(`.${L}`).first()}_init(){super._init(),this._initVisibilityActions(),this._initPopupInitializedAction();const{rtlEnabled:e,dropDownOptions:t}=this.option();this._updatePopupPosition(e),this._cacheUserDropDownOptions(t)}_updatePopupPosition(e){const{my:t,at:i}=this._getDefaultPopupPosition(e),s=this.option("popupPosition");this.option("popupPosition",(0,C.X)({},s,{my:t,at:i}))}_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})}_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})}_initMarkup(){this._renderSubmitElement(),super._initMarkup(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())}_render(){this._detachFocusEvents(),super._render(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()}_renderContentImpl(){this.option("deferRendering")||this._createPopup()}_renderInput(){super._renderInput(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()}_wrapInput(){this._$container=this.$element().wrapInner((0,_.A)("<div>").addClass(L)).children().eq(0)}_getAriaHasPopup(){return"true"}_getAriaAutocomplete(){return"none"}_getAriaRole(){return"combobox"}_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})}_readOnlyPropValue(){return!this._isEditable()||super._readOnlyPropValue()}_cleanFocusState(){super._cleanFocusState(),this.option("fieldTemplate")&&this._detachFocusEvents()}_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")}_renderMask(){this.option("fieldTemplate")||super._renderMask()}_renderField(){const e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())}_renderPlaceholder(){const e=!!this._getFieldTemplate();e||super._renderPlaceholder()}_renderValue(){this.option("useHiddenSubmitElement")&&this._setSubmitValue();const e=super._renderValue();return e.always(this._renderField.bind(this))}_getButtonsContainer(){const e=this._getFieldTemplate();return e?this._$container:this._$textEditorContainer}_renderTemplateWrapper(){const e=this._getFieldTemplate();e&&(this._$templateWrapper||(this._$templateWrapper=W().prependTo(this.$element())))}_renderTemplatedField(e,t){const i=(0,D["in"])(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove();const s=W();this._$templateWrapper.replaceWith(s),this._$templateWrapper=s;const n=Symbol("renderContext");this._activeRenderContext=n,e.render({model:t,container:(0,d.cc)(this._$templateWrapper),onRendered:()=>{if(this._activeRenderContext!==n)return;const e=this._input();if(!e.length)throw A.A.Error("E1010");if(this._integrateInput(),i)if(g.A.mozilla){const t=e.get(0);t.focus({preventScroll:!0})}else r.A.trigger(e,"focus")}})}_integrateInput(){const{isValid:e}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!e);const{_onMarkupRendered:t}=this.option();null===t||void 0===t||t()}_refreshEmptinessEvent(){r.A.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()}_fieldRenderData(){return this.option("value")}_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new m.l(e=>{const t=(0,_.A)("<div>").addClass("dx-dropdowneditor-icon");(0,_.A)(e.container).append(t)})}),super._initTemplates()}_renderOpenHandler(){const e=this._inputWrapper(),t=(0,l.b4)(a.U,this.NAME),{openOnFieldClick:i}=this.option();r.A.off(e,t),r.A.on(e,t,this._getInputClickHandler(i)),this.$element().toggleClass(R,i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))}_attachFocusOutHandler(){G&&(this._detachFocusOutEvents(),r.A.on(this._inputWrapper(),(0,l.b4)("focusout",this.NAME),e=>{const t=e.relatedTarget;if(t&&this.option("opened")){const e=this._isTargetOutOfComponent(t);e&&this.close()}}))}_isTargetOutOfComponent(e){const t=this.content?(0,_.A)(this.content()).closest(`.${F}`):this._$popup,i=0===(0,_.A)(e).closest(`.${F}`,t).length;return i}_detachFocusOutEvents(){G&&r.A.off(this._inputWrapper(),(0,l.b4)("focusout",this.NAME))}_getInputClickHandler(e){return e?e=>{this._executeOpenAction(e)}:()=>{this._focusInput()}}_openHandler(){this._toggleOpenState()}_executeOpenAction(e){var t;null===(t=this._openOnFieldClickAction)||void 0===t||t.call(this,{event:e})}_keyboardEventBindingTarget(){return this._input()}_focusInput(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,D["in"])(this._input())&&(this._resetCaretPosition(),r.A.trigger(this._input(),"focus")),!0)}_resetCaretPosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._input().get(0);if(t){const{value:i}=t,s=(0,E.O9)(i)&&(e||this._isEditable())?i.length:0;this._caret({start:s,end:s},!0)}}_isEditable(){const{acceptCustomValue:e}=this.option();return e}_toggleOpenState(e){this._focusInput()&&(this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e)))}_getControlsAria(){return this._popup&&this._popupContentId}_renderOpenedState(){const e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass(B,e),this._setPopupOption("visible",e);const t={expanded:e,controls:this._getControlsAria()};this.setAria(t),this.setAria("owns",e?this._popupContentId:void 0,this.$element())}_createPopup(){this._$popup||(this._$popup=(0,_.A)("<div>").addClass(F).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())}_setPopupAriaLabel(){const e=this._popup.$overlayContent();this.setAria("label","Dropdown",e)}_renderPopupContent(){}_renderPopup(){const e=(0,C.X)(this._popupConfig(),this.option("_userDropDownOptions"));this._popup=this._createComponent(this._$popup,I.A,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")}_attachPopupKeyHandler(){r.A.on(this._popup.$overlayContent(),(0,l.b4)("keydown",this.NAME),e=>this._popupKeyHandler(e))}_popupKeyHandler(e){switch((0,l.YD)(e)){case"tab":this._popupTabHandler(e);break;case"escape":this._popupEscHandler()}}_popupTabHandler(e){const t=(0,_.A)(e.target),i=e.shiftKey&&t.is(this._getFirstPopupElement()),s=!e.shiftKey&&t.is(this._getLastPopupElement());(s||i)&&(r.A.trigger(this.field(),"focus"),e.preventDefault())}_popupEscHandler(){r.A.trigger(this._input(),"focus"),this.close()}_setPopupContentId(e){this._popupContentId=`dx-${new c.A}`,this.setAria("id",this._popupContentId,e)}_contentReadyHandler(){}_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:(0,C.X)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>(0,H.v)(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:F,_ignorePreventScrollEventsDeprecation:!0}}_popupInitializedHandler(){}_getPopupInitializedHandler(){const{onPopupInitialized:e}=this.option();return t=>{this._popupInitializedHandler(),e&&this._popupInitializedAction({popup:t.component})}}_dimensionChanged(){!(0,b.Vd)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()}_updatePopupWidth(){const e=(0,H.b)(this.option("dropDownOptions.width"));void 0===e&&this._setPopupOption("width",()=>(0,H.v)(this.$element()))}_popupPositionedHandler(e){var t;const{labelMode:i,stylingMode:s}=this.option();if(!this._popup)return;const n=this._popup.$overlayContent(),a=null===(t=e.position)||void 0===t||null===(t=t.v)||void 0===t?void 0:t.flip,r="hidden"!==i&&"outside"!==i&&"outlined"===s;if(e.position&&n.toggleClass($,a),a&&r&&this._label.isVisible()){const e=this._label.$element();(0,o.Cy)(n,{top:(0,o.x5)(n).top-parseInt(e.css("fontSize"))})}}_popupShowingHandler(){}_popupHidingHandler(){this.option("opened",!1)}_popupShownHandler(){var e;this._openAction(),null===(e=this._validationMessage)||void 0===e||e.option("positionSide",this._getValidationMessagePositionSide())}_popupHiddenHandler(){var e;this._closeAction(),null===(e=this._validationMessage)||void 0===e||e.option("positionSide",this._getValidationMessagePositionSide())}_getValidationMessagePositionSide(){var e;const{validationMessagePosition:t}=this.option();if("auto"!==t)return t;let i="bottom";if(null!==(e=this._popup)&&void 0!==e&&e.option("visible")){const{top:e}=n.A.setup(this.$element()),{top:t}=n.A.setup(this._popup.$content());i=e+this.option("popupPosition").offset.v>t?"bottom":"top"}return i}_closeOutsideDropDownHandler(e){const{target:t}=e,i=(0,_.A)(t),s=this.getButton("dropDown"),n=null===s||void 0===s?void 0:s.$element(),o=!!i.closest(this.$element()).length,a=!!i.closest(n).length,r=!o&&!a;return r}_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),super._clean()}_setPopupOption(e,t){this._setWidgetOption("_popup",arguments)}_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)}_getPopupToolbarItems(){const{applyValueMode:e}=this.option();return"useButtons"===e?this._popupToolbarItemsConfig():[]}_getFirstPopupElement(){return(0,_.A)(this._popup.getFocusableElements()).first()}_getLastPopupElement(){return(0,_.A)(this._popup.getFocusableElements()).last()}_popupToolbarItemsConfig(){const e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(e)}_applyButtonsLocation(e){const{buttonsLocation:t}=this.option(),i=e;if("default"!==t){const e=(0,v.T6)(t);(0,f.__)(i,(t,i)=>{(0,C.X)(i,{toolbar:e[0],location:e[1]})})}return i}_applyButtonHandler(e){this.close(),this.option("focusStateEnabled")&&this.focus()}_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()}_popupOptionChanged(e){const t=y.A.getOptionsFromContainer(e);this._setPopupOption(t);const i=Object.keys(t);(i.includes("width")||i.includes("height"))&&this._dimensionChanged()}_cacheUserDropDownOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dropDownOptions";const i=t.replace("dropDownOptions","_userDropDownOptions");this.option(i,e)}_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,_.A)("<input>").attr("type","hidden").appendTo(this.$element()))}_setSubmitValue(){const{value:e}=this.option();this._getSubmitElement().val(e)}_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:super._getSubmitElement()}_dispose(){this._detachFocusOutEvents(),super._dispose()}_optionChanged(e){var t;const{name:i,fullName:s,value:n}=e;switch(i){case"width":case"height":super._optionChanged(e),null===(t=this._popup)||void 0===t||t.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._cacheUserDropDownOptions(n,s);break;case"_userDropDownOptions":case"popupPosition":break;case"deferRendering":(0,b.Vd)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(n),super._optionChanged(e);break;default:super._optionChanged(e)}}open(){this.option("opened",!0)}close(){this.option("opened",!1)}field(){return(0,d.cc)(this._input())}content(){return this._popup?this._popup.content():null}}(0,h.A)("dxDropDownEditor",N);var K=N},52087:function(e,t,i){i.d(t,{A:function(){return o}});var s=i(83684),n=s.A,o=n},67767:function(e,t,i){var s=i(94272);t.A=s.w},92240:function(e,t,i){i.d(t,{A:function(){return _}});var s=i(94041),n=i(59715),o=i(39889),a=i(80028),r=i(66703),l=i(44956),p=i(50172),h=i(98064),u=i(67767);const d=(0,l.X)({},u.A,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new n.A({store:new s.A(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=(0,a.Hz)(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=(0,a.Hz)(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(e){const t=(0,r.cY)();return e=this._unwrappedValue(e),(0,p.O9)(e)?(this._loadSingle(this._valueGetterExpr(),e).done(i=>{this._isValueEquals(this._valueGetter(i),e)?t.resolve(i):t.reject()}).fail(()=>{t.reject()}),this._loadValueDeferred=t,t.promise()):t.reject().promise()},_rejectValueLoading(){var e;null===(e=this._loadValueDeferred)||void 0===e||e.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(e){return e=e??this._getCurrentValue(),e&&this._dataSource&&"this"===this._valueGetterExpr()&&(e=this._getItemKey(e)),h.A.unwrap(e)},_getItemKey(e){const t=this._dataSource.key();if(Array.isArray(t)){const i={};for(let s=0,n=t.length;s<n;s++)i[t[s]]=e[t[s]];return i}return t&&"object"===typeof e&&(e=e[t]),e},_isValueEquals(e,t){const i=this._dataSource&&this._dataSource.key();let s=this._compareValues(e,t);return!s&&i&&(0,p.O9)(e)&&(0,p.O9)(t)&&(s=Array.isArray(i)?this._compareByCompositeKey(e,t,i):this._compareByKey(e,t,i)),s},_compareByCompositeKey(e,t,i){const s=p.Gv;if(!s(e)||!s(t))return!1;for(let n=0,o=i.length;n<o;n++)if(e[i[n]]!==t[i[n]])return!1;return!0},_compareByKey(e,t,i){const s=h.A.unwrap,n=(0,o.YD)(s(e[i]),e),a=(0,o.YD)(s(t[i]),t);return this._compareValues(n,a)},_compareValues:(e,t)=>(0,a.ao)(e,!0)===(0,a.ao)(t,!0),_initDynamicTemplates:o.lQ,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const e=this.option("valueExpr"),t=(0,p.Kg)(e)&&"this"!==e||(0,p.Tn)(e);return t?e:null},_dataExpressionOptionChanged(e){switch(e.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});var c=d,_=c}}]);