"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[1722],{13465:function(e,t,n){n.r(t),n.d(t,{default:function(){return pA}});n(82438),n(12266),n(91020),n(74786);var i=n(59259),a=n(32723),r=n(47871),o=n(34060),s=n(50404);
/*!
 * devextreme-vue
 * Version: 25.2.3
 * Build date: Fri Dec 12 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const l={props:{accessKey:String,activeStateEnabled:Boolean,cellTemplate:{},dateSerializationFormat:String,disabled:Boolean,disabledDates:[Array,Function],elementAttr:Object,firstDayOfWeek:Number,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,isDirty:Boolean,isValid:Boolean,max:[Date,Number,String],maxZoomLevel:String,min:[Date,Number,String],minZoomLevel:String,name:String,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,readOnly:Boolean,rtlEnabled:Boolean,selectionMode:String,selectWeekOnClick:Boolean,showTodayButton:Boolean,showWeekNumbers:Boolean,tabIndex:Number,todayButtonText:String,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:[Array,Date,Number,String],visible:Boolean,weekNumberRule:String,width:[Number,String],zoomLevel:String},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:cellTemplate":null,"update:dateSerializationFormat":null,"update:disabled":null,"update:disabledDates":null,"update:elementAttr":null,"update:firstDayOfWeek":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:isDirty":null,"update:isValid":null,"update:max":null,"update:maxZoomLevel":null,"update:min":null,"update:minZoomLevel":null,"update:name":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:readOnly":null,"update:rtlEnabled":null,"update:selectionMode":null,"update:selectWeekOnClick":null,"update:showTodayButton":null,"update:showWeekNumbers":null,"update:tabIndex":null,"update:todayButtonText":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:weekNumberRule":null,"update:width":null,"update:zoomLevel":null},model:{prop:"value",event:"update:value"},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=s.A,this.$_hasAsyncTemplate=!0}};(0,o.bx)(l);const u=(0,i.pM)(l);n(69375),n(2989),n(57327),n(50020),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var d=n(42576),c=n(30090),p=n(63027),h=n(66529),m=n(39904),g=n(35754),f=n(85563),y=n(64743),D=n(58312),C=n(24714),v=n(39889),_=n(80028),w=n(30816),b=n(86103),S=n(66703),T=n(44956),x=n(94360),A=n(50172),E=n(27996),k=n(67767),O=n(55501),I=n(93821),R=n(1902);const M={container:"dx-scheduler-a11y-status-container"},V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,f.A)("<div>").text(e).addClass(M.container).attr("role","status")},P={dateRange:"dxScheduler-dateRange",label:"dxScheduler-ariaLabel",indicatorPresent:"dxScheduler-ariaLabel-currentIndicator-present",indicatorNotPresent:"dxScheduler-ariaLabel-currentIndicator-not-present"},$={agenda:"dxScheduler-switcherAgenda",day:"dxScheduler-switcherDay",month:"dxScheduler-switcherMonth",week:"dxScheduler-switcherWeek",workWeek:"dxScheduler-switcherWorkWeek",timelineDay:"dxScheduler-switcherTimelineDay",timelineMonth:"dxScheduler-switcherTimelineMonth",timelineWeek:"dxScheduler-switcherTimelineWeek",timelineWorkWeek:"dxScheduler-switcherTimelineWorkWeek"},W=e=>String(c.A.format(e,"monthAndYear")),B=e=>`${c.A.format(e,"monthAndDay")}, ${c.A.format(e,"year")}`,H=(e,t,n)=>p.A.format(e>=t&&e<n?P.indicatorPresent:P.indicatorNotPresent),G=(e,t)=>e||(t?p.A.format($[t]):""),N=(e,t,n,i,a)=>{const r=null===e||void 0===e?void 0:e.type,o=null===e||void 0===e?void 0:e.name,s=G(o,r),l="month"===r||"timelineMonth"===r,u=l?W(t):B(t),d=l?W(n):B(n),c=u===d?`${u}`:p.A.format(P.dateRange,u,d),h=p.A.format(P.label,s,c,i);if(a){const e=H(a,t,n);return`${h}. ${e}`}return h};n(99819);var F=n(27401),L=n(38191),z=n(94680),U=n(69274),j=n(2408),Y=n(80294),Z=n(62192);const q="main",X={views:["day","week"],currentView:"day",currentDate:w.A.trimTime(new Date),min:void 0,max:void 0,dateSerializationFormat:void 0,firstDayOfWeek:void 0,groups:[],resources:[],dataSource:null,customizeDateNavigatorText:void 0,appointmentTemplate:"item",appointmentCollectorTemplate:"appointmentCollector",dataCellTemplate:void 0,timeCellTemplate:void 0,resourceCellTemplate:void 0,dateCellTemplate:void 0,startDayHour:0,endDayHour:24,offset:0,editing:{allowAdding:!0,allowDeleting:!0,allowDragging:!0,allowResizing:!0,allowUpdating:!0,allowTimeZoneEditing:!1,form:{iconsShowMode:"main"},popup:{}},showAllDayPanel:!0,showCurrentTimeIndicator:!0,shadeUntilCurrentTime:!1,indicatorUpdateInterval:3e5,recurrenceEditMode:"dialog",cellDuration:30,maxAppointmentsPerCell:"auto",selectedCellData:[],groupByDate:!1,onAppointmentRendered:void 0,onAppointmentClick:void 0,onAppointmentDblClick:void 0,onAppointmentContextMenu:void 0,onCellClick:void 0,onCellContextMenu:void 0,onAppointmentAdding:void 0,onAppointmentAdded:void 0,onAppointmentUpdating:void 0,onAppointmentUpdated:void 0,onAppointmentDeleting:void 0,onAppointmentDeleted:void 0,onAppointmentFormOpening:void 0,onAppointmentTooltipShowing:void 0,appointmentTooltipTemplate:"appointmentTooltip",crossScrollingEnabled:!1,useDropDownViewSwitcher:!1,startDateExpr:"startDate",endDateExpr:"endDate",textExpr:"text",descriptionExpr:"description",allDayExpr:"allDay",recurrenceRuleExpr:"recurrenceRule",recurrenceExceptionExpr:"recurrenceException",remoteFiltering:!1,timeZone:"",startDateTimeZoneExpr:"startDateTimeZone",endDateTimeZoneExpr:"endDateTimeZone",noDataText:p.A.format("dxCollectionWidget-noDataText"),adaptivityEnabled:!1,scrolling:{mode:"standard"},allDayPanelMode:"all",toolbar:{disabled:!1,multiline:!1,items:[{location:"before",name:"dateNavigator"},{location:"after",name:"viewSwitcher",locateInMenu:"auto"}]}},K={indicatorTime:void 0,renovateRender:!0,editing:Object.assign({legacyForm:!1},X.editing,{popup:{}}),_draggingMode:"outlook",_appointmentTooltipOffset:{x:0,y:0},appointmentPopupTemplate:"appointmentPopup",disabledExpr:"disabled",visibleExpr:"visible",allowMultipleCellSelection:!0},Q={integrationOptions:{useDeferUpdateForTemplates:!1}},J=[{device:()=>"desktop"===Z.A.real().deviceType&&!Z.A.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!Z.A.current().generic,options:{useDropDownViewSwitcher:!0,editing:{allowDragging:!1,allowResizing:!1}}},{device:()=>(0,U.Nt)(),options:{useDropDownViewSwitcher:!0,dateCellTemplate:(e,t,n)=>{const{text:i=""}=e;i.split(" ").forEach((e,t)=>{const i=(0,f.A)("<span>").text(e).addClass("dx-scheduler-header-panel-cell-date");(0,f.A)(n).append(i),t||(0,f.A)(n).append(" ")})}}},{device:()=>(0,U.gx)(),options:{_appointmentTooltipOffset:{x:0,y:11}}}];var ee=n(15981),te=n(80791);const ne=(e,t)=>e.items.find(e=>(0,te.RL)(e.id,t)),ie=(e,t)=>t.reduce((t,n)=>{const i=n.idsGetter(e);return i.length&&(t[n.resourceIndex]=i),t},{}),ae=(e,t)=>t.reduce((t,n)=>{const i=n.idsGetter(e);return i.length&&(t[n.resourceIndex]=n.allowMultiple?i:i[0]),t},{}),re=e=>Object.entries(e).reduce((e,t)=>{let[n,i]=t;return e[n]=(0,ee.BO)(i),e},{}),oe=(e,t)=>Object.entries(e).reduce((e,n)=>{let[i,a]=n;const r=t[i],o=a.map(e=>{var t;return null===(t=ne(r,e))||void 0===t?void 0:t.text}).filter(Boolean);return o.length&&e.push({label:r.resourceName,values:o}),e},[]),se=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.entries(n).forEach(n=>{let[i,a]=n;const r=t[i],o=r.allowMultiple?[a]:a;r.idsSetter(e,o)})},le=(e,t)=>t.filter(t=>Object.entries(t.grouped).every(t=>{var n;let[i,a]=t;return null===(n=e[i])||void 0===n?void 0:n.includes(a)})).map(e=>e.groupIndex),ue=e=>"items"in e,de=e=>"string"===typeof e?{itemType:"simple",editorType:"dxTextBox",name:e,dataField:e}:e,ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return e.reduce((e,t)=>(t.name&&e.set(t.name,Object.assign({},t)),ce(ue(t)?t.items??[]:[],e)),t)},pe=(e,t)=>{Array.from(t.values()).forEach(t=>{ue(t)&&t.items&&(t.items=t.items.filter(t=>t.name!==e))})},he=e=>"string"===typeof e?e:e.name,me=e=>"object"===typeof e,ge=e=>"object"===typeof e&&ue(e)&&Boolean(e.items),fe=(e,t)=>{if(!t)return e;const n=ce(e),i=e=>e.map(e=>{const t=(e=>{const t=he(e),i=t?n.get(t):void 0;return i&&t?(pe(t,n),me(e)?(0,T.X)(!0,{},i,e):i):de(e)})(e);return ue(t)&&ge(e)&&e.items?Object.assign({},t,{items:i(e.items)}):t});return i(t)};var ye=n(98793);const De=e=>e.charAt(0).toUpperCase()+e.slice(1),Ce=e=>`${e.getUTCFullYear()+`0${e.getUTCMonth()+1}`.slice(-2)+`0${e.getUTCDate()}`.slice(-2)}T${`0${e.getUTCHours()}`.slice(-2)}${`0${e.getUTCMinutes()}`.slice(-2)}${`0${e.getUTCSeconds()}`.slice(-2)}Z`,ve=e=>{if(null===e||void 0===e||!e.freq)return;const t=Object.entries(e).reduce((e,t)=>{let[n,i]=t;return"freq"===n||"interval"===n&&i<2?e:"until"===n?`${e}${n}=${Ce(i)};`:`${e}${n}=${i};`},`freq=${e.freq};`);return t.substring(0,t.length-1).toUpperCase()},_e=e=>{const t=void 0!==e[8];return e.shift(),void 0===e[3]?e.splice(3):(e.splice(3,1),e.splice(6)),e.unshift(""),[parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10)||0,parseInt(e[5],10)||0,parseInt(e[6],10)||0,t]},we=e=>/(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2}))?(Z)?/.exec(e),be=e=>{if("string"!==typeof e)return e;const t=we(e);if(!t)return null;const[n,i,a,r,o,s,l]=_e(t);return l?new Date(Date.UTC(n,i,a,r,o,s)):new Date(n,i,a,r,o,s)},Se=e=>{const t={interval:1};if(!e)return t;const n=e.split(";"),i=n.reduce((e,t)=>{const n=t.split("="),i=n[0].toLowerCase(),a=n[1];switch(i){case"count":case"interval":{const t=parseInt(a,10);isNaN(t)||(e[i]=t);break}default:e[i]=a}return e},t);return i.freq&&i.until&&(i.until=be(i.until)),i},Te=e=>Boolean(e),xe=e=>{let t=[];return e.byday&&(t=Array.isArray(e.byday)?e.byday:e.byday.split(",")),t.map(e=>{const t=/[A-Za-z]+/.exec(e);return t&&String(t[0])}).filter(Te)},Ae=e=>0===e.length?()=>(0,f.A)("<div>").addClass("dx-scheduler-form-icon-sized-gap"):()=>(0,f.A)("<i>").addClass("dx-icon").addClass(`dx-icon-${e}`),Ee=e=>({colSpan:1,itemType:"simple",editorType:"dxDateBox",validationRules:[{type:"required"}],editorOptions:{type:"date",useMaskBehavior:!0,calendarOptions:{firstDayOfWeek:e,showTodayButton:!0}}});class ke{constructor(e,t){var n,i;this.startDate=null,this.frequency=null;const a=Se(e),r=w.A.setToDayEnd(new Date);this.startDate=t,this.frequency=(null===(n=a.freq)||void 0===n?void 0:n.toLowerCase())??null,this.interval=a.interval??1,this.until=a.until??r,this.count=a.count??1,this.byDay=xe(a),this.byMonthDay=a.bymonthday?Number(a.bymonthday):(null===t||void 0===t?void 0:t.getDate())??1,this.byMonth=a.bymonth?Number(a.bymonth):((null===(i=this.startDate)||void 0===i?void 0:i.getMonth())??0)+1,this.repeatEnd="never",(0,A.O9)(a.count)?this.repeatEnd="count":(0,A.O9)(a.until)&&(this.repeatEnd="until")}toString(){if(!this.frequency)return;const e={freq:this.frequency,interval:this.interval};switch("until"===this.repeatEnd&&this.until?e.until=this.until:"count"===this.repeatEnd&&this.count&&(e.count=this.count),this.frequency){case"weekly":e.byday=this.byDay.join(",");break;case"monthly":this.byMonthDay&&(e.bymonthday=String(this.byMonthDay));break;case"yearly":this.byMonthDay&&this.byMonth&&(e.bymonthday=String(this.byMonthDay),e.bymonth=String(this.byMonth))}return ve(e)}}const Oe={groupWithIcon:"dx-scheduler-form-group-with-icon",formIcon:"dx-scheduler-form-icon",recurrenceGroup:"dx-scheduler-form-recurrence-group",recurrenceHidden:"dx-scheduler-form-recurrence-group-hidden",frequencyEditor:"dx-scheduler-form-recurrence-frequency-editor",byMonthEditor:"dx-scheduler-form-recurrence-by-month-editor",dayOfMonthEditor:"dx-scheduler-form-day-of-month-editor",countEditor:"dx-scheduler-form-recurrence-count-editor",daysOfWeekButtons:"dx-scheduler-days-of-week-buttons",dayOfMonthGroup:"dx-scheduler-form-day-of-month-group",dayOfYearGroup:"dx-scheduler-form-day-of-year-group",recurrenceEndGroup:"dx-scheduler-form-recurrence-end-group",recurrenceEndEditors:"dx-scheduler-form-recurrence-end-editors",recurrenceSettingsGroup:"dx-scheduler-form-recurrence-settings-group"},Ie=[{recurrence:"dxScheduler-recurrenceRepeatHourly",value:"hourly"},{recurrence:"dxScheduler-recurrenceRepeatDaily",value:"daily"},{recurrence:"dxScheduler-recurrenceRepeatWeekly",value:"weekly"},{recurrence:"dxScheduler-recurrenceRepeatMonthly",value:"monthly"},{recurrence:"dxScheduler-recurrenceRepeatYearly",value:"yearly"}].map(e=>({text:De(p.A.format(e.recurrence)),value:e.value})),Re=c.A.getMonthNames().map((e,t)=>({value:t+1,text:e})),Me={HOURLY:"hourly",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",YEARLY:"yearly"},Ve={recurrenceStartDateEditor:"recurrenceStartDateEditor",recurrenceCountEditor:"recurrenceCountEditor",recurrencePeriodEditor:"recurrencePeriodEditor",recurrenceDayOfYearMonthEditor:"recurrenceDayOfYearMonthEditor",recurrenceDayOfMonthEditor:"recurrenceDayOfMonthEditor",recurrenceDayOfYearDayEditor:"recurrenceDayOfYearDayEditor",recurrenceEndEditor:"recurrenceEndEditor",recurrenceRepeatEndEditor:"recurrenceRepeatEndEditor",recurrenceEndUntilEditor:"recurrenceEndUntilEditor",recurrenceEndCountEditor:"recurrenceEndCountEditor",recurrenceEndSpacer:"recurrenceEndSpacer"},Pe={recurrenceStartDateGroup:"recurrenceStartDateGroup",recurrenceRuleGroup:"recurrenceRuleGroup",recurrencePatternGroup:"recurrencePatternGroup",recurrenceRuleRepeatGroup:"recurrenceRuleRepeatGroup",recurrenceEndGroup:"recurrenceEndGroup",recurrenceDaysOfWeekEditor:"recurrenceDaysOfWeekEditor",recurrenceDayOfYearGroup:"recurrenceDayOfYearGroup",recurrenceEndEditorsGroup:"recurrenceEndEditorsGroup"},$e={recurrenceStartDateIcon:"recurrenceStartDateIcon",recurrenceRuleIcon:"recurrenceRuleIcon",recurrenceEndIcon:"recurrenceEndIcon"},We=c.A.getDayNames("abbreviated").map(e=>e.slice(0,2).toUpperCase());class Be{constructor(e){this.recurrenceRule=new ke("",new Date),this.weekDayItems=[],this._weekDayButtons={},this._readOnly=!1,this.scheduler=e,this.weekDayItems=this.createWeekDayItems()}createWeekDayItems(){const e=We.map(e=>({text:e[0],key:e})),t=this.scheduler.getFirstDayOfWeek()??c.A.firstDayOfWeekIndex(),n=e.slice(t).concat(e.slice(0,t));return n}createByMonthDayNumberBoxItem(e,t){return{itemType:"simple",name:e,colSpan:1,editorType:"dxNumberBox",cssClass:Oe.dayOfMonthEditor,label:t?{text:p.A.format("dxScheduler-recurrenceRepeatOn")}:{visible:!1},editorOptions:{min:1,max:31,format:"#",showSpinButtons:!0,useLargeSpinButtons:!1,onContentReady:e=>{e.component.option("value",this.recurrenceRule.byMonthDay??void 0)},onValueChanged:e=>{this.recurrenceRule.byMonthDay=e.value}}}}get dxForm(){return this._dxForm}set dxForm(e){this._dxForm=e}setReadOnly(e){this._readOnly=e}createRecurrenceFormGroup(){return{name:"recurrenceGroup",itemType:"group",cssClass:`${Oe.recurrenceGroup} ${Oe.recurrenceHidden}`,colSpan:1,items:[this.createRecurrenceStartDateGroup(),this.createRecurrenceSettingsGroup(),this.createRecurrenceEndGroup()]}}createRecurrenceStartDateGroup(){return{name:Pe.recurrenceStartDateGroup,itemType:"group",colCount:2,colCountByScreen:{xs:2},cssClass:Oe.groupWithIcon,items:[{name:$e.recurrenceStartDateIcon,colSpan:1,cssClass:Oe.formIcon,template:Ae("clock")},(0,T.X)(!0,Ee(this.scheduler.getFirstDayOfWeek()),{name:Ve.recurrenceStartDateEditor,label:{text:p.A.format("dxScheduler-editorLabelStartDate")},editorOptions:{onContentReady:e=>{e.component.option("value",this.recurrenceRule.startDate)},onValueChanged:e=>{this.recurrenceRule.startDate=e.value}}})]}}createRecurrenceSettingsGroup(){return{itemType:"group",name:Pe.recurrenceRuleGroup,cssClass:`${Oe.recurrenceSettingsGroup} ${Oe.groupWithIcon}`,colCount:2,colCountByScreen:{xs:2},items:[{name:$e.recurrenceRuleIcon,colSpan:1,cssClass:Oe.formIcon,template:Ae("repeat")},{itemType:"group",name:Pe.recurrencePatternGroup,colSpan:1,colCount:1,colCountByScreen:{xs:1},items:[this.createRecurrenceRuleGroup(),this.createDaysOfWeekGroup(),this.createDayOfMonthGroup(),this.createDayOfYearGroup()]}]}}createRecurrenceRuleGroup(){return{itemType:"group",name:Pe.recurrenceRuleRepeatGroup,colSpan:1,colCount:2,colCountByScreen:{xs:2},items:[{itemType:"simple",name:Ve.recurrenceCountEditor,colSpan:1,editorType:"dxNumberBox",label:{text:p.A.format("dxScheduler-recurrenceRepeatEvery")},editorOptions:{format:"#",min:1,showSpinButtons:!0,useLargeSpinButtons:!1,onContentReady:e=>{e.component.option("value",this.recurrenceRule.interval)},onValueChanged:e=>{this.recurrenceRule.interval=e.value}}},{itemType:"simple",name:Ve.recurrencePeriodEditor,cssClass:Oe.frequencyEditor,colSpan:1,editorType:"dxSelectBox",label:{visible:!1},editorOptions:{items:Ie,valueExpr:"value",displayExpr:"text",onContentReady:e=>{e.component.option("value",this.recurrenceRule.frequency)},onValueChanged:e=>{const t=this.recurrenceRule.frequency;t!==e.value&&(this.recurrenceRule.frequency=e.value,this.updateDayEditorsVisibility())}}}]}}createDaysOfWeekGroup(){return{name:Pe.recurrenceDaysOfWeekEditor,colSpan:1,cssClass:"dx-field-item-has-group",label:{visible:!1},template:()=>{const e=(0,f.A)("<div>").addClass(Oe.daysOfWeekButtons);return this.weekDayItems.forEach(t=>{var n;const i=(0,f.A)("<div>").appendTo(e);null===(n=this._weekDayButtons[t.key])||void 0===n||n.dispose(),this._weekDayButtons[t.key]=this.scheduler.createComponent(i,ye.A,{text:t.text,disabled:this._readOnly,onContentReady:e=>{(0,f.A)(e.element).removeClass("dx-button-has-text");const n=this.recurrenceRule.byDay.includes(t.key);e.component.option("stylingMode",n?"contained":"outlined"),e.component.option("type",n?"default":"normal")},onClick:e=>{const n=this.recurrenceRule.byDay.includes(t.key);if(n){const n=this.recurrenceRule.byDay.indexOf(t.key);this.recurrenceRule.byDay.splice(n,1),e.component.option("stylingMode","outlined"),e.component.option("type","normal")}else this.recurrenceRule.byDay.push(t.key),e.component.option("stylingMode","contained"),e.component.option("type","default")}})}),e}}}createDayOfMonthGroup(){return Object.assign({},this.createByMonthDayNumberBoxItem(Ve.recurrenceDayOfMonthEditor,!0),{cssClass:`${Oe.dayOfMonthEditor} ${Oe.dayOfMonthGroup}`})}createDayOfYearGroup(){return{itemType:"group",name:Pe.recurrenceDayOfYearGroup,cssClass:Oe.dayOfYearGroup,colCount:2,colCountByScreen:{xs:2},items:[{itemType:"simple",name:Ve.recurrenceDayOfYearMonthEditor,colSpan:1,cssClass:Oe.byMonthEditor,editorType:"dxSelectBox",label:{text:p.A.format("dxScheduler-recurrenceRepeatEvery")},editorOptions:{items:Re,displayExpr:"text",valueExpr:"value",onContentReady:e=>{e.component.option("value",this.recurrenceRule.byMonth)},onValueChanged:e=>{this.recurrenceRule.byMonth=e.value}}},this.createByMonthDayNumberBoxItem(Ve.recurrenceDayOfYearDayEditor,!1)]}}createRecurrenceEndGroup(){return{name:Pe.recurrenceEndGroup,itemType:"group",colCount:2,colCountByScreen:{xs:2},cssClass:`${Oe.groupWithIcon} ${Oe.recurrenceEndGroup}`,items:[{name:$e.recurrenceEndIcon,colSpan:1,cssClass:Oe.formIcon,template:Ae("description")},{itemType:"group",name:Ve.recurrenceEndEditor,colSpan:1,colCount:2,colCountByScreen:{xs:2},label:{text:p.A.format("dxScheduler-recurrenceEnd")},items:[this.createRecurrenceEndRadioGroup(),this.createRecurrenceEndEditors()]}]}}createRecurrenceEndRadioGroup(){return{itemType:"simple",name:Ve.recurrenceRepeatEndEditor,colSpan:1,editorType:"dxRadioGroup",label:{visible:!1},editorOptions:{valueExpr:"type",items:[{text:p.A.format("dxScheduler-recurrenceNever"),type:"never"},{text:p.A.format("dxScheduler-recurrenceOn"),type:"until"},{text:p.A.format("dxScheduler-recurrenceAfter"),type:"count"}],layout:"vertical",onContentReady:e=>{e.component.option("value",this.recurrenceRule.repeatEnd)},onValueChanged:e=>{this.recurrenceRule.repeatEnd=e.value,this.updateRepeatEndEditors()}}}}createRecurrenceEndEditors(){return{itemType:"group",name:Pe.recurrenceEndEditorsGroup,cssClass:Oe.recurrenceEndEditors,colSpan:1,items:[{itemType:"empty",name:Ve.recurrenceEndSpacer},{itemType:"simple",name:Ve.recurrenceEndUntilEditor,label:{visible:!1},editorType:"dxDateBox",editorOptions:{type:"date",useMaskBehavior:!0,calendarOptions:{firstDayOfWeek:this.scheduler.getFirstDayOfWeek()},inputAttr:{"aria-label":p.A.format("dxScheduler-recurrenceUntilDateLabel")},onContentReady:e=>{const t=this.recurrenceRule.repeatEnd;e.component.option("value",this.recurrenceRule.until),e.component.option("disabled","until"!==t)},onValueChanged:e=>{this.recurrenceRule.until=e.value}}},{itemType:"simple",name:Ve.recurrenceEndCountEditor,cssClass:Oe.countEditor,label:{visible:!1},editorType:"dxNumberBox",editorOptions:{format:`# ${p.A.format("dxScheduler-recurrenceRepeatCount")}`,min:1,showSpinButtons:!0,useLargeSpinButtons:!1,inputAttr:{"aria-label":p.A.format("dxScheduler-recurrenceOccurrenceLabel")},onContentReady:e=>{const t=this.recurrenceRule.repeatEnd;e.component.option("value",this.recurrenceRule.count??void 0),e.component.option("disabled","count"!==t)},onValueChanged:e=>{this.recurrenceRule.count=e.value}}}]}}updateRecurrenceFormValues(e,t){var n,i,a,r,o,s;this.recurrenceRule=this.createRecurrenceRule(e,t),null===(n=this.dxForm.getEditor(Ve.recurrenceStartDateEditor))||void 0===n||n.option("value",this.recurrenceRule.startDate),null===(i=this.dxForm.getEditor(Ve.recurrencePeriodEditor))||void 0===i||i.option("value",this.recurrenceRule.frequency),null===(a=this.dxForm.getEditor(Ve.recurrenceCountEditor))||void 0===a||a.option("value",this.recurrenceRule.interval),null===(r=this.dxForm.getEditor(Ve.recurrenceRepeatEndEditor))||void 0===r||r.option("value",this.recurrenceRule.repeatEnd),null===(o=this.dxForm.getEditor(Ve.recurrenceEndUntilEditor))||void 0===o||o.option("value",this.recurrenceRule.until),null===(s=this.dxForm.getEditor(Ve.recurrenceEndCountEditor))||void 0===s||s.option("value",this.recurrenceRule.count),this.updateRepeatEndEditors(),this.updateDayEditorsVisibility()}createRecurrenceRule(e,t){const n=new ke(e??"",t);if(0===n.byDay.length){const e=[We[(null===t||void 0===t?void 0:t.getDay())??this.scheduler.getFirstDayOfWeek()]];n.byDay=e}return n}updateRepeatEndEditors(){const e=this.recurrenceRule.repeatEnd,t=this.dxForm.getEditor(Ve.recurrenceEndUntilEditor),n=this.dxForm.getEditor(Ve.recurrenceEndCountEditor);null===t||void 0===t||t.option("disabled","until"!==e),null===n||void 0===n||n.option("disabled","count"!==e)}updateDayEditorsVisibility(){const e=`recurrenceGroup.${Pe.recurrenceRuleGroup}.${Pe.recurrencePatternGroup}`,t=`${e}.${Pe.recurrenceDaysOfWeekEditor}`,n=`${e}.${Ve.recurrenceDayOfMonthEditor}`,i=`${e}.${Pe.recurrenceDayOfYearGroup}`;switch(this.dxForm.beginUpdate(),this.dxForm.itemOption(t,"visible",!1),this.dxForm.itemOption(n,"visible",!1),this.dxForm.itemOption(i,"visible",!1),this.recurrenceRule.frequency){case Me.WEEKLY:this.dxForm.itemOption(t,"visible",!0);break;case Me.MONTHLY:this.dxForm.itemOption(n,"visible",!0);break;case Me.YEARLY:this.dxForm.itemOption(i,"visible",!0)}this.dxForm.endUpdate()}}const He=["items","onContentReady","onInitialized"],Ge={form:"dx-scheduler-form",icon:"dx-icon",hidden:"dx-hidden",groupWithIcon:"dx-scheduler-form-group-with-icon",formIcon:"dx-scheduler-form-icon",defaultResourceIcon:"dx-scheduler-default-resources-icon",mainGroup:"dx-scheduler-form-main-group",subjectGroup:"dx-scheduler-form-subject-group",dateRangeGroup:"dx-scheduler-form-date-range-group",startDateGroup:"dx-scheduler-form-start-date-group",endDateGroup:"dx-scheduler-form-end-date-group",repeatGroup:"dx-scheduler-form-repeat-group",descriptionGroup:"dx-scheduler-form-description-group",resourcesGroup:"dx-scheduler-form-resources-group",recurrenceRepeatEveryGroup:"dx-scheduler-form-recurrence-repeat-every-group",recurrenceRepeatOnMonthlyGroup:"dx-scheduler-form-recurrence-repeat-on-monthly-group",recurrenceRepeatOnYearlyGroup:"dx-scheduler-form-recurrence-repeat-on-yearly-group",textEditor:"dx-scheduler-form-text-editor",allDaySwitch:"dx-scheduler-form-all-day-switch",startDateEditor:"dx-scheduler-form-start-date-editor",startTimeEditor:"dx-scheduler-form-start-time-editor",startDateTimeZoneEditor:"dx-scheduler-form-start-date-timezone-editor",endDateEditor:"dx-scheduler-form-end-date-editor",endTimeEditor:"dx-scheduler-form-end-time-editor",endDateTimeZoneEditor:"dx-scheduler-form-end-date-timezone-editor",repeatEditor:"dx-scheduler-form-repeat-editor",descriptionEditor:"dx-scheduler-form-description-editor",recurrenceSettingsButton:"dx-scheduler-form-recurrence-settings-button",mainHidden:"dx-scheduler-form-main-group-hidden",recurrenceGroup:"dx-scheduler-form-recurrence-group",recurrenceHidden:"dx-scheduler-form-recurrence-group-hidden"},Ne=[{recurrence:"dxScheduler-recurrenceNever",value:"never"},{recurrence:"dxScheduler-recurrenceHourly",value:"hourly"},{recurrence:"dxScheduler-recurrenceDaily",value:"daily"},{recurrence:"dxScheduler-recurrenceWeekly",value:"weekly"},{recurrence:"dxScheduler-recurrenceMonthly",value:"monthly"},{recurrence:"dxScheduler-recurrenceYearly",value:"yearly"}].map(e=>({text:p.A.format(e.recurrence),value:e.value})),Fe=Ne[0].value,Le=()=>new L.qS({store:Y.A.getTimeZonesCache(),paginate:!0,pageSize:10});class ze{get dxForm(){return this._dxForm}get dxPopup(){return this._popup.dxPopup}get readOnly(){return this.dxForm.option("readOnly")}set readOnly(e){this.dxForm.option("readOnly",e),this._recurrenceForm.setReadOnly(e)}get formData(){return this.dxForm.option("formData")}set formData(e){this.dxForm.option("formData",e)}get startDate(){const{startDateExpr:e}=this.scheduler.getDataAccessors().expr,t=this.getFormDataField(e);return t?new Date(j.J.deserializeDate(t)):null}get endDate(){const{endDateExpr:e}=this.scheduler.getDataAccessors().expr,t=this.getFormDataField(e);return t?new Date(j.J.deserializeDate(t)):null}get recurrenceRuleRaw(){const{recurrenceRuleExpr:e}=this.scheduler.getDataAccessors().expr,t=this.getFormDataField(e);return t??null}constructor(e){this.scheduler=e,this.resourceManager=e.getResourceManager()}getFormDataField(e){return this.dxForm.option(`formData.${e}`)}dispose(){var e;null===(e=this._dxForm)||void 0===e||e.dispose(),this._dxForm=void 0,this._recurrenceForm&&(this._recurrenceForm.dxForm=void 0)}create(e){var t;this._popup=e;const n=this.createMainFormGroup();this._recurrenceForm=new Be(this.scheduler);const i=this._recurrenceForm.createRecurrenceFormGroup(),a=[n,i],r=this.getIconsShowMode(),o=["main","both"].includes(r),s=["recurrence","both"].includes(r);this.setStylingModeToEditors(n,o),this.setStylingModeToEditors(i,s);const l=this.scheduler.getEditingConfig(),u=fe(a,null===l||void 0===l||null===(t=l.form)||void 0===t?void 0:t.items);this.createForm(u)}getIconsShowMode(){var e;const t=this.scheduler.getEditingConfig();return(0,A.Lm)(t)?q:(null===t||void 0===t||null===(e=t.form)||void 0===e?void 0:e.iconsShowMode)??q}createForm(e){const t=(0,f.A)("<div>"),n=this.scheduler.getEditingConfig(),i=(null===n||void 0===n?void 0:n.form)??{},{onContentReady:a,onInitialized:r}=i,o=(0,F.A)(i,He),s={items:e,formData:{},showColonAfterLabel:!1,showValidationSummary:!1,scrollingEnabled:!1,labelLocation:"top",colCountByScreen:{xs:1},elementAttr:{class:Ge.form},onFieldDataChanged:e=>{const{startDateExpr:t,endDateExpr:n,recurrenceRuleExpr:i}=this.scheduler.getDataAccessors().expr,{dataField:a}=e;if(!a)return;const r=[t,n].includes(a),o=a===i,s=Object.keys(this.scheduler.getResourceById()).includes(a);r&&this.updateDateEditorsValues(),(o||t===a)&&this._recurrenceForm.updateRecurrenceFormValues(this.recurrenceRuleRaw,this.startDate),o&&this.updateRepeatEditorValue(),s&&this.updateSubjectIconColor()},onInitialized:e=>{this._dxForm=e.component,this._recurrenceForm.dxForm=this.dxForm,null===r||void 0===r||r.call(this,e)},onContentReady:e=>{const t=e.component.$element();this._$mainGroup=t.find(`.${Ge.mainGroup}`),this._$recurrenceGroup=t.find(`.${Ge.recurrenceGroup}`),null===a||void 0===a||a.call(this,e)}},l=(0,T.X)(!0,s,o);return this.scheduler.createComponent(t,z.A,l)}createMainFormGroup(){return{name:"mainGroup",itemType:"group",colSpan:1,cssClass:Ge.mainGroup,items:[this.createSubjectGroup(),this.createDateRangeGroup(),this.createRepeatGroup(),this.createResourcesGroup(),this.createDescriptionGroup()]}}createSubjectGroup(){const{textExpr:e}=this.scheduler.getDataAccessors().expr;return{name:"subjectGroup",itemType:"group",cssClass:`${Ge.subjectGroup} ${Ge.groupWithIcon}`,colCount:2,colCountByScreen:{xs:2},items:[{name:"subjectIcon",colSpan:1,cssClass:Ge.formIcon,template:Ae("isnotblank")},{name:"subjectEditor",colSpan:1,itemType:"simple",cssClass:Ge.textEditor,dataField:e,label:{text:p.A.format("dxScheduler-editorLabelTitle")},editorType:"dxTextBox"}]}}createDateRangeGroup(){return{name:"dateGroup",itemType:"group",cssClass:`${Ge.dateRangeGroup} ${Ge.groupWithIcon}`,colCount:2,colCountByScreen:{xs:2},items:[{name:"dateIcon",colSpan:1,cssClass:Ge.formIcon,template:Ae("clock")},{colSpan:1,name:"dateOptionsGroup",itemType:"group",items:[this.createAllDaySwitch(),this.createStartDateGroup(),this.createEndDateGroup()]}]}}createAllDaySwitch(){const{allDayExpr:e,startDateExpr:t,endDateExpr:n}=this.scheduler.getDataAccessors().expr;return{name:"allDayEditor",itemType:"simple",dataField:e,cssClass:Ge.allDaySwitch,label:{text:p.A.format("dxScheduler-allDay"),location:"left"},editorType:"dxSwitch",editorOptions:{onValueChanged:e=>{this.updateDateTimeEditorsVisibility();const{startDate:i}=this;if(i&&void 0!==e.event)if(e.value){const e=w.A.trimTime(i);this.dxForm.updateData(t,e),this.dxForm.updateData(n,e)}else{const e=this.scheduler.getStartDayHour();i.setHours(e);const a=this.scheduler.getCalculatedEndDate(i);this.dxForm.updateData(t,i),this.dxForm.updateData(n,a)}}}}}createStartDateGroup(){const{startDateExpr:e,startDateTimeZoneExpr:t,endDateTimeZoneExpr:n}=this.scheduler.getDataAccessors().expr;return this.createDateGroup(e,{name:"startDateGroup",cssClass:Ge.startDateGroup},{name:"startDateEditor",label:{text:p.A.format("dxScheduler-editorLabelStartDate")},cssClass:Ge.startDateEditor},{name:"startTimeEditor",cssClass:Ge.startTimeEditor},{name:"startDateTimeZoneEditor",dataField:t,cssClass:Ge.startDateTimeZoneEditor,editorOptions:{onValueChanged:e=>{const t=this.dxForm.getEditor(n);null===t||void 0===t||t.option("value",e.value)}}})}createEndDateGroup(){const{endDateExpr:e,endDateTimeZoneExpr:t}=this.scheduler.getDataAccessors().expr;return this.createDateGroup(e,{name:"endDateGroup",cssClass:Ge.endDateGroup},{name:"endDateEditor",label:{text:p.A.format("dxScheduler-editorLabelEndDate")},cssClass:Ge.endDateEditor},{name:"endTimeEditor",cssClass:Ge.endTimeEditor},{name:"endDateTimeZoneEditor",dataField:t,cssClass:Ge.endDateTimeZoneEditor})}createDateGroup(e,t,n,i,a){const{allowTimeZoneEditing:r}=this.scheduler.getEditingConfig(),{startDateExpr:o,endDateExpr:s}=this.scheduler.getDataAccessors().expr,l=e===o,u=()=>l?this.startDate:this.endDate,d=e=>{const{startDate:t,endDate:n}=this;if(t&&n&&!(t.getTime()<=n.getTime()))if(l){const i=e?n.getTime()-e.getTime():0,a=new Date(t.getTime()+i);this.dxForm.updateData(s,a)}else{const i=e?e.getTime()-t.getTime():0,a=new Date(n.getTime()-i);this.dxForm.updateData(o,a)}},c=(t,n)=>{const i=u();if(!i)return void this.dxForm.updateData(e,t.value);if(!t.value)return;if(!t.event&&i.getTime()===t.value.getTime())return;const a=new Date(i);n(i),this.dxForm.updateData(e,i),d(a)};return Object.assign({itemType:"group",items:[{name:l?"startDateTimeGroup":"endDateTimeGroup",itemType:"group",colCount:2,colCountByScreen:{xs:2},items:[(0,T.X)(!0,Ee(this.scheduler.getFirstDayOfWeek()),{editorOptions:{onValueChanged:e=>{c(e,t=>{t.setFullYear(e.value.getFullYear(),e.value.getMonth(),e.value.getDate())})},onContentReady:e=>{e.component.option("value",u())}}},n),(0,T.X)(!0,{itemType:"simple",colSpan:1,editorType:"dxDateBox",validationRules:[{type:"required"}],editorOptions:{type:"time",useMaskBehavior:!0,calendarOptions:{firstDayOfWeek:this.scheduler.getFirstDayOfWeek()},onValueChanged:e=>{c(e,t=>{t.setHours(e.value.getHours(),e.value.getMinutes())})},onContentReady:e=>{e.component.option("value",u())}}},i)]},(0,T.X)(!0,{itemType:"simple",colSpan:2,editorType:"dxSelectBox",visible:r,editorOptions:{displayExpr:"title",valueExpr:"id",placeholder:p.A.format("dxScheduler-noTimezoneTitle"),searchEnabled:!0,dataSource:Le()}},a)]},t)}createRepeatGroup(){const{recurrenceRuleExpr:e}=this.scheduler.getDataAccessors().expr;return{name:"repeatGroup",itemType:"group",colCount:2,colCountByScreen:{xs:2},cssClass:`${Ge.repeatGroup} ${Ge.groupWithIcon}`,items:[{name:"repeatIcon",colSpan:1,cssClass:Ge.formIcon,template:Ae("repeat")},{name:"repeatEditor",colSpan:1,itemType:"simple",cssClass:Ge.repeatEditor,label:{text:p.A.format("dxScheduler-editorLabelRecurrence")},editorType:"dxSelectBox",editorOptions:{items:Ne,valueExpr:"value",displayExpr:"text",onContentReady:()=>{this.updateRepeatEditorValue()},onValueChanged:t=>{if(t.value===Fe)this.dxForm.updateData(e,"");else{const n=this._recurrenceForm.recurrenceRule.toString()??"",i=new ke(n,this.startDate);i.frequency=t.value,this.dxForm.updateData(e,i.toString())}t.value!==Fe&&t.event&&this.showRecurrenceGroup(),t.component.option("buttons",this.getRepeatEditorButtons())}}}]}}createDescriptionGroup(){const{descriptionExpr:e}=this.scheduler.getDataAccessors().expr;return{name:"descriptionGroup",itemType:"group",colCount:2,colCountByScreen:{xs:2},cssClass:`${Ge.descriptionGroup} ${Ge.groupWithIcon}`,items:[{name:"descriptionIcon",colSpan:1,cssClass:Ge.formIcon,template:Ae("description")},{name:"descriptionEditor",dataField:e,colSpan:1,itemType:"simple",cssClass:Ge.descriptionEditor,label:{text:p.A.format("dxScheduler-editorLabelDescription")},editorType:"dxTextArea",editorOptions:{height:100}}]}}createResourcesGroup(){const e=Object.values(this.scheduler.getResourceById());let t=e.map(e=>{const{dataSource:t,dataAccessor:n}=e,i=e.resourceIndex,a=e.resourceName??i,r=e.allowMultiple?"dxTagBox":"dxSelectBox";return{itemType:"simple",name:i,dataField:i,label:{text:a},colSpan:1,editorType:r,editorOptions:{dataSource:t,displayExpr:n.textExpr,valueExpr:n.idExpr}}});const n=e.every(e=>!e.icon);return n?{name:"resourcesGroup",itemType:"group",visible:t.length>0,colCount:2,colCountByScreen:{xs:2},cssClass:`${Ge.resourcesGroup} ${Ge.groupWithIcon}`,items:[{name:"resourcesGroupIcon",colSpan:1,cssClass:`${Ge.formIcon} ${Ge.defaultResourceIcon}`,template:Ae("addcircleoutline")},{name:"resourcesGroupContent",itemType:"group",colSpan:1,items:t}]}:(t=t.map((t,n)=>{const i=e[n].icon??"",a=e[n].resourceIndex;return{itemType:"group",name:`${a}Group`,colCount:2,colCountByScreen:{xs:2},cssClass:Ge.groupWithIcon,items:[{colSpan:1,name:`${a}Icon`,cssClass:Ge.formIcon,template:Ae(i)},t]}}),{name:"resourcesGroup",itemType:"group",colCount:1,colCountByScreen:{xs:1},cssClass:Ge.resourcesGroup,items:t})}setStylingModeToEditors(e,t){const n=(e.cssClass??"").split(" "),i=n.includes(Ge.formIcon);if(i){const i=n.includes(Ge.hidden);return void(t||i||(e.cssClass+=` ${Ge.hidden}`))}if("simple"===e.itemType){const t=e,n=(0,U.Ft)((0,U.ss)())?"filled":void 0;return void(t.editorOptions=(0,T.X)(t.editorOptions,{stylingMode:n}))}if("group"===e.itemType){var a;const n=e;null===(a=n.items)||void 0===a||a.forEach(e=>{this.setStylingModeToEditors(e,t)})}}showMainGroup(){var e,t,n,i,a;const r=this.dxPopup.option("height"),o=this.scheduler.getEditingConfig(),s=(null===o||void 0===o||null===(e=o.popup)||void 0===e?void 0:e.height)??"auto";"number"===typeof r&&this.dxPopup.option("height",s),null===(t=this._$mainGroup)||void 0===t||t.removeClass(Ge.mainHidden),null===(n=this._$mainGroup)||void 0===n||n.removeAttr("tabindex"),null===(i=this._$recurrenceGroup)||void 0===i||i.addClass(Ge.recurrenceHidden),null===(a=this._$recurrenceGroup)||void 0===a||a.attr("tabindex","-1"),this._popup.updateToolbarForMainGroup()}showRecurrenceGroup(){var e,t,n,i;const a=this.dxPopup.option("height");if("auto"===a||void 0===a){const e=this.dxPopup.$overlayContent().get(0).clientHeight;this.dxPopup.option("height",e)}null===(e=this._$mainGroup)||void 0===e||e.addClass(Ge.mainHidden),null===(t=this._$mainGroup)||void 0===t||t.attr("tabindex","-1"),null===(n=this._$recurrenceGroup)||void 0===n||n.removeClass(Ge.recurrenceHidden),null===(i=this._$recurrenceGroup)||void 0===i||i.removeAttr("tabindex"),this._popup.updateToolbarForRecurrenceGroup()}saveRecurrenceValue(){const{recurrenceRule:e}=this._recurrenceForm,{recurrenceRuleExpr:t}=this.scheduler.getDataAccessors().expr,n=e.toString()??"";var i;(this.dxForm.updateData(t,n),n)&&(null===(i=this.dxForm.getEditor("startDateEditor"))||void 0===i||i.option("value",e.startDate))}async updateSubjectIconColor(){const e=ae(this.formData,this.resourceManager.resources),t=le(re(e),this.resourceManager.groupsLeafs)[0],n=await this.resourceManager.getAppointmentColor({itemData:this.formData,groupIndex:t}),i=this.dxForm.$element().find(`.${Ge.subjectGroup} .${Ge.formIcon} .${Ge.icon}`);i.css("color",n??"")}updateDateEditorsValues(){const e=this.dxForm.getEditor("startDateEditor"),t=this.dxForm.getEditor("startTimeEditor"),n=this.dxForm.getEditor("endDateEditor"),i=this.dxForm.getEditor("endTimeEditor");null===e||void 0===e||e.option("value",this.startDate),null===t||void 0===t||t.option("value",this.startDate),null===n||void 0===n||n.option("value",this.endDate),null===i||void 0===i||i.option("value",this.endDate)}updateRepeatEditorValue(){const e=this.dxForm.getEditor("repeatEditor");if(e)if(null===this.recurrenceRuleRaw)e.option("value",Fe);else{const t=new ke(this.recurrenceRuleRaw,this.startDate),{frequency:n}=t,i=n??Fe;e.option("value",i)}}getRepeatEditorButtons(){const e=[],t=this.dxForm.getEditor("repeatEditor"),n=null===t||void 0===t?void 0:t.option("value");return n&&"never"!==n&&e.push({location:"after",name:"settings",options:{disabled:!1,icon:"optionsoutline",stylingMode:"text",onClick:()=>{this.showRecurrenceGroup()},elementAttr:{class:`${Ge.recurrenceSettingsButton} dx-shape-standard`}}}),e.push({name:"dropDown"}),e}updateDateTimeEditorsVisibility(){const{allDayExpr:e}=this.scheduler.getDataAccessors().expr,t=!this.getFormDataField(e),n="mainGroup.dateGroup.dateOptionsGroup.startDateGroup.startDateTimeGroup",i="mainGroup.dateGroup.dateOptionsGroup.endDateGroup.endDateTimeGroup",a=`${n}.startDateEditor`,r=`${n}.startTimeEditor`,o=`${i}.endDateEditor`,s=`${i}.endTimeEditor`;this.dxForm.beginUpdate(),this.dxForm.itemOption(a,"colSpan",t?1:2),this.dxForm.itemOption(r,"visible",t),this.dxForm.itemOption(o,"colSpan",t?1:2),this.dxForm.itemOption(s,"visible",t),this.dxForm.endUpdate()}}n(7465);var Ue=n(7813),je=n(47426);const Ye="dx-recurrence-editor",Ze="dx-recurrence-editor-container",qe="dx-recurrence-radiogroup-repeat-type",Xe="dx-recurrence-numberbox-repeat-count",Ke="dx-recurrence-datebox-until-date",Qe="dx-recurrence-button-group",Je="dx-recurrence-selectbox-freq",et="dx-recurrence-numberbox-interval",tt="dx-recurrence-repeat-on",nt="dx-recurrence-numberbox-day-of-month",it="dx-recurrence-selectbox-month-of-year",at=[{recurrence:"dxScheduler-recurrenceHourly",value:"hourly"},{recurrence:"dxScheduler-recurrenceDaily",value:"daily"},{recurrence:"dxScheduler-recurrenceWeekly",value:"weekly"},{recurrence:"dxScheduler-recurrenceMonthly",value:"monthly"},{recurrence:"dxScheduler-recurrenceYearly",value:"yearly"}],rt=at.map(e=>({text:()=>p.A.format(e.recurrence),value:e.value})),ot=[{type:"never"},{type:"until"},{type:"count"}],st=["SU","MO","TU","WE","TH","FR","SA"],lt=()=>(0,U.Ft)((0,U.ss)())?"filled":void 0;class ut{constructor(e){this._recurrenceRule=Se(e)}makeRules(e){this._recurrenceRule=Se(e)}makeRule(e,t){!t||Array.isArray(t)&&!t.length?delete this._recurrenceRule[e]:(0,A.O9)(e)&&("until"===e&&delete this._recurrenceRule.count,"count"===e&&delete this._recurrenceRule.until,this._recurrenceRule[e]=t)}getRepeatEndRule(){const e=this._recurrenceRule;return"count"in e?"count":"until"in e?"until":"never"}getRecurrenceString(){return ve(this._recurrenceRule)}getRules(){return this._recurrenceRule}getDaysFromByDayRule(){return xe(this._recurrenceRule)}}class dt extends je.A{_getDefaultOptions(){const e=super._getDefaultOptions();return(0,T.X)(e,{value:null,startDate:new Date,firstDayOfWeek:void 0})}_getFirstDayOfWeek(){const e=this.option("firstDayOfWeek");return(0,A.O9)(e)?e:c.A.firstDayOfWeekIndex()}_createComponent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._extendConfig(n,{readOnly:this.option("readOnly")}),super._createComponent(e,t,n)}_init(){super._init(),this._recurrenceRule=new ut(this.option("value"))}_render(){super._render(),this.$element().addClass(Ye),this._$container=(0,f.A)("<div>").addClass(Ze).appendTo(this.$element()),this._prepareEditors(),this._renderEditors(this._$container),this._updateRepeatInputAriaLabel()}getEditorByField(e){let t=this.getRecurrenceForm().getEditor(e);return(0,A.O9)(t)||"byday"===e&&(t=this._weekEditor),t}_prepareEditors(){const e=(this._recurrenceRule.getRules().freq||at[1].value).toLowerCase();return this._editors=[this._createFreqEditor(e),this._createIntervalEditor(e),this._createRepeatOnLabel(e),{itemType:"group",cssClass:tt,colCount:2,colCountByScreen:{xs:2},items:this._createRepeatOnEditor(e)},{itemType:"group",colCount:2,items:this._createRepeatEndEditor()}],this._editors}_createFreqEditor(e){return{dataField:"freq",name:"FREQ",editorType:"dxSelectBox",cssClass:Je,editorOptions:{stylingMode:lt(),items:rt,value:e,field:"freq",valueExpr:"value",displayExpr:"text",layout:"horizontal",elementAttr:{class:Je},onValueChanged:e=>this._valueChangedHandler(e)},label:{text:p.A.format("dxScheduler-editorLabelRecurrence")}}}_createIntervalEditor(e){const t=this._recurrenceRule.getRules().interval||1;return{itemType:"group",colCount:2,cssClass:`${et}-wrapper`,colCountByScreen:{xs:2},items:[{dataField:"interval",editorType:"dxNumberBox",editorOptions:{stylingMode:lt(),format:"#",width:90,min:1,field:"interval",value:t,showSpinButtons:!0,useLargeSpinButtons:!1,elementAttr:{class:et},onValueChanged:e=>this._valueChangedHandler(e)},label:{text:p.A.format("dxScheduler-recurrenceRepeatEvery")}},{name:"intervalLabel",cssClass:`${et}-label`,template:()=>p.A.format(`dxScheduler-recurrenceRepeat${e.charAt(0).toUpperCase()}${e.substr(1).toLowerCase()}`)}]}}_createRepeatOnLabel(e){return{itemType:"group",cssClass:`${tt}-label`,items:[{name:"repeatOnLabel",colSpan:2,template:()=>p.A.format("dxScheduler-recurrenceRepeatOn"),visible:e&&"daily"!==e&&"hourly"!==e}]}}_createRepeatOnEditor(e){return[this._createByDayEditor(e),this._createByMonthEditor(e),this._createByMonthDayEditor(e)]}_createByDayEditor(e){return{dataField:"byday",colSpan:2,template:(e,t)=>{const n=this._getFirstDayOfWeek(),i=this._daysOfWeekByRules(),a=c.A.getDayNames("abbreviated"),r=st.slice(n).concat(st.slice(0,n)),o=a.slice(n).concat(a.slice(0,n)).map((e,t)=>({text:e,key:r[t]}));this._$repeatOnWeek=(0,f.A)("<div>").addClass(Qe).appendTo(t),this._weekEditor=this._createComponent(this._$repeatOnWeek,Ue.A,{items:o,field:"byday",selectionMode:"multiple",selectedItemKeys:i,keyExpr:"key",onSelectionChanged:e=>{const t=e.component.option("selectedItemKeys"),n=null!==t&&void 0!==t&&t.length?t:this._getDefaultByDayValue();this._recurrenceRule.makeRule("byday",n),this._changeEditorValue()}})},visible:"weekly"===e,label:{visible:!1}}}_createByMonthEditor(e){const t=c.A.getMonthNames("wide"),n=[...Array(12)].map((e,n)=>({value:`${n+1}`,text:t[n]}));return{dataField:"bymonth",editorType:"dxSelectBox",editorOptions:{stylingMode:lt(),field:"bymonth",items:n,value:this._monthOfYearByRules(),width:120,displayExpr:"text",valueExpr:"value",elementAttr:{class:it},onValueChanged:e=>this._valueChangedHandler(e)},visible:"yearly"===e,label:{visible:!1}}}_createByMonthDayEditor(e){return{dataField:"bymonthday",editorType:"dxNumberBox",editorOptions:{stylingMode:lt(),min:1,max:31,format:"#",width:90,field:"bymonthday",showSpinButtons:!0,useLargeSpinButtons:!1,value:this._dayOfMonthByRules(),elementAttr:{class:nt},onValueChanged:e=>this._valueChangedHandler(e)},visible:"monthly"===e||"yearly"===e,label:{visible:!1}}}_createRepeatEndEditor(){const e=this._recurrenceRule.getRepeatEndRule();return[{colSpan:2,template:p.A.format("dxScheduler-recurrenceEnd")},{colSpan:1,label:{visible:!1},dataField:"repeatEnd",editorType:"dxRadioGroup",editorOptions:{items:ot,value:e,valueExpr:"type",field:"repeatEnd",itemTemplate:e=>"count"===e.type?p.A.format("dxScheduler-recurrenceAfter"):"until"===e.type?p.A.format("dxScheduler-recurrenceOn"):p.A.format("dxScheduler-recurrenceNever"),layout:"vertical",elementAttr:{class:qe},onValueChanged:e=>this._repeatEndValueChangedHandler(e)}},{colSpan:1,itemType:"group",items:[this._getRepeatUntilEditorOptions(),this._getRepeatCountEditorOptions()]}]}_renderEditors(e){this._recurrenceForm=this._createComponent(e,z.A,{items:this._editors,showValidationSummary:!1,scrollingEnabled:!0,showColonAfterLabel:!1,labelLocation:"top"}),this._changeRepeatEndInputsVisibility()}getRecurrenceForm(){return this._recurrenceForm}changeValueByVisibility(e){e?this.option("value")||this._handleDefaults():(this._recurrenceRule.makeRules(""),this.option("value",""))}_handleDefaults(){this._recurrenceRule.makeRule("freq",at[1].value),this._changeEditorValue()}_changeEditorValue(){this.option("value",this._recurrenceRule.getRecurrenceString()??"")}_daysOfWeekByRules(){let e=this._recurrenceRule.getDaysFromByDayRule();return e.length||(e=this._getDefaultByDayValue()),e}_getDefaultByDayValue(){const e=this.option("startDate"),t=e.getDay();return[st[t]]}_dayOfMonthByRules(){let e=this._recurrenceRule.getRules().bymonthday;return e||(e=this.option("startDate").getDate()),e}_monthOfYearByRules(){let e=this._recurrenceRule.getRules().bymonth;return e||(e=this.option("startDate").getMonth()+1),String(e)}_repeatEndValueChangedHandler(e){const{value:t}=e;this._changeRepeatEndInputsVisibility(t),"until"===t&&this._recurrenceRule.makeRule(t,this._getUntilValue()),"count"===t&&this._recurrenceRule.makeRule(t,this._recurrenceForm.option("formData.count")),"never"===t&&(this._recurrenceRule.makeRule("count",""),this._recurrenceRule.makeRule("until","")),this._changeEditorValue(),this._updateRepeatInputAriaLabel()}_changeRepeatEndInputsVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._recurrenceRule.getRepeatEndRule();"until"===e&&(this._recurrenceForm.itemOption("until","visible",!0),this._recurrenceForm.itemOption("count","visible",!1)),"count"===e&&(this._recurrenceForm.itemOption("until","visible",!1),this._recurrenceForm.itemOption("count","visible",!0)),"never"===e&&(this._recurrenceForm.itemOption("until","visible",!1),this._recurrenceForm.itemOption("count","visible",!1))}_getRepeatCountEditorOptions(){const e=this._recurrenceRule.getRules().count||1;return{dataField:"count",cssClass:Xe,label:{visible:!1},editorType:"dxNumberBox",editorOptions:{stylingMode:lt(),field:"count",format:`# ${p.A.format("dxScheduler-recurrenceRepeatCount")}`,width:"100%",min:1,showSpinButtons:!0,useLargeSpinButtons:!1,value:e,onValueChanged:this._repeatCountValueChangeHandler.bind(this),inputAttr:{"aria-label":p.A.format("dxScheduler-recurrenceOccurrenceLabel")}}}}_updateRepeatInputAriaLabel(){const e=this.getEditorByField("repeatEnd").itemElements(),t=p.A.format("dxScheduler-recurrenceOn"),n=this._recurrenceForm.getEditor("until").option("value"),i=`${c.A.format(n,"d")} ${c.A.format(n,"monthAndYear")}`,a=this._recurrenceForm.itemOption("until").visible,r=p.A.format("dxScheduler-recurrenceAfter"),o=p.A.format("dxScheduler-recurrenceRepeatCount"),s=this._recurrenceForm.getEditor("count").option("value"),l=this._recurrenceForm.itemOption("count").visible;e[1].setAttribute("aria-label",a?`${t} ${i}`:t),e[2].setAttribute("aria-label",l?`${r} ${s} ${o}`:r)}_repeatCountValueChangeHandler(e){if("count"===this._recurrenceRule.getRepeatEndRule()){const{value:t}=e;this._recurrenceRule.makeRule("count",t),this._changeEditorValue(),this._updateRepeatInputAriaLabel()}}_getRepeatUntilEditorOptions(){const e=this._getUntilValue();return{dataField:"until",label:{visible:!1},cssClass:Ke,editorType:"dxDateBox",editorOptions:{stylingMode:lt(),field:"until",value:e,type:"date",width:"100%",onValueChanged:this._repeatUntilValueChangeHandler.bind(this),calendarOptions:{firstDayOfWeek:this._getFirstDayOfWeek()},useMaskBehavior:!0,inputAttr:{"aria-label":p.A.format("dxScheduler-recurrenceUntilDateLabel")}}}}_formatUntilDate(e){const t=this._recurrenceRule.getRules().until,n=w.A.sameDate(t,e);return t&&n?e:w.A.setToDayEnd(e)}_repeatUntilValueChangeHandler(e){if("until"===this._recurrenceRule.getRepeatEndRule()){const t=this._formatUntilDate(new Date(e.value)),n=this.option("getStartDateTimeZone"),i=n(),a=i?"fromAppointment":"fromGrid",r=this.option("timeZoneCalculator").createDate(t,a,i);this._recurrenceRule.makeRule("until",r),this._changeEditorValue(),this._updateRepeatInputAriaLabel()}}_valueChangedHandler(e){const{value:t,previousValue:n}=e,i=e.component.option("field");this.option("visible")?(this._recurrenceRule.makeRule(i,t),"freq"===i&&(this._makeRepeatOnRule(t),this._changeRepeatOnVisibility(t,n)),this._changeEditorValue()):this.option("value","")}_makeRepeatOnRule(e){"daily"!==e&&"hourly"!==e||(this._recurrenceRule.makeRule("byday",""),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("bymonthday","")),"weekly"===e&&(this._recurrenceRule.makeRule("byday",this._daysOfWeekByRules()),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("bymonthday","")),"monthly"===e&&(this._recurrenceRule.makeRule("bymonthday",this._dayOfMonthByRules()),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("byday","")),"yearly"===e&&(this._recurrenceRule.makeRule("bymonthday",this._dayOfMonthByRules()),this._recurrenceRule.makeRule("bymonth",this._monthOfYearByRules()),this._recurrenceRule.makeRule("byday",""))}_optionChanged(e){var t,n;switch(e.name){case"readOnly":null===(t=this._recurrenceForm)||void 0===t||t.option("readOnly",e.value),null===(n=this._weekEditor)||void 0===n||n.option("readOnly",e.value),super._optionChanged(e);break;case"value":this._recurrenceRule.makeRules(e.value),this._changeRepeatIntervalLabel(),this._changeRepeatEndInputsVisibility(),this._changeEditorsValue(this._recurrenceRule.getRules()),super._optionChanged(e);break;case"startDate":this._makeRepeatOnRule(this._recurrenceRule.getRules().freq),(0,A.O9)(this._recurrenceRule.getRecurrenceString())&&this._changeEditorValue();break;case"firstDayOfWeek":if(this._weekEditor){const t=c.A.getDayNames("abbreviated"),n=st.slice(e.value).concat(st.slice(0,e.value)),i=t.slice(e.value).concat(t.slice(0,e.value)).map((e,t)=>({text:e,key:n[t]}));this._weekEditor.option("items",i)}this._recurrenceForm.itemOption("until").visible&&this._recurrenceForm.getEditor("until").option("calendarOptions.firstDayOfWeek",this._getFirstDayOfWeek());break;default:super._optionChanged(e)}}_changeRepeatOnVisibility(e,t){e!==t&&(this._recurrenceForm.itemOption("byday","visible",!1),this._recurrenceForm.itemOption("bymonthday","visible",!1),this._recurrenceForm.itemOption("bymonth","visible",!1),this._recurrenceForm.itemOption("repeatOnLabel","visible",e&&"daily"!==e&&"hourly"!==e),"weekly"===e&&this._recurrenceForm.itemOption("byday","visible",!0),"monthly"===e&&this._recurrenceForm.itemOption("bymonthday","visible",!0),"yearly"===e&&(this._recurrenceForm.itemOption("bymonthday","visible",!0),this._recurrenceForm.itemOption("bymonth","visible",!0)))}_changeRepeatIntervalLabel(){const{freq:e}=this._recurrenceRule.getRules();e&&this._recurrenceForm.itemOption("intervalLabel","template",p.A.format(`dxScheduler-recurrenceRepeat${e.charAt(0).toUpperCase()}${e.substr(1).toLowerCase()}`))}_changeEditorsValue(e){this._recurrenceForm.getEditor("freq").option("value",(e.freq||at[1].value).toLowerCase()),this._changeDayOfWeekValue(),this._changeDayOfMonthValue(),this._changeMonthOfYearValue(),this._changeIntervalValue(e.interval),this._changeRepeatCountValue(),this._changeRepeatEndValue(),this._changeRepeatUntilValue()}_changeIntervalValue(e){this._recurrenceForm.getEditor("interval").option("value",e||1)}_changeRepeatEndValue(){const e=this._recurrenceRule.getRepeatEndRule();this._recurrenceForm.getEditor("repeatEnd").option("value",e)}_changeDayOfWeekValue(){const e=this._recurrenceForm.itemOption("byday").visible;if(e){const e=this._daysOfWeekByRules();this.getEditorByField("byday").option("selectedItemKeys",e)}}_changeDayOfMonthValue(){const e=this._recurrenceForm.itemOption("bymonthday").visible;if(e){const e=this._dayOfMonthByRules();this._recurrenceForm.getEditor("bymonthday").option("value",e)}}_changeMonthOfYearValue(){const e=this._recurrenceForm.itemOption("bymonth").visible;if(e){const e=this._monthOfYearByRules();this._recurrenceForm.getEditor("bymonth").option("value",e)}}_changeRepeatCountValue(){const e=this._recurrenceRule.getRules().count||1;this._recurrenceForm.getEditor("count").option("value",e)}_changeRepeatUntilValue(){this._recurrenceForm.getEditor("until").option("value",this._getUntilValue())}_getUntilValue(){const e=this._recurrenceRule.getRules().until;if(!e)return this._formatUntilDate(new Date);const t=this.option("getStartDateTimeZone"),n=t(),i=n?"toAppointment":"toGrid";return this.option("timeZoneCalculator").createDate(e,i,n)}}(0,h.A)("dxRecurrenceEditor",dt);n(23605),n(5330);var ct=n(63029),pt=n(59981),ht=n(64826),mt=n(24906),gt=n(86498),ft=n(74567),yt=n(63825),Dt=n(33892);class Ct extends Dt.A{_feedbackHideTimeout(){return 0}_supportedKeys(){const{rtlEnabled:e}=this.option(),t=e=>{var t;e.preventDefault(),null===(t=this._clickAction)||void 0===t||t.call(this,{event:e})},n=(e,t)=>{t.preventDefault(),t.stopPropagation(),this._saveValueChangeEvent(t),this._animateValue(e)};return Object.assign({},super._supportedKeys(),{space:t,enter:t,leftArrow:t=>{n(Boolean(e),t)},rightArrow:t=>{n(!e,t)}})}_useTemplates(){return!1}_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:p.A.format("dxSwitch-switchedOnText"),switchedOffText:p.A.format("dxSwitch-switchedOffText"),value:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===Z.A.real().deviceType&&!Z.A.isSimulator(),options:{focusStateEnabled:!0}}])}_init(){super._init(),this._animating=!1}_initMarkup(){this._renderContainers(),this.$element().addClass("dx-switch").append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","switch"),this._renderSwipeable(),super._initMarkup(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()}_getInnerOffset(e,t){const n=(t-this._offsetDirection()*Number(!e))/2;return 100*n+"%"}_getHandleOffset(e,t){const{rtlEnabled:n}=this.option(),i=n?!e:e;if(i){const e=100*-t-100;return`${e}%`}return 100*-t+"%"}_renderSwitchInner(){this._$switchInner=(0,f.A)("<div>").addClass("dx-switch-inner").appendTo(this._$switchContainer),this._$handle=(0,f.A)("<div>").addClass("dx-switch-handle").appendTo(this._$switchInner)}_renderLabels(){this._$labelOn=(0,f.A)("<div>").addClass("dx-switch-on").prependTo(this._$switchInner),this._$labelOff=(0,f.A)("<div>").addClass("dx-switch-off").appendTo(this._$switchInner),this._setLabelsText()}_renderContainers(){this._$switchContainer=(0,f.A)("<div>").addClass("dx-switch-container"),this._$switchWrapper=(0,f.A)("<div>").addClass("dx-switch-wrapper").append(this._$switchContainer)}_renderSwipeable(){this._createComponent(this.$element(),gt.A,{elastic:!1,immediate:!0,onStart:e=>{this._swipeStartHandler(e.event)},onUpdated:e=>{this._swipeUpdateHandler(e.event)},onEnd:e=>{this._swipeEndHandler(e.event)},itemSizeFunc:()=>this._getItemSizeFunc()})}_getItemSizeFunc(){return(0,yt.Ot)(this._$switchContainer,!0)-(0,x.N)(this._$handle.get(0)).width}_renderSubmitElement(){this._$submitElement=(0,f.A)("<input>").attr("type","hidden").appendTo(this.$element())}_getSubmitElement(){return this._$submitElement}_offsetDirection(){const{rtlEnabled:e}=this.option();return e?-1:1}_renderPosition(e,t){const n=this._getInnerOffset(e,t),i=this._getHandleOffset(e,t);this._$switchInner.css("transform",` translateX(${n})`),this._$handle.css("transform",` translateX(${i})`)}_validateValue(){const{value:e}=this.option();"boolean"!==typeof e&&this._options.silent("value",!!e)}_renderClick(){const e=(0,ft.b4)(pt.U,this.NAME??""),t=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),mt.A.off(t,e),mt.A.on(t,e,e=>{var t;null===(t=this._clickAction)||void 0===t||t.call(this,{event:e})})}_clickHandler(e){const{event:t}=e;if(this._saveValueChangeEvent(t),this._animating||this._swiping)return;const{value:n}=this.option();this._animateValue(!n)}_animateValue(e){const{value:t}=this.option(),n=Boolean(t),i=e;if(n===i)return;this._animating=!0;const a=this._getInnerOffset(n,0),r=this._getInnerOffset(i,0),o=this._getHandleOffset(n,0),s=this._getHandleOffset(i,0),l={transform:` translateX(${a})`},u={transform:` translateX(${r})`},d={transform:` translateX(${o})`},c={transform:` translateX(${s})`};this.$element().toggleClass("dx-switch-on-value",i),ct.fx.animate(this._$handle.get(0),{from:d,to:c,duration:100}),ct.fx.animate(this._$switchInner.get(0),{from:l,to:u,duration:100,complete:()=>{this._animating=!1,this.option({value:i})}})}_swipeStartHandler(e){const{value:t,rtlEnabled:n,activeStateEnabled:i}=this.option(),a=n?0:1,r=n?1:0;e.maxLeftOffset=t?a:r,e.maxRightOffset=t?r:a,this._swiping=!0,this._feedbackDeferred=(0,S.cY)(),(0,ht.s2)(this._feedbackDeferred),this._toggleActiveState(this.$element(),Boolean(i))}_swipeUpdateHandler(e){const{value:t}=this.option();this._renderPosition(Boolean(t),e.offset)}_swipeEndHandler(e){const{value:t}=this.option(),n=this._offsetDirection(),i=this._getInnerOffset(Boolean(t),e.targetOffset),a=this._getHandleOffset(Boolean(t),e.targetOffset),r={transform:` translateX(${i})`},o={transform:` translateX(${a})`};ct.fx.animate(this._$handle.get(0),{to:o,duration:100}),ct.fx.animate(this._$switchInner.get(0),{to:r,duration:100,complete:()=>{var i;this._swiping=!1;const a=Number(t)+n*e.targetOffset;this._saveValueChangeEvent(e),this.option({value:Boolean(a)}),null===(i=this._feedbackDeferred)||void 0===i||i.resolve(),this._toggleActiveState(this.$element(),!1)}})}_renderValue(){this._validateValue();const{value:e,switchedOnText:t,switchedOffText:n}=this.option();this._renderPosition(Boolean(e),0),this.$element().toggleClass("dx-switch-on-value",e),this._getSubmitElement().val(String(e??"")),this.setAria({checked:e,label:e?t:n})}_setLabelsText(){var e,t;const{switchedOnText:n="",switchedOffText:i=""}=this.option();null===(e=this._$labelOn)||void 0===e||e.text(n),null===(t=this._$labelOff)||void 0===t||t.text(i)}_visibilityChanged(e){e&&this.repaint()}_optionChanged(e){switch(e.name){case"width":this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),super._optionChanged(e);break;default:super._optionChanged(e)}}}(0,h.A)("dxSwitch",Ct);n(93251);var vt=n(59715);const _t={Main:"mainGroup",Recurrence:"recurrenceGroup"},wt={form:"e2e-dx-scheduler-form",textEditor:"e2e-dx-scheduler-form-text",descriptionEditor:"e2e-dx-scheduler-form-description",startDateEditor:"e2e-dx-scheduler-form-start-date",endDateEditor:"e2e-dx-scheduler-form-end-date",startDateTimeZoneEditor:"e2e-dx-scheduler-form-start-date-timezone",endDateTimeZoneEditor:"e2e-dx-scheduler-form-end-date-timezone",allDaySwitch:"e2e-dx-scheduler-form-all-day-switch",recurrenceSwitch:"e2e-dx-scheduler-form-recurrence-switch"},bt=()=>new vt.A({store:Y.A.getTimeZonesCache(),paginate:!0,pageSize:10}),St=()=>(0,U.Ft)((0,U.ss)())?"filled":void 0,Tt=(e,t)=>new Date(new Date(e).setHours(t)),xt=(e,t,n)=>{const i=null===t||Boolean(t),a=null===n||Boolean(n);!i&&a&&e.option("value",n)},At=(e,t,n)=>{var i;n.itemOption(_t.Recurrence,"visible",t),null===(i=n.getEditor(e))||void 0===i||i.changeValueByVisibility(t)};class Et{constructor(e){this.isFormUpdating=!1,this.scheduler=e,this.form=null}get dxForm(){return this.form}set readOnly(e){this.form.option("readOnly",e);const{recurrenceRuleExpr:t}=this.scheduler.getDataAccessors().expr,n=this.form.getEditor(t);null===n||void 0===n||n.option("readOnly",e)}get formData(){return this.form.option("formData")}set formData(e){this.form.option("formData",e)}create(e,t,n){const{allowTimeZoneEditing:i}=this.scheduler.getEditingConfig(),a=this.scheduler.getDataAccessors(),{expr:r}=a,o=Boolean(a.get("recurrenceRule",n)),s=o?1:2,l=[...this.createMainItems(r,e,t,i),...this.scheduler.createResourceEditorModel()];t(o);const u=[{itemType:"group",name:_t.Main,colCountByScreen:{lg:2,xs:1},colSpan:s,items:l},{itemType:"group",name:_t.Recurrence,visible:o,colSpan:s,items:this.createRecurrenceEditor(r)}],d=(0,f.A)("<div>");this.scheduler.createComponent(d,z.A,{items:u,showValidationSummary:!0,scrollingEnabled:!0,colCount:"auto",colCountByScreen:{lg:2,xs:1},formData:n,showColonAfterLabel:!1,labelLocation:"top",onInitialized:e=>{this.form=e.component},screenByWidth:e=>e<600||"desktop"!==Z.A.current().deviceType?"xs":"lg",elementAttr:{class:wt.form}})}dateBoxValueChanged(e,t,n){xt(e.component,e.value,e.previousValue);const i=b.A.deserializeDate(e.value),a=b.A.deserializeDate(e.previousValue),r=this.form.getEditor(t),o=b.A.deserializeDate(r.option("value"));if(!this.isFormUpdating&&o&&i&&n(o,i)){const e=a?o.getTime()-a.getTime():0;r.option("value",new Date(i.getTime()+e))}}createTimezoneEditor(e,t,n,i,a,r){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const s=p.A.format("dxScheduler-noTimezoneTitle");return{name:this.normalizeEditorName(e),dataField:e,editorType:"dxSelectBox",visibleIndex:n,colSpan:i,cssClass:r,label:{text:" "},editorOptions:{displayExpr:"title",valueExpr:"id",placeholder:s,searchEnabled:!0,dataSource:bt(),onValueChanged:e=>{const{form:n}=this,i=n.getEditor(t);a&&i.option("value",e.value)}},visible:o}}createDateBoxItems(e,t){const n=t?2:1,i=this.scheduler.getFirstDayOfWeek();return[this.createDateBoxEditor(e.startDateExpr,n,i,"dxScheduler-editorLabelStartDate",wt.startDateEditor,t=>{this.dateBoxValueChanged(t,e.endDateExpr,(e,t)=>e<t)}),this.createTimezoneEditor(e.startDateTimeZoneExpr,e.endDateTimeZoneExpr,1,n,!0,wt.startDateTimeZoneEditor,t),this.createDateBoxEditor(e.endDateExpr,n,i,"dxScheduler-editorLabelEndDate",wt.endDateEditor,t=>{this.dateBoxValueChanged(t,e.startDateExpr,(e,t)=>t<e)}),this.createTimezoneEditor(e.endDateTimeZoneExpr,e.startDateTimeZoneExpr,3,n,!1,wt.endDateTimeZoneEditor,t)]}changeFormItemDateType(e,t,n){const i=this.getEditorPath(e,t),a=this.form.itemOption(i).editorOptions,r=n?"date":"datetime",o=Object.assign({},a,{type:r});this.form.itemOption(i,"editorOptions",o)}createMainItems(e,t,n,i){return[{name:this.normalizeEditorName(e.textExpr),dataField:e.textExpr,cssClass:wt.textEditor,editorType:"dxTextBox",colSpan:2,label:{text:p.A.format("dxScheduler-editorLabelTitle")},editorOptions:{stylingMode:St()}},{itemType:"group",colSpan:2,colCountByScreen:{lg:2,xs:1},items:this.createDateBoxItems(e,i)},{itemType:"group",colSpan:2,colCountByScreen:{lg:2,xs:2},items:[{name:this.normalizeEditorName(e.allDayExpr),dataField:e.allDayExpr,cssClass:`dx-appointment-form-switch ${wt.allDaySwitch}`,editorType:"dxSwitch",label:{text:p.A.format("dxScheduler-allDay"),location:"right"},editorOptions:{onValueChanged:t=>{const{value:n}=t,i=this.form.getEditor(e.startDateExpr),a=this.form.getEditor(e.endDateExpr),r=b.A.deserializeDate(i.option("value"));if(!this.isFormUpdating&&r)if(n){const e=w.A.trimTime(r);i.option("value",new Date(e)),a.option("value",new Date(e))}else{const e=Tt(r,this.scheduler.getStartDayHour()),t=this.scheduler.getCalculatedEndDate(e);i.option("value",e),a.option("value",t)}this.changeFormItemDateType(e.startDateExpr,"Main",n),this.changeFormItemDateType(e.endDateExpr,"Main",n)}}},{editorType:"dxSwitch",dataField:"repeat",cssClass:`dx-appointment-form-switch ${wt.recurrenceSwitch}`,name:"visibilityChanged",label:{text:p.A.format("dxScheduler-editorLabelRecurrence"),location:"right"},editorOptions:{onValueChanged:i=>{const{form:a}=this,r=i.value?1:2;a.itemOption(_t.Main,"colSpan",r),a.itemOption(_t.Recurrence,"colSpan",r),At(e.recurrenceRuleExpr,i.value,a),n(i.value),t()}}}]},{itemType:"empty",colSpan:2},{name:this.normalizeEditorName(e.descriptionExpr),dataField:e.descriptionExpr,cssClass:wt.descriptionEditor,editorType:"dxTextArea",colSpan:2,label:{text:p.A.format("dxScheduler-editorLabelDescription")},editorOptions:{stylingMode:St()}},{itemType:"empty",colSpan:2}]}createRecurrenceEditor(e){return[{name:this.normalizeEditorName(e.recurrenceRuleExpr),dataField:e.recurrenceRuleExpr,editorType:"dxRecurrenceEditor",editorOptions:{firstDayOfWeek:this.scheduler.getFirstDayOfWeek(),timeZoneCalculator:this.scheduler.getTimeZoneCalculator(),getStartDateTimeZone:()=>this.scheduler.getDataAccessors().get("startDateTimeZone",this.formData)},label:{text:" ",visible:!1}}]}setEditorsType(e){const{startDateExpr:t,endDateExpr:n}=this.scheduler.getDataAccessors().expr,i=this.getEditorPath(t,"Main"),a=this.getEditorPath(n,"Main"),r=this.form.itemOption(i),o=this.form.itemOption(a);if(r&&o){const t=r.editorOptions,n=o.editorOptions;t.type=n.type=e?"date":"datetime",this.form.itemOption(i,"editorOptions",t),this.form.itemOption(a,"editorOptions",n)}}updateRecurrenceEditorStartDate(e,t){const n={startDate:e};this.setEditorOptions(t,"Recurrence",n)}setEditorOptions(e,t,n){const i=this.getEditorPath(e,t),a=this.form.itemOption(i);a&&this.form.itemOption(i,"editorOptions",(0,T.X)({},a.editorOptions,n))}updateFormData(e){this.isFormUpdating=!0,this.form.option("formData",e);const t=this.scheduler.getDataAccessors(),{expr:n}=t,i=t.get("startDate",e),a=t.get("allDay",e),r=new Date(i);this.updateRecurrenceEditorStartDate(r,n.recurrenceRuleExpr),this.setEditorsType(a),this.isFormUpdating=!1}createDateBoxEditor(e,t,n,i,a,r){return{editorType:"dxDateBox",name:this.normalizeEditorName(e),dataField:e,colSpan:t,cssClass:a,label:{text:p.A.format(i)},validationRules:[{type:"required"}],editorOptions:{stylingMode:St(),width:"100%",calendarOptions:{firstDayOfWeek:n},onValueChanged:r,useMaskBehavior:!0}}}getEditorPath(e,t){const n=this.normalizeEditorName(e);return`${_t[t]}.${n}`}normalizeEditorName(e){return e?e.replace(/\./g,"_"):e}}var kt=n(2308);const Ot={DEFAULT:485,RECURRENCE:970,FULLSCREEN:1e3,MOBILE:{DEFAULT:350,FULLSCREEN:500}},It=()=>"desktop"!==Z.A.current().deviceType,Rt=()=>"ios"===Z.A.current().platform,Mt={AFTER:"after",BEFORE:"before"},Vt=()=>({doneButton:{shortcut:"done",options:{text:p.A.format("Done")},location:Mt.AFTER},cancelButton:{shortcut:"cancel",location:Rt()?Mt.BEFORE:Mt.AFTER}}),Pt=(e,t)=>{const n=[],i=Vt();return e&&n.push(Object.assign({},i.doneButton,{onClick:t})),n.push(i.cancelButton),n},$t=()=>{const e=(0,E.zk)(),t=e&&(0,yt.RG)(e);return!!t&&(It()?t<Ot.MOBILE.FULLSCREEN:t<Ot.FULLSCREEN)},Wt=e=>It()?Ot.MOBILE.DEFAULT:e?Ot.RECURRENCE:Ot.DEFAULT;var Bt=n(60177),Ht=n(50856);let Gt=null;const Nt=function(e){return new Ht.A((0,f.A)("<div>").appendTo(e&&e.container||(0,Bt.Uq)()),e)},Ft=function(){Gt&&(Gt.$element().remove(),Gt=null)};function Lt(e){return Ft(),Gt=Nt(e),Gt.show()}function zt(){return Gt?Gt.hide().done(Ft).promise():(new S.cY).resolve()}var Ut=n(95161);class jt{constructor(e,t){this.source=e,this.dataAccessors=t}get startDate(){return this.dataAccessors.get("startDate",this.source)}set startDate(e){this.dataAccessors.set("startDate",this.source,e)}get endDate(){return this.dataAccessors.get("endDate",this.source)}set endDate(e){this.dataAccessors.set("endDate",this.source,e)}get allDay(){return this.dataAccessors.get("allDay",this.source)}set allDay(e){this.dataAccessors.set("allDay",this.source,e)}get text(){return this.dataAccessors.get("text",this.source)??""}set text(e){this.dataAccessors.set("text",this.source,e)}get description(){return this.dataAccessors.get("description",this.source)??""}set description(e){this.dataAccessors.set("description",this.source,e)}get startDateTimeZone(){return this.dataAccessors.get("startDateTimeZone",this.source)}get endDateTimeZone(){return this.dataAccessors.get("endDateTimeZone",this.source)}get recurrenceRule(){return this.dataAccessors.get("recurrenceRule",this.source)}set recurrenceRule(e){this.dataAccessors.set("recurrenceRule",this.source,e)}get recurrenceException(){return this.dataAccessors.get("recurrenceException",this.source)}set recurrenceException(e){this.dataAccessors.set("recurrenceException",this.source,e)}get disabled(){return this.dataAccessors.get("disabled",this.source)}get duration(){const{startDate:e,endDate:t}=this;return t&&e?t.getTime()-e.getTime():0}get isRecurrent(){return this.dataAccessors.isRecurrent(this.source)}clone(){return new jt((0,Ut.tm)({},this.source,!1,!1,!1,!0),this.dataAccessors)}serialize(){return this.dataAccessors.set("startDate",this.source,this.dataAccessors.get("startDate",this.source)),this.dataAccessors.set("endDate",this.source,this.dataAccessors.get("endDate",this.source)),this}getCalculatedDates(e,t){return{startDate:e.createDate(this.startDate,t,this.startDateTimeZone),endDate:e.createDate(this.endDate,t,this.endDateTimeZone)}}calculateDates(e,t){const{startDate:n,endDate:i}=this.getCalculatedDates(e,t);return this.startDate&&(this.startDate=n),this.endDate&&(this.endDate=i),this}}const Yt=w.A.dateToMilliseconds,Zt="dx-scheduler-legacy-appointment-popup",qt=Yt("day"),Xt={height:"auto",maxHeight:"100%",showCloseButton:!1,showTitle:!1,preventScrollEvents:!1,enableBodyScroll:!1,defaultOptionsRules:[{device:()=>Z.A.current().android,options:{showTitle:!1}}],_ignorePreventScrollEventsDeprecation:!0},Kt={CREATE:0,UPDATE:1,EXCLUDE_FROM_SERIES:2};class Qt{constructor(e,t){this.scheduler=e,this.form=t,this.popup=null,this.state={action:null,lastEditData:null,saveChangesLocker:!1,appointment:{data:null}}}get visible(){return!!this.popup&&this.popup.option("visible")}show(e,t){if(this.state.appointment.data=e,this.state.action=t.action,this.state.excludeInfo=t.excludeInfo,!this.popup){const e=this._createPopupConfig();this.popup=this._createPopup(e)}this.popup.option("toolbarItems",Pt(t.isToolbarVisible,e=>this._doneButtonClickHandler(e))),this.popup.show()}hide(){this.popup.hide()}dispose(){var e;null===(e=this.popup)||void 0===e||e.$element().remove()}_createPopup(e){const t=(0,f.A)("<div>").addClass(Zt).appendTo(this.scheduler.getElement());return this.scheduler.createComponent(t,kt.A,e)}_createPopupConfig(){return Object.assign({},Xt,{onHiding:()=>this.scheduler.focus(),contentTemplate:()=>this._createPopupContent(),onShowing:e=>this._onShowing(e),wrapperAttr:{class:Zt}})}_onShowing(e){this._updateForm(),e.component.$overlayContent().attr("aria-label",p.A.format("dxScheduler-ariaEditForm"));const t={form:this.form.dxForm,popup:this.popup,appointmentData:this.state.appointment.data,cancel:!1};this.scheduler.getAppointmentFormOpening()(t),this.scheduler.processActionResult(t,t=>{t?e.cancel=!0:this.updatePopupFullScreenMode()})}_createPopupContent(){return this._createForm(),this.form.dxForm.$element()}_createFormData(e){const t=this._createAppointmentAdapter(e),n=this.scheduler.getResourceManager(),i=ae(e,n.resources);return Object.assign({},e,i,{repeat:Boolean(t.recurrenceRule)})}_createForm(){const e=this.state.appointment.data,t=this._createFormData(e);this.form.create(this.triggerResize.bind(this),this.changeSize.bind(this),t)}_isReadOnly(e){const t=this._createAppointmentAdapter(e);return!(!e||!t.disabled)||this.state.action!==Kt.CREATE&&!this.scheduler.getEditingConfig().allowUpdating}_createAppointmentAdapter(e){return new jt(e,this.scheduler.getDataAccessors())}_updateForm(){const{data:e}=this.state.appointment,t=this._createFormData(e),n=this._createAppointmentAdapter(t).clone().calculateDates(this.scheduler.getTimeZoneCalculator(),"toAppointment").source;this.form.readOnly=this._isReadOnly(n),this.form.updateFormData(n)}triggerResize(){this.popup&&(0,d.ho)(this.popup.$element())}changeSize(e){if(this.popup){const t=$t(),n=t?"100%":Wt(e);this.popup.option("fullScreen",t),this.popup.option("maxWidth",n)}}updatePopupFullScreenMode(){if(this.form.dxForm&&this.visible){const{formData:e}=this.form,t=this.scheduler.getDataAccessors(),n=t.get("recurrenceRule",e);this.changeSize(n)}}saveChangesAsync(e){const t=new S.cY,n=this.form.dxForm.validate();return e&&this._showLoadPanel(),(0,S.z7)((null===n||void 0===n?void 0:n.complete)||n).done(e=>{if(e&&!e.isValid)return zt(),void t.resolve(!1);const{repeat:n}=this.form.formData,i=this._createAppointmentAdapter(this.form.formData),a=i.clone().calculateDates(this.scheduler.getTimeZoneCalculator(),"fromAppointment"),r=!n&&Boolean(a.recurrenceRule);this._addMissingDSTTime(i,a),r&&(a.recurrenceRule="");const o=a.source;switch(delete o.repeat,this.state.action){case Kt.CREATE:this.scheduler.addAppointment(o).done(t.resolve);break;case Kt.UPDATE:this.scheduler.updateAppointment(this.state.appointment.data,o).done(t.resolve);break;case Kt.EXCLUDE_FROM_SERIES:this.scheduler.updateAppointment(this.state.excludeInfo.sourceAppointment,this.state.excludeInfo.updatedAppointment),this.scheduler.addAppointment(o).done(t.resolve)}t.done(()=>{zt(),this.state.lastEditData=o})}),t.promise()}_doneButtonClickHandler(e){e.cancel=!0,this.saveEditDataAsync()}saveEditDataAsync(){const e=new S.cY;return this._tryLockSaveChanges()&&(0,S.z7)(this.saveChangesAsync(!0)).done(()=>{if(this.state.lastEditData){const e=this._createAppointmentAdapter(this.state.lastEditData),{startDate:t,endDate:n,allDay:i}=e,a=t.getTime(),r=n.getTime(),o=i||r-a>=qt,s=this.scheduler.getResourceManager(),l=ie(this.state.lastEditData,s.resources);this.scheduler.updateScrollPosition(t,l,o),this.state.lastEditData=null}this._unlockSaveChanges(),e.resolve()}),e.promise()}_showLoadPanel(){const e=this.popup.$overlayContent();Lt({container:e,position:{of:e}})}_tryLockSaveChanges(){return!1===this.state.saveChangesLocker&&(this.state.saveChangesLocker=!0,!0)}_unlockSaveChanges(){this.state.saveChangesLocker=!1}_addMissingDSTTime(e,t){const n=this.scheduler.getTimeZoneCalculator();t.startDate=this._addMissingDSTShiftToDate(n,e.startDate,t.startDate),t.endDate&&(t.endDate=this._addMissingDSTShiftToDate(n,e.endDate,t.endDate))}_addMissingDSTShiftToDate(e,t,n){var i,a;const r=null===(i=e.getOffsets(t))||void 0===i?void 0:i.common,o=null===(a=e.getOffsets(n))||void 0===a?void 0:a.common,s=r-o;return s?new Date(n.getTime()+s*Yt("hour")):n}}const Jt="dx-scheduler-appointment-popup",en=w.A.dateToMilliseconds("day"),tn={CREATE:0,UPDATE:1,EXCLUDE_FROM_SERIES:2};class nn{get popup(){return this._popup}get visible(){var e;return Boolean(null===(e=this._popup)||void 0===e?void 0:e.option("visible"))}constructor(e,t){this.scheduler=e,this.form=t,this.state={action:null,lastEditData:null,saveChangesLocker:!1,appointment:{data:null}}}show(e,t){if(this.state.appointment.data=e,this.state.action=t.action,this.state.allowSaving=t.allowSaving,this.state.excludeInfo=t.excludeInfo,!this._popup){const e=this._createPopupConfig();this._createPopup(e)}this._popup.show()}hide(){var e;null===(e=this._popup)||void 0===e||e.hide()}dispose(){var e;this.form.dispose(),null===(e=this._popup)||void 0===e||e.dispose(),this._popup=void 0}_createPopup(e){const t=(0,f.A)("<div>").addClass(Jt).appendTo(this.scheduler.getElement());this.scheduler.createComponent(t,kt.A,e)}_createPopupConfig(){const e=this.scheduler.getEditingConfig(),t=(null===e||void 0===e?void 0:e.popup)??{};this.customPopupOptions=t;const n={height:"auto",maxHeight:"90%",showCloseButton:!1,showTitle:!1,preventScrollEvents:!1,enableBodyScroll:!1,_ignorePreventScrollEventsDeprecation:!0,onInitialized:e=>{var n;this._popup=e.component,null===t||void 0===t||null===(n=t.onInitialized)||void 0===n||n.call(t,e)},onHiding:e=>{var n;this.scheduler.focus(),null===t||void 0===t||null===(n=t.onHiding)||void 0===n||n.call(t,e)},contentTemplate:()=>(this.form.create({dxPopup:this.popup,updateToolbarForMainGroup:()=>this.updateToolbarForMainGroup(),updateToolbarForRecurrenceGroup:()=>this.updateToolbarForRecurrenceGroup()}),this.form.dxForm.$element()),onShowing:e=>{var n;this._onShowing(e),null===t||void 0===t||null===(n=t.onShowing)||void 0===n||n.call(t,e)},wrapperAttr:{class:Jt}};return(0,T.X)(!0,{},n,t,{onInitialized:n.onInitialized,onHiding:n.onHiding,onShowing:n.onShowing})}_onShowing(e){this._updateForm(),e.component.$overlayContent().attr("aria-label",p.A.format("dxScheduler-ariaEditForm"));const t={form:this.form.dxForm,popup:this.popup,appointmentData:this.state.appointment.data,cancel:!1};this.scheduler.getAppointmentFormOpening()(t),this.scheduler.processActionResult(t,t=>{t?e.cancel=!0:this.updatePopupFullScreenMode()})}_isReadOnly(e){return!(!Boolean(e.source)||!e.disabled)||this.state.action!==tn.CREATE&&!this.scheduler.getEditingConfig().allowUpdating}_createAppointmentAdapter(e){return new jt(e,this.scheduler.getDataAccessors())}_updateForm(){const e=this.state.appointment.data,t=this._createAppointmentAdapter(e).clone().calculateDates(this.scheduler.getTimeZoneCalculator(),"toAppointment"),n=this._createFormData(t);this.form.readOnly=this._isReadOnly(t),this.form.formData=n,this.form.showMainGroup()}_createFormData(e){const{resources:t}=this.scheduler.getResourceManager(),n=ae(e.source,t),{allDayExpr:i,recurrenceRuleExpr:a}=this.scheduler.getDataAccessors().expr;return Object.assign({},e.source,n,{[i]:Boolean(e.allDay),[a]:e.recurrenceRule})}triggerResize(){var e;null!==(e=this.popup)&&void 0!==e&&e.$element()&&(0,d.ho)(this.popup.$element())}getMaxWidth(){var e,t;return void 0!==(null===(e=this.customPopupOptions)||void 0===e?void 0:e.maxWidth)?this.customPopupOptions.maxWidth:void 0!==(null===(t=this.customPopupOptions)||void 0===t?void 0:t.width)?this.customPopupOptions.width:(0,U.Ft)((0,U.ss)())?380:420}updatePopupFullScreenMode(){if(this.visible){var e;const t=()=>{const e=(0,E.zk)(),t=e&&(0,yt.RG)(e);return t<485},n=t();this.popup.option("fullScreen",n),void 0!==(null===(e=this.customPopupOptions)||void 0===e?void 0:e.width)&&this.popup.option("width",this.customPopupOptions.width);const i=this.getMaxWidth();this.popup.option("maxWidth",n?"100%":i)}}saveChangesAsync(e){this.form.saveRecurrenceValue();const t=new S.cY,n=this.form.dxForm.validate();return e&&this._showLoadPanel(),(0,S.z7)((null===n||void 0===n?void 0:n.complete)??n).done(e=>{if(e&&!e.isValid)return zt(),void t.resolve(!1);const n=this._createAppointmentAdapter(this.form.formData),i=n.clone().calculateDates(this.scheduler.getTimeZoneCalculator(),"fromAppointment");this._addMissingDSTTime(n,i);const a=i.source;switch(this.state.action){case tn.CREATE:this.scheduler.addAppointment(a).done(t.resolve);break;case tn.UPDATE:this.scheduler.updateAppointment(this.state.appointment.data,a).done(t.resolve);break;case tn.EXCLUDE_FROM_SERIES:this.scheduler.updateAppointment(this.state.excludeInfo.sourceAppointment,this.state.excludeInfo.updatedAppointment),this.scheduler.addAppointment(a).done(t.resolve)}t.done(()=>{zt(),this.state.lastEditData=a})}),t.promise()}_saveButtonClickHandler(e){e.cancel=!0,this.saveEditDataAsync()}saveEditDataAsync(){const e=new S.cY;return this._tryLockSaveChanges()&&(0,S.z7)(this.saveChangesAsync(!0)).done(()=>{if(this.state.lastEditData){const e=this._createAppointmentAdapter(this.state.lastEditData),{startDate:t,endDate:n,allDay:i}=e,a=t.getTime(),r=n.getTime(),o=i||r-a>=en,s=this.scheduler.getResourceManager(),l=ie(this.state.lastEditData,s.resources);this.scheduler.updateScrollPosition(t,l,o),this.state.lastEditData=null}this._unlockSaveChanges(),e.resolve()}),e.promise()}_showLoadPanel(){const e=this.popup.$overlayContent();Lt({container:e,position:{of:e}})}_tryLockSaveChanges(){return!1===this.state.saveChangesLocker&&(this.state.saveChangesLocker=!0,!0)}_unlockSaveChanges(){this.state.saveChangesLocker=!1}_addMissingDSTTime(e,t){const n=this.scheduler.getTimeZoneCalculator();t.startDate=this._addMissingDSTShiftToDate(n,e.startDate,t.startDate),t.endDate&&(t.endDate=this._addMissingDSTShiftToDate(n,e.endDate,t.endDate))}_addMissingDSTShiftToDate(e,t,n){var i,a;const r=null===(i=e.getOffsets(t))||void 0===i?void 0:i.common,o=null===(a=e.getOffsets(n))||void 0===a?void 0:a.common,s=r-o;return s?new Date(n.getTime()+s*w.A.dateToMilliseconds("hour")):n}tryApplyCustomToolbarItems(){var e;return!(null===(e=this.customPopupOptions)||void 0===e||!e.toolbarItems)&&(this.popup.option("toolbarItems",this.customPopupOptions.toolbarItems),!0)}updateToolbarForMainGroup(){if(this.tryApplyCustomToolbarItems())return;const e=this.state.action===tn.CREATE,t=e?"dxScheduler-newPopupTitle":"dxScheduler-editPopupTitle",n=[{toolbar:"top",location:"before",text:p.A.format(t),cssClass:"dx-toolbar-label"}],i=!this.form.readOnly;i&&n.push({toolbar:"top",location:"after",options:{onClick:e=>this._saveButtonClickHandler(e),stylingMode:"contained",type:"default",text:p.A.format("dxScheduler-editPopupSaveButtonText")},shortcut:"done"}),n.push({toolbar:"top",location:"after",shortcut:"cancel",options:{stylingMode:"outlined"}}),this.popup.option("toolbarItems",n)}updateToolbarForRecurrenceGroup(){if(this.tryApplyCustomToolbarItems())return;const e=[{toolbar:"top",location:"before",widget:"dxButton",options:{icon:"arrowleft",stylingMode:"text",onClick:()=>{this.form.saveRecurrenceValue(),this.form.showMainGroup()}}},{toolbar:"top",location:"before",text:p.A.format("dxScheduler-editorLabelRecurrence"),cssClass:"dx-toolbar-label"}],t=!this.form.readOnly;t&&e.push({toolbar:"top",location:"after",options:{onClick:e=>this._saveButtonClickHandler(e),stylingMode:"contained",type:"default",text:p.A.format("dxScheduler-editPopupSaveButtonText")},shortcut:"done"}),e.push({toolbar:"top",location:"after",shortcut:"cancel",options:{stylingMode:"outlined"}}),this.popup.option("toolbarItems",e)}}n(34840);var an=n(22044),rn=n(18692),on=n(92324),sn=n(71791),ln=n(29518),un=n(89214),dn=n(28299);const cn="dxListItemData",pn="dx-list-item",hn="dxAppointmentSettings",mn="vertical",gn="horizontal",fn=["day","week","workWeek"],yn="dx-scheduler-fixed-appointments",Dn="dx-scheduler-appointment-reduced",Cn="dx-scheduler-appointment-reduced-icon",vn="dx-scheduler-appointment-recurrence",_n="dx-scheduler-appointment-empty",wn="dx-scheduler-all-day-appointment",bn={head:"dx-scheduler-appointment-head",body:"dx-scheduler-appointment-body",tail:"dx-scheduler-appointment-tail"},Sn={horizontal:"dx-scheduler-appointment-horizontal",vertical:"dx-scheduler-appointment-vertical"},Tn="dx-scheduler-appointment-drag-source",xn="dx-scheduler-appointment",An={APPOINTMENT_CONTENT_DETAILS:"dx-scheduler-appointment-content-details",RECURRING_ICON:"dx-scheduler-appointment-recurrence-icon",APPOINTMENT_TITLE:"dx-scheduler-appointment-title",APPOINTMENT_DATE:"dx-scheduler-appointment-content-date",ALL_DAY_CONTENT:"dx-scheduler-appointment-content-allday",ARIA_DESCRIPTION:"dx-scheduler-appointment-aria-description",ITEM:"dx-scheduler-appointment",STRIP:"dx-scheduler-appointment-strip",AGENDA_MARKER:"dx-scheduler-agenda-appointment-marker",AGENDA_RESOURCE_LIST:"dx-scheduler-appointment-resource-list",AGENDA_RESOURCE_LIST_ITEM:"dx-scheduler-appointment-resource-item",AGENDA_RESOURCE_LIST_ITEM_VALUE:"dx-scheduler-appointment-resource-item-value"},En="dx-scheduler-last-in-date-agenda-appointment",kn="dx-scheduler-appointment-has-resource-color",On="dx-scheduler-header-panel-current-time-cell",In="dx-scheduler-virtual-cell",Rn="dx-scheduler-time-panel",Mn="dx-scheduler-date-table",Vn="dx-scheduler-date-table-row",Pn="dx-scheduler-group-row",$n="dx-scheduler-group-header-content",Wn="dx-scheduler-last-group-cell",Bn="dx-scheduler-first-group-cell",Hn=["dx-scheduler-group-column-count-one","dx-scheduler-group-column-count-two","dx-scheduler-group-column-count-three"],Gn=(e,t)=>{if(!t.length||0===Object.keys(e).length)return{groupTree:[],groupLeafs:[]};const n=[{}];let i=n;t.filter(t=>e[t]).forEach(t=>{const n=e[t],a=n.items.map(e=>({resourceText:e.text,resourceIndex:n.resourceIndex,grouped:{[n.resourceIndex]:e.id},children:[]})),r=[];i.forEach(e=>{e.children=a.map(t=>Object.assign({},t,{grouped:Object.assign({},t.grouped,e.grouped)})),r.push(...e.children)}),i=r});const a=i.map((e,t)=>Object.assign({},e,{groupIndex:t}));return{groupTree:n[0].children,groupLeafs:a}},Nn=e=>e.map(e=>e.grouped),Fn=(e,t)=>{var n;return(null===(n=e.find(e=>e.groupIndex===t))||void 0===n?void 0:n.grouped)??{}},Ln=(e,t,n,i)=>{const a=Fn(t,i),r=e.map(e=>{var t;const i=a[e],r=n[e];return null===r||void 0===r||null===(t=r.items.find(e=>e.id===i))||void 0===t?void 0:t.text}).filter(Boolean);return r},zn=(e,t,n)=>{const{groups:i,resourceById:a,groupsLeafs:r}=n;if(i.length){const n=Fn(r,t.groupIndex);se(e,a,n)}},Un=function(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{info:r}=t,o=Object.assign({},e);n.set("startDate",o,new Date(r.sourceAppointment.startDate)),n.set("endDate",o,new Date(r.sourceAppointment.endDate));const s=a&&"partialDates"in r?r.partialDates:r.appointment;return o.displayStartDate=new Date(s.startDate),o.displayEndDate=new Date(s.endDate),zn(o,t,i),o},jn=(e,t,n,i)=>{const a=n.get("startDate",e),r=n.get("endDate",e);return"info"in t?Un(e,t,n,i):Object.assign({},e,{displayStartDate:a,displayEndDate:r})};var Yn=n(96004),Zn=n(33276),qn=n(47759),Xn=n(51177),Kn=n(709),Qn=Kn.A;class Jn extends Qn{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{toolbarItems:[],showCloseButton:!1,enableBodyScroll:!0,showTitle:!1,title:null,titleTemplate:null,onTitleRendered:null,bottomTemplate:null,preventScrollEvents:!1,propagateOutsideClick:!0})}_render(){var e;this.$element().addClass("dx-tooltip"),null===(e=this.$wrapper())||void 0===e||e.addClass("dx-tooltip-wrapper"),super._render()}_renderContent(){super._renderContent(),this._toggleAriaAttributes()}_toggleAriaDescription(e){const{target:t}=this.option(),n=(0,f.A)(t),i=e?this._contentId:void 0;(0,A.l6)(n.get(0))||this.setAria("describedby",i,n)}_toggleAriaAttributes(){this._contentId=`dx-${new qn.A}`,this.$overlayContent().attr({id:this._contentId}),this._toggleAriaDescription(!0)}}(0,h.A)("dxTooltip",Jn);var ei=Jn,ti=ei;let ni=null,ii=null;const ai=function(e){e=(0,T.X)({position:"top"},e);const{content:t}=e;delete e.content;const n=(0,f.A)("<div>").html(t).appendTo((0,Bt.Uq)());ii=function(){n.remove()},ni=new ti(n,e)},ri=function(){ni&&(ii(),ni=null)};function oi(e){return ri(),ai(e),ni.show()}function si(){return ni?ni.hide().done(ri).promise():(0,S.cY)().resolve()}var li=n(73965),ui=n(22984);const di=[],ci=["freq","interval","byday","byweekno","byyearday","bymonth","bymonthday","count","until","byhour","byminute","bysecond","bysetpos","wkst"],pi=["DAILY","WEEKLY","MONTHLY","YEARLY","SECONDLY","MINUTELY","HOURLY"],hi={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},mi=e=>{const{until:t}=e;return void 0!==t&&!(t instanceof Date)},gi=e=>{const{count:t}=e;return Boolean(t&&"string"===typeof t)},fi=e=>{const t=e.bymonthday;return Boolean(t&&isNaN(parseInt(t,10)))},yi=e=>{const t=e.bymonth;return Boolean(t&&isNaN(parseInt(t,10)))},Di=e=>{const{interval:t}=e;return Boolean(t&&"string"===typeof t)},Ci=e=>{const t=e.byday,n=xe(e);let i=!1;return""===t&&(i=!0),(0,ui.__)(n,(e,t)=>{if(!Object.prototype.hasOwnProperty.call(hi,t))return i=!0,!1}),i},vi=e=>{let t=!1;return(0,ui.__)(e,e=>{if(!ci.includes(e))return t=!0,!1}),t},_i=e=>{di.includes(e)||(li.A.log("W0006",e),di.push(e))},wi=(e,t)=>!(vi(e)||!e.freq||!pi.includes(e.freq)||gi(e)||Di(e)||Ci(e)||fi(e)||yi(e)||mi(e))||(_i(t),!1),bi=e=>{if(!e)return!1;const t=Se(e),n=wi(t,e);return n},Si=e=>`${c.A.format(e,"monthAndDay")}, ${c.A.format(e,"year")}`,Ti=e=>`${c.A.format(e,"shorttime")}`,xi=(e,t)=>{var n;const i=e.dataAccessors.get(t,e.data);if(!i)return i;const a=new Date(i),r=null===(n=e.timeZoneCalculator)||void 0===n?void 0:n.createDate(a,"toGrid");return r??a},Ai=e=>{const t=xi(e,"startDate"),n=xi(e,"endDate"),i=Si(t),a=Si(n),r=Ti(t),o=Ti(n),s=e.dataAccessors.get("allDay",e.data),l=p.A.format("dxScheduler-allDay");return i===a?s?`${i}, ${l}`:`${i}, ${r} - ${o}`:s?`${i} - ${a}, ${l}`:`${i}, ${r} - ${a}, ${o}`},Ei=e=>{let{partIndex:t,partTotalCount:n}=e;return(0,A.O9)(t)&&n>0?` (${t+1}/${n})`:""},ki=e=>{const t=e.dataAccessors.get("text",e.data)??"",n=Ai(e),i=Ei(e);return`${t}: ${n}${i}`},Oi=e=>{const t=p.A.format("dxScheduler-editorLabelEndDate"),n=Si(xi(e,"endDate"));return`${t}: ${n}`},Ii=e=>{if(!e.groupTexts.length)return"";const t=e.groupTexts.join(", ");return p.A.format("dxScheduler-appointmentAriaLabel-group",t)},Ri=async e=>{const t=e.getResourceManager(),n=await t.getAppointmentResourcesValues(e.data);return n.map(e=>`${e.label}: ${e.values.join(", ")}`)},Mi=async e=>{const t=await Ri(e),n=[Ii(e),...t].filter(Boolean);return n.join("; ")},Vi=(0,ft.b4)(Yn.A.enter,"dxSchedulerAppointment"),Pi=(0,ft.b4)(Yn.A.leave,"dxSchedulerAppointment");class $i extends Zn.A{get coloredElement(){return this.$element()}get rawAppointment(){return this.option("data")}get dataAccessors(){return this.option("dataAccessors")}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{data:{},groupIndex:-1,groups:[],geometry:{top:0,left:0,width:0,height:0},allowDrag:!0,allowResize:!0,reduced:null,isCompact:!1,direction:"vertical",resizableConfig:{keepAspectRatio:!1},cellHeight:0,cellWidth:0,isDragSource:!1})}notifyObserver(e,t){this.invoke(e,...t)}invoke(e){const t=this.option("notifyScheduler");if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.invoke(e,...i)}}_optionChanged(e){switch(e.name){case"data":case"groupIndex":case"groupTexts":case"geometry":case"allowDrag":case"allowResize":case"reduced":case"sortedIndex":case"isCompact":case"direction":case"resizableConfig":case"cellHeight":case"cellWidth":this._invalidate();break;case"isDragSource":this._renderDragSourceClass();break;default:super._optionChanged(e)}}_getHorizontalResizingRule(){const e={head:this.option("rtlEnabled")?"right":"left",body:"",tail:this.option("rtlEnabled")?"left":"right"},t=this.option("getResizableStep"),n=t?t():0;return{handles:this.option("reduced")?e[this.option("reduced")]:"left right",minHeight:0,minWidth:this.invoke("getCellWidth"),step:n,roundStepValue:!1}}_getVerticalResizingRule(){const e=Math.round(this.invoke("getCellHeight"));return{handles:"top bottom",minWidth:0,minHeight:e,step:e,roundStepValue:!0}}_render(){super._render(),this._renderAppointmentGeometry(),this._renderAriaLabel(),this._renderEmptyClass(),this._renderReducedAppointment(),this._renderAllDayClass(),this._renderDragSourceClass(),this._renderDirection(),this.$element().data("dxAppointmentStartDate",this.option("startDate")),this.$element().attr("role","button"),this._renderRecurrenceClass(),this._renderResizable(),this._setResourceColor()}_setResourceColor(){const e={itemData:this.rawAppointment,groupIndex:this.option("groupIndex")??0},t=this.option("getResourceManager")();t.getAppointmentColor(e).then(e=>{e&&(this.coloredElement.css("backgroundColor",e),this.coloredElement.addClass(kn))})}_renderAriaLabel(){const e=this.$element();e.attr("aria-label",ki(this.option())),Mi(this.option()).then(t=>{if(t){const n=`dx-${new qn.A}`,i=e.find(`.${An.ARIA_DESCRIPTION}`);i&&(e.attr("aria-describedby",n),i.text(t).attr("id",n))}})}_renderAppointmentGeometry(){const e=this.option("geometry"),t=this.$element();(0,an.Cy)(t,{top:e.top,left:e.left}),t.css({width:e.width<0?0:e.width,height:e.height<0?0:e.height})}_renderEmptyClass(){const e=this.option("geometry");(e.empty||this.option("isCompact"))&&this.$element().addClass(_n)}_renderReducedAppointment(){const e=this.option("reduced");e&&(this.$element().toggleClass(Dn,!0).toggleClass(bn[e],!0),this._renderAppointmentReducedIcon())}_renderAppointmentReducedIcon(){const e=(0,f.A)("<div>").addClass(Cn).appendTo(this.$element());mt.A.off(e,Vi),mt.A.on(e,Vi,()=>{oi({target:e,content:Oi(this.option())})}),mt.A.off(e,Pi),mt.A.on(e,Pi,()=>{si()})}_renderAllDayClass(){this.$element().toggleClass(wn,Boolean(this.option("allDay")))}_renderDragSourceClass(){this.$element().toggleClass(Tn,Boolean(this.option("isDragSource")))}_renderRecurrenceClass(){const e=this.dataAccessors.get("recurrenceRule",this.rawAppointment);bi(e)&&this.$element().addClass(vn)}_renderDirection(){this.$element().addClass(Sn[this.option("direction")])}_createResizingConfig(){const e="vertical"===this.option("direction")?this._getVerticalResizingRule():this._getHorizontalResizingRule();return this.invoke("isGroupedByDate")||(e.stepPrecision="strict"),e}_renderResizable(){this.option("allowResize")&&this._createComponent(this.$element(),Xn.A,(0,T.X)(this._createResizingConfig(),this.option("resizableConfig")))}_useTemplates(){return!1}}(0,h.A)("dxSchedulerAppointment",$i);class Wi extends $i{get coloredElement(){return this.$element().find(`.${An.AGENDA_MARKER}`)}_renderResourceList(){const e=this.option("getResourceManager")();e.getAppointmentResourcesValues(this.rawAppointment).then(e=>{const t=this.$element().find(`.${An.APPOINTMENT_CONTENT_DETAILS}`),n=(0,f.A)("<div>").addClass(An.AGENDA_RESOURCE_LIST).appendTo(t);e.forEach(e=>{const t=(0,f.A)("<div>").addClass(An.AGENDA_RESOURCE_LIST_ITEM).appendTo(n);(0,f.A)("<div>").text(`${e.label}:`).appendTo(t),(0,f.A)("<div>").addClass(An.AGENDA_RESOURCE_LIST_ITEM_VALUE).text(e.values.join(", ")).appendTo(t)})})}_render(){super._render(),this._renderResourceList()}}const Bi=` ${p.A.format("dxScheduler-allDay")}: `,Hi=p.A.format("dxScheduler-appointmentAriaLabel-recurring"),Gi=(e,t)=>{const n=(0,f.A)(on.A.createDocumentFragment());(0,f.A)("<div>").text(e.text).addClass(An.APPOINTMENT_TITLE).appendTo(n),t.html&&n.html(t.html);const i=(0,f.A)("<div>").addClass(An.APPOINTMENT_CONTENT_DETAILS).appendTo(n);return(0,f.A)("<div>").addClass(An.APPOINTMENT_DATE).text(e.formatDate).appendTo(i),t.isRecurrence&&(0,f.A)("<span>").addClass(`${An.RECURRING_ICON} dx-icon-repeat`).attr("aria-label",Hi).attr("role","img").appendTo(n),t.isAllDay&&(0,f.A)("<div>").text(Bi).addClass(An.ALL_DAY_CONTENT).prependTo(i),n},Ni=(e,t)=>{const n=(0,f.A)(on.A.createDocumentFragment()),i=(0,f.A)("<div>").addClass("dx-scheduler-agenda-appointment-left-layout").appendTo(n),a=(0,f.A)("<div>").addClass("dx-scheduler-agenda-appointment-right-layout").appendTo(n),r=(0,f.A)("<div>").addClass(An.AGENDA_MARKER).appendTo(i);t.isRecurrence&&(0,f.A)("<span>").addClass(`${An.RECURRING_ICON} dx-icon-repeat`).attr("aria-label",Hi).appendTo(r),(0,f.A)("<div>").addClass(An.APPOINTMENT_TITLE).text(e.text).appendTo(a);const o=(0,f.A)("<div>").addClass(An.APPOINTMENT_CONTENT_DETAILS).appendTo(a);return(0,f.A)("<div>").addClass(An.APPOINTMENT_DATE).text(e.formatDate).appendTo(o),t.isAllDay&&(0,f.A)("<div>").text(Bi).addClass(An.ALL_DAY_CONTENT).prependTo(o),n};var Fi;!function(e){e.DATETIME="DATETIME",e.TIME="TIME",e.DATE="DATE"}(Fi||(Fi={}));const Li=(e,t,n,i)=>n?Fi.DATE:i&&w.A.sameDate(e,t)?Fi.TIME:Fi.DATETIME,zi=(e,t,n)=>{const i=e.getDate()===t.getDate();switch(n){case Fi.DATETIME:return[c.A.format(e,"monthandday")," ",c.A.format(e,"shorttime")," - ",i?"":`${c.A.format(t,"monthandday")} `,c.A.format(t,"shorttime")].join("");case Fi.TIME:return`${c.A.format(e,"shorttime")} - ${c.A.format(t,"shorttime")}`;case Fi.DATE:return`${c.A.format(e,"monthandday")}${i?"":` - ${c.A.format(t,"monthandday")}`}`;default:return}};var Ui=n(45656);const ji=Ui.s.dateToMilliseconds,Yi=function(e,t,n,i){let{viewDataProvider:a}=e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=a.getCellData(t,n,i,o);return r||(s.endDate=R.X.addOffsets(s.startDate,ji("day"))),s},Zi=e=>{const{cellHeight:t,cellWidth:n,relativeAppointmentRect:i,appointment:a,rtlEnabled:r}=e,o=Math.floor(i.top/t),s=Math.round(i.left/n);return Yi(e,o,s,a.isOccupiedAllDay,a.isAllDay,r)},qi=e=>{const{cellWidth:t,cellCountInRow:n,relativeAppointmentRect:i,appointment:a,handles:r}=e,o=Zi(e),s=Math.round(i.width/t),l=o.index+(s-1);if(r.left)return{startDate:o.startDate,endDate:o.startDate>a.endDate?o.startDate:a.endDate};const u=Math.floor(l/n),d=l%n,c=Yi(e,u,d,a.isOccupiedAllDay,a.isAllDay),{endDate:p}=c;return{startDate:p<a.startDate?p:a.startDate,endDate:p}},Xi=e=>{const{cellCountInRow:t,appointment:n,handles:i,cellWidth:a,relativeAppointmentRect:r}=e,o=Zi(e);if(i.right){const i=o.index,s=Math.round(r.width/a),l=i-s+1,u=Math.floor(i/t),d=Yi(e,u,l,n.isOccupiedAllDay,n.isAllDay);return{startDate:d.startDate,endDate:d.startDate>n.endDate?d.startDate:n.endDate}}const{endDate:s}=o;return{startDate:s<n.startDate?s:n.startDate,endDate:s}},Ki=(e,t)=>{const n=e.left-t.left,i=e.top-t.top,a=n<0?e.width+n:e.width,r=i<0?e.height+i:e.height;return{left:Math.max(0,n),top:Math.max(0,i),width:a,height:r}},Qi=e=>{const{appointmentSettings:t,isVerticalGroupedWorkSpace:n,DOMMetaData:i}=e,a=t.allDay&&!n?[i.allDayPanelCellsMeta]:i.dateTableCellsMeta,{height:r,width:o}=a[t.rowIndex][t.columnIndex],s=a[t.rowIndex].length;return{cellWidth:o,cellHeight:r,cellCountInRow:s}},Ji=e=>{const{appointmentSettings:t}=e,n=Ki(e.appointmentRect,e.parentAppointmentRect),i=Qi(e),a={startDate:t.info.sourceAppointment.startDate,endDate:t.info.sourceAppointment.endDate,isAllDay:Boolean(t.info.appointment.allDay),isOccupiedAllDay:Boolean(t.allDay)},r=Object.assign({},e,i,{appointment:a,relativeAppointmentRect:n});return e.rtlEnabled?Xi(r):qi(r)},ea=e=>e.needToAdd;function ta(e,t,n){const i=e.length,a=t.length,r=Array.from({length:i+1},()=>new Array(a+1).fill(0));for(let u=1;u<=i;u+=1){const i=e[u-1];for(let e=1;e<=a;e+=1)r[u][e]=n(i,t[e-1])?r[u-1][e-1]+1:Math.max(r[u-1][e],r[u][e-1])}const o=[];let s=i,l=a;while(s>0&&l>0)n(e[s-1],t[l-1])?(o.push({item:t[l-1]}),s-=1,l-=1):r[s-1][l]>=r[s][l-1]?(o.push({item:e[s-1],needToRemove:!0}),s-=1):(o.push({item:t[l-1],needToAdd:!0}),l-=1);while(s>0)o.push({item:e[s-1],needToRemove:!0}),s-=1;while(l>0)o.push({item:t[l-1],needToAdd:!0}),l-=1;return o.reverse(),o}const na=e=>"isAgendaModel"in e?{}:"items"in e?{allDay:e.allDay,groupIndex:e.groupIndex,top:e.top,left:e.left,items:e.items.length}:{allDay:e.allDay,groupIndex:e.groupIndex,direction:e.direction,left:e.left,top:e.top,height:e.height,width:e.width,reduced:e.reduced,partIndex:e.partIndex,partTotalCount:e.partTotalCount,rowIndex:e.rowIndex,columnIndex:e.columnIndex},ia=(e,t)=>{const n=t.getUpdatedAppointment();return n===e||t.getUpdatedAppointmentKeys().some(t=>e[t.key]===t.value)},aa=e=>(t,n)=>t.itemData===n.itemData&&!ia(n.itemData,e)&&(0,v.RL)(na(t),na(n)),ra=(e,t,n)=>ta(e,t,aa(n)),oa=e=>Boolean(e&&e.is(":visible")&&!e.hasClass("dx-state-disabled")),sa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e-1;while(n>=0){const e=t[n];if(oa(e))return e;n-=1}},la=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e+1;while(n<t.length){const e=t[n];if(oa(e))return e;n+=1}},ua="dx-scheduler-scrollable-appointments",da=(0,ft.b4)(rn.U,"dxSchedulerAppointment"),ca=w.A.dateToMilliseconds;class pa extends dn.A{constructor(){super(...arguments),this.renderedElementsBySortedIndex=[]}get isAgendaView(){return this.invoke("isCurrentViewAgenda")}get isVirtualScrolling(){return this.invoke("isVirtualScrolling")}get appointmentDataSource(){return this.option("getAppointmentDataSource")()}get dataAccessors(){return this.option("dataAccessors")}getResourceManager(){return this.option("getResourceManager")()}option(e,t){return super.option(...arguments)}notifyObserver(e,t){const n=this.option("notifyScheduler");n&&n.invoke(e,t)}invoke(e){const t=this.option("notifyScheduler");if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.invoke(e,...i)}}_dispose(){clearTimeout(this._appointmentClickTimeout),super._dispose()}_supportedKeys(){const e=super._supportedKeys(),t=this._$currentAppointment;return(0,T.X)(e,{escape:function(){var e,n,i;this.resizeOccur&&(this.moveAppointmentBack(),this.resizeOccur=!1,null===(e=t.dxResizable("instance"))||void 0===e||e._detachEventHandlers(),null===(n=t.dxResizable("instance"))||void 0===n||n._attachEventHandlers(),null===(i=t.dxResizable("instance"))||void 0===i||i._toggleResizingClass(!1))}.bind(this),del:function(e){if(this.option("allowDelete")){e.preventDefault();const t=this._getItemData(e.target);this.notifyObserver("onDeleteButtonPress",{data:t,target:e.target})}}.bind(this),tab:function(e){const t=this._getNavigatableItems(),n=t.filter(".dx-state-focused");let i=n.data(hn).sortedIndex,a=e.shiftKey?sa(i,this.renderedElementsBySortedIndex):la(i,this.renderedElementsBySortedIndex);const r=t.length-1;(a||i>0&&e.shiftKey||i<r&&!e.shiftKey)&&(e.preventDefault(),a||(e.shiftKey?i--:i++,a=this._getNavigatableItemByIndex(i)),this._resetTabIndex(a),mt.A.trigger(a,"focus"))}})}_getNavigatableItemByIndex(e){const t=this._getNavigatableItems();return t.filter((t,n)=>(0,sn.p)(n,hn).sortedIndex===e).eq(0)}_getNavigatableItems(){const e=this._itemElements().not(".dx-state-disabled"),t=this.$element().find(".dx-scheduler-appointment-collector");return e.add(t)}_resetTabIndex(e){this._focusTarget().attr("tabIndex",-1),e.attr("tabIndex",this.option("tabIndex"))}_moveFocus(){}_focusTarget(){return this._getNavigatableItems()}_renderFocusTarget(){const e=this._getNavigatableItemByIndex(0);this._resetTabIndex(e)}_focusInHandler(e){super._focusInHandler(e),this._$currentAppointment=(0,f.A)(e.target),this.option("focusedElement",(0,g.cc)((0,f.A)(e.target)))}_focusOutHandler(e){const t=this._getNavigatableItemByIndex(0);this.option("focusedElement",(0,g.cc)(t)),super._focusOutHandler(e)}_eventBindingTarget(){return this._itemContainer()}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{noDataText:null,activeStateEnabled:!0,hoverStateEnabled:!0,tabIndex:0,fixedContainer:null,allDayContainer:null,allowDrag:!0,allowResize:!0,allowAllDayResize:!0,onAppointmentDblClick:null,groups:[],resources:[]})}getItemsDiff(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.map(e=>{let{sortedIndex:t}=e;return this.renderedElementsBySortedIndex[t]}),i=ra(e,t,this.appointmentDataSource);return i.filter(e=>!ea(e)).forEach((e,t)=>{e.element=n[t]}),i}_optionChanged(e){switch(e.name){case"items":if(this._cleanFocusState(),this.isAgendaView)this.forceRepaintAllAppointments(e.value||[]);else{const t=this.getItemsDiff(e.previousValue,e.value);this.repaintAppointments(t)}this._attachAppointmentsEvents();break;case"fixedContainer":case"allDayContainer":case"onAppointmentDblClick":case"allowDelete":break;case"allowDrag":case"allowResize":case"allowAllDayResize":this._cleanFocusState(),this.forceRepaintAllAppointments(this.option("items")||[]),this._attachAppointmentsEvents();break;case"focusedElement":this._resetTabIndex((0,f.A)(e.value)),super._optionChanged(e);break;case"focusStateEnabled":this._clearDropDownItemsElements(),this.renderDropDownAppointments(),super._optionChanged(e);break;default:super._optionChanged(e)}}_applyFragment(e,t){e.children().length>0&&this._getAppointmentContainer(t).append(e)}forceRepaintAllAppointments(e){this.renderedElementsBySortedIndex=[],this._renderByFragments((t,n)=>{this._getAppointmentContainer(!0).html(""),this._getAppointmentContainer(!1).html(""),0===e.length&&this._cleanItemContainer(),e.forEach((e,i)=>{const a=e.allDay?n:t;this._renderItem(i,e,a)})})}repaintAppointments(e){this.renderedElementsBySortedIndex=[],this._renderByFragments((t,n)=>{const i=this.isAgendaView||!e.some(e=>void 0===e.needToAdd&&void 0===e.needToRemove);i&&(this._getAppointmentContainer(!0).html(""),this._getAppointmentContainer(!1).html("")),0===e.length&&this._cleanItemContainer(),e.forEach((e,a)=>{if(!i||!e.needToRemove){var r,o;if(e.needToRemove)return null===(r=e.element)||void 0===r||r.detach(),void(null===(o=e.element)||void 0===o||o.remove());if(e.needToAdd){const i=e.item.allDay?n:t;return void this._renderItem(a,e.item,i)}e.element&&(e.element.data(hn,e.item),this.renderedElementsBySortedIndex[e.item.sortedIndex]=e.element)}})})}_renderByFragments(e){if(this.isVirtualScrolling){const t=(0,f.A)(on.A.createDocumentFragment()),n=(0,f.A)(on.A.createDocumentFragment());e(t,n),this._applyFragment(t,!1),this._applyFragment(n,!0)}else e(this._getAppointmentContainer(!1),this._getAppointmentContainer(!0))}_refreshActiveDescendant(){}_attachAppointmentsEvents(){this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent(),this._attachAppointmentDblClick(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents()}_clearDropDownItemsElements(){this.invoke("clearCompactAppointments")}_findItemElementByItem(e){const t=[],n=this;return this.itemElements().each(function(){const i=(0,f.A)(this);i.data(n._itemDataKey())===e&&t.push(i)}),t}_itemClass(){return xn}_itemContainer(){const e=super._itemContainer();let t=e;const n=this.option("allDayContainer");return n&&(t=e.add(n)),t}_cleanItemContainer(){super._cleanItemContainer();const e=this.option("allDayContainer");e&&e.empty()}_clean(){super._clean(),delete this._$currentAppointment,delete this._initialSize,delete this._initialCoordinates}_init(){super._init(),this.$element().addClass(ua),this._preventSingleAppointmentClick=!1}_renderAppointmentTemplate(e,t,n){const i={isAllDay:t.allDay,isRecurrence:t.recurrenceRule,html:(0,A.Qd)(t)&&t.html?t.html:void 0};let{targetedAppointmentData:a}=n;this._currentAppointmentSettings&&"isAgendaModel"in this._currentAppointmentSettings&&(a=Un(this._currentAppointmentSettings.itemData,this._currentAppointmentSettings,this.dataAccessors,this.getResourceManager(),!0));const r=this.invoke("createFormattedDateText",t,a,t.allDay?Fi.DATE:Fi.TIME);e.append(this.isAgendaView?Ni(r,i):Gi(r,i)),this.isAgendaView||e.parent().prepend((0,f.A)("<div>").addClass(An.STRIP))}_executeItemRenderAction(e,t,n){const i=this._getItemRenderAction();i&&i(this.invoke("mapAppointmentFields",{itemData:t,itemElement:n})),delete this._currentAppointmentSettings}_itemClickHandler(e){super._itemClickHandler(e,{},{afterExecute:function(e){this._processItemClick(e.args[0].event)}.bind(this)})}_processItemClick(e){const t=(0,f.A)(e.currentTarget),n=this._getItemData(t);t.is(".dx-scheduler-appointment-collector")||("keydown"===e.type||(0,ft._0)(e)?this.notifyObserver("showEditAppointmentPopup",{data:n,target:t}):this._appointmentClickTimeout=setTimeout(()=>{!this._preventSingleAppointmentClick&&(0,ln.A1)(t)&&this.notifyObserver("showAppointmentTooltip",{data:n,target:t}),this._preventSingleAppointmentClick=!1},300))}_extendActionArgs(e){const t=super._extendActionArgs(e);return this.invoke("mapAppointmentFields",t)}_render(){super._render(),this._attachAppointmentDblClick()}_attachAppointmentDblClick(){const e=this,t=e._itemSelector(),n=this._itemContainer();mt.A.off(n,da,t),mt.A.on(n,da,t,t=>{e._itemDXEventHandler(t,"onAppointmentDblClick",{},{afterExecute(t){e._dblClickHandler(t.args[0].event)}})})}_dblClickHandler(e){const t=(0,f.A)(e.currentTarget),n=this._getItemData(t);clearTimeout(this._appointmentClickTimeout),this._preventSingleAppointmentClick=!0,this.notifyObserver("showEditAppointmentPopup",{data:n,target:t})}_renderItem(e,t,n){if("items"in t)return this.renderDropDownAppointment(n,t);this._currentAppointmentSettings=t;const i=super._renderItem(e,t.itemData,n);return i.data(hn,t),-1!==t.sortedIndex&&(this.renderedElementsBySortedIndex||(this.renderedElementsBySortedIndex=[]),this.renderedElementsBySortedIndex[t.sortedIndex]=i),i}_getItemContent(e){e.data(hn,this._currentAppointmentSettings);const t=super._getItemContent(e);return t}_createItemByTemplate(e,t){const{itemData:n,container:i,index:a}=t,r=(0,f.A)(i).parent();return r.prepend((0,f.A)("<span>").addClass(An.ARIA_DESCRIPTION).attr("hidden",!0)),e.render({model:{appointmentData:n,targetedAppointmentData:this.invoke("getTargetedAppointmentData",n,r)},container:i,index:a})}_getAppointmentContainer(e){const t=this.option("allDayContainer"),n=this.itemsContainer().not(t);return e&&t?t:n}_postprocessRenderItem(e){this.renderAppointment(e.itemElement,this._currentAppointmentSettings)}renderAppointment(e,t){e.data(hn,t),this._applyResourceDataAttr(e),this.isAgendaView?this.renderAgendaAppointment(e,t):this.renderGeneralAppointment(e,t)}renderAgendaAppointment(e,t){t.isLastInGroup&&e.addClass(En);const{groups:n,groupsLeafs:i,resourceById:a}=this.getResourceManager(),r={data:t.itemData,groupIndex:t.groupIndex,groupTexts:Ln(n,i,a,t.groupIndex),notifyScheduler:this.option("notifyScheduler"),geometry:t,allowResize:!1,allowDrag:!1,groups:this.option("groups"),dataAccessors:this.option("dataAccessors"),timeZoneCalculator:this.option("timeZoneCalculator"),getResourceManager:this.option("getResourceManager")};this._createComponent(e,Wi,r)}renderGeneralAppointment(e,t){var n;const i=this.option("allowResize")&&!t.skipResizing,a=this.option("allowDrag"),{allDay:r}=t,{groups:o,groupsLeafs:s,resourceById:l}=this.getResourceManager(),u=this.option("groupByDate"),d={data:t.itemData,groupIndex:t.groupIndex,groupTexts:Ln(o,s,l,t.groupIndex),notifyScheduler:this.option("notifyScheduler"),geometry:t,direction:t.direction||"vertical",allowResize:i,allowDrag:a,allDay:r,reduced:u?void 0:t.reduced,startDate:new Date(null===(n=t.info)||void 0===n?void 0:n.appointment.startDate),cellWidth:this.invoke("getCellWidth"),cellHeight:this.invoke("getCellHeight"),resizableConfig:this._resizableConfig(t.itemData,t),groups:this.option("groups"),partIndex:t.partIndex,partTotalCount:t.partTotalCount,dataAccessors:this.option("dataAccessors"),timeZoneCalculator:this.option("timeZoneCalculator"),getResizableStep:this.option("getResizableStep"),getResourceManager:this.option("getResourceManager")};this._createComponent(e,$i,d)}_applyResourceDataAttr(e){const{resources:t}=this.getResourceManager(),n=this._getItemData(e),i=ie(n,t);Object.entries(i).forEach(t=>{let[n,i]=t;if(i.length){const t=`data-${(0,v.l5)(n.toLowerCase())}-`;i.forEach(n=>e.attr(t+(0,v.l5)(n),!0))}})}_resizableConfig(e,t){return{area:this._calculateResizableArea(t,e),onResizeStart:function(e){if(this.resizeOccur=!0,this._$currentAppointment=(0,f.A)(e.element),this.invoke("needRecalculateResizableArea")){const t=this._calculateResizableArea(this._$currentAppointment.data(hn),this._$currentAppointment.data("dxItemData"));e.component.option("area",t),e.component._renderDragOffsets(e.event)}this._initialSize={width:e.width,height:e.height},this._initialCoordinates=(0,an.x5)(this._$currentAppointment)}.bind(this),onResizeEnd:function(e){this.resizeOccur=!1,this._resizeEndHandler(e)}.bind(this)}}_calculateResizableArea(e,t){const n=this.$element().closest(".dx-scrollable-content");return this.invoke("getResizableAppointmentArea",{coordinates:{left:e.left,top:0,groupIndex:e.groupIndex},allDay:e.allDay})||n}_resizeEndHandler(e){const t=(0,f.A)(e.element),{allDay:n,info:i}=t.data(hn),a=this._getItemData(t),r=this.invoke("getViewOffsetMs");let o;if(n)o=this.resizeAllDay(e);else{const t=this._getEndResizeAppointmentStartDate(e,a,i.appointment),{endDate:n}=i.appointment,s=R.X.addOffsets(t,-r),l=R.X.addOffsets(n,-r);o=this._getDateRange(e,s,l),o.startDate=R.X.addOffsets(o.startDate,r),o.endDate=R.X.addOffsets(o.endDate,r)}this.updateResizedAppointment(t,o,this.dataAccessors,this.option("timeZoneCalculator"))}resizeAllDay(e){const t=(0,f.A)(e.element),n=this.option("timeZoneCalculator");return Ji({handles:e.handles,appointmentSettings:t.data(hn),isVerticalGroupedWorkSpace:this.option("isVerticalGroupedWorkSpace")(),appointmentRect:(0,x.N)(t[0]),parentAppointmentRect:(0,x.N)(t.parent()[0]),viewDataProvider:this.option("getViewDataProvider")(),isDateAndTimeView:this.option("isDateAndTimeView")(),startDayHour:this.invoke("getStartDayHour"),endDayHour:this.invoke("getEndDayHour"),timeZoneCalculator:n,dataAccessors:this.dataAccessors,rtlEnabled:this.option("rtlEnabled"),DOMMetaData:this.option("getDOMElementsMetaData")(),viewOffset:this.invoke("getViewOffsetMs")})}updateResizedAppointment(e,t,n,i){const a=this._getItemData(e),r=new jt(a,n).clone();r.startDate=new Date(t.startDate),r.endDate=new Date(t.endDate);const o=r.clone().calculateDates(i,"fromGrid").calculateDates(i,"toGrid"),s=r.startDate.getTime()-o.startDate.getTime(),l=r.endDate.getTime()-o.endDate.getTime();r.startDate=R.X.addOffsets(r.startDate,s),r.endDate=R.X.addOffsets(r.endDate,l);const u=r.calculateDates(i,"fromGrid").source;this.notifyObserver("updateAppointmentAfterResize",{target:a,data:u,$appointment:e})}_getEndResizeAppointmentStartDate(e,t,n){const i=this.option("timeZoneCalculator"),a=new jt(t,this.dataAccessors);let{startDate:r}=n;const{startDateTimeZone:o,isRecurrent:s}=a,l=this.invoke("isAllDay",t);return e.handles.top||s||l||(r=i.createDate(a.startDate,"toGrid",o)),r}_getDateRange(e,t,n){const i=this._getItemData(e.element),a=this.invoke("getDeltaTime",e,this._initialSize,i),r=this.invoke("getRenderingStrategyDirection");let o=!1;const s=this.invoke("isAllDay",i),l=this.invoke("needCorrectAppointmentDates")&&!s;let u,d;return o="vertical"!==r||s?this.option("rtlEnabled")?e.handles.right:e.handles.left:e.handles.top,o?(u=l?this._correctStartDateByDelta(t,a):t.getTime()-a,u+=Y.A.getTimezoneOffsetChangeInMs(t,n,u,n),d=n.getTime()):(u=t.getTime(),d=l?this._correctEndDateByDelta(n,a):n.getTime()+a,d-=Y.A.getTimezoneOffsetChangeInMs(t,n,t,d)),{startDate:new Date(u),endDate:new Date(d)}}_correctEndDateByDelta(e,t){const n=this.invoke("getEndDayHour"),i=this.invoke("getStartDayHour"),a=new Date(e),r=new Date(e),o=new Date(e);r.setHours(i,0,0,0),a.setHours(n,0,0,0),o>a&&o.setHours(n,0,0,0);let s=o.getTime()+t;const l=(n-i)*ca("hour"),u=t>0?Math.ceil(t/l):Math.floor(t/l);if(s>a.getTime()||s<=r.getTime()){const e=a.getTime()-o.getTime(),n=t-e,r=new Date(o).setDate(o.getDate()+u),d=new Date(r);d.setHours(i,0,0,0),s=d.getTime()+n-l*(u-1)}return s}_correctStartDateByDelta(e,t){const n=this.invoke("getEndDayHour"),i=this.invoke("getStartDayHour"),a=new Date(e),r=new Date(e),o=new Date(e);r.setHours(i,0,0,0),a.setHours(n,0,0,0),o<r&&o.setHours(i,0,0,0);let s=o.getTime()-t;const l=(n-i)*ca("hour"),u=t>0?Math.ceil(t/l):Math.floor(t/l);if(s<r.getTime()||s>=a.getTime()){const e=o.getTime()-r.getTime(),i=t-e,a=new Date(o.setDate(o.getDate()-u));a.setHours(n,0,0,0),s=a.getTime()-i+l*(u-1)}return s}renderDropDownAppointments(){this._renderByFragments((e,t)=>{const n=this.option("items")||[];n.forEach(n=>{if("items"in n){const i=n.allDay?t:e;this.renderDropDownAppointment(i,n)}})})}renderDropDownAppointment(e,t){const n=t.items,i=[];n.forEach(e=>{const n={itemData:e.itemData,groupIndex:t.groupIndex,groups:this.option("groups")},a=this.getResourceManager();i.push({appointment:e.itemData,targetedAppointment:jn(e.itemData,e,this.dataAccessors,a),color:a.getAppointmentColor(n),settings:e})});const a=this.invoke("renderCompactAppointments",{$container:e,coordinates:{top:t.top,left:t.left},items:i,buttonColor:i[0].color,sortedIndex:t.sortedIndex,width:t.width,height:t.height,onAppointmentClick:this.option("onItemClick"),allowDrag:this.option("allowDrag"),isCompact:t.isCompact});return this.renderedElementsBySortedIndex[t.sortedIndex]=a,a}moveAppointmentBack(e){const t=this._$currentAppointment,n=this._initialSize,i=this._initialCoordinates;e&&(this._removeDragSourceClassFromDraggedAppointment(),(0,A.uF)(e.cancel)?e.cancel.resolve(!0):e.cancel=!0),t&&!e&&(i&&((0,an.Cy)(t,i),delete this._initialSize),n&&((0,yt.iT)(t,n.width),(0,yt.NG)(t,n.height),delete this._initialCoordinates))}focus(){if(this._$currentAppointment){const e=(0,g.cc)(this._$currentAppointment);this.option("focusedElement",e),mt.A.trigger(e,"focus")}}_removeDragSourceClassFromDraggedAppointment(){const e=this._itemElements().filter(`.${Tn}`);e.each((e,t)=>{const n=(0,f.A)(t).dxSchedulerAppointment("instance");n.option("isDragSource",!1)})}_setDragSourceAppointment(e,t){const n=this._findItemElementByItem(e),{startDate:i,endDate:a}=t.info.sourceAppointment,{groupIndex:r}=t;n.forEach(e=>{const{info:t,groupIndex:n}=e.data(hn),{startDate:o,endDate:s}=t.sourceAppointment,l=e.dxSchedulerAppointment("instance"),u=i.getTime()===o.getTime()&&a.getTime()===s.getTime()&&r===n;l.option("isDragSource",u)})}updateResizableArea(){const e=this.$element().find(".dx-scheduler-appointment.dx-resizable"),t=(0,v.VM)(e,e=>{const t=(0,f.A)(e),n=t.dxResizable("instance"),{area:i,handles:a}=n.option();return("right left"===a||"left right"===a)&&(0,A.Qd)(i)});(0,un.__)(t,(e,t)=>{const n=(0,f.A)(t),i=(0,an.x5)(n),a=this._getItemData(n),r=this._calculateResizableArea({left:i.left},a);n.dxResizable("instance").option("area",r)})}}(0,h.A)("dxSchedulerAppointments",pa);var ha=pa;class ma{constructor(e){let{scheduler:t}=e;this.scheduler=t}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.scheduler.fire(e,...n)}}var ga=ma,fa=(n(12438),n(61636)),ya=n(7698),Da=n(57064);const Ca="dx-scheduler-navigator-calendar",va="dx-scheduler-navigator-calendar-popover";class _a extends ya.A{show(e){this._isMobileLayout()||this._overlay.option("target",e),this._overlay.show()}hide(){this._overlay.hide()}_keyboardHandler(e){var t;null===(t=this._calendar)||void 0===t||t._keyboardHandler(e)}_init(){super._init(),this.$element()}_render(){super._render(),this._renderOverlay()}_renderOverlay(){this.$element().addClass(va);const e=this._isMobileLayout(),t=e?kt.A:Qn;this._overlay=this._createComponent(this.$element(),t,{contentTemplate:()=>this._createOverlayContent(),onShown:()=>this._calendar.focus(),defaultOptionsRules:[{device:()=>e,options:{fullScreen:!0,showCloseButton:!1,toolbarItems:[{shortcut:"cancel"}],_ignorePreventScrollEventsDeprecation:!0,preventScrollEvents:!1,enableBodyScroll:!1}}]})}_createOverlayContent(){const e=(0,f.A)("<div>").addClass(Ca);if(this._calendar=this._createComponent(e,s.A,this._getCalendarOptions()),this._isMobileLayout()){const t=this._createScrollable(e);return t.$element()}return e}_createScrollable(e){const t=this._createComponent("<div>",Da.A,{height:"auto",direction:"both"});return t.$content().append(e),t}_optionChanged(e){var t;let{name:n,value:i}=e;"value"===n&&(null===(t=this._calendar)||void 0===t||t.option("value",i))}_getCalendarOptions(){return{value:this.option("value"),min:this.option("min"),max:this.option("max"),firstDayOfWeek:this.option("firstDayOfWeek"),focusStateEnabled:this.option("focusStateEnabled"),onValueChanged:this.option("onValueChanged"),skipFocusCheck:!0,tabIndex:this.option("tabIndex")}}_isMobileLayout(){return!Z.A.current().generic}}(0,h.A)("dxSchedulerCalendarPopup",_a);var wa,ba=n(50846);!function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(wa||(wa={}));const Sa={container:"dx-scheduler-navigator",previousButton:"dx-scheduler-navigator-previous",calendarButton:"dx-scheduler-navigator-caption",nextButton:"dx-scheduler-navigator-next"},Ta={previousButton:"prev",nextButton:"next",calendarButton:"dateInterval"},xa=[Ta.previousButton,Ta.nextButton,Ta.calendarButton],{trimTime:Aa}=w.A,Ea=e=>{const t=e.option("min");if(!R.X.isValidDate(t))return!1;let n=new Date(t);const i=e._getCaption();n=Aa(n);const a=e._getNextDate(wa.Left,i.endDate);return a<n},ka=e=>{const t=e.option("max");if(!R.X.isValidDate(t))return!1;const n=new Date(t),i=e._getCaption();n.setHours(23,59,59);const a=e._getNextDate(wa.Right,i.startDate);return a>n},Oa=e=>{const t=p.A.format("dxScheduler-navigationPrevious");return{key:Ta.previousButton,icon:"chevronprev",elementAttr:{class:Sa.previousButton,"aria-label":t},clickHandler:()=>e._updateDateByDirection(wa.Left),onContentReady:t=>{const n=t.component;n.option("disabled",Ea(e)),e._addEvent("min",()=>{n.option("disabled",Ea(e))}),e._addEvent("currentDate",()=>{n.option("disabled",Ea(e))}),e._addEvent("startViewDate",()=>{n.option("disabled",Ea(e))})}}},Ia=e=>({key:Ta.calendarButton,text:e.captionText,elementAttr:{class:Sa.calendarButton},clickHandler:t=>e._showCalendar(t),onContentReady:t=>{const n=t.component;e._addEvent("currentView",()=>{n.option("text",e.captionText)}),e._addEvent("currentDate",()=>{n.option("text",e.captionText)}),e._addEvent("startViewDate",()=>{n.option("text",e.captionText)}),e._addEvent("views",()=>{n.option("text",e.captionText)}),e._addEvent("firstDayOfWeek",()=>{n.option("text",e.captionText)})}}),Ra=e=>{const t=p.A.format("dxScheduler-navigationNext");return{key:Ta.nextButton,icon:"chevronnext",elementAttr:{class:Sa.nextButton,"aria-label":t},clickHandler:()=>e._updateDateByDirection(wa.Right),onContentReady:t=>{const n=t.component;n.option("disabled",ka(e)),e._addEvent("min",()=>{n.option("disabled",ka(e))}),e._addEvent("currentDate",()=>{n.option("disabled",ka(e))}),e._addEvent("startViewDate",()=>{n.option("disabled",ka(e))})}}},Ma=(e,t)=>{const n=(0,U.Nt)()?"text":"contained",i=(0,ba.X)(!0,{},{location:"before",name:"dateNavigator",widget:"dxButtonGroup",cssClass:Sa.container,options:{stylingMode:n,selectionMode:"none"}},t),a=i.options,{onItemClick:r}=a;return a.items=(a.items??xa).map(t=>{switch(t){case Ta.previousButton:return Oa(e);case Ta.nextButton:return Ra(e);case Ta.calendarButton:return Ia(e);default:return t}}),a.onItemClick=e=>{var t,n;null===(t=(n=e.itemData).clickHandler)||void 0===t||t.call(n,e),null===r||void 0===r||r(e)},i};var Va=n(48304),Pa=n(96846);const{correctDateWithUnitBeginning:$a,getFirstWeekDate:Wa,getLastMonthDay:Ba,addDateInterval:Ha}=w.A,{format:Ga}=c.A,Na={milliseconds:1},Fa={days:1},La={days:7},za=6,Ua=0,ja=e=>Ha(e,Na,-1),Ya=e=>Ha(e,Na,1),Za=e=>Ha(e,Fa,1),qa=e=>Ha(e,La,1),Xa=e=>{const t=Ba(e);return Ha(e,{days:t},1)},Ka=e=>[za,Ua].includes(e.getDay()),Qa=e=>{let t=new Date(e);while(Ka(t))t=Za(t);return t},Ja=e=>{let t=new Date(e),n=0;while(n<5)Ka(t)||n++,t=Za(t);return t},er=(e,t)=>Ha(e,{days:t},1),tr=e=>{const{date:t,step:n,firstDayOfWeek:i}=e;switch(n){case"day":case"week":case"month":return $a(t,n,!1,i);case"workWeek":const e=Wa(t,i);return Qa(e);case"agenda":return new Date(t)}},nr=(e,t)=>{const{intervalCount:n,step:i,agendaDuration:a}=t;let r,o,s=new Date(e);for(let l=0;l<n;l++)r=s,o=ar(r,i,a),s=rr(o,i);return o},ir=e=>{const t=tr(e),n=nr(t,e);return{startDate:t,endDate:n}},ar=(e,t,n)=>{let i;switch(t){case"day":i=Za(e);break;case"week":i=qa(e);break;case"month":i=Xa(e);break;case"workWeek":i=Ja(e);break;case"agenda":i=er(e,n)}return ja(i)},rr=(e,t)=>{let n=Ya(e);if("workWeek"===t)while(Ka(n))n=Za(n);return n},or=(e,t)=>{const{date:n,step:i,intervalCount:a,agendaDuration:r}=e;let o;switch(i){case"day":o=Number(a);break;case"week":case"workWeek":o=7*a;break;case"agenda":o=r;break;case"month":return sr(n,a,t)}return Ha(n,{days:o},t)},sr=(e,t,n)=>{const i=e.getDate(),a=new Date(new Date(e.getTime()).setDate(1)),r=new Date(a.setMonth(a.getMonth()+t*n)),o=Ba(r),s=i<o?i:o,l=new Date(new Date(e.getTime()).setDate(s)),u=new Date(l.setMonth(l.getMonth()+t*n));return u},lr=e=>{const t=e?"abbreviated":"wide",n=c.A.getMonthNames(t);return e=>{const t=Ga(e,"day"),i=n[e.getMonth()];return`${t} ${i}`}},ur=e=>{const t=c.A.getMonthNames("abbreviated"),n=t[e.getMonth()],i=Ga(e,"year");return`${n} ${i}`},dr=e=>t=>{const n=lr(e),i=n(t),a=Ga(t,"year");return`${i} ${a}`},cr=(e,t)=>{const n=Ga(e,dr(!0)),i=Ga(t,dr(!0));return`${n}-${i}`},pr=(e,t,n)=>{const i=e.getMonth()!==t.getMonth(),a=i||n,r=i?lr(a):"d",o=Ga(e,r),s=Ga(t,dr(a));return`${o}-${s}`},hr=(e,t,n)=>{const i="agenda"===t&&n,a=lr(i),r=a(e),o=Ga(e,"year");return`${r} ${o}`},mr=(e,t,n)=>{const i=e.getFullYear()!==t.getFullYear();return i?cr(e,t):pr(e,t,n)},gr=(e,t)=>{if(w.A.sameMonth(e,t))return String(Ga(e,"monthandyear")??"");const n=w.A.sameYear(e,t),i=n?c.A.getMonthNames("abbreviated")[e.getMonth()]:ur(e),a=ur(t);return`${i}-${a}`},fr=(e,t,n,i)=>w.A.sameDate(e,t)?hr(e,i,n):"month"===i?gr(e,t):mr(e,t,n),yr=(e,t,n)=>{const{startDate:i,endDate:a}=ir(e);let r=fr(i,a,t,e.step);return(0,A.Tn)(n)&&(r=n({startDate:i,endDate:a,text:r})),{startDate:i,endDate:a,text:r}},Dr={day:"day",week:"week",workWeek:"workWeek",month:"month",timelineDay:"day",timelineWeek:"week",timelineWorkWeek:"workWeek",timelineMonth:"month",agenda:"agenda"},Cr=e=>(0,A.Gv)(e)?e.name??e.type:e,vr=e=>e.name||Va.A.format(`dxScheduler-switcher${(0,Pa.PT)(e.type,!0)}`),_r=e=>e.map(e=>Object.assign({},e,{name:Cr(e),text:vr(e)})),wr=e=>Dr[e],br={container:"dx-scheduler-view-switcher",dropDownButton:"dx-scheduler-view-switcher-dropdown-button",dropDownButtonContent:"dx-scheduler-view-switcher-dropdown-button-content"},Sr=e=>{const t=_r(e.option("views")),n=Cr(e.option("currentView")),i=t.some(e=>e.name===n);return{selectedView:i?n:void 0,views:t}},Tr=e=>e.length>1,xr=(e,t)=>{const{selectedView:n,views:i}=Sr(e),a=Tr(i),r=(0,U.Ft)()?"outlined":"contained";return Object.assign({widget:"dxButtonGroup",locateInMenu:"auto",location:"after",name:"viewSwitcher",cssClass:br.container,visible:a,options:{items:i,keyExpr:"name",selectedItemKeys:[n],stylingMode:r,onItemClick:t=>{e._updateCurrentView(t.itemData)},onContentReady:t=>{const n=t.component;e._addEvent("currentView",e=>{n.option("selectedItemKeys",[Cr(e)])})}}},t)},Ar=(e,t)=>{const{selectedView:n,views:i}=Sr(e),a=Tr(i);return Object.assign({widget:"dxDropDownButton",locateInMenu:"never",location:"after",name:"viewSwitcher",cssClass:br.container,visible:a,options:{items:i,useSelectMode:!0,keyExpr:"name",selectedItemKey:n,displayExpr:"text",showArrowIcon:!0,elementAttr:{class:br.dropDownButton},onItemClick:t=>{e._updateCurrentView(t.itemData)},onContentReady:t=>{const n=t.component;e._addEvent("currentView",e=>{n.option("selectedItemKey",Cr(e))})},dropDownOptions:{width:"max-content",_wrapperClassExternal:br.dropDownButtonContent}}},t)},Er=(e,t)=>(0,ba.X)(!0,{},{location:"before",locateInMenu:"auto",widget:"dxButton",cssClass:"dx-scheduler-today",options:{text:p.A.format("dxScheduler-navigationToday"),icon:"today",stylingMode:"outlined",type:"normal",onClick(){e._updateCurrentDate(e.option("indicatorTime")??new Date)}}},t),kr={component:"dx-scheduler-header",invisible:"dx-state-invisible"},Or={today:"today",dateNavigator:"dateNavigator",viewSwitcher:"viewSwitcher"};class Ir extends ya.A{get captionText(){return this._getCaption().text}getIntervalOptions(e){const t=this.option("currentView"),n=wr(t.type),i=this.option("firstDayOfWeek");return{date:e,step:n,firstDayOfWeek:i,intervalCount:t.intervalCount,agendaDuration:t.agendaDuration}}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{_useShortDateFormat:!Z.A.real().generic||Z.A.isSimulator()})}_createEventMap(){this.eventMap=new Map([["currentView",[]],["views",[]],["currentDate",[this._getCalendarOptionUpdater("value")]],["min",[this._getCalendarOptionUpdater("min")]],["max",[this._getCalendarOptionUpdater("max")]],["tabIndex",[this.repaint.bind(this)]],["focusStateEnabled",[this.repaint.bind(this)]],["useDropDownViewSwitcher",[this.repaint.bind(this)]],["indicatorTime",[]]])}_addEvent(e,t){this.eventMap.has(e)||this.eventMap.set(e,[]);const n=this.eventMap.get(e);this.eventMap.set(e,[...n,t])}_optionChanged(e){const{name:t,value:n}=e;if(this.eventMap.has(t)){const e=this.eventMap.get(t);e.forEach(e=>{e(n)})}}onToolbarOptionChanged(e,t){const n=(0,_.u7)(e),i=e.replace(/^toolbar\./,"");switch(this.option(e,t),this._toggleVisibility(),!0){case"toolbar"===e:this.repaint();break;case"toolbar.items"===e:this._toolbar.option("items",t.map(e=>this._parseItem(e)));break;case"items"===n[1]&&3===n.length:this._toolbar.option(i,this._parseItem(t));break;default:this._toolbar.option(i,t)}}_init(){super._init(),this._createEventMap(),this.$element().addClass(kr.component)}_render(){super._render(),this._createEventMap(),this._renderToolbar(),this._toggleVisibility()}_renderToolbar(){const e=this._createToolbarConfig(),t=(0,f.A)("<div>");t.appendTo(this.$element()),this._toolbar=this._createComponent(t,fa.A,e)}_toggleVisibility(){const e=this.option("toolbar"),t=e.visible||void 0===e.visible&&e.items.length;t?this.$element().removeClass(kr.invisible):this.$element().addClass(kr.invisible)}_createToolbarConfig(){const e=this.option("toolbar"),t=e.items.map(e=>this._parseItem(e));return Object.assign({},e,{items:t})}_parseItem(e){const t="string"===typeof e?e:e.name,n="string"===typeof e?{}:e;if(t)switch(t){case Or.today:return Er(this,n);case Or.viewSwitcher:return this.option("useDropDownViewSwitcher")?Ar(this,n):xr(this,n);case Or.dateNavigator:return this._renderCalendar(),Ma(this,n);default:li.A.log(`Unknown default element type: ${t}`)}return(0,T.X)(!0,{},e)}_callEvent(e,t){if(this.eventMap.has(e)){const n=this.eventMap.get(e);n.forEach(e=>e(t))}}_updateCurrentView(e){this.option("onCurrentViewChange")(e.name)}_updateCalendarValueAndCurrentDate(e){this._updateCurrentDate(e),this._calendar.option("value",e)}_updateCurrentDate(e){this.option("onCurrentDateChange")(e),this._callEvent("currentDate",e)}_renderCalendar(){this._calendar=this._createComponent("<div>",_a,{value:this.option("currentDate"),min:this.option("min"),max:this.option("max"),firstDayOfWeek:this.option("firstDayOfWeek"),focusStateEnabled:this.option("focusStateEnabled"),tabIndex:this.option("tabIndex"),onValueChanged:e=>{this._updateCurrentDate(e.value),this._calendar.hide()}}),this._calendar.$element().appendTo(this.$element())}_getCalendarOptionUpdater(e){return t=>{this._calendar&&this._calendar.option(e,t)}}_getNextDate(e,t){const n=t??this.option("currentDate"),i=this.getIntervalOptions(n);return or(i,e)}_getDisplayedDate(){var e;const t=new Date(this.option("startViewDate")),n="month"===(null===(e=this.option("currentView"))||void 0===e?void 0:e.type);return n?qa(t):t}_getCaptionOptions(){let e=this.option("currentDate");return this.option("startViewDate")&&(e=this._getDisplayedDate()),e=w.A.trimTime(e),this.getIntervalOptions(e)}_getCaption(){const e=this._getCaptionOptions(),t=this.option("customizeDateNavigatorText"),n=this.option("_useShortDateFormat");return yr(e,Boolean(n),t)}_updateDateByDirection(e){const t=this._getNextDate(e);this._updateCalendarValueAndCurrentDate(t)}_showCalendar(e){this._calendar.show(e.element)}_hideCalendar(){this._calendar.hide()}}(0,h.A)("dxSchedulerHeader",Ir);var Rr=n(6815);const Mr="dx-scheduler-appointment-collector",Vr=`${Mr}-compact`,Pr=`${Mr}-content`;class $r{constructor(e){this.instance=e,this.elements=[]}render(e){const{isCompact:t,items:n}=e,i=this._createTemplate(n.length,t),a=this._createCompactButton(i,e),r=a.$element();return this.elements.push(r),r.data("items",n),r}clear(){this.elements.forEach(e=>{e.detach(),e.remove()}),this.elements=[]}_onButtonClick(e,t){const n=(0,f.A)(e.element);this.instance.showAppointmentTooltipCore(n,n.data("items"),this._getExtraOptionsForTooltip(t,n))}_getExtraOptionsForTooltip(e,t){return{clickEvent:this._clickEvent(e.onAppointmentClick).bind(this),dragBehavior:e.allowDrag&&this._createTooltipDragBehavior(t).bind(this),isButtonClick:!0,_loopFocus:!0}}_clickEvent(e){return t=>{const n=this.instance._createEventArgs(t);e(n)}}_createTooltipDragBehavior(e){return t=>{const n=(0,f.A)(t.element),i=(0,f.A)(this.instance.element()),a=this.instance.getWorkSpace(),r=(0,an.x5)(e),o={filter:`.${pn}`,isSetCursorOffset:!0,initialPosition:r,getItemData:e=>{var t;return null===(t=(0,f.A)(e).data(cn))||void 0===t?void 0:t.appointment},getItemSettings:(e,t)=>t.itemSettings};a._createDragBehaviorBase(n,i,o)}}_setPosition(e,t){(0,an.Cy)(e,{top:t.top,left:t.left})}_createCompactButton(e,t){const n=this._createCompactButtonElement(t);return this.instance._createComponent(n,ye.A,{type:"default",width:t.width,height:t.height,onClick:e=>this._onButtonClick(e,t),template:this._renderTemplate(e,t.items,t.isCompact)})}static measureCollectorDimensions(e,t){const n=(0,f.A)("<div>").addClass(Mr).toggleClass(Vr,t).appendTo(e),i=getComputedStyle(n.get(0)),a={width:i.width,height:i.height,marginLeft:i.marginLeft,marginRight:i.marginRight,marginTop:i.marginTop,marginBottom:i.marginBottom};return n.detach(),n.remove(),a}_createCompactButtonElement(e){let{isCompact:t,$container:n,coordinates:i,sortedIndex:a,items:r}=e;const o=this._getDateText(r[0].appointment),s=(0,f.A)("<div>").addClass(Mr).attr("aria-roledescription",o).toggleClass(Vr,t).appendTo(n);return s.data(hn,{sortedIndex:a}),this._setPosition(s,i),s}_renderTemplate(e,t,n){return new Rr.l(i=>e.render({model:{appointmentCount:t.length,items:t.map(e=>e.appointment),isCompact:n},container:i.container}))}_createTemplate(e,t){return this._initButtonTemplate(e,t),this.instance._getAppointmentTemplate("appointmentCollectorTemplate")}_initButtonTemplate(e,t){this.instance._templateManager.addDefaultTemplates({appointmentCollector:new Rr.l(n=>this._createButtonTemplate(e,(0,f.A)(n.container),t))})}_createButtonTemplate(e,t,n){const i=n?e:p.A.getFormatter("dxScheduler-moreAppointments")(e);return t.append((0,f.A)("<span>").text(i)).addClass(Pr)}_localizeDate(e){return`${c.A.format(e,"monthAndDay")}, ${c.A.format(e,"year")}`}_getStartDate(e){const t=e.startDate;return t?new Date(t):null}_getEndDate(e){const t=e.endDate;return t?new Date(t):null}_getDateText(e){const t=this.instance._dataAccessors.get("startDate",e),n=this.instance._dataAccessors.get("endDate",e),i=t?this._localizeDate(t):"",a=n?this._localizeDate(n):"",r=i===a?`${i}`:`${i} - ${a}`;return`${r}`}}const Wr=w.A.dateToMilliseconds,Br=(e,t,n)=>{const i=n||2,a=t.width;return Math.round((e.width-a)/i)},Hr=(e,t,n)=>{let{cellSize:i,cellDurationInMinutes:a}=n;const r=e.width-t.width,o=Wr("minute")*Math.round(r*a/i.width);return o},Gr=(e,t,n)=>{let{cellSize:i,cellDurationInMinutes:a}=n;const r=e.height-t.height,o=Wr("minute")*Math.round(r*a/i.height);return o},Nr=(e,t,n)=>{const{viewType:i,resizableStep:a,isAllDayPanel:r}=n;switch(!0){case["timelineMonth","month"].includes(i)||Boolean(r):return Br(e,t,a)*Wr("day");case"agenda"===i:return 0;case fn.includes(i)&&!r:return Gr(e,t,n);default:return Hr(e,t,n)}},Fr={dataAccessors:{getAppointmentSettings:e=>(0,f.A)(e).data(hn)},DOM:{getHeaderHeight:e=>e?e._$element&&parseInt((0,yt.P$)(e._$element),10):0},renovation:{renderComponent:(e,t,n,i,a)=>{let r=e[i];if(r){const e=r.$element(),t=e.get(0).style,{height:n}=t,{width:i}=t;r.option(a),n&&(0,yt.k$)(e,n),i&&(0,yt.zj)(e,i)}else{const o=(0,g.cc)(t);r=e._createComponent(o,n,a),e[i]=r}}}};n(64727);const Lr={DAY:"day",WEEK:"week",WORK_WEEK:"workWeek",MONTH:"month",TIMELINE_DAY:"timelineDay",TIMELINE_WEEK:"timelineWeek",TIMELINE_WORK_WEEK:"timelineWorkWeek",TIMELINE_MONTH:"timelineMonth",AGENDA:"agenda"},zr=Object.values(Lr),Ur=[0,6],jr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{groupOrientation:t,intervalCount:1,type:e,skippedDays:n}},Yr={day:jr("day","horizontal"),week:jr("week","horizontal"),workWeek:jr("workWeek","horizontal",Ur),month:jr("month","horizontal"),timelineDay:jr("timelineDay","vertical"),timelineWeek:jr("timelineWeek","vertical"),timelineWorkWeek:jr("timelineWorkWeek","vertical",Ur),timelineMonth:jr("timelineMonth","vertical"),agenda:{agendaDuration:7,intervalCount:1,skippedDays:[],type:"agenda"}},Zr=w.A.dateToMilliseconds,qr=(e,t)=>Math.floor((t.getTime()-e.getTime())/Zr("hour")),Xr=(e,t)=>{const n=w.A.trimTime(new Date(e)),i=w.A.trimTime(new Date(t));return i.setDate(i.getDate()+1),[n,i]},Kr=(e,t)=>{const{startDate:n,endDate:i,allDay:a}=e;switch(t){case"hidden":return!1;case"allDay":return a;default:return!!a||!!(0,A.O9)(i)&&qr(n,i)>=24}},Qr=e=>{switch(null===e||void 0===e?void 0:e.length){case 1:return Hn[0];case 2:return Hn[1];case 3:return Hn[2];default:return}},Jr=(e,t)=>{const n=new Date(e);return(0,A.O9)(t)?(n.setHours(t,t%1*60,0,0),n):n},eo=(e,t)=>t-e,to=(e,t)=>{const n=Math.floor(t),i=Y.A.isTimezoneChangeInDate(e);return i&&n!==e.getHours()?w.A.dateToMilliseconds("hour"):0},no=(e,t)=>{let{startViewDate:n,startDayHour:i,cellIndexShift:a,viewOffset:r}=t;const o=R.X.addOffsets(e,-r),s=Y.A.isTimezoneChangeInDate(o);if(!s)return e;const l=new Date(new Date(n).setDate(n.getDate()+2)),u=to(n,i);return R.X.addOffsets(l,r,a,-u)},io=e=>e[e.length-1].length,ao=(e,t)=>e??io(t),ro=(e,t,n,i,a)=>{const r=i(e,t,a);return c.A.format(r,n)},oo=(e,t)=>t===mn&&e>0,so=(e,t)=>{const n=oo(e,t);return n?1:e},lo=[Lr.TIMELINE_DAY,Lr.TIMELINE_WEEK,Lr.TIMELINE_WORK_WEEK,Lr.TIMELINE_MONTH],uo=e=>Boolean(e&&lo.includes(e)),co=e=>e!==Lr.TIMELINE_MONTH&&e!==Lr.MONTH,po=e=>{switch(e){case Lr.TIMELINE_DAY:case Lr.TIMELINE_WEEK:case Lr.TIMELINE_WORK_WEEK:case Lr.TIMELINE_MONTH:case Lr.MONTH:return!0;default:return!1}},ho=(e,t,n,i)=>i>0?w.A.dateInRange(e,t,new Date(n.getTime()-1)):w.A.dateInRange(e,n,t,"date"),mo=(e,t)=>1===e.getDate()&&t>1,go=(e,t,n,i)=>{if(!e)return new Date(t);let a=w.A.trimTime(i);const r=a.getTime()<=t.getTime()?1:-1;let o=new Date(a.getTime()+n*r);while(!ho(t,a,o,r))a=o,o=new Date(a.getTime()+n*r);return r>0?a:o},fo=(e,t,n)=>oo(e,t)&&n,yo=e=>e,Do=(e,t,n,i)=>{switch(e){case"month":return 36e5*eo(t,n);case"timelineMonth":return w.A.dateToMilliseconds("day");default:return 36e5*i}},Co=(e,t,n)=>t*n+e,vo=e=>e.length,_o=(e,t)=>e??vo(t),wo=(e,t)=>{const n=Y.A.getDateWithoutTimezoneChange(e);return n.setHours(t),n},bo=(e,t)=>e&&t,So=(e,t)=>t&&void 0!==e?e.toString():"0",To=(e,t)=>{const n=e??new Date;return(null===t||void 0===t?void 0:t.createDate(n,"toGrid"))||n},xo=e=>(0,A.O9)(e)?e:c.A.firstDayOfWeekIndex(),Ao=(e,t)=>t===gn&&e>0,Eo=(e,t,n)=>{const i=Ao(e,t);return n&&i},ko=e=>{const t=e.getDay();return 6===t||0===t},Oo=e=>2*Math.floor(e/7),Io=(e,t)=>[...new Array(t)].reduce((t,n,i)=>e.map((e,n)=>{const a=t[n]||[];return[...a,...e.map((t,n)=>Object.assign({},t,{key:`${t.key}_group_by_date_${i}`,isFirstGroupCell:0===n,isLastGroupCell:n===e.length-1}))]}),[]),Ro=e=>(0,A.Gv)(e)?JSON.stringify(e):String(e),Mo=(e,t,n,i)=>{let a=1,r=e.map(e=>{const t=[],{resourceName:n,resourceIndex:i,items:r,data:o}=e;for(let s=0;s<a;s+=1)t.push(...r.map((e,t)=>{let{id:a,text:r,color:l}=e;return{id:a,text:r,color:l,key:`${s}_${i}_${Ro(a)}`,resourceName:n,data:null===o||void 0===o?void 0:o[t]}}));return a*=r.length,t}).filter(e=>e.length);return n&&(r=Io(r,t)),{groupPanelItems:r,baseColSpan:i}},Vo=(e,t)=>Array.from({length:Math.ceil(e/t)},(n,i)=>Math.min(e-t*i,t)),Po=w.A.dateToMilliseconds,$o=(e,t)=>{const n=new jt(t,e._dataAccessors);return fn.includes(e.currentView.type)?Kr(n,e.option("allDayPanelMode")):n.allDay},Wo={isCurrentViewAgenda(){return"agenda"===this.currentView.type},getOption(e){return this.option(e)},isVirtualScrolling(){return this.isVirtualScrolling()},isGroupedByDate(){return this.getWorkSpace().isGroupedByDate()},showAppointmentTooltip(e){const t=this.getTargetedAppointment(e.data,e.target);this.showAppointmentTooltip(e.data,e.target,t)},hideAppointmentTooltip(){this.hideAppointmentTooltip()},showEditAppointmentPopup(e){const t=this.getTargetedAppointment(e.data,e.target);this.showAppointmentPopup(e.data,!1,t)},updateAppointmentAfterResize(e){const{info:t}=Fr.dataAccessors.getAppointmentSettings(e.$appointment),{startDate:n}=t.sourceAppointment;this._checkRecurringAppointment(e.target,e.data,n,()=>{this._updateAppointment(e.target,e.data,function(){this._appointments.moveAppointmentBack()})})},getUpdatedData(e){return this._getUpdatedData(e)},updateAppointmentAfterDrag(e){let{event:t,element:n,rawAppointment:i,isDropToTheSameCell:a,isDropToSelfScheduler:r}=e;const{info:o}=Fr.dataAccessors.getAppointmentSettings(n),s=(0,T.X)({},i,this._getUpdatedData(i)),l=Boolean(i.allDay),u=Boolean(s.allDay),d=this._workSpace.supportAllDayRow()&&l!==u,c=t.fromComponent!==t.toComponent,p=()=>{this._appointments.moveAppointmentBack(t)};!r&&c||(r&&(!a||c||d)?this._checkRecurringAppointment(i,s,o.sourceAppointment.startDate,()=>{this._updateAppointment(i,s,p,t)},void 0,void 0,t):p())},onDeleteButtonPress(e){const t=this.getTargetedAppointment(e.data,(0,f.A)(e.target));this.checkAndDeleteAppointment(e.data,t),this.hideAppointmentTooltip()},createFormattedDateText(e,t,n){const i=Object.assign({},e,t),a=new jt(i,this._dataAccessors),r=i.displayStartDate||this.timeZoneCalculator.createDate(a.startDate,"toGrid"),o=i.displayEndDate||this.timeZoneCalculator.createDate(a.endDate,"toGrid"),s=n??Li(r,o,a.allDay,"month"!==this.currentView.type);return{text:a.text||p.A.format("dxScheduler-noSubject"),formatDate:zi(r,o,s)}},getResizableAppointmentArea(e){const{allDay:t}=e,n=this.getViewOption("groups");if(null!==n&&void 0!==n&&n.length){if(t||!fn.includes(this.currentView.type)){const t=this._workSpace.getGroupBounds(e.coordinates);return{left:t.left,right:t.right,top:0,bottom:0}}if(!t&&fn.includes(this.currentView.type)&&this._workSpace._isVerticalGroupedWorkSpace()){const t=this._workSpace.getGroupBounds(e.coordinates);return{left:0,right:0,top:t.top,bottom:t.bottom}}}},needRecalculateResizableArea(){return this.getWorkSpace().needRecalculateResizableArea()},isAllDay(e){return $o(this,e)},getDeltaTime(e,t,n){return Nr(e,t,{viewType:this.currentView.type,cellSize:{width:this.getWorkSpace().getCellWidth(),height:this.getWorkSpace().getCellHeight()},cellDurationInMinutes:this.getWorkSpace().option("cellDuration"),resizableStep:this.getWorkSpace().positionHelper.getResizableStep(),isAllDayPanel:$o(this,n)})},getCellWidth(){return this.getWorkSpace().getCellWidth()},getCellHeight(){return this.getWorkSpace().getCellHeight()},needCorrectAppointmentDates(){return!["month","timelineMonth"].includes(this.currentView.type)},getRenderingStrategyDirection(){return fn.includes(this.currentView.type)?"vertical":"horizontal"},updateAppointmentEndDate(e){const{endDate:t}=e,n=this.getViewOption("endDayHour"),i=this.getViewOption("startDayHour");let a=t;return t.getHours()>=n?a.setHours(n,0,0,0):!e.isSameDate&&i>0&&60*t.getHours()+t.getMinutes()<60*i&&(a=new Date(a.getTime()-Po("day")),a.setHours(n,0,0,0)),a},renderCompactAppointments(e){return this._compactAppointmentsHelper.render(e)},clearCompactAppointments(){this._compactAppointmentsHelper.clear()},getGroupCount(){return this._workSpace._getGroupCount()},mapAppointmentFields(e){const{itemData:t,itemElement:n,targetedAppointment:i}=e,a=i||this.getTargetedAppointment(t,n);return{appointmentData:e.itemData,appointmentElement:e.itemElement,targetedAppointmentData:a}},dayHasAppointment(e,t,n){return this.dayHasAppointment(e,t,n)},getLayoutManager(){return this._layoutManager},getAgendaVerticalStepHeight(){return this.getWorkSpace().getAgendaVerticalStepHeight()},getAgendaDuration(){return this.getViewOption("agendaDuration")},getStartViewDate(){return this.getStartViewDate()},getEndViewDate(){return this.getEndViewDate()},forceMaxAppointmentPerCell(){return this.forceMaxAppointmentPerCell()},getTargetedAppointmentData(e,t){return this.getTargetedAppointment(e,t)},getEndDayHour(){return this._workSpace.option("endDayHour")||this.option("endDayHour")},getStartDayHour(){return this._workSpace.option("startDayHour")||this.option("startDayHour")},getViewOffsetMs(){return this.getViewOffsetMs()},isAdaptive(){return this.option("adaptivityEnabled")},removeDroppableCellClass(){this._workSpace.removeDroppableCellClass()}};var Bo=Wo;const Ho=()=>{const e=(0,U.ss)();return{isCompact:(0,U.ip)(e),isMaterial:(0,U.gx)(e),isFluent:(0,U.Ft)(e),isMaterialBased:(0,U.Nt)(e)}},Go=(e,t)=>{const n=new Date(e);return Jr(n,t)},No=e=>new Date(e).setUTCHours(0,0,0,0),Fo=(e,t,n,i)=>{const a=No(Y.A.createUTCDateWithLocalOffset(n)),r=new Map,o=Array.from({length:i||1},()=>new Array(t).fill(0));for(let s=0;s<t;s+=1){const e=new Date(a);r.set(e.setUTCDate(e.getUTCDate()+s),s)}return e.forEach(e=>{const t=No(e.startDateUTC),n=r.get(t);void 0!==n&&(o[e.groupIndex][n]+=1)}),o},Lo=(e,t,n,i)=>{const a=go(n,e,i,n);return Jr(a,t)},zo=(e,t,n,i)=>e*i+t,Uo=(e,t,n,i)=>{if(!e)return new Date(t);let a=new Date(i);const r=new Date(i),o=a.getTime()<=t.getTime()?1:-1;let s=new Date(new Date(r.setMonth(r.getMonth()+o*n)));while(!ho(t,a,s,o))a=new Date(s),o>0&&a.setDate(1),s=new Date(new Date(s.setMonth(s.getMonth()+o*n)));return o>0?a:s},jo=(e,t)=>{if(mo(e,t)){const t=c.A.getMonthNames("abbreviated")[e.getMonth()];return[t,c.A.format(e,"day")].join(" ")}return c.A.format(e,"dd")},Yo=(e,t,n,i,a)=>{const r=Uo(n,e,i,w.A.getFirstMonthDate(n)),o=w.A.getFirstMonthDate(r),s=xo(a),l=w.A.getFirstWeekDate(o,s);return Jr(l,t)};var Zo=n(4012);const qo=(e,t)=>{const n=t??{},i=Object.assign({},n);return e.forEach(e=>{let{attr:t,value:a}=e;i[t]=a||n[t]}),i},Xo=(e,t)=>{const n=e?`${e}px`:"";return qo([{attr:"width",value:n}],t)},Ko=(e,t)=>{const n=e?`${e}px`:"";return qo([{attr:"height",value:n}],t)},Qo=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(0,Zo.g)({"dx-scheduler-first-group-cell":e,"dx-scheduler-last-group-cell":t,[n]:!0})},Jo=(e,t)=>{switch(e){case"day":case"week":case"workWeek":case"month":return t?"dx-scheduler-cell-sizes-horizontal":"";default:return"dx-scheduler-cell-sizes-horizontal"}},es=e=>e?"":"dx-scheduler-cell-sizes-vertical",ts=(e,t,n,i)=>{const a=w.A.getFirstMonthDate(Uo(n,e,i,w.A.getFirstMonthDate(n)));return Jr(a,t)},ns=(e,t,n)=>{let{startDayHour:i,startViewDate:a,cellCountInDay:r,interval:o,viewOffset:s}=n;return no(t,{startViewDate:a,startDayHour:i,cellIndexShift:e%r*o,viewOffset:s})},is=(e,t,n,i,a,r)=>{if(e%2!==0)return"";const o=no(t,{startViewDate:n,startDayHour:a,cellIndexShift:Math.round(i)*e,viewOffset:r});return c.A.format(o,"shorttime")},as=e=>7*w.A.dateToMilliseconds("day")*e,rs=(e,t)=>e?w.A.getFirstWeekDate(e,t):void 0,os=(e,t,n,i,a)=>{const r=xo(a),o=go(n,e,i,rs(n,r)),s=w.A.getFirstWeekDate(o,r);return Jr(s,t)},ss=(e,t)=>{const n=t??c.A.firstDayOfWeekIndex();return w.A.getFirstWeekDate(e,n)},ls=(e,t,n,i,a)=>{const r=go(n,e,i,rs(n,a)),o=w.A.getFirstWeekDate(r,a);if(ko(o)){const e=o.getDay(),t=(8-e)%7;o.setDate(o.getDate()+t)}return Jr(o,t)},us="yyyyMMddTHHmmss",ds=`${us}Z`,cs=(e,t,n)=>(n&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),b.A.serializeDate(e,ds)),ps=(e,t)=>{const n=[];return e.recurrenceException&&n.push(e.recurrenceException),n.push(cs(t,e.startDate,e.allDay)),n.join()},hs=(e,t,n)=>{const i=new jt(Object.assign({},e),n);return i.recurrenceException=ps(i,t),i},ms=e=>c.A.getDayNames("abbreviated")[e.getDay()],gs=e=>`${ms(e)} ${c.A.format(e,"day")}`,fs={calculateStartViewDate:Go,calculateRows:Fo},ys={calculateStartViewDate:Lo},Ds={getIntervalDuration:as,getTimePanelCellText:is,calculateStartViewDate:os,calculateViewStartDate:ss},Cs={calculateStartViewDate:ls},vs={getViewStartByOptions:Uo,getCellText:jo,calculateCellIndex:zo,calculateStartViewDate:Yo},_s={getDateForHeaderText:ns},ws={calculateStartViewDate:ts},bs={addToStyles:qo,addWidthToStyle:Xo,addHeightToStyle:Ko,getGroupCellClasses:Qo,getCellSizeHorizontalClass:Jo,getCellSizeVerticalClass:es},Ss={getThemeType:Ho},Ts={dateFilter:0,userFilter:1};class xs{constructor(e){this.options=e}get dataAccessors(){return this.options.dataAccessors}get dataSourceFilter(){return this.options.dataSourceFilter}get dateSerializationFormat(){return this.options.dateSerializationFormat}get forceIsoDateParsing(){return!(0,A.O9)(this.options.forceIsoDateParsing)||this.options.forceIsoDateParsing}makeDateFilter(e,t){const{startDateExpr:n,endDateExpr:i,recurrenceRuleExpr:a}=this.dataAccessors.expr,r=[[[i,">=",e],[n,"<",t]],"or",[a,"startswith","freq"],"or",[[i,e],[n,e]]];return a||r.splice(1,2),r}combineFilters(e,t){const n=[];return e&&n.push(e),t&&n.push(t),this.serializeRemoteFilter(n)}serializeRemoteFilter(e){if(!Array.isArray(e))return e;const{startDateExpr:t,endDateExpr:n}=this.dataAccessors.expr,i=(0,T.X)([],e);if((0,A.Kg)(i[0])&&this.forceIsoDateParsing&&i.length>1&&(i[0]===t||i[0]===n)){const e=i[i.length-1];i[i.length-1]=b.A.serializeDate(new Date(e),this.dateSerializationFormat)}for(let a=0;a<i.length;a+=1)i[a]=this.serializeRemoteFilter(i[a]);return i}getUserFilter(e){if(!this.dataSourceFilter||(0,v.RL)(this.dataSourceFilter,e))return;const t=this.dataSourceFilter.length>0&&(0,v.RL)(this.dataSourceFilter[Ts.dateFilter],e),n=t?this.dataSourceFilter[Ts.userFilter]:this.dataSourceFilter;return n}combine(e,t){const[n,i]=Xr(e,t),a=this.makeDateFilter(n,i),r=this.getUserFilter(a),o=this.combineFilters(a,r);return o}}const As=e=>new xs(e).combine(e.min,e.max),Es=w.A.dateToMilliseconds;class ks{constructor(e){this.options=e}createDate(e,t,n){const i=new Date(e);switch(t){case"toAppointment":return this.getConvertedDate(i,n,!1);case"fromAppointment":return this.getConvertedDate(i,n,!0);case"toGrid":return this.getConvertedDate(i,void 0,!1);case"fromGrid":return this.getConvertedDate(i,void 0,!0);default:throw new Error("not specified pathTimeZoneConversion")}}getOffsets(e,t){const n=-this.getClientOffset(e)/w.A.dateToMilliseconds("hour"),i=this.getCommonOffset(e),a=this.getAppointmentOffset(e,t);return{client:n,common:(0,A.O9)(i)?i:n,appointment:"number"!==typeof a?n:a}}getOriginStartDateOffsetInMs(e,t,n){const i=this.getOffsetInHours(e,t,n);return 36e5*i}getOffsetInHours(e,t,n){const{client:i,appointment:a,common:r}=this.getOffsets(e,t);return Boolean(t)&&n?a-i:Boolean(t)&&!n?a-r:!t&&n?r-i:0}getClientOffset(e){return this.options.getClientOffset(e)}getCommonOffset(e){return this.options.tryGetCommonOffset(e)}getAppointmentOffset(e,t){return this.options.tryGetAppointmentOffset(e,t)}getConvertedDate(e,t,n){const i=new Date(e.getTime()),a=this.getOffsets(i,t),r=t?"appointment":"common",o=n?-1:1;return R.X.addOffsets(i,o*Es("hour")*a[r],-o*Es("hour")*a.client)}}const Os=e=>new ks({timeZone:e,getClientOffset:e=>Y.A.getClientTimezoneOffset(e),tryGetCommonOffset:t=>Y.A.calculateTimezoneByValue(e,t),tryGetAppointmentOffset:(e,t)=>Y.A.calculateTimezoneByValue(t,e)}),Is=e=>zr.includes((0,A.Gv)(e)?e.type:e),Rs=e=>Boolean(e),Ms=e=>(0,A.Gv)(e)?(0,ba.X)({},Yr[e.type],e):Yr[e],Vs=e=>e.filter(Is).map(Ms).filter(Rs);function Ps(e,t){const n=Vs(t),i=n.find(t=>[t.name,t.type].includes(e));return i??Yr[e]??n[0]??Yr[zr[0]]}const $s=e=>e?new Date(j.J.deserializeDate(e)):void 0,Ws=e=>{const t=$s(e);return Ui.s.trimTime(t)},Bs=e=>["currentDate","min","max"].includes(e),Hs=(e,t)=>{if(!Bs(e))return t;const n="currentDate"===e?Ws(t):$s(t);return n},Gs=e=>Number.isInteger(e),Ns=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?e>t:e>=t},Fs=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?e<t:e<=t},Ls=(e,t)=>{let[n,i]=t;return e>=n&&e<=i},zs=(e,t)=>e%t===0;class Us{constructor(e){this.validators=e}validate(e){const t=Object.entries(this.validators).reduce((t,n)=>{let[i,a]=n;const r=a.validate(e);return!0!==r&&(t[i]=r),t},{});return!(Object.keys(t).length>0)||t}}const js=(e,t)=>"boolean"!==typeof t&&Array.isArray(t.arguments)?`${e}${JSON.stringify(t.arguments)}`:e,Ys=e=>"boolean"!==typeof e&&Array.isArray(e.arguments)?e.arguments:[];class Zs{constructor(e,t){this.validatorNameToErrorCodeMap=e,this.globalErrorHandler=t}handleValidationResult(e){if(!0===e)return;const t=new Map,n=new Map;Object.entries(e).forEach(e=>{let[i,a]=e;const r=this.validatorNameToErrorCodeMap[i];if(!r)return;const o=r.startsWith("E")?n:t;Object.values(a).forEach(e=>{const t=js(r,e),n=Ys(e);o.set(t,{errorCode:r,args:n})})}),Array.from(t).forEach(e=>{const[,{errorCode:t,args:n}]=e;this.globalErrorHandler.logError(t,...n)}),Array.from(n).forEach((e,t)=>{const[,{errorCode:i,args:a}]=e,r=t===n.size-1;r?this.globalErrorHandler.throwError(i,...a):this.globalErrorHandler.logError(i,...a)})}}class qs{constructor(e,t){this.valueSelector=e,this.rules=t}validate(e){const t=this.valueSelector(e),n=this.rules.reduce((e,n)=>{const i=n(t);return!0!==i&&(e[n.name]=i),e},{});return!Object.keys(n).length||n}}const Xs=(e,t)=>(Object.defineProperty(t,"name",{value:e,writable:!1}),t),Ks=Xs("mustBeInteger",e=>Gs(e)),Qs=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Xs("mustBeGreaterThan",n=>Ns(n,e,t))},Js=e=>Xs("mustBeInRange",t=>Ls(t,e)),el=e=>Xs("mustBeDivisibleBy",t=>zs(t,e)),tl=Xs("endDayHourGreaterThanStartDayHour",e=>{let{startDayHour:t,endDayHour:n}=e;return Ns(n,t)}),nl=Xs("visibleIntervalMustBeDivisibleByCellDuration",e=>{let{cellDuration:t,startDayHour:n,endDayHour:i}=e;const a=60*(i-n);return zs(a,t)}),il=Xs("cellDurationMustBeLessThanVisibleInterval",e=>{let{cellDuration:t,startDayHour:n,endDayHour:i}=e;const a=60*(i-n);return Fs(t,a,!1)}),al=Xs("allViewsHasCorrectType",e=>{const t=e.reduce((e,t)=>{const n=(0,A.Gv)(t)?t.type:t,i=Boolean(n&&zr.includes(n));return i||e.push(`'${n}'`),e},[]);return!t.length||{arguments:[t.join(", ")]}});class rl extends Us{constructor(){super({startDayHour:new qs(e=>{let{startDayHour:t}=e;return t},[Ks,Js([0,24])]),endDayHour:new qs(e=>{let{endDayHour:t}=e;return t},[Ks,Js([0,24])]),offset:new qs(e=>{let{offset:t}=e;return t},[Ks,Js([-1440,1440]),el(5)]),cellDuration:new qs(e=>{let{cellDuration:t}=e;return t},[Ks,Qs(0)]),startDayHourAndEndDayHour:new qs(e=>e,[tl]),cellDurationAndVisibleInterval:new qs(e=>e,[nl,il]),views:new qs(e=>e.views,[al])})}}const ol={logError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];I.A.log(e,...n)},throwError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw I.A.Error(e,...n)}};class sl extends Zs{constructor(){super({startDayHour:"E1058",endDayHour:"E1058",startDayHourAndEndDayHour:"E1058",offset:"E1061",cellDuration:"E1062",cellDurationAndVisibleInterval:"E1062",views:"W0008"},ol)}}class ll extends ya.A{constructor(){super(...arguments),this.views=[]}_init(){super._init(),this.optionsValidator=new rl,this.optionsValidatorErrorHandler=new sl}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,ba.X)(!0,e,Object.assign({},X,K,Q))}_defaultOptionsRules(){const e=super._defaultOptionsRules();return e.concat(J)}updateViews(){const e=this.option("views")??[];this.views=Vs(e),this.currentView=Ps(this.option("currentView")??"",e)}_initMarkup(){super._initMarkup(),this.updateViews(),this.validateOptions()}schedulerOptionChanged(e){switch(e.name){case"currentView":case"views":this.updateViews()}this.validateOptions()}validateOptions(){const e=Object.assign({},this.option(),{startDayHour:this.getViewOption("startDayHour"),endDayHour:this.getViewOption("endDayHour"),offset:this.getViewOption("offset"),cellDuration:this.getViewOption("cellDuration")}),t=this.optionsValidator.validate(e);this.optionsValidatorErrorHandler.handleValidationResult(t)}getTimeZone(){return(this.option("timeZone")||Y.A.getMachineTimezoneName())??"Etc/UTC"}getViewOption(e){var t;const n=null===(t=this.currentView)||void 0===t?void 0:t[e],i=n??this.option(e);return Hs(e,i)}hasAgendaView(){return this.views.some(e=>"agenda"===e.type||"agenda"===e.name)}}var ul=n(89651);function dl(){let e,t;const n=new Promise((n,i)=>{e=n,t=i});return{promise:n,resolve:e,reject:t}}var cl=n(82380);const pl="dx-tooltip-appointment-item",hl=`${pl}-content`,ml=`${pl}-content-subject`,gl=`${pl}-content-date`,fl=`${pl}-marker`,yl=`${pl}-marker-body`,Dl=`${pl}-delete-button-container`,Cl=`${pl}-delete-button`;class vl{constructor(e){this.asyncTemplatePromises=new Set,this._tooltip=null,this._options=e,this._extraOptions=null}show(e,t,n){this._canShowTooltip(t)&&(this.hide(),this._extraOptions=n,this._showCore(e,t))}_showCore(e,t){const n=(0,A.Kb)(e)&&e.attr("aria-describedby");this._tooltip?(this._shouldUseTarget()&&this._tooltip.option("target",e),this._list.option("dataSource",t)):this._tooltip=this._createTooltip(e,t),this._prepareBeforeVisibleChanged(t),this._tooltip.option("visible",!0),n&&e.attr("aria-describedby",n)}_prepareBeforeVisibleChanged(e){}_getContentTemplate(e){return t=>{var n,i;const a=(0,f.A)("<div>");(0,f.A)(t).append(a),this._list=this._createList(a,e),null===(n=(i=this._list).registerKeyHandler)||void 0===n||n.call(i,"escape",()=>{this.hide(),this._tooltip.option("target").focus()})}}isAlreadyShown(e){if(this._tooltip&&this._tooltip.option("visible"))return this._tooltip.option("target")[0]===e[0]}_onShown(){this._list.option("focusStateEnabled",this._extraOptions.focusStateEnabled)}dispose(){}hide(){this._tooltip&&this._tooltip.option("visible",!1)}_shouldUseTarget(){return!0}_createTooltip(e,t){}_canShowTooltip(e){return!!e.length}_createListOption(e){return{dataSource:e,onContentReady:this._onListRender.bind(this),onItemClick:e=>this._onListItemClick(e),onItemContextMenu:this._onListItemContextMenu.bind(this),itemTemplate:(e,t)=>this._renderTemplate(e.appointment,e.targetedAppointment,t,e.color),_swipeEnabled:!1,pageLoadMode:"scrollBottom"}}_onListRender(e){}_createTooltipElement(e){return(0,f.A)("<div>").appendTo(this._options.container).addClass(e)}_createList(e,t){return this._options.createComponent(e,cl.A,this._createListOption(t))}_renderTemplate(e,t,n,i){const a=this._createItemListContent(e,t,i);this._options.addDefaultTemplates({appointmentTooltip:new Rr.l(e=>{const t=(0,f.A)(e.container);return t.append(a),t})});const r=this._options.getAppointmentTemplate("appointmentTooltipTemplate");return this._createFunctionTemplate(r,e,t,n)}_createFunctionTemplate(e,t,n,i){const a=Boolean(this._extraOptions.isButtonClick);return new Rr.l(r=>{const{promise:o,resolve:s}=dl();return this.asyncTemplatePromises.add(o),e.render({model:{appointmentData:t,targetedAppointmentData:n,isButtonClicked:a},container:r.container,index:i,onRendered:()=>{this.asyncTemplatePromises.delete(o),s()}})})}_onListItemClick(e){this.hide(),this._extraOptions.clickEvent&&this._extraOptions.clickEvent(e),this._options.showAppointmentPopup(e.itemData.appointment,!1,e.itemData.targetedAppointment)}_onListItemContextMenu(e){}_createItemListContent(e,t,n){const{editing:i}=this._extraOptions,a=(0,f.A)("<div>").addClass(pl);a.append(this._createItemListMarker(n)),a.append(this._createItemListInfo(this._options.createFormattedDateText(e,t)));const r=this._options.getAppointmentDisabled(e);return!r&&(i&&!0===i.allowDeleting||!0===i)&&a.append(this._createDeleteButton(e,t)),a}_createItemListMarker(e){const t=(0,f.A)("<div>").addClass(fl),n=(0,f.A)("<div>").addClass(yl);return t.append(n),e.then(e=>{e&&n.css("background",e)}),t}_createItemListInfo(e){const t=(0,f.A)("<div>").addClass(hl),n=(0,f.A)("<div>").addClass(ml).text(e.text),i=(0,f.A)("<div>").addClass(gl).text(e.formatDate);return t.append(n).append(i)}_createDeleteButton(e,t){const n=(0,f.A)("<div>").addClass(Dl),i=(0,f.A)("<div>").addClass(Cl);return n.append(i),this._options.createComponent(i,ye.A,{icon:"trash",stylingMode:"text",onClick:n=>{this.hide(),n.event.stopPropagation(),this._options.checkAndDeleteAppointment(e,t)}}),n}}const _l="dx-scheduler-appointment-tooltip-wrapper";class wl extends vl{_prepareBeforeVisibleChanged(e){this._tooltip.option("position",{my:"bottom",at:"top",boundary:this._getBoundary(e),offset:this._extraOptions.offset,collision:"fit flipfit"})}_getBoundary(e){return this._options.isAppointmentInAllDayPanel(e[0].appointment)?this._options.container:this._options.getScrollableContainer()}_onShown(){super._onShown(),this._extraOptions.isButtonClick&&(this._list.focus(),this._list.option("focusedElement",null))}_createListOption(e,t){const n=super._createListOption(e,t);return n.showScrollbar=ul.Ay.touch?"always":"onHover",n}_createTooltip(e,t){const n=this._createTooltipElement(_l),i=this._options.createComponent(n,ei,{target:e,maxHeight:200,rtlEnabled:this._extraOptions.rtlEnabled,onShown:this._onShown.bind(this),contentTemplate:this._getContentTemplate(t),wrapperAttr:{class:_l},_loopFocus:this._extraOptions._loopFocus});return i.setAria({role:"dialog",label:p.A.format("dxScheduler-appointmentListAriaLabel")}),i}_onListRender(e){return this._extraOptions.dragBehavior&&this._extraOptions.dragBehavior(e)}_onListItemContextMenu(e){const t=this._options.createEventArgs(e);this._options.onItemContextMenu(t)}}var bl=n(35328);const Sl={slidePanel:"dx-scheduler-overlay-panel",scrollableContent:".dx-scrollable-content"},Tl={PHONE:250,TABLET:"90%",DEFAULT:"auto"},xl={PHONE:"100%",TABLET:"80%"},Al={show:{type:"slide",duration:300,from:{position:{my:"top",at:"bottom",of:(0,E.zk)()}},to:{position:{my:"center",at:"center",of:(0,E.zk)()}}},hide:{type:"slide",duration:300,to:{position:{my:"top",at:"bottom",of:(0,E.zk)()}},from:{position:{my:"center",at:"center",of:(0,E.zk)()}}}},El=e=>({shading:!1,width:xl.PHONE,height:e>Tl.PHONE?Tl.PHONE:Tl.DEFAULT,position:{my:"bottom",at:"bottom",of:(0,E.zk)()}}),kl=e=>{const t=.9*(0,yt.Oq)((0,E.zk)());return{shading:!0,width:xl.TABLET,height:e>t?Tl.TABLET:Tl.DEFAULT,position:{my:"center",at:"center",of:(0,E.zk)()}}};class Ol extends vl{_shouldUseTarget(){return!1}setTooltipConfig(){const e=(0,yt.RG)((0,E.zk)())>700,t=(0,yt.P$)(this._list.$element().find(Sl.scrollableContent));this._tooltip.option(e?kl(t):El(t))}async _onShowing(){this._tooltip.option("height",Tl.DEFAULT),this.setTooltipConfig(),await Promise.all([...this.asyncTemplatePromises]),this.setTooltipConfig()}_createTooltip(e,t){const n=this._createTooltipElement(Sl.slidePanel);return this._options.createComponent(n,bl.A,{target:(0,E.zk)(),hideOnOutsideClick:!0,animation:Al,onShowing:()=>this._onShowing(),onShown:this._onShown.bind(this),contentTemplate:this._getContentTemplate(t),wrapperAttr:{class:Sl.slidePanel}})}}var Il=n(47018);class Rl{constructor(){this.getter={},this.setter={}}updateExpressions(e){Object.entries(e).forEach(e=>{let[t,n]=e;return this.updateExpression(t,n)})}get(e,t){if(this.getter[e])return this.getter[e](t)}set(e,t,n){return this.setter[e]&&this.setter[e](t,n),this}has(e){return(0,Il.O9)(this.getter[e])}}const Ml=e=>"startDate"===e||"endDate"===e,Vl=e=>"allDay"===e||"disabled"===e;class Pl extends Rl{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;super(),this.forceIsoDateParsing=t,this.dateSerializationFormat=n,this.expr=Object.assign({},e),this.updateExpressions(e)}getCommonAccessExpressions(e){return{getter:(0,_.Hz)(e),setter:(0,_.vL)(e)}}getDateFieldAccessExpressions(e){const{getter:t,setter:n}=this.getCommonAccessExpressions(e);let i;return{getter:e=>{const n=this.forceIsoDateParsing?b.A.deserializeDate(t(e)):t(e);return void 0===n?n:new Date(n)},setter:(e,a)=>{if(this.dateSerializationFormat)i=this.dateSerializationFormat;else if(this.forceIsoDateParsing&&!i){const n=t(e);i=b.A.getDateSerializationFormat(n)}const r=b.A.serializeDate(a,i);n(e,r)}}}getBooleanFieldAccessExpressions(e){const{getter:t,setter:n}=this.getCommonAccessExpressions(e);return{getter:e=>Boolean(t(e)),setter:n}}getAccessExpressions(e,t){switch(!0){case Vl(e):return this.getBooleanFieldAccessExpressions(t);case Ml(e):return this.getDateFieldAccessExpressions(t);default:return this.getCommonAccessExpressions(t)}}updateExpression(e,t){const n=e.replace("Expr","");if(!t)return delete this.getter[n],delete this.setter[n],void delete this.expr[e];const{getter:i,setter:a}=this.getAccessExpressions(n,t);this.getter[n]=i,this.setter[n]=a,this.expr[e]=t}isRecurrent(e){const t=this.get("recurrenceRule",e),n=bi(t);return n}}var $l=n(76216);function Wl(e){return"dxSchedulerAgenda"===e.NAME}const Bl=e=>Object.values(e).map(e=>{const t=e.resourceIndex;return{editorOptions:{dataSource:e.dataSource,displayExpr:e.dataAccessor.textExpr,valueExpr:e.dataAccessor.idExpr,stylingMode:(0,U.Ft)((0,U.ss)())?"filled":"outlined"},dataField:t,editorType:e.allowMultiple?"dxTagBox":"dxSelectBox",label:{text:e.resourceName??t}}}),Hl=e=>e.fieldExpr??e.field??"",Gl=e=>{const t=Hl(e),n=(0,_.Hz)(t),i=(0,_.vL)(t);return{idsGetter:e=>(0,ee.BO)(n(e)??[]),idsSetter:(e,t)=>i(e,t)}};class Nl extends Rl{constructor(e){super(),this.idExpr=e.valueExpr??"id",this.textExpr=e.displayExpr??"text",this.colorExpr=e.colorExpr??"color",this.updateExpressions({idExpr:this.idExpr,textExpr:this.textExpr,colorExpr:this.colorExpr})}updateExpression(e,t){const n=e.replace("Expr","");if(!t)return delete this.getter[n],void delete this.setter[n];this.getter[n]=(0,_.Hz)(t),this.setter[n]=(0,_.vL)(t)}}var Fl=n(27407),Ll=n(92759);const zl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;if(e instanceof Fl.A)return e;const n=Object.assign({},(0,Ll.ho)(e,{}),t);return new Fl.A(n)},Ul=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?new Promise((t,n)=>{e.reload().then(t,n)}):e.isLoaded()?e.items():new Promise((t,n)=>{e.load().then(t,n)}):[]};class jl{constructor(e,t){this.items=[],this.data=[],this.unsubscribe=v.lQ,this.dataSource=zl(e.dataSource,t),this.isSharedDataSource=e.dataSource instanceof Fl.A,this.addDataSourceHandlers()}onInit(){var e;this.isLoaded()&&this.applyChanges((null===(e=this.dataSource)||void 0===e?void 0:e.items())??[])}isLoaded(){var e;return Boolean(null===(e=this.dataSource)||void 0===e?void 0:e.isLoaded())}addDataSourceHandlers(){const e=this.onChange.bind(this),t=this.onLoadingChanged.bind(this),n=this.onLoadError.bind(this),{dataSource:i}=this;i&&(i.on("changed",e),i.on("loadingChanged",t),i.on("loadError",n),this.unsubscribe=()=>{i.off("changed",e),i.off("loadingChanged",t),i.off("loadError",n)})}async load(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dataSource&&(e||!this.dataSource.isLoaded()&&!this.loadingStatePromise)&&(this.loadingStatePromise=this.loadingStatePromise&&!e?this.loadingStatePromise:Ul(this.dataSource,e)),await this.loadingStatePromise}onLoadingChanged(e){var t;!e&&this.isLoaded()&&this.applyChanges((null===(t=this.dataSource)||void 0===t?void 0:t.items())??[])}applyChanges(e){e&&e!==this.data&&(this.data=e,this.items=this.onLoadTransform(this.data))}dispose(){this.dataSource&&(this.isSharedDataSource?(this.unsubscribe(),this.unsubscribe=v.lQ):this.dataSource.dispose(),this.data=[],this.items=[])}}class Yl extends jl{constructor(e){super(e,{pageSize:0});const t=Gl(e);this.idsGetter=t.idsGetter,this.idsSetter=t.idsSetter,this.dataAccessor=new Nl(e),this.allowMultiple=Boolean(e.allowMultiple),this.useColorAsDefault=Boolean(e.useColorAsDefault),this.resourceIndex=String(Hl(e)),this.resourceName=e.label,this.icon=e.icon,this.onInit()}onLoadTransform(e){return e.map(e=>({id:this.dataAccessor.get("id",e),text:this.dataAccessor.get("text",e),color:this.dataAccessor.get("color",e)}))}applyChanges(e){super.applyChanges(e)}onLoadError(){}onChange(){}}const Zl=(e,t,n)=>{const i=e.filter(e=>t.includes(e.resourceIndex)),a=i.find(e=>e.useColorAsDefault);if(a)return a;const r=n.filter(e=>t.includes(e)),o=r.map(e=>i.find(t=>t.resourceIndex===e)).filter(Boolean);return o.length?o.at(-1):i.at(-1)},ql=(e,t)=>{var n;return null===(n=ne(e,t))||void 0===n?void 0:n.color},Xl=async(e,t,n,i)=>{const{groupIndex:a,itemData:r}=i,o=ie(r,e),s=Object.keys(o),l=Zl(e,s,n);if(!l)return;await l.load();const u=Fn(t,a),d=l.idsGetter(r),c=u[l.resourceIndex]??d[0];return ql(l,c)};class Kl{constructor(e){this.resources=[],this.resourceById={},this.groups=[],this.groupsLeafs=[],this.groupsTree=[],null===e||void 0===e||e.filter(Hl).forEach(e=>{const t=new Yl(e);this.resourceById[t.resourceIndex]=t,this.resources.push(t)})}async load(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await Promise.all(e.map(e=>{var n;return null===(n=this.resourceById[e])||void 0===n?void 0:n.load(t)}))}async loadGroupResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await this.load(e,t);const{groupTree:n,groupLeafs:i}=Gn(this.resourceById,e);this.groups=e,this.groupsLeafs=i,this.groupsTree=n}groupCount(){return this.groupsLeafs.length}groupResources(){return this.groups.map(e=>this.resourceById[e]).filter(Boolean)}async loadAppointmentsResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Object.keys(this.resourceById).filter(t=>!this.resourceById[t].isLoaded()&&e.some(e=>this.resourceById[t].idsGetter(e).length>0));await this.load(n,t)}async getAppointmentColor(e){return Xl(this.resources,this.groupsLeafs,this.groups,e)}async getAppointmentResourcesValues(e){const t=ie(e,this.resources),n=Object.keys(t);return await this.load(n),oe(t,this.resourceById)}dispose(){Object.values(this.resourceById).forEach(e=>e.dispose())}}const Ql=(e,t)=>{let{supportAllDayPanel:n,allDayPanelMode:i}=t;return e.map(e=>{const t=n&&Kr({allDay:e.allDay,startDate:new Date(e.source.startDate),endDate:new Date(e.source.endDate)},i);return Object.assign({},e,{isAllDayPanelOccupied:t})})},Jl=(e,t)=>{if(0===t.length)return!0;const n=ie(e,t);return t.every(e=>{const t=n[e.resourceIndex];return null===t||void 0===t?void 0:t.some(t=>e.items.some(e=>(0,v.RL)(t,e.id)))})},eu=(e,t)=>{let{resourceManager:n,showAllDayPanel:i,supportAllDayPanel:a}=t;return e.filter(e=>{if(!e.visible)return!1;const t=Boolean(a&&!i&&e.isAllDayPanelOccupied);if(t)return!1;const r=n.groupResources();return Jl(e.itemData,r)})},tu=(e,t)=>{let{startDate:n,endDate:i}=e;const a=t.findIndex(e=>{let{max:t}=e;return n<t});if(-1===a)return!1;const r=t[a].min;return n>=r||i>r},nu=(e,t)=>{let{allDayIntervals:n,regularIntervals:i,isDateTimeView:a}=t;return a&&e.allDay&&!e.isAllDayPanelOccupied?i.map(e=>({min:new Date(e.min).setUTCHours(0,0,0,0),max:e.max})):e.allDay||e.isAllDayPanelOccupied?n:i},iu=(e,t)=>e.filter(e=>{const n=nu(e,t),i=Object.assign({},e);return e.allDay&&(i.endDateUTC+=1),tu({startDate:i.startDateUTC,endDate:i.endDateUTC},n)}),au=e=>{const t=e.getWorkSpace(),n=t.getDateRange(),i={startDayHour:e.getViewOption("startDayHour"),endDayHour:e.getViewOption("endDayHour"),min:Y.A.createUTCDateWithLocalOffset(n[0]).getTime(),max:Y.A.createUTCDateWithLocalOffset(n[1]).getTime(),skippedDays:e.currentView.skippedDays};return i},ru=(e,t)=>e.map(e=>Object.assign({},e,{min:e.min+t,max:e.max+t})),ou=e=>{let{startDayHour:t,endDayHour:n,min:i,max:a,skippedDays:r}=e;if(n<t)return[];const o=Ui.s.dateTimeFromDecimal(t),s=Ui.s.dateTimeFromDecimal(n),l=new Date(i);l.setUTCHours(o.hours,o.minutes,0,0);const u=new Date(a-1);u.setUTCHours(s.hours,s.minutes,0,0);const d=l,c=u,p=[];while(d<c){if(!r.includes(d.getUTCDay())){const e=new Date(d);e.setUTCHours(s.hours,s.minutes,0,0),p.push({min:d.getTime(),max:e.getTime()})}d.setUTCDate(d.getUTCDate()+1)}return p},su=e=>0===e.length?[]:e.reduce((e,t)=>{const n=e[e.length-1];return n.max===t.min?(n.max=t.max,e):(e.push(t),e)},[{min:e[0].min,max:e[0].min}]),lu=(e,t)=>{let{startDayHour:n,endDayHour:i,min:a,max:r,skippedDays:o}=e;return t||0===n&&24===i?su(ou({startDayHour:0,endDayHour:24,min:a,max:r,skippedDays:o})):ou({startDayHour:n,endDayHour:i,min:a,max:r,skippedDays:o})},uu=["day","week","workWeek"],du=["day","week","workWeek","timelineDay","timelineWeek","timelineWorkWeek"],cu=e=>{const t=au(e),n=e.getViewOffsetMs(),i=e.currentView.type,a=uu.includes(i),r=du.includes(i);return{allDayPanelMode:e.getViewOption("allDayPanelMode"),supportAllDayPanel:a,isDateTimeView:r,showAllDayPanel:e.option("showAllDayPanel"),resourceManager:e.resourceManager,timeZone:e.getTimeZone(),dataAccessor:e._dataAccessors,viewOffset:n,firstDayOfWeek:e.option("firstDayOfWeek"),allDayIntervals:ru(lu(t,!0),n),regularIntervals:ru(lu(t,!1),n)}},pu=(e,t)=>{let{resourceManager:n}=t;return e.reduce((e,t)=>{if(0===n.groupsLeafs.length)return e.push(Object.assign({},t,{groupIndex:0})),e;const i=ie(t.itemData,n.resources),a=le(i,n.groupsLeafs);return a.forEach(n=>{e.push(Object.assign({},t,{groupIndex:n}))}),e},[])};var hu=["MO","TU","WE","TH","FR","SA","SU"],mu=function(){function e(e,t){if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return e.fromStr=function(t){return new e(hu.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},e.prototype.toString=function(){var e=hu[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},e.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},e}(),gu=function(e){return null!==e&&void 0!==e},fu=function(e){return"number"===typeof e},yu=function(e){return"string"===typeof e&&hu.includes(e)},Du=Array.isArray,Cu=function(e,t){void 0===t&&(t=e),1===arguments.length&&(t=e,e=0);for(var n=[],i=e;i<t;i++)n.push(i);return n},vu=function(e,t){var n=0,i=[];if(Du(e))for(;n<t;n++)i[n]=[].concat(e);else for(;n<t;n++)i[n]=e;return i},_u=function(e){return Du(e)?e:[e]};function wu(e,t,n){void 0===n&&(n=" ");var i=String(e);return t|=0,i.length>t?String(i):(t-=i.length,t>n.length&&(n+=vu(n,t/n.length)),n.slice(0,t)+String(i))}var bu=function(e,t,n){var i=e.split(t);return n?i.slice(0,n).concat([i.slice(n).join(t)]):i},Su=function(e,t){var n=e%t;return n*t<0?n+t:n},Tu=function(e,t){return{div:Math.floor(e/t),mod:Su(e,t)}},xu=function(e){return!gu(e)||0===e.length},Au=function(e){return!xu(e)},Eu=function(e,t){return Au(e)&&-1!==e.indexOf(t)},ku=function(e,t,n,i,a,r){return void 0===i&&(i=0),void 0===a&&(a=0),void 0===r&&(r=0),new Date(Date.UTC(e,t-1,n,i,a,r))},Ou=[31,28,31,30,31,30,31,31,30,31,30,31],Iu=864e5,Ru=9999,Mu=ku(1970,1,1),Vu=[6,0,1,2,3,4,5],Pu=function(e){return e%4===0&&e%100!==0||e%400===0},$u=function(e){return e instanceof Date},Wu=function(e){return $u(e)&&!isNaN(e.getTime())},Bu=function(e,t){var n=e.getTime(),i=t.getTime(),a=n-i;return Math.round(a/Iu)},Hu=function(e){return Bu(e,Mu)},Gu=function(e){return new Date(Mu.getTime()+e*Iu)},Nu=function(e){var t=e.getUTCMonth();return 1===t&&Pu(e.getUTCFullYear())?29:Ou[t]},Fu=function(e){return Vu[e.getUTCDay()]},Lu=function(e,t){var n=ku(e,t+1,1);return[Fu(n),Nu(n)]},zu=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},Uu=function(e){var t=new Date(e.getTime());return t},ju=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Uu(e[n]));return t},Yu=function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},Zu=function(e,t){void 0===t&&(t=!0);var n=new Date(e);return[wu(n.getUTCFullYear().toString(),4,"0"),wu(n.getUTCMonth()+1,2,"0"),wu(n.getUTCDate(),2,"0"),"T",wu(n.getUTCHours(),2,"0"),wu(n.getUTCMinutes(),2,"0"),wu(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},qu=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},Xu=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},Ku=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,i=new Date(Xu(e,n)),a=new Date(Xu(e,null!==t&&void 0!==t?t:"UTC")),r=a.getTime()-i.getTime();return new Date(e.getTime()-r)},Qu=function(){function e(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,"between"===e?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):"before"===e?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):"after"===e&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return e.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if("between"===this.method){if(t)return!0;if(n)return!1}else if("before"===this.method){if(n)return!1}else if("after"===this.method)return!!t||(this.add(e),!1);return this.add(e)},e.prototype.add=function(e){return this._result.push(e),!0},e.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),Ju=Qu,ed=(n(65200),n(41685),n(82617),n(66295),n(23133),function(e,t){return ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ed(e,t)});function td(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ed(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var nd=function(){return nd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},nd.apply(this,arguments)};Object.create;function id(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var ad,rd=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.iterator=i,a}return td(t,e),t.prototype.add=function(e){return!!this.iterator(e,this._result.length)&&(this._result.push(e),!0)},t}(Ju),od=rd,sd={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},ld=sd,ud=function(e,t){return-1!==e.indexOf(t)},dd=function(e){return e.toString()},cd=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},pd=function(){function e(e,t,n,i){if(void 0===t&&(t=dd),void 0===n&&(n=ld),void 0===i&&(i=cd),this.text=[],this.language=n||ld,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),r=[].concat(this.options.bynmonthday);a.sort(function(e,t){return e-t}),r.sort(function(e,t){return t-e}),this.bymonthday=a.concat(r),this.bymonthday.length||(this.bymonthday=null)}if(gu(this.origOptions.byweekday)){var o=Du(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],s=String(o);this.byweekday={allWeeks:o.filter(function(e){return!e.n}),someWeeks:o.filter(function(e){return Boolean(e.n)}),isWeekdays:-1!==s.indexOf("MO")&&-1!==s.indexOf("TU")&&-1!==s.indexOf("WE")&&-1!==s.indexOf("TH")&&-1!==s.indexOf("FR")&&-1===s.indexOf("SA")&&-1===s.indexOf("SU"),isEveryDay:-1!==s.indexOf("MO")&&-1!==s.indexOf("TU")&&-1!==s.indexOf("WE")&&-1!==s.indexOf("TH")&&-1!==s.indexOf("FR")&&-1!==s.indexOf("SA")&&-1!==s.indexOf("SU")};var l=function(e,t){return e.weekday-t.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED))return!1;if(t.origOptions.until&&t.origOptions.count)return!1;for(var i in t.origOptions){if(ud(["dtstart","tzid","wkst","freq"],i))return!0;if(!ud(e.IMPLEMENTED[t.options.freq],i))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[yc.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},e.prototype.MINUTELY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},e.prototype.DAILY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(1===this.options.interval&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},e.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},e.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},e.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(e){var t;e=parseInt(e.toString(),10);var n=this.gettext;if(-1===e)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},e.prototype.monthtext=function(e){return this.language.monthNames[e-1]},e.prototype.weekdaytext=function(e){var t=fu(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},e.prototype.plural=function(e){return e%100!==1},e.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},e.prototype.list=function(e,t,n,i){var a=this;void 0===i&&(i=","),Du(e)||(e=[e]);var r=function(e,t,n){for(var i="",a=0;a<e.length;a++)0!==a&&(a===e.length-1?i+=" "+n+" ":i+=t+" "),i+=e[a];return i};t=t||function(e){return e.toString()};var o=function(e){return t&&t.call(a,e)};return n?r(e.map(o),i,n):e.map(o).join(i+" ")},e}(),hd=pd,md=function(){function e(e){this.done=!0,this.rules=e}return e.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&null===this.symbol},e.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;for(var i in e=null,this.rules){n=this.rules[i];var a=n.exec(this.text);a&&(null===e||a[0].length>e[0].length)&&(e=a,t=i)}if(null!=e&&(this.text=this.text.substr(e[0].length),""===this.text&&(this.done=!0)),null==e)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===t);return this.symbol=t,this.value=e,!0},e.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},e}();function gd(e,t){void 0===t&&(t=ld);var n={},i=new md(t.tokens);return i.start(e)?(a(),n):null;function a(){i.expect("every");var e=i.acceptNumber();if(e&&(n.interval=parseInt(e[0],10)),i.isDone())throw new Error("Unexpected end");switch(i.symbol){case"day(s)":n.freq=yc.DAILY,i.nextSymbol()&&(o(),c());break;case"weekday(s)":n.freq=yc.WEEKLY,n.byweekday=[yc.MO,yc.TU,yc.WE,yc.TH,yc.FR],i.nextSymbol(),o(),c();break;case"week(s)":n.freq=yc.WEEKLY,i.nextSymbol()&&(r(),o(),c());break;case"hour(s)":n.freq=yc.HOURLY,i.nextSymbol()&&(r(),c());break;case"minute(s)":n.freq=yc.MINUTELY,i.nextSymbol()&&(r(),c());break;case"month(s)":n.freq=yc.MONTHLY,i.nextSymbol()&&(r(),c());break;case"year(s)":n.freq=yc.YEARLY,i.nextSymbol()&&(r(),c());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=yc.WEEKLY;var t=i.symbol.substr(0,2).toUpperCase();if(n.byweekday=[yc[t]],!i.nextSymbol())return;while(i.accept("comma")){if(i.isDone())throw new Error("Unexpected end");var a=l();if(!a)throw new Error("Unexpected symbol "+i.symbol+", expected weekday");n.byweekday.push(yc[a]),i.nextSymbol()}o(),d(),c();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=yc.YEARLY,n.bymonth=[s()],!i.nextSymbol())return;while(i.accept("comma")){if(i.isDone())throw new Error("Unexpected end");var u=s();if(!u)throw new Error("Unexpected symbol "+i.symbol+", expected month");n.bymonth.push(u),i.nextSymbol()}r(),c();break;default:throw new Error("Unknown symbol")}}function r(){var e=i.accept("on"),t=i.accept("the");if(e||t)do{var a=u(),r=l(),o=s();if(a)r?(i.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(yc[r].nth(a))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(a),i.accept("day(s)"));else if(r)i.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(yc[r]);else if("weekday(s)"===i.symbol)i.nextSymbol(),n.byweekday||(n.byweekday=[yc.MO,yc.TU,yc.WE,yc.TH,yc.FR]);else if("week(s)"===i.symbol){i.nextSymbol();var d=i.acceptNumber();if(!d)throw new Error("Unexpected symbol "+i.symbol+", expected week number");n.byweekno=[parseInt(d[0],10)];while(i.accept("comma")){if(d=i.acceptNumber(),!d)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");n.byweekno.push(parseInt(d[0],10))}}else{if(!o)return;i.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(o)}}while(i.accept("comma")||i.accept("the")||i.accept("on"))}function o(){var e=i.accept("at");if(e)do{var t=i.acceptNumber();if(!t)throw new Error("Unexpected symbol "+i.symbol+", expected hour");n.byhour=[parseInt(t[0],10)];while(i.accept("comma")){if(t=i.acceptNumber(),!t)throw new Error("Unexpected symbol "+i.symbol+"; expected hour");n.byhour.push(parseInt(t[0],10))}}while(i.accept("comma")||i.accept("at"))}function s(){switch(i.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function l(){switch(i.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return i.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(i.symbol){case"last":return i.nextSymbol(),-1;case"first":return i.nextSymbol(),1;case"second":return i.nextSymbol(),i.accept("last")?-2:2;case"third":return i.nextSymbol(),i.accept("last")?-3:3;case"nth":var e=parseInt(i.value[1],10);if(e<-366||e>366)throw new Error("Nth out of range: "+e);return i.nextSymbol(),i.accept("last")?-e:e;default:return!1}}function d(){i.accept("on"),i.accept("the");var e=u();if(e){n.bymonthday=[e],i.nextSymbol();while(i.accept("comma")){if(e=u(),!e)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");n.bymonthday.push(e),i.nextSymbol()}}}function c(){if("until"===i.symbol){var e=Date.parse(i.text);if(!e)throw new Error("Cannot parse until date:"+i.text);n.until=new Date(e)}else i.accept("for")&&(n.count=parseInt(i.value[0],10),i.expect("number"))}}function fd(e){return e<ad.HOURLY}(function(e){e[e["YEARLY"]=0]="YEARLY",e[e["MONTHLY"]=1]="MONTHLY",e[e["WEEKLY"]=2]="WEEKLY",e[e["DAILY"]=3]="DAILY",e[e["HOURLY"]=4]="HOURLY",e[e["MINUTELY"]=5]="MINUTELY",e[e["SECONDLY"]=6]="SECONDLY"})(ad||(ad={}));var yd=function(e,t){return void 0===t&&(t=ld),new yc(gd(e,t)||void 0)},Dd=["count","until","interval","byweekday","bymonthday","bymonth"];hd.IMPLEMENTED=[],hd.IMPLEMENTED[ad.HOURLY]=Dd,hd.IMPLEMENTED[ad.MINUTELY]=Dd,hd.IMPLEMENTED[ad.DAILY]=["byhour"].concat(Dd),hd.IMPLEMENTED[ad.WEEKLY]=Dd,hd.IMPLEMENTED[ad.MONTHLY]=Dd,hd.IMPLEMENTED[ad.YEARLY]=["byweekno","byyearday"].concat(Dd);var Cd=function(e,t,n,i){return new hd(e,t,n,i).toString()},vd=hd.isFullyConvertible,_d=function(){function e(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},e}(),wd=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,a,r,o,s)||this;return l.year=t,l.month=n,l.day=i,l}return td(t,e),t.fromDate=function(e){return new this(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.valueOf()%1e3)},t.prototype.getWeekday=function(){return Fu(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(e){this.year+=e},t.prototype.addMonths=function(e){if(this.month+=e,this.month>12){var t=Math.floor(this.month/12),n=Su(this.month,12);this.month=n,this.year+=t,0===this.month&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(e,t){t>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-t))+7*e:this.day+=-(this.getWeekday()-t)+7*e,this.fixDay()},t.prototype.addDaily=function(e){this.day+=e,this.fixDay()},t.prototype.addHours=function(e,t,n){for(t&&(this.hour+=Math.floor((23-this.hour)/e)*e);;){this.hour+=e;var i=Tu(this.hour,24),a=i.div,r=i.mod;if(a&&(this.hour=r,this.addDaily(a)),xu(n)||Eu(n,this.hour))break}},t.prototype.addMinutes=function(e,t,n,i){for(t&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/e)*e);;){this.minute+=e;var a=Tu(this.minute,60),r=a.div,o=a.mod;if(r&&(this.minute=o,this.addHours(r,!1,n)),(xu(n)||Eu(n,this.hour))&&(xu(i)||Eu(i,this.minute)))break}},t.prototype.addSeconds=function(e,t,n,i,a){for(t&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/e)*e);;){this.second+=e;var r=Tu(this.second,60),o=r.div,s=r.mod;if(o&&(this.second=s,this.addMinutes(o,!1,n,i)),(xu(n)||Eu(n,this.hour))&&(xu(i)||Eu(i,this.minute))&&(xu(a)||Eu(a,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var e=Lu(this.year,this.month-1)[1];if(!(this.day<=e))while(this.day>e){if(this.day-=e,++this.month,13===this.month&&(this.month=1,++this.year,this.year>Ru))return;e=Lu(this.year,this.month-1)[1]}}},t.prototype.add=function(e,t){var n=e.freq,i=e.interval,a=e.wkst,r=e.byhour,o=e.byminute,s=e.bysecond;switch(n){case ad.YEARLY:return this.addYears(i);case ad.MONTHLY:return this.addMonths(i);case ad.WEEKLY:return this.addWeekly(i,a);case ad.DAILY:return this.addDaily(i);case ad.HOURLY:return this.addHours(i,t,r);case ad.MINUTELY:return this.addMinutes(i,t,r,o);case ad.SECONDLY:return this.addSeconds(i,t,r,o,s)}},t}(_d);function bd(e){for(var t=[],n=Object.keys(e),i=0,a=n;i<a.length;i++){var r=a[i];Eu(fc,r)||t.push(r),$u(e[r])&&!Wu(e[r])&&t.push(r)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return nd({},e)}function Sd(e){var t=nd(nd({},gc),bd(e));if(gu(t.byeaster)&&(t.freq=yc.YEARLY),!gu(t.freq)||!yc.FREQUENCIES[t.freq])throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date((new Date).setMilliseconds(0))),gu(t.wkst)?fu(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=yc.MO.weekday,gu(t.bysetpos)){fu(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var i=t.bysetpos[n];if(0===i||!(i>=-366&&i<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(t.byweekno)||Au(t.byweekno)||Au(t.byyearday)||Boolean(t.bymonthday)||Au(t.bymonthday)||gu(t.byweekday)||gu(t.byeaster)))switch(t.freq){case yc.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case yc.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case yc.WEEKLY:t.byweekday=[Fu(t.dtstart)];break}if(gu(t.bymonth)&&!Du(t.bymonth)&&(t.bymonth=[t.bymonth]),gu(t.byyearday)&&!Du(t.byyearday)&&fu(t.byyearday)&&(t.byyearday=[t.byyearday]),gu(t.bymonthday))if(Du(t.bymonthday)){var a=[],r=[];for(n=0;n<t.bymonthday.length;n++){i=t.bymonthday[n];i>0?a.push(i):i<0&&r.push(i)}t.bymonthday=a,t.bynmonthday=r}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);else t.bymonthday=[],t.bynmonthday=[];if(gu(t.byweekno)&&!Du(t.byweekno)&&(t.byweekno=[t.byweekno]),gu(t.byweekday))if(fu(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(yu(t.byweekday))t.byweekday=[mu.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof mu)!t.byweekday.n||t.freq>yc.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{var o=[],s=[];for(n=0;n<t.byweekday.length;n++){var l=t.byweekday[n];fu(l)?o.push(l):yu(l)?o.push(mu.fromStr(l).weekday):!l.n||t.freq>yc.MONTHLY?o.push(l.weekday):s.push([l.weekday,l.n])}t.byweekday=Au(o)?o:null,t.bynweekday=Au(s)?s:null}else t.bynweekday=null;return gu(t.byhour)?fu(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<yc.HOURLY?[t.dtstart.getUTCHours()]:null,gu(t.byminute)?fu(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<yc.MINUTELY?[t.dtstart.getUTCMinutes()]:null,gu(t.bysecond)?fu(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<yc.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function Td(e){var t=e.dtstart.getTime()%1e3;if(!fd(e.freq))return[];var n=[];return e.byhour.forEach(function(i){e.byminute.forEach(function(a){e.bysecond.forEach(function(e){n.push(new _d(i,a,e,t))})})}),n}function xd(e){var t=e.split("\n").map(Ed).filter(function(e){return null!==e});return nd(nd({},t[0]),t[1])}function Ad(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var i=n[1],a=n[2];return i&&(t.tzid=i),t.dtstart=qu(a),t}function Ed(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return kd(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return kd(e);case"DTSTART":return Ad(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function kd(e){var t=e.replace(/^RRULE:/i,""),n=Ad(t),i=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return i.forEach(function(t){var i=t.split("="),a=i[0],r=i[1];switch(a.toUpperCase()){case"FREQ":n.freq=ad[r.toUpperCase()];break;case"WKST":n.wkst=mc[r.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var o=Od(r),s=a.toLowerCase();n[s]=o;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=Rd(r);break;case"DTSTART":case"TZID":var l=Ad(e);n.tzid=l.tzid,n.dtstart=l.dtstart;break;case"UNTIL":n.until=qu(r);break;case"BYEASTER":n.byeaster=Number(r);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),n}function Od(e){if(-1!==e.indexOf(",")){var t=e.split(",");return t.map(Id)}return Id(e)}function Id(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function Rd(e){var t=e.split(",");return t.map(function(e){if(2===e.length)return mc[e];var t=e.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!t||t.length<3)throw new SyntaxError("Invalid weekday string: ".concat(e));var n=Number(t[1]),i=t[2],a=mc[i].weekday;return new mu(a,n)})}var Md=function(){function e(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=Zu(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:Ku(this.date,this.tzid)},e}();function Vd(e){for(var t=[],n="",i=Object.keys(e),a=Object.keys(gc),r=0;r<i.length;r++)if("tzid"!==i[r]&&Eu(a,i[r])){var o=i[r].toUpperCase(),s=e[i[r]],l="";if(gu(s)&&(!Du(s)||s.length)){switch(o){case"FREQ":l=yc.FREQUENCIES[e.freq];break;case"WKST":l=fu(s)?new mu(s).toString():s.toString();break;case"BYWEEKDAY":o="BYDAY",l=_u(s).map(function(e){return e instanceof mu?e:Du(e)?new mu(e[0],e[1]):new mu(e)}).toString();break;case"DTSTART":n=Pd(s,e.tzid);break;case"UNTIL":l=Zu(s,!e.tzid);break;default:if(Du(s)){for(var u=[],d=0;d<s.length;d++)u[d]=String(s[d]);l=u.toString()}else l=String(s)}l&&t.push([o,l])}}var c=t.map(function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n.toString())}).join(";"),p="";return""!==c&&(p="RRULE:".concat(c)),[n,p].filter(function(e){return!!e}).join("\n")}function Pd(e,t){return e?"DTSTART"+new Md(new Date(e),t).toString():""}function $d(e,t){return Array.isArray(e)?!!Array.isArray(t)&&(e.length===t.length&&e.every(function(e,n){return e.getTime()===t[n].getTime()})):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var Wd=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?Uu(t):ju(t)),"all"===e?this.all=t:(n._value=t,this[e].push(n))},e.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],a=function(e){for(var n=0;n<i.length;n++){var a=i[n];if(!$d(t[a],e[a]))return!0}return!1},r=this[e];if("all"===e)n=this.all;else if(Du(r))for(var o=0;o<r.length;o++){var s=r[o];if(!i.length||!a(s)){n=s._value;break}}if(!n&&this.all){var l=new Ju(e,t);for(o=0;o<this.all.length;o++)if(!l.accept(this.all[o]))break;n=l.getValue(),this._cacheAdd(e,n,t)}return Du(n)?ju(n):n instanceof Date?Uu(n):n},e}(),Bd=id(id(id(id(id(id(id(id(id(id(id(id(id([],vu(1,31),!0),vu(2,28),!0),vu(3,31),!0),vu(4,30),!0),vu(5,31),!0),vu(6,30),!0),vu(7,31),!0),vu(8,31),!0),vu(9,30),!0),vu(10,31),!0),vu(11,30),!0),vu(12,31),!0),vu(1,7),!0),Hd=id(id(id(id(id(id(id(id(id(id(id(id(id([],vu(1,31),!0),vu(2,29),!0),vu(3,31),!0),vu(4,30),!0),vu(5,31),!0),vu(6,30),!0),vu(7,31),!0),vu(8,31),!0),vu(9,30),!0),vu(10,31),!0),vu(11,30),!0),vu(12,31),!0),vu(1,7),!0),Gd=Cu(1,29),Nd=Cu(1,30),Fd=Cu(1,31),Ld=Cu(1,32),zd=id(id(id(id(id(id(id(id(id(id(id(id(id([],Ld,!0),Nd,!0),Ld,!0),Fd,!0),Ld,!0),Fd,!0),Ld,!0),Ld,!0),Fd,!0),Ld,!0),Fd,!0),Ld,!0),Ld.slice(0,7),!0),Ud=id(id(id(id(id(id(id(id(id(id(id(id(id([],Ld,!0),Gd,!0),Ld,!0),Fd,!0),Ld,!0),Fd,!0),Ld,!0),Ld,!0),Fd,!0),Ld,!0),Fd,!0),Ld,!0),Ld.slice(0,7),!0),jd=Cu(-28,0),Yd=Cu(-29,0),Zd=Cu(-30,0),qd=Cu(-31,0),Xd=id(id(id(id(id(id(id(id(id(id(id(id(id([],qd,!0),Yd,!0),qd,!0),Zd,!0),qd,!0),Zd,!0),qd,!0),qd,!0),Zd,!0),qd,!0),Zd,!0),qd,!0),qd.slice(0,7),!0),Kd=id(id(id(id(id(id(id(id(id(id(id(id(id([],qd,!0),jd,!0),qd,!0),Zd,!0),qd,!0),Zd,!0),qd,!0),qd,!0),Zd,!0),qd,!0),Zd,!0),qd,!0),qd.slice(0,7),!0),Qd=[0,31,60,91,121,152,182,213,244,274,305,335,366],Jd=[0,31,59,90,120,151,181,212,243,273,304,334,365],ec=function(){for(var e=[],t=0;t<55;t++)e=e.concat(Cu(7));return e}();function tc(e,t){var n,i,a=ku(e,1,1),r=Pu(e)?366:365,o=Pu(e+1)?366:365,s=Hu(a),l=Fu(a),u=nd(nd({yearlen:r,nextyearlen:o,yearordinal:s,yearweekday:l},nc(e)),{wnomask:null});if(xu(t.byweekno))return u;u.wnomask=vu(0,r+7);var d=n=Su(7-l+t.wkst,7);d>=4?(d=0,i=u.yearlen+Su(l-t.wkst,7)):i=r-d;for(var c=Math.floor(i/7),p=Su(i,7),h=Math.floor(c+p/4),m=0;m<t.byweekno.length;m++){var g=t.byweekno[m];if(g<0&&(g+=h+1),g>0&&g<=h){var f=void 0;g>1?(f=d+7*(g-1),d!==n&&(f-=7-n)):f=d;for(var y=0;y<7;y++)if(u.wnomask[f]=1,f++,u.wdaymask[f]===t.wkst)break}}if(Eu(t.byweekno,1)){f=d+7*h;if(d!==n&&(f-=7-n),f<r)for(m=0;m<7;m++)if(u.wnomask[f]=1,f+=1,u.wdaymask[f]===t.wkst)break}if(d){var D=void 0;if(Eu(t.byweekno,-1))D=-1;else{var C=Fu(ku(e-1,1,1)),v=Su(7-C.valueOf()+t.wkst,7),_=Pu(e-1)?366:365,w=void 0;v>=4?(v=0,w=_+Su(C-t.wkst,7)):w=r-d,D=Math.floor(52+Su(w,7)/4)}if(Eu(t.byweekno,D))for(f=0;f<d;f++)u.wnomask[f]=1}return u}function nc(e){var t=Pu(e)?366:365,n=ku(e,1,1),i=Fu(n);return 365===t?{mmask:Bd,mdaymask:Ud,nmdaymask:Kd,wdaymask:ec.slice(i),mrange:Jd}:{mmask:Hd,mdaymask:zd,nmdaymask:Xd,wdaymask:ec.slice(i),mrange:Qd}}function ic(e,t,n,i,a,r){var o={lastyear:e,lastmonth:t,nwdaymask:[]},s=[];if(r.freq===yc.YEARLY)if(xu(r.bymonth))s=[[0,n]];else for(var l=0;l<r.bymonth.length;l++)t=r.bymonth[l],s.push(i.slice(t-1,t+1));else r.freq===yc.MONTHLY&&(s=[i.slice(t-1,t+1)]);if(xu(s))return o;o.nwdaymask=vu(0,n);for(l=0;l<s.length;l++)for(var u=s[l],d=u[0],c=u[1]-1,p=0;p<r.bynweekday.length;p++){var h=void 0,m=r.bynweekday[p],g=m[0],f=m[1];f<0?(h=c+7*(f+1),h-=Su(a[h]-g,7)):(h=d+7*(f-1),h+=Su(7-a[h]+g,7)),d<=h&&h<=c&&(o.nwdaymask[h]=1)}return o}function ac(e,t){void 0===t&&(t=0);var n=e%19,i=Math.floor(e/100),a=e%100,r=Math.floor(i/4),o=i%4,s=Math.floor((i+8)/25),l=Math.floor((i-s+1)/3),u=Math.floor(19*n+i-r-l+15)%30,d=Math.floor(a/4),c=a%4,p=Math.floor(32+2*o+2*d-u-c)%7,h=Math.floor((n+11*u+22*p)/451),m=Math.floor((u+p-7*h+114)/31),g=(u+p-7*h+114)%31+1,f=Date.UTC(e,m-1,g+t),y=Date.UTC(e,0,1);return[Math.ceil((f-y)/864e5)]}var rc=function(){function e(e){this.options=e}return e.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=tc(e,n)),Au(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,r=i.mrange,o=i.wdaymask;this.monthinfo=ic(e,t,a,r,o,n)}gu(n.byeaster)&&(this.eastermask=ac(e,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[Cu(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],a=vu(null,this.yearlen),r=n;r<i;r++)a[r]=r;return[a,n,i]},e.prototype.wdayset=function(e,t,n){for(var i=vu(null,this.yearlen+7),a=Hu(ku(e,t,n))-this.yearordinal,r=a,o=0;o<7;o++)if(i[a]=a,++a,this.wdaymask[a]===this.options.wkst)break;return[i,r,a]},e.prototype.ddayset=function(e,t,n){var i=vu(null,this.yearlen),a=Hu(ku(e,t,n))-this.yearordinal;return i[a]=a,[i,a,a+1]},e.prototype.htimeset=function(e,t,n,i){var a=this,r=[];return this.options.byminute.forEach(function(t){r=r.concat(a.mtimeset(e,t,n,i))}),Yu(r),r},e.prototype.mtimeset=function(e,t,n,i){var a=this.options.bysecond.map(function(n){return new _d(e,t,n,i)});return Yu(a),a},e.prototype.stimeset=function(e,t,n,i){return[new _d(e,t,n,i)]},e.prototype.getdayset=function(e){switch(e){case ad.YEARLY:return this.ydayset.bind(this);case ad.MONTHLY:return this.mdayset.bind(this);case ad.WEEKLY:return this.wdayset.bind(this);case ad.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(e){switch(e){case ad.HOURLY:return this.htimeset.bind(this);case ad.MINUTELY:return this.mtimeset.bind(this);case ad.SECONDLY:return this.stimeset.bind(this)}},e}(),oc=rc;function sc(e,t,n,i,a,r){for(var o=[],s=0;s<e.length;s++){var l=void 0,u=void 0,d=e[s];d<0?(l=Math.floor(d/t.length),u=Su(d,t.length)):(l=Math.floor((d-1)/t.length),u=Su(d-1,t.length));for(var c=[],p=n;p<i;p++){var h=r[p];gu(h)&&c.push(h)}var m=void 0;m=l<0?c.slice(l)[0]:c[l];var g=t[u],f=Gu(a.yearordinal+m),y=zu(f,g);Eu(o,y)||o.push(y)}return Yu(o),o}function lc(e,t){var n=t.dtstart,i=t.freq,a=t.interval,r=t.until,o=t.bysetpos,s=t.count;if(0===s||0===a)return cc(e);var l=wd.fromDate(n),u=new oc(t);u.rebuild(l.year,l.month);for(var d=hc(u,l,t);;){var c=u.getdayset(i)(l.year,l.month,l.day),p=c[0],h=c[1],m=c[2],g=pc(p,h,m,u,t);if(Au(o))for(var f=sc(o,d,h,m,u,p),y=0;y<f.length;y++){var D=f[y];if(r&&D>r)return cc(e);if(D>=n){var C=dc(D,t);if(!e.accept(C))return cc(e);if(s&&(--s,!s))return cc(e)}}else for(y=h;y<m;y++){var v=p[y];if(gu(v))for(var _=Gu(u.yearordinal+v),w=0;w<d.length;w++){var b=d[w];D=zu(_,b);if(r&&D>r)return cc(e);if(D>=n){C=dc(D,t);if(!e.accept(C))return cc(e);if(s&&(--s,!s))return cc(e)}}}if(0===t.interval)return cc(e);if(l.add(t,g),l.year>Ru)return cc(e);fd(i)||(d=u.gettimeset(i)(l.hour,l.minute,l.second,0)),u.rebuild(l.year,l.month)}}function uc(e,t,n){var i=n.bymonth,a=n.byweekno,r=n.byweekday,o=n.byeaster,s=n.bymonthday,l=n.bynmonthday,u=n.byyearday;return Au(i)&&!Eu(i,e.mmask[t])||Au(a)&&!e.wnomask[t]||Au(r)&&!Eu(r,e.wdaymask[t])||Au(e.nwdaymask)&&!e.nwdaymask[t]||null!==o&&!Eu(e.eastermask,t)||(Au(s)||Au(l))&&!Eu(s,e.mdaymask[t])&&!Eu(l,e.nmdaymask[t])||Au(u)&&(t<e.yearlen&&!Eu(u,t+1)&&!Eu(u,-e.yearlen+t)||t>=e.yearlen&&!Eu(u,t+1-e.yearlen)&&!Eu(u,-e.nextyearlen+t-e.yearlen))}function dc(e,t){return new Md(e,t.tzid).rezonedDate()}function cc(e){return e.getValue()}function pc(e,t,n,i,a){for(var r=!1,o=t;o<n;o++){var s=e[o];r=uc(i,s,a),r&&(e[s]=null)}return r}function hc(e,t,n){var i=n.freq,a=n.byhour,r=n.byminute,o=n.bysecond;return fd(i)?Td(n):i>=yc.HOURLY&&Au(a)&&!Eu(a,t.hour)||i>=yc.MINUTELY&&Au(r)&&!Eu(r,t.minute)||i>=yc.SECONDLY&&Au(o)&&!Eu(o,t.second)?[]:e.gettimeset(i)(t.hour,t.minute,t.second,t.millisecond)}var mc={MO:new mu(0),TU:new mu(1),WE:new mu(2),TH:new mu(3),FR:new mu(4),SA:new mu(5),SU:new mu(6)},gc={freq:ad.YEARLY,dtstart:null,interval:1,wkst:mc.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},fc=Object.keys(gc),yc=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=!1),this._cache=t?null:new Wd,this.origOptions=bd(e);var n=Sd(e).parsedOptions;this.options=n}return e.parseText=function(e,t){return gd(e,t)},e.fromText=function(e,t){return yd(e,t)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(e){return lc(e,this.options)},e.prototype._cacheGet=function(e,t){return!!this._cache&&this._cache._cacheGet(e,t)},e.prototype._cacheAdd=function(e,t,n){if(this._cache)return this._cache._cacheAdd(e,t,n)},e.prototype.all=function(e){if(e)return this._iter(new od("all",{},e));var t=this._cacheGet("all");return!1===t&&(t=this._iter(new Ju("all",{})),this._cacheAdd("all",t)),t},e.prototype.between=function(e,t,n,i){if(void 0===n&&(n=!1),!Wu(e)||!Wu(t))throw new Error("Invalid date passed in to RRule.between");var a={before:t,after:e,inc:n};if(i)return this._iter(new od("between",a,i));var r=this._cacheGet("between",a);return!1===r&&(r=this._iter(new Ju("between",a)),this._cacheAdd("between",r,a)),r},e.prototype.before=function(e,t){if(void 0===t&&(t=!1),!Wu(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return!1===i&&(i=this._iter(new Ju("before",n)),this._cacheAdd("before",i,n)),i},e.prototype.after=function(e,t){if(void 0===t&&(t=!1),!Wu(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return!1===i&&(i=this._iter(new Ju("after",n)),this._cacheAdd("after",i,n)),i},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return Vd(this.origOptions)},e.prototype.toText=function(e,t,n){return Cd(this,e,t,n)},e.prototype.isFullyConvertibleToText=function(){return vd(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=ad.YEARLY,e.MONTHLY=ad.MONTHLY,e.WEEKLY=ad.WEEKLY,e.DAILY=ad.DAILY,e.HOURLY=ad.HOURLY,e.MINUTELY=ad.MINUTELY,e.SECONDLY=ad.SECONDLY,e.MO=mc.MO,e.TU=mc.TU,e.WE=mc.WE,e.TH=mc.TH,e.FR=mc.FR,e.SA=mc.SA,e.SU=mc.SU,e.parseString=xd,e.optionsToString=Vd,e}();function Dc(e,t,n,i,a,r){var o={},s=e.accept;function l(e,t){n.forEach(function(n){n.between(e,t,!0).forEach(function(e){o[Number(e)]=!0})})}a.forEach(function(e){var t=new Md(e,r).rezonedDate();o[Number(t)]=!0}),e.accept=function(e){var t=Number(e);return isNaN(t)?s.call(this,e):!(!o[t]&&(l(new Date(t-1),new Date(t+1)),!o[t]))||(o[t]=!0,s.call(this,e))},"between"===e.method&&(l(e.args.after,e.args.before),e.accept=function(e){var t=Number(e);return!!o[t]||(o[t]=!0,s.call(this,e))});for(var u=0;u<i.length;u++){var d=new Md(i[u],r).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(t){lc(e,t.options)});var c=e._result;switch(Yu(c),e.method){case"all":case"between":return c;case"before":return c.length&&c[c.length-1]||null;case"after":default:return c.length&&c[0]||null}}var Cc={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function vc(e,t){var n=[],i=[],a=[],r=[],o=Ad(e),s=o.dtstart,l=o.tzid,u=Ac(e,t.unfold);return u.forEach(function(e){var t;if(e){var o=xc(e),s=o.name,u=o.parms,d=o.value;switch(s.toUpperCase()){case"RRULE":if(u.length)throw new Error("unsupported RRULE parm: ".concat(u.join(",")));n.push(xd(e));break;case"RDATE":var c=null!==(t=/RDATE(?:;TZID=([^:=]+))?/i.exec(e))&&void 0!==t?t:[],p=c[1];p&&!l&&(l=p),i=i.concat(kc(d,u));break;case"EXRULE":if(u.length)throw new Error("unsupported EXRULE parm: ".concat(u.join(",")));a.push(xd(d));break;case"EXDATE":r=r.concat(kc(d,u));break;case"DTSTART":break;default:throw new Error("unsupported property: "+s)}}}),{dtstart:s,tzid:l,rrulevals:n,rdatevals:i,exrulevals:a,exdatevals:r}}function _c(e,t){var n=vc(e,t),i=n.rrulevals,a=n.rdatevals,r=n.exrulevals,o=n.exdatevals,s=n.dtstart,l=n.tzid,u=!1===t.cache;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||i.length>1||a.length||r.length||o.length){var d=new Ic(u);return d.dtstart(s),d.tzid(l||void 0),i.forEach(function(e){d.rrule(new yc(bc(e,s,l),u))}),a.forEach(function(e){d.rdate(e)}),r.forEach(function(e){d.exrule(new yc(bc(e,s,l),u))}),o.forEach(function(e){d.exdate(e)}),t.compatible&&t.dtstart&&d.rdate(s),d}var c=i[0]||{};return new yc(bc(c,c.dtstart||t.dtstart||s,c.tzid||t.tzid||l),u)}function wc(e,t){return void 0===t&&(t={}),_c(e,Sc(t))}function bc(e,t,n){return nd(nd({},e),{dtstart:t,tzid:n})}function Sc(e){var t=[],n=Object.keys(e),i=Object.keys(Cc);if(n.forEach(function(e){Eu(i,e)||t.push(e)}),t.length)throw new Error("Invalid options: "+t.join(", "));return nd(nd({},Cc),e)}function Tc(e){if(-1===e.indexOf(":"))return{name:"RRULE",value:e};var t=bu(e,":",1),n=t[0],i=t[1];return{name:n,value:i}}function xc(e){var t=Tc(e),n=t.name,i=t.value,a=n.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:i}}function Ac(e,t){if(void 0===t&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);var n=e.split("\n"),i=0;while(i<n.length){var a=n[i]=n[i].replace(/\s+$/g,"");a?i>0&&" "===a[0]?(n[i-1]+=a.slice(1),n.splice(i,1)):i+=1:n.splice(i,1)}return n}function Ec(e){e.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function kc(e,t){return Ec(t),e.split(",").map(function(e){return qu(e)})}function Oc(e){var t=this;return function(n){if(void 0!==n&&(t["_".concat(e)]=n),void 0!==t["_".concat(e)])return t["_".concat(e)];for(var i=0;i<t._rrule.length;i++){var a=t._rrule[i].origOptions[e];if(a)return a}}}var Ic=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this,{},t)||this;return n.dtstart=Oc.apply(n,["dtstart"]),n.tzid=Oc.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return td(t,e),t.prototype._iter=function(e){return Dc(e,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(e){Rc(e,this._rrule)},t.prototype.exrule=function(e){Rc(e,this._exrule)},t.prototype.rdate=function(e){Mc(e,this._rdate)},t.prototype.exdate=function(e){Mc(e,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(e){return wc(e.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(e){return wc(e.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(e){return new Date(e.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(e){return new Date(e.getTime())})},t.prototype.valueOf=function(){var e=[];return!this._rrule.length&&this._dtstart&&(e=e.concat(Vd({dtstart:this._dtstart}))),this._rrule.forEach(function(t){e=e.concat(t.toString().split("\n"))}),this._exrule.forEach(function(t){e=e.concat(t.toString().split("\n").map(function(e){return e.replace(/^RRULE:/,"EXRULE:")}).filter(function(e){return!/^DTSTART/.test(e)}))}),this._rdate.length&&e.push(Vc("RDATE",this._rdate,this.tzid())),this._exdate.length&&e.push(Vc("EXDATE",this._exdate,this.tzid())),e},t.prototype.toString=function(){return this.valueOf().join("\n")},t.prototype.clone=function(){var e=new t(!!this._cache);return this._rrule.forEach(function(t){return e.rrule(t.clone())}),this._exrule.forEach(function(t){return e.exrule(t.clone())}),this._rdate.forEach(function(t){return e.rdate(new Date(t.getTime()))}),this._exdate.forEach(function(t){return e.exdate(new Date(t.getTime()))}),e},t}(yc);function Rc(e,t){if(!(e instanceof yc))throw new TypeError(String(e)+" is not RRule instance");Eu(t.map(String),String(e))||t.push(e)}function Mc(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");Eu(t.map(Number),Number(e))||(t.push(e),Yu(t))}function Vc(e,t,n){var i=!n||"UTC"===n.toUpperCase(),a=i?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),r=t.map(function(e){return Zu(e.valueOf(),i)}).join(",");return"".concat(a).concat(r)}var Pc=n(89658);const $c=w.A.dateToMilliseconds,Wc=Y.A.calculateTimezoneByValue,Bc=$c("hour"),Hc=e=>Math.round(e/Bc)*Bc,Gc=(e,t)=>{const n=new Date(e).setUTCHours(0,0,0,0);return Pc.E.DST.memo(`${n}${t}`,()=>{const i=Hc(n-Bc),a=Hc(n+$c("day")+Bc),r=Wc(t,i)??0,o=Wc(t,a)??0;if(r===o)return[-e,r*Bc,o*Bc];let s=i,l=a;while(l-s>Bc/3){const e=s+(l-s)/2,n=Wc(t,Hc(e));n===r?s=e:l=e}return[Hc(s)+Bc,r*Bc,o*Bc]})},Nc=(e,t)=>{const[n,i,a]=Gc(e,t),r=a-i,o=r>0?e<n+r:e<n;return{offsetMs:o?i:a,isUnreachableTime:r>0&&e>=n&&e<n+r,isDoubleTimeStart:e===n,deltaMs:r}},Fc=(e,t)=>t?Nc(e,t).offsetMs:0,Lc=[6,0,1,2,3,4,5],zc=(e,t)=>{let{firstDayOfWeek:n,interval:i,timeZone:a,startDateTimeZone:r}=t;if(!e.hasRecurrenceRule||!e.recurrenceRule)return[e.source.startDate];const o=Fc(e.source.startDate,r),s=Fc(e.source.startDate,a),l=r?o-s:s,u=e.source.endDate-e.source.startDate,d=e.source.startDate+l,c=i.min-u-s+l,p=i.max-s+l,h=Se(e.recurrenceRule),m=yc.parseString(e.recurrenceRule);if(m.dtstart=new Date(d),!m.wkst&&n&&(m.wkst=Lc[n]),h.until){const e=Fc(h.until.getTime(),a);m.until=R.X.addOffsets(h.until,e)}const g=new Ic,f=new yc(m);return g.rrule(f),g.between(new Date(c),new Date(p),!0).map(e=>e.getTime()-l)},Uc=(e,t)=>{switch(!0){case e.isUnreachableTime:return[e.deltaMs,e.deltaMs];case t.isUnreachableTime:return[0,t.deltaMs];default:return[0,0]}},jc=(e,t)=>{switch(!0){case e.isUnreachableTime&&t.isUnreachableTime:return[e.deltaMs,e.deltaMs];case e.isUnreachableTime:return[e.deltaMs,0];case t.isUnreachableTime:return[0,t.deltaMs];case t.isDoubleTimeStart:return[0,-t.deltaMs];default:return[0,0]}},Yc=(e,t)=>{let{firstDayOfWeek:n,interval:i,timeZone:a}=t;const{source:{startDate:r,endDate:o},startDateTimeZone:s,endDateTimeZone:l}=e;if(!e.hasRecurrenceRule){const t=Nc(r,a),n=Nc(o,a),[i,s]=jc(t,n);return[Object.assign({},e,{startDateUTC:r+i+t.offsetMs,endDateUTC:o+s+n.offsetMs})]}const u=o-r,d=zc(e,{firstDayOfWeek:n,interval:i,timeZone:a,startDateTimeZone:s}),c=Fc(r,a),p=Fc(r,s),h=Fc(o,l),m=new Set(e.hasRecurrenceRule&&e.recurrenceException?e.recurrenceException.split(",").map(e=>be(e)).map(e=>e?e.getTime():0):[]);return d.map(t=>{const n=t+u,i=Nc(t,a),r=Fc(t,s),o=c-i.offsetMs,d=p-r,m=s?d:o,g=Nc(n,a),f=Fc(n,l),y=c-g.offsetMs,D=h-f,C=l?D:y,[v,_]=Uc(i,g),w=t+m,b=n+C;return Object.assign({},e,{source:{startDate:w,endDate:b},startDateUTC:w+v+i.offsetMs,endDateUTC:b+_+g.offsetMs})}).filter(e=>!m.has(e.source.startDate))},Zc=(e,t)=>{let{timeZone:n,firstDayOfWeek:i,allDayIntervals:a,regularIntervals:r}=t;return e.reduce((e,t)=>{const o=t.allDay||t.isAllDayPanelOccupied?a:r,s={min:o[0].min,max:o[o.length-1].max},l=Yc(t,{firstDayOfWeek:i,interval:s,timeZone:n});return e.push(...l),e},[])},qc=e=>e.map(e=>Object.assign({},e,{duration:e.endDateUTC-e.startDateUTC})),Xc=e=>e.map(e=>Object.assign({},e,{datesBeforeSplit:{startDateUTC:e.startDateUTC,endDateUTC:e.endDateUTC}})),Kc=(e,t)=>{const n=cu(e),i=Ql(t,n),a=eu(i,n),r=Zc(a,n),o=iu(r,n),s=qc(o),l=pu(s,n),u=Xc(l);return u},Qc=e=>new Date(e).setUTCHours(0,0,0,0),Jc=e=>{if(0===e.length)return e;let t=e[0].groupIndex,n=Qc(e[0].startDateUTC);return e.map((i,a)=>{const r=e[a+1];if(!r)return Object.assign({},i,{isLastInGroup:!0});const o=r&&Qc(r.startDateUTC);return t!==r.groupIndex||n!==o?(t=r.groupIndex,n=o,Object.assign({},i,{isLastInGroup:!0})):Object.assign({},i,{isLastInGroup:!1})})},ep=e=>e.map((e,t)=>Object.assign({},e,{sortedIndex:t})),tp=e=>e.sort((e,t)=>e.groupIndex-t.groupIndex),np=e=>e.sort((e,t)=>t.duration-e.duration),ip=e=>e.sort((e,t)=>e.startDateUTC-t.startDateUTC),ap=e=>{const t=new Date(e[e.length-1].min),n=new Date(e[e.length-1].max),i=t.getUTCHours()===n.getUTCHours()&&t.getUTCMinutes()===n.getUTCMinutes()&&t.getUTCSeconds()===n.getUTCSeconds()&&t.getUTCMilliseconds()===n.getUTCMilliseconds();if(i)return n.getTime();const a=new Date(n.getTime()-1);return a.setUTCDate(a.getUTCDate()+1),a.setUTCHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),a.getTime()},rp=e=>{const t=new Date(e[0].min),n=new Date(e[0].max),i=n.getUTCHours()===t.getUTCHours()&&n.getUTCMinutes()===t.getUTCMinutes()&&n.getUTCSeconds()===t.getUTCSeconds()&&n.getUTCMilliseconds()===t.getUTCMilliseconds();if(i)return t.getTime();const a=new Date(t.getTime());return a.setUTCHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),a<t?a.getTime():a.setUTCDate(a.getUTCDate()-1)},op=(e,t)=>{switch(!0){case e&&t:return"body";case e:return"tail";case t:return"head";default:return}},sp=(e,t,n,i)=>{switch(!0){case e&&!n:return"head";case t&&!i:return"tail";default:return"body"}},lp=(e,t)=>{const n=e.startDateUTC<t.min?t.min:e.startDateUTC,i=e.endDateUTC>t.max?t.max:e.endDateUTC;return Object.assign({},e,{startDateUTC:n,endDateUTC:i,duration:i-n})},up=(e,t)=>{const n=e.length-1;for(let i=0;i<n;i+=1){const n=e[i+1];if(n.min>=t)return i}return n},dp=(e,t)=>{const n=rp(t),i=ap(t);return e.reduce((e,a)=>{const r=t.findIndex(e=>{let{max:t}=e;return a.startDateUTC<t});if(-1===r)return e;const o=up(t,a.endDateUTC),s=o-r+1,l=a.startDateUTC<n,u=a.endDateUTC>i;if(s<=1)e.push(Object.assign({},lp(a,t[r]),{partIndex:0,partCount:0,reduced:op(l,u)}));else{const n=Array.from({length:s}).map((e,n)=>{const i=0===n,o=n===s-1;return Object.assign({},lp(a,t[r+n]),{partIndex:n,partCount:s,reduced:sp(i,o,l,u)})});e.push(...n)}return e},[])},cp=e=>e.map(e=>Object.assign({},e,{datesAfterSplit:{startDateUTC:e.startDateUTC,endDateUTC:e.endDateUTC}})),pp=(e,t)=>e.map(e=>Object.assign({},e,{height:t,width:"100%"})),hp=(e,t)=>{const n=e.fire("getAgendaVerticalStepHeight"),i=au(e),a=ou(Object.assign({},i,{startDayHour:0,endDayHour:24}));let r=dp(t,a);return r=cp(r),r=pp(r,n),r=ip(r),r=tp(r),r=Jc(r),ep(r)},mp=e=>{let{cellSize:t,cellDurationMinutes:n,endDayHour:i,startDayHour:a,cells:r,intervals:o,viewType:s,isAllDayPanel:l}=e;switch(s){case"month":case"timelineMonth":{const e=r.filter(e=>0===e.rowIndex).length;return{width:t.width*e,height:t.height*o.length}}case"timelineDay":case"timelineWeek":case"timelineWorkWeek":return{width:t.width*r.length,height:t.height};case"day":case"week":case"workWeek":return{width:l?t.width*r.length:t.width*o.length,height:t.height*(i-a)*(60/n)};default:return t}},gp=e=>{let{min:t,max:n}=e;const i=new Date(n-1).setUTCHours(0,0,0,0),a=new Date(i);return{min:new Date(t).setUTCHours(0,0,0,0),max:a.setDate(a.getDate()+1)}},fp=e=>{let{intervals:t,startDayHour:n,endDayHour:i,skippedDays:a}=e;return t.reduce((e,t,r)=>{const o=ou(Object.assign({},t,{startDayHour:n,endDayHour:i,skippedDays:a}));let s=0;return o.forEach(t=>{e.push({min:t.min,max:t.max,rowIndex:r,columnIndex:s,cellIndex:e.length}),s+=1}),e},[])},yp=["startDayHour","endDayHour","skippedDays"],Dp=e=>{const t=[],n=new Date(e.min);while(n.getTime()<e.max){const e=n.getTime();n.setUTCDate(n.getUTCDate()+7),t.push({min:e,max:n.getTime()})}return t},Cp=(e,t,n)=>e.map(e=>Object.assign({},e,{min:new Date(e.min).setUTCHours(t,0,0,0),max:new Date(e.max-1).setUTCHours(n,0,0,0)})),vp=(e,t,n)=>{let{startDayHour:i,endDayHour:a,skippedDays:r}=e,o=(0,F.A)(e,yp);const s=gp(o),l=n?[s]:Dp(s),u=Cp(l,i,a),d=ru(u,t),c=fp({intervals:l,startDayHour:i,endDayHour:a,skippedDays:r}),p=ru(c,t);return{cells:p,dayIntervals:p,intervals:d}},_p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.endsWith("px")&&parseInt(e,10)||t},wp=(e,t,n)=>{const i={height:_p(t.height,20),width:_p(t.width,n),marginRight:_p(t.marginRight),marginLeft:_p(t.marginLeft),marginTop:_p(t.marginTop),marginBottom:_p(t.marginBottom)},a=i.marginTop+i.marginBottom,r=i.marginLeft+i.marginRight,o=Math.max(20,i.height),s=Math.max(20,i.width||e.width-r);return{collectorSize:{width:s,height:o},collectorWithMarginsSize:{width:s+r,height:o+a}}};function bp(e,t){const n={sizeY:"horizontal"===t?e.height:e.width,sizeX:"horizontal"===t?e.width:e.height};return"top"in e&&"left"in e?Object.assign({},n,{offsetY:"horizontal"===t?e.top:e.left,offsetX:"horizontal"===t?e.left:e.top}):n}function Sp(e,t){const n={height:"horizontal"===t?e.sizeY:e.sizeX,width:"horizontal"===t?e.sizeX:e.sizeY};return"offsetY"in e&&"offsetX"in e?Object.assign({},n,{top:"horizontal"===t?e.offsetY:e.offsetX,left:"horizontal"===t?e.offsetX:e.offsetY}):n}const Tp=()=>(0,U.ip)((0,U.ss)())?18:20,xp=e=>{const{isTimelineView:t,isAdaptivityEnabled:n,isMonthView:i,isAllDayAppointment:a}=e;if(n)return{width:30,height:30};if(t)return{width:40,height:35};const r=i||a?Tp():12;return{width:40,height:r}},Ap=e=>{let{isTimelineView:t,isAdaptivityEnabled:n,viewOrientation:i}=e;return n?{width:30,height:30}:{width:"vertical"===i?50:40,height:t?60:Tp()}},Ep=e=>{let{maxAppointmentsPerCell:t,cellSize:n,collectorSize:i,viewOrientation:a,isTimelineView:r,isAdaptivityEnabled:o}=e;switch(t){case"auto":{if(o&&"horizontal"===a)return 0;const e=bp(n,a).sizeY,t=e<30;if(t)return 0;const s=Ap({isTimelineView:r,isAdaptivityEnabled:o,viewOrientation:a}),l=bp(s,a),u=bp(i,a).sizeY,d=Math.floor(Math.max(0,e-u)/l.sizeY);return Math.max(d,o?0:1)}case"unlimited":return-1;default:return parseInt(String(t),10)}},kp={collectorSize:{width:0,height:0},collectorWithMarginsSize:{width:0,height:0}},Op=(e,t)=>{var n;let{alwaysReserveSpaceForCollector:i,isTimelineView:a,viewOrientation:r,isAdaptivityEnabled:o,collectorCSS:s,DOMMetaData:l,panelName:u}=t;const d=l.allDayPanelCellsMeta[0]||l.dateTableCellsMeta[0][0],c=(null===(n=l.dateTableCellsMeta[1])||void 0===n?void 0:n[0])||l.dateTableCellsMeta[0][0],p="allDayPanel"===u?d:c,h={width:d.width??0,height:d.height??0},m={width:p.width??0,height:p.height??0},g=e.getViewOption("maxAppointmentsPerCell"),f="unlimited"!==g||i?wp(m,s,o||"allDayPanel"!==u?0:.75*m.width):kp,y={maxAppointmentsPerCell:g,cellSize:m,collectorSize:f.collectorWithMarginsSize,viewOrientation:r,isTimelineView:a,isAdaptivityEnabled:o},D=Ep(y),C="vertical"===r?1:Ep(Object.assign({},y,{maxAppointmentsPerCell:"auto"}));return{allDayPanelCellSize:h,cellSize:m,collectorSizes:f,maxLevel:D,minLevel:C}},Ip={day:{isTimelineView:!1,isMonthView:!1,viewOrientation:"vertical"},week:{isTimelineView:!1,isMonthView:!1,viewOrientation:"vertical"},workWeek:{isTimelineView:!1,isMonthView:!1,viewOrientation:"vertical"},month:{isTimelineView:!1,isMonthView:!0,viewOrientation:"horizontal"},timelineDay:{isTimelineView:!0,isMonthView:!1,viewOrientation:"horizontal"},timelineWeek:{isTimelineView:!0,isMonthView:!1,viewOrientation:"horizontal"},timelineWorkWeek:{isTimelineView:!0,isMonthView:!1,viewOrientation:"horizontal"},timelineMonth:{isTimelineView:!0,isMonthView:!0,viewOrientation:"horizontal"}},Rp=e=>{const t=e.getViewOffsetMs(),{groupOrientation:n,type:i}=e.currentView,a=e.resourceManager.groupCount(),r=Boolean(a&&"horizontal"===n&&e.getViewOption("groupByDate")),o=au(e),{isTimelineView:s,isMonthView:l,viewOrientation:u}=Ip[i],d=Boolean(e.option("rtlEnabled")),c=Boolean(e.option("adaptivityEnabled")),p=e.getViewOption("cellDuration"),h=e.getViewOption("allDayPanelMode"),m=e.getViewOption("showAllDayPanel"),g=e.isVirtualScrolling();return{type:i,viewOffset:t,groupOrientation:n,isGroupByDate:r,groupCount:a,compareOptions:o,isTimelineView:s,isMonthView:l,viewOrientation:u,isRTLEnabled:d,isAdaptivityEnabled:c,cellDurationMinutes:p,hasAllDayPanel:m&&"hidden"!==h&&"vertical"===u,isVirtualScrolling:g}},Mp=(e,t)=>e.filter(e=>!t.includes(new Date(e.min).getUTCDay())),Vp=e=>{let{intervals:t,startDayHour:n,endDayHour:i,durationMinutes:a,skippedDays:r}=e;return t.reduce((e,t,o)=>{const s=ou(Object.assign({},t,{startDayHour:n,endDayHour:i,skippedDays:r}));let l=0;return Mp(s,r).forEach(t=>{const r=new Date(t.min);while(r.getTime()<t.max){const t=r.getTime();let s=r.setUTCMinutes(r.getUTCMinutes()+a);r.getUTCHours()>i&&(r.setUTCDate(r.getUTCDate()+1),r.setUTCHours(n,0,0,0),s=r.getTime()),e.push({min:t,max:s,rowIndex:o,columnIndex:l,cellIndex:e.length}),l+=1}}),e},[])},Pp=["startDayHour","endDayHour"],$p=(e,t,n,i)=>{const a=(0,F.A)(e,Pp),r=gp(a),o=ou(e),s=i?[r]:o,l=ru(s,n),u=ru(o,n),d=Vp(Object.assign({},e,{intervals:s,durationMinutes:t})),c=ru(d,n);return{cells:c,dayIntervals:u,intervals:l}},Wp=(e,t,n,i,a,r)=>{switch(!0){case a:return vp(e,n,i);case"allDayPanel"===r:return vp(e,n,!0);default:return $p(e,t,n,i)}};class Bp{constructor(e){this.schedulerStore=e,this.cache=new Pc.l,this.options=Rp(e)}getPanelOptions(e){const t=this.schedulerStore.getWorkSpace(),n=t.getPanelDOMSize("vertical"===this.options.groupOrientation?"regularPanel":e);return this.cache.memo(`${n.width}.${n.height}.${e}`,()=>{const{type:i,viewOffset:a,groupOrientation:r,viewOrientation:o,isGroupByDate:s,groupCount:l,compareOptions:u,isMonthView:d,isRTLEnabled:c,isAdaptivityEnabled:p,cellDurationMinutes:h,isTimelineView:m,hasAllDayPanel:g}=this.options,f="allDayPanel"===e?"horizontal":o,y=p||"vertical"===f,D=t.getCollectorDimension(y,e),{allDayPanelCellSize:C,cellSize:v,collectorSizes:_,maxLevel:w,minLevel:b}=Op(this.schedulerStore,{alwaysReserveSpaceForCollector:"month"===i,isTimelineView:m,viewOrientation:f,isAdaptivityEnabled:p,collectorCSS:D,DOMMetaData:t.getDOMElementsMetaData(),panelName:e}),{cells:S,dayIntervals:T,intervals:x}=Wp(u,h,a,m||"allDayPanel"===e,d,e),A="vertical"===f?T:S,E=s?A:x,k=Object.assign({intervals:x,cells:S,maxAppointmentsPerCell:w,hasAllDayPanel:g,viewOrientation:f,groupOrientation:r,isGroupByDate:s,isTimelineView:m,isRTLEnabled:c,isAdaptivityEnabled:p,allDayPanelCellSize:C,cellSize:v,collectorPosition:"vertical"===f?"end":"start"},_,{groupCount:l,groupSize:mp(Object.assign({},u,{cellSize:v,cellDurationMinutes:h,intervals:x,cells:S,viewType:i,isAllDayPanel:"allDayPanel"===e})),panelSize:n}),O={cells:S,minLevel:b,maxLevel:w,collectBy:"horizontal"===f?"byOccupation":"byStartDate",isCompact:y};return{splitIntervals:E,cells:S,collectorOptions:O,geometryOptions:k}})}getSplitIntervals(e){return this.getPanelOptions(e).splitIntervals}getCells(e){return this.getPanelOptions(e).cells}getCollectorOptions(e){return this.getPanelOptions(e).collectorOptions}getGeometryOptions(e){return this.getPanelOptions(e).geometryOptions}getVirtualCropOptions(){const{cellSize:e,panelSize:t}=this.getPanelOptions("regularPanel").geometryOptions,{positionHelper:n,virtualScrollingDispatcher:i}=this.schedulerStore.getWorkSpace(),{hasAllDayPanel:a,groupCount:r,groupOrientation:o,isVirtualScrolling:s,isRTLEnabled:l}=this.options,{cellCountInsideLeftVirtualCell:u,cellCountInsideRightVirtualCell:d,cellCountInsideTopVirtualRow:c}=i,p=l?d:u,h=r>0&&"vertical"===o,m=h&&a;return{isVirtualScrolling:s,getVirtualScreen:i=>this.cache.memo(`virtualScreen${i}`,()=>{const r=p*e.width,o=c*e.height,u=Math.round(n.getHorizontalMax(i))||1/0,d=n.getVerticalMax({groupIndex:i,isVirtualScrolling:s,showAllDayPanel:a,supportAllDayRow:a,isGroupedAllDayPanel:m,isVerticalGrouping:h});return{left:l?t.width-u:r,right:l?t.width-r:u,top:o,bottom:d}})}}}const Hp=(e,t)=>{const n=[[],[]];return e.forEach(e=>{t(e)?n[0].push(e):n[1].push(e)}),n},Gp=e=>e.map(e=>Object.assign({},e,{items:[],isCompact:!1})),Np=(e,t)=>e.reduce((e,t)=>(e[t.cellIndex].push(t),e),Array.from({length:t},()=>[])),Fp=(e,t,n)=>e.reduce((e,i)=>{e[i.cellIndex].push(i);for(let a=i.cellIndex+1;a<=i.endCellIndex;a+=1)i.level>=n&&e[a].push(Object.assign({},i,{cellIndex:a,endCellIndex:a,startDateUTC:t[a].min,endDateUTC:t[a].max,columnIndex:t[a].columnIndex,rowIndex:t[a].rowIndex}));return e},Array.from({length:t.length},()=>[])),Lp=(e,t)=>{let{cells:n,isCompact:i,maxLevel:a,collectBy:r}=t;if(a<0)return Gp(e);const o="byStartDate"===r?Np(e,n.length):Fp(e,n,a);return o.reduce((e,t)=>{const[n,r]=Hp(t,e=>e.level<a);return e.push(...Gp(n)),r.length>0&&e.push(Object.assign({},r[0],{items:r,isCompact:i})),e},[])},zp=(e,t,n)=>Math.min(Math.max(e,t),n),Up=(e,t)=>{let{minLevel:n,maxLevel:i}=t;const a=-1===i?0:Math.min(n,i);let r=[],o=[];return e.map(e=>{const t=e.endDateUTC===e.startDateUTC?e.endDateUTC+1:e.endDateUTC,n=r.findIndex(t=>e.startDateUTC>=t),s=-1===n?r.length:n,l=Object.assign({},e,{level:s,maxLevel:a,inStackWithCollector:!1}),u=r.some(t=>e.startDateUTC<t);return u?(r[s]=t,o.push(l),o.forEach(e=>{e.maxLevel=-1===i?r.length:zp(r.length,a,i),e.inStackWithCollector=-1!==i&&r.length>i})):(l.maxLevel=a,l.inStackWithCollector=-1!==i&&r.length>i,r=[t],o=[l]),l})},jp=(e,t)=>{const n=Up(e,t),i=Lp(n,t);return i},Yp=(e,t,n)=>e.map(e=>Object.assign({},e,{direction:e.isAllDayPanelOccupied?t:n})),Zp=(e,t)=>e.map(e=>{const n=xp(Object.assign({},t,{isAllDayAppointment:e.allDay}));return Object.assign({},e,{empty:!e.isAllDayPanelOccupied&&(e.height<n.height||e.width<n.width)})}),qp=(e,t)=>{let{cellSize:n,collectorSize:i,collectorWithMarginsSize:a,viewOrientation:r}=t;const o=bp(n,r),s=e.isAllDayPanelOccupied||"vertical"===r?(n.height-a.height)/2:n.height-40,l=(n.width-a.width)/2,u=bp({top:s,left:l,width:i.width,height:i.height},r);u.offsetX+=e.columnIndex*o.sizeX;const d=Sp(u,r),c=e.items.map(e=>Object.assign({},e,{width:n.width,height:n.height}));return Object.assign({},e,d,{items:c})},Xp=(e,t)=>{let{collectorPosition:n,cellSize:i,collectorSize:a,collectorWithMarginsSize:r,viewOrientation:o}=t;const s=bp(a,o),l=bp(i,o),u={offsetX:e.columnIndex*l.sizeX,offsetY:"start"===n?0:l.sizeY-bp(r,o).sizeY,sizeY:s.sizeY,sizeX:s.sizeX},d=Sp(u,o);return d},Kp=(e,t,n)=>{let{min:i,max:a}=t;const r=a-i,o=e-i;return 0===r?0:o*n/r},Qp=(e,t,n)=>{const i=Kp(e.startDateUTC,n[e.cellIndex],t.sizeX),a=Kp(e.endDateUTC,n[e.endCellIndex],t.sizeX),r=e.columnIndex*t.sizeX+i,o=(e.endCellIndex-e.cellIndex)*t.sizeX+a-i;return{offsetX:r,sizeX:o}},Jp=(e,t,n,i)=>{if(e.isAllDayPanelOccupied&&!e.inStackWithCollector){const i=0===e.maxLevel?t.sizeY-n:(t.sizeY-n)/e.maxLevel,a=e.level*i;return{sizeY:i,offsetY:a}}const a=t.sizeY-n,r=0===e.maxLevel?a:a/e.maxLevel;let o=e.level*r;return"start"===i&&(o+=n),{sizeY:r,offsetY:o}},eh=(e,t)=>{let{collectorPosition:n,cellSize:i,collectorWithMarginsSize:a,viewOrientation:r,cells:o}=t;const s=bp(i,r),l=bp(a,r),u=Object.assign({},Qp(e,s,o),Jp(e,s,l.sizeY,n)),d=Sp(u,r);return d},th=(e,t)=>{if(e.items.length){const n=Xp(e,t),i=e.items.map(n=>{const i=eh(Object.assign({},e,n),t);return Object.assign({},n,{width:i.width,height:i.height})});return Object.assign({},e,n,{items:i})}const n=eh(e,t);return Object.assign({},e,n,{items:[]})},nh=(e,t)=>{let{groupCount:n,groupOrientation:i,viewOrientation:a,hasAllDayPanel:r,isGroupByDate:o,allDayPanelCellSize:s,cellSize:l,groupSize:u}=t;if(n)switch(!0){case"horizontal"===i&&o:e.left+=(n-1)*l.width*("horizontal"===a?e.columnIndex:e.rowIndex)+l.width*e.groupIndex;break;case"horizontal"===i:e.left+=e.groupIndex*u.width;break;default:e.top+=e.groupIndex*u.height+(e.groupIndex+Number(!e.isAllDayPanelOccupied))*Number(r)*s.height}},ih=(e,t)=>{let{panelSize:n,isRTLEnabled:i}=t;if(i){const t=e.items.length?0:e.width;e.left=n.width-e.left-t}},ah=(e,t)=>{let{cellSize:n,viewOrientation:i,isTimelineView:a}=t;switch(!0){case"horizontal"===i&&!a:e.top+=e.rowIndex*n.height;break;case"horizontal"===i&&a:case"vertical"===i:e.left+=e.rowIndex*n.width}},rh=(e,t)=>e.map(e=>{const{isAdaptivityEnabled:n,maxAppointmentsPerCell:i}=t,a=n&&0===i?qp(e,t):th(e,t);return ah(a,t),nh(a,t),ih(a,t),a}),oh=(e,t)=>{let n=0,i=e.length-1;while(n<=i){const a=Math.floor((n+i)/2),r=e[a];if(t>=r.min&&t<r.max)return a;t<r.min?i=a-1:n=a+1}return Math.min(n,e.length-1)},sh=(e,t)=>e.map(e=>{const n=oh(t,e.startDateUTC);let i=n;while(i<t.length-1&&e.endDateUTC>t[i].max&&e.endDateUTC>=t[i+1].min)i+=1;return Object.assign({},e,{startDateUTC:Math.max(e.startDateUTC,t[n].min),endDateUTC:Math.min(e.endDateUTC,t[i].max),cellIndex:n,endCellIndex:i,rowIndex:t[n].rowIndex,columnIndex:t[n].columnIndex})}),lh=Ui.s.dateToMilliseconds,uh=lh("minute"),dh=lh("day"),ch=(e,t)=>{const n=new Date(e).setUTCHours(0,0,0,0),i=n+t,a=n+dh+t;return{min:i,max:a}},ph=(e,t)=>{const{min:n,max:i}=ch(e,t);switch(!0){case e>i-uh:return i;case e<n:return n-dh;default:return n}},hh=(e,t)=>{const{min:n,max:i}=ch(e,t);switch(!0){case e>=i:return i+dh-uh;case e<n:return n-uh;default:return i-uh}},mh=(e,t,n)=>e.map(e=>{if(!e.allDay)return e;if(0===n){const n=new Date(e.startDateUTC).setUTCHours(t,0,0,0)-uh,i=new Date(e.endDateUTC).setUTCHours(t,0,0,0)-uh;return Object.assign({},e,{startDateUTC:Math.min(e.startDateUTC,n),endDateUTC:i})}return Object.assign({},e,{startDateUTC:ph(e.startDateUTC,n),endDateUTC:hh(e.endDateUTC,n)})}),gh=e=>e.map(e=>{if(!e.allDay)return e;const t=new Date(e.startDateUTC),n=new Date(e.endDateUTC);return n.setDate(n.getDate()+1),Object.assign({},e,{endDateUTC:n.setUTCHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())})}),fh=e=>{const t=[];return e.forEach(e=>{t[e.groupIndex]=t[e.groupIndex]||[],t[e.groupIndex].push(e)}),t.map(e=>e||[])},yh=(e,t)=>{const n=[];let i=0,a=0;while(i<e.length&&a<t.length)e[i].startDateUTC<=t[a].startDateUTC?(n.push(e[i]),i+=1):(n.push(t[a]),a+=1);while(i<e.length)n.push(e[i]),i+=1;while(a<t.length)n.push(t[a]),a+=1;return n},Dh=(e,t,n)=>{if(t){const[t,i]=Hp(e,e=>e.isAllDayPanelOccupied),a=n(t,"allDayPanel"),r=n(i,"regularPanel");return yh(a,r)}return n(e,"regularPanel")},Ch=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?e.map(e=>{const{cellIndex:n,endCellIndex:i}=e;return Object.assign({},e,{startDateUTC:t[n].min,endDateUTC:t[i].max,duration:t[i].max-t[n].min})}):e},vh=(e,t)=>{let{isVirtualScrolling:n,getVirtualScreen:i}=t;return n?e.reduce((e,t)=>{const n=i(t.groupIndex),a=!(t.left+t.width<n.left||t.left>n.right||t.top+t.height<n.top||t.top>n.bottom);if(a){const i=t.left+t.width,a=t.top+t.height,r=Math.max(n.left,t.left),o=Math.max(n.top,t.top),s=Math.min(n.right,i)-r,l=Math.min(n.bottom,a)-o;e.push(Object.assign({},t,{left:r,width:s,top:o,height:l}))}return e},[]):e},_h=(e,t,n)=>{if(!n)return e;const i=t.getCompletedGroupsInfo(),a=new Map;return i.forEach(e=>{a.set(e.groupIndex,{min:Y.A.createUTCDateWithLocalOffset(e.startDate).getTime(),max:Y.A.createUTCDateWithLocalOffset(e.endDate).getTime()})}),e.filter(e=>{const t=a.get(e.groupIndex);return!!t&&(!!e.isAllDayPanelOccupied||tu({startDate:e.startDateUTC,endDate:e.endDateUTC},[t]))})},wh=(e,t)=>{const n=new Bp(e),{viewOrientation:i,isMonthView:a,isAdaptivityEnabled:r,isTimelineView:o,hasAllDayPanel:s,isVirtualScrolling:l,viewOffset:u,compareOptions:{endDayHour:d}}=n.options,{viewDataProvider:c}=e._workSpace,p=Dh(t,s,(e,t)=>{const i=fh(e),r=i.map(e=>{np(e),ip(e);const i=a||"allDayPanel"===t?mh(e,d,u):gh(e),r=dp(i,n.getSplitIntervals(t));np(r),ip(r),tp(r);const o=sh(r,n.getCells(t)),s=a||"allDayPanel"===t?Ch(o,n.getCells(t)):o,l=jp(s,n.getCollectorOptions(t));return l});return r.flat()}),h=ep(p),m=_h(h,c,l),g=Dh(m,s,(e,t)=>{const i=rh(e,n.getGeometryOptions(t));return i}),f=vh(g,n.getVirtualCropOptions()),y=Yp(f,"horizontal",i),D=Zp(y,{isTimelineView:o,isAdaptivityEnabled:r,isMonthView:a});return D},bh=e=>{const t={allDay:e.allDay,startDate:Y.A.createDateFromUTCWithLocalOffset(new Date(e.datesBeforeSplit.startDateUTC)),endDate:Y.A.createDateFromUTCWithLocalOffset(new Date(e.datesBeforeSplit.endDateUTC))},n={allDay:e.allDay,startDate:new Date(e.source.startDate),endDate:new Date(e.source.endDate)};return{appointment:t,sourceAppointment:n}},Sh=e=>Object.assign({},bh(e),{partialDates:{allDay:e.allDay,startDate:Y.A.createDateFromUTCWithLocalOffset(new Date(e.datesAfterSplit.startDateUTC)),endDate:Y.A.createDateFromUTCWithLocalOffset(new Date(e.datesAfterSplit.endDateUTC))}}),Th=(e,t)=>{let{dataAccessors:n}=t;return e.map(e=>{const t=n.get("startDate",e).getTime(),i=n.get("startDateTimeZone",e),a=n.get("endDate",e).getTime(),r=n.get("endDateTimeZone",e),o=n.get("visible",e),s=!(0,A.O9)(o)||Boolean(o);return{allDay:n.get("allDay",e),startDateTimeZone:i,endDateTimeZone:r,source:{startDate:t,endDate:a},recurrenceRule:n.get("recurrenceRule",e),recurrenceException:n.get("recurrenceException",e),hasRecurrenceRule:n.isRecurrent(e),visible:s,disabled:n.get("disabled",e),itemData:e}})},xh=Ui.s.dateToMilliseconds,Ah=(e,t,n)=>e?e.reduce((e,i)=>{const a=n.get("startDate",i),r=n.get("endDate",i);if(!R.X.isValidDate(a))return e;const o=!R.X.isValidDate(r)||a.getTime()>r.getTime();if(o){const e=n.get("allDay",i),r=e?Ui.s.setToDayEnd(new Date(a)):new Date(a.getTime()+t*xh("minute"));n.set("endDate",i,r)}return e.push(i),e},[]):[],Eh=(e,t)=>{const n=e.getViewOption("cellDuration"),i=e._dataAccessors,a=Ah(t,n,i);return Th(a,{dataAccessors:i,timeZoneCalculator:e.timeZoneCalculator})};class kh{constructor(e){this.schedulerStore=e,this.preparedItems=[],this.filteredItems=[]}prepareAppointments(e){this.preparedItems=Eh(this.schedulerStore,e)}filterAppointments(){this.filteredItems=Kc(this.schedulerStore,this.preparedItems)}hasAllDayAppointments(){return this.filteredItems.filter(e=>e.isAllDayPanelOccupied).length>0}generateViewModel(){const e=this.schedulerStore.currentView.type;if("agenda"===e){const e=hp(this.schedulerStore,this.filteredItems);return e.map(e=>Object.assign({},e,{isAgendaModel:!0,info:Sh(e)}))}const t=t=>t.isAllDayPanelOccupied&&"day"===e&&1===this.schedulerStore.currentView.intervalCount,n=wh(this.schedulerStore,this.filteredItems),i=e=>({itemData:e.itemData,allDay:e.isAllDayPanelOccupied,groupIndex:e.groupIndex,width:e.width,height:e.height,info:bh(e)});return n.map(e=>e.items.length?{itemData:e.itemData,allDay:e.isAllDayPanelOccupied,groupIndex:e.groupIndex,sortedIndex:e.sortedIndex,top:e.top,left:e.left,width:e.width,height:e.height,isCompact:e.isCompact,items:e.items.map(i)}:(e=>({itemData:e.itemData,allDay:e.isAllDayPanelOccupied,groupIndex:e.groupIndex,sortedIndex:e.sortedIndex,direction:e.direction,level:e.level,maxLevel:e.maxLevel,empty:e.empty,top:e.top,left:e.left,height:e.height,width:e.width,reduced:e.reduced,partIndex:e.partIndex,partTotalCount:e.partCount,rowIndex:e.rowIndex,columnIndex:e.columnIndex,skipResizing:t(e),info:bh(e)}))(e))}}var Oh=kh;const Ih={updating:"updating",push:"push"};class Rh{constructor(e){this.setDataSource(e),this.updatedAppointmentKeys=[]}get keyName(){const e=this.dataSource.store();return e.key()}get isDataSourceInit(){return Boolean(this.dataSource)}_getStoreKey(e){const t=this.dataSource.store();return t.keyOf(e)}setDataSource(e){this.dataSource=e,this.cleanState(),this._initStoreChangeHandlers()}_initStoreChangeHandlers(){const{dataSource:e}=this,t=null===e||void 0===e?void 0:e.store();t&&(t.on(Ih.updating,e=>{const n=t.key();n?this.updatedAppointmentKeys.push({key:n,value:e}):this.updatedAppointment=e}),t.on(Ih.push,n=>{const i=e.items(),a=t.key();n.forEach(e=>{const t=0!==i.filter(t=>t[a]===e.key).length;if(t)this.updatedAppointmentKeys.push({key:a,value:e.key});else{const{data:t}=e;t&&i.push(t)}}),e.load()}))}getUpdatedAppointment(){return this.updatedAppointment}getUpdatedAppointmentKeys(){return this.updatedAppointmentKeys}cleanState(){this.updatedAppointment=null,this.updatedAppointmentKeys=[]}add(e){return this.dataSource.store().insert(e).done(()=>this.dataSource.load())}update(e,t){const n=this._getStoreKey(e),i=new S.cY;return this.dataSource.store().update(n,t).done(e=>this.dataSource.load().done(()=>i.resolve(e)).fail(i.reject)).fail(i.reject),i.promise()}remove(e){const t=this._getStoreKey(e);return this.dataSource.store().remove(t).done(()=>this.dataSource.load())}destroy(){var e;const t=null===(e=this.dataSource)||void 0===e?void 0:e.store();t&&(t.off(Ih.updating),t.off(Ih.push))}}var Mh=n(69135);class Vh{constructor(){this.VERTICAL="vertical",this.HORIZONTAL="horizontal"}insertAllDayRow(e,t,n){if(e[n]){let i=e[n].find("tr");i.length||(i=(0,f.A)(on.A.createElement("tr")),i.append(e[n].get(0))),t.appendChild(i.get?i.get(0):i)}}makeTable(e){const t=on.A.createElement("tbody"),n=[];let i;const a=e.groupCount?e.rowCount/e.groupCount:e.rowCount;let r=0;const{allDayElements:o}=e,{groupIndex:s}=e,{rowCount:l}=e;(0,f.A)(e.container).append(t),o&&(this.insertAllDayRow(o,t,0),r++);for(let d=0;d<l;d++){i=on.A.createElement("tr"),t.appendChild(i);const l=(d+1)%a===0;e.rowClass&&(i.className=e.rowClass);for(let t=0;t<e.cellCount;t++){var u;const a=on.A.createElement("td");let r,o,l;if(i.appendChild(a),e.cellClass&&((0,A.Tn)(e.cellClass)?a.className=e.cellClass(d,t):a.className=e.cellClass),e.getCellData&&(r=e.getCellData(a,d,t,s),o=r.key,l=r.value,o&&(0,sn.p)(a,o,l)),null===(u=e.setAdditionalClasses)||void 0===u||u.call(e,(0,f.A)(a),l),e.cellTemplate&&e.cellTemplate.render){const i=e.getTemplateData?e.getTemplateData(d):{},r={model:Object.assign({text:e.getCellText?e.getCellText(d,t):"",date:e.getCellDate?e.getCellDate(d):void 0},i),container:(0,g.cc)((0,f.A)(a)),index:d*e.cellCount+t};l&&(l.startDate&&(r.model.startDate=l.startDate),l.endDate&&(r.model.endDate=l.endDate),l.groups&&(r.model.groups=l.groups),l.allDay&&(r.model.allDay=l.allDay)),n.push(e.cellTemplate.render.bind(e.cellTemplate,r))}else e.getCellText&&(0,f.A)("<div>").text(e.getCellText(d,t)).addClass(e.getCellTextClass).appendTo((0,f.A)(a))}o&&l&&(this.insertAllDayRow(o,t,r),r++)}return n}makeGroupedTable(e,t,n,i,a,r,o){let s=[];return s=e===this.VERTICAL?this._makeVerticalGroupedRows(t,n,a,r):this._makeHorizontalGroupedRows(t,n,i,a,o),s}makeGroupedTableFromJSON(e,t){let n;const i=[];let a=0;t=t||{};const r=t.cellTag||"td",{groupTableClass:o}=t,{groupRowClass:s}=t,{groupCellClass:l}=t,{groupCellCustomContent:u}=t;function d(e){return e.children?e.children.length:0}function c(e,t,n,i){const a={element:on.A.createElement(r),childCount:t};l&&(a.element.className=l);const o=on.A.createTextNode(e);return"function"===typeof u?u(a.element,o,n,i):a.element.appendChild(o),a}return function(){n=on.A.createElement("table"),o&&(n.className=o)}(),function e(t){for(let n=0;n<t.length;n++){const r=d(t[n]),o=c(t[n].resourceText,r,n,t[n]);i[a]||(i[a]=[]),i[a].push(o),r?e(t[n].children):a++}}(e),i.forEach(e=>{const t=on.A.createElement("tr");s&&(t.className=s);const i=[];for(let n=e.length-1;n>=0;n--){const t=e[n+1];let a=e[n].childCount;t&&t.childCount&&(a*=t.childCount),i.push(a)}i.reverse(),e.forEach((e,n)=>{i[n]&&e.element.setAttribute("rowSpan",i[n]),t.appendChild(e.element)}),n.appendChild(t)}),n}_makeFlexGroupedRowCells(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const r=[],{items:o}=e,s=o.length;for(let l=0;l<t*a;l++)for(let t=0;t<s;t++){let a=(0,f.A)("<div>");const u={};if(i&&i.render){const n={model:o[t],container:(0,g.cc)(a),index:l*s+t};e.data&&(n.model.data=e.data[t]),u.template=i.render.bind(i,n)}else a.text(o[t].text).attr("title",o[t].text).addClass("dx-scheduler-group-header-content"),a=(0,f.A)("<div>").append(a);const d=(0,A.Tn)(n.groupHeaderClass)?n.groupHeaderClass(t):n.groupHeaderClass;u.element=a.addClass(d),r.push(u)}return r}_makeVerticalGroupedRows(e,t,n,i){const a=[];let r=1;const o=[],s=function(e){e.template&&a.push(e.template)};for(let d=0;d<e.length;d++){d>0&&(r=e[d-1].items.length*r);const i=this._makeFlexGroupedRowCells(e[d],r,t,n);i.forEach(s),o.push(i)}const l=[],u=o.length;for(let d=0;d<u;d++)l.push((0,f.A)("<div>").addClass(t.groupHeaderRowClass));for(let d=u-1;d>=0;d--){const e=o[d].length;for(let t=0;t<e;t++)l[d].append(o[d][t].element)}return{elements:(0,f.A)("<div>").addClass("dx-scheduler-group-flex-container").append(l),cellTemplates:a}}_makeHorizontalGroupedRows(e,t,n,i,a){let r=1;const o=e.length,s=[],l=[],u=a?n:1,d=function(e){return e.template&&l.push(e.template),e.element};for(let p=0;p<o;p++){p>0&&(r=e[p-1].items.length*r);const n=this._makeGroupedRowCells(e[p],r,t,i,u);s.push((0,f.A)("<tr>").addClass(t.groupRowClass).append(n.map(d)))}const c=s[o-1].find("th").length;for(let p=0;p<o;p++){const e=s[p].find("th");let t=c/e.length;a||(t*=n),(t>1&&1===u||a&&o>1)&&e.attr("colSpan",t)}return{elements:s,cellTemplates:l}}_makeGroupedRowCells(e,t,n,i,a){a=a||1,t*=a;const r=[],{items:o}=e,s=o.length;for(let l=0;l<t;l++)for(let t=0;t<s;t++){let a=(0,f.A)("<div>");const u={};if(i&&i.render){const n={model:o[t],container:(0,g.cc)(a),index:l*s+t};e.data&&(n.model.data=e.data[t]),u.template=i.render.bind(i,n)}else a.text(o[t].text),a=(0,f.A)("<div>").append(a);let d;a.addClass(n.groupHeaderContentClass),d=(0,A.Tn)(n.groupHeaderClass)?n.groupHeaderClass(t):n.groupHeaderClass,u.element=(0,f.A)("<th>").addClass(d).append(a),r.push(u)}return r}}var Ph={tableCreator:new Vh};const $h=(e,t,n)=>{const i=e[n.resourceIndex],a=n.grouped[n.resourceIndex];return t.some(e=>i.idsGetter(e.itemData).includes(a))},Wh=(e,t,n)=>{if($h(e,t,n))return Object.assign({},n,{children:n.children.length?n.children.map(n=>Wh(e,t,n)).filter(Boolean):[]})},Bh=(e,t,n)=>t.map(t=>Wh(e,n,t)).filter(Boolean);n(32225);var Hh=n(97137),Gh=n(39332);function Nh(e){const t=e();let n={};return function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a={top:void 0!==e.top?Math.ceil(e.top):void 0,left:void 0!==e.left?Math.ceil(e.left):void 0},r=a.top===n.top&&a.left===n.left;!i&&r||(n=a,t.scrollTo(e))}}var Fh=n(59652),Lh=n(60550),zh=n(20177);class Uh extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const e=p.A.format("dxScheduler-allDay");return(0,Lh.bF)(1,"div","dx-scheduler-all-day-title",e,0)}}Uh.defaultProps={};class jh extends Fh.X{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:[],props:[]}}get _viewComponent(){return Uh}}(0,h.A)("dxAllDayPanelTitle",jh);const Yh={allDayPanelHeight:25},Zh="dx-scheduler-date-table-cell",qh="dx-scheduler-date-table-row",Xh="dx-scheduler-all-day-table-cell";var Kh=n(8895);const Qh=e=>{let{template:t,templateProps:n,renderOptions:i}=e;if(void 0===t)return(0,Lh.nl)();const a=(0,Kh.$F)(t),r=Object.assign({},n,{data:Object.assign({},n.data??{},{isEqual:(null===i||void 0===i?void 0:i.propsComparer)??v.RL})});return null===a||void 0===a?void 0:a(r)},Jh={className:"",isFirstGroupCell:!1,isLastGroupCell:!1,startDate:new Date,endDate:new Date,allDay:!1,text:"",index:0,contentTemplateProps:{data:{},index:0}};class em extends zh.eh{render(){const{className:e,isFirstGroupCell:t,isLastGroupCell:n,children:i,ariaLabel:a}=this.props,r=bs.getGroupCellClasses(t,n,e);return(0,Lh.bF)(1,"td",r,i,0,{"aria-label":a})}}em.defaultProps=Jh;const tm=Object.assign({},Jh,{otherMonth:!1,today:!1,isFirstDayMonthHighlighting:!1,isSelected:!1,isFocused:!1});class nm extends zh.eh{constructor(){super(...arguments),this.dataCellTemplateProps=null}getDataCellTemplateProps(){if(null!==this.dataCellTemplateProps)return this.dataCellTemplateProps;const{allDay:e,contentTemplateProps:t,endDate:n,groupIndex:i,groups:a,index:r,startDate:o}=this.props;return this.dataCellTemplateProps={data:Object.assign({startDate:o,endDate:n,groups:a,groupIndex:a?i:void 0,text:"",allDay:Boolean(e)||void 0},null===t||void 0===t?void 0:t.data),index:r},this.dataCellTemplateProps}componentWillUpdate(e){this.props.allDay===e.allDay&&this.props.contentTemplateProps===e.contentTemplateProps&&this.props.endDate===e.endDate&&this.props.groupIndex===e.groupIndex&&this.props.groups===e.groups&&this.props.index===e.index&&this.props.startDate===e.startDate||(this.dataCellTemplateProps=null)}render(){const{viewContext:e,allDay:t,className:n,isFocused:i,isSelected:a,isFirstGroupCell:r,isLastGroupCell:o,dataCellTemplate:s,children:l}=this.props,{view:{type:u},crossScrollingEnabled:d}=e,c=bs.getCellSizeHorizontalClass(u,d),p=bs.getCellSizeVerticalClass(Boolean(t)),h=(0,Zo.g)({[c]:!0,[p]:!0,[Zh]:!t,"dx-state-focused":a,"dx-scheduler-focused-cell":i,[n??""]:!0}),m=a?"Add appointment":void 0,g=this.getDataCellTemplateProps();return(0,Lh.sO)(2,em,{className:h,viewContext:e,isFirstGroupCell:r,isLastGroupCell:o,ariaLabel:m,startDate:Jh.startDate,endDate:Jh.endDate,index:Jh.index,children:(0,Lh.nl)(s?(0,Lh.sO)(2,Qh,{template:s,templateProps:{index:g.index,data:g.data}}):l,0)})}}nm.defaultProps=tm;class im extends zh.eh{render(){const{className:e,viewContext:t,dataCellTemplate:n,endDate:i,groupIndex:a,groups:r,index:o,isFirstGroupCell:s,isFocused:l,isLastGroupCell:u,isSelected:d,startDate:c}=this.props;return(0,Lh.sO)(2,nm,{className:`${Xh} ${e}`,viewContext:t,startDate:c,endDate:i,groups:r,groupIndex:a,allDay:!0,isFirstGroupCell:s,isLastGroupCell:u,index:o,dataCellTemplate:n,isSelected:d,isFocused:l})}}im.defaultProps=tm;const am={};class rm extends zh.eh{render(){const{children:e,className:t,colSpan:n,styles:i}=this.props;return(0,Lh.bF)(1,"td",t,e,0,{style:(0,zh.gs)(i),colspan:n})}}rm.defaultProps=am;class om extends zh.eh{render(){const{children:e,className:t,colSpan:n,styles:i}=this.props;return(0,Lh.bF)(1,"th",t,e,0,{style:(0,zh.gs)(i),colspan:n})}}om.defaultProps=am;const sm={width:0,isHeaderCell:!1};class lm extends zh.eh{render(){const{colSpan:e,isHeaderCell:t,className:n="",width:i,styles:a}=this.props,r=bs.addWidthToStyle(i,a),o=t?om:rm;return(0,Lh.sO)(2,o,{className:`dx-scheduler-virtual-cell ${n}`,styles:r,colSpan:e})}}lm.defaultProps=sm;const um={className:"",leftVirtualCellWidth:0,rightVirtualCellWidth:0,isHeaderRow:!1};class dm extends zh.eh{render(){const{children:e,className:t,isHeaderRow:n,leftVirtualCellCount:i,leftVirtualCellWidth:a=um.leftVirtualCellWidth,rightVirtualCellCount:r,rightVirtualCellWidth:o=um.rightVirtualCellWidth,styles:s}=this.props,l=Boolean(i),u=Boolean(r);return(0,Lh.bF)(1,"tr",t,[l&&null!=i&&Vo(i,1e3).map(e=>(0,Lh.sO)(2,lm,{width:a*(e/i),colSpan:e,isHeaderCell:n??sm.isHeaderCell})),e,u&&null!=r&&Vo(r,1e3).map(e=>(0,Lh.sO)(2,lm,{width:o*(e/r),colSpan:e,isHeaderCell:n??sm.isHeaderCell}))],0,{style:(0,zh.gs)(s)})}}dm.defaultProps=um;const cm={viewData:[],isVerticalGroupOrientation:!1,className:"",leftVirtualCellWidth:0,rightVirtualCellWidth:0};class pm extends zh.eh{render(){const{className:e,viewData:t,viewContext:n,leftVirtualCellWidth:i,rightVirtualCellWidth:a,leftVirtualCellCount:r,rightVirtualCellCount:o,isVerticalGroupOrientation:s,dataCellTemplate:l}=this.props,u=(0,Zo.g)({"dx-scheduler-all-day-table-row":!0,[e??""]:Boolean(e)});return(0,Lh.sO)(2,dm,{leftVirtualCellWidth:i,rightVirtualCellWidth:a,leftVirtualCellCount:r,rightVirtualCellCount:o,className:u,children:t.map(e=>{let{endDate:t,groupIndex:i,groups:a,index:r,isFirstGroupCell:o,isFocused:u,isLastGroupCell:d,isSelected:c,key:p,startDate:h}=e;return(0,Lh.sO)(2,im,{viewContext:n,isFirstGroupCell:!s&&o,isLastGroupCell:!s&&d,startDate:h,endDate:t,groups:a,groupIndex:i,index:r,dataCellTemplate:l,isSelected:c??!1,isFocused:u??!1},p)})})}}pm.defaultProps=cm;const hm={viewData:{groupedData:[],leftVirtualCellCount:0,rightVirtualCellCount:0,topVirtualRowCount:0,bottomVirtualRowCount:0},leftVirtualCellWidth:0,rightVirtualCellWidth:0,topVirtualRowHeight:0,bottomVirtualRowHeight:0,addDateTableClass:!0,addVerticalSizesClassToRows:!0},mm=Object.assign({},um,{leftVirtualCellWidth:0,rightVirtualCellWidth:0,cellsCount:1});class gm extends zh.eh{constructor(){super(...arguments),this.virtualCells=null}getVirtualCells(){if(null!==this.virtualCells)return this.virtualCells;const{cellsCount:e}=this.props;return this.virtualCells=[...Array(e)],this.virtualCells}componentWillUpdate(e){this.props.cellsCount!==e.cellsCount&&(this.virtualCells=null)}render(){const{className:e,leftVirtualCellCount:t,leftVirtualCellWidth:n,rightVirtualCellCount:i,rightVirtualCellWidth:a,styles:r,height:o}=this.props,s=`dx-scheduler-virtual-row ${e}`,l=bs.addHeightToStyle(o,r),u=this.getVirtualCells();return(0,Lh.sO)(2,dm,{className:s,styles:l,leftVirtualCellWidth:n,rightVirtualCellWidth:a,leftVirtualCellCount:t,rightVirtualCellCount:i,children:u.map((e,t)=>(0,Lh.sO)(2,lm,{width:sm.width,isHeaderCell:sm.isHeaderCell,className:"dx-scheduler-cell-sizes-horizontal"},t.toString()))})}}gm.defaultProps=mm;const fm={topVirtualRowHeight:0,bottomVirtualRowHeight:0,leftVirtualCellWidth:0,rightVirtualCellWidth:0,virtualCellsCount:0};class ym extends zh.eh{getResultStyles(){const{height:e,width:t,styles:n}=this.props,i=bs.addHeightToStyle(e,n);return bs.addWidthToStyle(t,i)}render(){const{className:e,topVirtualRowHeight:t,bottomVirtualRowHeight:n,children:i,leftVirtualCellCount:a,leftVirtualCellWidth:r,rightVirtualCellCount:o,rightVirtualCellWidth:s,tableRef:l,virtualCellsCount:u}=this.props,d=Boolean(t),c=Boolean(n),p=this.getResultStyles();return(0,Lh.bF)(1,"table",e,(0,Lh.bF)(1,"tbody",null,[d&&(0,Lh.sO)(2,gm,{height:t,cellsCount:u??mm.cellsCount,leftVirtualCellWidth:r??mm.leftVirtualCellWidth,rightVirtualCellWidth:s??mm.rightVirtualCellWidth,leftVirtualCellCount:a,rightVirtualCellCount:o}),i,c&&(0,Lh.sO)(2,gm,{height:n,cellsCount:u??mm.cellsCount,leftVirtualCellWidth:r??mm.leftVirtualCellWidth,rightVirtualCellWidth:s??mm.rightVirtualCellWidth,leftVirtualCellCount:a,rightVirtualCellCount:o})],0),2,{style:(0,zh.gs)(p),"aria-hidden":!0},null,l)}}ym.defaultProps=fm;class Dm extends zh.oe{constructor(){super(...arguments),this.allDayPanelData=null}createEffects(){return[(0,zh.h2)()]}getAllDayPanelData(){return null!==this.allDayPanelData||(this.allDayPanelData=this.props.viewData.groupedData[0].allDayPanel),this.allDayPanelData}componentWillUpdate(e){super.componentWillUpdate(),this.props.viewData!==e.viewData&&(this.allDayPanelData=null)}render(){const{viewData:e,viewContext:t,width:n,tableRef:i,dataCellTemplate:a}=this.props,r=this.getAllDayPanelData();return(0,Lh.sO)(2,ym,{className:"dx-scheduler-all-day-table",height:r?void 0:Yh.allDayPanelHeight,width:n,tableRef:i,children:(0,Lh.sO)(2,pm,{viewData:r??cm.viewData,viewContext:t,leftVirtualCellWidth:e.leftVirtualCellWidth??cm.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??cm.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount,dataCellTemplate:a})})}}Dm.defaultProps=hm;const Cm=Object.assign({},hm,{cellTemplate:nm});class vm extends zh.eh{render(){const{viewData:e,viewContext:t,addVerticalSizesClassToRows:n,cellTemplate:i,dataCellTemplate:a}=this.props,r=(0,Zo.g)({[qh]:!0,"dx-scheduler-cell-sizes-vertical":n});return(0,Lh.nl)(e.groupedData.map(n=>{let{allDayPanel:o,dateTable:s,isGroupedAllDayPanel:l,key:u}=n;return(0,Lh.nl)([l&&(0,Lh.sO)(2,pm,{viewData:o??cm.viewData,viewContext:t,dataCellTemplate:a,isVerticalGroupOrientation:!0,leftVirtualCellWidth:e.leftVirtualCellWidth??cm.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??cm.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount}),s.map(n=>{let{cells:o,key:s}=n;return(0,Lh.sO)(2,dm,{className:r,leftVirtualCellWidth:e.leftVirtualCellWidth??um.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??um.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount,children:o.map(e=>{let{key:n,endDate:r,isFirstDayMonthHighlighting:o,groupIndex:s,groups:l,index:u,isFirstGroupCell:d,isFocused:c,isLastGroupCell:p,isSelected:h,otherMonth:m,startDate:g,text:f,today:y}=e;return(0,Lh.sO)(2,Qh,{template:i,templateProps:{key:n,viewContext:t,isFirstGroupCell:d,isLastGroupCell:p,startDate:g,endDate:r,groups:l,groupIndex:s,index:u,dataCellTemplate:a,text:f,today:y,otherMonth:m,isFirstDayMonthHighlighting:o,isSelected:h,isFocused:c}})})},s)})],0,u)}),0)}}vm.defaultProps=Cm;const _m=["viewData","viewContext","tableRef","addDateTableClass","width","cellTemplate","dataCellTemplate","groupOrientation","addVerticalSizesClassToRows"],wm=Object.assign({},hm,{cellTemplate:nm});class bm extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const e=this.props,{viewData:t,viewContext:n,tableRef:i,addDateTableClass:a,width:r,cellTemplate:o,dataCellTemplate:s,groupOrientation:l,addVerticalSizesClassToRows:u}=e,d=(0,F.A)(e,_m),c=a?"dx-scheduler-date-table":void 0,p=t.topVirtualRowHeight??0,h=t.bottomVirtualRowHeight??0,m=t.leftVirtualCellWidth??0,g=t.rightVirtualCellWidth??0,f=t.groupedData[0].dateTable[0].cells.length;return(0,Lh._B)((0,Lh.sO)(2,ym,Object.assign({},d,{tableRef:i,topVirtualRowHeight:p,bottomVirtualRowHeight:h,leftVirtualCellWidth:m,rightVirtualCellWidth:g,leftVirtualCellCount:t.leftVirtualCellCount,rightVirtualCellCount:t.rightVirtualCellCount,virtualCellsCount:f,className:c,width:r,children:(0,Lh.sO)(2,vm,{viewData:t,viewContext:n,cellTemplate:o,dataCellTemplate:s,leftVirtualCellWidth:m,rightVirtualCellWidth:g,groupOrientation:l,addVerticalSizesClassToRows:u,topVirtualRowHeight:Cm.topVirtualRowHeight,bottomVirtualRowHeight:Cm.bottomVirtualRowHeight,addDateTableClass:Cm.addDateTableClass})})))}}bm.defaultProps=wm;class Sm extends Fh.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=Object.assign({},this._optionsByReference,{dataCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["cellTemplate","dataCellTemplate"],props:["viewData","viewContext","cellTemplate","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return bm}}(0,h.A)("dxDateTableLayoutBase",Sm);class Tm extends Sm{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dataCellTemplate"],props:["viewData","viewContext","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return Dm}}(0,h.A)("dxAllDayTable",Tm);class xm extends zh.eh{constructor(){super(...arguments),this.contentTemplateProps=null}getContentTemplateProps(){if(null!==this.contentTemplateProps)return this.contentTemplateProps;const{index:e,text:t}=this.props;return this.contentTemplateProps={data:{text:t},index:e},this.contentTemplateProps}componentWillUpdate(e){this.props.index===e.index&&this.props.text===e.text||(this.contentTemplateProps=null)}render(){const{viewContext:e,dataCellTemplate:t,endDate:n,groupIndex:i,groups:a,index:r,isFirstGroupCell:o,isFocused:s,isLastGroupCell:l,isSelected:u,startDate:d,text:c,className:p,isFirstDayMonthHighlighting:h,otherMonth:m,today:g}=this.props,f=(0,Zo.g)({"dx-scheduler-date-table-other-month":Boolean(m),"dx-scheduler-date-table-current-date":Boolean(g),"dx-scheduler-date-table-first-of-month":Boolean(h),[p??""]:Boolean(p)}),y=this.getContentTemplateProps();return(0,Lh.sO)(2,nm,{className:f,viewContext:e,dataCellTemplate:t,startDate:d,endDate:n,text:c,groups:a,groupIndex:i,index:r,isFirstGroupCell:o,isLastGroupCell:l,isSelected:u,isFocused:s,contentTemplateProps:y,children:(0,Lh.bF)(1,"div","dx-scheduler-date-table-cell-text",c,0)})}}xm.defaultProps=tm;const Am=["viewData","viewContext","addDateTableClass","addVerticalSizesClassToRows","dataCellTemplate","groupOrientation","tableRef","width"];class Em extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const e=this.props,{viewData:t,viewContext:n,addDateTableClass:i,addVerticalSizesClassToRows:a,dataCellTemplate:r,groupOrientation:o,tableRef:s,width:l}=e,u=(0,F.A)(e,Am);return(0,Lh._B)((0,Lh.sO)(2,bm,Object.assign({},u,{viewData:t,viewContext:n,groupOrientation:o,addDateTableClass:i,dataCellTemplate:r,cellTemplate:xm,tableRef:s,addVerticalSizesClassToRows:a,width:l})))}}Em.defaultProps=wm;class km extends Sm{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["cellTemplate","dataCellTemplate"],props:["viewData","viewContext","cellTemplate","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return Em}}(0,h.A)("dxMonthDateTableLayout",km);const Om={groupPanelData:{groupPanelItems:[],baseColSpan:1},groupByDate:!1,styles:{}},Im={id:0,text:"",data:{id:0},className:""},Rm={groupItems:[],className:""},Mm=Object.assign({},Im,{isFirstGroupCell:!1,isLastGroupCell:!1,colSpan:1});class Vm extends zh.eh{render(){const{cellTemplate:e,colSpan:t,color:n,data:i,id:a,index:r,text:o,className:s,isFirstGroupCell:l,isLastGroupCell:u}=this.props,d=(0,Zo.g)({"dx-scheduler-group-header":!0,"dx-scheduler-first-group-cell":l,"dx-scheduler-last-group-cell":u,[s??""]:Boolean(s)});return(0,Lh.bF)(1,"th",d,(0,Lh.bF)(1,"div","dx-scheduler-group-header-content",e?(0,Lh.sO)(2,Qh,{template:e,templateProps:{data:{data:i,id:a,color:n,text:o},index:r}}):(0,Lh.bF)(1,"div",null,o,0),0),2,{colspan:t})}}Vm.defaultProps=Mm;class Pm extends zh.eh{render(){const{cellTemplate:e,className:t,groupItems:n}=this.props;return(0,Lh.bF)(1,"tr",`dx-scheduler-group-row ${t}`,n.map((t,n)=>{let{colSpan:i,color:a,data:r,id:o,isFirstGroupCell:s,isLastGroupCell:l,key:u,text:d}=t;return(0,Lh.sO)(2,Vm,{text:d,id:o,data:r,index:n,color:a,colSpan:i??Mm.colSpan,isFirstGroupCell:Boolean(s),isLastGroupCell:Boolean(l),cellTemplate:e},u)}),0)}}Pm.defaultProps=Rm;class $m extends zh.eh{constructor(){super(...arguments),this._groupPanelItems=null}getGroupPanelItems(){if(null!==this._groupPanelItems)return this._groupPanelItems;const{groupPanelData:{baseColSpan:e,groupPanelItems:t}}=this.props,n=t.reduceRight((n,i,a)=>{const r=n,o=i.length,s=a===t.length-1?e:n[a+1],l=a===t.length-1?o:t[a+1].length,u=l/o;return r[a]=u*s,r},[...new Array(t.length)]);return this._groupPanelItems=t.map((e,t)=>{const i=n[t];return e.map(e=>Object.assign({},e,{colSpan:i}))}),this._groupPanelItems}componentWillUpdate(e){this.props.groupPanelData!==e.groupPanelData&&(this._groupPanelItems=null)}render(){const{resourceCellTemplate:e}=this.props,t=this.getGroupPanelItems();return(0,Lh.nl)(t.map(t=>(0,Lh.sO)(2,Pm,{groupItems:t,cellTemplate:e},t[0].key)),0)}}$m.defaultProps=Om;class Wm extends zh.eh{render(){const{className:e,data:t,id:n,color:i,text:a,index:r,cellTemplate:o}=this.props;return(0,Lh.bF)(1,"div",`dx-scheduler-group-header ${e}`,o?(0,Lh.sO)(2,Qh,{template:o,templateProps:{data:{data:t,id:n,color:i,text:a},index:r}}):(0,Lh.bF)(1,"div","dx-scheduler-group-header-content",a,0),0)}}Wm.defaultProps=Im;class Bm extends zh.eh{render(){const{className:e,groupItems:t,cellTemplate:n}=this.props;return(0,Lh.bF)(1,"div",`dx-scheduler-group-row ${e}`,t.map((e,t)=>{let{color:i,data:a,id:r,key:o,text:s}=e;return(0,Lh.sO)(2,Wm,{text:s,id:r,data:a,index:t,color:i,cellTemplate:n},o)}),0)}}Bm.defaultProps=Rm;class Hm extends zh.eh{render(){const{className:e,elementRef:t,groupPanelData:n,resourceCellTemplate:i,height:a,styles:r}=this.props,o=(0,zh.gs)(bs.addHeightToStyle(a,r));return(0,Lh.bF)(1,"div",e,(0,Lh.bF)(1,"div","dx-scheduler-group-flex-container",n.groupPanelItems.map(e=>(0,Lh.sO)(2,Bm,{groupItems:e,cellTemplate:i},e[0].key)),0),2,{style:o},null,t)}}Hm.defaultProps=Om;const Gm=Object.assign({},Om,{groups:[],groupOrientation:mn});class Nm extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const{className:e,viewContext:t,elementRef:n,groupPanelData:i,height:a,resourceCellTemplate:r,groupOrientation:o,groups:s,styles:l}=this.props,u=oo(s.length,o),d=u?Hm:$m;return(0,Lh.sO)(2,d,{viewContext:t,height:a,resourceCellTemplate:r,className:e,groupPanelData:i,elementRef:n,styles:l,groups:Gm.groups,groupOrientation:Gm.groupOrientation,groupByDate:Gm.groupByDate})}}Nm.defaultProps=Gm;class Fm extends Fh.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=Object.assign({},this._optionsByReference,{resourceCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["resourceCellTemplate"],props:["viewContext","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return Nm}}(0,h.A)("dxGroupPanel",Fm);const Lm={text:"",splitText:!1};class zm extends zh.eh{constructor(){super(...arguments),this._textCache=null}getTextParts(){if(null!==this._textCache)return this._textCache;const{text:e}=this.props;return this._textCache=e?e.split(" "):[""],this._textCache}componentWillUpdate(e){this.props.text!==e.text&&(this._textCache=null)}render(){const{splitText:e,text:t}=this.props,n=this.getTextParts();return(0,Lh.nl)(e?n.map(e=>(0,Lh.bF)(1,"div","dx-scheduler-header-panel-cell-date",(0,Lh.bF)(1,"span",null,e,0),2)):t,0)}}zm.defaultProps=Lm;const Um=Object.assign({},Jh,{today:!1,colSpan:1,isWeekDayCell:!1,splitText:!1,isTimeCellTemplate:!1});class jm extends zh.eh{render(){const{viewContext:{view:{type:e},crossScrollingEnabled:t},colSpan:n,dateCellTemplate:i,groupIndex:a,groups:r,index:o,isTimeCellTemplate:s,splitText:l,startDate:u,text:d,timeCellTemplate:c,className:p,isFirstGroupCell:h,isLastGroupCell:m,isWeekDayCell:g,today:f}=this.props,y=bs.getCellSizeHorizontalClass(e,t),D=(0,Zo.g)({"dx-scheduler-header-panel-cell":!0,[y]:!0,"dx-scheduler-header-panel-current-time-cell":f,"dx-scheduler-header-panel-week-cell":g,[p??""]:Boolean(p)}),C=bs.getGroupCellClasses(h,m,D),v=!s&&Boolean(i)||s&&Boolean(c),_=v?(0,Lh.nl)([s&&(0,Lh.sO)(2,Qh,{template:c,templateProps:{data:{date:u,text:d,groups:r,groupIndex:a},index:o}}),!s&&(0,Lh.sO)(2,Qh,{template:i,templateProps:{data:{date:u,text:d,groups:r,groupIndex:a},index:o}})],0):(0,Lh.sO)(2,zm,{splitText:l,text:d});return(0,Lh.bF)(1,"th",C,_,0,{colspan:n,title:d})}}jm.defaultProps=Um;const{isMaterialBased:Ym}=Ss.getThemeType(),Zm={groupOrientation:"horizontal",groupByDate:!1,groups:[]};class qm extends zh.eh{render(){const{viewContext:e,dateCellTemplate:t,dateHeaderData:{dataMap:n,leftVirtualCellCount:i,leftVirtualCellWidth:a,rightVirtualCellCount:r,rightVirtualCellWidth:o},groupByDate:s,groupOrientation:l,groups:u}=this.props,d=Ao(u.length,l)&&!s;return(0,Lh.nl)(n.map((n,s)=>(0,Lh.sO)(2,dm,{className:"dx-scheduler-header-row",leftVirtualCellWidth:a,leftVirtualCellCount:i,rightVirtualCellWidth:o,rightVirtualCellCount:r,isHeaderRow:!0,children:n.map(n=>{let{colSpan:i,endDate:a,groupIndex:r,groups:o,index:s,isFirstGroupCell:l,isLastGroupCell:u,key:c,startDate:p,text:h,today:m}=n;return(0,Lh.sO)(2,jm,{viewContext:e,startDate:p,endDate:a,groups:d?o:void 0,groupIndex:d?r:void 0,today:m??!1,isWeekDayCell:!1,isTimeCellTemplate:!1,index:s,text:h,isFirstGroupCell:l,isLastGroupCell:u,dateCellTemplate:t,colSpan:i,splitText:Ym},c)})},s.toString())),0)}}qm.defaultProps=Zm;const Xm=Object.assign({},Gm,{isRenderDateHeader:!0,dateHeaderTemplate:qm});class Km extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const{viewContext:e,dateHeaderData:t,groupByDate:n,groupOrientation:i,groupPanelData:a,groups:r,isRenderDateHeader:o,dateCellTemplate:s,dateHeaderTemplate:l,resourceCellTemplate:u,timeCellTemplate:d}=this.props,c=Ao(r.length,i);return(0,Lh.bF)(1,"thead",null,[c&&!n&&(0,Lh.sO)(2,Nm,{viewContext:e,groupPanelData:a,groups:r,groupByDate:n,groupOrientation:i,resourceCellTemplate:u}),o&&(0,Lh.sO)(2,Qh,{template:l,templateProps:{viewContext:e,groupByDate:n,dateHeaderData:t,groupOrientation:i,groups:r,dateCellTemplate:s,timeCellTemplate:d}}),n&&(0,Lh.sO)(2,Nm,{viewContext:e,groupPanelData:a,groups:r,groupByDate:n,groupOrientation:i,resourceCellTemplate:u})],0)}}Km.defaultProps=Xm;class Qm extends Fh.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=Object.assign({},this._optionsByReference,{dateHeaderData:!0,resourceCellTemplate:!0,dateCellTemplate:!0,timeCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dateCellTemplate","timeCellTemplate","dateHeaderTemplate","resourceCellTemplate"],props:["viewContext","dateHeaderData","isRenderDateHeader","dateCellTemplate","timeCellTemplate","dateHeaderTemplate","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return Km}}(0,h.A)("dxHeaderPanelLayout",Qm);const{isMaterialBased:Jm}=Ho();class eg extends zh.eh{render(){const{viewContext:e,groupByDate:t,groupOrientation:n,groups:i,dateHeaderData:a,dateCellTemplate:r,timeCellTemplate:o}=this.props,{dataMap:s,isMonthDateHeader:l,leftVirtualCellCount:u,leftVirtualCellWidth:d,rightVirtualCellCount:c,rightVirtualCellWidth:p,weekDayLeftVirtualCellCount:h,weekDayLeftVirtualCellWidth:m,weekDayRightVirtualCellCount:g,weekDayRightVirtualCellWidth:f}=a,y=Ao(i.length,n)&&!t;return(0,Lh.nl)(s.map((t,n)=>{const i=s.length,a=i-1===n,D=i>1&&0===n,C=Jm&&(l||D);let v=u,_=c,w=p,b=d;return D&&(v=h,_=g,w=f,b=m),(0,Lh.sO)(2,dm,{className:"dx-scheduler-header-row",leftVirtualCellWidth:b??um.leftVirtualCellWidth,leftVirtualCellCount:v,rightVirtualCellWidth:w??um.rightVirtualCellWidth,rightVirtualCellCount:_,children:t.map(t=>{let{colSpan:n,endDate:i,groupIndex:s,groups:l,index:u,isFirstGroupCell:d,isLastGroupCell:c,key:p,startDate:h,text:m,today:g}=t;return(0,Lh.sO)(2,jm,{viewContext:e,startDate:h,endDate:i,groups:y?l:void 0,groupIndex:y?s:void 0,today:g??Um.today,index:u,text:m,isFirstGroupCell:d,isLastGroupCell:c,isWeekDayCell:D,colSpan:n,splitText:C,dateCellTemplate:r,timeCellTemplate:o,isTimeCellTemplate:a},p)})},n.toString())}),0)}}eg.defaultProps=Zm;class tg extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const{viewContext:e,dateCellTemplate:t,dateHeaderData:n,groupByDate:i,groupOrientation:a,groupPanelData:r,groups:o,isRenderDateHeader:s,resourceCellTemplate:l,timeCellTemplate:u}=this.props;return(0,Lh.sO)(2,Km,{viewContext:e,dateHeaderData:n,groupPanelData:r,groupByDate:i,groups:o,groupOrientation:a,isRenderDateHeader:s,dateHeaderTemplate:eg,resourceCellTemplate:l,dateCellTemplate:t,timeCellTemplate:u})}}tg.defaultProps=Xm;class ng extends Qm{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dateCellTemplate","timeCellTemplate","dateHeaderTemplate","resourceCellTemplate"],props:["viewContext","dateHeaderData","isRenderDateHeader","dateCellTemplate","timeCellTemplate","dateHeaderTemplate","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return tg}}(0,h.A)("dxTimelineHeaderPanelLayout",ng);class ig extends zh.eh{constructor(){super(...arguments),this.timeCellTemplateProps=null}getTimeCellTemplateProps(){if(null!==this.timeCellTemplateProps)return this.timeCellTemplateProps;const{groupIndex:e,groups:t,index:n,startDate:i,text:a}=this.props;return this.timeCellTemplateProps={data:{date:i,groups:t,groupIndex:e,text:a},index:n},this.timeCellTemplateProps}componentWillUpdate(e){this.props.groupIndex===e.groupIndex&&this.props.groups===e.groups&&this.props.index===e.index&&this.props.startDate===e.startDate&&this.props.text===e.text||(this.timeCellTemplateProps=null)}render(){const{className:e,viewContext:t,highlighted:n,isFirstGroupCell:i,isLastGroupCell:a,text:r,timeCellTemplate:o}=this.props,s=bs.getCellSizeVerticalClass(!1),l=(0,Zo.g)({"dx-scheduler-time-panel-cell":!0,[s]:!0,"dx-scheduler-time-panel-current-time-cell":Boolean(n),[e??""]:!0}),u=this.getTimeCellTemplateProps();return(0,Lh.sO)(2,em,{className:l,viewContext:t,isFirstGroupCell:i,isLastGroupCell:a,startDate:Jh.startDate,endDate:Jh.endDate,index:Jh.index,children:o?(0,Lh.sO)(2,Qh,{template:o,templateProps:{index:u.index,data:u.data}}):(0,Lh.bF)(1,"div",null,r,0)})}}ig.defaultProps=Jh;const ag=["timePanelData","viewContext","tableRef","timeCellTemplate"],rg={timePanelData:{groupedData:[],leftVirtualCellCount:0,rightVirtualCellCount:0,topVirtualRowCount:0,bottomVirtualRowCount:0}};class og extends zh.oe{createEffects(){return[(0,zh.h2)()]}render(){const e=this.props,{timePanelData:t,viewContext:n,tableRef:i,timeCellTemplate:a}=e,r=(0,F.A)(e,ag),{topVirtualRowHeight:o,bottomVirtualRowHeight:s}=t;return(0,Lh._B)((0,Lh.sO)(2,ym,Object.assign({},r,{className:"dx-scheduler-time-panel",topVirtualRowHeight:o??0,bottomVirtualRowHeight:s??0,virtualCellsCount:1,tableRef:i,children:t.groupedData.map(e=>{let{dateTable:t,groupIndex:i,isGroupedAllDayPanel:r,key:o}=e;return(0,Lh.nl)([r&&(0,Lh.sO)(2,dm,{leftVirtualCellWidth:um.leftVirtualCellWidth,rightVirtualCellWidth:um.rightVirtualCellWidth,children:(0,Lh.sO)(2,em,{className:"dx-scheduler-time-panel-title-cell",viewContext:n,startDate:Jh.startDate,endDate:Jh.endDate,index:Jh.index,children:(0,Lh.sO)(2,Uh)})}),t.map(e=>{let{groups:t,highlighted:r,index:o,isFirstGroupCell:s,isLastGroupCell:l,key:u,startDate:d,text:c}=e;return(0,Lh.sO)(2,dm,{className:"dx-scheduler-time-panel-row",leftVirtualCellWidth:um.leftVirtualCellWidth,rightVirtualCellWidth:um.rightVirtualCellWidth,children:(0,Lh.sO)(2,ig,{viewContext:n,startDate:d,endDate:Jh.endDate,text:c,groups:t,groupIndex:i,isFirstGroupCell:s,isLastGroupCell:l,index:o,timeCellTemplate:a,highlighted:r})},u)})],0,o)})})))}}og.defaultProps=rg;class sg extends Fh.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=Object.assign({},this._optionsByReference,{timeCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["timeCellTemplate"],props:["viewContext","groupOrientation","timePanelData","timeCellTemplate"]}}get _viewComponent(){return og}}(0,h.A)("dxTimePanelTableLayout",sg);var lg=n(68554),ug=n(85835),dg=ug.A;function cg(e){return"dxScheduler"===e.NAME}const pg="dx-scheduler-appointment";class hg{constructor(e){this.scheduler=e,this.workspace=this.scheduler._workSpace,this.appointments=this.scheduler._appointments,this.initialPosition={left:0,top:0},this.appointmentInfo=null,this.dragBetweenComponentsPromise=null}isAllDay(e){return e.data(hn).allDay}onDragStart(e){const{itemSettings:t,itemData:n,initialPosition:i}=e;this.initialPosition=i,this.appointmentInfo={appointment:n,settings:t},this.appointments.notifyObserver("hideAppointmentTooltip")}onDragMove(e){e.fromComponent!==e.toComponent&&this.appointments.notifyObserver("removeDroppableCellClass")}getAppointmentElement(e){var t;const n=(null===(t=e.event.data)||void 0===t?void 0:t.itemElement)||e.itemElement;return(0,f.A)(n)}onDragEnd(e){const t=this.getAppointmentElement(e),n=this.isAllDay(t),i=this.appointments._getItemData(t),a=this.appointments._getAppointmentContainer(n);a.append(t);const r=this.workspace.getDroppableCell(),o=this.workspace.getCellByCoordinates(this.initialPosition,n);this.appointments.notifyObserver("updateAppointmentAfterDrag",{event:e,element:t,rawAppointment:i,isDropToTheSameCell:r.is(o),isDropToSelfScheduler:r.length>0})}onDragCancel(){this.removeDroppableClasses()}getItemData(e){const t=(0,f.A)(e).data(cn),n=null===t||void 0===t?void 0:t.appointment,i=this.appointments._getItemData(e);return n||i}getItemSettings(e){const t=(0,f.A)(e).data(cn);return null===t||void 0===t?void 0:t.settings}createDragStartHandler(e,t){return n=>{var i;n.itemData=this.getItemData(n.itemElement),n.itemSettings=this.getItemSettings(n.itemElement),this.scheduler._isAppointmentBeingUpdated(n.itemData)?n.cancel=!0:(null===(i=t.onDragStart)||void 0===i||i.call(t,n),n.cancel||e.onDragStart(n))}}createDragMoveHandler(e,t){return n=>{var i;this.appointmentInfo?this.scheduler._isAppointmentBeingUpdated(this.appointmentInfo.appointment)?n.cancel=!0:(null===(i=t.onDragMove)||void 0===i||i.call(t,n),n.cancel||e.onDragMove(n)):n.cancel=!0}}createDragEndHandler(e,t){return n=>{var i;if(!this.appointmentInfo)return void(n.cancel=!0);const a=this.appointments.invoke("getUpdatedData",n.itemData);var r;(this.appointmentInfo=null,n.toItemData=(0,T.X)({},n.itemData,a),null===(i=t.onDragEnd)||void 0===i||i.call(t,n),n.cancel)||(e.onDragEnd(n),n.fromComponent!==n.toComponent&&(null===(r=t.onRemove)||void 0===r||r.call(t,n)));if(!0===n.cancel&&e.onDragCancel(n),!0!==n.cancel&&cg(n.toComponent)){const e=n.toComponent._getDragBehavior();e.dragBetweenComponentsPromise=new S.cY}}}createDropHandler(e){return t=>{const n=this.appointments.invoke("getUpdatedData",t.itemData);var i;(t.itemData=(0,T.X)({},t.itemData,n),t.fromComponent!==t.toComponent)&&(null===(i=e.onAdd)||void 0===i||i.call(e,t));this.dragBetweenComponentsPromise&&this.dragBetweenComponentsPromise.resolve()}}addTo(e,t){const n=this.scheduler.option("appointmentDragging")||{},i=(0,T.X)({component:this.scheduler,contentTemplate:null,filter:`.${pg}`,immediate:!1,onDragStart:this.onDragStart.bind(this),onDragMove:this.onDragMove.bind(this),onDragEnd:this.onDragEnd.bind(this),onDragCancel:this.onDragCancel.bind(this)},t);this.appointments._createComponent(e,dg,(0,T.X)({},i,n,{onDragStart:this.createDragStartHandler(i,n),onDragMove:this.createDragMoveHandler(i,n),onDragEnd:this.createDragEndHandler(i,n),onDrop:this.createDropHandler(n),onCancelByEsc:!0}))}updateDragSource(e,t){const{appointmentInfo:n}=this;if(n||e){const i=e||n.appointment,a=t||n.settings;this.appointments._setDragSourceAppointment(i,a)}}removeDroppableClasses(){this.appointments._removeDragSourceClassFromDraggedAppointment(),this.workspace.removeDroppableCellClass()}}const mg="dx-scheduler-date-time-shader";class gg{constructor(e){this._workSpace=e,this._$container=this._workSpace._dateTableScrollable.$content()}render(){this.initShaderElements(),this.renderShader(),this._shader.forEach(e=>{this._$container.append(e)})}initShaderElements(){this._$shader=this.createShader(),this._shader=[],this._shader.push(this._$shader)}renderShader(){}createShader(){return(0,f.A)("<div>").addClass(mg)}clean(){this._$container&&this._$container.find(`.${mg}`).remove()}}var fg=gg;const yg="dx-scheduler-date-time-shader-all-day",Dg="dx-scheduler-date-time-shader-top",Cg="dx-scheduler-date-time-shader-bottom";class vg extends fg{renderShader(){let e=this._getShaderHeight();const t=this._getShaderMaxHeight(),n=e>t;e>t&&(e=t),(0,yt.k$)(this._$shader,e);const i=this._workSpace._getGroupCount()||1;this._workSpace.isGroupedByDate()?this._renderGroupedByDateShaderParts(i,e,t,n):this._renderShaderParts(i,e,t,n)}_renderShaderParts(e,t,n,i){for(let a=0;a<e;a++){const e=this._getShaderWidth(a);this._renderTopShader(this._$shader,t,e,a),!i&&this._renderBottomShader(this._$shader,n,t,e,a),this._renderAllDayShader(e,a)}}_renderGroupedByDateShaderParts(e,t,n,i){const a=this._getShaderWidth(0);let r=a-this._workSpace.getCellWidth();t<0&&(t=0,r=a),this._renderTopShader(this._$shader,t,a*e,0),!i&&this._renderBottomShader(this._$shader,n,t,r*e+this._workSpace.getCellWidth(),0),this._renderAllDayShader(a*e,0)}_renderTopShader(e,t,n,i){this._$topShader=(0,f.A)("<div>").addClass(Dg),n&&(0,yt.zj)(this._$topShader,n),t&&(0,yt.k$)(this._$topShader,t),this._$topShader.css("marginTop",this._getShaderTopOffset(i)),this._$topShader.css("left",this._getShaderOffset(i,n)),e.append(this._$topShader)}_renderBottomShader(e,t,n,i,a){this._$bottomShader=(0,f.A)("<div>").addClass(Cg);const r=n<0?i:i-this._workSpace.getCellWidth(),o=n<0?t:t-n;(0,yt.zj)(this._$bottomShader,r),(0,yt.k$)(this._$bottomShader,o),this._$bottomShader.css("left",this._getShaderOffset(a,i-this._workSpace.getCellWidth())),e.append(this._$bottomShader)}_renderAllDayShader(e,t){this._workSpace.option("showAllDayPanel")&&(this._$allDayIndicator=(0,f.A)("<div>").addClass(yg),(0,yt.k$)(this._$allDayIndicator,this._workSpace.getAllDayHeight()),(0,yt.zj)(this._$allDayIndicator,e),this._$allDayIndicator.css("left",this._getShaderOffset(t,e)),this._workSpace._$allDayPanel.prepend(this._$allDayIndicator))}_getShaderOffset(e,t){return this._workSpace.getGroupedStrategy().getShaderOffset(e,t)}_getShaderTopOffset(e){return this._workSpace.getGroupedStrategy().getShaderTopOffset(e)}_getShaderHeight(){return this._workSpace.getGroupedStrategy().getShaderHeight()}_getShaderMaxHeight(){return this._workSpace.getGroupedStrategy().getShaderMaxHeight()}_getShaderWidth(e){return this._workSpace.getGroupedStrategy().getShaderWidth(e)}clean(){super.clean(),this._workSpace&&this._workSpace._$allDayPanel&&this._workSpace._$allDayPanel.find(`.${yg}`).remove()}}var _g=vg;const wg=e=>{const{dateTableCellsMeta:t}=e,n=null===t||void 0===t?void 0:t.length;if(!n)return{width:0,height:0};const i=n>1?1:0,a=t[i][0];return{width:a.width,height:a.height}},bg=(e,t,n,i)=>{const{dateTableCellsMeta:a}=i,r=a[0];if(!r)return 0;const{columnIndex:o}=t.getLastGroupCellPosition(e),s=r[o];return s?n?s.left:s.left+s.width:0},Sg=e=>wg(e).height,Tg=e=>wg(e).width,xg=(e,t,n)=>{if(!e)return 0;if(t){const{dateTableCellsMeta:e}=n,t=null===e||void 0===e?void 0:e.length;return t?e[0][0].height:0}const{allDayPanelCellsMeta:i}=n;return null!==i&&void 0!==i&&i.length?i[0].height:0},Ag=(e,t,n,i)=>{const a=e||0;return bg(a,t,n,i)};class Eg{get viewDataProvider(){return this.options.viewDataProvider}get rtlEnabled(){return this.options.rtlEnabled}get isGroupedByDate(){return this.options.isGroupedByDate}get groupCount(){return this.options.groupCount}get DOMMetaData(){return this.options.getDOMMetaDataCallback()}constructor(e){this.options=e,this.groupStrategy=this.options.isVerticalGrouping?new kg(this.options):new Og(this.options)}getHorizontalMax(e){const t=e=>Ag(e,this.viewDataProvider,this.rtlEnabled,this.DOMMetaData);if(this.isGroupedByDate){const n=this.viewDataProvider.getViewPortGroupCount();return Math.max(t(e),t(n-1))}return t(e)}getResizableStep(){const e=Tg(this.DOMMetaData);return this.isGroupedByDate?this.groupCount*e:e}getVerticalMax(e){return this.groupStrategy.getVerticalMax(e)}getOffsetByAllDayPanel(e){return this.groupStrategy.getOffsetByAllDayPanel(e)}getGroupTop(e){return this.groupStrategy.getGroupTop(e)}}class kg{constructor(e){this.options=e}get viewDataProvider(){return this.options.viewDataProvider}get isGroupedByDate(){return this.options.isGroupedByDate}get rtlEnabled(){return this.options.rtlEnabled}get groupCount(){return this.options.groupCount}get DOMMetaData(){return this.options.getDOMMetaDataCallback()}getOffsetByAllDayPanel(e){let{groupIndex:t,supportAllDayRow:n,showAllDayPanel:i}=e,a=0;if(n&&i){const e=xg(i,!0,this.DOMMetaData);a=e*(t+1)}return a}getVerticalMax(e){let t=this._getMaxAllowedVerticalPosition(Object.assign({},e,{viewDataProvider:this.viewDataProvider,rtlEnabled:this.rtlEnabled,DOMMetaData:this.DOMMetaData}));return t+=this.getOffsetByAllDayPanel(e),t}getGroupTop(e){let{groupIndex:t,showAllDayPanel:n,isGroupedAllDayPanel:i}=e;const a=this.viewDataProvider.getRowCountInGroup(t),r=this._getMaxAllowedVerticalPosition({groupIndex:t,viewDataProvider:this.viewDataProvider,showAllDayPanel:n,isGroupedAllDayPanel:i,isVerticalGrouping:!0,DOMMetaData:this.DOMMetaData});return r-Sg(this.DOMMetaData)*a}_getAllDayHeight(e){return xg(e,!0,this.DOMMetaData)}_getMaxAllowedVerticalPosition(e){let{groupIndex:t,showAllDayPanel:n,isGroupedAllDayPanel:i}=e;const{rowIndex:a}=this.viewDataProvider.getLastGroupCellPosition(t),{dateTableCellsMeta:r}=this.DOMMetaData,o=r[a];if(!o)return 0;let s=o[0].top+o[0].height;return i&&(s-=(t+1)*this._getAllDayHeight(n)),s}}class Og extends kg{getOffsetByAllDayPanel(){return 0}getVerticalMax(e){const{isVirtualScrolling:t,groupIndex:n}=e,i=t?n:0;return this._getMaxAllowedVerticalPosition(Object.assign({},e,{groupIndex:i}))}getGroupTop(){return 0}_getAllDayHeight(e){return xg(e,!1,this.DOMMetaData)}}class Ig{handleArrowClick(e){const{key:t,focusedCellPosition:n,edgeIndices:i,getCellDataByPosition:a,isAllDayPanelCell:r}=e;let o;switch(t){case"down":o=this.getCellFromNextRowPosition(n,"next",i);break;case"up":o=this.getCellFromNextRowPosition(n,"prev",i);break;case"left":o=this.getCellFromNextColumnPosition(Object.assign({},e,{direction:"prev"}));break;case"right":o=this.getCellFromNextColumnPosition(Object.assign({},e,{direction:"next"}))}const s=a(o.rowIndex,o.columnIndex,r);return this.moveToCell(Object.assign({},e,{currentCellData:s}))}getCellFromNextRowPosition(e,t,n){const{columnIndex:i,rowIndex:a}=e,r="next"===t?1:-1,o=a+r,s=o>=0&&o<=n.lastRowIndex?o:a;return{columnIndex:i,rowIndex:s}}getCellFromNextColumnPosition(e){const{focusedCellPosition:t,direction:n,edgeIndices:i,isRTL:a,isGroupedByDate:r,groupCount:o,isMultiSelection:s,viewType:l}=e,{columnIndex:u,rowIndex:d}=t,{firstColumnIndex:c,lastColumnIndex:p,firstRowIndex:h,lastRowIndex:m}=i,g=r&&s?o:1,f=a?-1:1,y="next"===n?f*g:-1*f*g,D=u+y,C=D>=c&&D<=p;return C?{columnIndex:D,rowIndex:d}:co(l)?t:this._processEdgeCell({nextColumnIndex:D,rowIndex:d,columnIndex:u,firstColumnIndex:c,lastColumnIndex:p,firstRowIndex:h,lastRowIndex:m,step:g})}_processEdgeCell(e){const{nextColumnIndex:t,rowIndex:n,columnIndex:i,firstColumnIndex:a,lastColumnIndex:r,firstRowIndex:o,lastRowIndex:s,step:l}=e;let u=t,d=n;const c=t<a,p=t>r;if(c){const e=r-(l-i%l-1),t=n-1,a=t>=o;d=a?t:n,u=a?e:i}if(p){const e=a+i%l,t=n+1,r=t<=s;d=r?t:n,u=r?e:i}return{columnIndex:u,rowIndex:d}}moveToCell(e){const{isMultiSelection:t,isMultiSelectionAllowed:n,focusedCellData:i,currentCellData:a}=e,r=t&&n,o=r?this._getNextCellData(a,i):a;return o}_getNextCellData(e,t,n){if(n)return t;const i=this._isValidNextFocusedCell(e,t);return i?e:t}_isValidNextFocusedCell(e,t){if(!t)return!0;const{groupIndex:n,allDay:i}=t,{groupIndex:a,allDay:r}=e;return n===a&&i===r}}class Rg{constructor(e){this.viewDataProvider=e,this._focusedCell=null,this._selectedCells=null,this._firstSelectedCell=null,this._prevFocusedCell=null,this._prevSelectedCells=null}getFocusedCell(){const e=this._focusedCell;if(!e)return;const{groupIndex:t,startDate:n,allDay:i}=e,a={groupIndex:t,startDate:n,isAllDay:i,index:e.index},r=this.viewDataProvider.findCellPositionInMap(a);return{coordinates:r,cellData:e}}setFocusedCell(e,t,n){if(e>=0){const i=this.viewDataProvider.getCellData(e,t,n);this._focusedCell=i}}setSelectedCells(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const{viewDataProvider:n}=this,{rowIndex:i,columnIndex:a,allDay:r}=e;if(i<0)return;const o=t?n.getCellData(t.rowIndex,t.columnIndex,t.allDay):this._firstSelectedCell,s=n.getCellData(i,a,r);this._firstSelectedCell=o,this._selectedCells=this.viewDataProvider.getCellsBetween(o,s)}setSelectedCellsByData(e){this._selectedCells=e}getSelectedCells(){return this._selectedCells}releaseSelectedAndFocusedCells(){this.releaseSelectedCells(),this.releaseFocusedCell()}releaseSelectedCells(){this._prevSelectedCells=this._selectedCells,this._prevFirstSelectedCell=this._firstSelectedCell,this._selectedCells=null,this._firstSelectedCell=null}releaseFocusedCell(){this._prevFocusedCell=this._focusedCell,this._focusedCell=null}restoreSelectedAndFocusedCells(){this._selectedCells=this._selectedCells||this._prevSelectedCells,this._focusedCell=this._focusedCell||this._prevFocusedCell,this._firstSelectedCell=this._firstSelectedCell||this._prevFirstSelectedCell,this._prevSelectedCells=null,this._prevFirstSelectedCell=null,this._prevFocusedCell=null}clearSelectedAndFocusedCells(){this._prevSelectedCells=null,this._selectedCells=null,this._prevFocusedCell=null,this._focusedCell=null}}const Mg=(0,ft.b4)("scroll","dxSchedulerVirtualScrolling"),Vg={vertical:"vertical",horizontal:"horizontal",both:"both",none:"none"},Pg=Vg.both;class $g{constructor(e){this.options=e,e&&(this._rowHeight=this.getCellHeight(),this._cellWidth=this.getCellWidth(),this._createVirtualScrollingBase())}get isRTL(){return this.options.isRTL()}get verticalVirtualScrolling(){return this._verticalVirtualScrolling}set verticalVirtualScrolling(e){this._verticalVirtualScrolling=e}get horizontalVirtualScrolling(){return this._horizontalVirtualScrolling}set horizontalVirtualScrolling(e){this._horizontalVirtualScrolling=e}get document(){return on.A.getDocument()}get height(){return this.options.getSchedulerHeight()}get width(){return this.options.getSchedulerWidth()}get rowHeight(){return this._rowHeight}set rowHeight(e){this._rowHeight=e}get outlineCount(){return this.options.getScrolling().outlineCount}get cellWidth(){return this._cellWidth}set cellWidth(e){this._cellWidth=e}get viewportWidth(){const e=this.width&&this.options.getViewWidth();return e>0?e:this.options.getWindowWidth()}get viewportHeight(){const e=this.height&&this.options.getViewHeight();return e>0?e:this.options.getWindowHeight()}get cellCountInsideTopVirtualRow(){var e;return(null===(e=this.verticalScrollingState)||void 0===e?void 0:e.virtualItemCountBefore)||0}get cellCountInsideLeftVirtualCell(){var e;return(null===(e=this.horizontalScrollingState)||void 0===e?void 0:e.virtualItemCountBefore)||0}get cellCountInsideRightVirtualCell(){var e;return(null===(e=this.horizontalScrollingState)||void 0===e?void 0:e.virtualItemCountAfter)||0}get topVirtualRowsCount(){return this.cellCountInsideTopVirtualRow>0?1:0}get leftVirtualCellsCount(){const e=this.isRTL?this.cellCountInsideRightVirtualCell:this.cellCountInsideLeftVirtualCell;return Math.ceil(e/1e3)}get virtualRowOffset(){var e;return(null===(e=this.verticalScrollingState)||void 0===e?void 0:e.virtualItemSizeBefore)||0}get virtualCellOffset(){var e;return(null===(e=this.horizontalScrollingState)||void 0===e?void 0:e.virtualItemSizeBefore)||0}get scrollingState(){var e,t;return{vertical:null===(e=this.verticalVirtualScrolling)||void 0===e?void 0:e.state,horizontal:null===(t=this.horizontalVirtualScrolling)||void 0===t?void 0:t.state}}get verticalScrollingState(){return this.scrollingState.vertical}get horizontalScrollingState(){return this.scrollingState.horizontal}get scrollingOrientation(){const e=this.options.getScrolling();return"standard"===e.mode?Vg.none:e.orientation||Pg}get verticalScrollingAllowed(){return this.scrollingOrientation===Vg.vertical||this.scrollingOrientation===Vg.both}get horizontalScrollingAllowed(){return this.scrollingOrientation===Vg.horizontal||this.scrollingOrientation===Vg.both}setViewOptions(e){this.options=e,this.verticalVirtualScrolling&&(this.verticalVirtualScrolling.options=e,this.verticalVirtualScrolling.itemSize=this.rowHeight,this.verticalVirtualScrolling.viewportSize=this.viewportHeight),this.horizontalVirtualScrolling&&(this.horizontalVirtualScrolling.options=e,this.verticalVirtualScrolling.itemSize=this.cellWidth,this.verticalVirtualScrolling.viewportSize=this.viewportWidth)}getRenderState(){var e,t;const n=(null===(e=this.verticalVirtualScrolling)||void 0===e?void 0:e.getRenderState())||{},i=(null===(t=this.horizontalVirtualScrolling)||void 0===t?void 0:t.getRenderState())||{};return Object.assign({},n,i)}getCellHeight(){const e=this.options.getCellHeight(),t=e>0?e:50;return Math.floor(t)}getCellWidth(){let e=this.options.getCellWidth();const t=this.options.getCellMinWidth();(!e||e<t)&&(e=t);const n=e>0?e:1;return Math.floor(n)}calculateCoordinatesByDataAndPosition(e,t,n,i,a){const{rowIndex:r,columnIndex:o}=t,{startDate:s,endDate:l,allDay:u}=e,d=n.getTime(),c=s.getTime(),p=l.getTime(),h=u||!i?0:(d-c)/(p-c),m=this.getCellWidth(),g=this.getCellHeight(),f=a?(r+h)*g:r*g;let y=a?o*m:(o+h)*m;return this.isRTL&&(y=this.options.getScrollableOuterWidth()-y),{top:f,left:y}}dispose(){this._onScrollHandler&&mt.A.off(this.document,Mg,this._onScrollHandler)}createVirtualScrolling(){const e=Boolean(this.verticalVirtualScrolling),t=Boolean(this.horizontalVirtualScrolling);this.verticalScrollingAllowed===e&&this.horizontalScrollingAllowed===t||(this._rowHeight=this.getCellHeight(),this._cellWidth=this.getCellWidth(),this._createVirtualScrollingBase())}_createVirtualScrollingBase(){this.verticalScrollingAllowed&&(this.verticalVirtualScrolling=new Bg(Object.assign({},this.options,{viewportHeight:this.viewportHeight,rowHeight:this.rowHeight,outlineCount:this.outlineCount}))),this.horizontalScrollingAllowed&&(this.horizontalVirtualScrolling=new Hg(Object.assign({},this.options,{viewportWidth:this.viewportWidth,cellWidth:this.cellWidth,outlineCount:this.outlineCount})))}isAttachWindowScrollEvent(){return(this.horizontalScrollingAllowed||this.verticalScrollingAllowed)&&!this.height}attachScrollableEvents(){this.isAttachWindowScrollEvent()&&this._attachWindowScroll()}_attachWindowScroll(){const e=(0,E.zk)();this._onScrollHandler=this.options.createAction(()=>{const{scrollX:t,scrollY:n}=e;(t>=10||n>=10)&&this.handleOnScrollEvent({left:t,top:n})}),mt.A.on(this.document,Mg,this._onScrollHandler)}handleOnScrollEvent(e){if(e){var t,n;const{left:r,top:o}=e,s=(0,A.O9)(o)&&(null===(t=this.verticalVirtualScrolling)||void 0===t?void 0:t.updateState(o)),l=(0,A.O9)(r)&&(null===(n=this.horizontalVirtualScrolling)||void 0===n?void 0:n.updateState(r));var i,a;if(s||l)null===(i=(a=this.options).updateRender)||void 0===i||i.call(a)}}updateDimensions(e){const t=this.getCellHeight(),n=this.verticalScrollingAllowed&&t!==this.rowHeight;(n||e)&&this.verticalVirtualScrolling&&(this.rowHeight=t,this.verticalVirtualScrolling.viewportSize=this.viewportHeight,this.verticalVirtualScrolling.reinitState(t,e));const i=this.getCellWidth(),a=this.horizontalScrollingAllowed&&i!==this.cellWidth;var r,o;((a||e)&&this.horizontalVirtualScrolling&&(this.cellWidth=i,this.horizontalVirtualScrolling.viewportSize=this.viewportWidth,this.horizontalVirtualScrolling.reinitState(i,e)),n||a)&&(null===(r=(o=this.options).updateGrid)||void 0===r||r.call(o))}}class Wg{constructor(e){this.options=e,this._state=this.defaultState,this.viewportSize=this.options.viewportSize,this._itemSize=this.options.itemSize,this._position=-1,this._itemSizeChanged=!1,this.updateState(0)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSizeChanged=this._itemSize!==e,this._itemSize=e}get state(){return this._state}set state(e){this._state=e}get startIndex(){return this.state.startIndex}get pageSize(){return Math.ceil(this.viewportSize/this.itemSize)}get outlineCount(){return(0,A.O9)(this.options.outlineCount)?this.options.outlineCount:Math.floor(this.pageSize/2)}get groupCount(){return this.options.getGroupCount()}get isVerticalGrouping(){return this.options.isVerticalGrouping()}get defaultState(){return{prevPosition:0,startIndex:-1,itemCount:0,virtualItemCountBefore:0,virtualItemCountAfter:0,outlineCountBefore:0,outlineCountAfter:0,virtualItemSizeBefore:0,virtualItemSizeAfter:0,outlineSizeBefore:0,outlineSizeAfter:0}}get maxScrollPosition(){return this.getTotalItemCount()*this.itemSize-this.viewportSize}get position(){return this._position}set position(e){this._position=e}needUpdateState(e){const{prevPosition:t,startIndex:n}=this.state,i=n<0;if(i)return!0;let a=!1;if(this._validateAndSavePosition(e)){if(0===e||e===this.maxScrollPosition)return!0;const n=t,i=Math.floor(n/this.itemSize),r=Math.floor(e/this.itemSize);a=Math.abs(i-r)>=this.outlineCount}return a}_validateAndSavePosition(e){if(!(0,A.O9)(e))return!1;const t=this.position!==e;return this.position=e,t}_correctPosition(e){return e>=0?Math.min(e,this.maxScrollPosition):-1}updateState(e,t){if(e=this._correctPosition(e),!this.needUpdateState(e)&&!t)return!1;const n=this._calcItemInfoBefore(e),i=this._calcItemDeltaBefore(n),{outlineCountAfter:a,virtualItemCountAfter:r,itemCountWithAfter:o}=this._calcItemInfoAfter(i),{virtualItemCountBefore:s,outlineCountBefore:l}=n,u=l+o+a,d=Math.floor(e/this.itemSize);return this.state.prevPosition=d*this.itemSize,this.state.startIndex=d-l,this.state.virtualItemCountBefore=s,this.state.outlineCountBefore=l,this.state.itemCount=u,this.state.outlineCountAfter=a,this.state.virtualItemCountAfter=r,this._updateStateCore(),!0}reinitState(e,t){const{position:n}=this;this.itemSize=e,this.updateState(0,t),n>0&&this.updateState(n,t)}_calcItemInfoBefore(e){let t=Math.floor(e/this.itemSize);const n=Math.min(t,this.outlineCount);return t-=n,{virtualItemCountBefore:t,outlineCountBefore:n}}_calcItemDeltaBefore(e){const{virtualItemCountBefore:t,outlineCountBefore:n}=e,i=this.getTotalItemCount();return i-t-n}getTotalItemCount(){throw"getTotalItemCount method should be implemented"}getRenderState(){throw"getRenderState method should be implemented"}_calcItemInfoAfter(e){const t=e>=this.pageSize?this.pageSize:e;let n=e-t;const i=n>0?Math.min(n,this.outlineCount):0;return n>0&&(n-=i),{virtualItemCountAfter:n,outlineCountAfter:i,itemCountWithAfter:t}}_updateStateCore(){const{state:e}=this,{virtualItemCountBefore:t}=e,{virtualItemCountAfter:n}=e,{outlineCountBefore:i}=e,{outlineCountAfter:a}=e,r=e.virtualItemSizeBefore,o=e.virtualItemSizeAfter,s=e.outlineSizeBefore,l=e.outlineSizeAfter,u=this.itemSize*t,d=this.itemSize*n,c=this.itemSize*i,p=this.itemSize*a,h=r+s,m=u+c,g=o+l,f=d+p,y=h<m,D=g<f,C=this._itemSizeChanged||y||D;C&&this._updateStateVirtualItems(u,d)}_updateStateVirtualItems(e,t){const{state:n}=this;n.virtualItemSizeBefore=e,n.virtualItemSizeAfter=t}}class Bg extends Wg{constructor(e){super(Object.assign({},e,{itemSize:e.rowHeight,viewportSize:e.viewportHeight}))}get prevTopPosition(){return this.state.prevPosition}get rowCount(){return this.state.itemCount}get topVirtualRowCount(){return this.state.virtualItemCountBefore}get bottomVirtualRowCount(){return this.state.virtualItemCountAfter}getTotalItemCount(){return this.options.getTotalRowCount(this.groupCount,this.isVerticalGrouping)}getRenderState(){return{topVirtualRowHeight:this.state.virtualItemSizeBefore,bottomVirtualRowHeight:this.state.virtualItemSizeAfter,startRowIndex:this.state.startIndex,rowCount:this.state.itemCount,startIndex:this.state.startIndex}}}class Hg extends Wg{constructor(e){super(Object.assign({},e,{itemSize:e.cellWidth,viewportSize:e.viewportWidth}))}get isRTL(){return this.options.isRTL()}getTotalItemCount(){return this.options.getTotalCellCount(this.groupCount,this.isVerticalGrouping)}getRenderState(){return{leftVirtualCellWidth:this.state.virtualItemSizeBefore,rightVirtualCellWidth:this.state.virtualItemSizeAfter,startCellIndex:this.state.startIndex,cellCount:this.state.itemCount,cellWidth:this.itemSize}}_updateStateVirtualItems(e,t){if(this.isRTL){const{state:n}=this;n.virtualItemSizeAfter=e,n.virtualItemSizeBefore=t,n.startIndex=this.getTotalItemCount()-this.startIndex-this.state.itemCount}else super._updateStateVirtualItems(e,t)}}class Gg{constructor(e){this._workspace=e,this._renderAppointmentTimeoutID=null}getRenderTimeout(){return 15}get workspace(){return this._workspace}updateRender(){this._renderGrid(),this._renderAppointments()}_renderGrid(){this.workspace.renderWorkSpace(!1)}_renderAppointments(){const e=this.getRenderTimeout();e>=0?(clearTimeout(this._renderAppointmentTimeoutID),this._renderAppointmentTimeoutID=setTimeout(()=>this.workspace.updateAppointments(),e)):this.workspace.updateAppointments()}}const Ng=1;class Fg{constructor(e){this._workSpace=e}prepareCellIndexes(e,t,n){const i=this._workSpace.isGroupedByDate();return i?{rowIndex:e.rowIndex,columnIndex:e.columnIndex*this._workSpace._getGroupCount()+t}:{rowIndex:e.rowIndex,columnIndex:e.columnIndex+t*this._workSpace._getCellCount()}}getGroupIndex(e,t){const n=this._workSpace.isGroupedByDate(),i=this._workSpace._getGroupCount();return n?t%i:Math.floor(t/this._workSpace._getCellCount())}calculateHeaderCellRepeatCount(){return this._workSpace._getGroupCount()||1}insertAllDayRowsIntoDateTable(){return!1}getTotalCellCount(e){return e=e||1,this._workSpace._getCellCount()*e}getTotalRowCount(){return this._workSpace._getRowCount()}calculateTimeCellRepeatCount(){return 1}getWorkSpaceMinWidth(){const e=(0,x.N)(this._workSpace.$element().get(0)).width;return e-this._workSpace.getTimePanelWidth()-2*Ng}getAllDayOffset(){return this._workSpace.getAllDayHeight()}getGroupCountClass(e){}getLeftOffset(){return this._workSpace.getTimePanelWidth()}_createGroupBoundOffset(e,t,n){const i=n/2,a=e?e.offset().left-i:0,r=t?t.offset().left+n+i:0;return{left:a,right:r,top:0,bottom:0}}_getGroupedByDateBoundOffset(e,t){const n=e.length-1,i=e.eq(0),a=e.eq(n);return this._createGroupBoundOffset(i,a,t)}getGroupBoundsOffset(e,t,n,i,a){if(this._workSpace.isGroupedByDate())return this._getGroupedByDateBoundOffset(t,n);let r,o;const s=this._workSpace.getCellIndexByCoordinates(i),l=i.groupIndex||Math.floor(s/e),u=a.dateTableGroupedMap[l];if(u){const e=u[0].length,n=u[0][0].position,i=u[0][e-1].position;r=t.eq(n.columnIndex),o=t.eq(i.columnIndex)}return this._createGroupBoundOffset(r,o,n)}shiftIndicator(e,t,n,i){const a=this._getIndicatorOffset(i),r=n?n-a:a;e.css("left",r),e.css("top",t)}_getIndicatorOffset(e){const t=this._workSpace.isGroupedByDate();return t?this._calculateGroupByDateOffset(e):this._calculateOffset(e)}_calculateOffset(e){const t=this._workSpace.getIndicatorOffset(e),n=this._workSpace._getCellCount()*this._workSpace.getRoundedCellWidth(e-1,0)*e;return t+n}_calculateGroupByDateOffset(e){return this._workSpace.getIndicatorOffset(0)*this._workSpace._getGroupCount()+this._workSpace.getRoundedCellWidth(e-1,0)*e}getShaderOffset(e,t){const n=this._workSpace._getCellCount()*this._workSpace.getRoundedCellWidth(e-1)*e;return this._workSpace.option("rtlEnabled")?(0,x.N)(this._workSpace._dateTableScrollable.$content().get(0)).width-n-this._workSpace.getTimePanelWidth()-t:n}getShaderTopOffset(e){return-this.getShaderMaxHeight()*(e>0?1:0)}getShaderHeight(){const e=this._workSpace.getIndicationHeight();return e}getShaderMaxHeight(){return(0,x.N)(this._workSpace._dateTableScrollable.$content().get(0)).height}getShaderWidth(e){return this._workSpace.getIndicationWidth(e)}getScrollableScrollTop(e){return e?0:this._workSpace.getScrollable().scrollTop()}addAdditionalGroupCellClasses(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e=this._addLastGroupCellClass(e,t,a),this._addFirstGroupCellClass(e,t,a)}_addLastGroupCellClass(e,t,n){if(n)return`${e} ${Wn}`;const i=this._workSpace.isGroupedByDate();if(i){if(t%this._workSpace._getGroupCount()===0)return`${e} ${Wn}`}else if(t%this._workSpace._getCellCount()===0)return`${e} ${Wn}`;return e}_addFirstGroupCellClass(e,t,n){if(n)return`${e} ${Bn}`;const i=this._workSpace.isGroupedByDate();if(i){if((t-1)%this._workSpace._getGroupCount()===0)return`${e} ${Bn}`}else if((t-1)%this._workSpace._getCellCount()===0)return`${e} ${Bn}`;return e}}var Lg=Fg;class zg{constructor(e){this._workSpace=e,this.cache=new Pc.l}prepareCellIndexes(e,t,n){let i=e.rowIndex+t*this._workSpace._getRowCount();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(i+=t,n||(i+=1)),{rowIndex:i,columnIndex:e.columnIndex}}getGroupIndex(e){return Math.floor(e/this._workSpace._getRowCount())}calculateHeaderCellRepeatCount(){return 1}insertAllDayRowsIntoDateTable(){return this._workSpace.option("showAllDayPanel")}getTotalCellCount(){return this._workSpace._getCellCount()}getTotalRowCount(){return this._workSpace._getRowCount()*this._workSpace._getGroupCount()}calculateTimeCellRepeatCount(){return this._workSpace._getGroupCount()||1}getWorkSpaceMinWidth(){let e=this._workSpace._getWorkSpaceWidth();const t=(0,x.N)(this._workSpace.$element().get(0)).width,n=t-this._workSpace.getTimePanelWidth()-this._workSpace.getGroupTableWidth()-2*Ng;return e<n&&(e=n),e}getAllDayOffset(){return 0}getGroupCountClass(e){return Qr(e)}getLeftOffset(){return this._workSpace.getTimePanelWidth()+this._workSpace.getGroupTableWidth()}getGroupBoundsOffset(e,t){let[n,i]=t;return this.cache.memo(`groupBoundsOffset${e}`,()=>{const t=this._workSpace.option("startDayHour"),a=this._workSpace.option("endDayHour"),r=this._workSpace.option("hoursInterval"),o=eo(t,a)/r*this._workSpace.getCellHeight(),s=this.getScrollableScrollTop(),l=(0,x.N)(this._workSpace._$headerPanelContainer.get(0)).height;let u=e*o+l+this._workSpace.option("getHeaderHeight")()-s;this._workSpace.option("showAllDayPanel")&&this._workSpace.supportAllDayRow()&&(u+=this._workSpace.getCellHeight()*(e+1));const d=u+o,{left:c}=n.getBoundingClientRect(),{right:p}=i.getBoundingClientRect();return this._groupBoundsOffset={left:c,right:p,top:u,bottom:d},this._groupBoundsOffset})}shiftIndicator(e,t,n,i){const a=this._workSpace.getIndicatorOffset(0),r=this._workSpace.option("crossScrollingEnabled")?0:this._workSpace.getGroupTableWidth(),o=n?n-a:a;let s=this._workSpace._getRowCount()*this._workSpace.getCellHeight()*i;this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(s+=this._workSpace.getAllDayHeight()*(i+1)),e.css("left",o+r),e.css("top",t+s)}getShaderOffset(e,t){const n=this._workSpace.option("crossScrollingEnabled")?0:this._workSpace.getGroupTableWidth();return this._workSpace.option("rtlEnabled")?(0,x.N)(this._$container.get(0)).width-n-this._workSpace.getWorkSpaceLeftOffset()-t:n}getShaderTopOffset(e){return 0}getShaderHeight(){let e=this._workSpace.getIndicationHeight();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(e+=this._workSpace.getCellHeight()),e}getShaderMaxHeight(){let e=this._workSpace._getRowCount()*this._workSpace.getCellHeight();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(e+=this._workSpace.getCellHeight()),e}getShaderWidth(){return this._workSpace.getIndicationWidth(0)}getScrollableScrollTop(){return this._workSpace.getScrollable().scrollTop()}addAdditionalGroupCellClasses(e,t,n,i){return e=this._addLastGroupCellClass(e,n+1),this._addFirstGroupCellClass(e,n+1)}_addLastGroupCellClass(e,t){return t%this._workSpace._getRowCount()===0?`${e} ${Wn}`:e}_addFirstGroupCellClass(e,t){return(t-1)%this._workSpace._getRowCount()===0?`${e} ${Bn}`:e}}var Ug=zg;const jg=["startDate","endDate","isFirstGroupCell","isLastGroupCell"];class Yg{constructor(e){this._viewDataGenerator=e}getCompleteDateHeaderMap(e,t){const{isGenerateWeekDaysHeaderData:n}=e,i=[];if(n){const n=this._generateWeekDaysHeaderRowMap(e,t);i.push(n)}const a=this._generateHeaderDateRow(e,t);return i.push(a),i}_generateWeekDaysHeaderRowMap(e,t){const{isGroupedByDate:n,getResourceManager:i,groupOrientation:a,startDayHour:r,endDayHour:o,hoursInterval:s,isHorizontalGrouping:l,intervalCount:u,viewOffset:d}=e,c=i(),p=c.groupCount(),h=this._viewDataGenerator.getCellCountInDay(r,o,s),m=so(p,a),g=t[0][0].allDay?1:0,f=n?m*h:h,y=l&&!n?p:1,D=this._viewDataGenerator.daysInInterval*u,C=D*y,v=[];for(let _=0;_<C;_+=1){const e=t[g][_*f],n=Y.A.addOffsetsWithoutDST(e.startDate,-d);v.push(Object.assign({},e,{colSpan:f,text:gs(n),isFirstGroupCell:!1,isLastGroupCell:!1}))}return v}_generateHeaderDateRow(e,t){const{today:n,isGroupedByDate:i,groupOrientation:a,getResourceManager:r,headerCellTextFormat:o,getDateForHeaderText:s,interval:l,startViewDate:u,startDayHour:d,endDayHour:c,hoursInterval:p,intervalCount:h,currentDate:m,viewType:g,viewOffset:f}=e,y=so(r().groupCount(),a),D=t[0][0].allDay?1:0,C=i?y:1,v="vertical"===a,_=this._viewDataGenerator.getCellCount({intervalCount:h,currentDate:m,viewType:g,hoursInterval:p,startDayHour:d,endDayHour:c}),b=this._viewDataGenerator.getCellCountInDay(d,c,p),S=i?t[D].filter((e,t)=>t%y===0):t[D],T=!uo(g)||g===Lr.TIMELINE_MONTH;return S.map((e,t)=>{let{startDate:a,isFirstGroupCell:r,isLastGroupCell:c}=e,p=(0,F.A)(e,jg);const h=Y.A.addOffsetsWithoutDST(a,-f),m=T?h:a,g=ro(t%_,m,o,s,{interval:l,startViewDate:u,startDayHour:d,cellCountInDay:b,viewOffset:f});return Object.assign({},p,{startDate:a,text:g,today:w.A.sameDate(h,n),colSpan:C,isFirstGroupCell:i||r&&!v,isLastGroupCell:i||c&&!v})})}generateDateHeaderData(e,t,n){const{isGenerateWeekDaysHeaderData:i,cellWidth:a,isProvideVirtualCellsWidth:r,startDayHour:o,endDayHour:s,hoursInterval:l,isMonthDateHeader:u}=n,d=[];let c={};const p=a||0;i&&(c=this._generateDateHeaderDataRow(n,e,t,this._viewDataGenerator.getCellCountInDay(o,s,l),0,p),d.push(c.dateRow));const h=this._generateDateHeaderDataRow(n,e,t,1,i?1:0,p);return d.push(h.dateRow),{dataMap:d,leftVirtualCellWidth:r?h.leftVirtualCellWidth:void 0,rightVirtualCellWidth:r?h.rightVirtualCellWidth:void 0,leftVirtualCellCount:h.leftVirtualCellCount,rightVirtualCellCount:h.rightVirtualCellCount,weekDayLeftVirtualCellWidth:c.leftVirtualCellWidth,weekDayRightVirtualCellWidth:c.rightVirtualCellWidth,weekDayLeftVirtualCellCount:c.leftVirtualCellCount,weekDayRightVirtualCellCount:c.rightVirtualCellCount,isMonthDateHeader:u}}_generateDateHeaderDataRow(e,t,n,i,a,r){const{startCellIndex:o,cellCount:s,isProvideVirtualCellsWidth:l,getResourceManager:u,groupOrientation:d,isGroupedByDate:c}=e,p=so(u().groupCount(),d),h=c?p*i:i,m=Math.floor(o/h),g=ao(s,n),f=Math.ceil((o+g)/h),y=io(n),D=t[a].slice(m,f),C=m*h,v=C*r,_=y-f*h,w=_*r;return{dateRow:D,leftVirtualCellCount:C,leftVirtualCellWidth:l?v:void 0,rightVirtualCellCount:_,rightVirtualCellWidth:l?w:void 0}}}const Zg=w.A.dateToMilliseconds;class qg{constructor(e,t,n,i){this.groupedDataMap=e.generateGroupedDataMap(t),this.completeViewDataMap=n,this._viewOptions=i}getGroupStartDate(e){var t;const n=this.getFirstGroupRow(e);return(null===n||void 0===n||null===(t=n[0])||void 0===t||null===(t=t.cellData)||void 0===t?void 0:t.startDate)??null}getGroupEndDate(e){const t=this.getLastGroupRow(e);if(t){const e=t.length-1,{cellData:n}=t[e],{endDate:i}=n;return i}}findGroupCellStartDate(e,t,n,i){const a=this.getGroupFromDateTableGroupMap(e),r=(e,r)=>{const{cellData:o}=a[e][r];let{startDate:s,endDate:l}=o;if(i&&(s=w.A.trimTime(s),l=w.A.setToDayEnd(s)),w.A.intervalsOverlap({firstMin:t,firstMax:n,secondMin:s,secondMax:l}))return s},o=(()=>{const e=a[0].length;for(let t=0;t<e;++t)for(let e=0;e<a.length;++e){const n=r(e,t);if(n)return n}})(),s=(()=>{for(let e=0;e<a.length;++e){const t=a[e];for(let n=0;n<t.length;++n){const t=r(e,n);if(t)return t}}})();return o>s?s:o}findAllDayGroupCellStartDate(e){var t;const n=this.getGroupFromDateTableGroupMap(e),i=null===n||void 0===n||null===(t=n[0])||void 0===t||null===(t=t[0])||void 0===t?void 0:t.cellData;return(null===i||void 0===i?void 0:i.startDate)??null}findCellPositionInMap(e,t){const{groupIndex:n,startDate:i,isAllDay:a,index:r}=e,{allDayPanelGroupedMap:o,dateTableGroupedMap:s}=this.groupedDataMap,{viewOffset:l}=this._viewOptions,u=a&&!this._viewOptions.isVerticalGrouping?o[n]?[o[n]]:[]:s[n]||[];for(let d=0;d<u.length;d+=1){const e=u[d];for(let o=0;o<e.length;o+=1){const s=e[o],u=s.cellData,d=t?Object.assign({},u,{startDate:R.X.addOffsets(s.cellData.startDate,-l),endDate:R.X.addOffsets(s.cellData.endDate,-l)}):u;if(this._isSameGroupIndexAndIndex(d,n,r)&&this.isStartDateInCell(i,a,d,u))return s.position}}}isStartDateInCell(e,t,n,i){let{startDate:a,endDate:r,allDay:o}=n,{startDate:s,endDate:l}=i;const{viewType:u}=this._viewOptions,d=this.getCellSecondIntervalOffset(s,l),c=0!==d;switch(!0){case!co(u):case t&&o:return w.A.sameDate(e,a);case!t&&!c:return e>=a&&e<r;case!t&&c:return this.isStartDateInTwoIntervalsCell(e,d,a,r);default:return!1}}getCellSecondIntervalOffset(e,t){const n=R.X.addOffsets(e,Zg("hour")),i=Y.A.getDaylightOffset(e,t),a=Y.A.getDaylightOffset(e,n),r=0!==i,o=a<0;return!r&&o?Math.abs(a*Zg("minute")):0}isStartDateInTwoIntervalsCell(e,t,n,i){const a=R.X.addOffsets(n,t),r=R.X.addOffsets(i,t),o=e>=n&&e<i,s=e>=a&&e<r;return o||s}_isSameGroupIndexAndIndex(e,t,n){return e.groupIndex===t&&(void 0===n||e.index===n)}getCellsGroup(e){const{dateTableGroupedMap:t}=this.groupedDataMap,n=t[e];if(n){const{cellData:e}=n[0][0];return e.groups}}getCompletedGroupsInfo(){const{dateTableGroupedMap:e}=this.groupedDataMap;return e.map(e=>{const t=e[0][0],{allDay:n,groupIndex:i}=t.cellData;return{allDay:n,groupIndex:i,startDate:this.getGroupStartDate(i),endDate:this.getGroupEndDate(i)}}).filter(e=>{let{startDate:t}=e;return Boolean(t)})}getGroupIndices(){return this.getCompletedGroupsInfo().map(e=>{let{groupIndex:t}=e;return t})}getGroupFromDateTableGroupMap(e){const{dateTableGroupedMap:t}=this.groupedDataMap;return t[e]}getFirstGroupRow(e){const t=this.getGroupFromDateTableGroupMap(e);if(t){const{cellData:e}=t[0][0];return e.allDay?t[1]:t[0]}}getLastGroupRow(e){const{dateTableGroupedMap:t}=this.groupedDataMap,n=t[e];if(n){const e=n.length-1;return n[e]}}getLastGroupCellPosition(e){const t=this.getLastGroupRow(e);return null===t||void 0===t?void 0:t[(null===t||void 0===t?void 0:t.length)-1].position}getRowCountInGroup(e){const t=this.getLastGroupRow(e),n=t.length,i=t[n-1].cellData,a=i.index;return(a+1)/t.length}}const Xg=(e,t)=>{if(!Number.isInteger(e))throw Error(`Passed integer value ${e} is not an integer.`);if(!Number.isInteger(t))throw Error(`Passed module value ${t} is not an integer.`);if(t<=0)throw Error(`Passed module value ${t} must be > 0.`);const n=e%t;switch(!0){case 0===n:return 0;case n>0:return n;case n<0:return t+n;default:throw Error(`Unexpected division (${e} % ${t}) occurred.`)}},Kg=["allDay","startDate","endDate","groups","groupIndex","isFirstGroupCell","isLastGroupCell","index"],Qg=w.A.dateToMilliseconds;class Jg{constructor(e){this._viewDataGenerator=e}getCompleteTimePanelMap(e,t){const{startViewDate:n,cellDuration:i,startDayHour:a,isVerticalGrouping:r,intervalCount:o,currentDate:s,viewType:l,hoursInterval:u,endDayHour:d,viewOffset:c,today:p,showCurrentTimeIndicator:h}=e,m=t.length-1,g=t[m][t[m].length-1].endDate,f=this._viewDataGenerator.getRowCount({intervalCount:o,currentDate:s,viewType:l,hoursInterval:u,startDayHour:a,endDayHour:d}),y=this._viewDataGenerator.getCellCount({intervalCount:o,currentDate:s,viewType:l,hoursInterval:u,startDayHour:a,endDayHour:d});let D=0,C=0;return t.map((e,o)=>{const s=e[0],{allDay:l,startDate:u,groups:d,groupIndex:m,isFirstGroupCell:v,isLastGroupCell:_,index:w}=s,b=(0,F.A)(s,Kg),S=!l&&this.isTimeCellShouldBeHighlighted(p,c,{startViewDate:n,realEndViewDate:g,showCurrentTimeIndicator:h},{date:u,index:C,duration:Math.round(i),isFirst:0===C,isLast:this.isLastCellInGroup(t,o)});l?(D+=1,C=0):C+=1;const T=(o-D)%f;return Object.assign({},b,{startDate:u,allDay:l,highlighted:S,text:Ds.getTimePanelCellText(T,u,n,i,a,c),groups:r?d:void 0,groupIndex:r?m:void 0,isFirstGroupCell:r&&v,isLastGroupCell:r&&_,index:Math.floor(w/y)})})}generateTimePanelData(e,t){const{startRowIndex:n,rowCount:i,topVirtualRowHeight:a,bottomVirtualRowHeight:r,isGroupedAllDayPanel:o,isVerticalGrouping:s,isAllDayPanelVisible:l}=t,u=s||!l?0:1,d=n+u,c=_o(i,e),p=e.slice(d,d+c),h={topVirtualRowHeight:a,bottomVirtualRowHeight:r,isGroupedAllDayPanel:o},{previousGroupedData:m}=this._generateTimePanelDataFromMap(p,s);return h.groupedData=m,h}_generateTimePanelDataFromMap(e,t){return e.reduce((e,n)=>{let{previousGroupIndex:i,previousGroupedData:a}=e;const r=n.groupIndex;return r!==i&&a.push({dateTable:[],isGroupedAllDayPanel:bo(Boolean(n.allDay),t),groupIndex:r,key:So(r,t)}),n.allDay?a[a.length-1].allDayPanel=n:a[a.length-1].dateTable.push(n),{previousGroupIndex:r,previousGroupedData:a}},{previousGroupIndex:-1,previousGroupedData:[]})}isTimeCellShouldBeHighlighted(e,t,n,i){let{startViewDate:a,realEndViewDate:r,showCurrentTimeIndicator:o}=n;const s=R.X.addOffsets(e,t),l=R.X.addOffsets(a,t);if(!o||s<l||s>=r)return!1;const u=this.getLocalDateTimeInMs(s),[d,c]=this.getHighlightedInterval(i);return d<c?u>=d&&u<c:u>=d&&u<Qg("day")||u>=0&&u<c}getHighlightedInterval(e){let{date:t,index:n,duration:i,isFirst:a,isLast:r}=e;const o=this.getLocalDateTimeInMs(t),s=n%2===0;switch(!0){case a||r&&!s:return[o,Xg(o+i,Qg("day"))];case s:return[Xg(o-i,Qg("day")),Xg(o+i,Qg("day"))];default:return[o,Xg(o+2*i,Qg("day"))]}}getLocalDateTimeInMs(e){const t=e.getTime()-e.getTimezoneOffset()*Qg("minute");return Xg(t,Qg("day"))}isLastCellInGroup(e,t){if(t===e.length-1)return!0;const{groupIndex:n}=e[t][0],{groupIndex:i,allDay:a}=e[t+1][0];return a||i!==n}}const ef=w.A.dateToMilliseconds;class tf{constructor(e){this.viewType=e,this.daysInInterval=1,this.tableAllDay=!1,this.hiddenInterval=0}isWorkWeekView(){return[Lr.WORK_WEEK,Lr.TIMELINE_WORK_WEEK].includes(this.viewType)}isSkippedDate(e){return!1}_calculateStartViewDate(e){return new Date}getStartViewDate(e){return this._calculateStartViewDate(e)}getCompleteViewDataMap(e){const{getResourceManager:t,isGroupedByDate:n,isHorizontalGrouping:i,isVerticalGrouping:a,intervalCount:r,currentDate:o,viewType:s,startDayHour:l,endDayHour:u,hoursInterval:d}=e;this._setVisibilityDates(e),this.setHiddenInterval(l,u,d);const c=Nn(t().groupsLeafs),p=this.getCellCount({intervalCount:r,currentDate:o,viewType:s,startDayHour:l,endDayHour:u,hoursInterval:d}),h=this.getRowCount({intervalCount:r,currentDate:o,viewType:s,hoursInterval:d,startDayHour:l,endDayHour:u});let m=[];const g=this._generateAllDayPanelData(e,h,p),f=this._generateViewCellsData(e,h,p);return g&&m.push(g),m.push(...f),i&&!n&&(m=this._transformViewDataMapForHorizontalGrouping(m,c)),a&&(m=this._transformViewDataMapForVerticalGrouping(m,c)),n&&(m=this._transformViewDataMapForGroupingByDate(m,c)),this._addKeysToCells(m)}_transformViewDataMapForHorizontalGrouping(e,t){const n=e.map(e=>e.slice());return t.slice(1).forEach((t,i)=>{const a=i+1;e.forEach((e,i)=>{const r=e.map(e=>Object.assign({},e,{groups:t,groupIndex:a}));n[i].push(...r)})}),n}_transformViewDataMapForVerticalGrouping(e,t){const n=e.map(e=>e.slice());return t.slice(1).forEach((t,i)=>{const a=i+1,r=e.map(e=>{const n=e.map(e=>Object.assign({},e,{groupIndex:a,groups:t}));return n});n.push(...r)}),n}_transformViewDataMapForGroupingByDate(e,t){const n=t.slice(1),i=n.length,a=e.map(e=>{const t=e.reduce((e,t)=>{const a=[...e,Object.assign({},t,{isFirstGroupCell:!0,isLastGroupCell:0===i}),...n.map((e,n)=>Object.assign({},t,{groups:e,groupIndex:n+1,isFirstGroupCell:!1,isLastGroupCell:n===i-1}))];return a},[]);return t});return a}_addKeysToCells(e){const t=e[0].length,{currentViewDataMap:n}=e.reduce((e,n,i)=>{let{allDayPanelsCount:a,currentViewDataMap:r}=e;const o=n[0].allDay,s=(i-a)*t,l=o?a+1:a;return r.push(n.map((e,t)=>Object.assign({},e,{key:s+t}))),{allDayPanelsCount:l,currentViewDataMap:r}},{allDayPanelsCount:0,currentViewDataMap:[]});return n}generateViewDataMap(e,t){const{rowCount:n,startCellIndex:i,startRowIndex:a,cellCount:r,isVerticalGrouping:o,isAllDayPanelVisible:s}=t,l=(e,t,n,i)=>{const a=void 0!==i?n+i:void 0;return e.slice(n,a).map((e,n)=>({cellData:e,position:{rowIndex:t,columnIndex:n}}))};let u=a,d=[];this._isStandaloneAllDayPanel(o,s)&&(u++,d=l(e[0],0,i,r));const c=_o(n,e),p=e.slice(u,u+c).map((e,t)=>l(e,t,i,r));return{allDayPanelMap:d,dateTableMap:p}}_isStandaloneAllDayPanel(e,t){return!e&&t}getViewDataFromMap(e,t,n){const{topVirtualRowHeight:i,bottomVirtualRowHeight:a,leftVirtualCellWidth:r,rightVirtualCellWidth:o,cellCount:s,rowCount:l,startRowIndex:u,startCellIndex:d,isProvideVirtualCellsWidth:c,isGroupedAllDayPanel:p,isVerticalGrouping:h,isAllDayPanelVisible:m}=n,{allDayPanelMap:g,dateTableMap:f}=t,{groupedData:y}=f.reduce((e,t)=>{let{previousGroupIndex:n,groupedData:i}=e;const a=t.map(e=>{let{cellData:t}=e;return t}),r=a[0],o=r.allDay,s=r.groupIndex;return s!==n&&i.push({dateTable:[],isGroupedAllDayPanel:bo(Boolean(o),h),groupIndex:s,key:So(s,h)}),o?i[i.length-1].allDayPanel=a:i[i.length-1].dateTable.push({cells:a,key:a[0].key-d}),{groupedData:i,previousGroupIndex:s}},{previousGroupIndex:-1,groupedData:[]});this._isStandaloneAllDayPanel(h,m)&&(y[0].allDayPanel=g.map(e=>{let{cellData:t}=e;return t}));const D=io(e),C=vo(e),v=ao(s,e),_=_o(l,e);return{groupedData:y,topVirtualRowHeight:i,bottomVirtualRowHeight:a,leftVirtualCellWidth:c?r:void 0,rightVirtualCellWidth:c?o:void 0,isGroupedAllDayPanel:p,leftVirtualCellCount:d,rightVirtualCellCount:void 0===s?0:D-d-v,topVirtualRowCount:u,bottomVirtualRowCount:C-u-_}}_generateViewCellsData(e,t,n){const i=[];for(let a=0;a<t;a+=1)i.push(this._generateCellsRow(e,!1,a,t,n));return i}_generateAllDayPanelData(e,t,n){return e.isAllDayPanelVisible?this._generateCellsRow(e,!0,0,t,n):null}_generateCellsRow(e,t,n,i,a){const r=[];for(let o=0;o<a;++o){const s=this.getCellData(n,o,e,t),l=n*a+o,u=this._isFirstGroupCell(n,o,e,i,a),d=this._isLastGroupCell(n,o,e,i,a);r.push(Object.assign({},s,{index:l,isFirstGroupCell:u,isLastGroupCell:d}))}return r}getCellData(e,t,n,i){return i?this.prepareAllDayCellData(n,e,t):this.prepareCellData(n,e,t)}prepareCellData(e,t,n){const{getResourceManager:i}=e,a=Nn(i().groupsLeafs),r=this.getDateByCellIndices(e,t,n),o=this.getCellEndDate(r,e),s={startDate:r,endDate:o,allDay:this.tableAllDay,groupIndex:0};return a.length>0&&(s.groups=a[0]),s}prepareAllDayCellData(e,t,n){const i=this.prepareCellData(Object.assign({},e,{viewOffset:0}),t,n),{viewOffset:a}=e,r=w.A.trimTime(i.startDate),o=R.X.addOffsets(r,a);return Object.assign({},i,{startDate:o,endDate:o,allDay:!0})}getDateByCellIndices(e,t,n){const{startViewDate:i}=e,{startDayHour:a,endDayHour:r,hoursInterval:o,interval:s,firstDayOfWeek:l,intervalCount:u,viewOffset:d}=e,c=this.getCellCountInDay(a,r,o),p=this.getCellCount(e),h=this.getRowCount(e),m=this._calculateCellIndex(t,n,h,p),g=this.getMillisecondsOffset(m,s,c),f=this.isWorkWeekView()?this.getTimeOffsetByColumnIndex(n,this.getFirstDayOfWeek(l),p,u):0,y=i.getHours()!==Math.floor(a);let D=i.getTime(),C=new Date(D+g+f+d);const v=Y.A.isLocalTimeMidnightDST(i),_=Y.A.isLocalTimeMidnightDST(C);if(v||_)C=new Date(C.getFullYear(),C.getMonth(),C.getDate(),C.getHours(),C.getMinutes());else if(y){const e=wo(i,a);D=e.getTime()-ef("day"),C=new Date(D+g+f+d)}else{const e=w.A.getTimezonesDifference(i,C);C.setTime(C.getTime()+e)}return C}getMillisecondsOffset(e,t,n){const i=Math.floor(e/n),a=i*this.hiddenInterval;return t*e+a}getTimeOffsetByColumnIndex(e,t,n,i){const a=Math.max(0,t-1),r=n/i,o=Math.floor((e+a)/r);return 2*o*ef("day")}calculateEndDate(e,t,n){return this.getCellEndDate(e,{interval:t})}_calculateCellIndex(e,t,n,i){return Co(e,t,n)}generateGroupedDataMap(e){const{allDayPanelMap:t,dateTableMap:n}=e,{previousGroupedDataMap:i}=n.reduce((e,t)=>{const{previousGroupedDataMap:n,previousRowIndex:i,previousGroupIndex:a}=e,{groupIndex:r}=t[0].cellData,o=r===a?i+1:0;return t.forEach(e=>{const{groupIndex:t}=e.cellData;n[t]||(n[t]=[]),n[t][o]||(n[t][o]=[]),n[t][o].push(e)}),{previousGroupedDataMap:n,previousRowIndex:o,previousGroupIndex:r}},{previousGroupedDataMap:[],previousRowIndex:-1,previousGroupIndex:-1}),a=[];return null===t||void 0===t||t.forEach(e=>{const{groupIndex:t}=e.cellData;a[t]||(a[t]=[]),a[t].push(e)}),{allDayPanelGroupedMap:a,dateTableGroupedMap:i}}_isFirstGroupCell(e,t,n,i,a){const{groupOrientation:r,getResourceManager:o,isGroupedByDate:s}=n,l=o().groupCount();return s?t%l===0:r===gn?t%a===0:e%i===0}_isLastGroupCell(e,t,n,i,a){const{groupOrientation:r,getResourceManager:o,isGroupedByDate:s}=n,l=o().groupCount();return s?(t+1)%l===0:r===gn?(t+1)%a===0:(e+1)%i===0}markSelectedAndFocusedCells(e,t){const{selectedCells:n,focusedCell:i}=t;if(!n&&!i)return e;const{allDayPanelMap:a,dateTableMap:r}=e,o=r.map(e=>this._markSelectedAndFocusedCellsInRow(e,n,i)),s=this._markSelectedAndFocusedCellsInRow(a,n,i);return{allDayPanelMap:s,dateTableMap:o}}_markSelectedAndFocusedCellsInRow(e,t,n){return e.map(e=>{const{index:i,groupIndex:a,allDay:r,startDate:o}=e.cellData,s=t.findIndex(e=>{let{index:t,groupIndex:n,allDay:s,startDate:l}=e;return a===n&&(i===t||void 0===t&&o.getTime()===l.getTime())&&Boolean(r)===Boolean(s)}),l=Boolean(n)&&i===n.cellData.index&&a===n.cellData.groupIndex&&r===n.cellData.allDay;return l||-1!==s?Object.assign({},e,{cellData:Object.assign({},e.cellData,{isSelected:s>-1,isFocused:l})}):e})}getInterval(e){return e*ef("hour")}_getIntervalDuration(e){return ef("day")*e}_setVisibilityDates(e){}getCellCountInDay(e,t,n){const i=eo(e,t)/n;return Math.ceil(i)}getCellCount(e){const{intervalCount:t,viewType:n,startDayHour:i,endDayHour:a,hoursInterval:r}=e,o=this.getCellCountInDay(i,a,r),s=po(n)?o:1;return this.daysInInterval*t*s}getRowCount(e){const{viewType:t,startDayHour:n,endDayHour:i,hoursInterval:a}=e,r=this.getCellCountInDay(n,i,a),o=po(t)?1:r;return o}setHiddenInterval(e,t,n){this.hiddenInterval=ef("day")-this.getVisibleDayDuration(e,t,n)}getVisibleDayDuration(e,t,n){const i=this.getCellCountInDay(e,t,n);return n*i*ef("hour")}getFirstDayOfWeek(e){return e}getCellEndDate(e,t){const n=Math.round(t.interval);return Y.A.addOffsetsWithoutDST(e,n)}}class nf extends tf{_calculateStartViewDate(e){return ys.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount))}}const af=(e,t)=>{const n=new Date(e);let i=n.getDay()-t;return i<0&&(i+=7),n.setDate(n.getDate()-i),n},rf=(e,t)=>{const n=af(e,t);return n.setDate(n.getDate()+7-1),n},of=(e,t)=>{const n=w.A.trimTime(t).getTime()-w.A.trimTime(e).getTime();return Math.round(n/864e5)+1},sf=(e,t,n)=>{const i=af(e,n),a=rf(t,n),r=of(i,a)/7;return Math.max(r,6)},lf=w.A.dateToMilliseconds;class uf extends tf{constructor(){super(...arguments),this.tableAllDay=void 0}getCellData(e,t,n){const{indicatorTime:i,timeZoneCalculator:a,intervalCount:r,viewOffset:o}=n,s=super.getCellData(e,t,n,!1),l=Y.A.addOffsetsWithoutDST(s.startDate,-o);return s.today=this.isCurrentDate(l,i,a),s.otherMonth=this.isOtherMonth(l,this._minVisibleDate,this._maxVisibleDate),s.isFirstDayMonthHighlighting=mo(l,r),s.text=vs.getCellText(l,r),s}isCurrentDate(e,t,n){return w.A.sameDate(e,To(t,n))}isOtherMonth(e,t,n){return!w.A.dateInRange(e,t,n,"date")}_calculateCellIndex(e,t,n,i){return vs.calculateCellIndex(e,t,n,i)}calculateEndDate(e,t,n){return Jr(e,n)}getInterval(){return lf("day")}_calculateStartViewDate(e){return vs.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,e.intervalCount,this.getFirstDayOfWeek(e.firstDayOfWeek))}_setVisibilityDates(e){const{intervalCount:t,startDate:n,currentDate:i}=e,a=w.A.getFirstMonthDate(n),r=vs.getViewStartByOptions(n,i,t,a);this._minVisibleDate=new Date(r.setDate(1));const o=new Date(r.setMonth(r.getMonth()+t));this._maxVisibleDate=new Date(o.setDate(0))}getCellCount(){return 7}getRowCount(e){const t=new Date(e.currentDate);t.setDate(1);const n=new Date(t);return n.setMonth(n.getMonth()+e.intervalCount),n.setDate(0),sf(t,n,e.firstDayOfWeek??c.A.firstDayOfWeekIndex())}getCellCountInDay(){return 1}setHiddenInterval(){this.hiddenInterval=0}getCellEndDate(e,t){const{startDayHour:n,endDayHour:i}=t,a=(i-n)*lf("hour");return Y.A.addOffsetsWithoutDST(e,a)}}const df=w.A.dateToMilliseconds;class cf extends tf{calculateEndDate(e,t,n){return Jr(e,n)}getInterval(){return df("day")}_calculateStartViewDate(e){return ws.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,e.intervalCount)}getCellCount(e){const{intervalCount:t}=e,n=new Date(e.currentDate);let i=0;for(let a=1;a<=t;a++)i+=new Date(n.getFullYear(),n.getMonth()+a,0).getDate();return i}setHiddenInterval(){this.hiddenInterval=0}getCellEndDate(e,t){const{startDayHour:n,endDayHour:i}=t,a=(i-n)*df("hour");return Y.A.addOffsetsWithoutDST(e,a)}}class pf extends tf{constructor(){super(...arguments),this.daysInInterval=7}_getIntervalDuration(e){return Ds.getIntervalDuration(e)}_calculateStartViewDate(e){return Ds.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount),this.getFirstDayOfWeek(e.firstDayOfWeek))}}class hf extends pf{constructor(){super(...arguments),this.daysInInterval=5}isSkippedDate(e){return ko(e)}_calculateStartViewDate(e){return Cs.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount),this.getFirstDayOfWeek(e.firstDayOfWeek))}getFirstDayOfWeek(e){return e||0}}const mf=e=>{switch(e){case Lr.MONTH:return new uf(e);case Lr.TIMELINE_MONTH:return new cf(e);case Lr.DAY:case Lr.TIMELINE_DAY:return new nf(e);case Lr.WEEK:case Lr.TIMELINE_WEEK:return new pf(e);case Lr.WORK_WEEK:case Lr.TIMELINE_WORK_WEEK:return new hf(e);default:return new tf(e)}},gf=["getResourceManager","groupOrientation","groupByDate","isAllDayPanelVisible","viewOffset"];class ff{constructor(e){this.viewType=e,this.viewDataGenerator=mf(e),this.viewData={},this.completeViewDataMap=[],this.completeDateHeaderMap=[],this.viewDataMap={dateTableMap:[],allDayPanelMap:[]},this._groupedDataMapProvider=null}get groupedDataMap(){return this._groupedDataMapProvider.groupedDataMap}get hiddenInterval(){return this.viewDataGenerator.hiddenInterval}isSkippedDate(e){return this.viewDataGenerator.isSkippedDate(e)}update(e,t){this.viewDataGenerator=mf(e.viewType);const{viewDataGenerator:n}=this,i=new Yg(n),a=new Jg(n),r=this._transformRenderOptions(e);this._options=r,t&&(this.completeViewDataMap=n.getCompleteViewDataMap(r),this.completeDateHeaderMap=i.getCompleteDateHeaderMap(r,this.completeViewDataMap),r.isGenerateTimePanelData&&(this.completeTimePanelMap=a.getCompleteTimePanelMap(r,this.completeViewDataMap))),this.viewDataMap=n.generateViewDataMap(this.completeViewDataMap,r),this.updateViewData(r),this._groupedDataMapProvider=new qg(this.viewDataGenerator,this.viewDataMap,this.completeViewDataMap,{isVerticalGrouping:r.isVerticalGrouping,viewType:r.viewType,viewOffset:e.viewOffset}),this.dateHeaderData=i.generateDateHeaderData(this.completeDateHeaderMap,this.completeViewDataMap,r),r.isGenerateTimePanelData&&(this.timePanelData=a.generateTimePanelData(this.completeTimePanelMap,r))}createGroupedDataMapProvider(){this._groupedDataMapProvider=new qg(this.viewDataGenerator,this.viewDataMap,this.completeViewDataMap,{isVerticalGrouping:this._options.isVerticalGrouping,viewType:this._options.viewType})}updateViewData(e){const t=this._transformRenderOptions(e);this.viewDataMapWithSelection=this.viewDataGenerator.markSelectedAndFocusedCells(this.viewDataMap,t),this.viewData=this.viewDataGenerator.getViewDataFromMap(this.completeViewDataMap,this.viewDataMapWithSelection,t)}_transformRenderOptions(e){const{getResourceManager:t,groupOrientation:n,groupByDate:i,isAllDayPanelVisible:a,viewOffset:r}=e,o=(0,F.A)(e,gf),s=t(),l=s.groupCount(),u=this.viewDataGenerator.getInterval(e.hoursInterval);return Object.assign({},o,{startViewDate:this.viewDataGenerator.getStartViewDate(e),isVerticalGrouping:oo(l,n),isHorizontalGrouping:Ao(l,n),isGroupedByDate:Eo(l,n,i),isGroupedAllDayPanel:fo(l,n,a),getResourceManager:t,groupOrientation:n,isAllDayPanelVisible:a,viewOffset:r,interval:u})}getGroupPanelData(e){const t=this._transformRenderOptions(e),n=t.getResourceManager().groupResources();if(n.length>0){const e=this.getCellCount(t);return Mo(n,e,t.isGroupedByDate,t.isGroupedByDate?1:e)}}getGroupStartDate(e){return this._groupedDataMapProvider.getGroupStartDate(e)}getGroupEndDate(e){return this._groupedDataMapProvider.getGroupEndDate(e)}findGroupCellStartDate(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._groupedDataMapProvider.findGroupCellStartDate(e,t,n,i)}findAllDayGroupCellStartDate(e){return this._groupedDataMapProvider.findAllDayGroupCellStartDate(e)}findCellPositionInMap(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._groupedDataMapProvider.findCellPositionInMap(e,t)}getCellsGroup(e){return this._groupedDataMapProvider.getCellsGroup(e)}getCompletedGroupsInfo(){return this._groupedDataMapProvider.getCompletedGroupsInfo()}getGroupIndices(){return this._groupedDataMapProvider.getGroupIndices()}getLastGroupCellPosition(e){return this._groupedDataMapProvider.getLastGroupCellPosition(e)}getRowCountInGroup(e){return this._groupedDataMapProvider.getRowCountInGroup(e)}getCellData(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=n&&!this._options.isVerticalGrouping?this.viewDataMap.allDayPanelMap:this.viewDataMap.dateTableMap[e],r=i?a.length-1-t:t,{cellData:o}=a[r];return o}getCellsByGroupIndexAndAllDay(e,t){const n=this._getRowCountWithAllDayRows(),i=this._options.isAllDayPanelVisible,a=this._options.isVerticalGrouping?e*n:0,r=this._options.isVerticalGrouping?(e+1)*n-1:n,o=i&&!t?a+1:a,s=t?o:r;return this.completeViewDataMap.slice(o,s+1).map(t=>t.filter(t=>{let{groupIndex:n}=t;return e===n}))}getCellCountWithGroup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{dateTableGroupedMap:n}=this.groupedDataMap;return n.filter((t,n)=>n<=e).reduce((e,n)=>e+n[t].length,0)}hasGroupAllDayPanel(e){var t,n;return this._options.isVerticalGrouping?Boolean(null===(n=this.groupedDataMap.dateTableGroupedMap[e])||void 0===n?void 0:n[0][0].cellData.allDay):(null===(t=this.groupedDataMap.allDayPanelGroupedMap[e])||void 0===t?void 0:t.length)>0}isGroupIntersectDateInterval(e,t,n){const i=this.getGroupStartDate(e),a=this.getGroupEndDate(e);return t<a&&n>i}findGlobalCellPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{completeViewDataMap:i}=this,a=this._options.isAllDayPanelVisible;for(let r=0;r<i.length;r+=1){const o=i[r];for(let i=0;i<o.length;i+=1){const s=o[i],{startDate:l,endDate:u,groupIndex:d,allDay:c}=s;if(t===d&&n===Boolean(c)&&this._compareDatesAndAllDay(e,l,u,n))return{position:{columnIndex:i,rowIndex:a&&!this._options.isVerticalGrouping?r-1:r},cellData:s}}}}_compareDatesAndAllDay(e,t,n,i){return i?w.A.sameDate(e,t):e>=t&&e<n}getSkippedDaysCount(e,t,n,i){const{dateTableGroupedMap:a}=this._groupedDataMapProvider.groupedDataMap,r=a[e];let o=0;for(let c=0;c<r.length;c+=1)for(let e=0;e<r[c].length;e+=1){const i=r[c][e].cellData;t.getTime()<i.endDate.getTime()&&n.getTime()>i.startDate.getTime()&&(o+=1)}const s=r[r.length-1][r[0].length-1].cellData,l=w.A.trimTime(s.startDate),u=Math.floor((n.getTime()-l.getTime())/w.A.dateToMilliseconds("day")),d=u>0?u:0;return i-o-d}getColumnsCount(){const{dateTableMap:e}=this.viewDataMap;return e?e[0].length:0}getViewEdgeIndices(e){return e?{firstColumnIndex:0,lastColumnIndex:this.viewDataMap.allDayPanelMap.length-1,firstRowIndex:0,lastRowIndex:0}:{firstColumnIndex:0,lastColumnIndex:this.viewDataMap.dateTableMap[0].length-1,firstRowIndex:0,lastRowIndex:this.viewDataMap.dateTableMap.length-1}}getGroupEdgeIndices(e,t){const n=this.groupedDataMap.dateTableGroupedMap[e],i=n[0].length,a=n.length,r=n[0][0].position.columnIndex,o=n[0][i-1].position.columnIndex;return t?{firstColumnIndex:r,lastColumnIndex:o,firstRowIndex:0,lastRowIndex:0}:{firstColumnIndex:r,lastColumnIndex:o,firstRowIndex:n[0][0].position.rowIndex,lastRowIndex:n[a-1][0].position.rowIndex}}isSameCell(e,t){const{startDate:n,groupIndex:i,allDay:a,index:r}=e,{startDate:o,groupIndex:s,allDay:l,index:u}=t;return n.getTime()===o.getTime()&&i===s&&a===l&&r===u}getLastViewDate(){const{completeViewDataMap:e}=this,t=e.length-1;return e[t][e[t].length-1].endDate}getStartViewDate(){return this._options.startViewDate}getIntervalDuration(e){return this.viewDataGenerator._getIntervalDuration(e)}getLastCellEndDate(){const e=new Date(this.getLastViewDate().getTime()-w.A.dateToMilliseconds("minute"));return R.X.addOffsets(e,-this._options.viewOffset)}getLastViewDateByEndDayHour(e){const t=this.getLastCellEndDate(),n=w.A.dateTimeFromDecimal(e),i=new Date(t.setHours(n.hours,n.minutes));return this._adjustEndDateByDaylightDiff(t,i)}_adjustEndDateByDaylightDiff(e,t){const n=Y.A.getDaylightOffsetInMs(e,t),i=new Date(t.getTime()-n);return new Date(i.getTime()-w.A.dateToMilliseconds("minute"))}getCellCountInDay(e,t,n){return this.viewDataGenerator.getCellCountInDay(e,t,n)}getCellCount(e){return this.viewDataGenerator.getCellCount(e)}getRowCount(e){return this.viewDataGenerator.getRowCount(e)}getVisibleDayDuration(e,t,n){return this.viewDataGenerator.getVisibleDayDuration(e,t,n)}_getRowCountWithAllDayRows(){const e=this._options.isAllDayPanelVisible?1:0;return this.getRowCount(this._options)+e}getFirstDayOfWeek(e){return this.viewDataGenerator.getFirstDayOfWeek(e)}setViewOptions(e){this._options=this._transformRenderOptions(e)}getViewOptions(){return this._options}getViewPortGroupCount(){const{dateTableGroupedMap:e}=this.groupedDataMap;return(null===e||void 0===e?void 0:e.length)||0}getCellsBetween(e,t){const[n,i]=this.normalizeCellsOrder(e,t),{index:a}=n,{index:r}=i,o=this.getCellsByGroupIndexAndAllDay(n.groupIndex??0,i.allDay??!1);return po(this.viewType)?this.getCellsBetweenHorizontalView(o,a,r):this.getCellsBetweenVerticalView(o,a,r)}getCellsBetweenHorizontalView(e,t,n){return e.reduce((e,i)=>e.concat(i.filter(e=>{let{index:i}=e;return t<=i&&i<=n})),[])}getCellsBetweenVerticalView(e,t,n){var i;const a=[],r=e.length,o=(null===(i=e[0])||void 0===i?void 0:i.length)??0;let s=!1;for(let l=0;l<o;l+=1)for(let i=0;i<r;i+=1){const r=e[i][l],{index:o}=r;if(o===t&&(s=!0),s&&a.push(r),o===n)return a}return a}normalizeCellsOrder(e,t){return e.startDate>t.startDate?[t,e]:[e,t]}}const{tableCreator:yf}=Ph,{abstract:Df}=ya.A,Cf=w.A.dateToMilliseconds,vf="dx-scheduler-work-space",_f="dx-scheduler-work-space-grouped",wf="dx-scheduler-work-space-vertical-grouped",bf="dx-scheduler-work-space-vertical-group-table",Sf="dx-scheduler-work-space-both-scrollbar",Tf="dx-scheduler-work-space-count",xf="dx-scheduler-work-space-group-by-date",Af="dx-scheduler-work-space-odd-cells",Ef="dx-scheduler-time-panel-cell",kf="dx-scheduler-time-panel-row",Of="dx-scheduler-all-day-panel",If="dx-scheduler-all-day-table",Rf="dx-scheduler-all-day-appointments",Mf="dx-scheduler-all-day-title",Vf="dx-scheduler-all-day-table-cell",Pf="dx-scheduler-all-day-table-row",$f="dx-scheduler-work-space-all-day",Wf="dx-scheduler-work-space-all-day-collapsed",Bf="dx-scheduler-work-space-mouse-selection",Hf="dx-scheduler-cell-sizes-horizontal",Gf="dx-scheduler-cell-sizes-vertical",Nf="dx-scheduler-header-panel",Ff="dx-scheduler-header-panel-cell",Lf="dx-scheduler-header-row",zf="dx-scheduler-group-header",Uf="dx-scheduler-date-table-cell",jf="dx-scheduler-virtual-row",Yf="dx-scheduler-date-table-droppable-cell",Zf=(0,ft.b4)(Yn.A.down,"dxSchedulerWorkSpace"),qf={ENTER:(0,ft.b4)(Gh.Ve,"dxSchedulerDateTable"),DROP:(0,ft.b4)(Gh.gv,"dxSchedulerDateTable"),LEAVE:(0,ft.b4)(Gh.qG,"dxSchedulerDateTable")},Xf=(0,ft.b4)(pt.U,"dxSchedulerDateTable"),Kf=(0,ft.b4)(Yn.A.down,"dxSchedulerDateTable"),Qf=(0,ft.b4)(Yn.A.up,"dxSchedulerDateTable"),Jf=(0,ft.b4)(Yn.A.move,"dxSchedulerDateTable"),ey="dxCellData",ty=Cf("day"),ny=Cf("hour"),iy=`.${Mn} td, .${If} td`,ay=`.${Uf}, .${Vf}`,ry={renderComponents:{header:!0,timePanel:!0,dateTable:!0,allDayPanel:!0},generateNewData:!0};class oy extends ya.A{constructor(){super(...arguments),this.viewDirection="vertical"}_activeStateUnit(){return ay}get type(){return""}get viewDataProvider(){return this._viewDataProvider||(this._viewDataProvider=new ff(this.type)),this._viewDataProvider}get cache(){return this._cache||(this._cache=new Pc.l),this._cache}get resourceManager(){return this.option("getResourceManager")()}get cellsSelectionState(){if(!this._cellsSelectionState){this._cellsSelectionState=new Rg(this.viewDataProvider);const e=this.option("selectedCellData");if((null===e||void 0===e?void 0:e.length)>0){const t=e.map(e=>{const{groups:t}=e;if(!t||0===this._getGroupCount())return Object.assign({},e,{groupIndex:0});const n=this._getGroupIndexByGroupValues(t);return Object.assign({},e,{groupIndex:n})});this._cellsSelectionState.setSelectedCellsByData(t)}}return this._cellsSelectionState}get cellsSelectionController(){return this._cellsSelectionController||(this._cellsSelectionController=new Ig),this._cellsSelectionController}get isAllDayPanelVisible(){return this._isShowAllDayPanel()&&this.supportAllDayRow()}get verticalGroupTableClass(){return bf}get renovatedHeaderPanelComponent(){return Qm}get timeZoneCalculator(){return this.option("timeZoneCalculator")}get isDefaultDraggingMode(){return"default"===this.option("draggingMode")}notifyObserver(e,t){this.invoke(e,...t)}invoke(e){const t=this.option("notifyScheduler");if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.invoke(e,...i)}}_supportedKeys(){const e=function(e){e.preventDefault(),e.stopPropagation();const t=this._getSelectedCellsData();if(null!==t&&void 0!==t&&t.length){const n=t.map(e=>this._getCellByData(e)).filter(e=>Boolean(e));e.target=n,this._showPopup=!0,this._cellClickAction({event:e,cellElement:(0,f.A)(n),cellData:t[0]})}},t=(e,t)=>{var n;e.preventDefault(),e.stopPropagation();const i=null===(n=this.cellsSelectionState.getFocusedCell())||void 0===n?void 0:n.cellData;if(i){const n=i.allDay&&!this._isVerticalGroupedWorkSpace(),a=e.shiftKey,r=this.option("allowMultipleCellSelection"),o=this._isRTL(),s=this._getGroupCount(),l=this.isGroupedByDate(),u=this._isHorizontalGroupedWorkSpace(),d=this.viewDataProvider.findCellPositionInMap(Object.assign({},i,{isAllDay:i.allDay})),c=u&&a&&!l?this.viewDataProvider.getGroupEdgeIndices(i.groupIndex,n):this.viewDataProvider.getViewEdgeIndices(n),p=this.cellsSelectionController.handleArrowClick({focusedCellPosition:d,edgeIndices:c,isRTL:o,isGroupedByDate:l,groupCount:s,isMultiSelection:a,isMultiSelectionAllowed:r,viewType:this.type,key:t,getCellDataByPosition:this.viewDataProvider.getCellData.bind(this.viewDataProvider),isAllDayPanelCell:n,focusedCellData:i});this._processNextSelectedCell(p,i,a&&r)}};return(0,T.X)(super._supportedKeys(),{enter:e,space:e,downArrow:e=>{t(e,"down")},upArrow:e=>{t(e,"up")},rightArrow:e=>{t(e,"right")},leftArrow:e=>{t(e,"left")}})}_isRTL(){return this.option("rtlEnabled")}_moveToCell(e,t){if(!(0,A.O9)(e)||!e.length)return;const n=this.option("allowMultipleCellSelection"),i=this._getFullCellData(e),a=this.cellsSelectionState.getFocusedCell();if(!a)return;const r=a.cellData,o=this.cellsSelectionController.moveToCell({isMultiSelection:t,isMultiSelectionAllowed:n,currentCellData:i,focusedCellData:r,isVirtualCell:e.hasClass(In)});this._processNextSelectedCell(o,r,n&&t)}_processNextSelectedCell(e,t,n){const i=this.viewDataProvider.findCellPositionInMap({startDate:e.startDate,groupIndex:e.groupIndex,isAllDay:e.allDay,index:e.index});if(!this.viewDataProvider.isSameCell(t,e)){const t=e.allDay&&!this._isVerticalGroupedWorkSpace()?this._dom_getAllDayPanelCell(i.columnIndex):this._dom_getDateCell(i),a=e.allDay;this._setSelectedCellsStateAndUpdateSelection(a,i,n,t),this._dateTableScrollable.scrollToElement(t)}}_setSelectedCellsStateAndUpdateSelection(e,t,n,i){const a={rowIndex:t.rowIndex,columnIndex:t.columnIndex,allDay:e};this.cellsSelectionState.setFocusedCell(a.rowIndex,a.columnIndex,e),n?this.cellsSelectionState.setSelectedCells(a):this.cellsSelectionState.setSelectedCells(a,a),this.updateCellsSelection(),this._updateSelectedCellDataOption(this._getSelectedCellsData(),i)}_hasAllDayClass(e){return e.hasClass(Vf)}_focusInHandler(e){const t=(0,f.A)(e.target),n=this._focusTarget(),i=t.is(n)||t.closest(n).length>0;if(i&&this._isCellClick){if(delete this._isCellClick,delete this._contextMenuHandled,super._focusInHandler.apply(this,arguments),this.cellsSelectionState.restoreSelectedAndFocusedCells(),!this.cellsSelectionState.getFocusedCell()){const e={columnIndex:0,rowIndex:0,allDay:this._isVerticalGroupedWorkSpace()&&this.isAllDayPanelVisible};this.cellsSelectionState.setFocusedCell(e.rowIndex,e.columnIndex,e.allDay),this.cellsSelectionState.setSelectedCells(e,e)}this.updateCellsSelection(),this._updateSelectedCellDataOption(this._getSelectedCellsData())}}_focusOutHandler(){super._focusOutHandler.apply(this,arguments),this._contextMenuHandled||this._disposed||(this.cellsSelectionState.releaseSelectedAndFocusedCells(),this.viewDataProvider.updateViewData(this.generateRenderOptions()),this.updateCellsSelection())}_focusTarget(){return this.$element()}_isVerticalGroupedWorkSpace(){var e;return Boolean(null===(e=this.option("groups"))||void 0===e?void 0:e.length)&&"vertical"===this.option("groupOrientation")}_isHorizontalGroupedWorkSpace(){var e;return Boolean(null===(e=this.option("groups"))||void 0===e?void 0:e.length)&&"horizontal"===this.option("groupOrientation")}_isWorkSpaceWithCount(){return this.option("intervalCount")>1}_isWorkspaceWithOddCells(){return.5===this.option("hoursInterval")&&!this.isVirtualScrolling()}_getRealGroupOrientation(){return this._isVerticalGroupedWorkSpace()?"vertical":"horizontal"}createRAllDayPanelElements(){this._$allDayPanel=(0,f.A)("<div>").addClass(Of),this._$allDayTitle=(0,f.A)("<div>").appendTo(this._$headerPanelEmptyCell)}_dateTableScrollableConfig(){let e={useKeyboard:!1,bounceEnabled:!1,updateManually:!0,onScroll:()=>{var e;null===(e=this._groupedStrategy.cache)||void 0===e||e.clear()},onInitialized:e=>{let{component:t}=e;const n=!1===t.option("useKeyboard"),i=!0===t.option("useNative");n&&i&&(0,f.A)(t.container()).attr("tabindex",-1)},onOptionChanged:e=>{let{fullName:t,value:n,component:i}=e;const a=!1===i.option("useKeyboard");a&&"useNative"===t&&!0===n&&(0,f.A)(i.container()).attr("tabindex",-1)}};if(this._needCreateCrossScrolling()&&(e=(0,T.X)(e,this._createCrossScrollingConfig(e))),this.isVirtualScrolling()&&(this.virtualScrollingDispatcher.horizontalScrollingAllowed||this.virtualScrollingDispatcher.height)){const t=e.onScroll;e=Object.assign({},e,{onScroll:e=>{null===t||void 0===t||t(e),this.virtualScrollingDispatcher.handleOnScrollEvent(null===e||void 0===e?void 0:e.scrollOffset)}})}return e}_createCrossScrollingConfig(e){let{onScroll:t}=e;return{direction:"both",onScroll:e=>{null===t||void 0===t||t(),this._scrollSync.sidebar({top:e.scrollOffset.top}),this._scrollSync.header({left:e.scrollOffset.left})},onEnd:()=>{this.option("onScrollEnd")()}}}_headerScrollableConfig(){return{useKeyboard:!1,showScrollbar:"never",direction:"horizontal",useNative:!1,updateManually:!0,bounceEnabled:!1,onScroll:e=>{this._scrollSync.dateTable({left:e.scrollOffset.left})}}}_visibilityChanged(e){this.cache.clear(),e&&this._updateGroupTableHeight(),e&&this._needCreateCrossScrolling()&&this._setTableSizes()}_setTableSizes(){this.cache.clear(),this._attachTableClasses();let e=this.getCellWidth();e<this.getCellMinWidth()&&(e=this.getCellMinWidth());const t=this.getWorkSpaceMinWidth(),n=this._getGroupCount(),i=this._getTotalCellCount(n);let a=e*i;a<t&&(a=t),(0,yt.zj)(this._$headerPanel,a),(0,yt.zj)(this._$dateTable,a),this._$allDayTable&&(0,yt.zj)(this._$allDayTable,a),this._attachHeaderTableClasses(),this._updateGroupTableHeight(),this._updateScrollable()}getWorkSpaceMinWidth(){return this._groupedStrategy.getWorkSpaceMinWidth()}_dimensionChanged(){this._isVisible()&&(this.option("crossScrollingEnabled")&&this._setTableSizes(),this.updateHeaderEmptyCellWidth(),this._updateScrollable(),this.cache.clear())}_needCreateCrossScrolling(){return this.option("crossScrollingEnabled")}_getElementClass(){return(0,v.lQ)()}_getRowCount(){return this.viewDataProvider.getRowCount({intervalCount:this.option("intervalCount"),currentDate:this.option("currentDate"),viewType:this.type,hoursInterval:this.option("hoursInterval"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour")})}_getCellCount(){return this.viewDataProvider.getCellCount({intervalCount:this.option("intervalCount"),currentDate:this.option("currentDate"),viewType:this.type,hoursInterval:this.option("hoursInterval"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour")})}isRenovatedRender(){return this.renovatedRenderSupported()&&this.option("renovateRender")}_isVirtualModeOn(){return"virtual"===this.option("scrolling.mode")}isVirtualScrolling(){return this.isRenovatedRender()&&this._isVirtualModeOn()}_initVirtualScrolling(){this.virtualScrollingDispatcher&&(this.virtualScrollingDispatcher.dispose(),this.virtualScrollingDispatcher=null),this.virtualScrollingDispatcher=new $g(this._getVirtualScrollingDispatcherOptions()),this.virtualScrollingDispatcher.attachScrollableEvents(),this.renderer=new Gg(this)}isGroupedAllDayPanel(){return fo(this.option("groups").length,this.option("groupOrientation"),this.isAllDayPanelVisible)}generateRenderOptions(e){var t;const n=this._getGroupCount(),i=n>0?this.option("groupOrientation"):this._getDefaultGroupStrategy(),a=Object.assign({groupByDate:this.option("groupByDate"),startRowIndex:0,startCellIndex:0,groupOrientation:i,today:null===(t=this._getToday)||void 0===t?void 0:t.call(this),getResourceManager:this.option("getResourceManager"),isProvideVirtualCellsWidth:e,isAllDayPanelVisible:this.isAllDayPanelVisible,selectedCells:this.cellsSelectionState.getSelectedCells(),focusedCell:this.cellsSelectionState.getFocusedCell(),headerCellTextFormat:this._getFormat(),getDateForHeaderText:(e,t)=>t,viewOffset:this.option("viewOffset"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),cellDuration:this.getCellDuration(),viewType:this.type,intervalCount:this.option("intervalCount"),hoursInterval:this.option("hoursInterval"),currentDate:this.option("currentDate"),startDate:this.option("startDate"),firstDayOfWeek:this.option("firstDayOfWeek"),showCurrentTimeIndicator:this.option("showCurrentTimeIndicator")},this.virtualScrollingDispatcher.getRenderState());return a}renovatedRenderSupported(){return!0}_updateGroupTableHeight(){this._isVerticalGroupedWorkSpace()&&(0,E.Vd)()&&this._setHorizontalGroupHeaderCellsHeight()}updateHeaderEmptyCellWidth(){if((0,E.Vd)()&&this._isRenderHeaderPanelEmptyCell()){const e=this.getTimePanelWidth(),t=this.getGroupTableWidth();this._$headerPanelEmptyCell.css("width",e+t)}}updateHeaderPanelScrollbarPadding(){if((0,E.Vd)()&&this._$headerPanelContainer){const e=this._getScrollbarWidth();this._$headerPanelContainer.css("paddingRight",`${e}px`)}}_getScrollbarWidth(){const e=(0,f.A)(this._dateTableScrollable.container()).get(0),t=e.offsetWidth-e.clientWidth;return t}_isGroupsSpecified(e){var t;return(null===(t=this.option("groups"))||void 0===t?void 0:t.length)&&e}_getGroupIndexByGroupValues(e){return e&&le(re(e),this.resourceManager.groupsLeafs)[0]}_getViewStartByOptions(){return go(this.option("startDate"),this.option("currentDate"),this._getIntervalDuration(),this.option("startDate")?this._calculateViewStartDate():void 0)}_getIntervalDuration(){return this.viewDataProvider.getIntervalDuration(this.option("intervalCount"))}_getHeaderDate(){return this.getStartViewDate()}_calculateViewStartDate(){return yo(this.option("startDate"))}_firstDayOfWeek(){return this.viewDataProvider.getFirstDayOfWeek(this.option("firstDayOfWeek"))}_attachEvents(){this._createSelectionChangedAction(),this._attachClickEvent(),this._attachContextMenuEvent()}_attachClickEvent(){const e=this,t=this._createAction(t=>{e._pointerDownHandler(t.event)});this._createCellClickAction();const n=`.${Uf},.${Vf}`,i=this.$element();mt.A.off(i,Zf),mt.A.off(i,Xf),mt.A.on(i,Zf,e=>{(0,ft.Er)(e)&&e.which>1?e.preventDefault():t({event:e})}),mt.A.on(i,Xf,n,t=>{const n=(0,f.A)(t.target);e._cellClickAction({event:t,cellElement:(0,g.cc)(n),cellData:e.getCellData(n)})})}_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick",{afterExecute:e=>this._cellClickHandler(e.args[0].event)})}_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")}_cellClickHandler(e){this._showPopup&&(delete this._showPopup,this._handleSelectedCellsClick())}_pointerDownHandler(e){const t=(0,f.A)(e.target);if(t.hasClass(Uf)||t.hasClass(Vf))if(this._isCellClick=!0,t.hasClass("dx-scheduler-focused-cell"))this._showPopup=!0;else{const e=this._getCoordinatesByCell(t),n=this._hasAllDayClass(t);this._setSelectedCellsStateAndUpdateSelection(n,e,!1,t)}else this._isCellClick=!1}_handleSelectedCellsClick(){const e=this._getSelectedCellsData(),t=e[0],n=e[e.length-1],i={startDate:t.startDate,endDate:n.endDate,startDateUTC:t.startDateUTC,endDateUTC:n.endDateUTC};void 0!==n.allDay&&(i.allDay=n.allDay),this.option("onSelectedCellsClick")(i,n.groups)}_attachContextMenuEvent(){this._createContextMenuAction();const e=`.${Uf},.${Vf}`,t=this.$element(),n=(0,ft.b4)(Hh.U,this.NAME);mt.A.off(t,n,e),mt.A.on(t,n,e,this._contextMenuHandler.bind(this))}_contextMenuHandler(e){const t=(0,f.A)(e.target);this._contextMenuAction({event:e,cellElement:(0,g.cc)(t),cellData:this.getCellData(t)}),this._contextMenuHandled=!0}_createContextMenuAction(){this._contextMenuAction=this._createActionByOption("onCellContextMenu")}_getGroupHeaderContainer(){return this._isVerticalGroupedWorkSpace()?this._$groupTable:this._$thead}_getDateHeaderContainer(){return this._$thead}_getCalculateHeaderCellRepeatCount(){return this._groupedStrategy.calculateHeaderCellRepeatCount()}_updateScrollable(){var e,t;this._dateTableScrollable.update(),null===(e=this._headerScrollable)||void 0===e||e.update(),null===(t=this._sidebarScrollable)||void 0===t||t.update(),this.updateHeaderPanelScrollbarPadding()}_getTimePanelRowCount(){return this._getCellCountInDay()}_getCellCountInDay(){const e=this.option("hoursInterval"),t=this.option("startDayHour"),n=this.option("endDayHour");return this.viewDataProvider.getCellCountInDay(t,n,e)}_getTotalCellCount(e){return this._groupedStrategy.getTotalCellCount(e)}_getTotalRowCount(e,t){let n=this._groupedStrategy.getTotalRowCount(e);return t&&this.isAllDayPanelVisible&&(n+=e),n}_getGroupIndex(e,t){return this._groupedStrategy.getGroupIndex(e,t)}calculateEndDate(e){const{viewDataGenerator:t}=this.viewDataProvider;return t.calculateEndDate(e,t.getInterval(this.option("hoursInterval")),this.option("endDayHour"))}_getGroupCount(){return this.resourceManager.groupCount()}_attachTablesEvents(){const e=this.$element();this._attachDragEvents(e),this._attachPointerEvents(e)}_detachDragEvents(e){mt.A.off(e,qf.ENTER),mt.A.off(e,qf.LEAVE),mt.A.off(e,qf.DROP)}_attachDragEvents(e){this._detachDragEvents(e),mt.A.on(e,qf.ENTER,iy,{checkDropTarget:(e,t)=>!this._isOutsideScrollable(e,t)},e=>{this.preventDefaultDragging||(this.removeDroppableCellClass(),(0,f.A)(e.target).addClass(Yf))}),mt.A.on(e,qf.LEAVE,()=>{this.preventDefaultDragging||this.removeDroppableCellClass()}),mt.A.on(e,qf.DROP,iy,()=>{var e,t;this.dragBehavior&&(null!==(e=this.dragBehavior)&&void 0!==e&&e.dragBetweenComponentsPromise?null===(t=this.dragBehavior.dragBetweenComponentsPromise)||void 0===t||t.then(()=>{this.dragBehavior.removeDroppableClasses()}):this.dragBehavior.removeDroppableClasses())})}_attachPointerEvents(e){let t=!1;mt.A.off(e,Jf),mt.A.off(e,Kf),mt.A.on(e,Kf,iy,e=>{(0,ft.Er)(e)&&1===e.which&&(t=!0,this.$element().addClass(Bf),mt.A.off(on.A.getDocument(),Qf),mt.A.on(on.A.getDocument(),Qf,()=>{t=!1,this.$element().removeClass(Bf)}))}),mt.A.on(e,Jf,iy,e=>{t&&this._dateTableScrollable&&!this._dateTableScrollable.option("scrollByContent")&&(e.preventDefault(),e.stopPropagation(),this._moveToCell((0,f.A)(e.target),!0))})}_getFormat(){return Df()}getWorkArea(){return this._$dateTableContainer}getScrollable(){return this._dateTableScrollable}getScrollableScrollTop(){return this._dateTableScrollable.scrollTop()}getGroupedScrollableScrollTop(e){return this._groupedStrategy.getScrollableScrollTop(e)}getScrollableScrollLeft(){return this._dateTableScrollable.scrollLeft()}getScrollableOuterWidth(){return this._dateTableScrollable.scrollWidth()}getScrollableContainer(){return(0,f.A)(this._dateTableScrollable.container())}getHeaderPanelHeight(){return this._$headerPanel&&(0,yt.P$)(this._$headerPanel,!0)}getTimePanelWidth(){return this._$timePanel&&(0,x.N)(this._$timePanel.get(0)).width}getGroupTableWidth(){return this._$groupTable?(0,yt.Ot)(this._$groupTable):0}getWorkSpaceLeftOffset(){return this._groupedStrategy.getLeftOffset()}_getCellCoordinatesByIndex(e){const t=Math.floor(e/this._getRowCount()),n=e-this._getRowCount()*t;return{columnIndex:t,rowIndex:n}}_getDateGenerationOptions(){var e;return{startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),interval:null===(e=this.viewDataProvider.viewDataGenerator)||void 0===e?void 0:e.getInterval(this.option("hoursInterval")),startViewDate:this.getStartViewDate(),firstDayOfWeek:this._firstDayOfWeek()}}_getIntervalBetween(e,t){const n=this.getStartViewDate(),i=this.option("startDayHour")*ny,a=w.A.getTimezonesDifference(n,e),r=e.getTime()-n.getTime()-a,o=this._getDaysOfInterval(r,i),s=this._getWeekendsCount(o);let l=(o-s)*ty;if(!t){const{hiddenInterval:e}=this.viewDataProvider,t=this.getVisibleDayDuration();l=r-o*e-s*t}return l}_getWeekendsCount(e){return 0}_getDaysOfInterval(e,t){return Math.floor((e+t)/ty)}_updateIndex(e){return e*this._getRowCount()}getDroppableCell(){return this._getDateTables().find(`.${Yf}`)}_getWorkSpaceWidth(){return this.cache.memo("workspaceWidth",()=>{if(this._needCreateCrossScrolling())return(0,x.N)(this._$dateTable.get(0)).width;const e=(0,x.N)(this.$element().get(0)).width,t=this.getTimePanelWidth(),n=this.getGroupTableWidth();return e-t-n})}_getCellByCoordinates(e,t,n){const i=this._groupedStrategy.prepareCellIndexes(e,t,n);return this._dom_getDateCell(i)}_dom_getDateCell(e){return this._$dateTable.find(`tr:not(.${jf})`).eq(e.rowIndex).find(`td:not(.${In})`).eq(e.columnIndex)}_dom_getAllDayPanelCell(e){return this._$allDayPanel.find("tr").eq(0).find("td").eq(e)}_getCells(e,t){const n=e?Vf:Uf;if("vertical"===t){let e=[];for(let t=1;;t++){const i=this.$element().find(`tr .${n}:nth-child(${t})`);if(!i.length)break;e=e.concat(i.toArray())}return(0,f.A)(e)}return this.$element().find(`.${n}`)}_getFirstAndLastDataTableCell(){const e=this.isVirtualScrolling()?`.${Uf}, .${In}`:`.${Uf}`,t=this.$element().find(e);return[t[0],t[t.length-1]]}_getAllCells(e){if(this._isVerticalGroupedWorkSpace())return this._$dateTable.find(`td:not(.${In})`);const t=e&&this.supportAllDayRow()?Vf:Uf;return this.$element().find(`.${t}`)}_setHorizontalGroupHeaderCellsHeight(){const{height:e}=(0,x.N)(this._$dateTable.get(0));(0,yt.NG)(this._$groupTable,e)}_getGroupHeaderCells(){return this.$element().find(`.${zf}`)}_getScrollCoordinates(e,t,n,i,a){const r=n||new Date(this.option("currentDate")),o=this.option("startDayHour"),s=this.option("endDayHour");e<o&&(e=o),e>=s&&(e=s-1),r.setHours(e,t,0,0);const l=this.viewDataProvider.findGlobalCellPosition(r,i,a);return this.virtualScrollingDispatcher.calculateCoordinatesByDataAndPosition(null===l||void 0===l?void 0:l.cellData,null===l||void 0===l?void 0:l.position,r,co(this.type),"vertical"===this.viewDirection)}_isOutsideScrollable(e,t){const n=this._dateTableScrollable.$element(),i=(0,x.N)(n.get(0)),a=(0,E.zk)(),r=!(0,f.A)(e).closest(n).length,o=t.pageX<i.left||t.pageX>i.left+i.width+(a.scrollX||0),s=t.pageY<i.top||t.pageY>i.top+i.height+(a.scrollY||0);return!(r&&!o)&&(s||o)}supportAllDayRow(){return!0}keepOriginalHours(){return!1}_normalizeCellData(e){var t,n;return(0,T.X)(!0,{},{startDate:e.startDate,endDate:e.endDate,startDateUTC:e.startDate&&(null===(t=this.timeZoneCalculator)||void 0===t?void 0:t.createDate(e.startDate,"fromGrid")),endDateUTC:e.endDate&&(null===(n=this.timeZoneCalculator)||void 0===n?void 0:n.createDate(e.endDate,"fromGrid")),groups:e.groups,groupIndex:e.groupIndex,allDay:e.allDay})}_getSelectedCellsData(){const e=this.cellsSelectionState.getSelectedCells();return null===e||void 0===e?void 0:e.map(this._normalizeCellData.bind(this))}getCellData(e){const t=this._getFullCellData(e)??{};return this._normalizeCellData(t)}_getFullCellData(e){const t=e[0];if(t)return this._getDataByCell(e)}_getVirtualRowOffset(){return this.virtualScrollingDispatcher.virtualRowOffset}_getVirtualCellOffset(){return this.virtualScrollingDispatcher.virtualCellOffset}_getDataByCell(e){const t=e.parent().index()-this.virtualScrollingDispatcher.topVirtualRowsCount,n=e.index()-this.virtualScrollingDispatcher.leftVirtualCellsCount,{viewDataProvider:i}=this,a=this._hasAllDayClass(e),r=i.getCellData(t,n,a);return r||void 0}isGroupedByDate(){return this.option("groupByDate")&&this._isHorizontalGroupedWorkSpace()&&this._getGroupCount()>0}getCellIndexByDate(e,t){const{viewDataGenerator:n}=this.viewDataProvider,i=t?864e5:n.getInterval(this.option("hoursInterval")),a=to(this.getStartViewDate(),this.option("startDayHour")),r=this._getIntervalBetween(e,t)+a;let o=Math.floor(r/i);return t&&(o=this._updateIndex(o)),o<0&&(o=0),o}getDataByDroppableCell(){const e=this.getCellData((0,f.A)(this.getDroppableCell())),{allDay:t}=e,{startDate:n}=e,{endDate:i}=e;return{startDate:n,endDate:i,allDay:t,groups:e.groups}}getDateRange(){return[this.getStartViewDate(),this.getEndViewDateByEndDayHour()]}getCellMinWidth(){return 75}getRoundedCellWidth(e,t,n){if(e<0||!(0,E.Vd)())return 0;const i=this.$element().find(`.${Vn}`).eq(0);let a=0;const r=i.find(`.${Uf}`),o=this._getCellCount()*e;n=n||this._getCellCount(),(0,A.O9)(t)||(t=o);for(let s=t;s<o+n;s++){const e=(0,f.A)(r).eq(s).get(0),t=e?(0,x.N)(e).width:0;a+=t}return a/(o+n-t)}getCellWidth(){return Tg(this.getDOMElementsMetaData())}getCellHeight(){return Sg(this.getDOMElementsMetaData())}getAllDayHeight(){return xg(this.option("showAllDayPanel"),this._isVerticalGroupedWorkSpace(),this.getDOMElementsMetaData())}getMaxAllowedPosition(e){return Ag(e,this.viewDataProvider,this.option("rtlEnabled"),this.getDOMElementsMetaData())}getAllDayOffset(){return this._groupedStrategy.getAllDayOffset()}getCellIndexByCoordinates(e,t){const{horizontalScrollingState:n,verticalScrollingState:i}=this.virtualScrollingDispatcher,a=(null===n||void 0===n?void 0:n.itemCount)??this._getTotalCellCount(this._getGroupCount()),r=this.getCellWidth(),o=t?this.getAllDayHeight():this.getCellHeight(),s=(null===n||void 0===n?void 0:n.virtualItemSizeBefore)??0,l=(null===i||void 0===i?void 0:i.virtualItemSizeBefore)??0,u=Math.floor(Math.floor(e.top-l)/Math.floor(o));let d=(e.left-s)/r;return d=Math.floor(d+.05),this._isRTL()&&(d=a-d-1),a*u+d}getStartViewDate(){return this.viewDataProvider.getStartViewDate()}getEndViewDate(){return this.viewDataProvider.getLastCellEndDate()}getEndViewDateByEndDayHour(){return this.viewDataProvider.getLastViewDateByEndDayHour(this.option("endDayHour"))}getCellDuration(){return Do(this.type,this.option("startDayHour"),this.option("endDayHour"),this.option("hoursInterval"))}getIntervalDuration(e){return e?Cf("day"):this.getCellDuration()}getVisibleDayDuration(){const e=this.option("startDayHour"),t=this.option("endDayHour"),n=this.option("hoursInterval");return this.viewDataProvider.getVisibleDayDuration(e,t,n)}getGroupBounds(e){const t=this._groupedStrategy instanceof Ug?this.getGroupBoundsVertical(e.groupIndex):this.getGroupBoundsHorizontal(e);return this._isRTL()?this.getGroupBoundsRtlCorrection(t):t}getGroupBoundsVertical(e){const t=this._getFirstAndLastDataTableCell();return this._groupedStrategy.getGroupBoundsOffset(e,t)}getGroupBoundsHorizontal(e){const t=this._getCellCount(),n=this._getCells(),i=this.getCellWidth(),{groupedDataMap:a}=this.viewDataProvider;return this._groupedStrategy.getGroupBoundsOffset(t,n,i,e,a)}getGroupBoundsRtlCorrection(e){const t=this.getCellWidth();return Object.assign({},e,{left:e.right-2*t,right:e.left+2*t})}needRecalculateResizableArea(){return this._isVerticalGroupedWorkSpace()&&0!==this.getScrollable().scrollTop()}getCellByCoordinates(e,t){const n=this._getCells(t),i=this.getCellIndexByCoordinates(e,t);return n.eq(i)}getVisibleBounds(){const e={},t=this.getScrollable().$element(),n=this.getCellHeight(),i=this.getScrollableScrollTop()/n,a=i+(0,yt.Oq)(t)/n;return e.top={hours:Math.floor(i*this.option("hoursInterval"))+this.option("startDayHour"),minutes:i%2?30:0},e.bottom={hours:Math.floor(a*this.option("hoursInterval"))+this.option("startDayHour"),minutes:Math.floor(a)%2?30:0},e}updateScrollPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.timeZoneCalculator.createDate(e,"toGrid"),a=n&&this.isAllDayPanelVisible;this.needUpdateScrollPosition(i,t,a)&&this.scrollTo(i,t,a,!1)}needUpdateScrollPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this._getCellsInViewport(n),a=this._isGroupsSpecified(t)?this._getGroupIndexByGroupValues(t):0,r=e.getTime(),o=w.A.trimTime(e).getTime();return i.reduce((e,t)=>{const{startDate:i,endDate:s,groupIndex:l}=this.getCellData(t),u=i.getTime(),d=s.getTime();return(!(!n&&u<=r&&r<d||n&&o===u)||a!==l)&&e},!0)}_getCellsInViewport(e){const t=this.getScrollable().$element(),n=this.getCellHeight(),i=this.getCellWidth(),a=this._getTotalCellCount(this._getGroupCount()),r=this.getScrollableScrollTop(),o=this.getScrollableScrollLeft(),s=r/n-this.virtualScrollingDispatcher.topVirtualRowsCount;let l=Math.floor(s);r%n!==0&&(l+=1);const u=o/i;let d=Math.floor(u);o%i!==0&&(d+=1);const c=Math.floor(s+(0,yt.Oq)(t)/n),p=Math.floor(u+(0,yt.RG)(t)/i),h=this._getAllCells(e),m=[];return h.each(function(e){const t=(0,f.A)(this),n=e%a,i=e/a;d<=n&&n<p&&l<=i&&i<c&&m.push(t)}),m}scrollTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this._isValidScrollDate(e,i))return;const a=this._getGroupCount()&&t?this._getGroupIndexByGroupValues(t):0,r=n&&this.isAllDayPanelVisible,o=this._getScrollCoordinates(e.getHours(),e.getMinutes(),e,a,r),s=this.getScrollable(),l=s.$element(),u=this.getCellWidth(),d=this.option("rtlEnabled")?u:0,c=(0,yt.Oq)(l),p=(0,yt.RG)(l),h=this.getCellHeight(),m=(p-u)/2,g=(c-h)/2,f=o.left-s.scrollLeft()-m-d;let y=o.top-s.scrollTop()-g;r&&!this._isVerticalGroupedWorkSpace()&&(y=0),this.option("templatesRenderAsynchronously")?setTimeout(()=>{s.scrollBy({left:f,top:y})}):s.scrollBy({left:f,top:y})}_isValidScrollDate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.getStartViewDate(),i=this.getEndViewDate();return!(e<n||e>i)||(t&&I.A.log("W1008",e),!1)}needApplyCollectorOffset(){return!1}removeDroppableCellClass(e){const t=e||this.getDroppableCell();null===t||void 0===t||t.removeClass(Yf)}_getCoordinatesByCell(e){const t=e.index()-this.virtualScrollingDispatcher.leftVirtualCellsCount;let n=e.parent().index();const i=this._hasAllDayClass(e),a=this._isVerticalGroupedWorkSpace();return i&&!a||(n-=this.virtualScrollingDispatcher.topVirtualRowsCount),{rowIndex:n,columnIndex:t}}_isShowAllDayPanel(){return this.option("showAllDayPanel")}_getTimePanelCells(){return this.$element().find(`.${Ef}`)}_getRDateTableProps(){return{viewData:this.viewDataProvider.viewData,viewContext:this.getR1ComponentsViewContext(),dataCellTemplate:this.option("dataCellTemplate"),addDateTableClass:!this.option("crossScrollingEnabled")||this.isVirtualScrolling(),groupOrientation:this.option("groupOrientation"),addVerticalSizesClassToRows:!1}}getR1ComponentsViewContext(){return{view:{type:this.type},crossScrollingEnabled:Boolean(this.option("crossScrollingEnabled"))}}_updateSelectedCellDataOption(e,t){this.option("selectedCellData",e),this._selectionChangedAction({selectedCellData:e})}_getCellByData(e){const{startDate:t,groupIndex:n,allDay:i,index:a}=e,r=this.viewDataProvider.findCellPositionInMap({startDate:t,groupIndex:n,isAllDay:i,index:a});if(r)return i&&!this._isVerticalGroupedWorkSpace()?this._dom_getAllDayPanelCell(r.columnIndex):this._dom_getDateCell(r)}getDOMElementsMetaData(){return this.cache.memo("cellElementsMeta",()=>({dateTableCellsMeta:this._getDateTableDOMElementsInfo(),allDayPanelCellsMeta:this._getAllDayPanelDOMElementsInfo()}))}getPanelDOMSize(e){return"allDayPanel"===e?this.cache.memo("allDayPanelSize",()=>(0,x.N)(this._$allDayPanel.get(0))):this.cache.memo("regularPanelSize",()=>(0,x.N)(this._getDateTable().get(0)))}getCollectorDimension(e,t){return this.cache.memo(`collectorSize-${t}`,()=>$r.measureCollectorDimensions("allDayPanel"===t?this.getAllDayContainer():this.getFixedContainer(),e))}_getDateTableDOMElementsInfo(){const e=this._getAllCells(!1);if(!e.length||!(0,E.Vd)())return[[{}]];const t=this._getDateTable(),n=(0,x.N)(t.get(0)),i=this.viewDataProvider.getColumnsCount(),a=[];return e.each((e,t)=>{const r=Math.floor(e/i);a.length===r&&a.push([]),this._addCellMetaData(a[r],t,n)}),a}_getAllDayPanelDOMElementsInfo(){const e=[];if(this.isAllDayPanelVisible&&!this._isVerticalGroupedWorkSpace()&&(0,E.Vd)()){const t=this._getAllCells(!0);if(!t.length)return[{}];const n=this._$allDayPanel,i=(0,x.N)(n.get(0));t.each((t,n)=>{this._addCellMetaData(e,n,i)})}return e}_addCellMetaData(e,t,n){const i=(0,x.N)(t);e.push({left:i.left-n.left,top:i.top-n.top,width:i.width,height:i.height})}_oldRender_getAllDayCellData(e){return(t,n,i)=>{const a=i%this._getCellCount(),r=this._getDateGenerationOptions(!0);let o=this.viewDataProvider.viewDataGenerator.getDateByCellIndices(r,n,a);o=w.A.trimTime(o);let s=e||0;this.isGroupedByDate()?s=Math.floor(i%this._getGroupCount()):this._isHorizontalGroupedWorkSpace()&&(s=Math.floor(i/this._getCellCount()));const l={startDate:o,endDate:o,allDay:!0,groupIndex:s,groups:Fn(this.resourceManager.groupsLeafs,s)};return{key:ey,value:l}}}renderRWorkSpace(){let{header:e,timePanel:t,dateTable:n,allDayPanel:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ry.renderComponents;e&&this.renderRHeaderPanel(),t&&this.renderRTimeTable(),n&&this.renderRDateTable(),i&&this.renderRAllDayPanel()}renderRDateTable(){Fr.renovation.renderComponent(this,this._$dateTable,Sm,"renovatedDateTable",this._getRDateTableProps())}renderRGroupPanel(){var e;const t={viewContext:this.getR1ComponentsViewContext(),groups:this.option("groups"),groupOrientation:this.option("groupOrientation"),groupByDate:this.isGroupedByDate(),resourceCellTemplate:this.option("resourceCellTemplate"),className:this.verticalGroupTableClass,groupPanelData:this.viewDataProvider.getGroupPanelData(this.generateRenderOptions())};null!==(e=this.option("groups"))&&void 0!==e&&e.length?(this._attachGroupCountClass(),Fr.renovation.renderComponent(this,this._getGroupHeaderContainer(),Fm,"renovatedGroupPanel",t)):this._detachGroupCountClass()}renderRAllDayPanel(){const e=this.isAllDayPanelVisible&&!this.isGroupedAllDayPanel();if(e){var t;this._updateAllDayVisibility();const e=Object.assign({viewData:this.viewDataProvider.viewData,viewContext:this.getR1ComponentsViewContext(),dataCellTemplate:this.option("dataCellTemplate"),startCellIndex:0},(null===(t=this.virtualScrollingDispatcher.horizontalVirtualScrolling)||void 0===t?void 0:t.getRenderState())||{});Fr.renovation.renderComponent(this,this._$allDayTable,Tm,"renovatedAllDayPanel",e),Fr.renovation.renderComponent(this,this._$allDayTitle,jh,"renovatedAllDayPanelTitle",{})}this._updateAllDayVisibility(),this._updateScrollable()}renderRTimeTable(){Fr.renovation.renderComponent(this,this._$timePanel,sg,"renovatedTimePanel",{viewContext:this.getR1ComponentsViewContext(),timePanelData:this.viewDataProvider.timePanelData,timeCellTemplate:this.option("timeCellTemplate"),groupOrientation:this.option("groupOrientation")})}renderRHeaderPanel(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null!==(e=this.option("groups"))&&void 0!==e&&e.length?this._attachGroupCountClass():this._detachGroupCountClass(),Fr.renovation.renderComponent(this,this._$thead,this.renovatedHeaderPanelComponent,"renovatedHeaderPanel",{viewContext:this.getR1ComponentsViewContext(),dateHeaderData:this.viewDataProvider.dateHeaderData,groupPanelData:this.viewDataProvider.getGroupPanelData(this.generateRenderOptions()),dateCellTemplate:this.option("dateCellTemplate"),timeCellTemplate:this.option("timeCellTemplate"),groups:this.option("groups"),groupByDate:this.isGroupedByDate(),groupOrientation:this.option("groupOrientation"),resourceCellTemplate:this.option("resourceCellTemplate"),isRenderDateHeader:t})}initDragBehavior(e){if(!this.dragBehavior&&e){this.dragBehavior=new hg(e);const t=(0,f.A)(e.element());this._createDragBehavior(this.getWorkArea(),t),this._isVerticalGroupedWorkSpace()||this._createDragBehavior(this._$allDayPanel,t)}}_createDragBehavior(e,t){const n={getItemData:(e,t)=>t._getItemData(e),getItemSettings:e=>e.data(hn)};this._createDragBehaviorBase(e,t,n)}_createDragBehaviorBase(e,t,n){const i=this.$element().find(`.${yn}`);this.dragBehavior.addTo(e,sy(i,t,this.isDefaultDraggingMode,this.dragBehavior,()=>{this.isDefaultDraggingMode||(this.preventDefaultDragging=!1)},()=>{this.isDefaultDraggingMode||(this.preventDefaultDragging=!0)},()=>this.getDroppableCell(),()=>this._getDateTables(),()=>this.removeDroppableCellClass(),()=>this.getCellWidth(),n))}_isRenderHeaderPanelEmptyCell(){return this._isVerticalGroupedWorkSpace()}_dispose(){super._dispose(),this.virtualScrollingDispatcher.dispose()}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{currentDate:new Date,intervalCount:1,startDate:null,firstDayOfWeek:void 0,startDayHour:0,endDayHour:24,viewOffset:0,hoursInterval:.5,activeStateEnabled:!0,hoverStateEnabled:!0,groups:[],showAllDayPanel:!0,allDayExpanded:!1,onCellClick:null,crossScrollingEnabled:!1,dataCellTemplate:null,timeCellTemplate:null,resourceCellTemplate:null,dateCellTemplate:null,allowMultipleCellSelection:!0,indicatorTime:new Date,indicatorUpdateInterval:5*Cf("minute"),shadeUntilCurrentTime:!0,groupOrientation:"horizontal",selectedCellData:[],groupByDate:!1,scrolling:{mode:"standard"},allDayPanelMode:"all",renovateRender:!0,height:void 0,draggingMode:"outlook",onScrollEnd:()=>{},getHeaderHeight:void 0,onRenderAppointments:()=>{},onShowAllDayPanel:()=>{},onSelectedCellsClick:()=>{},timeZoneCalculator:void 0,schedulerHeight:void 0,schedulerWidth:void 0})}_optionChanged(e){switch(e.name){case"startDayHour":case"endDayHour":case"viewOffset":case"dateCellTemplate":case"resourceCellTemplate":case"dataCellTemplate":case"timeCellTemplate":case"hoursInterval":case"firstDayOfWeek":case"currentDate":case"startDate":this._cleanWorkSpace();break;case"groups":this._cleanView(),this._removeAllDayElements(),this._initGrouping(),this.repaint();break;case"groupOrientation":this._initGroupedStrategy(),this._createAllDayPanelElements(),this._removeAllDayElements(),this._cleanWorkSpace(),this._toggleGroupByDateClass();break;case"showAllDayPanel":this._isVerticalGroupedWorkSpace()?(this._cleanView(),this._removeAllDayElements(),this._initGrouping(),this.repaint()):this.isRenovatedRender()?this.renderWorkSpace():(this._updateAllDayVisibility(),this._updateScrollable());break;case"allDayExpanded":this._updateAllDayExpansion(),this._attachTablesEvents(),this._updateScrollable();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"onCellClick":this._createCellClickAction();break;case"onCellContextMenu":this._attachContextMenuEvent();break;case"intervalCount":this._cleanWorkSpace(),this._toggleWorkSpaceCountClass();break;case"groupByDate":this._cleanWorkSpace(),this._toggleGroupByDateClass();break;case"crossScrollingEnabled":this._toggleHorizontalScrollClass(),this._dateTableScrollable.option(this._dateTableScrollableConfig());break;case"allDayPanelMode":this.updateShowAllDayPanel(),this.updateAppointments();break;case"width":super._optionChanged(e),this._dimensionChanged();break;case"timeZoneCalculator":case"allowMultipleCellSelection":case"selectedCellData":break;case"renovateRender":case"scrolling":this.repaint();break;case"schedulerHeight":case"schedulerWidth":this.virtualScrollingDispatcher.updateDimensions(!0);break;default:super._optionChanged(e)}}updateShowAllDayPanel(){const e="hidden"===this.option("allDayPanelMode");this.option("onShowAllDayPanel")(!e)}_getVirtualScrollingDispatcherOptions(){return{getCellHeight:this.getCellHeight.bind(this),getCellWidth:this.getCellWidth.bind(this),getCellMinWidth:this.getCellMinWidth.bind(this),isRTL:this._isRTL.bind(this),getSchedulerHeight:()=>this.option("schedulerHeight"),getSchedulerWidth:()=>this.option("schedulerWidth"),getViewHeight:()=>this.$element().height?this.$element().height():(0,yt.Oq)(this.$element()),getViewWidth:()=>this.$element().width?this.$element().width():(0,yt.RG)(this.$element()),getWindowHeight:()=>(0,E.zk)().innerHeight,getWindowWidth:()=>(0,E.zk)().innerWidth,getScrolling:()=>this.option("scrolling"),getScrollableOuterWidth:this.getScrollableOuterWidth.bind(this),getScrollable:this.getScrollable.bind(this),createAction:this._createAction.bind(this),updateRender:this.updateRender.bind(this),updateGrid:this.updateGrid.bind(this),getGroupCount:this._getGroupCount.bind(this),isVerticalGrouping:this._isVerticalGroupedWorkSpace.bind(this),getTotalRowCount:this._getTotalRowCount.bind(this),getTotalCellCount:this._getTotalCellCount.bind(this)}}_cleanWorkSpace(){this._cleanView(),this._toggleGroupedClass(),this._toggleWorkSpaceWithOddCells(),this.virtualScrollingDispatcher.updateDimensions(!0),this._renderView(),this.option("crossScrollingEnabled")&&this._setTableSizes(),this.cache.clear()}_init(){this._scrollSync={},this._viewDataProvider=null,this._cellsSelectionState=null,super._init(),this._initGrouping(),this._toggleHorizontalScrollClass(),this._toggleWorkSpaceCountClass(),this._toggleGroupByDateClass(),this._toggleWorkSpaceWithOddCells(),this.$element().addClass(vf).addClass(this._getElementClass())}_initPositionHelper(){this.positionHelper=new Eg({key:this.option("key"),viewDataProvider:this.viewDataProvider,viewStartDayHour:this.option("startDayHour"),viewEndDayHour:this.option("endDayHour"),cellDuration:this.getCellDuration(),groupedStrategy:this._groupedStrategy,isGroupedByDate:this.isGroupedByDate(),rtlEnabled:this.option("rtlEnabled"),startViewDate:this.getStartViewDate(),isVerticalGrouping:this._isVerticalGroupedWorkSpace(),groupCount:this._getGroupCount(),isVirtualScrolling:this.isVirtualScrolling(),getDOMMetaDataCallback:this.getDOMElementsMetaData.bind(this)})}_initGrouping(){this._initGroupedStrategy(),this._toggleGroupingDirectionClass(),this._toggleGroupByDateClass()}isVerticalOrientation(){var e;const t=null!==(e=this.option("groups"))&&void 0!==e&&e.length?this.option("groupOrientation"):this._getDefaultGroupStrategy();return"vertical"===t}_initGroupedStrategy(){const e=this.isVerticalOrientation()?Ug:Lg;this._groupedStrategy=new e(this)}_getDefaultGroupStrategy(){return"horizontal"}_toggleHorizontalScrollClass(){this.$element().toggleClass(Sf,this.option("crossScrollingEnabled"))}_toggleGroupByDateClass(){this.$element().toggleClass(xf,this.isGroupedByDate())}_toggleWorkSpaceCountClass(){this.$element().toggleClass(Tf,this._isWorkSpaceWithCount())}_toggleWorkSpaceWithOddCells(){this.$element().toggleClass(Af,this._isWorkspaceWithOddCells())}_toggleGroupingDirectionClass(){this.$element().toggleClass(wf,this._isVerticalGroupedWorkSpace())}_getDateTableCellClass(e,t){const n=`${Uf} ${Hf} ${Gf}`;return this._groupedStrategy.addAdditionalGroupCellClasses(n,t+1,e,t)}_getGroupHeaderClass(e){const t=zf;return this._groupedStrategy.addAdditionalGroupCellClasses(t,e+1)}_initWorkSpaceUnits(){this._$headerPanelContainer=(0,f.A)("<div>").addClass("dx-scheduler-header-panel-container"),this._$headerTablesContainer=(0,f.A)("<div>").addClass("dx-scheduler-header-tables-container"),this._$headerPanel=(0,f.A)("<table>").attr("aria-hidden",!0),this._$thead=(0,f.A)("<thead>").appendTo(this._$headerPanel),this._$headerPanelEmptyCell=(0,f.A)("<div>").addClass("dx-scheduler-header-panel-empty-cell"),this._$allDayTable=(0,f.A)("<table>").attr("aria-hidden",!0),this._$fixedContainer=(0,f.A)("<div>").addClass(yn),this._$allDayContainer=(0,f.A)("<div>").addClass(Rf),this._$dateTableScrollableContent=(0,f.A)("<div>").addClass("dx-scheduler-date-table-scrollable-content"),this._$sidebarScrollableContent=(0,f.A)("<div>").addClass("dx-scheduler-side-bar-scrollable-content"),this._initAllDayPanelElements(),this.isRenovatedRender()?this.createRAllDayPanelElements():this._createAllDayPanelElements(),this._$timePanel=(0,f.A)("<table>").addClass(Rn).attr("aria-hidden",!0),this._$dateTable=(0,f.A)("<table>").attr("aria-hidden",!0),this._$dateTableContainer=(0,f.A)("<div>").addClass("dx-scheduler-date-table-container"),this._$groupTable=(0,f.A)("<div>").addClass(bf)}_initAllDayPanelElements(){this._allDayTitles=[],this._allDayTables=[],this._allDayPanels=[]}_initDateTableScrollable(){const e=(0,f.A)("<div>").addClass("dx-scheduler-date-table-scrollable");this._dateTableScrollable=this._createComponent(e,lg.A,this._dateTableScrollableConfig()),this._scrollSync.dateTable=Nh(()=>this._dateTableScrollable)}_createWorkSpaceElements(){this.option("crossScrollingEnabled")?this._createWorkSpaceScrollableElements():this._createWorkSpaceStaticElements()}_createWorkSpaceStaticElements(){var e;(this._$dateTableContainer.append(this._$dateTable),this._isVerticalGroupedWorkSpace())?(this._$dateTableContainer.append(this._$allDayContainer),this._$dateTableScrollableContent.append(this._$groupTable,this._$timePanel,this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$headerTablesContainer.append(this._$headerPanel)):(this._$dateTableScrollableContent.append(this._$timePanel,this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$headerTablesContainer.append(this._$headerPanel,this._$allDayPanel),null===(e=this._$allDayPanel)||void 0===e||e.append(this._$allDayContainer,this._$allDayTable));this._appendHeaderPanelEmptyCellIfNecessary(),this._$headerPanelContainer.append(this._$headerTablesContainer),this.$element().append(this._$fixedContainer).append(this._$headerPanelContainer).append(this._dateTableScrollable.$element())}_createWorkSpaceScrollableElements(){var e;(this.$element().append(this._$fixedContainer),this._$flexContainer=(0,f.A)("<div>").addClass("dx-scheduler-work-space-flex-container"),this._createHeaderScrollable(),this._headerScrollable.$content().append(this._$headerPanel),this._appendHeaderPanelEmptyCellIfNecessary(),this._$headerPanelContainer.append(this._$headerTablesContainer),this.$element().append(this._$headerPanelContainer),this.$element().append(this._$flexContainer),this._createSidebarScrollable(),this._$flexContainer.append(this._dateTableScrollable.$element()),this._$dateTableContainer.append(this._$dateTable),this._$dateTableScrollableContent.append(this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._isVerticalGroupedWorkSpace())?(this._$dateTableContainer.append(this._$allDayContainer),this._$sidebarScrollableContent.append(this._$groupTable,this._$timePanel)):(this._headerScrollable.$content().append(this._$allDayPanel),null===(e=this._$allDayPanel)||void 0===e||e.append(this._$allDayContainer,this._$allDayTable),this._$sidebarScrollableContent.append(this._$timePanel));this._sidebarScrollable.$content().append(this._$sidebarScrollableContent)}_appendHeaderPanelEmptyCellIfNecessary(){this._isRenderHeaderPanelEmptyCell()&&this._$headerPanelContainer.append(this._$headerPanelEmptyCell)}_createHeaderScrollable(){const e=(0,f.A)("<div>").addClass("dx-scheduler-header-scrollable").appendTo(this._$headerTablesContainer);this._headerScrollable=this._createComponent(e,lg.A,this._headerScrollableConfig()),this._scrollSync.header=Nh(()=>this._headerScrollable)}_createSidebarScrollable(){const e=(0,f.A)("<div>").addClass("dx-scheduler-sidebar-scrollable").appendTo(this._$flexContainer);this._sidebarScrollable=this._createComponent(e,lg.A,{useKeyboard:!1,showScrollbar:"never",direction:"vertical",useNative:!1,updateManually:!0,bounceEnabled:!1,onScroll:e=>{this._scrollSync.dateTable({top:e.scrollOffset.top})}}),this._scrollSync.sidebar=Nh(()=>this._sidebarScrollable)}_attachTableClasses(){if(this._addTableClass(this._$dateTable,Mn),this._isVerticalGroupedWorkSpace()){const e=this._getGroupCount();for(let t=0;t<e;t++)this._addTableClass(this._allDayTables[t],If)}else this.isRenovatedRender()||this._addTableClass(this._$allDayTable,If)}_attachHeaderTableClasses(){this._addTableClass(this._$headerPanel,Nf)}_addTableClass(e,t){e&&!e.hasClass(t)&&e.addClass(t)}_initMarkup(){this.cache.clear(),this._initWorkSpaceUnits(),this._initVirtualScrolling(),this._initDateTableScrollable(),this._createWorkSpaceElements(),super._initMarkup(),this.option("crossScrollingEnabled")||(this._attachTableClasses(),this._attachHeaderTableClasses()),this._toggleGroupedClass(),this._renderView(),this._attachEvents()}_render(){super._render(),this._renderDateTimeIndication(),this._setIndicationUpdateInterval()}_toggleGroupedClass(){this.$element().toggleClass(_f,this._getGroupCount()>0)}_renderView(){this.isRenovatedRender()?this._isVerticalGroupedWorkSpace()&&this.renderRGroupPanel():this._applyCellTemplates(this._renderGroupHeader()),this.renderWorkSpace(),this.isRenovatedRender()&&this.virtualScrollingDispatcher.updateDimensions(),this._updateGroupTableHeight(),this.updateHeaderEmptyCellWidth(),this._shader=new _g(this)}updateCellsSelection(){const e=this.generateRenderOptions();this.viewDataProvider.updateViewData(e),this.renderRWorkSpace({timePanel:!0,dateTable:!0,allDayPanel:!0})}_renderDateTimeIndication(){return(0,v.lQ)()}renderCurrentDateTimeLineAndShader(){return(0,v.lQ)()}renderCurrentDateTimeIndication(){return(0,v.lQ)()}_setIndicationUpdateInterval(){return(0,v.lQ)()}_detachGroupCountClass(){Hn.forEach(e=>{this.$element().removeClass(e)})}_attachGroupCountClass(){const e=this._groupedStrategy.getGroupCountClass(this.option("groups"));this.$element().addClass(e)}_getDateHeaderTemplate(){return this.option("dateCellTemplate")}_updateAllDayVisibility(){this.$element().toggleClass($f,this._isShowAllDayPanel()),this._updateAllDayExpansion()}_updateAllDayExpansion(){const e=!this.option("allDayExpanded")&&this._isShowAllDayPanel();this.cache.clear(),this.$element().toggleClass(Wf,e)}_getDateTables(){return this._$dateTable.add(this._$allDayTable)}_getDateTable(){return this._$dateTable}_removeAllDayElements(){var e,t;null===(e=this._$allDayTable)||void 0===e||e.remove(),null===(t=this._$allDayTitle)||void 0===t||t.remove()}_cleanView(){var e,t,n;(this.cache.clear(),this._cleanTableWidths(),this.cellsSelectionState.clearSelectedAndFocusedCells(),this.isRenovatedRender())||(this._$thead.empty(),this._$dateTable.empty(),this._$timePanel.empty(),this._$groupTable.empty(),null===(t=this._$allDayTable)||void 0===t||t.empty(),null===(n=this._$sidebarTable)||void 0===n||n.empty());null===(e=this._shader)||void 0===e||e.clean(),delete this._interval}_clean(){mt.A.off(on.A.getDocument(),Qf),this._disposeRenovatedComponents(),super._clean()}_cleanTableWidths(){var e;this._$headerPanel.css("width",""),this._$dateTable.css("width",""),null===(e=this._$allDayTable)||void 0===e||e.css("width","")}_disposeRenovatedComponents(){var e,t,n,i,a;null===(e=this.renovatedAllDayPanel)||void 0===e||e.dispose(),this.renovatedAllDayPanel=void 0,null===(t=this.renovatedDateTable)||void 0===t||t.dispose(),this.renovatedDateTable=void 0,null===(n=this.renovatedTimePanel)||void 0===n||n.dispose(),this.renovatedTimePanel=void 0,null===(i=this.renovatedGroupPanel)||void 0===i||i.dispose(),this.renovatedGroupPanel=void 0,null===(a=this.renovatedHeaderPanel)||void 0===a||a.dispose(),this.renovatedHeaderPanel=void 0}getGroupedStrategy(){return this._groupedStrategy}getFixedContainer(){return this._$fixedContainer}getAllDayContainer(){return this._$allDayContainer}updateRender(){this.renderer.updateRender()}updateGrid(){this.renderer._renderGrid()}updateAppointments(){var e;this.option("onRenderAppointments")(),null===(e=this.dragBehavior)||void 0===e||e.updateDragSource()}_createAllDayPanelElements(){const e=this._getGroupCount();if(this._isVerticalGroupedWorkSpace()&&0!==e)for(let t=0;t<e;t++){const e=(0,f.A)("<div>").addClass(Mf).text(p.A.format("dxScheduler-allDay"));this._allDayTitles.push(e),this._$allDayTable=(0,f.A)("<table>").attr("aria-hidden",!0),this._allDayTables.push(this._$allDayTable),this._$allDayPanel=(0,f.A)("<div>").addClass(Of).append(this._$allDayTable),this._allDayPanels.push(this._$allDayPanel)}else this._$allDayTitle=(0,f.A)("<div>").addClass(Mf).text(p.A.format("dxScheduler-allDay")).appendTo(this.$element()),this._$allDayTable=(0,f.A)("<table>").attr("aria-hidden",!0),this._$allDayPanel=(0,f.A)("<div>").addClass(Of).append(this._$allDayTable)}renderWorkSpace(){let{generateNewData:e,renderComponents:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ry;this.cache.clear(),this.viewDataProvider.update(this.generateRenderOptions(),e),this.isRenovatedRender()?this.renderRWorkSpace(t):(this._renderDateHeader(),this._renderTimePanel(),this._renderGroupAllDayPanel(),this._renderDateTable(),this._renderAllDayPanel()),this._initPositionHelper()}_renderGroupHeader(){const e=this._getGroupHeaderContainer(),t=this._getGroupCount();let n=[];if(t){const t=this._makeGroupRows(this.option("groups"),this.option("groupByDate"));this._attachGroupCountClass(),e.append(t.elements),n=t.cellTemplates}else this._detachGroupCountClass();return n}_applyCellTemplates(e){null===e||void 0===e||e.forEach(e=>{e()})}_makeGroupRows(e,t){const n=this._isVerticalGroupedWorkSpace()?yf.VERTICAL:yf.HORIZONTAL;return yf.makeGroupedTable(n,e,{groupHeaderRowClass:Pn,groupRowClass:Pn,groupHeaderClass:this._getGroupHeaderClass.bind(this),groupHeaderContentClass:$n},this._getCellCount()||1,this.option("resourceCellTemplate"),this._getGroupCount(),t)}_renderDateHeader(){const e=this._getDateHeaderContainer(),t=(0,f.A)("<tr>").addClass(Lf),n=this._getCellCount(),i=this._getDateHeaderTemplate(),a=this._getCalculateHeaderCellRepeatCount(),r=[],o=this.isGroupedByDate();if(o){const s=o?this._getGroupCount():1;for(let e=0;e<n;e++){const n=e*a,o=this._renderDateHeaderTemplate(t,e,n,i,r);o.attr("colSpan",s)}e.prepend(t)}else{for(let e=0;e<a;e++)for(let a=0;a<n;a++){const o=e*n+a;this._renderDateHeaderTemplate(t,a,o,i,r)}e.append(t)}return this._applyCellTemplates(r),t}_renderDateHeaderTemplate(e,t,n,i,a){const r=this.isGroupedByDate()?Math.floor(n/this._getGroupCount()):n,{completeDateHeaderMap:o}=this.viewDataProvider,{text:s,startDate:l}=o[o.length-1][r],u=(0,f.A)("<th>").addClass(this._getHeaderPanelCellClass(t)).attr("title",s);return null!==i&&void 0!==i&&i.render?a.push(i.render.bind(i,{model:Object.assign({text:s,date:l},this._getGroupsForDateHeaderTemplate(n)),index:n,container:(0,g.cc)(u)})):u.text(s),e.append(u),u}_getGroupsForDateHeaderTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()){const n=this._getGroupIndex(0,e*t),i=Fn(this.resourceManager.groupsLeafs,n);return{groups:i,groupIndex:n}}return{}}_getHeaderPanelCellClass(e){const t=`${Ff} ${Hf}`;return this._groupedStrategy.addAdditionalGroupCellClasses(t,e+1,void 0,void 0,this.isGroupedByDate())}_renderAllDayPanel(e){let t=this._getCellCount();this._isVerticalGroupedWorkSpace()||(t*=this._getGroupCount()||1);const n=this._renderTableBody({container:this._allDayPanels.length?(0,g.cc)(this._allDayTables[e]):(0,g.cc)(this._$allDayTable),rowCount:1,cellCount:t,cellClass:this._getAllDayPanelCellClass.bind(this),rowClass:Pf,cellTemplate:this.option("dataCellTemplate"),getCellData:this._oldRender_getAllDayCellData(e),groupIndex:e},!0);this._updateAllDayVisibility(),this._updateScrollable(),this._applyCellTemplates(n)}_renderGroupAllDayPanel(){if(this._isVerticalGroupedWorkSpace()){const e=this._getGroupCount();for(let t=0;t<e;t++)this._renderAllDayPanel(t)}}_getAllDayPanelCellClass(e,t){const n=`${Vf} ${Hf}`;return this._groupedStrategy.addAdditionalGroupCellClasses(n,t+1)}_renderTimePanel(){const e=this._groupedStrategy.calculateTimeCellRepeatCount(),t=(e,t)=>{let n=0;this.isAllDayPanelVisible&&(n=1),this.isGroupedAllDayPanel()&&(n=Math.ceil((e+1)/this._getRowCount()));const i=e+n;return this.viewDataProvider.completeTimePanelMap[i][t]};this._renderTableBody({container:(0,g.cc)(this._$timePanel),rowCount:this._getTimePanelRowCount()*e,cellCount:1,cellClass:this._getTimeCellClass.bind(this),rowClass:kf,cellTemplate:this.option("timeCellTemplate"),getCellText:e=>t(e,"text"),getCellDate:e=>t(e,"startDate"),groupCount:this._getGroupCount(),allDayElements:this._insertAllDayRowsIntoDateTable()?this._allDayTitles:void 0,getTemplateData:(e=>{if(!this._isVerticalGroupedWorkSpace())return{};const t=this._getGroupIndex(e,0),n=Fn(this.resourceManager.groupsLeafs,t);return{groupIndex:t,groups:n}}).bind(this)})}_getTimeCellClass(e){const t=`${Ef} ${Gf}`;return this._isVerticalGroupedWorkSpace()?this._groupedStrategy.addAdditionalGroupCellClasses(t,e,e):t}_renderDateTable(){const e=this._getGroupCount();this._renderTableBody({container:(0,g.cc)(this._$dateTable),rowCount:this._getTotalRowCount(e),cellCount:this._getTotalCellCount(e),cellClass:this._getDateTableCellClass.bind(this),rowClass:Vn,cellTemplate:this.option("dataCellTemplate"),getCellData:(e,t,n)=>{const i=this.isGroupedAllDayPanel();let a=t;if(i){const e=this._getRowCount(),n=Math.ceil(t/e);a+=n}const{cellData:r}=this.viewDataProvider.viewDataMap.dateTableMap[a][n];return{value:this._normalizeCellData(r),fullValue:r,key:ey}},allDayElements:this._insertAllDayRowsIntoDateTable()?this._allDayPanels:void 0,groupCount:e,groupByDate:this.option("groupByDate")})}_insertAllDayRowsIntoDateTable(){return this._groupedStrategy.insertAllDayRowsIntoDateTable()}_renderTableBody(e,t){let n=[];return t?n=yf.makeTable(e):this._applyCellTemplates(yf.makeTable(e)),n}}const sy=(e,t,n,i,a,r,o,s,l,u,d)=>{const c={dragElement:void 0,itemData:void 0},p=()=>{const{itemData:e}=c;if(e){const t=(0,_.Hz)("disabled");return t(e)}return!0},h=d.isSetCursorOffset?()=>{const e=(0,f.A)(c.dragElement);return{x:(0,yt.RG)(e)/2,y:(0,yt.Oq)(e)/2}}:void 0;return{container:e,dragTemplate:()=>c.dragElement,onDragStart:e=>{n||r();const t=e.cancel,{event:a}=e,o=(0,f.A)(e.itemElement),s=e.component._appointments;c.itemData=d.getItemData(e.itemElement,s);const l=d.getItemSettings(o,e),{initialPosition:u}=d;p()||(a.data=a.data||{},t||(l.isCompact||i.updateDragSource(c.itemData,l),c.dragElement=((e,t,n)=>{const i=n.option("items").length,a=n._renderItem(i,Object.assign({itemData:e},t,{isCompact:!1,virtual:!1,sortedIndex:-1}));return a})(c.itemData,l,s),a.data.itemElement=c.dragElement,a.data.initialPosition=u??(0,an.x5)((0,f.A)(c.dragElement)),a.data.itemData=c.itemData,a.data.itemSettings=l,i.onDragStart(a.data),(0,an.fw)((0,f.A)(c.dragElement))))},onDragMove:()=>{if(n)return;const e=(()=>{const e=(0,yt.RG)(c.dragElement),t=u(),n=e>t,i=e<=10,a=(0,f.A)(c.dragElement).parent().get(0),r=(0,x.N)(a),o=r.left,s=r.top;return n?on.A.elementsFromPoint(o+10,s+10,a):i?on.A.elementsFromPoint(o,s,a):on.A.elementsFromPoint(o+e/2,s+10,a)})(),i=Boolean(e.find(e=>e===t.get(0))),a=s(),r=e.find(e=>{const{classList:t}=e,n=1===a.find(e).length;return n&&(t.contains(Uf)||t.contains(Vf))});r?(o().is(r)||l(),(0,f.A)(r).addClass(Yf)):i||l()},onDragEnd:e=>{var t;n||a(),p()||i.onDragEnd(e),null===(t=c.dragElement)||void 0===t||t.remove(),l()},onDragCancel:e=>{var t,i;n||a(),l(),null===(t=e.itemElement)||void 0===t||null===(i=t.removeClass)||void 0===i||i.call(t,Tn)},cursorOffset:h,filter:d.filter}};var ly=oy;const{tableCreator:uy}=Ph,dy="dx-scheduler-agenda",cy="dx-scheduler-agenda-date",py="dx-scheduler-group-table",hy="dx-scheduler-time-panel-row",my="dx-scheduler-time-panel-cell",gy="dx-scheduler-agenda-nodata",fy="dx-scheduler-date-table-last-row";class yy extends ly{constructor(){super(...arguments),this._rows=[]}_activeStateUnit(){return Mh.Of}get type(){return Lr.AGENDA}getStartViewDate(){return this._startViewDate}_init(){super._init()}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{agendaDuration:7,rowHeight:60,noDataText:""})}_optionChanged(e){const{name:t}=e,{value:n}=e;switch(t){case"agendaDuration":break;case"noDataText":case"rowHeight":this._recalculateAgenda(this._rows);break;case"groups":null!==n&&void 0!==n&&n.length?this._$groupTable||(this._initGroupTable(),this._dateTableScrollable.$content().prepend(this._$groupTable)):this._$groupTable&&(this._$groupTable.remove(),this._$groupTable=null,this._detachGroupCountClass()),super._optionChanged(e);break;default:super._optionChanged(e)}}_renderFocusState(){return(0,v.lQ)()}_renderFocusTarget(){return(0,v.lQ)()}_cleanFocusState(){return(0,v.lQ)()}supportAllDayRow(){return!1}_isVerticalGroupedWorkSpace(){return!1}_getElementClass(){return dy}_getRowCount(){return this.option("agendaDuration")}_getCellCount(){return 1}_getTimePanelRowCount(){return this.option("agendaDuration")}_renderAllDayPanel(){return(0,v.lQ)()}_updateAllDayVisibility(){return(0,v.lQ)()}_updateAllDayHeight(){return(0,v.lQ)()}_initWorkSpaceUnits(){this._initGroupTable(),this._$timePanel=(0,f.A)("<table>").attr("aria-hidden",!0).addClass(Rn),this._$dateTable=(0,f.A)("<table>").attr("aria-hidden",!0).addClass(Mn),this._$dateTableScrollableContent=(0,f.A)("<div>").addClass("dx-scheduler-date-table-scrollable-content"),this._$dateTableContainer=(0,f.A)("<div>").addClass("dx-scheduler-date-table-container")}_initGroupTable(){const e=this.option("groups");null!==e&&void 0!==e&&e.length&&(this._$groupTable=(0,f.A)("<table>").attr("aria-hidden",!0).addClass(py))}_renderView(){this._startViewDate=fs.calculateStartViewDate(this.option("currentDate"),this.option("startDayHour")),this._rows=[]}_recalculateAgenda(e){let t=[];this._cleanView(),this._rowsIsEmpty(e)?this._renderNoData():(this._rows=e,this._$groupTable&&(t=this._renderGroupHeader(),this._setGroupHeaderCellsHeight()),this._renderTimePanel(),this._renderDateTable(),this._applyCellTemplates(t),this._dateTableScrollable.update())}_renderNoData(){this._$noDataContainer=(0,f.A)("<div>").addClass(gy).html(this.option("noDataText")),this._dateTableScrollable.$content().append(this._$noDataContainer)}_setTableSizes(){return(0,v.lQ)()}_toggleHorizontalScrollClass(){return(0,v.lQ)()}_createCrossScrollingConfig(e){return(0,v.lQ)()}_setGroupHeaderCellsHeight(){const e=this._getGroupHeaderCells().filter((e,t)=>!t.getAttribute("rowSpan")),t=this._removeEmptyRows(this._rows);if(t.length)for(let n=0;n<e.length;n++){const i=e.eq(n).find(".dx-scheduler-group-header-content");(0,yt.NG)(i,this._getGroupRowHeight(t[n]))}}_rowsIsEmpty(e){let t=!0;for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(i[e]){t=!1;break}}return t}_attachGroupCountClass(){const e=Qr(this.option("groups"));this.$element().addClass(e)}_removeEmptyRows(e){const t=[];for(let i=0;i<e.length;i++)e[i].length&&(n=e[i],n.some(e=>e>0))&&t.push(e[i]);var n;return t}_getGroupHeaderContainer(){return this._$groupTable}_makeGroupRows(){const e=this.option("getResourceManager")(),t=this.option("getFilteredItems")(),n=Bh(e.resourceById,e.groupsTree,t),i=this.option("resourceCellTemplate"),a=$n,r=[],o=uy.makeGroupedTableFromJSON(n,{cellTag:"th",groupTableClass:py,groupRowClass:Pn,groupCellClass:this._getGroupHeaderClass(),groupCellCustomContent(t,n,o,s){const l=on.A.createElement("div");l.className=a;const u=s.grouped[s.resourceIndex],d=e.resourceById[s.resourceIndex],c=null===d||void 0===d?void 0:d.data.find(e=>d.dataAccessor.get("id",e)===u),p=null===d||void 0===d?void 0:d.items.find(e=>e.id===u);if(null!==i&&void 0!==i&&i.render)r.push(i.render.bind(i,{model:{data:c,id:u,color:null===p||void 0===p?void 0:p.color,text:n.textContent},container:(0,g.cc)((0,f.A)(l)),index:o}));else{const e=on.A.createElement("div");e.appendChild(n),l.appendChild(e)}t.appendChild(l)},cellTemplate:i});return{elements:(0,f.A)(o).find(`.${Pn}`),cellTemplates:r}}_cleanView(){this._$dateTable.empty(),this._$timePanel.empty(),this._$groupTable&&this._$groupTable.empty(),this._$noDataContainer&&(this._$noDataContainer.empty(),this._$noDataContainer.remove(),delete this._$noDataContainer)}_createWorkSpaceElements(){this._createWorkSpaceStaticElements()}_createWorkSpaceStaticElements(){this._$dateTableContainer.append(this._$dateTable),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$groupTable&&this._$dateTableScrollableContent.prepend(this._$groupTable),this._$dateTableScrollableContent.append(this._$timePanel,this._$dateTableContainer),this.$element().append(this._dateTableScrollable.$element())}_renderDateTable(){this._renderTableBody({container:(0,g.cc)(this._$dateTable),rowClass:Vn,cellClass:this._getDateTableCellClass()})}_attachTablesEvents(){return(0,v.lQ)()}_attachEvents(){return(0,v.lQ)()}_cleanCellDataCache(){return(0,v.lQ)()}isIndicationAvailable(){return!1}_prepareCellTemplateOptions(e,t,n,i){const a=this.resourceManager.groupsLeafs[n],r=(null===a||void 0===a?void 0:a.grouped)??{},o=null===a||void 0===a?void 0:a.groupIndex;return{model:{text:e,date:t,groups:r,groupIndex:o},container:(0,g.cc)(i),index:n}}_renderTableBody(e,t){const n=[],i=e.cellTemplate;let a;this._$rows=[];const r=function(t,r){if(r){let s,l,u;const d=(0,f.A)("<tr>"),p=(0,f.A)("<td>");var o;if((0,yt.k$)(p,this._getRowHeight(r)),e.getStartDate)s=null===(o=e.getStartDate)||void 0===o?void 0:o.call(e,t),l=c.A.format(s,"d"),u=c.A.format(s,ms);if(null!==i&&void 0!==i&&i.render){const e=this._prepareCellTemplateOptions(`${l} ${u}`,s,a,p);n.push(i.render.bind(i,e))}else l&&u&&p.addClass(cy).text(`${l} ${u}`);e.rowClass&&d.addClass(e.rowClass),e.cellClass&&p.addClass(e.cellClass),d.append(p),this._$rows.push(d)}}.bind(this);for(a=0;a<this._rows.length;a++)(0,un.__)(this._rows[a],r),this._setLastRowClass();(0,f.A)(e.container).append((0,f.A)("<tbody>").append(this._$rows)),this._applyCellTemplates(n)}_setLastRowClass(){if(this._rows.length>1&&this._$rows.length){const e=this._$rows[this._$rows.length-1];e.addClass(fy)}}_renderTimePanel(){this._renderTableBody({container:(0,g.cc)(this._$timePanel),rowCount:this._getTimePanelRowCount(),cellCount:1,rowClass:hy,cellClass:my,cellTemplate:this.option("dateCellTemplate"),getStartDate:this._getTimePanelStartDate.bind(this)})}_getTimePanelStartDate(e){const t=new Date(this.option("currentDate")),n=new Date(t.setDate(t.getDate()+e));return n}_getRowHeight(e){const t=this.option("rowHeight"),n=5*(e-1);return e?t*e+n+20:0}_getGroupRowHeight(e){if(!e)return;let t=0;for(let n=0;n<e.length;n++)t+=this._getRowHeight(e[n]);return t}renderAgendaLayout(e){this._renderView();const t=fs.calculateRows(e,this.option("agendaDuration"),this.getStartViewDate(),this.resourceManager.groupCount());this._recalculateAgenda(t)}getAgendaVerticalStepHeight(){return this.option("rowHeight")}getEndViewDate(){const e=new Date(this.option("currentDate")),t=this.option("agendaDuration");e.setHours(this.option("endDayHour"));const n=e.setDate(e.getDate()+t-1)-6e4;return new Date(n)}getEndViewDateByEndDayHour(){return this.getEndViewDate()}updateScrollPosition(e){const t=this.timeZoneCalculator.createDate(e,"toGrid"),n=this.getVisibleBounds(),i=t.getHours(),a=t.getMinutes();this.needUpdateScrollPosition(i,a,n,t)&&this.scrollTo(t)}needUpdateScrollPosition(e,t,n,i){let a=!1;return(e<n.top.hours||e>n.bottom.hours)&&(a=!0),e===n.top.hours&&t<n.top.minutes&&(a=!0),e===n.bottom.hours&&t>n.top.minutes&&(a=!0),a}renovatedRenderSupported(){return!1}_setSelectedCellsByCellData(){}_getIntervalDuration(){return w.A.dateToMilliseconds("day")*this.option("intervalCount")}getDOMElementsMetaData(){return{dateTableCellsMeta:[[{}]],allDayPanelCellsMeta:[{}]}}}(0,h.A)("dxSchedulerAgenda",yy);var Dy=yy;class Cy extends fg{renderShader(){const e=this._workSpace._isHorizontalGroupedWorkSpace()?this._workSpace._getGroupCount():1;for(let t=0;t<e;t+=1){const e=0===t,n=e?this._$shader:this.createShader();this._workSpace.isGroupedByDate()?this._customizeGroupedByDateShader(n,t):this._customizeShader(n,t),!e&&this._shader.push(n)}}_customizeShader(e,t){const n=this._workSpace.getIndicationWidth();if(this._applyShaderWidth(e,n),t>=1){const t=this._workSpace,n=t._getCellCount()*t.getCellWidth();e.css("left",n)}else e.css("left",0)}_applyShaderWidth(e,t){const n=(0,x.N)(this._$container.get(0)).width;t>n&&(t=n),t>0&&(0,yt.zj)(e,t)}_customizeGroupedByDateShader(e,t){const n=this._workSpace.getIndicationCellCount(),i=Math.floor(n),a=n-i,r=0===t,o=this._workSpace,s=r?o.getIndicationWidth():a*o.getCellWidth();let l;this._applyShaderWidth(e,s),l=r?o._getCellCount()*o.getCellWidth()*t:o.getCellWidth()*i*o._getGroupCount()+t*o.getCellWidth(),e.css("left",l)}}var vy=Cy;const _y=w.A.dateToMilliseconds,wy="dx-scheduler-time-panel-current-time-cell";class by extends ly{_getToday(){const e=this.option("viewOffset"),t=To(this.option("indicatorTime"),this.timeZoneCalculator);return R.X.addOffsets(t,-e)}isIndicationOnView(){if(this.option("showCurrentTimeIndicator")){const e=this._getToday(),t=w.A.trimTime(this.getEndViewDate());return w.A.dateInRange(e,this.getStartViewDate(),new Date(t.getTime()+_y("day")))}return!1}isIndicationAvailable(){if(!(0,E.Vd)())return!1;const e=this._getToday();return e>=w.A.trimTime(new Date(this.getStartViewDate()))}isIndicatorVisible(){const e=this._getToday(),t=new Date(this.getEndViewDate().getTime()+_y("minute")-1),n=new Date(this.getStartViewDate());return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),w.A.dateInRange(e,n,t)}_renderIndicator(e,t,n,i){const a=this.isGroupedByDate(),r=a?1:i;for(let o=0;o<r;o++){const r=this._createIndicator(n);(0,yt.zj)(r,a?this.getCellWidth()*i:this.getCellWidth()),this._groupedStrategy.shiftIndicator(r,e,t,o)}}_createIndicator(e){const t=(0,f.A)("<div>").addClass("dx-scheduler-date-time-indicator");return e.append(t),t}_getRtlOffset(e){return this.option("rtlEnabled")?(0,x.N)(this._dateTableScrollable.$content().get(0)).width-this.getTimePanelWidth()-e:0}_setIndicationUpdateInterval(){this.option("showCurrentTimeIndicator")&&0!==this.option("indicatorUpdateInterval")&&(this._clearIndicatorUpdateInterval(),this._indicatorInterval=setInterval(()=>{this.renderCurrentDateTimeIndication()},this.option("indicatorUpdateInterval")))}_clearIndicatorUpdateInterval(){this._indicatorInterval&&(clearInterval(this._indicatorInterval),delete this._indicatorInterval)}_isVerticalShader(){return!0}getIndicationWidth(e){const t=this.getCellWidth()*this._getCellCount();let n=this._getIndicatorDuration();n>this._getCellCount()&&(n=this._getCellCount());const i=n*this.getRoundedCellWidth(e,e*this._getCellCount(),n);return t<i?t:i}getIndicatorOffset(e){const t=this._getIndicatorDuration()-1,n=t*this.getRoundedCellWidth(e,e*this._getCellCount(),t);return n}_getIndicatorDuration(){const e=this._getToday(),t=new Date(this.getStartViewDate());let n=e.getTime()-t.getTime();return"workWeek"===this.option("type")&&(n-=this._getWeekendsCount(Math.round(n/_y("day")))*_y("day")),Math.ceil((n+1)/_y("day"))}getIndicationHeight(){const e=Y.A.getDateWithoutTimezoneChange(this._getToday()),t=this.getCellHeight(),n=new Date(this.getStartViewDate());this.isIndicationOnView()&&n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());const i=e.getTime()-n.getTime(),a=i/this.getCellDuration();return a*t}_dispose(){this._clearIndicatorUpdateInterval(),super._dispose.apply(this,arguments)}renderCurrentDateTimeIndication(){this.renderCurrentDateTimeLineAndShader(),this.isRenovatedRender()&&this.renderWorkSpace({generateNewData:!0,renderComponents:{header:!0,timePanel:!0}})}renderCurrentDateTimeLineAndShader(){var e;this._cleanDateTimeIndicator(),null===(e=this._shader)||void 0===e||e.clean(),this._renderDateTimeIndication()}_isCurrentTimeHeaderCell(e){if(this.isIndicationOnView()){const{completeDateHeaderMap:t}=this.viewDataProvider,n=t[t.length-1][e].startDate;return w.A.sameDate(n,this._getToday())}return!1}_getHeaderPanelCellClass(e){const t=super._getHeaderPanelCellClass(e);return this._isCurrentTimeHeaderCell(e)?`${t} ${On}`:t}_cleanView(){super._cleanView(),this._cleanDateTimeIndicator()}_dimensionChanged(){super._dimensionChanged(),this.renderCurrentDateTimeLineAndShader()}_cleanDateTimeIndicator(){this.$element().find(".dx-scheduler-date-time-indicator").remove()}_cleanWorkSpace(){super._cleanWorkSpace(),this._renderDateTimeIndication(),this._setIndicationUpdateInterval()}_optionChanged(e){switch(e.name){case"showCurrentTimeIndicator":case"indicatorTime":this._cleanWorkSpace();break;case"indicatorUpdateInterval":this._setIndicationUpdateInterval();break;case"showAllDayPanel":case"allDayExpanded":case"crossScrollingEnabled":super._optionChanged(e),this.renderCurrentDateTimeIndication();break;case"shadeUntilCurrentTime":this.renderCurrentDateTimeIndication();break;default:super._optionChanged(e)}}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{showCurrentTimeIndicator:!0,indicatorTime:new Date,indicatorUpdateInterval:5*_y("minute"),shadeUntilCurrentTime:!0})}_getCurrentTimePanelCellIndices(){const e=this._getTimePanelRowCount(),t=this._getToday(),n=this.getCellIndexByDate(t),{rowIndex:i}=this._getCellCoordinatesByIndex(n);if(void 0===i)return[];let a;a=0===i?[i]:i%2===0?[i-1,i]:[i,i+1];const r=this._isVerticalGroupedWorkSpace()?this._getGroupCount():1;return[...new Array(r)].reduce((t,n,i)=>[...t,...a.map(t=>e*i+t)],[])}_renderDateTimeIndication(){if(!this.isIndicationAvailable())return;if(this.option("shadeUntilCurrentTime")&&this._shader.render(),!this.isIndicationOnView()||!this.isIndicatorVisible())return;const e=this._getGroupCount()||1,t=this._dateTableScrollable.$content(),n=this.getIndicationHeight(),i=this._getRtlOffset(this.getCellWidth());this._renderIndicator(n,i,t,e),this.isRenovatedRender()||this._setCurrentTimeCells()}_setCurrentTimeCells(){const e=this._getTimePanelCells(),t=this._getCurrentTimePanelCellIndices();t.forEach(t=>{e.eq(t).addClass(wy)})}_cleanCurrentTimeCells(){this.$element().find(`.${wy}`).removeClass(wy)}}(0,h.A)("dxSchedulerWorkSpace",by);var Sy=by;const{tableCreator:Ty}=Ph,xy="dx-scheduler-timeline",Ay="dx-scheduler-group-table",Ey="dx-scheduler-work-space-horizontal-grouped",ky="dx-scheduler-header-panel-cell",Oy="dx-scheduler-header-panel-week-cell",Iy="dx-scheduler-header-row",Ry="horizontal",My=w.A.dateToMilliseconds;class Vy extends Sy{constructor(){super(...arguments),this.viewDirection="horizontal"}get verticalGroupTableClass(){return Ay}get renovatedHeaderPanelComponent(){return ng}getGroupTableWidth(){return this._$sidebarTable?(0,yt.Ot)(this._$sidebarTable):0}_getTotalRowCount(e){return this._isHorizontalGroupedWorkSpace()?this._getRowCount():(e=e||1,this._getRowCount()*e)}_getFormat(){return"shorttime"}_getWorkSpaceHeight(){return this.option("crossScrollingEnabled")&&(0,E.Vd)()?(0,x.N)(this._$dateTable.get(0)).height:(0,x.N)(this.$element().get(0)).height}_dateTableScrollableConfig(){const e=super._dateTableScrollableConfig(),t={direction:Ry};return this.option("crossScrollingEnabled")?e:(0,T.X)(e,t)}_needCreateCrossScrolling(){return!0}_headerScrollableConfig(){const e=super._headerScrollableConfig();return(0,T.X)(e,{scrollByContent:!0})}supportAllDayRow(){return!1}_getGroupHeaderContainer(){return this._isHorizontalGroupedWorkSpace()?this._$thead:this._$sidebarTable}_insertAllDayRowsIntoDateTable(){return!1}_needRenderWeekHeader(){return!1}_incrementDate(e){e.setDate(e.getDate()+1)}getIndicationCellCount(){const e=this._getTimeDiff();return this._calculateDurationInCells(e)}_getTimeDiff(){let e=this._getToday();const t=this._getIndicationFirstViewDate(),n=this.getStartViewDate(),i=Y.A.getDaylightOffsetInMs(n,e);return i&&(e=new Date(e.getTime()+i)),e.getTime()-t.getTime()}_calculateDurationInCells(e){const t=this._getToday(),n=Math.floor(e/My("day"));let i=(e-n*My("day")-this.option("startDayHour")*My("hour"))/this.getCellDuration();return t.getHours()>this.option("endDayHour")&&(i=this._getCellCountInDay()),i<0&&(i=0),n*this._getCellCountInDay()+i}getIndicationWidth(){if(this.isGroupedByDate()){const e=this.getIndicationCellCount(),t=Math.floor(e),n=e-t;return this.getCellWidth()*(t*this._getGroupCount()+n)}return this.getIndicationCellCount()*this.getCellWidth()}_isVerticalShader(){return!1}_isCurrentTimeHeaderCell(){return!1}_setTableSizes(){super._setTableSizes();const e=this._getWorkSpaceMinHeight();(0,yt.k$)(this._$sidebarTable,e),(0,yt.k$)(this._$dateTable,e),this.virtualScrollingDispatcher.updateDimensions()}_getWorkSpaceMinHeight(){let e=this._getWorkSpaceHeight();const t=(0,yt.P$)(this._$flexContainer,!0);return e<t&&(e=t),e}_getCellCoordinatesByIndex(e){return{columnIndex:e%this._getCellCount(),rowIndex:0}}_getCellByCoordinates(e,t){const n=this._groupedStrategy.prepareCellIndexes(e,t);return this._$dateTable.find("tr").eq(n.rowIndex).find("td").eq(n.columnIndex)}_getWorkSpaceWidth(){return(0,yt.Ot)(this._$dateTable,!0)}_getIndicationFirstViewDate(){return w.A.trimTime(new Date(this.getStartViewDate()))}_getIntervalBetween(e,t){const n=this.option("startDayHour"),i=this.option("endDayHour"),a=this.getStartViewDate(),r=a.getTime(),o=(24-i+n)*My("hour"),s=w.A.getTimezonesDifference(a,e),l=e.getTime(),u=l-r-s,d=Math.floor(u/My("day")),c=u-d*My("day");let p=0;const h=this._getCellCountInDay()*(d-this._getWeekendsCount(d)),m=l-w.A.trimTime(new Date(e)).getTime();let g=h*this.option("hoursInterval")*My("hour");if(!t){const t=e.getHours();switch(!0){case t<n:p=c-o+m;break;case t>=n&&t<i:p=c;break;case t>=i:p=c-(m-i*My("hour"));break;case!d:g=u}g+=p}return g}_getWeekendsCount(e){return 0}getAllDayContainer(){return null}getTimePanelWidth(){return 0}getIntervalDuration(e){return this.getCellDuration()}getCellMinWidth(){return 0}getWorkSpaceLeftOffset(){return 0}renderRAllDayPanel(){}renderRTimeTable(){}_renderGroupAllDayPanel(){}generateRenderOptions(e){const t=super.generateRenderOptions(!0);return Object.assign({},t,{isGenerateWeekDaysHeaderData:this._needRenderWeekHeader(),getDateForHeaderText:_s.getDateForHeaderText})}_init(){super._init(),this.$element().addClass(xy),this._$sidebarTable=(0,f.A)("<div>").addClass(Ay)}_getDefaultGroupStrategy(){return"vertical"}_toggleGroupingDirectionClass(){this.$element().toggleClass(Ey,this._isHorizontalGroupedWorkSpace())}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{groupOrientation:"vertical"})}_createWorkSpaceElements(){this._createWorkSpaceScrollableElements()}_updateAllDayVisibility(){return(0,v.lQ)()}_updateAllDayHeight(){return(0,v.lQ)()}_getDateHeaderTemplate(){return this.option("timeCellTemplate")}_renderView(){let e;this.isRenovatedRender()||(e=this._renderGroupHeader()),this.renderWorkSpace(),this.isRenovatedRender()&&this.virtualScrollingDispatcher.updateDimensions(),this._shader=new vy(this),this._$sidebarTable.appendTo(this._sidebarScrollable.$content()),this.isRenovatedRender()&&this._isVerticalGroupedWorkSpace()&&this.renderRGroupPanel(),this.updateHeaderEmptyCellWidth(),this._applyCellTemplates(e)}_setHorizontalGroupHeaderCellsHeight(){return(0,v.lQ)()}_getTimePanelCells(){return this.$element().find(`.${ky}:not(.${Oy})`)}_getCurrentTimePanelCellIndices(){const e=this._getCellCount(),t=this._getToday(),n=this.getCellIndexByDate(t),{columnIndex:i}=this._getCellCoordinatesByIndex(n);if(void 0===i)return[];const a=this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()?this._getGroupCount():1;return[...new Array(a)].map((t,n)=>e*n+i)}_renderTimePanel(){return(0,v.lQ)()}_renderAllDayPanel(){return(0,v.lQ)()}_createAllDayPanelElements(){return(0,v.lQ)()}_renderDateHeader(){const e=super._renderDateHeader();if(this._needRenderWeekHeader()){const t=new Date(this.getStartViewDate());let n=new Date(t);const i=[],a=this._getGroupCount(),r=this._getCellCountInDay(),o=this.isGroupedByDate()?r*a:r,s=this.option("dateCellTemplate"),l=this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()?a:1,u=this.viewDataProvider.viewDataGenerator.daysInInterval*this.option("intervalCount"),d=u*l;for(let e=0;e<d;e++){const a=(0,f.A)("<th>"),r=gs(n);if(s){const t={model:Object.assign({text:r,date:new Date(n)},this._getGroupsForDateHeaderTemplate(e,o)),container:a,index:e};s.render(t)}else a.text(r);a.addClass(ky).addClass(Oy).attr("colSpan",o),i.push(a),e%u===u-1?n=new Date(t):this._incrementDate(n)}const c=(0,f.A)("<tr>").addClass(Iy).append(i);e.before(c)}}_renderIndicator(e,t,n,i){let a;const r=this.getIndicationWidth();if("vertical"===this.option("groupOrientation"))a=this._createIndicator(n),(0,yt.k$)(a,(0,x.N)(n.get(0)).height),a.css("left",t?t-r:r);else for(let o=0;o<i;o++){const e=this.isGroupedByDate()?o*this.getCellWidth():this._getCellCount()*this.getCellWidth()*o;a=this._createIndicator(n),(0,yt.k$)(a,(0,x.N)(n.get(0)).height),a.css("left",t?t-r-e:r+e)}}_makeGroupRows(e,t){const n="vertical"===this.option("groupOrientation")?Ty.VERTICAL:Ty.HORIZONTAL;return Ty.makeGroupedTable(n,e,{groupRowClass:Pn,groupHeaderRowClass:Pn,groupHeaderClass:this._getGroupHeaderClass.bind(this),groupHeaderContentClass:$n},this._getCellCount()||1,this.option("resourceCellTemplate"),this._getTotalRowCount(this._getGroupCount()),t)}_setCurrentTimeCells(){const e=this._getTimePanelCells(),t=this._getCurrentTimePanelCellIndices();t.forEach(t=>{e.eq(t).addClass(On)})}_cleanCurrentTimeCells(){this.$element().find(`.${On}`).removeClass(On)}}(0,h.A)("dxSchedulerTimeline",Vy);var Py=Vy;const $y="dx-scheduler-timeline-day";class Wy extends Py{get type(){return Lr.TIMELINE_DAY}_getElementClass(){return $y}_needRenderWeekHeader(){return this._isWorkSpaceWithCount()}}(0,h.A)("dxSchedulerTimelineDay",Wy);var By=Wy;const Hy="dx-scheduler-timeline-month";class Gy extends Py{constructor(){super(...arguments),this.viewDirection="horizontal"}get type(){return Lr.TIMELINE_MONTH}get renovatedHeaderPanelComponent(){return Qm}_renderView(){super._renderView(),this._updateScrollable()}_getElementClass(){return Hy}_getDateHeaderTemplate(){return this.option("dateCellTemplate")}_calculateDurationInCells(e){return e/this.getCellDuration()}isIndicatorVisible(){return!0}_getFormat(){return gs}_getIntervalBetween(e){const t=this.getStartViewDate(),n=w.A.getTimezonesDifference(t,e);return e.getTime()-(t.getTime()-36e5*this.option("startDayHour"))-n}_getViewStartByOptions(){return vs.getViewStartByOptions(this.option("startDate"),this.option("currentDate"),this.option("intervalCount"),w.A.getFirstMonthDate(this.option("startDate")))}generateRenderOptions(){const e=super.generateRenderOptions(!0);return Object.assign({},e,{getDateForHeaderText:(e,t)=>t})}keepOriginalHours(){return!0}}(0,h.A)("dxSchedulerTimelineMonth",Gy);var Ny=Gy;const Fy="dx-scheduler-timeline-week";class Ly extends Py{get type(){return Lr.TIMELINE_WEEK}_getElementClass(){return Fy}_getHeaderPanelCellWidth(e){return(0,x.N)(e.children().first().get(0)).width}_needRenderWeekHeader(){return!0}_incrementDate(e){e.setDate(e.getDate()+1)}}(0,h.A)("dxSchedulerTimelineWeek",Ly);const zy="dx-scheduler-timeline-work-week";class Uy extends Ly{get type(){return Lr.TIMELINE_WORK_WEEK}constructor(){super(...arguments),this._getWeekendsCount=Oo}_getElementClass(){return zy}_incrementDate(e){const t=e.getDay();5===t&&e.setDate(e.getDate()+2),super._incrementDate(e)}}(0,h.A)("dxSchedulerTimelineWorkWeek",Uy);var jy=Uy;class Yy extends Sy{_getFormat(){return gs}generateRenderOptions(){const e=super.generateRenderOptions();return Object.assign({},e,{isGenerateTimePanelData:!0})}_isRenderHeaderPanelEmptyCell(){return!0}}var Zy=Yy;const qy="dx-scheduler-work-space-day";class Xy extends Zy{get type(){return Lr.DAY}_getElementClass(){return qy}_renderDateHeader(){return 1===this.option("intervalCount")?null:super._renderDateHeader()}renderRHeaderPanel(){1===this.option("intervalCount")?super.renderRHeaderPanel(!1):super.renderRHeaderPanel(!0)}}(0,h.A)("dxSchedulerWorkSpaceDay",Xy);var Ky=Xy;const Qy="dx-scheduler-work-space-month",Jy="dx-scheduler-date-table-current-date",eD="dx-scheduler-date-table-cell-text",tD="dx-scheduler-date-table-first-of-month",nD="dx-scheduler-date-table-other-month",iD=w.A.dateToMilliseconds;class aD extends Sy{get type(){return Lr.MONTH}_getElementClass(){return Qy}_getFormat(){return ms}_getIntervalBetween(e){const t=this.getStartViewDate(),n=w.A.getTimezonesDifference(t,e);return e.getTime()-(t.getTime()-36e5*this.option("startDayHour"))-n}_getDateGenerationOptions(){return Object.assign({},super._getDateGenerationOptions(),{cellCountInDay:1})}getCellWidth(){return this.cache.memo("cellWidth",()=>{let e=0;const t=this._getCells().slice(0,7);return t.each((t,n)=>{e+=(0,E.Vd)()?(0,x.N)(n).width:0}),0===t.length?void 0:e/7})}_insertAllDayRowsIntoDateTable(){return!1}_getCellCoordinatesByIndex(e){const t=Math.floor(e/this._getCellCount()),n=e-this._getCellCount()*t;return{rowIndex:t,columnIndex:n}}_needCreateCrossScrolling(){return this.option("crossScrollingEnabled")||this._isVerticalGroupedWorkSpace()}_getViewStartByOptions(){return vs.getViewStartByOptions(this.option("startDate"),this.option("currentDate"),this.option("intervalCount"),w.A.getFirstMonthDate(this.option("startDate")))}_updateIndex(e){return e}isIndicationAvailable(){return!1}getIntervalDuration(){return iD("day")}getTimePanelWidth(){return 0}supportAllDayRow(){return!1}keepOriginalHours(){return!0}getWorkSpaceLeftOffset(){return 0}needApplyCollectorOffset(){return!0}_getHeaderDate(){return this._getViewStartByOptions()}renderRAllDayPanel(){}renderRTimeTable(){}renderRDateTable(){Fr.renovation.renderComponent(this,this._$dateTable,km,"renovatedDateTable",this._getRDateTableProps())}_createWorkSpaceElements(){this._isVerticalGroupedWorkSpace()?this._createWorkSpaceScrollableElements():super._createWorkSpaceElements()}_updateAllDayVisibility(){return(0,v.lQ)()}_updateAllDayHeight(){return(0,v.lQ)()}_renderTimePanel(){return(0,v.lQ)()}_renderAllDayPanel(){return(0,v.lQ)()}_setMonthClassesToCell(e,t){e.toggleClass(Jy,t.isCurrentDate).toggleClass(tD,t.isFirstDayMonthHighlighting).toggleClass(nD,t.otherMonth)}_createAllDayPanelElements(){}_renderTableBody(e){e.getCellText=(e,t)=>{const n=this.viewDataProvider.completeViewDataMap[e][t].startDate;return vs.getCellText(n,this.option("intervalCount"))},e.getCellTextClass=eD,e.setAdditionalClasses=this._setMonthClassesToCell.bind(this),super._renderTableBody(e)}}(0,h.A)("dxSchedulerWorkSpaceMonth",aD);var rD=aD;const oD="dx-scheduler-work-space-week";class sD extends Zy{get type(){return Lr.WEEK}_getElementClass(){return oD}_calculateViewStartDate(){return Ds.calculateViewStartDate(this.option("startDate"),this._firstDayOfWeek())}}(0,h.A)("dxSchedulerWorkSpaceWeek",sD);var lD=sD;const uD="dx-scheduler-work-space-work-week";class dD extends lD{get type(){return Lr.WORK_WEEK}constructor(){super(...arguments),this._getWeekendsCount=Oo}_getElementClass(){return uD}}(0,h.A)("dxSchedulerWorkSpaceWorkWeek",dD);var cD=dD;const pD=w.A.dateToMilliseconds,hD="dx-scheduler",mD=`${hD}-small`,gD=`${hD}-adaptive`,fD=`${hD}-readonly`,yD="yyyyMMddTHHmmss",DD=`${yD}Z`,CD={day:{workSpace:Ky,renderingStrategy:"vertical"},week:{workSpace:lD,renderingStrategy:"vertical"},workWeek:{workSpace:cD,renderingStrategy:"vertical"},month:{workSpace:rD,renderingStrategy:"horizontalMonth"},timelineDay:{workSpace:By,renderingStrategy:"horizontal"},timelineWeek:{workSpace:Ly,renderingStrategy:"horizontal"},timelineWorkWeek:{workSpace:jy,renderingStrategy:"horizontal"},timelineMonth:{workSpace:Ny,renderingStrategy:"horizontalMonthLine"},agenda:{workSpace:Dy,renderingStrategy:"agenda"}},vD={ADDING:"onAppointmentAdding",ADDED:"onAppointmentAdded",DELETING:"onAppointmentDeleting",DELETED:"onAppointmentDeleted",UPDATING:"onAppointmentUpdating",UPDATED:"onAppointmentUpdated"},_D={SERIES:"editSeries",OCCURRENCE:"editOccurrence",CANCEL:"cancel"};class wD extends ll{constructor(){super(...arguments),this._updatingAppointments=new Set}get timeZoneCalculator(){return this._timeZoneCalculator||(this._timeZoneCalculator=Os(this.option("timeZone"))),this._timeZoneCalculator}_postponeDataSourceLoading(e){this.postponedOperations.add("_reloadDataSource",this._reloadDataSource.bind(this),e)}_postponeResourceLoading(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.postponedOperations.add("loadResources",()=>{const t=this.getViewOption("groups");return(0,S.Sx)(this.resourceManager.loadGroupResources(t,e))}),n=new S.cY;return t.done(()=>{n.resolve()}),this._postponeDataSourceLoading(t),n.promise()}_optionChanged(e){var t;this.schedulerOptionChanged(e);const{value:n,name:i}=e;switch(e.name){case"customizeDateNavigatorText":this._updateOption("header",i,n);break;case"firstDayOfWeek":this._updateOption("workSpace",i,n),this._updateOption("header",i,n),this._cleanPopup();break;case"currentDate":{const e=this.getViewOption(i);this.option("selectedCellData",[]),this._updateOption("workSpace",i,e),this._updateOption("header",i,e),this._updateOption("header","startViewDate",this.getStartViewDate()),this._appointments.option("items",[]),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break}case"dataSource":this._initDataSource(),this._postponeResourceLoading().done(()=>{this.appointmentDataSource.setDataSource(this._dataSource),this._filterAppointmentsByDate(),this._updateOption("workSpace","showAllDayPanel",this.option("showAllDayPanel"))});break;case"min":case"max":{const e=this.getViewOption(i);this._updateOption("header",i,e),this._updateOption("workSpace",i,e);break}case"views":this.currentView?this.repaint():this._updateOption("header","views",this.views);break;case"useDropDownViewSwitcher":this._updateOption("header",i,n);break;case"currentView":this._appointments.option({items:[],allowDrag:this._allowDragging(),allowResize:this._allowResizing(),itemTemplate:this._getAppointmentTemplate("appointmentTemplate")}),this._postponeResourceLoading().done(()=>{var e;this._refreshWorkSpace(),null===(e=this._header)||void 0===e||e.option(this._headerConfig()),this._filterAppointmentsByDate(),this._appointments.option("allowAllDayResize","day"!==n)}),this.postponedOperations.callPostponedOperations();break;case"appointmentTemplate":this._appointments.option("itemTemplate",n);break;case"dateCellTemplate":case"resourceCellTemplate":case"dataCellTemplate":case"timeCellTemplate":this.repaint();break;case"groups":this._postponeResourceLoading().done(()=>{this._refreshWorkSpace(),this._filterAppointmentsByDate()});break;case"resources":null===(t=this.resourceManager)||void 0===t||t.dispose(),this.resourceManager=new Kl(this.option("resources")),this.updateAppointmentDataSource(),this._postponeResourceLoading().done(()=>{this._appointments.option("items",[]),this._refreshWorkSpace(),this._filterAppointmentsByDate(),this._createAppointmentPopupForm()});break;case"startDayHour":case"endDayHour":this.updateAppointmentDataSource(),this._appointments.option("items",[]),this._updateOption("workSpace",i,n),this._appointments.repaint(),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case"offset":this.updateAppointmentDataSource(),this._appointments.option("items",[]),this._updateOption("workSpace","viewOffset",this.normalizeViewOffsetValue(n)),this._appointments.repaint(),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case vD.ADDING:case vD.ADDED:case vD.UPDATING:case vD.UPDATED:case vD.DELETING:case vD.DELETED:case"onAppointmentFormOpening":case"onAppointmentTooltipShowing":this._actions[i]=this._createActionByOption(i);break;case"onAppointmentRendered":this._appointments.option("onItemRendered",this._getAppointmentRenderedAction());break;case"onAppointmentClick":this._appointments.option("onItemClick",this._createActionByOption(i));break;case"onAppointmentDblClick":this._appointments.option(i,this._createActionByOption(i));break;case"onAppointmentContextMenu":this._appointments.option("onItemContextMenu",this._createActionByOption(i)),this._appointmentTooltip._options.onItemContextMenu=this._createActionByOption(i);break;case"noDataText":case"allowMultipleCellSelection":case"selectedCellData":case"accessKey":case"onCellClick":case"onCellContextMenu":this._updateOption("workSpace",i,n);break;case"crossScrollingEnabled":this._postponeResourceLoading().done(()=>{this._appointments.option("items",[]),this._refreshWorkSpace(),this._readyToRenderAppointments&&this._appointments.option("items",this._layoutManager.generateViewModel())});break;case"cellDuration":this._updateOption("workSpace",i,n),this._appointments.option("items",[]),this._readyToRenderAppointments&&(this._updateOption("workSpace","hoursInterval",n/60),this._appointments.option("items",this._layoutManager.generateViewModel()));break;case"tabIndex":case"focusStateEnabled":this._updateOption("header",i,n),this._updateOption("workSpace",i,n),this._appointments.option(i,n),super._optionChanged(e);break;case"width":this._updateOption("header",i,n),this.option("crossScrollingEnabled")&&this._updateOption("workSpace","width",n),this._updateOption("workSpace","schedulerWidth",n),super._optionChanged(e),this._dimensionChanged(null,!0);break;case"height":super._optionChanged(e),this._dimensionChanged(null,!0),this._updateOption("workSpace","schedulerHeight",n);break;case"editing":{this._initEditing();const e=this._editing;this._bringEditingModeToAppointments(e),this.hideAppointmentTooltip(),this._cleanPopup();break}case"showAllDayPanel":this.updateAppointmentDataSource(),this.repaint();break;case"showCurrentTimeIndicator":case"indicatorUpdateInterval":case"shadeUntilCurrentTime":case"groupByDate":this._updateOption("workSpace",i,n),this.repaint();break;case"indicatorTime":this._updateOption("workSpace",i,n),this._updateOption("header",i,n),this.repaint();break;case"appointmentDragging":case"appointmentTooltipTemplate":case"appointmentPopupTemplate":case"recurrenceEditMode":case"remoteFiltering":case"timeZone":this.updateAppointmentDataSource(),this.repaint();break;case"appointmentCollectorTemplate":case"_appointmentTooltipOffset":this.repaint();break;case"dateSerializationFormat":break;case"maxAppointmentsPerCell":this.repaint();break;case"startDateExpr":case"endDateExpr":case"startDateTimeZoneExpr":case"endDateTimeZoneExpr":case"textExpr":case"descriptionExpr":case"allDayExpr":case"recurrenceRuleExpr":case"recurrenceExceptionExpr":case"disabledExpr":case"visibleExpr":this._updateExpression(i,n),this._initAppointmentTemplate(),this.repaint();break;case"adaptivityEnabled":this._toggleAdaptiveClass(),this.repaint();break;case"scrolling":this.option("crossScrollingEnabled",this._isHorizontalVirtualScrolling()||this.option("crossScrollingEnabled")),this._updateOption("workSpace",e.fullName,n);break;case"allDayPanelMode":this.updateAppointmentDataSource(),this._updateOption("workSpace",e.fullName,n);break;case"renovateRender":this._updateOption("workSpace",i,n);break;case"_draggingMode":this._updateOption("workSpace","draggingMode",n);break;case"toolbar":this._header?this._header.onToolbarOptionChanged(e.fullName,n):this.repaint();break;default:super._optionChanged(e)}}_bringEditingModeToAppointments(e){const t={allowDelete:e.allowUpdating&&e.allowDeleting};this._isAgenda()||(t.allowDrag=e.allowDragging,t.allowResize=e.allowResizing,t.allowAllDayResize=e.allowResizing&&this._supportAllDayResizing()),this._appointments.option(t),this.repaint()}_isAgenda(){return"agenda"===this.currentView.type}_allowDragging(){return this._editing.allowDragging&&!this._isAgenda()}_allowResizing(){return this._editing.allowResizing&&!this._isAgenda()}_allowAllDayResizing(){return this._editing.allowResizing&&this._supportAllDayResizing()}_supportAllDayResizing(){return"day"!==this.currentView.type||this.currentView.intervalCount>1}_isAllDayExpanded(){return this.option("showAllDayPanel")&&this._layoutManager.hasAllDayAppointments()}_filterAppointmentsByDate(){if(!this._workSpace)return;const e=this._workSpace.getDateRange(),t=this.timeZoneCalculator.createDate(e[0],"fromGrid"),n=this.timeZoneCalculator.createDate(e[1],"fromGrid");this.setRemoteFilter(t,n,this.option("remoteFiltering"),this.option("dateSerializationFormat"))}setRemoteFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;const a=this._dataSource,r=this._dataAccessors;if(!a||!n)return;const o=a.filter(),s=As({dataSourceFilter:o,dataAccessors:r,min:e,max:t,dateSerializationFormat:i,forceIsoDateParsing:(0,m.A)().forceIsoDateParsing});a.filter(s)}_reloadDataSource(){const e=new S.cY;return this._dataSource?(this._dataSource.load().done(()=>{zt(),this._fireContentReadyAction(e)}).fail(()=>{zt(),e.reject()}),this._dataSource.isLoading()&&Lt({container:this.$element(),position:{of:this.$element()}})):this._fireContentReadyAction(e),e.promise()}_fireContentReadyAction(e){const t=super._fireContentReadyAction.bind(this),n=()=>{t(),null===e||void 0===e||e.resolve()};var i;this._workSpaceRecalculation?null===(i=this._workSpaceRecalculation)||void 0===i||i.done(()=>{n()}):n()}_dimensionChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n="number"===typeof this.option("height"),i="number"===typeof this.option("width");if(!this._isVisible())return;this._toggleSmallClass();const a=this.getWorkSpace();if(!this._isAgenda()&&this._layoutManager&&a&&!Wl(a)&&(t||!n||!i)){a.option("allDayExpanded",this._isAllDayExpanded()),a._dimensionChanged();const e=this._layoutManager.generateViewModel();this._appointments.option("items",e)}this.hideAppointmentTooltip(),this._appointmentPopup.triggerResize(),this._appointmentPopup.updatePopupFullScreenMode()}_clean(){this._cleanPopup(),super._clean()}_toggleSmallClass(){const{width:e}=(0,x.N)(this.$element().get(0));this.$element().toggleClass(mD,e<400)}_toggleAdaptiveClass(){this.$element().toggleClass(gD,this.option("adaptivityEnabled"))}_visibilityChanged(e){e&&this._dimensionChanged(null,!0)}_dataSourceOptions(){return{paginate:!1}}_initAllDayPanel(){"hidden"===this.option("allDayPanelMode")&&this.option("showAllDayPanel",!1)}_init(){this._timeZonesPromise=Y.A.cacheTimeZones(),this._initExpressions({startDateExpr:this.option("startDateExpr"),endDateExpr:this.option("endDateExpr"),startDateTimeZoneExpr:this.option("startDateTimeZoneExpr"),endDateTimeZoneExpr:this.option("endDateTimeZoneExpr"),allDayExpr:this.option("allDayExpr"),textExpr:this.option("textExpr"),descriptionExpr:this.option("descriptionExpr"),recurrenceRuleExpr:this.option("recurrenceRuleExpr"),recurrenceExceptionExpr:this.option("recurrenceExceptionExpr"),disabledExpr:this.option("disabledExpr"),visibleExpr:this.option("visibleExpr")}),super._init(),this._initAllDayPanel(),this._initDataSource(),this._customizeDataSourceLoadOptions(),this.$element().addClass(hD),this._initEditing(),this.updateAppointmentDataSource(),this._initActions(),this._compactAppointmentsHelper=new $r(this),this._asyncTemplatesTimers=[],this._dataSourceLoadedCallback=(0,C.A)(),this._subscribes=Bo,this.resourceManager=new Kl(this.option("resources")),this._notifyScheduler=new ga({scheduler:this})}createAppointmentDataSource(){var e;null===(e=this.appointmentDataSource)||void 0===e||e.destroy(),this.appointmentDataSource=new Rh(this._dataSource)}updateAppointmentDataSource(){this._timeZoneCalculator=null,this.getWorkSpace()&&this.createAppointmentDataSource()}_customizeDataSourceLoadOptions(){var e;null===(e=this._dataSource)||void 0===e||e.on("customizeStoreLoadOptions",e=>{let{storeLoadOptions:t}=e;t.startDate=this.getStartViewDate(),t.endDate=this.getEndViewDate()})}_initTemplates(){this._initAppointmentTemplate(),this._templateManager.addDefaultTemplates({appointmentTooltip:new D.A,dropDownAppointment:new D.A}),super._initTemplates()}_initAppointmentTemplate(){const{expr:e}=this._dataAccessors,t=e=>(0,_.Hz)(`appointmentData.${e}`),n=e=>t=>{const n=e(t);return n instanceof Date?n.valueOf():n};this._templateManager.addDefaultTemplates({item:new y.U((e,t,n)=>this.getAppointmentsInstance()._renderAppointmentTemplate(e,t,n),["html","text","startDate","endDate","allDay","description","recurrenceRule","recurrenceException","startDateTimeZone","endDateTimeZone"],this.option("integrationOptions.watchMethod"),{text:t(e.textExpr),startDate:n(t(e.startDateExpr)),endDate:n(t(e.endDateExpr)),startDateTimeZone:t(e.startDateTimeZoneExpr),endDateTimeZone:t(e.endDateTimeZoneExpr),allDay:t(e.allDayExpr),recurrenceRule:t(e.recurrenceRuleExpr)})})}_renderContent(){this._renderContentImpl()}_dataSourceChangedHandler(e){this._readyToRenderAppointments&&this._workSpaceRecalculation.done(()=>{this._layoutManager.prepareAppointments(e),this._renderAppointments(),this._updateA11yStatus()})}isVirtualScrolling(){const e=this.getWorkSpace();if(e)return e.isVirtualScrolling();const t=this.getViewOption("scrolling");return"virtual"===(null===t||void 0===t?void 0:t.mode)}_renderAppointments(){const e=this.getWorkSpace();this._layoutManager.filterAppointments(),e.option("allDayExpanded",this._isAllDayExpanded());const t=this._isVisible()?this._layoutManager.generateViewModel():[];this._appointments.option("items",t),this.appointmentDataSource.cleanState(),this._isAgenda()&&this._workSpace.renderAgendaLayout(t)}_initExpressions(e){this._dataAccessors=new Pl(e,Boolean((0,m.A)().forceIsoDateParsing),this.option("dateSerializationFormat"))}_updateExpression(e,t){this._dataAccessors.updateExpression(e,t)}_initEditing(){const e=this.option("editing");this._editing={allowAdding:Boolean(e),allowUpdating:Boolean(e),allowDeleting:Boolean(e),allowResizing:Boolean(e),allowDragging:Boolean(e),legacyForm:!1},(0,A.Gv)(e)&&(this._editing=(0,T.X)(this._editing,e)),this._editing.allowDragging=this._editing.allowDragging&&this._editing.allowUpdating,this._editing.allowResizing=this._editing.allowResizing&&this._editing.allowUpdating;const t=Object.values(Object.assign({},this._editing,{form:void 0,popup:void 0})).every(e=>!e);this.$element().toggleClass(fD,t)}_dispose(){var e,t,n;null===(e=this.resourceManager)||void 0===e||e.dispose(),null===(t=this._appointmentTooltip)||void 0===t||t.dispose(),null===(n=this._recurrenceDialog)||void 0===n||n.hide(_D.CANCEL),this.hideAppointmentPopup(),this.hideAppointmentTooltip(),this._asyncTemplatesTimers.forEach(clearTimeout),this._asyncTemplatesTimers=[],$l.j.dispose(),super._dispose()}_initActions(){this._actions={onAppointmentAdding:this._createActionByOption(vD.ADDING),onAppointmentAdded:this._createActionByOption(vD.ADDED),onAppointmentUpdating:this._createActionByOption(vD.UPDATING),onAppointmentUpdated:this._createActionByOption(vD.UPDATED),onAppointmentDeleting:this._createActionByOption(vD.DELETING),onAppointmentDeleted:this._createActionByOption(vD.DELETED),onAppointmentFormOpening:this._createActionByOption("onAppointmentFormOpening"),onAppointmentTooltipShowing:this._createActionByOption("onAppointmentTooltipShowing")}}_getAppointmentRenderedAction(){return this._createActionByOption("onAppointmentRendered",{excludeValidators:["disabled","readOnly"]})}_renderFocusTarget(){return(0,v.lQ)()}_updateA11yStatus(){const e=this._workSpace.getDateRange(),t=this.option("showCurrentTimeIndicator")?To(this.option("indicatorTime"),this.timeZoneCalculator):void 0,n=N(this.currentView,e[0],e[1],this._layoutManager.filteredItems.length,t);this.setAria({label:n}),this._a11yStatus.text(n)}_renderA11yStatus(){this._a11yStatus=V(),this._a11yStatus.prependTo(this.$element()),this.setAria({role:"group"})}_initMarkupOnResourceLoaded(){this._disposed||(this._initMarkupCore(),this._reloadDataSource())}_initMarkup(){if(super._initMarkup(),this._renderA11yStatus(),this._renderMainContainer(),this._renderHeader(),this._toggleAdaptiveClass(),this._layoutManager=new Oh(this),this._appointments=this._createComponent("<div>",ha,this._appointmentsConfig()),this._appointments.option("itemTemplate",this._getAppointmentTemplate("appointmentTemplate")),this._appointmentTooltip=new(this.option("adaptivityEnabled")?Ol:wl)(this._getAppointmentTooltipOptions()),this._createAppointmentPopupForm(),this._isDataSourceLoaded()||this._isDataSourceLoading())this._initMarkupCore(),this._dataSourceChangedHandler(this._dataSource.items()),this._fireContentReadyAction();else{const e=this.getViewOption("groups");null!==e&&void 0!==e&&e.length?this.resourceManager.loadGroupResources(e,!0).then(()=>this._initMarkupOnResourceLoaded()):this._initMarkupOnResourceLoaded()}}_createAppointmentPopupForm(){var e,t;this._appointmentForm&&(null===(t=this._appointmentForm.form)||void 0===t||t.dispose());this._appointmentForm=this.createAppointmentForm(),null===(e=this._appointmentPopup)||void 0===e||e.dispose(),this._appointmentPopup=this.createAppointmentPopup(this._appointmentForm)}_renderMainContainer(){this._mainContainer=(0,f.A)("<div>").addClass("dx-scheduler-container"),this.$element().append(this._mainContainer)}createAppointmentForm(){const e={getResourceById:()=>this.resourceManager.resourceById,getDataAccessors:()=>this._dataAccessors,createComponent:(e,t,n)=>this._createComponent(e,t,n),getEditingConfig:()=>this._editing,getResourceManager:()=>this.resourceManager,getFirstDayOfWeek:()=>this.option("firstDayOfWeek"),getStartDayHour:()=>this.option("startDayHour"),getCalculatedEndDate:e=>this._workSpace.calculateEndDate(e),getTimeZoneCalculator:()=>this.timeZoneCalculator};return this._editing.legacyForm?(e.createResourceEditorModel=()=>Bl(this.resourceManager.resourceById),new Et(e)):new ze(e)}createAppointmentPopup(e){const t={getElement:()=>this.$element(),createComponent:(e,t,n)=>this._createComponent(e,t,n),focus:()=>this.focus(),getResourceManager:()=>this.resourceManager,getEditingConfig:()=>this._editing,getTimeZoneCalculator:()=>this.timeZoneCalculator,getDataAccessors:()=>this._dataAccessors,getAppointmentFormOpening:()=>this._actions.onAppointmentFormOpening,processActionResult:(e,t)=>this._processActionResult(e,t),addAppointment:e=>this.addAppointment(e),updateAppointment:(e,t)=>this.updateAppointment(e,t),updateScrollPosition:(e,t,n)=>{this._workSpace.updateScrollPosition(e,t,n)}};return this._editing.legacyForm?new Qt(t,e):new nn(t,e)}_getAppointmentTooltipOptions(){return{createComponent:this._createComponent.bind(this),container:this.$element(),getScrollableContainer:this.getWorkSpaceScrollableContainer.bind(this),addDefaultTemplates:this._templateManager.addDefaultTemplates.bind(this._templateManager),getAppointmentTemplate:this._getAppointmentTemplate.bind(this),showAppointmentPopup:this.showAppointmentPopup.bind(this),checkAndDeleteAppointment:this.checkAndDeleteAppointment.bind(this),isAppointmentInAllDayPanel:this.isAppointmentInAllDayPanel.bind(this),createFormattedDateText:(e,t,n)=>this.fire("createFormattedDateText",e,t,n),getAppointmentDisabled:e=>this._dataAccessors.get("disabled",e),onItemContextMenu:this._createActionByOption("onAppointmentContextMenu"),createEventArgs:this._createEventArgs.bind(this)}}_createEventArgs(e){const t={itemData:e.itemData.appointment,itemElement:e.itemElement,targetedAppointment:e.itemData.targetedAppointment};return(0,T.X)({},this.fire("mapAppointmentFields",t),{component:e.component,element:e.element,event:e.event,model:e.model})}checkAndDeleteAppointment(e,t){const n=new jt(t,this._dataAccessors),i=this.fireOnAppointmentDeleting(e,n);this._checkRecurringAppointment(e,t,n.startDate,()=>{this.processDeleteAppointment(e,i)},!0)}_getExtraAppointmentTooltipOptions(){return{rtlEnabled:this.option("rtlEnabled"),focusStateEnabled:this.option("focusStateEnabled"),editing:this.option("editing"),offset:this.option("_appointmentTooltipOffset")}}isAppointmentInAllDayPanel(e){const t=this._workSpace,n=this.appointmentTakesAllDay(e);return n&&t.supportAllDayRow()&&t.option("showAllDayPanel")}_initMarkupCore(){this._readyToRenderAppointments=(0,E.Vd)(),this._workSpace&&this._cleanWorkspace(),this._renderWorkSpace(),this._appointments.option({fixedContainer:this._workSpace.getFixedContainer(),allDayContainer:this._workSpace.getAllDayContainer()}),this._waitAsyncTemplate(()=>{var e;return null===(e=this._workSpaceRecalculation)||void 0===e?void 0:e.resolve()}),this.createAppointmentDataSource(),this._filterAppointmentsByDate(),this._validateKeyFieldIfAgendaExist(),this._updateA11yStatus()}_isDataSourceLoaded(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded()}_render(){var e;null===(e=this.getWorkSpace())||void 0===e||e.updateHeaderEmptyCellWidth(),super._render()}_renderHeader(){var e;const t=this.option("toolbar"),n=Boolean(t.visible??(null===(e=t.items)||void 0===e?void 0:e.length));if(n){const e=(0,f.A)("<div>").appendTo(this._mainContainer),t=this._headerConfig();this._header=this._createComponent(e,Ir,t)}}_headerConfig(){return{currentView:this.currentView,views:this.views,currentDate:this.getViewOption("currentDate"),min:this.getViewOption("min"),max:this.getViewOption("max"),indicatorTime:this.option("indicatorTime"),startViewDate:this.getStartViewDate(),tabIndex:this.option("tabIndex"),focusStateEnabled:this.option("focusStateEnabled"),useDropDownViewSwitcher:this.option("useDropDownViewSwitcher"),firstDayOfWeek:this.getFirstDayOfWeek(),toolbar:this.option("toolbar"),customizeDateNavigatorText:this.option("customizeDateNavigatorText"),onCurrentViewChange:e=>{this.option("currentView",e)},onCurrentDateChange:e=>{this.option("currentDate",e)}}}_appointmentsConfig(){const e={getResourceManager:()=>this.resourceManager,getAppointmentDataSource:()=>this.appointmentDataSource,dataAccessors:this._dataAccessors,notifyScheduler:this._notifyScheduler,onItemRendered:this._getAppointmentRenderedAction(),onItemClick:this._createActionByOption("onAppointmentClick"),onItemContextMenu:this._createActionByOption("onAppointmentContextMenu"),onAppointmentDblClick:this._createActionByOption("onAppointmentDblClick"),tabIndex:this.option("tabIndex"),focusStateEnabled:this.option("focusStateEnabled"),allowDrag:this._allowDragging(),allowDelete:this._editing.allowUpdating&&this._editing.allowDeleting,allowResize:this._allowResizing(),allowAllDayResize:this._allowAllDayResizing(),rtlEnabled:this.option("rtlEnabled"),groups:this.getViewOption("groups"),groupByDate:this.getViewOption("groupByDate"),timeZoneCalculator:this.timeZoneCalculator,getResizableStep:()=>this._workSpace?this._workSpace.positionHelper.getResizableStep():0,getDOMElementsMetaData:()=>{var e;return null===(e=this._workSpace)||void 0===e?void 0:e.getDOMElementsMetaData()},getViewDataProvider:()=>{var e;return null===(e=this._workSpace)||void 0===e?void 0:e.viewDataProvider},isVerticalGroupedWorkSpace:()=>this._workSpace._isVerticalGroupedWorkSpace(),isDateAndTimeView:()=>co(this._workSpace.type),onContentReady:()=>{var e;null===(e=this._workSpace)||void 0===e||e.option("allDayExpanded",this._isAllDayExpanded())}};return e}_renderWorkSpace(){const e=this.currentView;e&&(this._isAgenda()?this.renderAgendaWorkspace():this.renderGridWorkspace(),this._recalculateWorkspace(),e.startDate&&this._updateOption("header","currentDate",this._workSpace._getHeaderDate()))}renderGridWorkspace(){this._readyToRenderAppointments&&(this._toggleSmallClass(),Promise.resolve().then(()=>{var e;this._toggleSmallClass(),null===(e=this._workSpace)||void 0===e||e.updateHeaderEmptyCellWidth()}));const e=(0,f.A)("<div>").appendTo(this._mainContainer),t=this.currentView.type,n=CD[t].workSpace,i=this._workSpaceConfig(this.currentView);this._workSpace=this._createComponent(e,n,i),this._allowDragging()&&this._workSpace.initDragBehavior(this,this._all),this._workSpace._attachTablesEvents(),this._workSpace.getWorkArea().append(this._appointments.$element())}renderAgendaWorkspace(){const e=(0,f.A)("<div>").appendTo(this._mainContainer),t=this._workSpaceConfig(this.currentView),n=CD.agenda.workSpace;this._workSpace=this._createComponent(e,n,t),this._workSpace.getWorkArea().append(this._appointments.$element())}_recalculateWorkspace(){this._workSpaceRecalculation=new S.cY,this._waitAsyncTemplate(()=>{(0,d.ho)(this._workSpace.$element()),this._workSpace.renderCurrentDateTimeLineAndShader()})}_workSpaceConfig(e){const t=this.getViewOption("scrolling"),n="virtual"===t.mode,i=n&&(!(0,A.O9)(t.orientation)||["horizontal","both"].includes(t.orientation)),a=this.option("crossScrollingEnabled")||i||uo(e.type),r=(0,T.X)({resources:this.option("resources"),getResourceManager:()=>this.resourceManager,getFilteredItems:()=>this._layoutManager.filteredItems,noDataText:this.option("noDataText"),firstDayOfWeek:this.option("firstDayOfWeek"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),viewOffset:this.getViewOffsetMs(),tabIndex:this.option("tabIndex"),accessKey:this.option("accessKey"),focusStateEnabled:this.option("focusStateEnabled"),cellDuration:this.option("cellDuration"),showAllDayPanel:this.option("showAllDayPanel"),showCurrentTimeIndicator:this.option("showCurrentTimeIndicator"),indicatorTime:this.option("indicatorTime"),indicatorUpdateInterval:this.option("indicatorUpdateInterval"),shadeUntilCurrentTime:this.option("shadeUntilCurrentTime"),crossScrollingEnabled:a,dataCellTemplate:this.option("dataCellTemplate"),timeCellTemplate:this.option("timeCellTemplate"),resourceCellTemplate:this.option("resourceCellTemplate"),dateCellTemplate:this.option("dateCellTemplate"),allowMultipleCellSelection:this.option("allowMultipleCellSelection"),selectedCellData:this.option("selectedCellData"),onSelectionChanged:e=>{this.option("selectedCellData",e.selectedCellData)},groupByDate:this.getViewOption("groupByDate"),scrolling:t,draggingMode:this.option("_draggingMode"),timeZoneCalculator:this.timeZoneCalculator,schedulerHeight:this.option("height"),schedulerWidth:this.option("width"),allDayPanelMode:this.option("allDayPanelMode"),onSelectedCellsClick:this.showAddAppointmentPopup.bind(this),onRenderAppointments:()=>{this._renderAppointments()},onShowAllDayPanel:e=>this.option("showAllDayPanel",e),getHeaderHeight:()=>Fr.DOM.getHeaderHeight(this._header),onScrollEnd:()=>this._appointments.updateResizableArea(),renovateRender:this._isRenovatedRender(n)},e);return r.notifyScheduler=this._notifyScheduler,r.groups=this.resourceManager.groupResources(),r.onCellClick=this._createActionByOption("onCellClick"),r.onCellContextMenu=this._createActionByOption("onCellContextMenu"),r.currentDate=this.getViewOption("currentDate"),r.hoursInterval=r.cellDuration/60,r.allDayExpanded=!1,r.dataCellTemplate=r.dataCellTemplate?this._getTemplate(r.dataCellTemplate):null,r.timeCellTemplate=r.timeCellTemplate?this._getTemplate(r.timeCellTemplate):null,r.resourceCellTemplate=r.resourceCellTemplate?this._getTemplate(r.resourceCellTemplate):null,r.dateCellTemplate=r.dateCellTemplate?this._getTemplate(r.dateCellTemplate):null,r}_isRenovatedRender(e){return this.option("renovateRender")&&(0,E.Vd)()||e}_waitAsyncTemplate(e){if(this._options.silent("templatesRenderAsynchronously")){const t=setTimeout(()=>{e(),clearTimeout(t)});this._asyncTemplatesTimers.push(t)}else e()}_getAppointmentTemplate(e){var t;return null!==(t=this.currentView)&&void 0!==t&&t[e]?this._getTemplate(this.currentView[e]):this._getTemplateByOption(e)}_updateOption(e,t,n){var i;null===(i=this[`_${e}`])||void 0===i||i.option(t,n)}_refreshWorkSpace(){this._cleanWorkspace(),delete this._workSpace,this._renderWorkSpace(),this._readyToRenderAppointments&&(this._appointments.option({fixedContainer:this._workSpace.getFixedContainer(),allDayContainer:this._workSpace.getAllDayContainer()}),this._waitAsyncTemplate(()=>this._workSpaceRecalculation.resolve()))}_cleanWorkspace(){this._appointments.$element().detach(),this._workSpace._dispose(),this._workSpace.$element().remove(),this.option("selectedCellData",[])}getWorkSpaceScrollable(){return this._workSpace.getScrollable()}getWorkSpaceScrollableContainer(){return this._workSpace.getScrollableContainer()}getWorkSpace(){return this._workSpace}getHeader(){return this._header}_cleanPopup(){var e;null===(e=this._appointmentPopup)||void 0===e||e.dispose()}_checkRecurringAppointment(e,t,n,i,a,r,o,s){const l=this._dataAccessors.get("recurrenceRule",e);if(!bi(l)||!this._editing.allowUpdating)return void i();const u=s||this.option("recurrenceEditMode");switch(u){case"series":i();break;case"occurrence":this._excludeAppointmentFromSeries(e,t,n,a,r,o);break;default:o&&(o.cancel=new S.cY),this._showRecurrenceChangeConfirm(a).done(s=>{s===_D.SERIES&&i(),s===_D.OCCURRENCE&&this._excludeAppointmentFromSeries(e,t,n,a,r,o)}).fail(()=>this._appointments.moveAppointmentBack(o))}}_excludeAppointmentFromSeries(e,t,n,i,a,r){const o=hs(e,n,this._dataAccessors),s=Object.assign({},t);delete s[this._dataAccessors.expr.recurrenceExceptionExpr],delete s[this._dataAccessors.expr.recurrenceRuleExpr];const l=this.appointmentDataSource.keyName;delete s[l];const u=!i&&!a;u&&this.addAppointment(s),a?(this._appointmentPopup.show(s,{isToolbarVisible:!0,action:Kt.EXCLUDE_FROM_SERIES,excludeInfo:{sourceAppointment:e,updatedAppointment:o.source}}),this._editAppointmentData=e):this._updateAppointment(e,o.source,()=>{this._appointments.moveAppointmentBack(r)},r)}_createRecurrenceException(e,t){const n=[];return e.recurrenceException&&n.push(e.recurrenceException),n.push(this._getSerializedDate(t,e.startDate,e.allDay)),n.join()}_getSerializedDate(e,t,n){return n&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),b.A.serializeDate(e,DD)}_showRecurrenceChangeConfirm(e){const t=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteTitle":"dxScheduler-confirmRecurrenceEditTitle"),n=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteMessage":"dxScheduler-confirmRecurrenceEditMessage"),i=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteSeries":"dxScheduler-confirmRecurrenceEditSeries"),a=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteOccurrence":"dxScheduler-confirmRecurrenceEditOccurrence");return this._recurrenceDialog=(0,O.Ie)({title:t,messageHtml:n,showCloseButton:!0,showTitle:!0,buttons:[{text:i,onClick:()=>_D.SERIES},{text:a,onClick:()=>_D.OCCURRENCE}],popupOptions:{wrapperAttr:{class:"dx-dialog"},onHidden:()=>{var e;null===(e=this._appointments)||void 0===e||e.focus()}}}),this._recurrenceDialog.show()}_getUpdatedData(e){const t=this.getViewOffsetMs(),n=e=>{if(!e)return;const n=this.timeZoneCalculator.createDate(e,"fromGrid");return R.X.addOffsets(n,-t)},i=this.getTargetCellData(),a=new jt(e,this._dataAccessors),r=n(i.startDate),o=n(i.endDate);let s=new Date(a.startDate);s=R.X.addOffsets(s,-t);let l=new Date(a.endDate);l=R.X.addOffsets(l,-t);let u=r??s;R.X.isValidDate(s)||(s=u),R.X.isValidDate(l)||(l=o);const d=l.getTime()-s.getTime(),c=this._workSpace.keepOriginalHours()&&R.X.isValidDate(a.startDate)&&R.X.isValidDate(r);if(c){const e=this.timeZoneCalculator.createDate(s,"toGrid"),n=e.getTime()-w.A.trimTime(e).getTime(),a=R.X.addOffsets(i.startDate,-t);u=new Date(w.A.trimTime(a).getTime()+n),u=this.timeZoneCalculator.createDate(u,"fromGrid")}const p=new jt({},this._dataAccessors);void 0!==i.allDay&&(p.allDay=i.allDay),p.startDate=u;let h=new Date(u.getTime()+d);if(this.appointmentTakesAllDay(e)&&!p.allDay&&this._workSpace.supportAllDayRow()&&(h=this._workSpace.calculateEndDate(u)),a.allDay&&!this._workSpace.supportAllDayRow()&&!this._workSpace.keepOriginalHours()){const e=new Date(u);e.setHours(0),h=new Date(e.getTime()+d),0!==h.getHours()&&h.setHours(this.getViewOption("endDayHour"))}p.startDate=R.X.addOffsets(p.startDate,t),p.endDate=R.X.addOffsets(h,t);const m=p.source;return se(m,this.resourceManager.resourceById,i.groups),m}getTargetedAppointment(e,t){const n=Fr.dataAccessors.getAppointmentSettings(t);return jn(e,n,this._dataAccessors,this.resourceManager)}subscribe(e,t){this._subscribes[e]=Bo[e]=t}fire(e){const t=this._subscribes[e];if(!(0,A.Tn)(t))throw I.A.Error("E1031",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.call(this,...i)}getTargetCellData(){return this._workSpace.getDataByDroppableCell()}_updateAppointment(e,t,n,i){const a={newData:t,oldData:(0,T.X)({},e),cancel:!1},r=function(e){if(n&&n.call(this),e&&"Error"===e.name)throw e}.bind(this);return this._actions[vD.UPDATING](a),i&&!(0,A.uF)(i.cancel)&&(i.cancel=new S.cY),(0,A.yL)(a.cancel)&&i&&this._updatingAppointments.add(e),this._processActionResult(a,function(n){let a=new S.cY;if(n)r(),this._updatingAppointments.delete(e),a.resolve();else{this._expandAllDayPanel(t);try{a=this.appointmentDataSource.update(e,t).done(()=>{null===i||void 0===i||i.cancel.resolve(!1)}).always(t=>{this._updatingAppointments.delete(e),this._onDataPromiseCompleted(vD.UPDATED,t)}).fail(()=>r())}catch(o){r(o),this._updatingAppointments.delete(e),a.resolve()}}return a.promise()})}_processActionResult(e,t){const n=new S.cY,i=e=>{(0,S.z7)((0,S.Sx)(e)).always(n.resolve)};return(0,A.yL)(e.cancel)?(0,S.z7)((0,S.Sx)(e.cancel)).always(n=>{(0,A.O9)(n)||(n="rejected"===e.cancel.state()),i(t.call(this,n))}):i(t.call(this,e.cancel)),n.promise()}_expandAllDayPanel(e){!this._isAllDayExpanded()&&this.appointmentTakesAllDay(e)&&this._updateOption("workSpace","allDayExpanded",!0)}_onDataPromiseCompleted(e,t,n){const i={appointmentData:n||t};t instanceof Error?i.error=t:this._appointmentPopup.visible&&this._appointmentPopup.hide(),this._actions[e](i),this._fireContentReadyAction()}getAppointmentsInstance(){return this._appointments}getLayoutManager(){return this._layoutManager}getActions(){return this._actions}appointmentTakesAllDay(e){const t=new jt(e,this._dataAccessors);return Kr(t,this.getViewOption("allDayPanelMode"))}dayHasAppointment(e,t,n){const i=e=>this.timeZoneCalculator.createDate(e,"toGrid"),a=new jt(t,this._dataAccessors);let r=new Date(a.startDate),o=new Date(a.endDate);if(r=i(r),o=i(o),e.getTime()===o.getTime())return r.getTime()===o.getTime();n&&(e=w.A.trimTime(e),r=w.A.trimTime(r),o=w.A.trimTime(o));const s=e.getTime(),l=r.getTime(),u=o.getTime();return l<=s&&s<=u}getStartViewDate(){var e;return null===(e=this._workSpace)||void 0===e?void 0:e.getStartViewDate()}getEndViewDate(){return this._workSpace.getEndViewDate()}showAddAppointmentPopup(e,t){const n=new jt({},this._dataAccessors);n.allDay=Boolean(e.allDay),n.startDate=e.startDateUTC,n.endDate=e.endDateUTC;const i=(0,T.X)(n.source,t);this.showAppointmentPopup(i,!0)}showAppointmentPopup(e,t,n){const i=Object.assign({},n);i&&(delete i.displayStartDate,delete i.displayEndDate);const a=(0,T.X)({},e,i),r=t??(0,A.RI)(e);if((0,A.RI)(e)&&(e=this.createPopupAppointment()),r)delete this._editAppointmentData,this._editing.allowAdding&&this._appointmentPopup.show(e,{isToolbarVisible:!0,action:Kt.CREATE});else{const t=this._dataAccessors.get("startDate",i||e);this._checkRecurringAppointment(e,a,t,()=>{this._editAppointmentData=e,this._appointmentPopup.show(e,{isToolbarVisible:this._editing.allowUpdating,action:Kt.UPDATE})},!1,!0)}}createPopupAppointment(){const e={},t=w.A.dateToMilliseconds,n=new Date(this.option("currentDate")),i=new Date(n.getTime()+this.option("cellDuration")*t("minute"));return this._dataAccessors.set("startDate",e,n),this._dataAccessors.set("endDate",e,i),e}hideAppointmentPopup(e){var t;null!==(t=this._appointmentPopup)&&void 0!==t&&t.visible&&(e&&this._appointmentPopup.saveChangesAsync(),this._appointmentPopup.hide())}showAppointmentTooltip(e,t,n){if(e){const i=Fr.dataAccessors.getAppointmentSettings(t),a={itemData:n??e,groupIndex:null===i||void 0===i?void 0:i.groupIndex},r={appointment:e,targetedAppointment:n,color:this.resourceManager.getAppointmentColor(a)};this.showAppointmentTooltipCore(t,[r])}}showAppointmentTooltipCore(e,t,n){const i={cancel:!1,appointments:t.map(e=>({appointmentData:e.appointment,currentAppointmentData:Object.assign({},e.targetedAppointment),color:e.color})),targetElement:(0,g.cc)(e)};this._createActionByOption("onAppointmentTooltipShowing")(i),this._appointmentTooltip.isAlreadyShown(e)?this.hideAppointmentTooltip():this._processActionResult(i,i=>{!i&&this._appointmentTooltip.show(e,t,Object.assign({},this._getExtraAppointmentTooltipOptions(),n))})}hideAppointmentTooltip(){var e;null===(e=this._appointmentTooltip)||void 0===e||e.hide()}scrollTo(e,t,n){this._workSpace.scrollTo(e,t,n)}_isHorizontalVirtualScrolling(){const e=this.option("scrolling"),{orientation:t,mode:n}=e,i="virtual"===n;return i&&("horizontal"===t||"both"===t)}addAppointment(e){const t=new jt(e,this._dataAccessors);t.text=t.text||"";const n=t.serialize().source,i={appointmentData:n,cancel:!1};return this._actions[vD.ADDING](i),this._processActionResult(i,e=>e?(new S.cY).resolve():(this._expandAllDayPanel(n),this.appointmentDataSource.add(n).always(e=>this._onDataPromiseCompleted(vD.ADDED,e))))}updateAppointment(e,t){return this._updateAppointment(e,t)}deleteAppointment(e){const t=this.fireOnAppointmentDeleting(e);this.processDeleteAppointment(e,t)}fireOnAppointmentDeleting(e,t){const n={appointmentData:e,targetedAppointmentData:t,cancel:!1};return this._actions[vD.DELETING](n),n}processDeleteAppointment(e,t){this._processActionResult(t,function(t){t||this.appointmentDataSource.remove(e).always(t=>this._onDataPromiseCompleted(vD.DELETED,t,e))})}deleteRecurrence(e,t,n){"string"===typeof t&&(t=new Date(t)),this._checkRecurringAppointment(e,{},t,()=>{this.processDeleteAppointment(e,{cancel:!1})},!0,!1,null,n)}focus(){this._editAppointmentData?this._appointments.focus():this._workSpace.focus()}getFirstDayOfWeek(){return(0,A.O9)(this.getViewOption("firstDayOfWeek"))?this.getViewOption("firstDayOfWeek"):c.A.firstDayOfWeekIndex()}_validateKeyFieldIfAgendaExist(){if(!this.appointmentDataSource.isDataSourceInit)return;const e=this.hasAgendaView(),t=!this.appointmentDataSource.keyName;e&&t&&I.A.log("W1023")}_getDragBehavior(){return this._workSpace.dragBehavior}_isAppointmentBeingUpdated(e){return this._updatingAppointments.has(e)}getViewOffsetMs(){const e=this.getViewOption("offset");return this.normalizeViewOffsetValue(e)}normalizeViewOffsetValue(e){var t;return(0,A.O9)(e)&&(null===(t=this.currentView)||void 0===t?void 0:t.type)!==Lr.AGENDA?e*pD("minute"):0}}wD.include(k.A),(0,h.A)("dxScheduler",wD);var bD=wD,SD=bD;
/*!
 * devextreme-vue
 * Version: 25.2.3
 * Build date: Fri Dec 12 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const TD={props:{accessKey:String,adaptivityEnabled:Boolean,allDayExpr:String,allDayPanelMode:String,appointmentCollectorTemplate:{},appointmentDragging:Object,appointmentTemplate:{},appointmentTooltipTemplate:{},cellDuration:Number,crossScrollingEnabled:Boolean,currentDate:[Date,Number,String],currentView:String,customizeDateNavigatorText:Function,dataCellTemplate:{},dataSource:[Array,Object,String],dateCellTemplate:{},dateSerializationFormat:String,descriptionExpr:String,disabled:Boolean,editing:[Boolean,Object],elementAttr:Object,endDateExpr:String,endDateTimeZoneExpr:String,endDayHour:Number,firstDayOfWeek:Number,focusStateEnabled:Boolean,groupByDate:Boolean,groups:Array,height:[Number,String],hint:String,indicatorUpdateInterval:Number,max:[Date,Number,String],maxAppointmentsPerCell:[String,Number],min:[Date,Number,String],noDataText:String,offset:Number,onAppointmentAdded:Function,onAppointmentAdding:Function,onAppointmentClick:Function,onAppointmentContextMenu:Function,onAppointmentDblClick:Function,onAppointmentDeleted:Function,onAppointmentDeleting:Function,onAppointmentFormOpening:Function,onAppointmentRendered:Function,onAppointmentTooltipShowing:Function,onAppointmentUpdated:Function,onAppointmentUpdating:Function,onCellClick:Function,onCellContextMenu:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,recurrenceEditMode:String,recurrenceExceptionExpr:String,recurrenceRuleExpr:String,remoteFiltering:Boolean,resourceCellTemplate:{},resources:Array,rtlEnabled:Boolean,scrolling:Object,selectedCellData:Array,shadeUntilCurrentTime:Boolean,showAllDayPanel:Boolean,showCurrentTimeIndicator:Boolean,startDateExpr:String,startDateTimeZoneExpr:String,startDayHour:Number,tabIndex:Number,textExpr:String,timeCellTemplate:{},timeZone:String,toolbar:Object,useDropDownViewSwitcher:Boolean,views:Array,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:adaptivityEnabled":null,"update:allDayExpr":null,"update:allDayPanelMode":null,"update:appointmentCollectorTemplate":null,"update:appointmentDragging":null,"update:appointmentTemplate":null,"update:appointmentTooltipTemplate":null,"update:cellDuration":null,"update:crossScrollingEnabled":null,"update:currentDate":null,"update:currentView":null,"update:customizeDateNavigatorText":null,"update:dataCellTemplate":null,"update:dataSource":null,"update:dateCellTemplate":null,"update:dateSerializationFormat":null,"update:descriptionExpr":null,"update:disabled":null,"update:editing":null,"update:elementAttr":null,"update:endDateExpr":null,"update:endDateTimeZoneExpr":null,"update:endDayHour":null,"update:firstDayOfWeek":null,"update:focusStateEnabled":null,"update:groupByDate":null,"update:groups":null,"update:height":null,"update:hint":null,"update:indicatorUpdateInterval":null,"update:max":null,"update:maxAppointmentsPerCell":null,"update:min":null,"update:noDataText":null,"update:offset":null,"update:onAppointmentAdded":null,"update:onAppointmentAdding":null,"update:onAppointmentClick":null,"update:onAppointmentContextMenu":null,"update:onAppointmentDblClick":null,"update:onAppointmentDeleted":null,"update:onAppointmentDeleting":null,"update:onAppointmentFormOpening":null,"update:onAppointmentRendered":null,"update:onAppointmentTooltipShowing":null,"update:onAppointmentUpdated":null,"update:onAppointmentUpdating":null,"update:onCellClick":null,"update:onCellContextMenu":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:recurrenceEditMode":null,"update:recurrenceExceptionExpr":null,"update:recurrenceRuleExpr":null,"update:remoteFiltering":null,"update:resourceCellTemplate":null,"update:resources":null,"update:rtlEnabled":null,"update:scrolling":null,"update:selectedCellData":null,"update:shadeUntilCurrentTime":null,"update:showAllDayPanel":null,"update:showCurrentTimeIndicator":null,"update:startDateExpr":null,"update:startDateTimeZoneExpr":null,"update:startDayHour":null,"update:tabIndex":null,"update:textExpr":null,"update:timeCellTemplate":null,"update:timeZone":null,"update:toolbar":null,"update:useDropDownViewSwitcher":null,"update:views":null,"update:visible":null,"update:width":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=SD,this.$_hasAsyncTemplate=!1,this.$_expectedChildren={appointmentDragging:{isCollectionItem:!1,optionName:"appointmentDragging"},editing:{isCollectionItem:!1,optionName:"editing"},resource:{isCollectionItem:!0,optionName:"resources"},scrolling:{isCollectionItem:!1,optionName:"scrolling"},toolbar:{isCollectionItem:!1,optionName:"toolbar"},view:{isCollectionItem:!0,optionName:"views"}}}};(0,o.bx)(TD);const xD=(0,i.pM)(TD),AD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:instruction":null},props:{disabled:Boolean,instruction:String}};(0,o.nm)(AD);const ED=(0,i.pM)(AD);ED.$_optionName="aiOptions";const kD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:autoScroll":null,"update:data":null,"update:group":null,"update:onAdd":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onRemove":null,"update:scrollSensitivity":null,"update:scrollSpeed":null},props:{autoScroll:Boolean,data:{},group:String,onAdd:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onRemove:Function,scrollSensitivity:Number,scrollSpeed:Number}};(0,o.nm)(kD);const OD=(0,i.pM)(kD);OD.$_optionName="appointmentDragging";const ID={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:reevaluate":null,"update:type":null,"update:validationCallback":null},props:{ignoreEmptyValue:Boolean,message:String,reevaluate:Boolean,type:String,validationCallback:Function}};(0,o.nm)(ID);const RD=(0,i.pM)(ID);RD.$_optionName="validationRules",RD.$_isCollectionItem=!0,RD.$_predefinedProps={type:"async"};const MD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:buttonOptions":null,"update:colSpan":null,"update:cssClass":null,"update:horizontalAlignment":null,"update:itemType":null,"update:name":null,"update:verticalAlignment":null,"update:visible":null,"update:visibleIndex":null},props:{buttonOptions:Object,colSpan:Number,cssClass:String,horizontalAlignment:String,itemType:String,name:String,verticalAlignment:String,visible:Boolean,visibleIndex:Number}};(0,o.nm)(MD);const VD=(0,i.pM)(MD);VD.$_optionName="items",VD.$_isCollectionItem=!0,VD.$_predefinedProps={itemType:"button"},VD.$_expectedChildren={buttonOptions:{isCollectionItem:!1,optionName:"buttonOptions"}};const PD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Number,String]}};(0,o.nm)(PD);const $D=(0,i.pM)(PD);$D.$_optionName="buttonOptions";const WD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:lg":null,"update:md":null,"update:sm":null,"update:xs":null},props:{lg:Number,md:Number,sm:Number,xs:Number}};(0,o.nm)(WD);const BD=(0,i.pM)(WD);BD.$_optionName="colCountByScreen";const HD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:comparisonTarget":null,"update:comparisonType":null,"update:ignoreEmptyValue":null,"update:message":null,"update:type":null},props:{comparisonTarget:Function,comparisonType:String,ignoreEmptyValue:Boolean,message:String,type:String}};(0,o.nm)(HD);const GD=(0,i.pM)(HD);GD.$_optionName="validationRules",GD.$_isCollectionItem=!0,GD.$_predefinedProps={type:"compare"};const ND={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:reevaluate":null,"update:type":null,"update:validationCallback":null},props:{ignoreEmptyValue:Boolean,message:String,reevaluate:Boolean,type:String,validationCallback:Function}};(0,o.nm)(ND);const FD=(0,i.pM)(ND);FD.$_optionName="validationRules",FD.$_isCollectionItem=!0,FD.$_predefinedProps={type:"custom"};const LD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowAdding":null,"update:allowDeleting":null,"update:allowDragging":null,"update:allowResizing":null,"update:allowTimeZoneEditing":null,"update:allowUpdating":null,"update:form":null,"update:popup":null},props:{allowAdding:Boolean,allowDeleting:Boolean,allowDragging:Boolean,allowResizing:Boolean,allowTimeZoneEditing:Boolean,allowUpdating:Boolean,form:{},popup:Object}};(0,o.nm)(LD);const zD=(0,i.pM)(LD);zD.$_optionName="editing",zD.$_expectedChildren={form:{isCollectionItem:!1,optionName:"form"}};const UD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:type":null},props:{ignoreEmptyValue:Boolean,message:String,type:String}};(0,o.nm)(UD);const jD=(0,i.pM)(UD);jD.$_optionName="validationRules",jD.$_isCollectionItem=!0,jD.$_predefinedProps={type:"email"};const YD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:colSpan":null,"update:cssClass":null,"update:itemType":null,"update:name":null,"update:visible":null,"update:visibleIndex":null},props:{colSpan:Number,cssClass:String,itemType:String,name:String,visible:Boolean,visibleIndex:Number}};(0,o.nm)(YD);const ZD=(0,i.pM)(YD);ZD.$_optionName="items",ZD.$_isCollectionItem=!0,ZD.$_predefinedProps={itemType:"empty"};const qD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:aiIntegration":null,"update:alignItemLabels":null,"update:alignItemLabelsInAllGroups":null,"update:colCount":null,"update:colCountByScreen":null,"update:customizeItem":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:formData":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:iconsShowMode":null,"update:isDirty":null,"update:items":null,"update:labelLocation":null,"update:labelMode":null,"update:minColWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onEditorEnterKey":null,"update:onFieldDataChanged":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onSmartPasted":null,"update:onSmartPasting":null,"update:optionalMark":null,"update:readOnly":null,"update:requiredMark":null,"update:requiredMessage":null,"update:rtlEnabled":null,"update:screenByWidth":null,"update:scrollingEnabled":null,"update:showColonAfterLabel":null,"update:showOptionalMark":null,"update:showRequiredMark":null,"update:showValidationSummary":null,"update:tabIndex":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,aiIntegration:Object,alignItemLabels:Boolean,alignItemLabelsInAllGroups:Boolean,colCount:[String,Number],colCountByScreen:Object,customizeItem:Function,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,formData:{},height:[Number,String],hint:String,hoverStateEnabled:Boolean,iconsShowMode:String,isDirty:Boolean,items:Array,labelLocation:String,labelMode:String,minColWidth:Number,onContentReady:Function,onDisposing:Function,onEditorEnterKey:Function,onFieldDataChanged:Function,onInitialized:Function,onOptionChanged:Function,onSmartPasted:Function,onSmartPasting:Function,optionalMark:String,readOnly:Boolean,requiredMark:String,requiredMessage:String,rtlEnabled:Boolean,screenByWidth:Function,scrollingEnabled:Boolean,showColonAfterLabel:Boolean,showOptionalMark:Boolean,showRequiredMark:Boolean,showValidationSummary:Boolean,tabIndex:Number,validationGroup:String,visible:Boolean,width:[Number,String]}};(0,o.nm)(qD);const XD=(0,i.pM)(qD);XD.$_optionName="form",XD.$_expectedChildren={ButtonItem:{isCollectionItem:!0,optionName:"items"},colCountByScreen:{isCollectionItem:!1,optionName:"colCountByScreen"},EmptyItem:{isCollectionItem:!0,optionName:"items"},GroupItem:{isCollectionItem:!0,optionName:"items"},item:{isCollectionItem:!0,optionName:"items"},SimpleItem:{isCollectionItem:!0,optionName:"items"},TabbedItem:{isCollectionItem:!0,optionName:"items"}};const KD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignItemLabels":null,"update:caption":null,"update:captionTemplate":null,"update:colCount":null,"update:colCountByScreen":null,"update:colSpan":null,"update:cssClass":null,"update:items":null,"update:itemType":null,"update:name":null,"update:template":null,"update:visible":null,"update:visibleIndex":null},props:{alignItemLabels:Boolean,caption:String,captionTemplate:{},colCount:Number,colCountByScreen:Object,colSpan:Number,cssClass:String,items:Array,itemType:String,name:String,template:{},visible:Boolean,visibleIndex:Number}};(0,o.nm)(KD);const QD=(0,i.pM)(KD);QD.$_optionName="items",QD.$_isCollectionItem=!0,QD.$_predefinedProps={itemType:"group"},QD.$_expectedChildren={colCountByScreen:{isCollectionItem:!1,optionName:"colCountByScreen"}};const JD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:aiOptions":null,"update:alignItemLabels":null,"update:badge":null,"update:buttonOptions":null,"update:caption":null,"update:captionTemplate":null,"update:colCount":null,"update:colCountByScreen":null,"update:colSpan":null,"update:cssClass":null,"update:dataField":null,"update:disabled":null,"update:editorOptions":null,"update:editorType":null,"update:elementAttr":null,"update:helpText":null,"update:hint":null,"update:horizontalAlignment":null,"update:html":null,"update:icon":null,"update:isRequired":null,"update:items":null,"update:itemType":null,"update:label":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:tabPanelOptions":null,"update:tabs":null,"update:tabTemplate":null,"update:template":null,"update:text":null,"update:title":null,"update:type":null,"update:validationRules":null,"update:verticalAlignment":null,"update:visible":null,"update:visibleIndex":null,"update:widget":null},props:{aiOptions:Object,alignItemLabels:Boolean,badge:String,buttonOptions:Object,caption:String,captionTemplate:{},colCount:Number,colCountByScreen:Object,colSpan:Number,cssClass:String,dataField:String,disabled:Boolean,editorOptions:{},editorType:String,elementAttr:Object,helpText:String,hint:String,horizontalAlignment:String,html:String,icon:String,isRequired:Boolean,items:Array,itemType:String,label:Object,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:Object,showText:String,tabPanelOptions:Object,tabs:Array,tabTemplate:{},template:{},text:String,title:String,type:String,validationRules:Array,verticalAlignment:String,visible:Boolean,visibleIndex:Number,widget:String}};(0,o.nm)(JD);const eC=(0,i.pM)(JD);eC.$_optionName="items",eC.$_isCollectionItem=!0,eC.$_expectedChildren={aiOptions:{isCollectionItem:!1,optionName:"aiOptions"},AsyncRule:{isCollectionItem:!0,optionName:"validationRules"},buttonOptions:{isCollectionItem:!1,optionName:"buttonOptions"},colCountByScreen:{isCollectionItem:!1,optionName:"colCountByScreen"},CompareRule:{isCollectionItem:!0,optionName:"validationRules"},CustomRule:{isCollectionItem:!0,optionName:"validationRules"},EmailRule:{isCollectionItem:!0,optionName:"validationRules"},label:{isCollectionItem:!1,optionName:"label"},NumericRule:{isCollectionItem:!0,optionName:"validationRules"},options:{isCollectionItem:!1,optionName:"options"},PatternRule:{isCollectionItem:!0,optionName:"validationRules"},RangeRule:{isCollectionItem:!0,optionName:"validationRules"},RequiredRule:{isCollectionItem:!0,optionName:"validationRules"},StringLengthRule:{isCollectionItem:!0,optionName:"validationRules"},tab:{isCollectionItem:!0,optionName:"tabs"},tabPanelOptions:{isCollectionItem:!1,optionName:"tabPanelOptions"},validationRule:{isCollectionItem:!0,optionName:"validationRules"}};const tC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignment":null,"update:location":null,"update:showColon":null,"update:template":null,"update:text":null,"update:visible":null},props:{alignment:String,location:String,showColon:Boolean,template:{},text:String,visible:Boolean}};(0,o.nm)(tC);const nC=(0,i.pM)(tC);nC.$_optionName="label";const iC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:type":null},props:{ignoreEmptyValue:Boolean,message:String,type:String}};(0,o.nm)(iC);const aC=(0,i.pM)(iC);aC.$_optionName="validationRules",aC.$_isCollectionItem=!0,aC.$_predefinedProps={type:"numeric"};const rC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:buttonTemplate":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:items":null,"update:keyExpr":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onItemClick":null,"update:onOptionChanged":null,"update:onSelectionChanged":null,"update:rtlEnabled":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:stylingMode":null,"update:tabIndex":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,buttonTemplate:{},disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,items:Array,keyExpr:[Function,String],onContentReady:Function,onDisposing:Function,onInitialized:Function,onItemClick:Function,onOptionChanged:Function,onSelectionChanged:Function,rtlEnabled:Boolean,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,stylingMode:String,tabIndex:Number,visible:Boolean,width:[Number,String]}};(0,o.nm)(rC);const oC=(0,i.pM)(rC);oC.$_optionName="options",oC.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},optionsItem:{isCollectionItem:!0,optionName:"items"}};const sC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:elementAttr":null,"update:hint":null,"update:icon":null,"update:template":null,"update:text":null,"update:type":null,"update:visible":null},props:{disabled:Boolean,elementAttr:Object,hint:String,icon:String,template:{},text:String,type:String,visible:Boolean}};(0,o.nm)(sC);const lC=(0,i.pM)(sC);lC.$_optionName="items",lC.$_isCollectionItem=!0;const uC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:message":null,"update:pattern":null,"update:type":null},props:{ignoreEmptyValue:Boolean,message:String,pattern:[RegExp,String],type:String}};(0,o.nm)(uC);const dC=(0,i.pM)(uC);dC.$_optionName="validationRules",dC.$_isCollectionItem=!0,dC.$_predefinedProps={type:"pattern"};const cC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:max":null,"update:message":null,"update:min":null,"update:reevaluate":null,"update:type":null},props:{ignoreEmptyValue:Boolean,max:[Date,Number,String],message:String,min:[Date,Number,String],reevaluate:Boolean,type:String}};(0,o.nm)(cC);const pC=(0,i.pM)(cC);pC.$_optionName="validationRules",pC.$_isCollectionItem=!0,pC.$_predefinedProps={type:"range"};const hC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:message":null,"update:trim":null,"update:type":null},props:{message:String,trim:Boolean,type:String}};(0,o.nm)(hC);const mC=(0,i.pM)(hC);mC.$_optionName="validationRules",mC.$_isCollectionItem=!0,mC.$_predefinedProps={type:"required"};const gC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowMultiple":null,"update:colorExpr":null,"update:dataSource":null,"update:displayExpr":null,"update:fieldExpr":null,"update:icon":null,"update:label":null,"update:useColorAsDefault":null,"update:valueExpr":null},props:{allowMultiple:Boolean,colorExpr:String,dataSource:[Array,Object,String],displayExpr:[Function,String],fieldExpr:String,icon:String,label:String,useColorAsDefault:Boolean,valueExpr:[Function,String]}};(0,o.nm)(gC);const fC=(0,i.pM)(gC);fC.$_optionName="resources",fC.$_isCollectionItem=!0;const yC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:mode":null},props:{mode:String}};(0,o.nm)(yC);const DC=(0,i.pM)(yC);DC.$_optionName="scrolling";const CC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:aiOptions":null,"update:colSpan":null,"update:cssClass":null,"update:dataField":null,"update:editorOptions":null,"update:editorType":null,"update:helpText":null,"update:isRequired":null,"update:itemType":null,"update:label":null,"update:name":null,"update:template":null,"update:validationRules":null,"update:visible":null,"update:visibleIndex":null},props:{aiOptions:Object,colSpan:Number,cssClass:String,dataField:String,editorOptions:{},editorType:String,helpText:String,isRequired:Boolean,itemType:String,label:Object,name:String,template:{},validationRules:Array,visible:Boolean,visibleIndex:Number}};(0,o.nm)(CC);const vC=(0,i.pM)(CC);vC.$_optionName="items",vC.$_isCollectionItem=!0,vC.$_predefinedProps={itemType:"simple"},vC.$_expectedChildren={aiOptions:{isCollectionItem:!1,optionName:"aiOptions"},AsyncRule:{isCollectionItem:!0,optionName:"validationRules"},CompareRule:{isCollectionItem:!0,optionName:"validationRules"},CustomRule:{isCollectionItem:!0,optionName:"validationRules"},EmailRule:{isCollectionItem:!0,optionName:"validationRules"},label:{isCollectionItem:!1,optionName:"label"},NumericRule:{isCollectionItem:!0,optionName:"validationRules"},PatternRule:{isCollectionItem:!0,optionName:"validationRules"},RangeRule:{isCollectionItem:!0,optionName:"validationRules"},RequiredRule:{isCollectionItem:!0,optionName:"validationRules"},StringLengthRule:{isCollectionItem:!0,optionName:"validationRules"},validationRule:{isCollectionItem:!0,optionName:"validationRules"}};const _C={emits:{"update:isActive":null,"update:hoveredElement":null,"update:ignoreEmptyValue":null,"update:max":null,"update:message":null,"update:min":null,"update:trim":null,"update:type":null},props:{ignoreEmptyValue:Boolean,max:Number,message:String,min:Number,trim:Boolean,type:String}};(0,o.nm)(_C);const wC=(0,i.pM)(_C);wC.$_optionName="validationRules",wC.$_isCollectionItem=!0,wC.$_predefinedProps={type:"stringLength"};const bC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignItemLabels":null,"update:badge":null,"update:colCount":null,"update:colCountByScreen":null,"update:disabled":null,"update:icon":null,"update:items":null,"update:tabTemplate":null,"update:template":null,"update:title":null},props:{alignItemLabels:Boolean,badge:String,colCount:Number,colCountByScreen:Object,disabled:Boolean,icon:String,items:Array,tabTemplate:{},template:{},title:String}};(0,o.nm)(bC);const SC=(0,i.pM)(bC);SC.$_optionName="tabs",SC.$_isCollectionItem=!0,SC.$_expectedChildren={colCountByScreen:{isCollectionItem:!1,optionName:"colCountByScreen"}};const TC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:colSpan":null,"update:cssClass":null,"update:itemType":null,"update:name":null,"update:tabPanelOptions":null,"update:tabs":null,"update:visible":null,"update:visibleIndex":null},props:{colSpan:Number,cssClass:String,itemType:String,name:String,tabPanelOptions:Object,tabs:Array,visible:Boolean,visibleIndex:Number}};(0,o.nm)(TC);const xC=(0,i.pM)(TC);xC.$_optionName="items",xC.$_isCollectionItem=!0,xC.$_predefinedProps={itemType:"tabbed"},xC.$_expectedChildren={tab:{isCollectionItem:!0,optionName:"tabs"},tabPanelOptions:{isCollectionItem:!1,optionName:"tabPanelOptions"}};const AC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:animationEnabled":null,"update:dataSource":null,"update:deferRendering":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:iconPosition":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:itemTitleTemplate":null,"update:keyExpr":null,"update:loop":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onOptionChanged":null,"update:onSelectionChanged":null,"update:onSelectionChanging":null,"update:onTitleClick":null,"update:onTitleHold":null,"update:onTitleRendered":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:scrollByContent":null,"update:scrollingEnabled":null,"update:selectedIndex":null,"update:selectedItem":null,"update:showNavButtons":null,"update:stylingMode":null,"update:swipeEnabled":null,"update:tabIndex":null,"update:tabsPosition":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,animationEnabled:Boolean,dataSource:[Array,Object,String],deferRendering:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,iconPosition:String,itemHoldTimeout:Number,items:Array,itemTemplate:{},itemTitleTemplate:{},keyExpr:[Function,String],loop:Boolean,noDataText:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemHold:Function,onItemRendered:Function,onOptionChanged:Function,onSelectionChanged:Function,onSelectionChanging:Function,onTitleClick:Function,onTitleHold:Function,onTitleRendered:Function,repaintChangesOnly:Boolean,rtlEnabled:Boolean,scrollByContent:Boolean,scrollingEnabled:Boolean,selectedIndex:Number,selectedItem:{},showNavButtons:Boolean,stylingMode:String,swipeEnabled:Boolean,tabIndex:Number,tabsPosition:String,visible:Boolean,width:[Number,String]}};(0,o.nm)(AC);const EC=(0,i.pM)(AC);EC.$_optionName="tabPanelOptions",EC.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},tabPanelOptionsItem:{isCollectionItem:!0,optionName:"items"}};const kC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:badge":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:tabTemplate":null,"update:template":null,"update:text":null,"update:title":null,"update:visible":null},props:{badge:String,disabled:Boolean,html:String,icon:String,tabTemplate:{},template:{},text:String,title:String,visible:Boolean}};(0,o.nm)(kC);const OC=(0,i.pM)(kC);OC.$_optionName="items",OC.$_isCollectionItem=!0;const IC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:items":null,"update:multiline":null,"update:visible":null},props:{disabled:Boolean,items:Array,multiline:Boolean,visible:Boolean}};(0,o.nm)(IC);const RC=(0,i.pM)(IC);RC.$_optionName="toolbar",RC.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},toolbarItem:{isCollectionItem:!0,optionName:"items"}};const MC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:Object,showText:String,template:{},text:String,visible:Boolean,widget:String}};(0,o.nm)(MC);const VC=(0,i.pM)(MC);VC.$_optionName="items",VC.$_isCollectionItem=!0,VC.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const PC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:comparisonTarget":null,"update:comparisonType":null,"update:ignoreEmptyValue":null,"update:max":null,"update:message":null,"update:min":null,"update:pattern":null,"update:reevaluate":null,"update:trim":null,"update:type":null,"update:validationCallback":null},props:{comparisonTarget:Function,comparisonType:String,ignoreEmptyValue:Boolean,max:[Date,Number,String],message:String,min:[Date,Number,String],pattern:[RegExp,String],reevaluate:Boolean,trim:Boolean,type:String,validationCallback:Function}};(0,o.nm)(PC);const $C=(0,i.pM)(PC);$C.$_optionName="validationRules",$C.$_isCollectionItem=!0,$C.$_predefinedProps={type:"required"};const WC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:agendaDuration":null,"update:allDayPanelMode":null,"update:appointmentCollectorTemplate":null,"update:appointmentTemplate":null,"update:appointmentTooltipTemplate":null,"update:cellDuration":null,"update:dataCellTemplate":null,"update:dateCellTemplate":null,"update:endDayHour":null,"update:firstDayOfWeek":null,"update:groupByDate":null,"update:groupOrientation":null,"update:groups":null,"update:intervalCount":null,"update:maxAppointmentsPerCell":null,"update:name":null,"update:offset":null,"update:resourceCellTemplate":null,"update:scrolling":null,"update:startDate":null,"update:startDayHour":null,"update:timeCellTemplate":null,"update:type":null},props:{agendaDuration:Number,allDayPanelMode:String,appointmentCollectorTemplate:{},appointmentTemplate:{},appointmentTooltipTemplate:{},cellDuration:Number,dataCellTemplate:{},dateCellTemplate:{},endDayHour:Number,firstDayOfWeek:Number,groupByDate:Boolean,groupOrientation:String,groups:Array,intervalCount:Number,maxAppointmentsPerCell:[String,Number],name:String,offset:Number,resourceCellTemplate:{},scrolling:Object,startDate:[Date,Number,String],startDayHour:Number,timeCellTemplate:{},type:String}};(0,o.nm)(WC);const BC=(0,i.pM)(WC);BC.$_optionName="views",BC.$_isCollectionItem=!0,BC.$_expectedChildren={scrolling:{isCollectionItem:!1,optionName:"scrolling"}};
/*!
 * devextreme-vue
 * Version: 25.2.3
 * Build date: Fri Dec 12 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const HC={props:{animation:Object,container:{},contentTemplate:{},deferRendering:Boolean,disabled:Boolean,height:[Number,String],hideEvent:[Object,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onShowing:Function,onShown:Function,position:[String,Object],rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showEvent:[Object,String],target:{},visible:Boolean,width:[Number,String],wrapperAttr:{}},emits:{"update:isActive":null,"update:hoveredElement":null,"update:animation":null,"update:container":null,"update:contentTemplate":null,"update:deferRendering":null,"update:disabled":null,"update:height":null,"update:hideEvent":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onShowing":null,"update:onShown":null,"update:position":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showEvent":null,"update:target":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=ti,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},hideEvent:{isCollectionItem:!1,optionName:"hideEvent"},position:{isCollectionItem:!1,optionName:"position"},showEvent:{isCollectionItem:!1,optionName:"showEvent"}}}};(0,o.bx)(HC);const GC=(0,i.pM)(HC),NC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}};(0,o.nm)(NC);const FC=(0,i.pM)(NC);FC.$_optionName="animation",FC.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};const LC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}};(0,o.nm)(LC);const zC=(0,i.pM)(LC);zC.$_optionName="at";const UC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}};(0,o.nm)(UC);const jC=(0,i.pM)(UC);jC.$_optionName="boundaryOffset";const YC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}};(0,o.nm)(YC);const ZC=(0,i.pM)(YC);ZC.$_optionName="collision";const qC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}};(0,o.nm)(qC);const XC=(0,i.pM)(qC);XC.$_optionName="from",XC.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};const KC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}};(0,o.nm)(KC);const QC=(0,i.pM)(KC);QC.$_optionName="hide",QC.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};const JC={emits:{"update:isActive":null,"update:hoveredElement":null,"update:delay":null,"update:name":null},props:{delay:Number,name:String}};(0,o.nm)(JC);const ev=(0,i.pM)(JC);ev.$_optionName="hideEvent";const tv={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}};(0,o.nm)(tv);const nv=(0,i.pM)(tv);nv.$_optionName="my";const iv={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}};(0,o.nm)(iv);const av=(0,i.pM)(iv);av.$_optionName="offset";const rv={emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[String,Object],my:[Object,String],of:{},offset:[Object,String]}};(0,o.nm)(rv);const ov=(0,i.pM)(rv);ov.$_optionName="position",ov.$_expectedChildren={at:{isCollectionItem:!1,optionName:"at"},boundaryOffset:{isCollectionItem:!1,optionName:"boundaryOffset"},collision:{isCollectionItem:!1,optionName:"collision"},my:{isCollectionItem:!1,optionName:"my"},offset:{isCollectionItem:!1,optionName:"offset"}};const sv={emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}};(0,o.nm)(sv);const lv=(0,i.pM)(sv);lv.$_optionName="show",lv.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};const uv={emits:{"update:isActive":null,"update:hoveredElement":null,"update:delay":null,"update:name":null},props:{delay:Number,name:String}};(0,o.nm)(uv);const dv=(0,i.pM)(uv);dv.$_optionName="showEvent";const cv={emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}};(0,o.nm)(cv);const pv=(0,i.pM)(cv);pv.$_optionName="to",pv.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};var hv=n(85302),mv=n(61334),gv=n(27665),fv=n(82185),yv=n(90775);const Dv="dx-fa-button",Cv="dx-fa-button-icon",vv="dx-fa-button-label",_v="dx-fa-button-label-wrapper",wv="dx-fa-button-content-reverse";class bv extends yv.A{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{shading:!1,useInkRipple:!1,callOverlayRenderShading:!1,width:"auto",zIndex:1500,_observeContentResize:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,U.gx)(),options:{useInkRipple:!0}}])}_moveToContainer(){this._$wrapper.appendTo(this.$element()),this._$content.appendTo(this._$wrapper)}_render(){this.$element().addClass(Dv),this._renderIcon(),this._renderLabel(),super._render(),this.option("useInkRipple")&&this._renderInkRipple(),this._renderClick()}_renderLabel(){this._$label&&this._$label.remove();const{label:e}=this.option();if(!e)return void(this._$label=null);const t=(0,f.A)("<div>").addClass(vv),n=(0,f.A)("<div>").addClass(_v),i=this.$content();i&&(this._$label=n.prependTo(i).append(t.text(e)),i.toggleClass(wv,this._isPositionLeft(this.option("parentPosition"))))}_isPositionLeft(e){let t="";return e&&((0,A.Qd)(e)&&e.at?t=e.at.x?e.at.x:e.at:"string"===typeof e&&(t=e)),"left"===t.split(" ")[0]}_renderButtonIcon(e,t,n){e&&e.remove(),e=(0,f.A)("<div>").addClass(n);const i=(0,gv.N)(t);return e.append(i).appendTo(this.$content()),e}_renderIcon(){this._$icon=this._renderButtonIcon(this._$icon,this._options.silent("icon"),Cv)}_renderWrapper(){this._options.silent("callOverlayRenderShading")&&super._renderWrapper()}_getVisibleActions(e){const t=e||this.option("actions")||[];return t.filter(e=>e.option("visible"))}_getActionComponent(){return 1===this._getVisibleActions().length?this._getVisibleActions()[0]:this.option("actionComponent")||this.option("actions")[0]}_initContentReadyAction(){this._contentReadyAction=this._getActionComponent()._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]},!0)}_fireContentReadyAction(){this._contentReadyAction({actionElement:this.$element()})}_updateZIndexStackPosition(){const{zIndex:e}=this.option();this._$wrapper.css("zIndex",e),this._$content.css("zIndex",e)}_setClickAction(){const e=(0,ft.b4)(pt.U,this.NAME),t=this.$element().find(".dx-overlay-content");mt.A.off(t,e),mt.A.on(t,e,e=>{const t={event:e,actionElement:this.element(),element:this._getActionComponent().$element()};this._clickAction(t)})}_defaultActionArgs(){return{component:this._getActionComponent()}}_renderClick(){this._clickAction=this._getActionComponent()._createActionByOption("onClick"),this._setClickAction()}_renderInkRipple(){this._inkRipple=(0,fv.XX)()}_getInkRippleContainer(){return this._$icon}_toggleActiveState(e,t,n){if(super._toggleActiveState(e,t,n),!this._inkRipple)return;const i={element:this._getInkRippleContainer(),event:n};t?this._inkRipple.showWave(i):this._inkRipple.hideWave(i)}_optionChanged(e){const{name:t,value:n,previousValue:i}=e;switch(t){case"icon":this._renderIcon();break;case"onClick":this._renderClick();break;case"label":this._renderLabel();break;case"visible":this._currentVisible=i,n?this._show():this._hide();break;case"useInkRipple":this._render();break;default:super._optionChanged(e)}}}var Sv=bv;const{getSwatchContainer:Tv}=mv.A,xv="dx-fa-button-main",Av="dx-fa-button-icon-close";let Ev=null;const kv=e=>{const{animation:t,actionComponent:n,actionVisible:i,actions:a,activeStateEnabled:r,direction:o,elementAttr:s,hint:l,hoverStateEnabled:u,icon:d,id:c,index:p,label:h,onClick:m,onContentReady:g,parentPosition:f,position:y,visible:D,zIndex:C}=e.option();return(0,T.X)({},{animation:t,actionComponent:n,actionVisible:i,actions:a,activeStateEnabled:r,direction:o,elementAttr:s,hint:l,hoverStateEnabled:u,icon:d,id:c,index:p,label:h,onClick:m,onContentReady:g,parentPosition:f,position:y,visible:D,zIndex:C},{onInitialized:null,onDisposing:null})};class Ov extends Sv{_getDefaultOptions(){const e={icon:"add",closeIcon:"close",position:{at:"right bottom",my:"right bottom",offset:{x:-16,y:-16}},maxSpeedDialActionCount:5,hint:"",label:"",direction:"auto",actions:[],activeStateEnabled:!0,hoverStateEnabled:!0,indent:(0,U.ip)()?49:55,childIndent:40,childOffset:(0,U.ip)()?2:9,callOverlayRenderShading:!0,hideOnOutsideClick:!0};return Object.assign({},super._getDefaultOptions(),e,(0,m.A)().floatingActionButtonConfig,{shading:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,U.Ft)()&&!(0,U.ip)(),options:{indent:60,childIndent:60,childOffset:0}},{device:()=>(0,U.Ft)()&&(0,U.ip)(),options:{indent:48,childIndent:48,childOffset:0}},{device:()=>(0,U.gx)()&&!(0,U.ip)(),options:{indent:72,childIndent:56,childOffset:8}},{device:()=>(0,U.gx)()&&(0,U.ip)(),options:{indent:58,childIndent:48,childOffset:1}}])}_render(){this.$element().addClass(xv),super._render(),this._moveToContainer(),this._renderCloseIcon(),this._renderClick()}_renderLabel(){super._renderLabel(),this.$element().toggleClass("dx-fa-button-with-label",!!this._$label)}_renderIcon(){super._renderIcon(),this.$element().toggleClass("dx-fa-button-without-icon",!this.option("icon"))}_renderCloseIcon(){this._$closeIcon=this._renderButtonIcon(this._$closeIcon,this._options.silent("closeIcon"),Av),this._$closeIcon.addClass("dx-state-invisible")}_renderClick(){this._clickAction=1===this._getVisibleActions().length?this._getActionComponent()._createActionByOption("onClick"):this._createAction(this._clickHandler.bind(this)),this._setClickAction()}_getVisibleActions(e){const t=e||this.option("actions");return t.filter(e=>e.option("visible"))}_getCurrentOptions(e){var t;const n=null===(t=Ev)||void 0===t?void 0:t._getVisibleActions(e),i=this._getDefaultOptions();return 1===n.length?(0,T.X)(kv(n[0]),{position:this._getPosition()}):(0,T.X)(i,{visible:0!==n.length})}_clickHandler(){var e;const t=this._actionItems.filter(e=>e.option("actionVisible")).sort((e,t)=>e.option("index")-t.option("index"));if(1===t.length)return;const n=t.length-1;for(let i=0;i<t.length;i++)t[i].option("animation",this._getActionAnimation(t[i],i,n)),t[i].option("position",this._getActionPosition(t,i)),t[i]._$wrapper.css("position",this._$wrapper.css("position")),t[i].toggle();null!==(e=(0,m.A)().floatingActionButtonConfig)&&void 0!==e&&e.shading&&(this._isShadingShown=!this.option("shading"),this.option("shading",this._isShadingShown)),this._$icon.toggleClass("dx-state-invisible"),this._$closeIcon.toggleClass("dx-state-invisible")}_updateZIndexStackPosition(){super._updateZIndexStackPosition();const e=this._overlayStack();e.push(this)}_renderActions(){var e;const{actions:t=[]}=this.option();if(null!==(e=this._actionItems)&&void 0!==e&&e.length&&(this._actionItems.forEach(e=>{e.dispose(),e.$element().remove()}),this._actionItems=[]),this._actionItems=[],1!==t.length)for(let n=0;n<t.length;n++){const e=t[n],i=(0,f.A)("<div>").appendTo(Tv(e.$element()));mt.A.off(i,"click"),mt.A.on(i,"click",()=>{this._clickHandler()}),e._options.silent("actionComponent",e),e._options.silent("parentPosition",this._getPosition()),e._options.silent("actionVisible",e._options.silent("visible")),this._actionItems.push(this._createComponent(i,Sv,(0,T.X)({},kv(e),{visible:!1})))}}_getActionAnimation(e,t,n){return e._options.silent("animation.show.delay",30*t),e._options.silent("animation.hide.delay",30*(n-t)),e._options.silent("animation")}_getDirectionIndex(e,t){if("auto"===t){const t=(0,yt.Oq)(this.$content()),n=this.initialOption("indent")+this.initialOption("childIndent")*e.length-t,i=this.$content().offset().top;if(n<i)return-1;const a=(0,yt.Oq)(this._positionController._$wrapperCoveredElement)-t-i;return i>=a?-1:1}return"down"!==t?-1:1}_getActionPosition(e,t){const n=e[t],i=this.initialOption("childOffset"),a=n._options.silent("label")&&!this._$label?this._isPositionLeft(this._getPosition())?i:-i:0,r=this.initialOption("indent")+this.initialOption("childIndent")*t,o=this._getDirectionIndex(e,this.option("direction"))*r,s=n._options.silent("label")?this._isPositionLeft(this._getPosition())?"left":"right":"center";return{of:this.$content(),at:s,my:s,offset:{x:a,y:o}}}_outsideClickHandler(e){if(this._isShadingShown){const t=(0,f.A)(e.target)[0]===this._$wrapper[0];t&&(e.preventDefault(),this._clickHandler())}}_setPosition(){this.option("visible")&&(this._hide(),this._show())}_getPosition(){return this._getDefaultOptions().position}_getInkRippleContainer(){return this.$content()}_optionChanged(e){switch(e.name){case"actions":this._isVisible()&&(this._renderIcon(),this._renderLabel()),this._renderCloseIcon(),this._renderClick(),this._renderActions();break;case"maxSpeedDialActionCount":this._renderActions();break;case"closeIcon":this._renderCloseIcon();break;case"position":super._optionChanged(e),this._setPosition();break;case"label":this._isVisible()&&this._renderLabel(),this._setPosition();break;case"icon":this._isVisible()&&this._renderIcon();break;default:super._optionChanged(e)}}}function Iv(e){e._options.silent("onInitializing",null);let t=!1;if(Ev){const{actions:n=[]}=Ev.option();if(n.forEach(n=>{if(n._options.silent("id")===e._options.silent("id"))return t=!0,e}),delete Ev._options.position,t)1===n.length?Ev.option((0,T.X)({},kv(n[0]),{actions:n,position:Ev._getPosition()})):Ev.option((0,T.X)(Ev._getCurrentOptions(n),{actions:n}));else{if(Ev._getVisibleActions(n).length>=Ev.option("maxSpeedDialActionCount"))return e.dispose(),void I.A.log("W1014");n.push(e),Ev.option((0,T.X)(Ev._getCurrentOptions(n),{actions:n}))}}else{const t=(0,f.A)("<div>").appendTo(Tv(e.$element()));Ev=e._createComponent(t,Ov,(0,T.X)({},kv(e),{actions:[e]}))}}function Rv(e){if(!Ev)return;const{actions:t=[]}=Ev.option();let n=t;const i=n.length;n=n.filter(t=>t._options.silent("id")!==e),i!==n.length&&(n.length?1===n.length?Ev.option((0,T.X)({},kv(n[0]),{actions:n})):Ev.option({actions:n}):(Ev.dispose(),Ev.$element().remove(),Ev=null))}const{getSwatchContainer:Mv}=mv.A,Vv=hv.A.add;class Pv extends Mh.Ay{_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{icon:"",onClick:null,label:"",visible:!0,index:0,onContentReady:null,activeStateEnabled:!0,hoverStateEnabled:!0,animation:{show:{type:"pop",duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)",from:{scale:0,opacity:0},to:{scale:1,opacity:1}},hide:{type:"pop",duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)",from:{scale:1,opacity:1},to:{scale:0,opacity:0}}},id:new qn.A})}_optionChanged(e){switch(e.name){case"onClick":case"icon":case"label":case"visible":case"index":case"onInitializing":Iv(this);break;case"animation":case"id":break;default:super._optionChanged(e)}}_render(){this._toggleVisibility(!1),Mv(this.$element())?Iv(this):Vv(()=>Iv(this))}_dispose(){Rv(this._options.silent("id")),super._dispose()}}(0,h.A)("dxSpeedDialAction",Pv);var $v=Pv,Wv=$v;
/*!
 * devextreme-vue
 * Version: 25.2.3
 * Build date: Fri Dec 12 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const Bv={props:{accessKey:String,activeStateEnabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,hint:String,hoverStateEnabled:Boolean,icon:String,index:Number,label:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,tabIndex:Number,visible:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:index":null,"update:label":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:tabIndex":null,"update:visible":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=Wv,this.$_hasAsyncTemplate=!0}};(0,o.bx)(Bv);const Hv=(0,i.pM)(Bv);var Gv=n(65569),Nv=n(98416),Fv=n(26379),Lv=n(13906);const zv={class:"side-panel-container"},Uv={key:0,class:"button-container"},jv={class:"side-panel-content-wrapper"};var Yv=(0,i.pM)({__name:"left-side-panel",setup(e){const t=(0,a.KR)(!(Nv.du.value.isXSmall||Nv.du.value.isSmall)),n=(0,i.EW)(()=>Nv.du.value.isXSmall||Nv.du.value.isSmall);return(0,i.nT)(()=>{t.value=!(Nv.du.value.isXSmall||Nv.du.value.isSmall)}),(e,o)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,Fv.C4)({"left-side-panel":!0,overlapping:n.value,open:t.value})},[(0,i.Lk)("div",zv,[n.value?((0,i.uX)(),(0,i.CE)("div",Uv,[(0,i.bF)((0,a.R1)(r.x),{class:"open-button",icon:t.value?"hidepanel":"showpanel",onClick:o[0]||(o[0]=e=>t.value=!t.value)},null,8,["icon"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",jv,[(0,i.bF)((0,a.R1)(Lv.$),{style:{"max-height":"100%"}},{default:(0,i.k6)(()=>[(0,i.RG)(e.$slots,"default")]),_:3})])])],2))}}),Zv=n(14480);const qv=(0,Zv.A)(Yv,[["__scopeId","data-v-fcc13ca2"]]);var Xv=qv,Kv=n(34299),Qv=n(97755);
/*!
 * devextreme-vue
 * Version: 25.2.3
 * Build date: Fri Dec 12 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const Jv={props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,enableThreeStateBehavior:Boolean,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,iconSize:[Number,String],isDirty:Boolean,isValid:Boolean,name:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,readOnly:Boolean,rtlEnabled:Boolean,tabIndex:Number,text:String,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:Boolean,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:enableThreeStateBehavior":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:iconSize":null,"update:isDirty":null,"update:isValid":null,"update:name":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:readOnly":null,"update:rtlEnabled":null,"update:tabIndex":null,"update:text":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:width":null},model:{prop:"value",event:"update:value"},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=Qv.A,this.$_hasAsyncTemplate=!0}};(0,o.bx)(Jv);const e_=(0,i.pM)(Jv);const t_={class:"list-header"},n_={class:"list-item"},i_={class:"list-item-text"};var a_=(0,i.pM)({__name:"calendar-list",props:{dataSource:{default:()=>[]}},emits:["listSelectionChanged"],setup(e,{emit:t}){const n=e;let r=[];(0,i.nT)(()=>{r=[...n.dataSource.flatMap(e=>e.items)]});const o=t;function s(e,{value:t}){r=t?[...r,e]:r.filter(t=>t!==e),o("listSelectionChanged",r)}return(t,n)=>((0,i.uX)(),(0,i.Wv)((0,a.R1)(Kv.T$),{class:"calendar-list","data-source":e.dataSource,"active-state-enabled":!1,"focus-state-enabled":!1,"hover-state-enabled":!1,grouped:!0,"collapsible-groups":!0,"scrolling-enabled":!1},{group:(0,i.k6)(({data:e})=>[(0,i.Lk)("div",t_,(0,Fv.v_)(e.key),1)]),item:(0,i.k6)(({data:e})=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",n_,[(0,i.bF)((0,a.R1)(e_),{value:(0,a.R1)(r).includes(e),"focus-state-enabled":!1,onValueChanged:t=>s(e,t)},null,8,["value","onValueChanged"]),(0,i.Lk)("span",i_,(0,Fv.v_)(e.text),1)])])]),_:1},8,["data-source"]))}});const r_=(0,Zv.A)(a_,[["__scopeId","data-v-665ca718"]]);var o_=r_;const s_={key:0,class:"appointment-tooltip"},l_={class:"title"},u_={class:"content"},d_={class:"date"},c_={key:0,class:"description"},p_={class:"buttons"};var h_=(0,i.pM)({__name:"scheduler-tooltip",props:{selectedAppointmentData:{default:()=>({})}},emits:["clickEditAppointment","clickDeleteAppointment"],setup(e,{emit:t}){const n=e,o=(0,i.EW)(()=>{const e={hour:"numeric",minute:"numeric",hour12:!1},t={...e,weekday:"short",day:"numeric",month:"numeric",year:"numeric"};return`${n.selectedAppointmentData?.startDate?.toLocaleString(void 0,t)} - ${n.selectedAppointmentData?.endDate?.toLocaleTimeString(void 0,e)}`}),s=t;return(t,n)=>e.selectedAppointmentData?((0,i.uX)(),(0,i.CE)("div",s_,[(0,i.Lk)("div",l_,(0,Fv.v_)(e.selectedAppointmentData.text),1),(0,i.Lk)("div",u_,[(0,i.Lk)("div",d_,[(0,i.bF)((0,a.R1)(r.x),{icon:"clock","styling-mode":"text","focus-state-enabled":!1,"active-state-enabled":!1,"hover-state-enabled":!1}),(0,i.eW)(" "+(0,Fv.v_)(o.value),1)]),e.selectedAppointmentData.description?((0,i.uX)(),(0,i.CE)("div",c_,[(0,i.bF)((0,a.R1)(r.x),{icon:"textdocument","styling-mode":"text","focus-state-enabled":!1,"active-state-enabled":!1,"hover-state-enabled":!1}),(0,i.eW)(" "+(0,Fv.v_)(e.selectedAppointmentData.description),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",p_,[(0,i.bF)((0,a.R1)(r.x),{class:"button-danger",text:"Delete",type:"danger","styling-mode":"text",onClick:n[0]||(n[0]=()=>s("clickDeleteAppointment",e.selectedAppointmentData))}),(0,i.bF)((0,a.R1)(r.x),{class:"button-success",text:"Edit",type:"success","styling-mode":"text",onClick:n[1]||(n[1]=()=>s("clickEditAppointment"))})])])):(0,i.Q3)("",!0)}});const m_=h_;var g_=m_;const f_={class:"right-side-panel"},y_={class:"side-panel-container"},D_={class:"side-panel-header"},C_={key:0,class:"side-panel-title"},v_={class:"side-panel-title-text"},__={class:"side-panel-content-wrapper"};var w_=(0,i.pM)({__name:"right-side-panel",props:{title:{default:""},isOpened:{type:Boolean,default:!1},showOpenButton:{type:Boolean,default:!0}},emits:["openedChange"],setup(e,{emit:t}){const n=e,o=(0,a.KR)(!1),s=t;function l(){o.value=!o.value,s("openedChange",o.value)}return(0,i.nT)(()=>{o.value=n.isOpened}),(t,n)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,Fv.C4)({"right-side-panel-wrapper":!0,overlapping:!(0,a.R1)(Nv.du).isLarge,open:o.value,"closed-state-hidden":!e.showOpenButton})},[(0,i.Lk)("div",f_,[(0,i.Lk)("div",y_,[(0,i.Lk)("div",D_,[e.title?((0,i.uX)(),(0,i.CE)("div",C_,[(0,i.Lk)("div",v_,(0,Fv.v_)(e.title),1)])):(0,i.Q3)("",!0),(0,i.bF)((0,a.R1)(r.x),{class:"open-button","styling-mode":"text",icon:e.isOpened?(0,a.R1)(Nv.du).isLarge?"panelleft":"close":"panelright",onClick:l},null,8,["icon"])]),(0,i.Lk)("div",__,[(0,i.RG)(t.$slots,"default")])])])],2))}});const b_=(0,Zv.A)(w_,[["__scopeId","data-v-06259f59"]]);var S_=b_,T_=n(166);class x_ extends Error{}class A_ extends x_{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class E_ extends x_{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class k_ extends x_{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class O_ extends x_{}class I_ extends x_{constructor(e){super(`Invalid unit ${e}`)}}class R_ extends x_{}class M_ extends x_{constructor(){super("Zone is an abstract class")}}const V_="numeric",P_="short",$_="long",W_={year:V_,month:V_,day:V_},B_={year:V_,month:P_,day:V_},H_={year:V_,month:P_,day:V_,weekday:P_},G_={year:V_,month:$_,day:V_},N_={year:V_,month:$_,day:V_,weekday:$_},F_={hour:V_,minute:V_},L_={hour:V_,minute:V_,second:V_},z_={hour:V_,minute:V_,second:V_,timeZoneName:P_},U_={hour:V_,minute:V_,second:V_,timeZoneName:$_},j_={hour:V_,minute:V_,hourCycle:"h23"},Y_={hour:V_,minute:V_,second:V_,hourCycle:"h23"},Z_={hour:V_,minute:V_,second:V_,hourCycle:"h23",timeZoneName:P_},q_={hour:V_,minute:V_,second:V_,hourCycle:"h23",timeZoneName:$_},X_={year:V_,month:V_,day:V_,hour:V_,minute:V_},K_={year:V_,month:V_,day:V_,hour:V_,minute:V_,second:V_},Q_={year:V_,month:P_,day:V_,hour:V_,minute:V_},J_={year:V_,month:P_,day:V_,hour:V_,minute:V_,second:V_},ew={year:V_,month:P_,day:V_,weekday:P_,hour:V_,minute:V_},tw={year:V_,month:$_,day:V_,hour:V_,minute:V_,timeZoneName:P_},nw={year:V_,month:$_,day:V_,hour:V_,minute:V_,second:V_,timeZoneName:P_},iw={year:V_,month:$_,day:V_,weekday:$_,hour:V_,minute:V_,timeZoneName:$_},aw={year:V_,month:$_,day:V_,weekday:$_,hour:V_,minute:V_,second:V_,timeZoneName:$_};class rw{get type(){throw new M_}get name(){throw new M_}get ianaName(){return this.name}get isUniversal(){throw new M_}offsetName(e,t){throw new M_}formatOffset(e,t){throw new M_}offset(e){throw new M_}equals(e){throw new M_}get isValid(){throw new M_}}let ow=null;class sw extends rw{static get instance(){return null===ow&&(ow=new sw),ow}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return qb(e,t,n)}formatOffset(e,t){return Jb(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}const lw=new Map;function uw(e){let t=lw.get(e);return void 0===t&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),lw.set(e,t)),t}const dw={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function cw(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,a,r,o,s,l,u,d]=i;return[o,a,r,s,l,u,d]}function pw(e,t){const n=e.formatToParts(t),i=[];for(let a=0;a<n.length;a++){const{type:e,value:t}=n[a],r=dw[e];"era"===e?i[r]=t:bb(r)||(i[r]=parseInt(t,10))}return i}const hw=new Map;class mw extends rw{static create(e){let t=hw.get(e);return void 0===t&&hw.set(e,t=new mw(e)),t}static resetCache(){hw.clear(),lw.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=mw.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return qb(e,t,n,this.name)}formatOffset(e,t){return Jb(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const n=uw(this.name);let[i,a,r,o,s,l,u]=n.formatToParts?pw(n,t):cw(n,t);"BC"===o&&(i=1-Math.abs(i));const d=24===s?0:s,c=Ub({year:i,month:a,day:r,hour:d,minute:l,second:u,millisecond:0});let p=+t;const h=p%1e3;return p-=h>=0?h:1e3+h,(c-p)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let gw={};function fw(e,t={}){const n=JSON.stringify([e,t]);let i=gw[n];return i||(i=new Intl.ListFormat(e,t),gw[n]=i),i}const yw=new Map;function Dw(e,t={}){const n=JSON.stringify([e,t]);let i=yw.get(n);return void 0===i&&(i=new Intl.DateTimeFormat(e,t),yw.set(n,i)),i}const Cw=new Map;function vw(e,t={}){const n=JSON.stringify([e,t]);let i=Cw.get(n);return void 0===i&&(i=new Intl.NumberFormat(e,t),Cw.set(n,i)),i}const _w=new Map;function ww(e,t={}){const{base:n,...i}=t,a=JSON.stringify([e,i]);let r=_w.get(a);return void 0===r&&(r=new Intl.RelativeTimeFormat(e,t),_w.set(a,r)),r}let bw=null;function Sw(){return bw||(bw=(new Intl.DateTimeFormat).resolvedOptions().locale,bw)}const Tw=new Map;function xw(e){let t=Tw.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),Tw.set(e,t)),t}const Aw=new Map;function Ew(e){let t=Aw.get(e);if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in t||(t={...Bw,...t}),Aw.set(e,t)}return t}function kw(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,a;try{t=Dw(e).resolvedOptions(),a=e}catch(i){const r=e.substring(0,n);t=Dw(r).resolvedOptions(),a=r}const{numberingSystem:r,calendar:o}=t;return[a,r,o]}}function Ow(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}function Iw(e){const t=[];for(let n=1;n<=12;n++){const i=Nx.utc(2009,n,1);t.push(e(i))}return t}function Rw(e){const t=[];for(let n=1;n<=7;n++){const i=Nx.utc(2016,11,13+n);t.push(e(i))}return t}function Mw(e,t,n,i){const a=e.listingMode();return"error"===a?null:"en"===a?n(t):i(t)}function Vw(e){return(!e.numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===xw(e.locale).numberingSystem)}class Pw{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:a,...r}=n;if(!t||Object.keys(r).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=vw(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}{const t=this.floor?Math.floor(e):Nb(e,3);return Wb(t,this.padTo)}}}class $w{constructor(e,t,n){let i;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&mw.create(n).valid?(i=n,this.dt=e):(i="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const a={...this.opts};a.timeZone=a.timeZone||i,this.dtf=Dw(t,a)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ww{constructor(e,t,n){this.opts={style:"long",...n},!t&&Eb()&&(this.rtf=ww(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):DS(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Bw={firstDay:1,minimalDays:4,weekend:[6,7]};class Hw{static fromOpts(e){return Hw.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,i,a=!1){const r=e||rb.defaultLocale,o=r||(a?"en-US":Sw()),s=t||rb.defaultNumberingSystem,l=n||rb.defaultOutputCalendar,u=Vb(i)||rb.defaultWeekSettings;return new Hw(o,s,l,u,r)}static resetCache(){bw=null,yw.clear(),Cw.clear(),_w.clear(),Tw.clear(),Aw.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:i}={}){return Hw.create(e,t,n,i)}constructor(e,t,n,i,a){const[r,o,s]=kw(e);this.locale=r,this.numberingSystem=t||o||null,this.outputCalendar=n||s||null,this.weekSettings=i,this.intl=Ow(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=Vw(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?Hw.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Vb(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Mw(this,e,aS,()=>{const n="ja"===this.intl||this.intl.startsWith("ja-");t&=!n;const i=t?{month:e,day:"numeric"}:{month:e},a=t?"format":"standalone";if(!this.monthsCache[a][e]){const t=n?e=>this.dtFormatter(e,i).format():e=>this.extract(e,i,"month");this.monthsCache[a][e]=Iw(t)}return this.monthsCache[a][e]})}weekdays(e,t=!1){return Mw(this,e,lS,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Rw(e=>this.extract(e,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Mw(this,void 0,()=>uS,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Nx.utc(2016,11,13,9),Nx.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Mw(this,e,hS,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Nx.utc(-40,1,1),Nx.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,n){const i=this.dtFormatter(e,t),a=i.formatToParts(),r=a.find(e=>e.type.toLowerCase()===n);return r?r.value:null}numberFormatter(e={}){return new Pw(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new $w(e,this.intl,t)}relFormatter(e={}){return new Ww(this.intl,this.isEnglish(),e)}listFormatter(e={}){return fw(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||xw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:kb()?Ew(this.locale):Bw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Gw=null;class Nw extends rw{static get utcInstance(){return null===Gw&&(Gw=new Nw(0)),Gw}static instance(e){return 0===e?Nw.utcInstance:new Nw(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Nw(Xb(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${Jb(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${Jb(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Jb(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class Fw extends rw{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Lw(e,t){if(bb(e)||null===e)return t;if(e instanceof rw)return e;if(xb(e)){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?sw.instance:"utc"===n||"gmt"===n?Nw.utcInstance:Nw.parseSpecifier(n)||mw.create(e)}return Sb(e)?Nw.instance(e):"object"===typeof e&&"offset"in e&&"function"===typeof e.offset?e:new Fw(e)}const zw={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Uw={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},jw=zw.hanidec.replace(/[\[|\]]/g,"").split("");function Yw(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(-1!==e[n].search(zw.hanidec))t+=jw.indexOf(e[n]);else for(const e in Uw){const[n,a]=Uw[e];i>=n&&i<=a&&(t+=i-n)}}return parseInt(t,10)}return t}const Zw=new Map;function qw(){Zw.clear()}function Xw({numberingSystem:e},t=""){const n=e||"latn";let i=Zw.get(n);void 0===i&&(i=new Map,Zw.set(n,i));let a=i.get(t);return void 0===a&&(a=new RegExp(`${zw[n]}${t}`),i.set(t,a)),a}let Kw,Qw=()=>Date.now(),Jw="system",eb=null,tb=null,nb=null,ib=60,ab=null;class rb{static get now(){return Qw}static set now(e){Qw=e}static set defaultZone(e){Jw=e}static get defaultZone(){return Lw(Jw,sw.instance)}static get defaultLocale(){return eb}static set defaultLocale(e){eb=e}static get defaultNumberingSystem(){return tb}static set defaultNumberingSystem(e){tb=e}static get defaultOutputCalendar(){return nb}static set defaultOutputCalendar(e){nb=e}static get defaultWeekSettings(){return ab}static set defaultWeekSettings(e){ab=Vb(e)}static get twoDigitCutoffYear(){return ib}static set twoDigitCutoffYear(e){ib=e%100}static get throwOnInvalid(){return Kw}static set throwOnInvalid(e){Kw=e}static resetCaches(){Hw.resetCache(),mw.resetCache(),Nx.resetCache(),qw()}}class ob{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const sb=[0,31,59,90,120,151,181,212,243,273,304,334],lb=[0,31,60,91,121,152,182,213,244,274,305,335];function ub(e,t){return new ob("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function db(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const a=i.getUTCDay();return 0===a?7:a}function cb(e,t,n){return n+(Fb(e)?lb:sb)[t-1]}function pb(e,t){const n=Fb(e)?lb:sb,i=n.findIndex(e=>e<t),a=t-n[i];return{month:i+1,day:a}}function hb(e,t){return(e-t+7)%7+1}function mb(e,t=4,n=1){const{year:i,month:a,day:r}=e,o=cb(i,a,r),s=hb(db(i,a,r),n);let l,u=Math.floor((o-s+14-t)/7);return u<1?(l=i-1,u=Yb(l,t,n)):u>Yb(i,t,n)?(l=i+1,u=1):l=i,{weekYear:l,weekNumber:u,weekday:s,...eS(e)}}function gb(e,t=4,n=1){const{weekYear:i,weekNumber:a,weekday:r}=e,o=hb(db(i,1,t),n),s=Lb(i);let l,u=7*a+r-o-7+t;u<1?(l=i-1,u+=Lb(l)):u>s?(l=i+1,u-=Lb(i)):l=i;const{month:d,day:c}=pb(l,u);return{year:l,month:d,day:c,...eS(e)}}function fb(e){const{year:t,month:n,day:i}=e,a=cb(t,n,i);return{year:t,ordinal:a,...eS(e)}}function yb(e){const{year:t,ordinal:n}=e,{month:i,day:a}=pb(t,n);return{year:t,month:i,day:a,...eS(e)}}function Db(e,t){const n=!bb(e.localWeekday)||!bb(e.localWeekNumber)||!bb(e.localWeekYear);if(n){const n=!bb(e.weekday)||!bb(e.weekNumber)||!bb(e.weekYear);if(n)throw new O_("Cannot mix locale-based week fields with ISO-based week fields");return bb(e.localWeekday)||(e.weekday=e.localWeekday),bb(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),bb(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Cb(e,t=4,n=1){const i=Tb(e.weekYear),a=Pb(e.weekNumber,1,Yb(e.weekYear,t,n)),r=Pb(e.weekday,1,7);return i?a?!r&&ub("weekday",e.weekday):ub("week",e.weekNumber):ub("weekYear",e.weekYear)}function vb(e){const t=Tb(e.year),n=Pb(e.ordinal,1,Lb(e.year));return t?!n&&ub("ordinal",e.ordinal):ub("year",e.year)}function _b(e){const t=Tb(e.year),n=Pb(e.month,1,12),i=Pb(e.day,1,zb(e.year,e.month));return t?n?!i&&ub("day",e.day):ub("month",e.month):ub("year",e.year)}function wb(e){const{hour:t,minute:n,second:i,millisecond:a}=e,r=Pb(t,0,23)||24===t&&0===n&&0===i&&0===a,o=Pb(n,0,59),s=Pb(i,0,59),l=Pb(a,0,999);return r?o?s?!l&&ub("millisecond",a):ub("second",i):ub("minute",n):ub("hour",t)}function bb(e){return"undefined"===typeof e}function Sb(e){return"number"===typeof e}function Tb(e){return"number"===typeof e&&e%1===0}function xb(e){return"string"===typeof e}function Ab(e){return"[object Date]"===Object.prototype.toString.call(e)}function Eb(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function kb(){try{return"undefined"!==typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Ob(e){return Array.isArray(e)?e:[e]}function Ib(e,t,n){if(0!==e.length)return e.reduce((e,i)=>{const a=[t(i),i];return e&&n(e[0],a[0])===e[0]?e:a},null)[1]}function Rb(e,t){return t.reduce((t,n)=>(t[n]=e[n],t),{})}function Mb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vb(e){if(null==e)return null;if("object"!==typeof e)throw new R_("Week settings must be an object");if(!Pb(e.firstDay,1,7)||!Pb(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!Pb(e,1,7)))throw new R_("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Pb(e,t,n){return Tb(e)&&e>=t&&e<=n}function $b(e,t){return e-t*Math.floor(e/t)}function Wb(e,t=2){const n=e<0;let i;return i=n?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),i}function Bb(e){return bb(e)||null===e||""===e?void 0:parseInt(e,10)}function Hb(e){return bb(e)||null===e||""===e?void 0:parseFloat(e)}function Gb(e){if(!bb(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Nb(e,t,n="round"){const i=10**t;switch(n){case"expand":return e>0?Math.ceil(e*i)/i:Math.floor(e*i)/i;case"trunc":return Math.trunc(e*i)/i;case"round":return Math.round(e*i)/i;case"floor":return Math.floor(e*i)/i;case"ceil":return Math.ceil(e*i)/i;default:throw new RangeError(`Value rounding ${n} is out of range`)}}function Fb(e){return e%4===0&&(e%100!==0||e%400===0)}function Lb(e){return Fb(e)?366:365}function zb(e,t){const n=$b(t-1,12)+1,i=e+(t-n)/12;return 2===n?Fb(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Ub(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function jb(e,t,n){const i=hb(db(e,1,t),n);return-i+t-1}function Yb(e,t=4,n=1){const i=jb(e,t,n),a=jb(e+1,t,n);return(Lb(e)-i+a)/7}function Zb(e){return e>99?e:e>rb.twoDigitCutoffYear?1900+e:2e3+e}function qb(e,t,n,i=null){const a=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:t,...r},s=new Intl.DateTimeFormat(n,o).formatToParts(a).find(e=>"timezonename"===e.type.toLowerCase());return s?s.value:null}function Xb(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,a=n<0||Object.is(n,-0)?-i:i;return 60*n+a}function Kb(e){const t=Number(e);if("boolean"===typeof e||""===e||!Number.isFinite(t))throw new R_(`Invalid unit value ${e}`);return t}function Qb(e,t){const n={};for(const i in e)if(Mb(e,i)){const a=e[i];if(void 0===a||null===a)continue;n[t(i)]=Kb(a)}return n}function Jb(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),a=e>=0?"+":"-";switch(t){case"short":return`${a}${Wb(n,2)}:${Wb(i,2)}`;case"narrow":return`${a}${n}${i>0?`:${i}`:""}`;case"techie":return`${a}${Wb(n,2)}${Wb(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function eS(e){return Rb(e,["hour","minute","second","millisecond"])}const tS=["January","February","March","April","May","June","July","August","September","October","November","December"],nS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],iS=["J","F","M","A","M","J","J","A","S","O","N","D"];function aS(e){switch(e){case"narrow":return[...iS];case"short":return[...nS];case"long":return[...tS];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const rS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],oS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],sS=["M","T","W","T","F","S","S"];function lS(e){switch(e){case"narrow":return[...sS];case"short":return[...oS];case"long":return[...rS];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const uS=["AM","PM"],dS=["Before Christ","Anno Domini"],cS=["BC","AD"],pS=["B","A"];function hS(e){switch(e){case"narrow":return[...pS];case"short":return[...cS];case"long":return[...dS];default:return null}}function mS(e){return uS[e.hour<12?0:1]}function gS(e,t){return lS(t)[e.weekday-1]}function fS(e,t){return aS(t)[e.month-1]}function yS(e,t){return hS(t)[e.year<0?0:1]}function DS(e,t,n="always",i=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&r){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${a[e][0]}`;case-1:return n?"yesterday":`last ${a[e][0]}`;case 0:return n?"today":`this ${a[e][0]}`}}const o=Object.is(t,-0)||t<0,s=Math.abs(t),l=1===s,u=a[e],d=i?l?u[1]:u[2]||u[1]:l?a[e][0]:e;return o?`${s} ${d} ago`:`in ${s} ${d}`}function CS(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const vS={D:W_,DD:B_,DDD:G_,DDDD:N_,t:F_,tt:L_,ttt:z_,tttt:U_,T:j_,TT:Y_,TTT:Z_,TTTT:q_,f:X_,ff:Q_,fff:tw,ffff:iw,F:K_,FF:J_,FFF:nw,FFFF:aw};class _S{static create(e,t={}){return new _S(e,t)}static parseFormat(e){let t=null,n="",i=!1;const a=[];for(let r=0;r<e.length;r++){const o=e.charAt(r);"'"===o?((n.length>0||i)&&a.push({literal:i||/^\s+$/.test(n),val:""===n?"'":n}),t=null,n="",i=!i):i||o===t?n+=o:(n.length>0&&a.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&a.push({literal:i||/^\s+$/.test(n),val:n}),a}static macroTokenToFormatOpts(e){return vS[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());const n=this.systemLoc.dtFormatter(e,{...this.opts,...t});return n.format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){const n=this.dtFormatter(e.start,t);return n.dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,n=void 0){if(this.opts.forceSimple)return Wb(e,t);const i={...this.opts};return t>0&&(i.padTo=t),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,a=(t,n)=>this.loc.extract(e,t,n),r=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=()=>n?mS(e):a({hour:"numeric",hourCycle:"h12"},"dayperiod"),s=(t,i)=>n?fS(e,t):a(i?{month:t}:{month:t,day:"numeric"},"month"),l=(t,i)=>n?gS(e,t):a(i?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),u=t=>{const n=_S.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},d=t=>n?yS(e,t):a({era:t},"era"),c=t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return i?a({day:"numeric"},"day"):this.num(e.day);case"dd":return i?a({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?a({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?a({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return i?a({month:"numeric"},"month"):this.num(e.month);case"MM":return i?a({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return i?a({year:"numeric"},"year"):this.num(e.year);case"yy":return i?a({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?a({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?a({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(t)}};return CS(_S.parseFormat(t),c)}formatDurationFromString(e,t){const n="negativeLargestOnly"===this.opts.signMode?-1:1,i=e=>{switch(e[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},a=(e,t)=>a=>{const r=i(a);if(r){const i=t.isNegativeDuration&&r!==t.largestUnit?n:1;let o;return o="negativeLargestOnly"===this.opts.signMode&&r!==t.largestUnit?"never":"all"===this.opts.signMode?"always":"auto",this.num(e.get(r)*i,a.length,o)}return a},r=_S.parseFormat(t),o=r.reduce((e,{literal:t,val:n})=>t?e:e.concat(n),[]),s=e.shiftTo(...o.map(i).filter(e=>e)),l={isNegativeDuration:s<0,largestUnit:Object.keys(s.values)[0]};return CS(r,a(s,l))}}const wS=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function bS(...e){const t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function SS(...e){return t=>e.reduce(([e,n,i],a)=>{const[r,o,s]=a(t,i);return[{...e,...r},o||n,s]},[{},null,1]).slice(0,2)}function TS(e,...t){if(null==e)return[null,null];for(const[n,i]of t){const t=n.exec(e);if(t)return i(t)}return[null,null]}function xS(...e){return(t,n)=>{const i={};let a;for(a=0;a<e.length;a++)i[e[a]]=Bb(t[n+a]);return[i,null,n+a]}}const AS=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,ES=`(?:${AS.source}?(?:\\[(${wS.source})\\])?)?`,kS=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,OS=RegExp(`${kS.source}${ES}`),IS=RegExp(`(?:[Tt]${OS.source})?`),RS=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,MS=/(\d{4})-?W(\d\d)(?:-?(\d))?/,VS=/(\d{4})-?(\d{3})/,PS=xS("weekYear","weekNumber","weekDay"),$S=xS("year","ordinal"),WS=/(\d{4})-(\d\d)-(\d\d)/,BS=RegExp(`${kS.source} ?(?:${AS.source}|(${wS.source}))?`),HS=RegExp(`(?: ${BS.source})?`);function GS(e,t,n){const i=e[t];return bb(i)?n:Bb(i)}function NS(e,t){const n={year:GS(e,t),month:GS(e,t+1,1),day:GS(e,t+2,1)};return[n,null,t+3]}function FS(e,t){const n={hours:GS(e,t,0),minutes:GS(e,t+1,0),seconds:GS(e,t+2,0),milliseconds:Gb(e[t+3])};return[n,null,t+4]}function LS(e,t){const n=!e[t]&&!e[t+1],i=Xb(e[t+1],e[t+2]),a=n?null:Nw.instance(i);return[{},a,t+3]}function zS(e,t){const n=e[t]?mw.create(e[t]):null;return[{},n,t+1]}const US=RegExp(`^T?${kS.source}$`),jS=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function YS(e){const[t,n,i,a,r,o,s,l,u]=e,d="-"===t[0],c=l&&"-"===l[0],p=(e,t=!1)=>void 0!==e&&(t||e&&d)?-e:e;return[{years:p(Hb(n)),months:p(Hb(i)),weeks:p(Hb(a)),days:p(Hb(r)),hours:p(Hb(o)),minutes:p(Hb(s)),seconds:p(Hb(l),"-0"===l),milliseconds:p(Gb(u),c)}]}const ZS={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function qS(e,t,n,i,a,r,o){const s={year:2===t.length?Zb(Bb(t)):Bb(t),month:nS.indexOf(n)+1,day:Bb(i),hour:Bb(a),minute:Bb(r)};return o&&(s.second=Bb(o)),e&&(s.weekday=e.length>3?rS.indexOf(e)+1:oS.indexOf(e)+1),s}const XS=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function KS(e){const[,t,n,i,a,r,o,s,l,u,d,c]=e,p=qS(t,a,i,n,r,o,s);let h;return h=l?ZS[l]:u?0:Xb(d,c),[p,new Nw(h)]}function QS(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const JS=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,eT=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,tT=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function nT(e){const[,t,n,i,a,r,o,s]=e,l=qS(t,a,i,n,r,o,s);return[l,Nw.utcInstance]}function iT(e){const[,t,n,i,a,r,o,s]=e,l=qS(t,s,n,i,a,r,o);return[l,Nw.utcInstance]}const aT=bS(RS,IS),rT=bS(MS,IS),oT=bS(VS,IS),sT=bS(OS),lT=SS(NS,FS,LS,zS),uT=SS(PS,FS,LS,zS),dT=SS($S,FS,LS,zS),cT=SS(FS,LS,zS);function pT(e){return TS(e,[aT,lT],[rT,uT],[oT,dT],[sT,cT])}function hT(e){return TS(QS(e),[XS,KS])}function mT(e){return TS(e,[JS,nT],[eT,nT],[tT,iT])}function gT(e){return TS(e,[jS,YS])}const fT=SS(FS);function yT(e){return TS(e,[US,fT])}const DT=bS(WS,HS),CT=bS(BS),vT=SS(FS,LS,zS);function _T(e){return TS(e,[DT,lT],[CT,vT])}const wT="Invalid Duration",bT={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},ST={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...bT},TT=365.2425,xT=30.436875,AT={years:{quarters:4,months:12,weeks:TT/7,days:TT,hours:24*TT,minutes:24*TT*60,seconds:24*TT*60*60,milliseconds:24*TT*60*60*1e3},quarters:{months:3,weeks:TT/28,days:TT/4,hours:24*TT/4,minutes:24*TT*60/4,seconds:24*TT*60*60/4,milliseconds:24*TT*60*60*1e3/4},months:{weeks:xT/7,days:xT,hours:24*xT,minutes:24*xT*60,seconds:24*xT*60*60,milliseconds:24*xT*60*60*1e3},...bT},ET=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],kT=ET.slice(0).reverse();function OT(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new VT(i)}function IT(e,t){let n=t.milliseconds??0;for(const i of kT.slice(1))t[i]&&(n+=t[i]*e[i]["milliseconds"]);return n}function RT(e,t){const n=IT(e,t)<0?-1:1;ET.reduceRight((i,a)=>{if(bb(t[a]))return i;if(i){const r=t[i]*n,o=e[a][i],s=Math.floor(r/o);t[a]+=s*n,t[i]-=s*o*n}return a},null),ET.reduce((n,i)=>{if(bb(t[i]))return n;if(n){const a=t[n]%1;t[n]-=a,t[i]+=a*e[n][i]}return i},null)}function MT(e){const t={};for(const[n,i]of Object.entries(e))0!==i&&(t[n]=i);return t}class VT{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?AT:ST;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Hw.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return VT.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!==typeof e)throw new R_("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new VT({values:Qb(e,VT.normalizeUnit),loc:Hw.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Sb(e))return VT.fromMillis(e);if(VT.isDuration(e))return e;if("object"===typeof e)return VT.fromObject(e);throw new R_(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=gT(e);return n?VT.fromObject(n,t):VT.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=yT(e);return n?VT.fromObject(n,t):VT.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new R_("need to specify a reason the Duration is invalid");const n=e instanceof ob?e:new ob(e,t);if(rb.throwOnInvalid)throw new k_(n);return new VT({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new I_(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?_S.create(this.loc,n).formatDurationFromString(this,e):wT}toHuman(e={}){if(!this.isValid)return wT;const t=!1!==e.showZeros,n=ET.map(n=>{const i=this.values[n];return bb(i)||0===i&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(i)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Nb(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};const n=Nx.fromMillis(t,{zone:"UTC"});return n.toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?IT(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=VT.fromDurationLike(e),n={};for(const i of ET)(Mb(t.values,i)||Mb(this.values,i))&&(n[i]=t.get(i)+this.get(i));return OT(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=VT.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=Kb(e(this.values[n],n));return OT(this,{values:t},!0)}get(e){return this[VT.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Qb(e,VT.normalizeUnit)};return OT(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){const a=this.loc.clone({locale:e,numberingSystem:t}),r={loc:a,matrix:i,conversionAccuracy:n};return OT(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return RT(this.matrix,e),OT(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=MT(this.normalize().shiftToAll().toObject());return OT(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map(e=>VT.normalizeUnit(e));const t={},n={},i=this.toObject();let a;for(const r of ET)if(e.indexOf(r)>=0){a=r;let e=0;for(const t in n)e+=this.matrix[t][r]*n[t],n[t]=0;Sb(i[r])&&(e+=i[r]);const o=Math.trunc(e);t[r]=o,n[r]=(1e3*e-1e3*o)/1e3}else Sb(i[r])&&(n[r]=i[r]);for(const r in n)0!==n[r]&&(t[a]+=r===a?n[r]:n[r]/this.matrix[a][r]);return RT(this.matrix,t),OT(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return OT(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=MT(this.values);return OT(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const n of ET)if(!t(this.values[n],e.values[n]))return!1;return!0}}const PT="Invalid Interval";function $T(e,t){return e&&e.isValid?t&&t.isValid?t<e?WT.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:WT.invalid("missing or invalid end"):WT.invalid("missing or invalid start")}class WT{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new R_("need to specify a reason the Interval is invalid");const n=e instanceof ob?e:new ob(e,t);if(rb.throwOnInvalid)throw new E_(n);return new WT({invalid:n})}static fromDateTimes(e,t){const n=Fx(e),i=Fx(t),a=$T(n,i);return null==a?new WT({start:n,end:i}):a}static after(e,t){const n=VT.fromDurationLike(t),i=Fx(e);return WT.fromDateTimes(i,i.plus(n))}static before(e,t){const n=VT.fromDurationLike(t),i=Fx(e);return WT.fromDateTimes(i.minus(n),i)}static fromISO(e,t){const[n,i]=(e||"").split("/",2);if(n&&i){let e,a,r,o;try{e=Nx.fromISO(n,t),a=e.isValid}catch(i){a=!1}try{r=Nx.fromISO(i,t),o=r.isValid}catch(i){o=!1}if(a&&o)return WT.fromDateTimes(e,r);if(a){const n=VT.fromISO(i,t);if(n.isValid)return WT.after(e,n)}else if(o){const e=VT.fromISO(n,t);if(e.isValid)return WT.before(r,e)}}return WT.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let i;return i=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,i=i.startOf(e,t),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?WT.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Fx).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),n=[];let{s:i}=this,a=0;while(i<this.e){const e=t[a]||this.e,r=+e>+this.e?this.e:e;n.push(WT.fromDateTimes(i,r)),i=r,a+=1}return n}splitBy(e){const t=VT.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:i}=this,a=1;const r=[];while(i<this.e){const e=this.start.plus(t.mapUnits(e=>e*a));n=+e>+this.e?this.e:e,r.push(WT.fromDateTimes(i,n)),i=n,a+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e===+e.s}abutsEnd(e){return!!this.isValid&&+e.e===+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:WT.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return WT.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const i=[],a=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]),r=Array.prototype.concat(...a),o=r.sort((e,t)=>e.time-t.time);for(const s of o)n+="s"===s.type?1:-1,1===n?t=s.time:(t&&+t!==+s.time&&i.push(WT.fromDateTimes(t,s.time)),t=null);return WT.merge(i)}difference(...e){return WT.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:PT}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=W_,t={}){return this.isValid?_S.create(this.s.loc.clone(t),e).formatInterval(this):PT}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:PT}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:PT}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:PT}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:PT}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):VT.invalid(this.invalidReason)}mapEndpoints(e){return WT.fromDateTimes(e(this.s),e(this.e))}}class BT{static hasDST(e=rb.defaultZone){const t=Nx.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return mw.isValidZone(e)}static normalizeZone(e){return Lw(e,rb.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Hw.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Hw.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Hw.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:a="gregory"}={}){return(i||Hw.create(t,n,a)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:a="gregory"}={}){return(i||Hw.create(t,n,a)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Hw.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Hw.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Hw.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Hw.create(t,null,"gregory").eras(e)}static features(){return{relative:Eb(),localeWeek:kb()}}}function HT(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(VT.fromMillis(i).as("days"))}function GT(e,t,n){const i=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=HT(e,t);return(n-n%7)/7}],["days",HT]],a={},r=e;let o,s;for(const[l,u]of i)n.indexOf(l)>=0&&(o=l,a[l]=u(e,t),s=r.plus(a),s>t?(a[l]--,e=r.plus(a),e>t&&(s=e,a[l]--,e=r.plus(a))):e=s);return[e,a,s,o]}function NT(e,t,n,i){let[a,r,o,s]=GT(e,t,n);const l=t-a,u=n.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===u.length&&(o<t&&(o=a.plus({[s]:1})),o!==a&&(r[s]=(r[s]||0)+l/(o-a)));const d=VT.fromObject(r,i);return u.length>0?VT.fromMillis(l,i).shiftTo(...u).plus(d):d}const FT="missing Intl.DateTimeFormat.formatToParts support";function LT(e,t=e=>e){return{regex:e,deser:([e])=>t(Yw(e))}}const zT=String.fromCharCode(160),UT=`[ ${zT}]`,jT=new RegExp(UT,"g");function YT(e){return e.replace(/\./g,"\\.?").replace(jT,UT)}function ZT(e){return e.replace(/\./g,"").replace(jT," ").toLowerCase()}function qT(e,t){return null===e?null:{regex:RegExp(e.map(YT).join("|")),deser:([n])=>e.findIndex(e=>ZT(n)===ZT(e))+t}}function XT(e,t){return{regex:e,deser:([,e,t])=>Xb(e,t),groups:t}}function KT(e){return{regex:e,deser:([e])=>e}}function QT(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function JT(e,t){const n=Xw(t),i=Xw(t,"{2}"),a=Xw(t,"{3}"),r=Xw(t,"{4}"),o=Xw(t,"{6}"),s=Xw(t,"{1,2}"),l=Xw(t,"{1,3}"),u=Xw(t,"{1,6}"),d=Xw(t,"{1,9}"),c=Xw(t,"{2,4}"),p=Xw(t,"{4,6}"),h=e=>({regex:RegExp(QT(e.val)),deser:([e])=>e,literal:!0}),m=m=>{if(e.literal)return h(m);switch(m.val){case"G":return qT(t.eras("short"),0);case"GG":return qT(t.eras("long"),0);case"y":return LT(u);case"yy":return LT(c,Zb);case"yyyy":return LT(r);case"yyyyy":return LT(p);case"yyyyyy":return LT(o);case"M":return LT(s);case"MM":return LT(i);case"MMM":return qT(t.months("short",!0),1);case"MMMM":return qT(t.months("long",!0),1);case"L":return LT(s);case"LL":return LT(i);case"LLL":return qT(t.months("short",!1),1);case"LLLL":return qT(t.months("long",!1),1);case"d":return LT(s);case"dd":return LT(i);case"o":return LT(l);case"ooo":return LT(a);case"HH":return LT(i);case"H":return LT(s);case"hh":return LT(i);case"h":return LT(s);case"mm":return LT(i);case"m":return LT(s);case"q":return LT(s);case"qq":return LT(i);case"s":return LT(s);case"ss":return LT(i);case"S":return LT(l);case"SSS":return LT(a);case"u":return KT(d);case"uu":return KT(s);case"uuu":return LT(n);case"a":return qT(t.meridiems(),0);case"kkkk":return LT(r);case"kk":return LT(c,Zb);case"W":return LT(s);case"WW":return LT(i);case"E":case"c":return LT(n);case"EEE":return qT(t.weekdays("short",!1),1);case"EEEE":return qT(t.weekdays("long",!1),1);case"ccc":return qT(t.weekdays("short",!0),1);case"cccc":return qT(t.weekdays("long",!0),1);case"Z":case"ZZ":return XT(new RegExp(`([+-]${s.source})(?::(${i.source}))?`),2);case"ZZZ":return XT(new RegExp(`([+-]${s.source})(${i.source})?`),2);case"z":return KT(/[a-z_+-/]{1,256}?/i);case" ":return KT(/[^\S\n\r]/);default:return h(m)}},g=m(e)||{invalidReason:FT};return g.token=e,g}const ex={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tx(e,t,n){const{type:i,value:a}=e;if("literal"===i){const e=/^\s+$/.test(a);return{literal:!e,val:e?" ":a}}const r=t[i];let o=i;"hour"===i&&(o=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let s=ex[o];if("object"===typeof s&&(s=s[r]),s)return{literal:!1,val:s}}function nx(e){const t=e.map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"");return[`^${t}$`,e]}function ix(e,t,n){const i=e.match(t);if(i){const e={};let t=1;for(const a in n)if(Mb(n,a)){const r=n[a],o=r.groups?r.groups+1:1;!r.literal&&r.token&&(e[r.token.val[0]]=r.deser(i.slice(t,t+o))),t+=o}return[i,e]}return[i,{}]}function ax(e){const t=e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n,i=null;bb(e.z)||(i=mw.create(e.z)),bb(e.Z)||(i||(i=new Nw(e.Z)),n=e.Z),bb(e.q)||(e.M=3*(e.q-1)+1),bb(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),bb(e.u)||(e.S=Gb(e.u));const a=Object.keys(e).reduce((n,i)=>{const a=t(i);return a&&(n[a]=e[i]),n},{});return[a,i,n]}let rx=null;function ox(){return rx||(rx=Nx.fromMillis(1555555555555)),rx}function sx(e,t){if(e.literal)return e;const n=_S.macroTokenToFormatOpts(e.val),i=px(n,t);return null==i||i.includes(void 0)?e:i}function lx(e,t){return Array.prototype.concat(...e.map(e=>sx(e,t)))}class ux{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=lx(_S.parseFormat(t),e),this.units=this.tokens.map(t=>JT(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){const[e,t]=nx(this.units);this.regex=RegExp(e,"i"),this.handlers=t}}explainFromTokens(e){if(this.isValid){const[t,n]=ix(e,this.regex,this.handlers),[i,a,r]=n?ax(n):[null,null,void 0];if(Mb(n,"a")&&Mb(n,"H"))throw new O_("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:i,zone:a,specificOffset:r}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function dx(e,t,n){const i=new ux(e,n);return i.explainFromTokens(t)}function cx(e,t,n){const{result:i,zone:a,specificOffset:r,invalidReason:o}=dx(e,t,n);return[i,a,r,o]}function px(e,t){if(!e)return null;const n=_S.create(t,e),i=n.dtFormatter(ox()),a=i.formatToParts(),r=i.resolvedOptions();return a.map(t=>tx(t,e,r))}const hx="Invalid DateTime",mx=864e13;function gx(e){return new ob("unsupported zone",`the zone "${e.name}" is not supported`)}function fx(e){return null===e.weekData&&(e.weekData=mb(e.c)),e.weekData}function yx(e){return null===e.localWeekData&&(e.localWeekData=mb(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Dx(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Nx({...n,...t,old:n})}function Cx(e,t,n){let i=e-60*t*1e3;const a=n.offset(i);if(t===a)return[i,t];i-=60*(a-t)*1e3;const r=n.offset(i);return a===r?[i,a]:[e-60*Math.min(a,r)*1e3,Math.max(a,r)]}function vx(e,t){e+=60*t*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function _x(e,t,n){return Cx(Ub(e),t,n)}function wx(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),r={...e.c,year:i,month:a,day:Math.min(e.c.day,zb(i,a))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=VT.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),s=Ub(r);let[l,u]=Cx(s,n,e.zone);return 0!==o&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function bx(e,t,n,i,a,r){const{setZone:o,zone:s}=n;if(e&&0!==Object.keys(e).length||t){const i=t||s,a=Nx.fromObject(e,{...n,zone:i,specificOffset:r});return o?a:a.setZone(s)}return Nx.invalid(new ob("unparsable",`the input "${a}" can't be parsed as ${i}`))}function Sx(e,t,n=!0){return e.isValid?_S.create(Hw.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Tx(e,t,n){const i=e.c.year>9999||e.c.year<0;let a="";if(i&&e.c.year>=0&&(a+="+"),a+=Wb(e.c.year,i?6:4),"year"===n)return a;if(t){if(a+="-",a+=Wb(e.c.month),"month"===n)return a;a+="-"}else if(a+=Wb(e.c.month),"month"===n)return a;return a+=Wb(e.c.day),a}function xx(e,t,n,i,a,r,o){let s=!n||0!==e.c.millisecond||0!==e.c.second,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=Wb(e.c.hour),"hour"===o)break;if(t){if(l+=":",l+=Wb(e.c.minute),"minute"===o)break;s&&(l+=":",l+=Wb(e.c.second))}else{if(l+=Wb(e.c.minute),"minute"===o)break;s&&(l+=Wb(e.c.second))}if("second"===o)break;!s||i&&0===e.c.millisecond||(l+=".",l+=Wb(e.c.millisecond,3))}return a&&(e.isOffsetFixed&&0===e.offset&&!r?l+="Z":e.o<0?(l+="-",l+=Wb(Math.trunc(-e.o/60)),l+=":",l+=Wb(Math.trunc(-e.o%60))):(l+="+",l+=Wb(Math.trunc(e.o/60)),l+=":",l+=Wb(Math.trunc(e.o%60)))),r&&(l+="["+e.zone.ianaName+"]"),l}const Ax={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ex={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},kx={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ox=["year","month","day","hour","minute","second","millisecond"],Ix=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Rx=["year","ordinal","hour","minute","second","millisecond"];function Mx(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new I_(e);return t}function Vx(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Mx(e)}}function Px(e){if(void 0===Hx&&(Hx=rb.now()),"iana"!==e.type)return e.offset(Hx);const t=e.name;let n=Gx.get(t);return void 0===n&&(n=e.offset(Hx),Gx.set(t,n)),n}function $x(e,t){const n=Lw(t.zone,rb.defaultZone);if(!n.isValid)return Nx.invalid(gx(n));const i=Hw.fromObject(t);let a,r;if(bb(e.year))a=rb.now();else{for(const n of Ox)bb(e[n])&&(e[n]=Ax[n]);const t=_b(e)||wb(e);if(t)return Nx.invalid(t);const i=Px(n);[a,r]=_x(e,i,n)}return new Nx({ts:a,zone:n,loc:i,o:r})}function Wx(e,t,n){const i=!!bb(n.round)||n.round,a=bb(n.rounding)?"trunc":n.rounding,r=(e,r)=>{e=Nb(e,i||n.calendary?0:2,n.calendary?"round":a);const o=t.loc.clone(n).relFormatter(n);return o.format(e,r)},o=i=>n.calendary?t.hasSame(e,i)?0:t.startOf(i).diff(e.startOf(i),i).get(i):t.diff(e,i).get(i);if(n.unit)return r(o(n.unit),n.unit);for(const s of n.units){const e=o(s);if(Math.abs(e)>=1)return r(e,s)}return r(e>t?-0:0,n.units[n.units.length-1])}function Bx(e){let t,n={};return e.length>0&&"object"===typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let Hx;const Gx=new Map;class Nx{constructor(e){const t=e.zone||rb.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ob("invalid input"):null)||(t.isValid?null:gx(t));this.ts=bb(e.ts)?rb.now():e.ts;let i=null,a=null;if(!n){const r=e.old&&e.old.ts===this.ts&&e.old.zone.equals(t);if(r)[i,a]=[e.old.c,e.old.o];else{const r=Sb(e.o)&&!e.old?e.o:t.offset(this.ts);i=vx(this.ts,r),n=Number.isNaN(i.year)?new ob("invalid input"):null,i=n?null:i,a=n?null:r}}this._zone=t,this.loc=e.loc||Hw.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=a,this.isLuxonDateTime=!0}static now(){return new Nx({})}static local(){const[e,t]=Bx(arguments),[n,i,a,r,o,s,l]=t;return $x({year:n,month:i,day:a,hour:r,minute:o,second:s,millisecond:l},e)}static utc(){const[e,t]=Bx(arguments),[n,i,a,r,o,s,l]=t;return e.zone=Nw.utcInstance,$x({year:n,month:i,day:a,hour:r,minute:o,second:s,millisecond:l},e)}static fromJSDate(e,t={}){const n=Ab(e)?e.valueOf():NaN;if(Number.isNaN(n))return Nx.invalid("invalid input");const i=Lw(t.zone,rb.defaultZone);return i.isValid?new Nx({ts:n,zone:i,loc:Hw.fromObject(t)}):Nx.invalid(gx(i))}static fromMillis(e,t={}){if(Sb(e))return e<-mx||e>mx?Nx.invalid("Timestamp out of range"):new Nx({ts:e,zone:Lw(t.zone,rb.defaultZone),loc:Hw.fromObject(t)});throw new R_(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Sb(e))return new Nx({ts:1e3*e,zone:Lw(t.zone,rb.defaultZone),loc:Hw.fromObject(t)});throw new R_("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=Lw(t.zone,rb.defaultZone);if(!n.isValid)return Nx.invalid(gx(n));const i=Hw.fromObject(t),a=Qb(e,Vx),{minDaysInFirstWeek:r,startOfWeek:o}=Db(a,i),s=rb.now(),l=bb(t.specificOffset)?n.offset(s):t.specificOffset,u=!bb(a.ordinal),d=!bb(a.year),c=!bb(a.month)||!bb(a.day),p=d||c,h=a.weekYear||a.weekNumber;if((p||u)&&h)throw new O_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&u)throw new O_("Can't mix ordinal dates with month/day");const m=h||a.weekday&&!p;let g,f,y=vx(s,l);m?(g=Ix,f=Ex,y=mb(y,r,o)):u?(g=Rx,f=kx,y=fb(y)):(g=Ox,f=Ax);let D=!1;for(const T of g){const e=a[T];bb(e)?a[T]=D?f[T]:y[T]:D=!0}const C=m?Cb(a,r,o):u?vb(a):_b(a),v=C||wb(a);if(v)return Nx.invalid(v);const _=m?gb(a,r,o):u?yb(a):a,[w,b]=_x(_,l,n),S=new Nx({ts:w,zone:n,o:b,loc:i});return a.weekday&&p&&e.weekday!==S.weekday?Nx.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${S.toISO()}`):S.isValid?S:Nx.invalid(S.invalid)}static fromISO(e,t={}){const[n,i]=pT(e);return bx(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,i]=hT(e);return bx(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,i]=mT(e);return bx(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(bb(e)||bb(t))throw new R_("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:a=null}=n,r=Hw.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0}),[o,s,l,u]=cx(r,e,t);return u?Nx.invalid(u):bx(o,s,n,`format ${t}`,e,l)}static fromString(e,t,n={}){return Nx.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,i]=_T(e);return bx(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new R_("need to specify a reason the DateTime is invalid");const n=e instanceof ob?e:new ob(e,t);if(rb.throwOnInvalid)throw new A_(n);return new Nx({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=px(e,Hw.fromObject(t));return n?n.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){const n=lx(_S.parseFormat(e),Hw.fromObject(t));return n.map(e=>e.val).join("")}static resetCache(){Hx=void 0,Gx.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?fx(this).weekYear:NaN}get weekNumber(){return this.isValid?fx(this).weekNumber:NaN}get weekday(){return this.isValid?fx(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?yx(this).weekday:NaN}get localWeekNumber(){return this.isValid?yx(this).weekNumber:NaN}get localWeekYear(){return this.isValid?yx(this).weekYear:NaN}get ordinal(){return this.isValid?fb(this.c).ordinal:NaN}get monthShort(){return this.isValid?BT.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?BT.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?BT.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?BT.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Ub(this.c),i=this.zone.offset(n-e),a=this.zone.offset(n+e),r=this.zone.offset(n-i*t),o=this.zone.offset(n-a*t);if(r===o)return[this];const s=n-r*t,l=n-o*t,u=vx(s,r),d=vx(l,o);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[Dx(this,{ts:s}),Dx(this,{ts:l})]:[this]}get isInLeapYear(){return Fb(this.year)}get daysInMonth(){return zb(this.year,this.month)}get daysInYear(){return this.isValid?Lb(this.year):NaN}get weeksInWeekYear(){return this.isValid?Yb(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Yb(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:i}=_S.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(Nw.instance(e),t)}toLocal(){return this.setZone(rb.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=Lw(e,rb.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[i]=_x(n,t,e)}return Dx(this,{ts:i,zone:e})}return Nx.invalid(gx(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return Dx(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Qb(e,Vx),{minDaysInFirstWeek:n,startOfWeek:i}=Db(t,this.loc),a=!bb(t.weekYear)||!bb(t.weekNumber)||!bb(t.weekday),r=!bb(t.ordinal),o=!bb(t.year),s=!bb(t.month)||!bb(t.day),l=o||s,u=t.weekYear||t.weekNumber;if((l||r)&&u)throw new O_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&r)throw new O_("Can't mix ordinal dates with month/day");let d;a?d=gb({...mb(this.c,n,i),...t},n,i):bb(t.ordinal)?(d={...this.toObject(),...t},bb(t.day)&&(d.day=Math.min(zb(d.year,d.month),d.day))):d=yb({...fb(this.c),...t});const[c,p]=_x(d,this.o,this.zone);return Dx(this,{ts:c,o:p})}plus(e){if(!this.isValid)return this;const t=VT.fromDurationLike(e);return Dx(this,wx(this,t))}minus(e){if(!this.isValid)return this;const t=VT.fromDurationLike(e).negate();return Dx(this,wx(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},i=VT.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if("weeks"===i)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===i){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?_S.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):hx}toLocaleString(e=W_,t={}){return this.isValid?_S.create(this.loc.clone(t),e).formatDateTime(this):hx}toLocaleParts(e={}){return this.isValid?_S.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:a=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;r=Mx(r);const o="extended"===e;let s=Tx(this,o,r);return Ox.indexOf(r)>=3&&(s+="T"),s+=xx(this,o,t,n,i,a,r),s}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?Tx(this,"extended"===e,Mx(t)):null}toISOWeekDate(){return Sx(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:a=!1,format:r="extended",precision:o="milliseconds"}={}){if(!this.isValid)return null;o=Mx(o);let s=i&&Ox.indexOf(o)>=3?"T":"";return s+xx(this,"extended"===r,t,e,n,a,o)}toRFC2822(){return Sx(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Sx(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Tx(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Sx(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():hx}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return VT.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},a=Ob(t).map(VT.normalizeUnit),r=e.valueOf()>this.valueOf(),o=r?this:e,s=r?e:this,l=NT(o,s,a,i);return r?l.negate():l}diffNow(e="milliseconds",t={}){return this.diff(Nx.now(),e,t)}until(e){return this.isValid?WT.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const i=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(t,n)<=i&&i<=a.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Nx.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],a=e.unit;return Array.isArray(e.unit)&&(i=e.unit,a=void 0),Wx(t,this.plus(n),{...e,numeric:"always",units:i,unit:a})}toRelativeCalendar(e={}){return this.isValid?Wx(e.base||Nx.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Nx.isDateTime))throw new R_("min requires all arguments be DateTimes");return Ib(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(Nx.isDateTime))throw new R_("max requires all arguments be DateTimes");return Ib(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:i=null,numberingSystem:a=null}=n,r=Hw.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});return dx(r,e,t)}static fromStringExplain(e,t,n={}){return Nx.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:i=null}=t,a=Hw.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new ux(a,e)}static fromFormatParser(e,t,n={}){if(bb(e)||bb(t))throw new R_("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:a=null}=n,r=Hw.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});if(!r.equals(t.locale))throw new R_(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:o,zone:s,specificOffset:l,invalidReason:u}=t.explainFromTokens(e);return u?Nx.invalid(u):bx(o,s,n,`format ${t.format}`,e,l)}static get DATE_SHORT(){return W_}static get DATE_MED(){return B_}static get DATE_MED_WITH_WEEKDAY(){return H_}static get DATE_FULL(){return G_}static get DATE_HUGE(){return N_}static get TIME_SIMPLE(){return F_}static get TIME_WITH_SECONDS(){return L_}static get TIME_WITH_SHORT_OFFSET(){return z_}static get TIME_WITH_LONG_OFFSET(){return U_}static get TIME_24_SIMPLE(){return j_}static get TIME_24_WITH_SECONDS(){return Y_}static get TIME_24_WITH_SHORT_OFFSET(){return Z_}static get TIME_24_WITH_LONG_OFFSET(){return q_}static get DATETIME_SHORT(){return X_}static get DATETIME_SHORT_WITH_SECONDS(){return K_}static get DATETIME_MED(){return Q_}static get DATETIME_MED_WITH_SECONDS(){return J_}static get DATETIME_MED_WITH_WEEKDAY(){return ew}static get DATETIME_FULL(){return tw}static get DATETIME_FULL_WITH_SECONDS(){return nw}static get DATETIME_HUGE(){return iw}static get DATETIME_HUGE_WITH_SECONDS(){return aw}}function Fx(e){if(Nx.isDateTime(e))return e;if(e&&e.valueOf&&Sb(e.valueOf()))return Nx.fromJSDate(e);if(e&&"object"===typeof e)return Nx.fromObject(e);throw new R_(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Lx={class:"agenda-list-item"},zx={class:"time"},Ux={class:"start"},jx={class:"duration"},Yx={class:"description"},Zx={class:"description-title"},qx={class:"description-resource"};var Xx=(0,i.pM)({__name:"agenda-list-item",props:{appointment:{},resources:{default:()=>[]}},setup(e){const t=e,n=(0,i.EW)(()=>t.appointment.startDate.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric",hour12:!1})),a=(0,i.EW)(()=>{const{startDate:e,endDate:n}=t.appointment;return VT.fromMillis(n-e).rescale().toFormat("h'h' m'm'")});return(t,r)=>((0,i.uX)(),(0,i.CE)("div",Lx,[(0,i.Lk)("div",zx,[(0,i.Lk)("div",Ux,(0,Fv.v_)(n.value),1),(0,i.Lk)("div",jx,(0,Fv.v_)(a.value),1)]),(0,i.Lk)("div",Yx,[(0,i.Lk)("div",Zx,(0,Fv.v_)(e.appointment.text),1),(0,i.Lk)("div",qx,(0,Fv.v_)(e.resources[e.appointment.calendarId]?.text),1)])]))}});const Kx=(0,Zv.A)(Xx,[["__scopeId","data-v-4b271126"]]);var Qx=Kx;const Jx={class:"agenda-item"};var eA=(0,i.pM)({__name:"agenda-list",props:{items:{default:()=>[]},resources:{default:()=>[]}},emits:["clickAppointment"],setup(e,{emit:t}){const n=t;function r({itemData:e,element:t}){n("clickAppointment",{itemData:e,element:t})}return(t,n)=>((0,i.uX)(),(0,i.Wv)((0,a.R1)(Kv.T$),{"data-source":e.items,onItemClick:r},{item:(0,i.k6)(({data:t})=>[(0,i.Lk)("div",Jx,[(0,i.bF)(Qx,{appointment:t,resources:e.resources},null,8,["appointment","resources"])])]),_:1},8,["data-source"]))}});const tA=(0,Zv.A)(eA,[["__scopeId","data-v-5dfb635b"]]);var nA=tA;const iA={class:"planning-scheduler"},aA={class:"view-wrapper"},rA={class:"panels"},oA={class:"left-side-panel-content"},sA={class:"buttons"},lA={class:"calendar"},uA={class:"scheduler-container"};var dA=(0,i.pM)({__name:"planning-scheduler",setup(e){const t=(0,a.KR)(),n=(0,a.KR)(),o=(0,a.KR)(new Date),s=(0,a.KR)("workWeek"),l=(0,a.KR)(!1),d=(0,a.KR)(null),c=(0,a.KR)([]),p=(0,a.KR)(new Date),h=T_.Qp.reduce((e,t)=>e.concat(t.items),[]),m=(0,a.KR)(null),g=(0,a.KR)(!1),f=(0,i.EW)(()=>{if(Nv.du.value.isSmall)return"bottom";const e=m.value?.target,t=e?.[0]?.classList||e?.classList;return t?.contains("dx-list")&&g?"left":"top"});function y(e){l.value=e||!l.value}function D(e){if(!d.value)return[];const t=d.value.items();return 0!==t.length&&e?t.filter(t=>t.startDate.getDate()===e.startDate.getDate()&&t.startDate.getMonth()===e.startDate.getMonth()):[]}function C(e){c.value=D(e)}function v({value:e}){o.value=e,C({startDate:o.value})}function _(e){t.value?.instance.showAppointmentPopup(e?.data,!e)}function w(e){const t=e instanceof Date?e:new Date;o.value=t,m.value={data:{startDate:t},target:void 0},C({startDate:t})}function b(e){const t=e.flatMap(e=>[["calendarId","=",e.id],"or"]).slice(0,-1);d.value?.filter(t.length>0?t:null),d.value?.load(),C({startDate:o.value})}function S(e){const t=e.form.getEditor("calendarId");void 0===e.appointmentData.calendarId&&t.option("value",0)}function T(e){e.appointmentData.startDate.toDateString()===m.value?.data.startDate.toDateString()&&C(e.appointmentData)}function x(e){s.value=e,"month"!==s.value||Nv.du.value.isSmall?"month"!==e&&Nv.du.value.isLarge&&(l.value=!1):(l.value=!0,C({startDate:o.value}))}function A({name:e,value:t}){"currentView"===e&&x(t)}function E(e){const{appointmentData:t}=e;m.value={data:t,target:e.targetElement},"month"===s.value&&(C(t),y(!0))}function k(e){e.cancel=!0;const{appointmentData:t}=e.appointments[0],i=({targetElement:e})=>e?.[0]?.classList.contains("dx-scheduler-appointment-collector");m.value={data:t,target:e.targetElement},("month"===s.value||i(e))&&C(t),"month"===s.value&&Nv.du.value.isSmall||i(e)?y(!0):n.value?.instance.show()}function O({cellData:e}){if(w(e.startDate),"month"===s.value&&e){const t=D(e);t.length>1&&(m.value={data:e,target:void 0},c.value=t,y(!0))}}function I(e){t.value?.instance.showAppointmentTooltip(e.itemData,e.element)}function R(){_(m.value),n.value?.instance.hide()}function M(e){t.value?.instance.deleteAppointment(m.value?.data),n.value?.instance.hide(),c.value=D(e)}return(0,i.nT)(()=>{const e=[d.value,s.value,p.value,l.value];e.length&&setTimeout(()=>t.value?.instance?.repaint())}),(0,i.nT)(()=>{const e=t?.value?.instance,n=e?.getStartViewDate(),i=e?.getEndViewDate();(p.value?.getMonth()!==o.value?.getMonth()||n&&n>o.value||i&&i<o.value)&&(p.value=o.value)}),(0,T_.v0)().then(e=>{d.value=new Fl.A(e)}),(e,g)=>((0,i.uX)(),(0,i.CE)("div",iA,[(0,i.Lk)("div",aA,[(0,i.Lk)("div",rA,[(0,i.bF)(Xv,{class:"left-side-panel"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",oA,[(0,i.Lk)("div",sA,[(0,i.bF)((0,a.R1)(r.x),{text:"Today",onClick:w}),(0,i.bF)((0,a.R1)(r.x),{text:"Create event",type:"default",onClick:g[0]||(g[0]=()=>_())})]),(0,i.Lk)("div",lA,[(0,i.bF)((0,a.R1)(u),{value:o.value,onValueChanged:v},null,8,["value"])]),(0,i.bF)(o_,{"data-source":(0,a.R1)(T_.Qp),onListSelectionChanged:b},null,8,["data-source"])])]),_:1}),(0,i.Lk)("div",uA,[(0,i.bF)((0,a.R1)(xD),{ref_key:"schedulerRef",ref:t,height:"inherit","adaptivity-enabled":!!(0,a.R1)(Nv.du).isXSmall,"all-day-panel-mode":"allDay","data-source":d.value,"current-view":s.value,"current-date":p.value,"start-day-hour":4,"show-current-time-indicator":!1,onOptionChanged:A,onAppointmentClick:E,onAppointmentAdded:T,onAppointmentDeleted:T,onAppointmentTooltipShowing:k,onAppointmentFormOpening:S,onCellClick:O},{default:(0,i.k6)(()=>[(0,i.bF)((0,a.R1)(fC),{"field-expr":"calendarId",label:"Calendar","data-source":(0,a.R1)(h)},null,8,["data-source"]),(0,i.bF)((0,a.R1)(BC),{type:"day"}),(0,i.bF)((0,a.R1)(BC),{type:"workWeek"}),(0,i.bF)((0,a.R1)(BC),{type:"month"}),(0,i.bF)((0,a.R1)(BC),{type:"agenda"})]),_:1},8,["adaptivity-enabled","data-source","current-view","current-date"]),(0,i.bF)((0,a.R1)(GC),{ref_key:"tooltipRef",ref:n,"show-event":"click",target:m.value?.target,position:f.value},{default:(0,i.k6)(()=>[(0,i.bF)(g_,{"selected-appointment-data":m.value?.data,onClickEditAppointment:R,onClickDeleteAppointment:M},null,8,["selected-appointment-data"])]),_:1},8,["target","position"]),(0,i.bF)((0,a.R1)(Hv),{icon:"add",visible:(0,a.R1)(Nv.du).isXSmall,onClick:g[1]||(g[1]=()=>_())},null,8,["visible"])]),(0,i.bF)(S_,{class:"right-side-panel","is-opened":l.value,"show-open-button":"month"===s.value,title:(0,a.R1)(Gv.Yq)(c.value[0]?.startDate||o.value,"EE, MMMM d"),onOpenedChange:g[2]||(g[2]=e=>y(e))},{default:(0,i.k6)(()=>[(0,i.bF)(nA,{items:c.value,resources:(0,a.R1)(h),onClickAppointment:I},null,8,["items","resources"])]),_:1},8,["is-opened","show-open-button","title"])])])]))}});const cA=(0,Zv.A)(dA,[["__scopeId","data-v-79a1332f"]]);var pA=cA},14582:function(e,t,n){var i=n(5234),a=n(39123);e.exports=!i(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)})},23133:function(e,t,n){var i=n(39944),a=n(97509),r=n(5604),o=n(12913),s=n(74418),l=n(4282),u=n(33337),d=l("asyncDispose"),c=r("Promise");s(u,d)||a(u,d,function(){var e=this;return new c(function(t,n){var a=o(e,"return");a?c.resolve(i(a,e)).then(function(){t(void 0)},n):t(void 0)})})},27407:function(e,t,n){var i=n(59715);t.A=i.A},33337:function(e,t,n){var i,a,r=n(79117),o=n(62694),s=n(14188),l=n(77065),u=n(91786),d=n(97509),c=n(4282),p=n(1942),h="USE_FUNCTION_CONSTRUCTOR",m=c("asyncIterator"),g=r.AsyncIterator,f=o.AsyncIteratorPrototype;if(f)i=f;else if(s(g))i=g.prototype;else if(o[h]||r[h])try{a=u(u(u(Function("return async function*(){}()")()))),u(a)===Object.prototype&&(i=a)}catch(y){}i?p&&(i=l(i)):i={},s(i[m])||d(i,m,function(){return this}),e.exports=i},41685:function(e,t,n){var i=n(79117),a=n(92860),r=n(64466).f,o=n(9304).f,s=i.Symbol;if(a("dispose"),s){var l=o(s,"dispose");l.enumerable&&l.configurable&&l.writable&&r(s,"dispose",{value:l.value,enumerable:!1,configurable:!1,writable:!1})}},49120:function(e,t,n){var i=n(79117);e.exports=i},65200:function(e,t,n){var i=n(79117),a=n(92860),r=n(64466).f,o=n(9304).f,s=i.Symbol;if(a("asyncDispose"),s){var l=o(s,"asyncDispose");l.enumerable&&l.configurable&&l.writable&&r(s,"asyncDispose",{value:l.value,enumerable:!1,configurable:!1,writable:!1})}},66295:function(e,t,n){var i=n(39944),a=n(97509),r=n(12913),o=n(74418),s=n(4282),l=n(52037).IteratorPrototype,u=s("dispose");o(l,u)||a(l,u,function(){var e=r(this,"return");e&&i(e,this)})},75382:function(e,t,n){var i=n(88088),a=n(87308),r=n(14582),o=Error.captureStackTrace;e.exports=function(e,t,n,s){r&&(o?o(e,t):i(e,"stack",a(n,s)))}},82617:function(e,t,n){var i=n(5613),a=n(79117),r=n(4578),o=n(91786),s=n(5054),l=n(98657),u=n(77065),d=n(88088),c=n(39123),p=n(75382),h=n(69866),m=n(4282),g=n(5234),f=n(1942),y=a.SuppressedError,D=m("toStringTag"),C=Error,v=!!y&&3!==y.length,_=!!y&&g(function(){return 4===new y(1,2,3,{cause:4}).cause}),w=v||_,b=function(e,t,n){var i,a=r(S,this);return s?i=!w||a&&o(this)!==S?s(new C,a?o(this):S):new y:(i=a?this:u(S),d(i,D,"Error")),void 0!==n&&d(i,"message",h(n)),p(i,b,i.stack,1),d(i,"error",e),d(i,"suppressed",t),i};s?s(b,C):l(b,C,{name:!0});var S=b.prototype=w?y.prototype:u(C.prototype,{constructor:c(1,b),message:c(1,""),name:c(1,"SuppressedError")});w&&!f&&(S.constructor=b),i({global:!0,constructor:!0,arity:3,forced:w},{SuppressedError:b})},90346:function(e,t,n){var i=n(4282);t.f=i},92860:function(e,t,n){var i=n(49120),a=n(74418),r=n(90346),o=n(64466).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});a(t,e)||o(t,e,{value:r.f(e)})}},93251:function(e,t,n){var i=n(11697);t.A=i.A}}]);