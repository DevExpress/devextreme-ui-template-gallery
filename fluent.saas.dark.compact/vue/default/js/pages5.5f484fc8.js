"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[1722],{14582:function(e,t,n){var i=n(5234),a=n(39123);e.exports=!i(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)})},23133:function(e,t,n){var i=n(39944),a=n(97509),r=n(5604),o=n(12913),s=n(74418),l=n(4282),u=n(33337),d=l("asyncDispose"),c=r("Promise");s(u,d)||a(u,d,function(){var e=this;return new c(function(t,n){var a=o(e,"return");a?c.resolve(i(a,e)).then(function(){t(void 0)},n):t(void 0)})})},23605:function(e,t,n){n.d(t,{A:function(){return y}});var i=n(82950),a=n(61928),r=n(4226),o=n(96004),s=n(74567),l=n(66529),u=n(85563),d=n(39889),c=n(1767),h=n(50172),p=n(27996),m=n(83684),g=n(55509);class f extends m.A{_getDefaultOptions(){return(0,i.A)({},super._getDefaultOptions(),{spellcheck:!0,autoResizeEnabled:!1,_shouldAttachKeyboardEvents:!1})}_shouldAttachKeyboardEvents(){const{_shouldAttachKeyboardEvents:e,readOnly:t}=this.option();return e||!t}_initMarkup(){this.$element().addClass("dx-textarea"),super._initMarkup(),this.setAria("multiline","true")}_renderContentImpl(){this._updateInputHeight(),super._renderContentImpl()}_renderInput(){super._renderInput(),this._renderScrollHandler()}_createInput(){const e=(0,u.A)("<textarea>");return this._applyInputAttributes(e,this.option("inputAttr")),this._updateInputAutoResizeAppearance(e),e}_setInputMinHeight(){}_renderScrollHandler(){this._eventY=0;const e=this._input(),t=(0,g.N)(e,!0);a.A.on(e,(0,s.b4)(r.A.init,this.NAME),t,d.lQ),a.A.on(e,(0,s.b4)(o.A.down,this.NAME),this._pointerDownHandler.bind(this)),a.A.on(e,(0,s.b4)(o.A.move,this.NAME),this._pointerMoveHandler.bind(this))}_pointerDownHandler(e){this._eventY=(0,s.rw)(e).y}_pointerMoveHandler(e){const t=(0,s.rw)(e).y,n=this._eventY-t;(0,g.f)(this._input(),n)&&(e.isScrollingEvent=!0,e.stopPropagation()),this._eventY=t}_renderDimensions(){const e=this.$element(),t=e.get(0),n=this._getOptionValue("width",t),i=this._getOptionValue("height",t),a=this.option("minHeight"),r=this.option("maxHeight");e.css({minHeight:void 0!==a?a:"",maxHeight:void 0!==r?r:"",width:n,height:i})}_resetDimensions(){this.$element().css({height:"",minHeight:"",maxHeight:""})}_renderEvents(){this.option("autoResizeEnabled")&&a.A.on(this._input(),(0,s.b4)("input paste",this.NAME),this._updateInputHeight.bind(this)),super._renderEvents()}_refreshEvents(){a.A.off(this._input(),(0,s.b4)("input paste",this.NAME)),super._refreshEvents()}_getHeightDifference(e){return(0,c.pD)(this.$element().get(0),!1)+(0,c.pD)(this._$textEditorContainer.get(0),!1)+(0,c.pD)(this._$textEditorInputContainer.get(0),!0)+(0,c.GU)("height",(0,p.zk)().getComputedStyle(e.get(0))).margin}_updateInputHeight(){if(!(0,p.Vd)())return;const e=this._input(),t=this.option("height"),n=void 0===t&&this.option("autoResizeEnabled"),i=n||void 0===t&&this.option("minHeight");if(!i)return void e.css("height","");this._resetDimensions(),this.$element().css("height",(0,c.P$)(this.$element())),e.css("height",0);const a=this._getHeightDifference(e);this._renderDimensions();const r=this._getBoundaryHeight("minHeight"),o=this._getBoundaryHeight("maxHeight");let s=e[0].scrollHeight;if(void 0!==r&&(s=Math.max(s,r-a)),void 0!==o){const t=o-a,n=s>t;s=Math.min(s,t),this._updateInputAutoResizeAppearance(e,!n)}e.css("height",s),n&&this.$element().css("height","auto")}_getBoundaryHeight(e){const t=this.option(e);if((0,h.O9)(t))return"number"===typeof t?t:(0,c.hP)(t,this.$element().get(0).parentElement,this.$element().get(0))}_renderInputType(){}_visibilityChanged(e){e&&this._updateInputHeight()}_updateInputAutoResizeAppearance(e,t){if(e){const n=(0,d.YD)(t,this.option("autoResizeEnabled"));e.toggleClass("dx-texteditor-input-auto-resize",n)}}_dimensionChanged(){this.option("visible")&&this._updateInputHeight()}_optionChanged(e){const{name:t,value:n}=e;switch(t){case"_shouldAttachKeyboardEvents":case"autoResizeEnabled":this._updateInputAutoResizeAppearance(this._input(),n),this._refreshEvents(),this._updateInputHeight();break;case"value":case"height":super._optionChanged(e),this._updateInputHeight();break;case"minHeight":case"maxHeight":this._renderDimensions(),this._updateInputHeight();break;case"visible":super._optionChanged(e),n&&this._updateInputHeight();break;default:super._optionChanged(e)}}}(0,l.A)("dxTextArea",f);var D=f,y=D},27407:function(e,t,n){var i=n(59715);t.A=i.A},33337:function(e,t,n){var i,a,r=n(79117),o=n(62694),s=n(14188),l=n(77065),u=n(91786),d=n(97509),c=n(4282),h=n(1942),p="USE_FUNCTION_CONSTRUCTOR",m=c("asyncIterator"),g=r.AsyncIterator,f=o.AsyncIteratorPrototype;if(f)i=f;else if(s(g))i=g.prototype;else if(o[p]||r[p])try{a=u(u(u(Function("return async function*(){}()")()))),u(a)===Object.prototype&&(i=a)}catch(D){}i?h&&(i=l(i)):i={},s(i[m])||d(i,m,function(){return this}),e.exports=i},35328:function(e,t,n){var i=n(45724);t.A=i.A},41685:function(e,t,n){var i=n(79117),a=n(92860),r=n(64466).f,o=n(9304).f,s=i.Symbol;if(a("dispose"),s){var l=o(s,"dispose");l.enumerable&&l.configurable&&l.writable&&r(s,"dispose",{value:l.value,enumerable:!1,configurable:!1,writable:!1})}},41829:function(e,t,n){var i=n(39944),a=n(3770),r=n(96002),o=n(69874);e.exports=function(e,t){t&&"string"===typeof e||a(e);var n=o(e);return r(a(void 0!==n?i(n,e):e))}},49120:function(e,t,n){var i=n(79117);e.exports=i},51421:function(e,t,n){n.r(t),n.d(t,{default:function(){return ob}});n(82438),n(12266),n(91020),n(74786);var i=n(59259),a=n(32723),r=n(47871),o=n(58948),s=n(50404);
/*!
 * devextreme-vue
 * Version: 25.1.7
 * Build date: Mon Nov 10 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const l={props:{accessKey:String,activeStateEnabled:Boolean,cellTemplate:{},dateSerializationFormat:String,disabled:Boolean,disabledDates:[Array,Function],elementAttr:Object,firstDayOfWeek:Number,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,isDirty:Boolean,isValid:Boolean,max:[Date,Number,String],maxZoomLevel:String,min:[Date,Number,String],minZoomLevel:String,name:String,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,readOnly:Boolean,rtlEnabled:Boolean,selectionMode:String,selectWeekOnClick:Boolean,showTodayButton:Boolean,showWeekNumbers:Boolean,tabIndex:Number,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:[Array,Date,Number,String],visible:Boolean,weekNumberRule:String,width:[Number,String],zoomLevel:String},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:cellTemplate":null,"update:dateSerializationFormat":null,"update:disabled":null,"update:disabledDates":null,"update:elementAttr":null,"update:firstDayOfWeek":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:isDirty":null,"update:isValid":null,"update:max":null,"update:maxZoomLevel":null,"update:min":null,"update:minZoomLevel":null,"update:name":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:readOnly":null,"update:rtlEnabled":null,"update:selectionMode":null,"update:selectWeekOnClick":null,"update:showTodayButton":null,"update:showWeekNumbers":null,"update:tabIndex":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:weekNumberRule":null,"update:width":null,"update:zoomLevel":null},model:{prop:"value",event:"update:value"},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=s.A,this.$_hasAsyncTemplate=!0}};(0,o.bx)(l);const u=(0,i.pM)(l);n(69375),n(2989),n(57327),n(50020),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var d=n(82950),c=n(42576),h=n(59025),p=n(82454),m=n(66529),g=n(39904),f=n(35754),D=n(85563),y=n(64743),_=n(58312),C=n(24714),v=n(39889),w=n(80028),A=n(30816),S=n(86103),b=n(66703),T=n(44956),x=n(94360),k=n(50172),E=n(27996),I=n(67767),O=n(55501),M=n(93821),R=n(1902);const V={container:"dx-scheduler-a11y-status-container"},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,D.A)("<div>").text(e).addClass(V.container).attr("role","status")},H={dateRange:"dxScheduler-dateRange",label:"dxScheduler-ariaLabel",indicatorPresent:"dxScheduler-ariaLabel-currentIndicator-present",indicatorNotPresent:"dxScheduler-ariaLabel-currentIndicator-not-present"},W={agenda:"dxScheduler-switcherAgenda",day:"dxScheduler-switcherDay",month:"dxScheduler-switcherMonth",week:"dxScheduler-switcherWeek",workWeek:"dxScheduler-switcherWorkWeek",timelineDay:"dxScheduler-switcherTimelineDay",timelineMonth:"dxScheduler-switcherTimelineMonth",timelineWeek:"dxScheduler-switcherTimelineWeek",timelineWorkWeek:"dxScheduler-switcherTimelineWorkWeek"},$=e=>String(h.A.format(e,"monthAndYear")),B=e=>`${h.A.format(e,"monthAndDay")}, ${h.A.format(e,"year")}`,G=(e,t,n)=>p.A.format(e>=t&&e<n?H.indicatorPresent:H.indicatorNotPresent),N=(e,t)=>e||(t?p.A.format(W[t]):""),F=(e,t,n,i,a)=>{const r=null===e||void 0===e?void 0:e.type,o=null===e||void 0===e?void 0:e.name,s=N(o,r),l="month"===r||"timelineMonth"===r,u=l?$(t):B(t),d=l?$(n):B(n),c=u===d?`${u}`:p.A.format(H.dateRange,u,d),h=p.A.format(H.label,s,c,i);if(a){const e=G(a,t,n);return`${h}. ${e}`}return h};n(7465);var z=n(7813),L=n(47426),U=n(94680),Z=n(68951);const Y=A.A.dateToMilliseconds,j=e=>{const t=e.getTimezoneOffset()*Y("minute"),n=new Date(e.getTime()+t);return`${n.getFullYear()+`0${n.getMonth()+1}`.slice(-2)+`0${n.getDate()}`.slice(-2)}T${`0${n.getHours()}`.slice(-2)}${`0${n.getMinutes()}`.slice(-2)}${`0${n.getSeconds()}`.slice(-2)}Z`},X=e=>{if(null===e||void 0===e||!e.freq)return;const t=Object.entries(e).reduce((e,t)=>{let[n,i]=t;return"freq"===n||"interval"===n&&i<2?e:"until"===n?`${e}${n}=${j(i)};`:`${e}${n}=${i};`},`freq=${e.freq};`);return t.substring(0,t.length-1).toUpperCase()},q=e=>{const t=void 0!==e[8];return e.shift(),void 0===e[3]?e.splice(3):(e.splice(3,1),e.splice(6)),e.unshift(""),[parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10)||0,parseInt(e[5],10)||0,parseInt(e[6],10)||0,t]},K=e=>/(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2}))?(Z)?/.exec(e),Q=e=>{if("string"!==typeof e)return e;const t=K(e);if(!t)return null;const[n,i,a,r,o,s,l]=q(t);return l?new Date(Date.UTC(n,i,a,r,o,s)):new Date(n,i,a,r,o,s)},J=e=>{const t={interval:1};if(!e)return t;const n=e.split(";"),i=n.reduce((e,t)=>{const n=t.split("="),i=n[0].toLowerCase(),a=n[1];switch(i){case"count":case"interval":{const t=parseInt(a,10);isNaN(t)||(e[i]=t);break}default:e[i]=a}return e},t);return i.freq&&i.until&&(i.until=Q(i.until)),i},ee=e=>Boolean(e),te=e=>{let t=[];return e.byday&&(t=Array.isArray(e.byday)?e.byday:e.byday.split(",")),t.map(e=>{const t=/[A-Za-z]+/.exec(e);return t&&String(t[0])}).filter(ee)},ne="dx-recurrence-editor",ie="dx-recurrence-editor-container",ae="dx-recurrence-radiogroup-repeat-type",re="dx-recurrence-numberbox-repeat-count",oe="dx-recurrence-datebox-until-date",se="dx-recurrence-button-group",le="dx-recurrence-selectbox-freq",ue="dx-recurrence-numberbox-interval",de="dx-recurrence-repeat-on",ce="dx-recurrence-numberbox-day-of-month",he="dx-recurrence-selectbox-month-of-year",pe=[{recurrence:"dxScheduler-recurrenceHourly",value:"hourly"},{recurrence:"dxScheduler-recurrenceDaily",value:"daily"},{recurrence:"dxScheduler-recurrenceWeekly",value:"weekly"},{recurrence:"dxScheduler-recurrenceMonthly",value:"monthly"},{recurrence:"dxScheduler-recurrenceYearly",value:"yearly"}],me=pe.map(e=>({text:()=>p.A.format(e.recurrence),value:e.value})),ge=[{type:"never"},{type:"until"},{type:"count"}],fe=["SU","MO","TU","WE","TH","FR","SA"],De=()=>(0,Z.Ft)((0,Z.ss)())?"filled":void 0;class ye{constructor(e){this._recurrenceRule=J(e)}makeRules(e){this._recurrenceRule=J(e)}makeRule(e,t){!t||Array.isArray(t)&&!t.length?delete this._recurrenceRule[e]:(0,k.O9)(e)&&("until"===e&&delete this._recurrenceRule.count,"count"===e&&delete this._recurrenceRule.until,this._recurrenceRule[e]=t)}getRepeatEndRule(){const e=this._recurrenceRule;return"count"in e?"count":"until"in e?"until":"never"}getRecurrenceString(){return X(this._recurrenceRule)}getRules(){return this._recurrenceRule}getDaysFromByDayRule(){return te(this._recurrenceRule)}}class _e extends L.A{_getDefaultOptions(){const e=super._getDefaultOptions();return(0,T.X)(e,{value:null,startDate:new Date,firstDayOfWeek:void 0})}_getFirstDayOfWeek(){const e=this.option("firstDayOfWeek");return(0,k.O9)(e)?e:h.A.firstDayOfWeekIndex()}_createComponent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._extendConfig(n,{readOnly:this.option("readOnly")}),super._createComponent(e,t,n)}_init(){super._init(),this._recurrenceRule=new ye(this.option("value"))}_render(){super._render(),this.$element().addClass(ne),this._$container=(0,D.A)("<div>").addClass(ie).appendTo(this.$element()),this._prepareEditors(),this._renderEditors(this._$container),this._updateRepeatInputAriaLabel()}getEditorByField(e){let t=this.getRecurrenceForm().getEditor(e);return(0,k.O9)(t)||"byday"===e&&(t=this._weekEditor),t}_prepareEditors(){const e=(this._recurrenceRule.getRules().freq||pe[1].value).toLowerCase();return this._editors=[this._createFreqEditor(e),this._createIntervalEditor(e),this._createRepeatOnLabel(e),{itemType:"group",cssClass:de,colCount:2,colCountByScreen:{xs:2},items:this._createRepeatOnEditor(e)},{itemType:"group",colCount:2,items:this._createRepeatEndEditor()}],this._editors}_createFreqEditor(e){return{dataField:"freq",name:"FREQ",editorType:"dxSelectBox",cssClass:le,editorOptions:{stylingMode:De(),items:me,value:e,field:"freq",valueExpr:"value",displayExpr:"text",layout:"horizontal",elementAttr:{class:le},onValueChanged:e=>this._valueChangedHandler(e)},label:{text:p.A.format("dxScheduler-editorLabelRecurrence")}}}_createIntervalEditor(e){const t=this._recurrenceRule.getRules().interval||1;return{itemType:"group",colCount:2,cssClass:`${ue}-wrapper`,colCountByScreen:{xs:2},items:[{dataField:"interval",editorType:"dxNumberBox",editorOptions:{stylingMode:De(),format:"#",width:90,min:1,field:"interval",value:t,showSpinButtons:!0,useLargeSpinButtons:!1,elementAttr:{class:ue},onValueChanged:e=>this._valueChangedHandler(e)},label:{text:p.A.format("dxScheduler-recurrenceRepeatEvery")}},{name:"intervalLabel",cssClass:`${ue}-label`,template:()=>p.A.format(`dxScheduler-recurrenceRepeat${e.charAt(0).toUpperCase()}${e.substr(1).toLowerCase()}`)}]}}_createRepeatOnLabel(e){return{itemType:"group",cssClass:`${de}-label`,items:[{name:"repeatOnLabel",colSpan:2,template:()=>p.A.format("dxScheduler-recurrenceRepeatOn"),visible:e&&"daily"!==e&&"hourly"!==e}]}}_createRepeatOnEditor(e){return[this._createByDayEditor(e),this._createByMonthEditor(e),this._createByMonthDayEditor(e)]}_createByDayEditor(e){return{dataField:"byday",colSpan:2,template:(e,t)=>{const n=this._getFirstDayOfWeek(),i=this._daysOfWeekByRules(),a=h.A.getDayNames("abbreviated"),r=fe.slice(n).concat(fe.slice(0,n)),o=a.slice(n).concat(a.slice(0,n)).map((e,t)=>({text:e,key:r[t]}));this._$repeatOnWeek=(0,D.A)("<div>").addClass(se).appendTo(t),this._weekEditor=this._createComponent(this._$repeatOnWeek,z.A,{items:o,field:"byday",selectionMode:"multiple",selectedItemKeys:i,keyExpr:"key",onSelectionChanged:e=>{const t=e.component.option("selectedItemKeys"),n=null!==t&&void 0!==t&&t.length?t:this._getDefaultByDayValue();this._recurrenceRule.makeRule("byday",n),this._changeEditorValue()}})},visible:"weekly"===e,label:{visible:!1}}}_createByMonthEditor(e){const t=h.A.getMonthNames("wide"),n=[...Array(12)].map((e,n)=>({value:`${n+1}`,text:t[n]}));return{dataField:"bymonth",editorType:"dxSelectBox",editorOptions:{stylingMode:De(),field:"bymonth",items:n,value:this._monthOfYearByRules(),width:120,displayExpr:"text",valueExpr:"value",elementAttr:{class:he},onValueChanged:e=>this._valueChangedHandler(e)},visible:"yearly"===e,label:{visible:!1}}}_createByMonthDayEditor(e){return{dataField:"bymonthday",editorType:"dxNumberBox",editorOptions:{stylingMode:De(),min:1,max:31,format:"#",width:90,field:"bymonthday",showSpinButtons:!0,useLargeSpinButtons:!1,value:this._dayOfMonthByRules(),elementAttr:{class:ce},onValueChanged:e=>this._valueChangedHandler(e)},visible:"monthly"===e||"yearly"===e,label:{visible:!1}}}_createRepeatEndEditor(){const e=this._recurrenceRule.getRepeatEndRule();return[{colSpan:2,template:p.A.format("dxScheduler-recurrenceEnd")},{colSpan:1,label:{visible:!1},dataField:"repeatEnd",editorType:"dxRadioGroup",editorOptions:{items:ge,value:e,valueExpr:"type",field:"repeatEnd",itemTemplate:e=>"count"===e.type?p.A.format("dxScheduler-recurrenceAfter"):"until"===e.type?p.A.format("dxScheduler-recurrenceOn"):p.A.format("dxScheduler-recurrenceNever"),layout:"vertical",elementAttr:{class:ae},onValueChanged:e=>this._repeatEndValueChangedHandler(e)}},{colSpan:1,itemType:"group",items:[this._getRepeatUntilEditorOptions(),this._getRepeatCountEditorOptions()]}]}_renderEditors(e){this._recurrenceForm=this._createComponent(e,U.A,{items:this._editors,showValidationSummary:!1,scrollingEnabled:!0,showColonAfterLabel:!1,labelLocation:"top"}),this._changeRepeatEndInputsVisibility()}getRecurrenceForm(){return this._recurrenceForm}changeValueByVisibility(e){e?this.option("value")||this._handleDefaults():(this._recurrenceRule.makeRules(""),this.option("value",""))}_handleDefaults(){this._recurrenceRule.makeRule("freq",pe[1].value),this._changeEditorValue()}_changeEditorValue(){this.option("value",this._recurrenceRule.getRecurrenceString()??"")}_daysOfWeekByRules(){let e=this._recurrenceRule.getDaysFromByDayRule();return e.length||(e=this._getDefaultByDayValue()),e}_getDefaultByDayValue(){const e=this.option("startDate"),t=e.getDay();return[fe[t]]}_dayOfMonthByRules(){let e=this._recurrenceRule.getRules().bymonthday;return e||(e=this.option("startDate").getDate()),e}_monthOfYearByRules(){let e=this._recurrenceRule.getRules().bymonth;return e||(e=this.option("startDate").getMonth()+1),String(e)}_repeatEndValueChangedHandler(e){const{value:t}=e;this._changeRepeatEndInputsVisibility(t),"until"===t&&this._recurrenceRule.makeRule(t,this._getUntilValue()),"count"===t&&this._recurrenceRule.makeRule(t,this._recurrenceForm.option("formData.count")),"never"===t&&(this._recurrenceRule.makeRule("count",""),this._recurrenceRule.makeRule("until","")),this._changeEditorValue(),this._updateRepeatInputAriaLabel()}_changeRepeatEndInputsVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._recurrenceRule.getRepeatEndRule();"until"===e&&(this._recurrenceForm.itemOption("until","visible",!0),this._recurrenceForm.itemOption("count","visible",!1)),"count"===e&&(this._recurrenceForm.itemOption("until","visible",!1),this._recurrenceForm.itemOption("count","visible",!0)),"never"===e&&(this._recurrenceForm.itemOption("until","visible",!1),this._recurrenceForm.itemOption("count","visible",!1))}_getRepeatCountEditorOptions(){const e=this._recurrenceRule.getRules().count||1;return{dataField:"count",cssClass:re,label:{visible:!1},editorType:"dxNumberBox",editorOptions:{stylingMode:De(),field:"count",format:`# ${p.A.format("dxScheduler-recurrenceRepeatCount")}`,width:"100%",min:1,showSpinButtons:!0,useLargeSpinButtons:!1,value:e,onValueChanged:this._repeatCountValueChangeHandler.bind(this),inputAttr:{"aria-label":p.A.format("dxScheduler-recurrenceOccurrenceLabel")}}}}_updateRepeatInputAriaLabel(){const e=this.getEditorByField("repeatEnd").itemElements(),t=p.A.format("dxScheduler-recurrenceOn"),n=this._recurrenceForm.getEditor("until").option("value"),i=`${h.A.format(n,"d")} ${h.A.format(n,"monthAndYear")}`,a=this._recurrenceForm.itemOption("until").visible,r=p.A.format("dxScheduler-recurrenceAfter"),o=p.A.format("dxScheduler-recurrenceRepeatCount"),s=this._recurrenceForm.getEditor("count").option("value"),l=this._recurrenceForm.itemOption("count").visible;e[1].setAttribute("aria-label",a?`${t} ${i}`:t),e[2].setAttribute("aria-label",l?`${r} ${s} ${o}`:r)}_repeatCountValueChangeHandler(e){if("count"===this._recurrenceRule.getRepeatEndRule()){const{value:t}=e;this._recurrenceRule.makeRule("count",t),this._changeEditorValue(),this._updateRepeatInputAriaLabel()}}_getRepeatUntilEditorOptions(){const e=this._getUntilValue();return{dataField:"until",label:{visible:!1},cssClass:oe,editorType:"dxDateBox",editorOptions:{stylingMode:De(),field:"until",value:e,type:"date",width:"100%",onValueChanged:this._repeatUntilValueChangeHandler.bind(this),calendarOptions:{firstDayOfWeek:this._getFirstDayOfWeek()},useMaskBehavior:!0,inputAttr:{"aria-label":p.A.format("dxScheduler-recurrenceUntilDateLabel")}}}}_formatUntilDate(e){const t=this._recurrenceRule.getRules().until,n=A.A.sameDate(t,e);return t&&n?e:A.A.setToDayEnd(e)}_repeatUntilValueChangeHandler(e){if("until"===this._recurrenceRule.getRepeatEndRule()){const t=this._formatUntilDate(new Date(e.value)),n=this.option("getStartDateTimeZone"),i=n(),a=i?"fromAppointment":"fromGrid",r=this.option("timeZoneCalculator").createDate(t,a,i);this._recurrenceRule.makeRule("until",r),this._changeEditorValue(),this._updateRepeatInputAriaLabel()}}_valueChangedHandler(e){const{value:t,previousValue:n}=e,i=e.component.option("field");this.option("visible")?(this._recurrenceRule.makeRule(i,t),"freq"===i&&(this._makeRepeatOnRule(t),this._changeRepeatOnVisibility(t,n)),this._changeEditorValue()):this.option("value","")}_makeRepeatOnRule(e){"daily"!==e&&"hourly"!==e||(this._recurrenceRule.makeRule("byday",""),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("bymonthday","")),"weekly"===e&&(this._recurrenceRule.makeRule("byday",this._daysOfWeekByRules()),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("bymonthday","")),"monthly"===e&&(this._recurrenceRule.makeRule("bymonthday",this._dayOfMonthByRules()),this._recurrenceRule.makeRule("bymonth",""),this._recurrenceRule.makeRule("byday","")),"yearly"===e&&(this._recurrenceRule.makeRule("bymonthday",this._dayOfMonthByRules()),this._recurrenceRule.makeRule("bymonth",this._monthOfYearByRules()),this._recurrenceRule.makeRule("byday",""))}_optionChanged(e){var t,n;switch(e.name){case"readOnly":null===(t=this._recurrenceForm)||void 0===t||t.option("readOnly",e.value),null===(n=this._weekEditor)||void 0===n||n.option("readOnly",e.value),super._optionChanged(e);break;case"value":this._recurrenceRule.makeRules(e.value),this._changeRepeatIntervalLabel(),this._changeRepeatEndInputsVisibility(),this._changeEditorsValue(this._recurrenceRule.getRules()),super._optionChanged(e);break;case"startDate":this._makeRepeatOnRule(this._recurrenceRule.getRules().freq),(0,k.O9)(this._recurrenceRule.getRecurrenceString())&&this._changeEditorValue();break;case"firstDayOfWeek":if(this._weekEditor){const t=h.A.getDayNames("abbreviated"),n=fe.slice(e.value).concat(fe.slice(0,e.value)),i=t.slice(e.value).concat(t.slice(0,e.value)).map((e,t)=>({text:e,key:n[t]}));this._weekEditor.option("items",i)}this._recurrenceForm.itemOption("until").visible&&this._recurrenceForm.getEditor("until").option("calendarOptions.firstDayOfWeek",this._getFirstDayOfWeek());break;default:super._optionChanged(e)}}_changeRepeatOnVisibility(e,t){e!==t&&(this._recurrenceForm.itemOption("byday","visible",!1),this._recurrenceForm.itemOption("bymonthday","visible",!1),this._recurrenceForm.itemOption("bymonth","visible",!1),this._recurrenceForm.itemOption("repeatOnLabel","visible",e&&"daily"!==e&&"hourly"!==e),"weekly"===e&&this._recurrenceForm.itemOption("byday","visible",!0),"monthly"===e&&this._recurrenceForm.itemOption("bymonthday","visible",!0),"yearly"===e&&(this._recurrenceForm.itemOption("bymonthday","visible",!0),this._recurrenceForm.itemOption("bymonth","visible",!0)))}_changeRepeatIntervalLabel(){const{freq:e}=this._recurrenceRule.getRules();e&&this._recurrenceForm.itemOption("intervalLabel","template",p.A.format(`dxScheduler-recurrenceRepeat${e.charAt(0).toUpperCase()}${e.substr(1).toLowerCase()}`))}_changeEditorsValue(e){this._recurrenceForm.getEditor("freq").option("value",(e.freq||pe[1].value).toLowerCase()),this._changeDayOfWeekValue(),this._changeDayOfMonthValue(),this._changeMonthOfYearValue(),this._changeIntervalValue(e.interval),this._changeRepeatCountValue(),this._changeRepeatEndValue(),this._changeRepeatUntilValue()}_changeIntervalValue(e){this._recurrenceForm.getEditor("interval").option("value",e||1)}_changeRepeatEndValue(){const e=this._recurrenceRule.getRepeatEndRule();this._recurrenceForm.getEditor("repeatEnd").option("value",e)}_changeDayOfWeekValue(){const e=this._recurrenceForm.itemOption("byday").visible;if(e){const e=this._daysOfWeekByRules();this.getEditorByField("byday").option("selectedItemKeys",e)}}_changeDayOfMonthValue(){const e=this._recurrenceForm.itemOption("bymonthday").visible;if(e){const e=this._dayOfMonthByRules();this._recurrenceForm.getEditor("bymonthday").option("value",e)}}_changeMonthOfYearValue(){const e=this._recurrenceForm.itemOption("bymonth").visible;if(e){const e=this._monthOfYearByRules();this._recurrenceForm.getEditor("bymonth").option("value",e)}}_changeRepeatCountValue(){const e=this._recurrenceRule.getRules().count||1;this._recurrenceForm.getEditor("count").option("value",e)}_changeRepeatUntilValue(){this._recurrenceForm.getEditor("until").option("value",this._getUntilValue())}_getUntilValue(){const e=this._recurrenceRule.getRules().until;if(!e)return this._formatUntilDate(new Date);const t=this.option("getStartDateTimeZone"),n=t(),i=n?"toAppointment":"toGrid";return this.option("timeZoneCalculator").createDate(e,i,n)}}(0,m.A)("dxRecurrenceEditor",_e);n(23605),n(5330);var Ce=n(63029),ve=n(59981),we=n(64826),Ae=n(61928),Se=n(86498),be=n(74567),Te=n(90218),xe=n(1767),ke=n(33892);class Ee extends ke.A{_feedbackHideTimeout(){return 0}_supportedKeys(){const{rtlEnabled:e}=this.option(),t=e=>{var t;e.preventDefault(),null===(t=this._clickAction)||void 0===t||t.call(this,{event:e})},n=(e,t)=>{t.preventDefault(),t.stopPropagation(),this._saveValueChangeEvent(t),this._animateValue(e)};return(0,d.A)({},super._supportedKeys(),{space:t,enter:t,leftArrow:t=>{n(Boolean(e),t)},rightArrow:t=>{n(!e,t)}})}_useTemplates(){return!1}_getDefaultOptions(){return(0,d.A)({},super._getDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:p.A.format("dxSwitch-switchedOnText"),switchedOffText:p.A.format("dxSwitch-switchedOffText"),value:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===Te.A.real().deviceType&&!Te.A.isSimulator(),options:{focusStateEnabled:!0}}])}_init(){super._init(),this._animating=!1}_initMarkup(){this._renderContainers(),this.$element().addClass("dx-switch").append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","switch"),this._renderSwipeable(),super._initMarkup(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()}_getInnerOffset(e,t){const n=(t-this._offsetDirection()*Number(!e))/2;return 100*n+"%"}_getHandleOffset(e,t){const{rtlEnabled:n}=this.option(),i=n?!e:e;if(i){const e=100*-t-100;return`${e}%`}return 100*-t+"%"}_renderSwitchInner(){this._$switchInner=(0,D.A)("<div>").addClass("dx-switch-inner").appendTo(this._$switchContainer),this._$handle=(0,D.A)("<div>").addClass("dx-switch-handle").appendTo(this._$switchInner)}_renderLabels(){this._$labelOn=(0,D.A)("<div>").addClass("dx-switch-on").prependTo(this._$switchInner),this._$labelOff=(0,D.A)("<div>").addClass("dx-switch-off").appendTo(this._$switchInner),this._setLabelsText()}_renderContainers(){this._$switchContainer=(0,D.A)("<div>").addClass("dx-switch-container"),this._$switchWrapper=(0,D.A)("<div>").addClass("dx-switch-wrapper").append(this._$switchContainer)}_renderSwipeable(){this._createComponent(this.$element(),Se.A,{elastic:!1,immediate:!0,onStart:e=>{this._swipeStartHandler(e.event)},onUpdated:e=>{this._swipeUpdateHandler(e.event)},onEnd:e=>{this._swipeEndHandler(e.event)},itemSizeFunc:()=>this._getItemSizeFunc()})}_getItemSizeFunc(){return(0,xe.Ot)(this._$switchContainer,!0)-(0,x.N)(this._$handle.get(0)).width}_renderSubmitElement(){this._$submitElement=(0,D.A)("<input>").attr("type","hidden").appendTo(this.$element())}_getSubmitElement(){return this._$submitElement}_offsetDirection(){const{rtlEnabled:e}=this.option();return e?-1:1}_renderPosition(e,t){const n=this._getInnerOffset(e,t),i=this._getHandleOffset(e,t);this._$switchInner.css("transform",` translateX(${n})`),this._$handle.css("transform",` translateX(${i})`)}_validateValue(){const{value:e}=this.option();"boolean"!==typeof e&&this._options.silent("value",!!e)}_renderClick(){const e=(0,be.b4)(ve.U,this.NAME??""),t=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),Ae.A.off(t,e),Ae.A.on(t,e,e=>{var t;null===(t=this._clickAction)||void 0===t||t.call(this,{event:e})})}_clickHandler(e){const{event:t}=e;if(this._saveValueChangeEvent(t),this._animating||this._swiping)return;const{value:n}=this.option();this._animateValue(!n)}_animateValue(e){const{value:t}=this.option(),n=Boolean(t),i=e;if(n===i)return;this._animating=!0;const a=this._getInnerOffset(n,0),r=this._getInnerOffset(i,0),o=this._getHandleOffset(n,0),s=this._getHandleOffset(i,0),l={transform:` translateX(${a})`},u={transform:` translateX(${r})`},d={transform:` translateX(${o})`},c={transform:` translateX(${s})`};this.$element().toggleClass("dx-switch-on-value",i),Ce.fx.animate(this._$handle.get(0),{from:d,to:c,duration:100}),Ce.fx.animate(this._$switchInner.get(0),{from:l,to:u,duration:100,complete:()=>{this._animating=!1,this.option({value:i})}})}_swipeStartHandler(e){const{value:t,rtlEnabled:n,activeStateEnabled:i}=this.option(),a=n?0:1,r=n?1:0;e.maxLeftOffset=t?a:r,e.maxRightOffset=t?r:a,this._swiping=!0,this._feedbackDeferred=(0,b.cY)(),(0,we.s2)(this._feedbackDeferred),this._toggleActiveState(this.$element(),Boolean(i))}_swipeUpdateHandler(e){const{value:t}=this.option();this._renderPosition(Boolean(t),e.offset)}_swipeEndHandler(e){const{value:t}=this.option(),n=this._offsetDirection(),i=this._getInnerOffset(Boolean(t),e.targetOffset),a=this._getHandleOffset(Boolean(t),e.targetOffset),r={transform:` translateX(${i})`},o={transform:` translateX(${a})`};Ce.fx.animate(this._$handle.get(0),{to:o,duration:100}),Ce.fx.animate(this._$switchInner.get(0),{to:r,duration:100,complete:()=>{var i;this._swiping=!1;const a=Number(t)+n*e.targetOffset;this._saveValueChangeEvent(e),this.option({value:Boolean(a)}),null===(i=this._feedbackDeferred)||void 0===i||i.resolve(),this._toggleActiveState(this.$element(),!1)}})}_renderValue(){this._validateValue();const{value:e,switchedOnText:t,switchedOffText:n}=this.option();this._renderPosition(Boolean(e),0),this.$element().toggleClass("dx-switch-on-value",e),this._getSubmitElement().val(String(e??"")),this.setAria({checked:e,label:e?t:n})}_setLabelsText(){var e,t;const{switchedOnText:n="",switchedOffText:i=""}=this.option();null===(e=this._$labelOn)||void 0===e||e.text(n),null===(t=this._$labelOff)||void 0===t||t.text(i)}_visibilityChanged(e){e&&this.repaint()}_optionChanged(e){switch(e.name){case"width":this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),super._optionChanged(e);break;default:super._optionChanged(e)}}}(0,m.A)("dxSwitch",Ee);n(93251);var Ie=n(59715),Oe=n(53786);const Me={Main:"mainGroup",Recurrence:"recurrenceGroup"},Re={form:"e2e-dx-scheduler-form",textEditor:"e2e-dx-scheduler-form-text",descriptionEditor:"e2e-dx-scheduler-form-description",startDateEditor:"e2e-dx-scheduler-form-start-date",endDateEditor:"e2e-dx-scheduler-form-end-date",startDateTimeZoneEditor:"e2e-dx-scheduler-form-start-date-timezone",endDateTimeZoneEditor:"e2e-dx-scheduler-form-end-date-timezone",allDaySwitch:"e2e-dx-scheduler-form-all-day-switch",recurrenceSwitch:"e2e-dx-scheduler-form-recurrence-switch"},Ve=()=>new Ie.A({store:Oe.A.getTimeZonesCache(),paginate:!0,pageSize:10}),Pe=()=>(0,Z.Ft)((0,Z.ss)())?"filled":void 0,He=(e,t)=>new Date(new Date(e).setHours(t)),We=(e,t,n)=>{const i=null===t||Boolean(t),a=null===n||Boolean(n);!i&&a&&e.option("value",n)},$e=(e,t,n)=>{var i;n.itemOption(Me.Recurrence,"visible",t),null===(i=n.getEditor(e))||void 0===i||i.changeValueByVisibility(t)};class Be{constructor(e){this.isFormUpdating=!1,this.scheduler=e,this.form=null}get dxForm(){return this.form}set readOnly(e){this.form.option("readOnly",e);const{recurrenceRuleExpr:t}=this.scheduler.getDataAccessors().expr,n=this.form.getEditor(t);null===n||void 0===n||n.option("readOnly",e)}get formData(){return this.form.option("formData")}set formData(e){this.form.option("formData",e)}create(e,t,n){const{allowTimeZoneEditing:i}=this.scheduler.getEditingConfig(),a=this.scheduler.getDataAccessors(),{expr:r}=a,o=Boolean(a.get("recurrenceRule",n)),s=o?1:2,l=[...this._createMainItems(r,e,t,i),...this.scheduler.createResourceEditorModel()];t(o);const u=[{itemType:"group",name:Me.Main,colCountByScreen:{lg:2,xs:1},colSpan:s,items:l},{itemType:"group",name:Me.Recurrence,visible:o,colSpan:s,items:this._createRecurrenceEditor(r)}],d=(0,D.A)("<div>");this.scheduler.createComponent(d,U.A,{items:u,showValidationSummary:!0,scrollingEnabled:!0,colCount:"auto",colCountByScreen:{lg:2,xs:1},formData:n,showColonAfterLabel:!1,labelLocation:"top",onInitialized:e=>{this.form=e.component},screenByWidth:e=>e<600||"desktop"!==Te.A.current().deviceType?"xs":"lg",elementAttr:{class:Re.form}})}_dateBoxValueChanged(e,t,n){We(e.component,e.value,e.previousValue);const i=S.A.deserializeDate(e.value),a=S.A.deserializeDate(e.previousValue),r=this.form.getEditor(t),o=S.A.deserializeDate(r.option("value"));if(!this.isFormUpdating&&o&&i&&n(o,i)){const e=a?o.getTime()-a.getTime():0;r.option("value",new Date(i.getTime()+e))}}_createTimezoneEditor(e,t,n,i,a,r){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const s=p.A.format("dxScheduler-noTimezoneTitle");return{name:this.normalizeEditorName(e),dataField:e,editorType:"dxSelectBox",visibleIndex:n,colSpan:i,cssClass:r,label:{text:" "},editorOptions:{displayExpr:"title",valueExpr:"id",placeholder:s,searchEnabled:!0,dataSource:Ve(),onValueChanged:e=>{const{form:n}=this,i=n.getEditor(t);a&&i.option("value",e.value)}},visible:o}}_createDateBoxItems(e,t){const n=t?2:1,i=this.scheduler.getFirstDayOfWeek();return[this.createDateBoxEditor(e.startDateExpr,n,i,"dxScheduler-editorLabelStartDate",Re.startDateEditor,t=>{this._dateBoxValueChanged(t,e.endDateExpr,(e,t)=>e<t)}),this._createTimezoneEditor(e.startDateTimeZoneExpr,e.endDateTimeZoneExpr,1,n,!0,Re.startDateTimeZoneEditor,t),this.createDateBoxEditor(e.endDateExpr,n,i,"dxScheduler-editorLabelEndDate",Re.endDateEditor,t=>{this._dateBoxValueChanged(t,e.startDateExpr,(e,t)=>t<e)}),this._createTimezoneEditor(e.endDateTimeZoneExpr,e.startDateTimeZoneExpr,3,n,!1,Re.endDateTimeZoneEditor,t)]}_changeFormItemDateType(e,t,n){const i=this.getEditorPath(e,t),a=this.form.itemOption(i).editorOptions,r=n?"date":"datetime",o=(0,d.A)({},a,{type:r});this.form.itemOption(i,"editorOptions",o)}_createMainItems(e,t,n,i){return[{name:this.normalizeEditorName(e.textExpr),dataField:e.textExpr,cssClass:Re.textEditor,editorType:"dxTextBox",colSpan:2,label:{text:p.A.format("dxScheduler-editorLabelTitle")},editorOptions:{stylingMode:Pe()}},{itemType:"group",colSpan:2,colCountByScreen:{lg:2,xs:1},items:this._createDateBoxItems(e,i)},{itemType:"group",colSpan:2,colCountByScreen:{lg:2,xs:2},items:[{name:this.normalizeEditorName(e.allDayExpr),dataField:e.allDayExpr,cssClass:`dx-appointment-form-switch ${Re.allDaySwitch}`,editorType:"dxSwitch",label:{text:p.A.format("dxScheduler-allDay"),location:"right"},editorOptions:{onValueChanged:t=>{const{value:n}=t,i=this.form.getEditor(e.startDateExpr),a=this.form.getEditor(e.endDateExpr),r=S.A.deserializeDate(i.option("value"));if(!this.isFormUpdating&&r)if(n){const e=A.A.trimTime(r);i.option("value",new Date(e)),a.option("value",new Date(e))}else{const e=He(r,this.scheduler.getStartDayHour()),t=this.scheduler.getCalculatedEndDate(e);i.option("value",e),a.option("value",t)}this._changeFormItemDateType(e.startDateExpr,"Main",n),this._changeFormItemDateType(e.endDateExpr,"Main",n)}}},{editorType:"dxSwitch",dataField:"repeat",cssClass:`dx-appointment-form-switch ${Re.recurrenceSwitch}`,name:"visibilityChanged",label:{text:p.A.format("dxScheduler-editorLabelRecurrence"),location:"right"},editorOptions:{onValueChanged:i=>{const{form:a}=this,r=i.value?1:2;a.itemOption(Me.Main,"colSpan",r),a.itemOption(Me.Recurrence,"colSpan",r),$e(e.recurrenceRuleExpr,i.value,a),n(i.value),t()}}}]},{itemType:"empty",colSpan:2},{name:this.normalizeEditorName(e.descriptionExpr),dataField:e.descriptionExpr,cssClass:Re.descriptionEditor,editorType:"dxTextArea",colSpan:2,label:{text:p.A.format("dxScheduler-editorLabelDescription")},editorOptions:{stylingMode:Pe()}},{itemType:"empty",colSpan:2}]}_createRecurrenceEditor(e){return[{name:this.normalizeEditorName(e.recurrenceRuleExpr),dataField:e.recurrenceRuleExpr,editorType:"dxRecurrenceEditor",editorOptions:{firstDayOfWeek:this.scheduler.getFirstDayOfWeek(),timeZoneCalculator:this.scheduler.getTimeZoneCalculator(),getStartDateTimeZone:()=>this.scheduler.getDataAccessors().get("startDateTimeZone",this.formData)},label:{text:" ",visible:!1}}]}setEditorsType(e){const{startDateExpr:t,endDateExpr:n}=this.scheduler.getDataAccessors().expr,i=this.getEditorPath(t,"Main"),a=this.getEditorPath(n,"Main"),r=this.form.itemOption(i),o=this.form.itemOption(a);if(r&&o){const t=r.editorOptions,n=o.editorOptions;t.type=n.type=e?"date":"datetime",this.form.itemOption(i,"editorOptions",t),this.form.itemOption(a,"editorOptions",n)}}updateRecurrenceEditorStartDate(e,t){const n={startDate:e};this.setEditorOptions(t,"Recurrence",n)}setEditorOptions(e,t,n){const i=this.getEditorPath(e,t),a=this.form.itemOption(i);a&&this.form.itemOption(i,"editorOptions",(0,T.X)({},a.editorOptions,n))}updateFormData(e){this.isFormUpdating=!0,this.form.option("formData",e);const t=this.scheduler.getDataAccessors(),{expr:n}=t,i=t.get("startDate",e),a=t.get("allDay",e),r=new Date(i);this.updateRecurrenceEditorStartDate(r,n.recurrenceRuleExpr),this.setEditorsType(a),this.isFormUpdating=!1}createDateBoxEditor(e,t,n,i,a,r){return{editorType:"dxDateBox",name:this.normalizeEditorName(e),dataField:e,colSpan:t,cssClass:a,label:{text:p.A.format(i)},validationRules:[{type:"required"}],editorOptions:{stylingMode:Pe(),width:"100%",calendarOptions:{firstDayOfWeek:n},onValueChanged:r,useMaskBehavior:!0}}}getEditorPath(e,t){const n=this.normalizeEditorName(e);return`${Me[t]}.${n}`}normalizeEditorName(e){return e?e.replace(/\./g,"_"):e}}var Ge=n(2308);const Ne={DEFAULT:485,RECURRENCE:970,FULLSCREEN:1e3,MOBILE:{DEFAULT:350,FULLSCREEN:500}},Fe=()=>"desktop"!==Te.A.current().deviceType,ze=()=>"ios"===Te.A.current().platform,Le={AFTER:"after",BEFORE:"before"},Ue=()=>({doneButton:{shortcut:"done",options:{text:p.A.format("Done")},location:Le.AFTER},cancelButton:{shortcut:"cancel",location:ze()?Le.BEFORE:Le.AFTER}}),Ze=(e,t)=>{const n=[],i=Ue();return e&&n.push((0,d.A)({},i.doneButton,{onClick:t})),n.push(i.cancelButton),n},Ye=()=>{const e=(0,E.zk)(),t=e&&(0,xe.RG)(e);return!!t&&(Fe()?t<Ne.MOBILE.FULLSCREEN:t<Ne.FULLSCREEN)},je=e=>Fe()?Ne.MOBILE.DEFAULT:e?Ne.RECURRENCE:Ne.DEFAULT;var Xe=n(60177),qe=n(50856);let Ke=null;const Qe=function(e){return new qe.A((0,D.A)("<div>").appendTo(e&&e.container||(0,Xe.Uq)()),e)},Je=function(){Ke&&(Ke.$element().remove(),Ke=null)};function et(e){return Je(),Ke=Qe(e),Ke.show()}function tt(){return Ke?Ke.hide().done(Je).promise():(new b.cY).resolve()}var nt=n(95161);class it{constructor(e,t){this.source=e,this.dataAccessors=t}get startDate(){return this.dataAccessors.get("startDate",this.source)}set startDate(e){this.dataAccessors.set("startDate",this.source,e)}get endDate(){return this.dataAccessors.get("endDate",this.source)}set endDate(e){this.dataAccessors.set("endDate",this.source,e)}get allDay(){return this.dataAccessors.get("allDay",this.source)}set allDay(e){this.dataAccessors.set("allDay",this.source,e)}get text(){return this.dataAccessors.get("text",this.source)??""}set text(e){this.dataAccessors.set("text",this.source,e)}get description(){return this.dataAccessors.get("description",this.source)??""}set description(e){this.dataAccessors.set("description",this.source,e)}get startDateTimeZone(){return this.dataAccessors.get("startDateTimeZone",this.source)}get endDateTimeZone(){return this.dataAccessors.get("endDateTimeZone",this.source)}get recurrenceRule(){return this.dataAccessors.get("recurrenceRule",this.source)}set recurrenceRule(e){this.dataAccessors.set("recurrenceRule",this.source,e)}get recurrenceException(){return this.dataAccessors.get("recurrenceException",this.source)}set recurrenceException(e){this.dataAccessors.set("recurrenceException",this.source,e)}get disabled(){return this.dataAccessors.get("disabled",this.source)}get duration(){const{startDate:e,endDate:t}=this;return t&&e?t.getTime()-e.getTime():0}get isRecurrent(){return this.dataAccessors.isRecurrent(this.source)}clone(){return new it((0,nt.tm)({},this.source,!1,!1,!1,!0),this.dataAccessors)}serialize(){return this.dataAccessors.set("startDate",this.source,this.dataAccessors.get("startDate",this.source)),this.dataAccessors.set("endDate",this.source,this.dataAccessors.get("endDate",this.source)),this}getCalculatedDates(e,t){return{startDate:e.createDate(this.startDate,t,this.startDateTimeZone),endDate:e.createDate(this.endDate,t,this.endDateTimeZone)}}calculateDates(e,t){const{startDate:n,endDate:i}=this.getCalculatedDates(e,t);return this.startDate&&(this.startDate=n),this.endDate&&(this.endDate=i),this}}n(99819);var at=n(15981),rt=n(80791);const ot=(e,t)=>e.items.find(e=>(0,rt.RL)(e.id,t)),st=(e,t)=>t.reduce((t,n)=>{const i=n.idsGetter(e);return i.length&&(t[n.resourceIndex]=i),t},{}),lt=(e,t)=>t.reduce((t,n)=>{const i=n.idsGetter(e);return i.length&&(t[n.resourceIndex]=n.allowMultiple?i:i[0]),t},{}),ut=e=>Object.entries(e).reduce((e,t)=>{let[n,i]=t;return e[n]=(0,at.BO)(i),e},{}),dt=(e,t)=>Object.entries(e).reduce((e,n)=>{let[i,a]=n;const r=t[i],o=a.map(e=>{var t;return null===(t=ot(r,e))||void 0===t?void 0:t.text}).filter(Boolean);return o.length&&e.push({label:r.resourceName,values:o}),e},[]),ct=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.entries(n).forEach(n=>{let[i,a]=n;const r=t[i],o=r.allowMultiple?[a]:a;r.idsSetter(e,o)})},ht=(e,t)=>t.filter(t=>Object.entries(t.grouped).every(t=>{var n;let[i,a]=t;return null===(n=e[i])||void 0===n?void 0:n.includes(a)})).map(e=>e.groupIndex),pt=(e,t,n)=>t.length?t.map(t=>n.filter(n=>{const i=st(n,Object.values(e));return Object.entries(t.grouped).every(e=>{var t;let[n,a]=e;return null===(t=i[n])||void 0===t?void 0:t.includes(a)})})):[n],mt=A.A.dateToMilliseconds,gt="dx-scheduler-appointment-popup",ft=mt("day"),Dt={height:"auto",maxHeight:"100%",showCloseButton:!1,showTitle:!1,preventScrollEvents:!1,enableBodyScroll:!1,defaultOptionsRules:[{device:()=>Te.A.current().android,options:{showTitle:!1}}],_ignorePreventScrollEventsDeprecation:!0},yt={CREATE:0,UPDATE:1,EXCLUDE_FROM_SERIES:2};class _t{constructor(e,t){this.scheduler=e,this.form=t,this.popup=null,this.state={action:null,lastEditData:null,saveChangesLocker:!1,appointment:{data:null}}}get visible(){return!!this.popup&&this.popup.option("visible")}show(e,t){if(this.state.appointment.data=e,this.state.action=t.action,this.state.excludeInfo=t.excludeInfo,!this.popup){const e=this._createPopupConfig();this.popup=this._createPopup(e)}this.popup.option("toolbarItems",Ze(t.isToolbarVisible,e=>this._doneButtonClickHandler(e))),this.popup.show()}hide(){this.popup.hide()}dispose(){var e;null===(e=this.popup)||void 0===e||e.$element().remove()}_createPopup(e){const t=(0,D.A)("<div>").addClass(gt).appendTo(this.scheduler.getElement());return this.scheduler.createComponent(t,Ge.A,e)}_createPopupConfig(){return(0,d.A)({},Dt,{onHiding:()=>this.scheduler.focus(),contentTemplate:()=>this._createPopupContent(),onShowing:e=>this._onShowing(e),wrapperAttr:{class:gt}})}_onShowing(e){this._updateForm(),e.component.$overlayContent().attr("aria-label",p.A.format("dxScheduler-ariaEditForm"));const t={form:this.form.dxForm,popup:this.popup,appointmentData:this.state.appointment.data,cancel:!1};this.scheduler.getAppointmentFormOpening()(t),this.scheduler.processActionResult(t,t=>{t?e.cancel=!0:this.updatePopupFullScreenMode()})}_createPopupContent(){return this._createForm(),this.form.dxForm.$element()}_createFormData(e){const t=this._createAppointmentAdapter(e),n=this.scheduler.getResourceManager(),i=lt(e,n.resources);return(0,d.A)({},e,i,{repeat:Boolean(t.recurrenceRule)})}_createForm(){const e=this.state.appointment.data,t=this._createFormData(e);this.form.create(this.triggerResize.bind(this),this.changeSize.bind(this),t)}_isReadOnly(e){const t=this._createAppointmentAdapter(e);return!(!e||!t.disabled)||this.state.action!==yt.CREATE&&!this.scheduler.getEditingConfig().allowUpdating}_createAppointmentAdapter(e){return new it(e,this.scheduler.getDataAccessors())}_updateForm(){const{data:e}=this.state.appointment,t=this._createFormData(e),n=this._createAppointmentAdapter(t).clone().calculateDates(this.scheduler.getTimeZoneCalculator(),"toAppointment").source;this.form.readOnly=this._isReadOnly(n),this.form.updateFormData(n)}triggerResize(){this.popup&&(0,c.ho)(this.popup.$element())}changeSize(e){if(this.popup){const t=Ye(),n=t?"100%":je(e);this.popup.option("fullScreen",t),this.popup.option("maxWidth",n)}}updatePopupFullScreenMode(){if(this.form.dxForm&&this.visible){const{formData:e}=this.form,t=this.scheduler.getDataAccessors(),n=t.get("recurrenceRule",e);this.changeSize(n)}}saveChangesAsync(e){const t=new b.cY,n=this.form.dxForm.validate();return e&&this._showLoadPanel(),(0,b.z7)((null===n||void 0===n?void 0:n.complete)||n).done(e=>{if(e&&!e.isValid)return tt(),void t.resolve(!1);const{repeat:n}=this.form.formData,i=this._createAppointmentAdapter(this.form.formData),a=i.clone().calculateDates(this.scheduler.getTimeZoneCalculator(),"fromAppointment"),r=!n&&Boolean(a.recurrenceRule);this._addMissingDSTTime(i,a),r&&(a.recurrenceRule="");const o=a.source;switch(delete o.repeat,this.state.action){case yt.CREATE:this.scheduler.addAppointment(o).done(t.resolve);break;case yt.UPDATE:this.scheduler.updateAppointment(this.state.appointment.data,o).done(t.resolve);break;case yt.EXCLUDE_FROM_SERIES:this.scheduler.updateAppointment(this.state.excludeInfo.sourceAppointment,this.state.excludeInfo.updatedAppointment),this.scheduler.addAppointment(o).done(t.resolve)}t.done(()=>{tt(),this.state.lastEditData=o})}),t.promise()}_doneButtonClickHandler(e){e.cancel=!0,this.saveEditDataAsync()}saveEditDataAsync(){const e=new b.cY;return this._tryLockSaveChanges()&&(0,b.z7)(this.saveChangesAsync(!0)).done(()=>{if(this.state.lastEditData){const e=this._createAppointmentAdapter(this.state.lastEditData),{startDate:t,endDate:n,allDay:i}=e,a=t.getTime(),r=n.getTime(),o=i||r-a>=ft,s=this.scheduler.getResourceManager(),l=st(this.state.lastEditData,s.resources);this.scheduler.updateScrollPosition(t,l,o),this.state.lastEditData=null}this._unlockSaveChanges(),e.resolve()}),e.promise()}_showLoadPanel(){const e=this.popup.$overlayContent();et({container:e,position:{of:e}})}_tryLockSaveChanges(){return!1===this.state.saveChangesLocker&&(this.state.saveChangesLocker=!0,!0)}_unlockSaveChanges(){this.state.saveChangesLocker=!1}_addMissingDSTTime(e,t){const n=this.scheduler.getTimeZoneCalculator();t.startDate=this._addMissingDSTShiftToDate(n,e.startDate,t.startDate),t.endDate&&(t.endDate=this._addMissingDSTShiftToDate(n,e.endDate,t.endDate))}_addMissingDSTShiftToDate(e,t,n){var i,a;const r=null===(i=e.getOffsets(t))||void 0===i?void 0:i.common,o=null===(a=e.getOffsets(n))||void 0===a?void 0:a.common,s=r-o;return s?new Date(n.getTime()+s*mt("hour")):n}}n(34840);var Ct=n(22044),vt=n(18692),wt=n(92324),At=n(71791),St=n(29518),bt=n(89214),Tt=n(36947),xt=n(28299);const kt="dxListItemData",Et="dx-list-item",It="dxAppointmentSettings",Ot="vertical",Mt="horizontal",Rt=["day","week","workWeek"],Vt="dx-scheduler-fixed-appointments",Pt="dx-scheduler-appointment-reduced",Ht="dx-scheduler-appointment-reduced-icon",Wt="dx-scheduler-appointment-recurrence",$t="dx-scheduler-appointment-empty",Bt="dx-scheduler-all-day-appointment",Gt={head:"dx-scheduler-appointment-head",body:"dx-scheduler-appointment-body",tail:"dx-scheduler-appointment-tail"},Nt={horizontal:"dx-scheduler-appointment-horizontal",vertical:"dx-scheduler-appointment-vertical"},Ft="dx-scheduler-appointment-drag-source",zt="dx-scheduler-appointment",Lt={APPOINTMENT_CONTENT_DETAILS:"dx-scheduler-appointment-content-details",RECURRING_ICON:"dx-scheduler-appointment-recurrence-icon",APPOINTMENT_TITLE:"dx-scheduler-appointment-title",APPOINTMENT_DATE:"dx-scheduler-appointment-content-date",ALL_DAY_CONTENT:"dx-scheduler-appointment-content-allday",ARIA_DESCRIPTION:"dx-scheduler-appointment-aria-description",ITEM:"dx-scheduler-appointment",STRIP:"dx-scheduler-appointment-strip",AGENDA_MARKER:"dx-scheduler-agenda-appointment-marker",AGENDA_RESOURCE_LIST:"dx-scheduler-appointment-resource-list",AGENDA_RESOURCE_LIST_ITEM:"dx-scheduler-appointment-resource-item",AGENDA_RESOURCE_LIST_ITEM_VALUE:"dx-scheduler-appointment-resource-item-value"},Ut="dx-scheduler-last-in-date-agenda-appointment",Zt="dx-scheduler-appointment-has-resource-color",Yt="dx-scheduler-header-panel-current-time-cell",jt="dx-scheduler-virtual-cell",Xt="dx-scheduler-time-panel",qt="dx-scheduler-date-table",Kt="dx-scheduler-date-table-row",Qt="dx-scheduler-group-row",Jt="dx-scheduler-group-header-content",en="dx-scheduler-last-group-cell",tn="dx-scheduler-first-group-cell",nn=["dx-scheduler-group-column-count-one","dx-scheduler-group-column-count-two","dx-scheduler-group-column-count-three"];var an=["MO","TU","WE","TH","FR","SA","SU"],rn=function(){function e(e,t){if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return e.fromStr=function(t){return new e(an.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},e.prototype.toString=function(){var e=an[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},e.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},e}(),on=function(e){return null!==e&&void 0!==e},sn=function(e){return"number"===typeof e},ln=function(e){return"string"===typeof e&&an.includes(e)},un=Array.isArray,dn=function(e,t){void 0===t&&(t=e),1===arguments.length&&(t=e,e=0);for(var n=[],i=e;i<t;i++)n.push(i);return n},cn=function(e,t){var n=0,i=[];if(un(e))for(;n<t;n++)i[n]=[].concat(e);else for(;n<t;n++)i[n]=e;return i},hn=function(e){return un(e)?e:[e]};function pn(e,t,n){void 0===n&&(n=" ");var i=String(e);return t|=0,i.length>t?String(i):(t-=i.length,t>n.length&&(n+=cn(n,t/n.length)),n.slice(0,t)+String(i))}var mn=function(e,t,n){var i=e.split(t);return n?i.slice(0,n).concat([i.slice(n).join(t)]):i},gn=function(e,t){var n=e%t;return n*t<0?n+t:n},fn=function(e,t){return{div:Math.floor(e/t),mod:gn(e,t)}},Dn=function(e){return!on(e)||0===e.length},yn=function(e){return!Dn(e)},_n=function(e,t){return yn(e)&&-1!==e.indexOf(t)},Cn=function(e,t,n,i,a,r){return void 0===i&&(i=0),void 0===a&&(a=0),void 0===r&&(r=0),new Date(Date.UTC(e,t-1,n,i,a,r))},vn=[31,28,31,30,31,30,31,31,30,31,30,31],wn=864e5,An=9999,Sn=Cn(1970,1,1),bn=[6,0,1,2,3,4,5],Tn=function(e){return e%4===0&&e%100!==0||e%400===0},xn=function(e){return e instanceof Date},kn=function(e){return xn(e)&&!isNaN(e.getTime())},En=function(e,t){var n=e.getTime(),i=t.getTime(),a=n-i;return Math.round(a/wn)},In=function(e){return En(e,Sn)},On=function(e){return new Date(Sn.getTime()+e*wn)},Mn=function(e){var t=e.getUTCMonth();return 1===t&&Tn(e.getUTCFullYear())?29:vn[t]},Rn=function(e){return bn[e.getUTCDay()]},Vn=function(e,t){var n=Cn(e,t+1,1);return[Rn(n),Mn(n)]},Pn=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},Hn=function(e){var t=new Date(e.getTime());return t},Wn=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Hn(e[n]));return t},$n=function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},Bn=function(e,t){void 0===t&&(t=!0);var n=new Date(e);return[pn(n.getUTCFullYear().toString(),4,"0"),pn(n.getUTCMonth()+1,2,"0"),pn(n.getUTCDate(),2,"0"),"T",pn(n.getUTCHours(),2,"0"),pn(n.getUTCMinutes(),2,"0"),pn(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},Gn=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},Nn=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},Fn=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,i=new Date(Nn(e,n)),a=new Date(Nn(e,null!==t&&void 0!==t?t:"UTC")),r=a.getTime()-i.getTime();return new Date(e.getTime()-r)},zn=function(){function e(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,"between"===e?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):"before"===e?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):"after"===e&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return e.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if("between"===this.method){if(t)return!0;if(n)return!1}else if("before"===this.method){if(n)return!1}else if("after"===this.method)return!!t||(this.add(e),!1);return this.add(e)},e.prototype.add=function(e){return this._result.push(e),!0},e.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),Ln=zn,Un=(n(65200),n(41685),n(82617),n(66295),n(23133),function(e,t){return Un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Un(e,t)});function Zn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Un(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Yn=function(){return Yn=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Yn.apply(this,arguments)};Object.create;function jn(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Xn,qn=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.iterator=i,a}return Zn(t,e),t.prototype.add=function(e){return!!this.iterator(e,this._result.length)&&(this._result.push(e),!0)},t}(Ln),Kn=qn,Qn={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Jn=Qn,ei=function(e,t){return-1!==e.indexOf(t)},ti=function(e){return e.toString()},ni=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},ii=function(){function e(e,t,n,i){if(void 0===t&&(t=ti),void 0===n&&(n=Jn),void 0===i&&(i=ni),this.text=[],this.language=n||Jn,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),r=[].concat(this.options.bynmonthday);a.sort(function(e,t){return e-t}),r.sort(function(e,t){return t-e}),this.bymonthday=a.concat(r),this.bymonthday.length||(this.bymonthday=null)}if(on(this.origOptions.byweekday)){var o=un(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],s=String(o);this.byweekday={allWeeks:o.filter(function(e){return!e.n}),someWeeks:o.filter(function(e){return Boolean(e.n)}),isWeekdays:-1!==s.indexOf("MO")&&-1!==s.indexOf("TU")&&-1!==s.indexOf("WE")&&-1!==s.indexOf("TH")&&-1!==s.indexOf("FR")&&-1===s.indexOf("SA")&&-1===s.indexOf("SU"),isEveryDay:-1!==s.indexOf("MO")&&-1!==s.indexOf("TU")&&-1!==s.indexOf("WE")&&-1!==s.indexOf("TH")&&-1!==s.indexOf("FR")&&-1!==s.indexOf("SA")&&-1!==s.indexOf("SU")};var l=function(e,t){return e.weekday-t.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED))return!1;if(t.origOptions.until&&t.origOptions.count)return!1;for(var i in t.origOptions){if(ei(["dtstart","tzid","wkst","freq"],i))return!0;if(!ei(e.IMPLEMENTED[t.options.freq],i))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[la.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},e.prototype.MINUTELY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},e.prototype.DAILY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var e=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(1===this.options.interval&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},e.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},e.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},e.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(e){var t;e=parseInt(e.toString(),10);var n=this.gettext;if(-1===e)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},e.prototype.monthtext=function(e){return this.language.monthNames[e-1]},e.prototype.weekdaytext=function(e){var t=sn(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},e.prototype.plural=function(e){return e%100!==1},e.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},e.prototype.list=function(e,t,n,i){var a=this;void 0===i&&(i=","),un(e)||(e=[e]);var r=function(e,t,n){for(var i="",a=0;a<e.length;a++)0!==a&&(a===e.length-1?i+=" "+n+" ":i+=t+" "),i+=e[a];return i};t=t||function(e){return e.toString()};var o=function(e){return t&&t.call(a,e)};return n?r(e.map(o),i,n):e.map(o).join(i+" ")},e}(),ai=ii,ri=function(){function e(e){this.done=!0,this.rules=e}return e.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&null===this.symbol},e.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;for(var i in e=null,this.rules){n=this.rules[i];var a=n.exec(this.text);a&&(null===e||a[0].length>e[0].length)&&(e=a,t=i)}if(null!=e&&(this.text=this.text.substr(e[0].length),""===this.text&&(this.done=!0)),null==e)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===t);return this.symbol=t,this.value=e,!0},e.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},e}();function oi(e,t){void 0===t&&(t=Jn);var n={},i=new ri(t.tokens);return i.start(e)?(a(),n):null;function a(){i.expect("every");var e=i.acceptNumber();if(e&&(n.interval=parseInt(e[0],10)),i.isDone())throw new Error("Unexpected end");switch(i.symbol){case"day(s)":n.freq=la.DAILY,i.nextSymbol()&&(o(),c());break;case"weekday(s)":n.freq=la.WEEKLY,n.byweekday=[la.MO,la.TU,la.WE,la.TH,la.FR],i.nextSymbol(),o(),c();break;case"week(s)":n.freq=la.WEEKLY,i.nextSymbol()&&(r(),o(),c());break;case"hour(s)":n.freq=la.HOURLY,i.nextSymbol()&&(r(),c());break;case"minute(s)":n.freq=la.MINUTELY,i.nextSymbol()&&(r(),c());break;case"month(s)":n.freq=la.MONTHLY,i.nextSymbol()&&(r(),c());break;case"year(s)":n.freq=la.YEARLY,i.nextSymbol()&&(r(),c());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=la.WEEKLY;var t=i.symbol.substr(0,2).toUpperCase();if(n.byweekday=[la[t]],!i.nextSymbol())return;while(i.accept("comma")){if(i.isDone())throw new Error("Unexpected end");var a=l();if(!a)throw new Error("Unexpected symbol "+i.symbol+", expected weekday");n.byweekday.push(la[a]),i.nextSymbol()}o(),d(),c();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=la.YEARLY,n.bymonth=[s()],!i.nextSymbol())return;while(i.accept("comma")){if(i.isDone())throw new Error("Unexpected end");var u=s();if(!u)throw new Error("Unexpected symbol "+i.symbol+", expected month");n.bymonth.push(u),i.nextSymbol()}r(),c();break;default:throw new Error("Unknown symbol")}}function r(){var e=i.accept("on"),t=i.accept("the");if(e||t)do{var a=u(),r=l(),o=s();if(a)r?(i.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(la[r].nth(a))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(a),i.accept("day(s)"));else if(r)i.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(la[r]);else if("weekday(s)"===i.symbol)i.nextSymbol(),n.byweekday||(n.byweekday=[la.MO,la.TU,la.WE,la.TH,la.FR]);else if("week(s)"===i.symbol){i.nextSymbol();var d=i.acceptNumber();if(!d)throw new Error("Unexpected symbol "+i.symbol+", expected week number");n.byweekno=[parseInt(d[0],10)];while(i.accept("comma")){if(d=i.acceptNumber(),!d)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");n.byweekno.push(parseInt(d[0],10))}}else{if(!o)return;i.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(o)}}while(i.accept("comma")||i.accept("the")||i.accept("on"))}function o(){var e=i.accept("at");if(e)do{var t=i.acceptNumber();if(!t)throw new Error("Unexpected symbol "+i.symbol+", expected hour");n.byhour=[parseInt(t[0],10)];while(i.accept("comma")){if(t=i.acceptNumber(),!t)throw new Error("Unexpected symbol "+i.symbol+"; expected hour");n.byhour.push(parseInt(t[0],10))}}while(i.accept("comma")||i.accept("at"))}function s(){switch(i.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function l(){switch(i.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return i.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(i.symbol){case"last":return i.nextSymbol(),-1;case"first":return i.nextSymbol(),1;case"second":return i.nextSymbol(),i.accept("last")?-2:2;case"third":return i.nextSymbol(),i.accept("last")?-3:3;case"nth":var e=parseInt(i.value[1],10);if(e<-366||e>366)throw new Error("Nth out of range: "+e);return i.nextSymbol(),i.accept("last")?-e:e;default:return!1}}function d(){i.accept("on"),i.accept("the");var e=u();if(e){n.bymonthday=[e],i.nextSymbol();while(i.accept("comma")){if(e=u(),!e)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");n.bymonthday.push(e),i.nextSymbol()}}}function c(){if("until"===i.symbol){var e=Date.parse(i.text);if(!e)throw new Error("Cannot parse until date:"+i.text);n.until=new Date(e)}else i.accept("for")&&(n.count=parseInt(i.value[0],10),i.expect("number"))}}function si(e){return e<Xn.HOURLY}(function(e){e[e["YEARLY"]=0]="YEARLY",e[e["MONTHLY"]=1]="MONTHLY",e[e["WEEKLY"]=2]="WEEKLY",e[e["DAILY"]=3]="DAILY",e[e["HOURLY"]=4]="HOURLY",e[e["MINUTELY"]=5]="MINUTELY",e[e["SECONDLY"]=6]="SECONDLY"})(Xn||(Xn={}));var li=function(e,t){return void 0===t&&(t=Jn),new la(oi(e,t)||void 0)},ui=["count","until","interval","byweekday","bymonthday","bymonth"];ai.IMPLEMENTED=[],ai.IMPLEMENTED[Xn.HOURLY]=ui,ai.IMPLEMENTED[Xn.MINUTELY]=ui,ai.IMPLEMENTED[Xn.DAILY]=["byhour"].concat(ui),ai.IMPLEMENTED[Xn.WEEKLY]=ui,ai.IMPLEMENTED[Xn.MONTHLY]=ui,ai.IMPLEMENTED[Xn.YEARLY]=["byweekno","byyearday"].concat(ui);var di=function(e,t,n,i){return new ai(e,t,n,i).toString()},ci=ai.isFullyConvertible,hi=function(){function e(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},e}(),pi=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,a,r,o,s)||this;return l.year=t,l.month=n,l.day=i,l}return Zn(t,e),t.fromDate=function(e){return new this(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.valueOf()%1e3)},t.prototype.getWeekday=function(){return Rn(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(e){this.year+=e},t.prototype.addMonths=function(e){if(this.month+=e,this.month>12){var t=Math.floor(this.month/12),n=gn(this.month,12);this.month=n,this.year+=t,0===this.month&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(e,t){t>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-t))+7*e:this.day+=-(this.getWeekday()-t)+7*e,this.fixDay()},t.prototype.addDaily=function(e){this.day+=e,this.fixDay()},t.prototype.addHours=function(e,t,n){for(t&&(this.hour+=Math.floor((23-this.hour)/e)*e);;){this.hour+=e;var i=fn(this.hour,24),a=i.div,r=i.mod;if(a&&(this.hour=r,this.addDaily(a)),Dn(n)||_n(n,this.hour))break}},t.prototype.addMinutes=function(e,t,n,i){for(t&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/e)*e);;){this.minute+=e;var a=fn(this.minute,60),r=a.div,o=a.mod;if(r&&(this.minute=o,this.addHours(r,!1,n)),(Dn(n)||_n(n,this.hour))&&(Dn(i)||_n(i,this.minute)))break}},t.prototype.addSeconds=function(e,t,n,i,a){for(t&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/e)*e);;){this.second+=e;var r=fn(this.second,60),o=r.div,s=r.mod;if(o&&(this.second=s,this.addMinutes(o,!1,n,i)),(Dn(n)||_n(n,this.hour))&&(Dn(i)||_n(i,this.minute))&&(Dn(a)||_n(a,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var e=Vn(this.year,this.month-1)[1];if(!(this.day<=e))while(this.day>e){if(this.day-=e,++this.month,13===this.month&&(this.month=1,++this.year,this.year>An))return;e=Vn(this.year,this.month-1)[1]}}},t.prototype.add=function(e,t){var n=e.freq,i=e.interval,a=e.wkst,r=e.byhour,o=e.byminute,s=e.bysecond;switch(n){case Xn.YEARLY:return this.addYears(i);case Xn.MONTHLY:return this.addMonths(i);case Xn.WEEKLY:return this.addWeekly(i,a);case Xn.DAILY:return this.addDaily(i);case Xn.HOURLY:return this.addHours(i,t,r);case Xn.MINUTELY:return this.addMinutes(i,t,r,o);case Xn.SECONDLY:return this.addSeconds(i,t,r,o,s)}},t}(hi);function mi(e){for(var t=[],n=Object.keys(e),i=0,a=n;i<a.length;i++){var r=a[i];_n(sa,r)||t.push(r),xn(e[r])&&!kn(e[r])&&t.push(r)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return Yn({},e)}function gi(e){var t=Yn(Yn({},oa),mi(e));if(on(t.byeaster)&&(t.freq=la.YEARLY),!on(t.freq)||!la.FREQUENCIES[t.freq])throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date((new Date).setMilliseconds(0))),on(t.wkst)?sn(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=la.MO.weekday,on(t.bysetpos)){sn(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var i=t.bysetpos[n];if(0===i||!(i>=-366&&i<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(t.byweekno)||yn(t.byweekno)||yn(t.byyearday)||Boolean(t.bymonthday)||yn(t.bymonthday)||on(t.byweekday)||on(t.byeaster)))switch(t.freq){case la.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case la.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case la.WEEKLY:t.byweekday=[Rn(t.dtstart)];break}if(on(t.bymonth)&&!un(t.bymonth)&&(t.bymonth=[t.bymonth]),on(t.byyearday)&&!un(t.byyearday)&&sn(t.byyearday)&&(t.byyearday=[t.byyearday]),on(t.bymonthday))if(un(t.bymonthday)){var a=[],r=[];for(n=0;n<t.bymonthday.length;n++){i=t.bymonthday[n];i>0?a.push(i):i<0&&r.push(i)}t.bymonthday=a,t.bynmonthday=r}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);else t.bymonthday=[],t.bynmonthday=[];if(on(t.byweekno)&&!un(t.byweekno)&&(t.byweekno=[t.byweekno]),on(t.byweekday))if(sn(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(ln(t.byweekday))t.byweekday=[rn.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof rn)!t.byweekday.n||t.freq>la.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{var o=[],s=[];for(n=0;n<t.byweekday.length;n++){var l=t.byweekday[n];sn(l)?o.push(l):ln(l)?o.push(rn.fromStr(l).weekday):!l.n||t.freq>la.MONTHLY?o.push(l.weekday):s.push([l.weekday,l.n])}t.byweekday=yn(o)?o:null,t.bynweekday=yn(s)?s:null}else t.bynweekday=null;return on(t.byhour)?sn(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<la.HOURLY?[t.dtstart.getUTCHours()]:null,on(t.byminute)?sn(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<la.MINUTELY?[t.dtstart.getUTCMinutes()]:null,on(t.bysecond)?sn(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<la.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function fi(e){var t=e.dtstart.getTime()%1e3;if(!si(e.freq))return[];var n=[];return e.byhour.forEach(function(i){e.byminute.forEach(function(a){e.bysecond.forEach(function(e){n.push(new hi(i,a,e,t))})})}),n}function Di(e){var t=e.split("\n").map(_i).filter(function(e){return null!==e});return Yn(Yn({},t[0]),t[1])}function yi(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var i=n[1],a=n[2];return i&&(t.tzid=i),t.dtstart=Gn(a),t}function _i(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return Ci(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return Ci(e);case"DTSTART":return yi(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function Ci(e){var t=e.replace(/^RRULE:/i,""),n=yi(t),i=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return i.forEach(function(t){var i=t.split("="),a=i[0],r=i[1];switch(a.toUpperCase()){case"FREQ":n.freq=Xn[r.toUpperCase()];break;case"WKST":n.wkst=ra[r.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var o=vi(r),s=a.toLowerCase();n[s]=o;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=Ai(r);break;case"DTSTART":case"TZID":var l=yi(e);n.tzid=l.tzid,n.dtstart=l.dtstart;break;case"UNTIL":n.until=Gn(r);break;case"BYEASTER":n.byeaster=Number(r);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),n}function vi(e){if(-1!==e.indexOf(",")){var t=e.split(",");return t.map(wi)}return wi(e)}function wi(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function Ai(e){var t=e.split(",");return t.map(function(e){if(2===e.length)return ra[e];var t=e.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!t||t.length<3)throw new SyntaxError("Invalid weekday string: ".concat(e));var n=Number(t[1]),i=t[2],a=ra[i].weekday;return new rn(a,n)})}var Si=function(){function e(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=Bn(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:Fn(this.date,this.tzid)},e}();function bi(e){for(var t=[],n="",i=Object.keys(e),a=Object.keys(oa),r=0;r<i.length;r++)if("tzid"!==i[r]&&_n(a,i[r])){var o=i[r].toUpperCase(),s=e[i[r]],l="";if(on(s)&&(!un(s)||s.length)){switch(o){case"FREQ":l=la.FREQUENCIES[e.freq];break;case"WKST":l=sn(s)?new rn(s).toString():s.toString();break;case"BYWEEKDAY":o="BYDAY",l=hn(s).map(function(e){return e instanceof rn?e:un(e)?new rn(e[0],e[1]):new rn(e)}).toString();break;case"DTSTART":n=Ti(s,e.tzid);break;case"UNTIL":l=Bn(s,!e.tzid);break;default:if(un(s)){for(var u=[],d=0;d<s.length;d++)u[d]=String(s[d]);l=u.toString()}else l=String(s)}l&&t.push([o,l])}}var c=t.map(function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n.toString())}).join(";"),h="";return""!==c&&(h="RRULE:".concat(c)),[n,h].filter(function(e){return!!e}).join("\n")}function Ti(e,t){return e?"DTSTART"+new Si(new Date(e),t).toString():""}function xi(e,t){return Array.isArray(e)?!!Array.isArray(t)&&(e.length===t.length&&e.every(function(e,n){return e.getTime()===t[n].getTime()})):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var ki=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?Hn(t):Wn(t)),"all"===e?this.all=t:(n._value=t,this[e].push(n))},e.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],a=function(e){for(var n=0;n<i.length;n++){var a=i[n];if(!xi(t[a],e[a]))return!0}return!1},r=this[e];if("all"===e)n=this.all;else if(un(r))for(var o=0;o<r.length;o++){var s=r[o];if(!i.length||!a(s)){n=s._value;break}}if(!n&&this.all){var l=new Ln(e,t);for(o=0;o<this.all.length;o++)if(!l.accept(this.all[o]))break;n=l.getValue(),this._cacheAdd(e,n,t)}return un(n)?Wn(n):n instanceof Date?Hn(n):n},e}(),Ei=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn([],cn(1,31),!0),cn(2,28),!0),cn(3,31),!0),cn(4,30),!0),cn(5,31),!0),cn(6,30),!0),cn(7,31),!0),cn(8,31),!0),cn(9,30),!0),cn(10,31),!0),cn(11,30),!0),cn(12,31),!0),cn(1,7),!0),Ii=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn([],cn(1,31),!0),cn(2,29),!0),cn(3,31),!0),cn(4,30),!0),cn(5,31),!0),cn(6,30),!0),cn(7,31),!0),cn(8,31),!0),cn(9,30),!0),cn(10,31),!0),cn(11,30),!0),cn(12,31),!0),cn(1,7),!0),Oi=dn(1,29),Mi=dn(1,30),Ri=dn(1,31),Vi=dn(1,32),Pi=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn([],Vi,!0),Mi,!0),Vi,!0),Ri,!0),Vi,!0),Ri,!0),Vi,!0),Vi,!0),Ri,!0),Vi,!0),Ri,!0),Vi,!0),Vi.slice(0,7),!0),Hi=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn([],Vi,!0),Oi,!0),Vi,!0),Ri,!0),Vi,!0),Ri,!0),Vi,!0),Vi,!0),Ri,!0),Vi,!0),Ri,!0),Vi,!0),Vi.slice(0,7),!0),Wi=dn(-28,0),$i=dn(-29,0),Bi=dn(-30,0),Gi=dn(-31,0),Ni=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn([],Gi,!0),$i,!0),Gi,!0),Bi,!0),Gi,!0),Bi,!0),Gi,!0),Gi,!0),Bi,!0),Gi,!0),Bi,!0),Gi,!0),Gi.slice(0,7),!0),Fi=jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn(jn([],Gi,!0),Wi,!0),Gi,!0),Bi,!0),Gi,!0),Bi,!0),Gi,!0),Gi,!0),Bi,!0),Gi,!0),Bi,!0),Gi,!0),Gi.slice(0,7),!0),zi=[0,31,60,91,121,152,182,213,244,274,305,335,366],Li=[0,31,59,90,120,151,181,212,243,273,304,334,365],Ui=function(){for(var e=[],t=0;t<55;t++)e=e.concat(dn(7));return e}();function Zi(e,t){var n,i,a=Cn(e,1,1),r=Tn(e)?366:365,o=Tn(e+1)?366:365,s=In(a),l=Rn(a),u=Yn(Yn({yearlen:r,nextyearlen:o,yearordinal:s,yearweekday:l},Yi(e)),{wnomask:null});if(Dn(t.byweekno))return u;u.wnomask=cn(0,r+7);var d=n=gn(7-l+t.wkst,7);d>=4?(d=0,i=u.yearlen+gn(l-t.wkst,7)):i=r-d;for(var c=Math.floor(i/7),h=gn(i,7),p=Math.floor(c+h/4),m=0;m<t.byweekno.length;m++){var g=t.byweekno[m];if(g<0&&(g+=p+1),g>0&&g<=p){var f=void 0;g>1?(f=d+7*(g-1),d!==n&&(f-=7-n)):f=d;for(var D=0;D<7;D++)if(u.wnomask[f]=1,f++,u.wdaymask[f]===t.wkst)break}}if(_n(t.byweekno,1)){f=d+7*p;if(d!==n&&(f-=7-n),f<r)for(m=0;m<7;m++)if(u.wnomask[f]=1,f+=1,u.wdaymask[f]===t.wkst)break}if(d){var y=void 0;if(_n(t.byweekno,-1))y=-1;else{var _=Rn(Cn(e-1,1,1)),C=gn(7-_.valueOf()+t.wkst,7),v=Tn(e-1)?366:365,w=void 0;C>=4?(C=0,w=v+gn(_-t.wkst,7)):w=r-d,y=Math.floor(52+gn(w,7)/4)}if(_n(t.byweekno,y))for(f=0;f<d;f++)u.wnomask[f]=1}return u}function Yi(e){var t=Tn(e)?366:365,n=Cn(e,1,1),i=Rn(n);return 365===t?{mmask:Ei,mdaymask:Hi,nmdaymask:Fi,wdaymask:Ui.slice(i),mrange:Li}:{mmask:Ii,mdaymask:Pi,nmdaymask:Ni,wdaymask:Ui.slice(i),mrange:zi}}function ji(e,t,n,i,a,r){var o={lastyear:e,lastmonth:t,nwdaymask:[]},s=[];if(r.freq===la.YEARLY)if(Dn(r.bymonth))s=[[0,n]];else for(var l=0;l<r.bymonth.length;l++)t=r.bymonth[l],s.push(i.slice(t-1,t+1));else r.freq===la.MONTHLY&&(s=[i.slice(t-1,t+1)]);if(Dn(s))return o;o.nwdaymask=cn(0,n);for(l=0;l<s.length;l++)for(var u=s[l],d=u[0],c=u[1]-1,h=0;h<r.bynweekday.length;h++){var p=void 0,m=r.bynweekday[h],g=m[0],f=m[1];f<0?(p=c+7*(f+1),p-=gn(a[p]-g,7)):(p=d+7*(f-1),p+=gn(7-a[p]+g,7)),d<=p&&p<=c&&(o.nwdaymask[p]=1)}return o}function Xi(e,t){void 0===t&&(t=0);var n=e%19,i=Math.floor(e/100),a=e%100,r=Math.floor(i/4),o=i%4,s=Math.floor((i+8)/25),l=Math.floor((i-s+1)/3),u=Math.floor(19*n+i-r-l+15)%30,d=Math.floor(a/4),c=a%4,h=Math.floor(32+2*o+2*d-u-c)%7,p=Math.floor((n+11*u+22*h)/451),m=Math.floor((u+h-7*p+114)/31),g=(u+h-7*p+114)%31+1,f=Date.UTC(e,m-1,g+t),D=Date.UTC(e,0,1);return[Math.ceil((f-D)/864e5)]}var qi=function(){function e(e){this.options=e}return e.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Zi(e,n)),yn(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,r=i.mrange,o=i.wdaymask;this.monthinfo=ji(e,t,a,r,o,n)}on(n.byeaster)&&(this.eastermask=Xi(e,n.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[dn(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],a=cn(null,this.yearlen),r=n;r<i;r++)a[r]=r;return[a,n,i]},e.prototype.wdayset=function(e,t,n){for(var i=cn(null,this.yearlen+7),a=In(Cn(e,t,n))-this.yearordinal,r=a,o=0;o<7;o++)if(i[a]=a,++a,this.wdaymask[a]===this.options.wkst)break;return[i,r,a]},e.prototype.ddayset=function(e,t,n){var i=cn(null,this.yearlen),a=In(Cn(e,t,n))-this.yearordinal;return i[a]=a,[i,a,a+1]},e.prototype.htimeset=function(e,t,n,i){var a=this,r=[];return this.options.byminute.forEach(function(t){r=r.concat(a.mtimeset(e,t,n,i))}),$n(r),r},e.prototype.mtimeset=function(e,t,n,i){var a=this.options.bysecond.map(function(n){return new hi(e,t,n,i)});return $n(a),a},e.prototype.stimeset=function(e,t,n,i){return[new hi(e,t,n,i)]},e.prototype.getdayset=function(e){switch(e){case Xn.YEARLY:return this.ydayset.bind(this);case Xn.MONTHLY:return this.mdayset.bind(this);case Xn.WEEKLY:return this.wdayset.bind(this);case Xn.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(e){switch(e){case Xn.HOURLY:return this.htimeset.bind(this);case Xn.MINUTELY:return this.mtimeset.bind(this);case Xn.SECONDLY:return this.stimeset.bind(this)}},e}(),Ki=qi;function Qi(e,t,n,i,a,r){for(var o=[],s=0;s<e.length;s++){var l=void 0,u=void 0,d=e[s];d<0?(l=Math.floor(d/t.length),u=gn(d,t.length)):(l=Math.floor((d-1)/t.length),u=gn(d-1,t.length));for(var c=[],h=n;h<i;h++){var p=r[h];on(p)&&c.push(p)}var m=void 0;m=l<0?c.slice(l)[0]:c[l];var g=t[u],f=On(a.yearordinal+m),D=Pn(f,g);_n(o,D)||o.push(D)}return $n(o),o}function Ji(e,t){var n=t.dtstart,i=t.freq,a=t.interval,r=t.until,o=t.bysetpos,s=t.count;if(0===s||0===a)return na(e);var l=pi.fromDate(n),u=new Ki(t);u.rebuild(l.year,l.month);for(var d=aa(u,l,t);;){var c=u.getdayset(i)(l.year,l.month,l.day),h=c[0],p=c[1],m=c[2],g=ia(h,p,m,u,t);if(yn(o))for(var f=Qi(o,d,p,m,u,h),D=0;D<f.length;D++){var y=f[D];if(r&&y>r)return na(e);if(y>=n){var _=ta(y,t);if(!e.accept(_))return na(e);if(s&&(--s,!s))return na(e)}}else for(D=p;D<m;D++){var C=h[D];if(on(C))for(var v=On(u.yearordinal+C),w=0;w<d.length;w++){var A=d[w];y=Pn(v,A);if(r&&y>r)return na(e);if(y>=n){_=ta(y,t);if(!e.accept(_))return na(e);if(s&&(--s,!s))return na(e)}}}if(0===t.interval)return na(e);if(l.add(t,g),l.year>An)return na(e);si(i)||(d=u.gettimeset(i)(l.hour,l.minute,l.second,0)),u.rebuild(l.year,l.month)}}function ea(e,t,n){var i=n.bymonth,a=n.byweekno,r=n.byweekday,o=n.byeaster,s=n.bymonthday,l=n.bynmonthday,u=n.byyearday;return yn(i)&&!_n(i,e.mmask[t])||yn(a)&&!e.wnomask[t]||yn(r)&&!_n(r,e.wdaymask[t])||yn(e.nwdaymask)&&!e.nwdaymask[t]||null!==o&&!_n(e.eastermask,t)||(yn(s)||yn(l))&&!_n(s,e.mdaymask[t])&&!_n(l,e.nmdaymask[t])||yn(u)&&(t<e.yearlen&&!_n(u,t+1)&&!_n(u,-e.yearlen+t)||t>=e.yearlen&&!_n(u,t+1-e.yearlen)&&!_n(u,-e.nextyearlen+t-e.yearlen))}function ta(e,t){return new Si(e,t.tzid).rezonedDate()}function na(e){return e.getValue()}function ia(e,t,n,i,a){for(var r=!1,o=t;o<n;o++){var s=e[o];r=ea(i,s,a),r&&(e[s]=null)}return r}function aa(e,t,n){var i=n.freq,a=n.byhour,r=n.byminute,o=n.bysecond;return si(i)?fi(n):i>=la.HOURLY&&yn(a)&&!_n(a,t.hour)||i>=la.MINUTELY&&yn(r)&&!_n(r,t.minute)||i>=la.SECONDLY&&yn(o)&&!_n(o,t.second)?[]:e.gettimeset(i)(t.hour,t.minute,t.second,t.millisecond)}var ra={MO:new rn(0),TU:new rn(1),WE:new rn(2),TH:new rn(3),FR:new rn(4),SA:new rn(5),SU:new rn(6)},oa={freq:Xn.YEARLY,dtstart:null,interval:1,wkst:ra.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},sa=Object.keys(oa),la=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=!1),this._cache=t?null:new ki,this.origOptions=mi(e);var n=gi(e).parsedOptions;this.options=n}return e.parseText=function(e,t){return oi(e,t)},e.fromText=function(e,t){return li(e,t)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(e){return Ji(e,this.options)},e.prototype._cacheGet=function(e,t){return!!this._cache&&this._cache._cacheGet(e,t)},e.prototype._cacheAdd=function(e,t,n){if(this._cache)return this._cache._cacheAdd(e,t,n)},e.prototype.all=function(e){if(e)return this._iter(new Kn("all",{},e));var t=this._cacheGet("all");return!1===t&&(t=this._iter(new Ln("all",{})),this._cacheAdd("all",t)),t},e.prototype.between=function(e,t,n,i){if(void 0===n&&(n=!1),!kn(e)||!kn(t))throw new Error("Invalid date passed in to RRule.between");var a={before:t,after:e,inc:n};if(i)return this._iter(new Kn("between",a,i));var r=this._cacheGet("between",a);return!1===r&&(r=this._iter(new Ln("between",a)),this._cacheAdd("between",r,a)),r},e.prototype.before=function(e,t){if(void 0===t&&(t=!1),!kn(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return!1===i&&(i=this._iter(new Ln("before",n)),this._cacheAdd("before",i,n)),i},e.prototype.after=function(e,t){if(void 0===t&&(t=!1),!kn(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return!1===i&&(i=this._iter(new Ln("after",n)),this._cacheAdd("after",i,n)),i},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return bi(this.origOptions)},e.prototype.toText=function(e,t,n){return di(this,e,t,n)},e.prototype.isFullyConvertibleToText=function(){return ci(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=Xn.YEARLY,e.MONTHLY=Xn.MONTHLY,e.WEEKLY=Xn.WEEKLY,e.DAILY=Xn.DAILY,e.HOURLY=Xn.HOURLY,e.MINUTELY=Xn.MINUTELY,e.SECONDLY=Xn.SECONDLY,e.MO=ra.MO,e.TU=ra.TU,e.WE=ra.WE,e.TH=ra.TH,e.FR=ra.FR,e.SA=ra.SA,e.SU=ra.SU,e.parseString=Di,e.optionsToString=bi,e}();function ua(e,t,n,i,a,r){var o={},s=e.accept;function l(e,t){n.forEach(function(n){n.between(e,t,!0).forEach(function(e){o[Number(e)]=!0})})}a.forEach(function(e){var t=new Si(e,r).rezonedDate();o[Number(t)]=!0}),e.accept=function(e){var t=Number(e);return isNaN(t)?s.call(this,e):!(!o[t]&&(l(new Date(t-1),new Date(t+1)),!o[t]))||(o[t]=!0,s.call(this,e))},"between"===e.method&&(l(e.args.after,e.args.before),e.accept=function(e){var t=Number(e);return!!o[t]||(o[t]=!0,s.call(this,e))});for(var u=0;u<i.length;u++){var d=new Si(i[u],r).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(t){Ji(e,t.options)});var c=e._result;switch($n(c),e.method){case"all":case"between":return c;case"before":return c.length&&c[c.length-1]||null;case"after":default:return c.length&&c[0]||null}}var da={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function ca(e,t){var n=[],i=[],a=[],r=[],o=yi(e),s=o.dtstart,l=o.tzid,u=ya(e,t.unfold);return u.forEach(function(e){var t;if(e){var o=Da(e),s=o.name,u=o.parms,d=o.value;switch(s.toUpperCase()){case"RRULE":if(u.length)throw new Error("unsupported RRULE parm: ".concat(u.join(",")));n.push(Di(e));break;case"RDATE":var c=null!==(t=/RDATE(?:;TZID=([^:=]+))?/i.exec(e))&&void 0!==t?t:[],h=c[1];h&&!l&&(l=h),i=i.concat(Ca(d,u));break;case"EXRULE":if(u.length)throw new Error("unsupported EXRULE parm: ".concat(u.join(",")));a.push(Di(d));break;case"EXDATE":r=r.concat(Ca(d,u));break;case"DTSTART":break;default:throw new Error("unsupported property: "+s)}}}),{dtstart:s,tzid:l,rrulevals:n,rdatevals:i,exrulevals:a,exdatevals:r}}function ha(e,t){var n=ca(e,t),i=n.rrulevals,a=n.rdatevals,r=n.exrulevals,o=n.exdatevals,s=n.dtstart,l=n.tzid,u=!1===t.cache;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||i.length>1||a.length||r.length||o.length){var d=new wa(u);return d.dtstart(s),d.tzid(l||void 0),i.forEach(function(e){d.rrule(new la(ma(e,s,l),u))}),a.forEach(function(e){d.rdate(e)}),r.forEach(function(e){d.exrule(new la(ma(e,s,l),u))}),o.forEach(function(e){d.exdate(e)}),t.compatible&&t.dtstart&&d.rdate(s),d}var c=i[0]||{};return new la(ma(c,c.dtstart||t.dtstart||s,c.tzid||t.tzid||l),u)}function pa(e,t){return void 0===t&&(t={}),ha(e,ga(t))}function ma(e,t,n){return Yn(Yn({},e),{dtstart:t,tzid:n})}function ga(e){var t=[],n=Object.keys(e),i=Object.keys(da);if(n.forEach(function(e){_n(i,e)||t.push(e)}),t.length)throw new Error("Invalid options: "+t.join(", "));return Yn(Yn({},da),e)}function fa(e){if(-1===e.indexOf(":"))return{name:"RRULE",value:e};var t=mn(e,":",1),n=t[0],i=t[1];return{name:n,value:i}}function Da(e){var t=fa(e),n=t.name,i=t.value,a=n.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:i}}function ya(e,t){if(void 0===t&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);var n=e.split("\n"),i=0;while(i<n.length){var a=n[i]=n[i].replace(/\s+$/g,"");a?i>0&&" "===a[0]?(n[i-1]+=a.slice(1),n.splice(i,1)):i+=1:n.splice(i,1)}return n}function _a(e){e.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Ca(e,t){return _a(t),e.split(",").map(function(e){return Gn(e)})}function va(e){var t=this;return function(n){if(void 0!==n&&(t["_".concat(e)]=n),void 0!==t["_".concat(e)])return t["_".concat(e)];for(var i=0;i<t._rrule.length;i++){var a=t._rrule[i].origOptions[e];if(a)return a}}}var wa=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this,{},t)||this;return n.dtstart=va.apply(n,["dtstart"]),n.tzid=va.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return Zn(t,e),t.prototype._iter=function(e){return ua(e,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(e){Aa(e,this._rrule)},t.prototype.exrule=function(e){Aa(e,this._exrule)},t.prototype.rdate=function(e){Sa(e,this._rdate)},t.prototype.exdate=function(e){Sa(e,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(e){return pa(e.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(e){return pa(e.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(e){return new Date(e.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(e){return new Date(e.getTime())})},t.prototype.valueOf=function(){var e=[];return!this._rrule.length&&this._dtstart&&(e=e.concat(bi({dtstart:this._dtstart}))),this._rrule.forEach(function(t){e=e.concat(t.toString().split("\n"))}),this._exrule.forEach(function(t){e=e.concat(t.toString().split("\n").map(function(e){return e.replace(/^RRULE:/,"EXRULE:")}).filter(function(e){return!/^DTSTART/.test(e)}))}),this._rdate.length&&e.push(ba("RDATE",this._rdate,this.tzid())),this._exdate.length&&e.push(ba("EXDATE",this._exdate,this.tzid())),e},t.prototype.toString=function(){return this.valueOf().join("\n")},t.prototype.clone=function(){var e=new t(!!this._cache);return this._rrule.forEach(function(t){return e.rrule(t.clone())}),this._exrule.forEach(function(t){return e.exrule(t.clone())}),this._rdate.forEach(function(t){return e.rdate(new Date(t.getTime()))}),this._exdate.forEach(function(t){return e.exdate(new Date(t.getTime()))}),e},t}(la);function Aa(e,t){if(!(e instanceof la))throw new TypeError(String(e)+" is not RRule instance");_n(t.map(String),String(e))||t.push(e)}function Sa(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");_n(t.map(Number),Number(e))||(t.push(e),$n(t))}function ba(e,t,n){var i=!n||"UTC"===n.toUpperCase(),a=i?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),r=t.map(function(e){return Bn(e.valueOf(),i)}).join(",");return"".concat(a).concat(r)}var Ta=n(7686),xa=n(22984);const ka=[],Ea=["freq","interval","byday","byweekno","byyearday","bymonth","bymonthday","count","until","byhour","byminute","bysecond","bysetpos","wkst"],Ia=["DAILY","WEEKLY","MONTHLY","YEARLY","SECONDLY","MINUTELY","HOURLY"],Oa={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},Ma=e=>{const{until:t}=e;return void 0!==t&&!(t instanceof Date)},Ra=e=>{const{count:t}=e;return Boolean(t&&"string"===typeof t)},Va=e=>{const t=e.bymonthday;return Boolean(t&&isNaN(parseInt(t,10)))},Pa=e=>{const t=e.bymonth;return Boolean(t&&isNaN(parseInt(t,10)))},Ha=e=>{const{interval:t}=e;return Boolean(t&&"string"===typeof t)},Wa=e=>{const t=e.byday,n=te(e);let i=!1;return""===t&&(i=!0),(0,xa.__)(n,(e,t)=>{if(!Object.prototype.hasOwnProperty.call(Oa,t))return i=!0,!1}),i},$a=e=>{let t=!1;return(0,xa.__)(e,e=>{if(!Ea.includes(e))return t=!0,!1}),t},Ba=e=>{ka.includes(e)||(Ta.A.log("W0006",e),ka.push(e))},Ga=(e,t)=>!($a(e)||!e.freq||!Ia.includes(e.freq)||Ra(e)||Ha(e)||Wa(e)||Va(e)||Pa(e)||Ma(e))||(Ba(t),!1),Na=e=>{if(!e)return!1;const t=J(e),n=Ga(t,e);return n},{addOffsets:Fa}=R.X,za=["Etc/GMT-13","MIT","Pacific/Apia","Pacific/Enderbury","Pacific/Tongatapu","Etc/GMT-14","Pacific/Kiritimati"],La=e=>{const{start:t,min:n,max:i,appointmentTimezoneOffset:a}=e,r=Oe.A.getClientTimezoneOffset(t),o=Oe.A.getClientTimezoneOffset(n),s=Oe.A.getClientTimezoneOffset(i),l=e.end?e.end.getTime()-e.start.getTime():0,u=Fa(e.start,[-r,a]),d=e.min.getTime()-o+a,c=new Date(d-l),h=Fa(e.max,[-s,a]),p=Oe.A.getDiffBetweenClientTimezoneOffsets(e.start,u),m=p<0;return{startIntervalDate:u,minViewTime:d,minViewDate:c,maxViewDate:h,startIntervalDateDSTShift:m?0:p,appointmentDuration:l}},Ua=e=>{const t=Oe.A.getClientTimezoneOffset(e),n=Oe.A.getMachineTimezoneName(),i=[t],a=t/36e5<=-13,r=!n||za.some(e=>n.includes(e));return a&&r&&i.push(-864e5),i},Za=(e,t,n)=>{const i=Fa(n,[...Ua(n),-t.appointmentTimezoneOffset,e.startIntervalDateDSTShift]),a=Oe.A.getDiffBetweenClientTimezoneOffsets(i,n),r=a<0,o=Fa(i,[a]),s=Oe.A.getDiffBetweenClientTimezoneOffsets(o,i);return s&&r?new Date(o.getTime()+s):o},Ya=(e,t,n)=>{const i=la.parseString(String(e.rule)),{firstDayOfWeek:a}=e;if(i.dtstart=t,!i.wkst&&a){const e=[6,0,1,2,3,4,5];i.wkst=e[a]}n&&(i.until=Fa(n,[-Oe.A.getClientTimezoneOffset(n),e.appointmentTimezoneOffset]));const r=new wa,o=new la(i);if(r.rrule(o),e.exception){const t=e.exception,n=t.split(",").map(e=>Q(e)).filter(Boolean);n.forEach(t=>{const n="function"===typeof e.getExceptionDateTimezoneOffsets?e.getExceptionDateTimezoneOffsets(t):[-Oe.A.getClientTimezoneOffset(t),e.appointmentTimezoneOffset],i=Fa(t,n);r.exdate(i)})}return r},ja=e=>{if(!e.rule)return[];const t=J(e.rule),n=Ga(t,e.rule);if(!n)return[];const i=La(e),{startIntervalDate:a,maxViewDate:r,minViewDate:o,minViewTime:s,appointmentDuration:l}=i,u=Ya(e,a,t.until);return u.between(o,r,!0).filter(e=>e.getTime()+l>=s).map(t=>Za(i,e,t))},Xa=(e,t)=>{if(!t.length||0===Object.keys(e).length)return{groupTree:[],groupLeafs:[]};const n=[{}];let i=n;t.filter(t=>e[t]).forEach(t=>{const n=e[t],a=n.items.map(e=>({resourceText:e.text,resourceIndex:n.resourceIndex,grouped:{[n.resourceIndex]:e.id},children:[]})),r=[];i.forEach(e=>{e.children=a.map(t=>(0,d.A)({},t,{grouped:(0,d.A)({},t.grouped,e.grouped)})),r.push(...e.children)}),i=r});const a=i.map((e,t)=>(0,d.A)({},e,{groupIndex:t}));return{groupTree:n[0].children,groupLeafs:a}},qa=e=>e.map(e=>e.grouped),Ka=(e,t)=>{var n;return(null===(n=e.find(e=>e.groupIndex===t))||void 0===n?void 0:n.grouped)??{}},Qa=(e,t,n,i)=>{const a=Ka(t,i),r=e.map(e=>{var t;const i=a[e],r=n[e];return null===r||void 0===r||null===(t=r.items.find(e=>e.id===i))||void 0===t?void 0:t.text}).filter(Boolean);return r},Ja=(e,t,n)=>{const i=Ka(e,n);return Object.entries(t).filter(e=>{let[t]=e;return void 0!==i[t]}).map(e=>{let[t,n]=e;return(0,d.A)({},n,{items:n.items.filter(e=>e.id===i[t])})})},er=(e,t,n)=>{const{groups:i,resourceById:a,groupsLeafs:r}=n;if(i.length){const n=Ka(r,t.groupIndex);ct(e,a,n)}},tr=(e,t,n,i)=>{const{info:a}=t,r=(0,d.A)({},e);return n.set("startDate",r,new Date(a.sourceAppointment.startDate)),n.set("endDate",r,new Date(a.sourceAppointment.endDate)),r.displayStartDate=new Date(a.appointment.startDate),r.displayEndDate=new Date(a.appointment.endDate),er(r,t,i),r},nr=(e,t,n,i,a)=>{const r=n.get("startDate",e),o=n.get("endDate",e);if(!("info"in t))return(0,d.A)({},e,{displayStartDate:r,displayEndDate:o});if("isAgendaModel"in t&&!n.isRecurrent(e)){const n=(0,d.A)({},e,{displayStartDate:i.createDate(r,"toGrid"),displayEndDate:i.createDate(o,"toGrid")});return er(n,t,a),n}return tr(e,t,n,a)};var ir=n(96004),ar=n(33276),rr=n(47759),or=n(51177),sr=n(709),lr=sr.A;class ur extends lr{_getDefaultOptions(){return(0,d.A)({},super._getDefaultOptions(),{toolbarItems:[],showCloseButton:!1,enableBodyScroll:!0,showTitle:!1,title:null,titleTemplate:null,onTitleRendered:null,bottomTemplate:null,preventScrollEvents:!1,propagateOutsideClick:!0})}_render(){this.$element().addClass("dx-tooltip"),this.$wrapper().addClass("dx-tooltip-wrapper"),super._render()}_renderContent(){super._renderContent(),this._toggleAriaAttributes()}_toggleAriaDescription(e){const{target:t}=this.option(),n=(0,D.A)(t),i=e?this._contentId:void 0;(0,k.l6)(n.get(0))||this.setAria("describedby",i,n)}_toggleAriaAttributes(){this._contentId=`dx-${new rr.A}`,this.$overlayContent().attr({id:this._contentId}),this._toggleAriaDescription(!0)}}(0,m.A)("dxTooltip",ur);var dr=ur,cr=dr;let hr=null,pr=null;const mr=function(e){e=(0,T.X)({position:"top"},e);const{content:t}=e;delete e.content;const n=(0,D.A)("<div>").html(t).appendTo((0,Xe.Uq)());pr=function(){n.remove()},hr=new cr(n,e)},gr=function(){hr&&(pr(),hr=null)};function fr(e){return gr(),mr(e),hr.show()}function Dr(){return hr?hr.hide().done(gr).promise():(0,b.cY)().resolve()}const yr=e=>`${h.A.format(e,"monthAndDay")}, ${h.A.format(e,"year")}`,_r=e=>`${h.A.format(e,"shorttime")}`,Cr=(e,t)=>{var n;const i=e.dataAccessors.get(t,e.data);if(!i)return i;const a=new Date(i),r=null===(n=e.timeZoneCalculator)||void 0===n?void 0:n.createDate(a,"toGrid");return r??a},vr=e=>{const t=Cr(e,"startDate"),n=Cr(e,"endDate"),i=yr(t),a=yr(n),r=_r(t),o=_r(n),s=e.dataAccessors.get("allDay",e.data),l=p.A.format("dxScheduler-allDay");return i===a?s?`${i}, ${l}`:`${i}, ${r} - ${o}`:s?`${i} - ${a}, ${l}`:`${i}, ${r} - ${a}, ${o}`},wr=e=>{let{partIndex:t,partTotalCount:n}=e;return(0,k.O9)(t)?` (${t+1}/${n})`:""},Ar=e=>{const t=e.dataAccessors.get("text",e.data)??"",n=vr(e),i=wr(e);return`${t}: ${n}${i}`},Sr=e=>{const t=p.A.format("dxScheduler-editorLabelEndDate"),n=yr(Cr(e,"endDate"));return`${t}: ${n}`},br=e=>{if(!e.groupTexts.length)return"";const t=e.groupTexts.join(", ");return p.A.format("dxScheduler-appointmentAriaLabel-group",t)},Tr=async e=>{const t=e.getResourceManager(),n=await t.getAppointmentResourcesValues(e.data);return n.map(e=>`${e.label}: ${e.values.join(", ")}`)},xr=async e=>{const t=await Tr(e),n=[br(e),...t].filter(Boolean);return n.join("; ")},kr=(0,be.b4)(ir.A.enter,"dxSchedulerAppointment"),Er=(0,be.b4)(ir.A.leave,"dxSchedulerAppointment");class Ir extends ar.A{get coloredElement(){return this.$element()}get rawAppointment(){return this.option("data")}get dataAccessors(){return this.option("dataAccessors")}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{data:{},groupIndex:-1,groups:[],geometry:{top:0,left:0,width:0,height:0},allowDrag:!0,allowResize:!0,reduced:null,isCompact:!1,direction:"vertical",resizableConfig:{keepAspectRatio:!1},cellHeight:0,cellWidth:0,isDragSource:!1})}notifyObserver(e,t){this.invoke(e,...t)}invoke(e){const t=this.option("notifyScheduler");if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.invoke(e,...i)}}_optionChanged(e){switch(e.name){case"data":case"groupIndex":case"groupTexts":case"geometry":case"allowDrag":case"allowResize":case"reduced":case"sortedIndex":case"isCompact":case"direction":case"resizableConfig":case"cellHeight":case"cellWidth":this._invalidate();break;case"isDragSource":this._renderDragSourceClass();break;default:super._optionChanged(e)}}_getHorizontalResizingRule(){const e={head:this.option("rtlEnabled")?"right":"left",body:"",tail:this.option("rtlEnabled")?"left":"right"},t=this.option("getResizableStep"),n=t?t():0;return{handles:this.option("reduced")?e[this.option("reduced")]:"left right",minHeight:0,minWidth:this.invoke("getCellWidth"),step:n,roundStepValue:!1}}_getVerticalResizingRule(){const e=Math.round(this.invoke("getCellHeight"));return{handles:"top bottom",minWidth:0,minHeight:e,step:e,roundStepValue:!0}}_render(){super._render(),this._renderAppointmentGeometry(),this._renderAriaLabel(),this._renderEmptyClass(),this._renderReducedAppointment(),this._renderAllDayClass(),this._renderDragSourceClass(),this._renderDirection(),this.$element().data("dxAppointmentStartDate",this.option("startDate")),this.$element().attr("role","button"),this._renderRecurrenceClass(),this._renderResizable(),this._setResourceColor()}_setResourceColor(){const e={itemData:this.rawAppointment,groupIndex:this.option("groupIndex")??0},t=this.option("getResourceManager")();t.getAppointmentColor(e).then(e=>{e&&(this.coloredElement.css("backgroundColor",e),this.coloredElement.addClass(Zt))})}_renderAriaLabel(){const e=this.$element();e.attr("aria-label",Ar(this.option())),xr(this.option()).then(t=>{if(t){const n=`dx-${new rr.A}`,i=e.find(`.${Lt.ARIA_DESCRIPTION}`);i&&(e.attr("aria-describedby",n),i.text(t).attr("id",n))}})}_renderAppointmentGeometry(){const e=this.option("geometry"),t=this.$element();(0,Ct.Cy)(t,{top:e.top,left:e.left}),t.css({width:e.width<0?0:e.width,height:e.height<0?0:e.height})}_renderEmptyClass(){const e=this.option("geometry");(e.empty||this.option("isCompact"))&&this.$element().addClass($t)}_renderReducedAppointment(){const e=this.option("reduced");e&&(this.$element().toggleClass(Pt,!0).toggleClass(Gt[e],!0),this._renderAppointmentReducedIcon())}_renderAppointmentReducedIcon(){const e=(0,D.A)("<div>").addClass(Ht).appendTo(this.$element());Ae.A.off(e,kr),Ae.A.on(e,kr,()=>{fr({target:e,content:Sr(this.option())})}),Ae.A.off(e,Er),Ae.A.on(e,Er,()=>{Dr()})}_renderAllDayClass(){this.$element().toggleClass(Bt,Boolean(this.option("allDay")))}_renderDragSourceClass(){this.$element().toggleClass(Ft,Boolean(this.option("isDragSource")))}_renderRecurrenceClass(){const e=this.dataAccessors.get("recurrenceRule",this.rawAppointment);Na(e)&&this.$element().addClass(Wt)}_renderDirection(){this.$element().addClass(Nt[this.option("direction")])}_createResizingConfig(){const e="vertical"===this.option("direction")?this._getVerticalResizingRule():this._getHorizontalResizingRule();return this.invoke("isGroupedByDate")||(e.stepPrecision="strict"),e}_renderResizable(){this.option("allowResize")&&this._createComponent(this.$element(),or.A,(0,T.X)(this._createResizingConfig(),this.option("resizableConfig")))}_useTemplates(){return!1}}(0,m.A)("dxSchedulerAppointment",Ir);class Or extends Ir{get coloredElement(){return this.$element().find(`.${Lt.AGENDA_MARKER}`)}_renderResourceList(){const e=this.option("getResourceManager")();e.getAppointmentResourcesValues(this.rawAppointment).then(e=>{const t=this.$element().find(`.${Lt.APPOINTMENT_CONTENT_DETAILS}`),n=(0,D.A)("<div>").addClass(Lt.AGENDA_RESOURCE_LIST).appendTo(t);e.forEach(e=>{const t=(0,D.A)("<div>").addClass(Lt.AGENDA_RESOURCE_LIST_ITEM).appendTo(n);(0,D.A)("<div>").text(`${e.label}:`).appendTo(t),(0,D.A)("<div>").addClass(Lt.AGENDA_RESOURCE_LIST_ITEM_VALUE).text(e.values.join(", ")).appendTo(t)})})}_render(){super._render(),this._renderResourceList()}}const Mr=` ${p.A.format("dxScheduler-allDay")}: `,Rr=p.A.format("dxScheduler-appointmentAriaLabel-recurring"),Vr=(e,t)=>{const n=(0,D.A)(wt.A.createDocumentFragment());(0,D.A)("<div>").text(e.text).addClass(Lt.APPOINTMENT_TITLE).appendTo(n),t.html&&n.html(t.html);const i=(0,D.A)("<div>").addClass(Lt.APPOINTMENT_CONTENT_DETAILS).appendTo(n);return(0,D.A)("<div>").addClass(Lt.APPOINTMENT_DATE).text(e.formatDate).appendTo(i),t.isRecurrence&&(0,D.A)("<span>").addClass(`${Lt.RECURRING_ICON} dx-icon-repeat`).attr("aria-label",Rr).attr("role","img").appendTo(n),t.isAllDay&&(0,D.A)("<div>").text(Mr).addClass(Lt.ALL_DAY_CONTENT).prependTo(i),n},Pr=(e,t)=>{const n=(0,D.A)(wt.A.createDocumentFragment()),i=(0,D.A)("<div>").addClass("dx-scheduler-agenda-appointment-left-layout").appendTo(n),a=(0,D.A)("<div>").addClass("dx-scheduler-agenda-appointment-right-layout").appendTo(n),r=(0,D.A)("<div>").addClass(Lt.AGENDA_MARKER).appendTo(i);t.isRecurrence&&(0,D.A)("<span>").addClass(`${Lt.RECURRING_ICON} dx-icon-repeat`).attr("aria-label",Rr).appendTo(r),(0,D.A)("<div>").addClass(Lt.APPOINTMENT_TITLE).text(e.text).appendTo(a);const o=(0,D.A)("<div>").addClass(Lt.APPOINTMENT_CONTENT_DETAILS).appendTo(a);return(0,D.A)("<div>").addClass(Lt.APPOINTMENT_DATE).text(e.formatDate).appendTo(o),t.isAllDay&&(0,D.A)("<div>").text(Mr).addClass(Lt.ALL_DAY_CONTENT).prependTo(o),n};var Hr=n(45656);const Wr=Hr.s.dateToMilliseconds,$r=function(e,t,n,i){let{viewDataProvider:a}=e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=a.getCellData(t,n,i,o);return r||(s.endDate=R.X.addOffsets(s.startDate,[Wr("day")])),s},Br=e=>{const{cellHeight:t,cellWidth:n,relativeAppointmentRect:i,appointment:a,rtlEnabled:r}=e,o=Math.floor(i.top/t),s=Math.round(i.left/n);return $r(e,o,s,a.isOccupiedAllDay,a.isAllDay,r)},Gr=e=>{const{cellWidth:t,cellCountInRow:n,relativeAppointmentRect:i,appointment:a,handles:r}=e,o=Br(e),s=Math.round(i.width/t),l=o.index+(s-1);if(r.left)return{startDate:o.startDate,endDate:o.startDate>a.endDate?o.startDate:a.endDate};const u=Math.floor(l/n),d=l%n,c=$r(e,u,d,a.isOccupiedAllDay,a.isAllDay),{endDate:h}=c;return{startDate:h<a.startDate?h:a.startDate,endDate:h}},Nr=e=>{const{cellCountInRow:t,appointment:n,handles:i,cellWidth:a,relativeAppointmentRect:r}=e,o=Br(e);if(i.right){const i=o.index,s=Math.round(r.width/a),l=i-s+1,u=Math.floor(i/t),d=$r(e,u,l,n.isOccupiedAllDay,n.isAllDay);return{startDate:d.startDate,endDate:d.startDate>n.endDate?d.startDate:n.endDate}}const{endDate:s}=o;return{startDate:s<n.startDate?s:n.startDate,endDate:s}},Fr=(e,t)=>{const n=e.left-t.left,i=e.top-t.top,a=n<0?e.width+n:e.width,r=i<0?e.height+i:e.height;return{left:Math.max(0,n),top:Math.max(0,i),width:a,height:r}},zr=e=>{const{appointmentSettings:t,isVerticalGroupedWorkSpace:n,DOMMetaData:i}=e,a=t.allDay&&!n?[i.allDayPanelCellsMeta]:i.dateTableCellsMeta,{height:r,width:o}=a[t.rowIndex][t.columnIndex],s=a[t.rowIndex].length;return{cellWidth:o,cellHeight:r,cellCountInRow:s}},Lr=e=>{const{appointmentSettings:t}=e,n=Fr(e.appointmentRect,e.parentAppointmentRect),i=zr(e),a={startDate:t.info.sourceAppointment.startDate,endDate:t.info.sourceAppointment.endDate,isAllDay:Boolean(t.info.appointment.allDay),isOccupiedAllDay:Boolean(t.allDay)},r=(0,d.A)({},e,i,{appointment:a,relativeAppointmentRect:n});return e.rtlEnabled?Nr(r):Gr(r)},Ur=e=>{const t=new Map,n=e=>{if(!e.partTotalCount)return!0;const n=`${e.info.appointment.startDate.getTime()}${e.info.appointment.endDate.getTime()}`,i=t.get(n)??[];return!i.includes(e.itemData)&&(t.set(n,[...i,e.itemData]),!0)};return e.reduce((e,t)=>"items"in t?e+t.items.filter(n).length:"isAgendaModel"in t?e+1:"info"in t&&!n(t)?e:e+1,0)},Zr=e=>e.needToAdd;function Yr(e,t,n){const i=e.length,a=t.length,r=Array.from({length:i+1},()=>new Array(a+1).fill(0));for(let u=1;u<=i;u+=1){const i=e[u-1];for(let e=1;e<=a;e+=1)r[u][e]=n(i,t[e-1])?r[u-1][e-1]+1:Math.max(r[u-1][e],r[u][e-1])}const o=[];let s=i,l=a;while(s>0&&l>0)n(e[s-1],t[l-1])?(o.push({item:t[l-1]}),s-=1,l-=1):r[s-1][l]>=r[s][l-1]?(o.push({item:e[s-1],needToRemove:!0}),s-=1):(o.push({item:t[l-1],needToAdd:!0}),l-=1);while(s>0)o.push({item:e[s-1],needToRemove:!0}),s-=1;while(l>0)o.push({item:t[l-1],needToAdd:!0}),l-=1;return o.reverse(),o}const jr=e=>"isAgendaModel"in e?{}:"items"in e?{allDay:e.allDay,groupIndex:e.groupIndex,top:e.top,left:e.left,items:e.items.length}:{allDay:e.allDay,groupIndex:e.groupIndex,direction:e.direction,left:e.left,top:e.top,height:e.height,width:e.width,reduced:e.reduced,partIndex:e.partIndex,partTotalCount:e.partTotalCount,rowIndex:e.rowIndex,columnIndex:e.columnIndex},Xr=(e,t)=>{const n=t.getUpdatedAppointment();return n===e||t.getUpdatedAppointmentKeys().some(t=>e[t.key]===t.value)},qr=e=>(t,n)=>t.itemData===n.itemData&&!Xr(n.itemData,e)&&(0,v.RL)(jr(t),jr(n)),Kr=(e,t,n)=>Yr(e,t,qr(n)),Qr=e=>!A.A.sameDate(e.startDate,e.endDate),Jr=(e,t)=>{e.sort((e,n)=>{const i=t.get("startDate",e.settings||e),a=t.get("startDate",n.settings||n);return Math.sign(i.getTime()-a.getTime())})},eo=e=>Boolean(e&&e.is(":visible")&&!e.hasClass("dx-state-disabled")),to=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e-1;while(n>=0){const e=t[n];if(eo(e))return e;n-=1}},no=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e+1;while(n<t.length){const e=t[n];if(eo(e))return e;n+=1}},io="dx-scheduler-scrollable-appointments",ao=(0,be.b4)(vt.U,"dxSchedulerAppointment"),ro=A.A.dateToMilliseconds;class oo extends xt.A{constructor(){super(...arguments),this.renderedElementsBySortedIndex=[]}get isAgendaView(){return this.invoke("isCurrentViewAgenda")}get isVirtualScrolling(){return this.invoke("isVirtualScrolling")}get appointmentDataSource(){return this.option("getAppointmentDataSource")()}get dataAccessors(){return this.option("dataAccessors")}get appointmentsCount(){return Ur(this.option("items")??[])}getResourceManager(){return this.option("getResourceManager")()}option(e,t){return super.option(...arguments)}notifyObserver(e,t){const n=this.option("notifyScheduler");n&&n.invoke(e,t)}invoke(e){const t=this.option("notifyScheduler");if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.invoke(e,...i)}}_dispose(){clearTimeout(this._appointmentClickTimeout),super._dispose()}_supportedKeys(){const e=super._supportedKeys(),t=this._$currentAppointment;return(0,T.X)(e,{escape:function(){var e,n,i;this.resizeOccur&&(this.moveAppointmentBack(),this.resizeOccur=!1,null===(e=t.dxResizable("instance"))||void 0===e||e._detachEventHandlers(),null===(n=t.dxResizable("instance"))||void 0===n||n._attachEventHandlers(),null===(i=t.dxResizable("instance"))||void 0===i||i._toggleResizingClass(!1))}.bind(this),del:function(e){if(this.option("allowDelete")){e.preventDefault();const t=this._getItemData(e.target);this.notifyObserver("onDeleteButtonPress",{data:t,target:e.target})}}.bind(this),tab:function(e){const t=this._getNavigatableItems(),n=t.filter(".dx-state-focused");let i=n.data(It).sortedIndex,a=e.shiftKey?to(i,this.renderedElementsBySortedIndex):no(i,this.renderedElementsBySortedIndex);const r=t.length-1;(a||i>0&&e.shiftKey||i<r&&!e.shiftKey)&&(e.preventDefault(),a||(e.shiftKey?i--:i++,a=this._getNavigatableItemByIndex(i)),this._resetTabIndex(a),Ae.A.trigger(a,"focus"))}})}_getNavigatableItemByIndex(e){const t=this._getNavigatableItems();return t.filter((t,n)=>(0,At.p)(n,It).sortedIndex===e).eq(0)}_getNavigatableItems(){const e=this._itemElements().not(".dx-state-disabled"),t=this.$element().find(".dx-scheduler-appointment-collector");return e.add(t)}_resetTabIndex(e){this._focusTarget().attr("tabIndex",-1),e.attr("tabIndex",this.option("tabIndex"))}_moveFocus(){}_focusTarget(){return this._getNavigatableItems()}_renderFocusTarget(){const e=this._getNavigatableItemByIndex(0);this._resetTabIndex(e)}_focusInHandler(e){super._focusInHandler(e),this._$currentAppointment=(0,D.A)(e.target),this.option("focusedElement",(0,f.cc)((0,D.A)(e.target)))}_focusOutHandler(e){const t=this._getNavigatableItemByIndex(0);this.option("focusedElement",(0,f.cc)(t)),super._focusOutHandler(e)}_eventBindingTarget(){return this._itemContainer()}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{noDataText:null,activeStateEnabled:!0,hoverStateEnabled:!0,tabIndex:0,fixedContainer:null,allDayContainer:null,allowDrag:!0,allowResize:!0,allowAllDayResize:!0,onAppointmentDblClick:null,groups:[],resources:[]})}getItemsDiff(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.map(e=>{let{sortedIndex:t}=e;return this.renderedElementsBySortedIndex[t]}),i=Kr(e,t,this.appointmentDataSource);return i.filter(e=>!Zr(e)).forEach((e,t)=>{e.element=n[t]}),i}_optionChanged(e){switch(e.name){case"items":if(this._cleanFocusState(),this.isAgendaView)this.forceRepaintAllAppointments(e.value||[]);else{const t=this.getItemsDiff(e.previousValue,e.value);this.repaintAppointments(t)}this._attachAppointmentsEvents();break;case"fixedContainer":case"allDayContainer":case"onAppointmentDblClick":case"allowDelete":break;case"allowDrag":case"allowResize":case"allowAllDayResize":this._cleanFocusState(),this.forceRepaintAllAppointments(this.option("items")||[]),this._attachAppointmentsEvents();break;case"focusedElement":this._resetTabIndex((0,D.A)(e.value)),super._optionChanged(e);break;case"focusStateEnabled":this._clearDropDownItemsElements(),this.renderDropDownAppointments(),super._optionChanged(e);break;default:super._optionChanged(e)}}_applyFragment(e,t){e.children().length>0&&this._getAppointmentContainer(t).append(e)}forceRepaintAllAppointments(e){this.renderedElementsBySortedIndex=[],this._renderByFragments((t,n)=>{this._getAppointmentContainer(!0).html(""),this._getAppointmentContainer(!1).html(""),0===e.length&&this._cleanItemContainer(),e.forEach((e,i)=>{const a=e.allDay?n:t;this._renderItem(i,e,a)})})}repaintAppointments(e){this.renderedElementsBySortedIndex=[],this._renderByFragments((t,n)=>{const i=this.isAgendaView||!e.some(e=>void 0===e.needToAdd&&void 0===e.needToRemove);i&&(this._getAppointmentContainer(!0).html(""),this._getAppointmentContainer(!1).html("")),0===e.length&&this._cleanItemContainer(),e.forEach((e,a)=>{if(!i||!e.needToRemove){var r,o;if(e.needToRemove)return null===(r=e.element)||void 0===r||r.detach(),void(null===(o=e.element)||void 0===o||o.remove());if(e.needToAdd){const i=e.item.allDay?n:t;return void this._renderItem(a,e.item,i)}e.element&&(e.element.data(It,e.item),this.renderedElementsBySortedIndex[e.item.sortedIndex]=e.element)}})})}_renderByFragments(e){if(this.isVirtualScrolling){const t=(0,D.A)(wt.A.createDocumentFragment()),n=(0,D.A)(wt.A.createDocumentFragment());e(t,n),this._applyFragment(t,!1),this._applyFragment(n,!0)}else e(this._getAppointmentContainer(!1),this._getAppointmentContainer(!0))}_refreshActiveDescendant(){}_attachAppointmentsEvents(){this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent(),this._attachAppointmentDblClick(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents()}_clearDropDownItemsElements(){this.invoke("clearCompactAppointments")}_findItemElementByItem(e){const t=[],n=this;return this.itemElements().each(function(){const i=(0,D.A)(this);i.data(n._itemDataKey())===e&&t.push(i)}),t}_itemClass(){return zt}_itemContainer(){const e=super._itemContainer();let t=e;const n=this.option("allDayContainer");return n&&(t=e.add(n)),t}_cleanItemContainer(){super._cleanItemContainer();const e=this.option("allDayContainer");e&&e.empty()}_clean(){super._clean(),delete this._$currentAppointment,delete this._initialSize,delete this._initialCoordinates}_init(){super._init(),this.$element().addClass(io),this._preventSingleAppointmentClick=!1}_renderAppointmentTemplate(e,t,n){const i={isAllDay:t.allDay,isRecurrence:t.recurrenceRule,html:(0,k.Qd)(t)&&t.html?t.html:void 0};let{targetedAppointmentData:a}=n;this._currentAppointmentSettings&&"isAgendaModel"in this._currentAppointmentSettings&&(a=tr(this._currentAppointmentSettings.itemData,this._currentAppointmentSettings,this.dataAccessors,this.getResourceManager()));const r=this.invoke("createFormattedDateText",t,a,"TIME");e.append(this.isAgendaView?Pr(r,i):Vr(r,i)),this.isAgendaView||e.parent().prepend((0,D.A)("<div>").addClass(Lt.STRIP))}_executeItemRenderAction(e,t,n){const i=this._getItemRenderAction();i&&i(this.invoke("mapAppointmentFields",{itemData:t,itemElement:n})),delete this._currentAppointmentSettings}_itemClickHandler(e){super._itemClickHandler(e,{},{afterExecute:function(e){this._processItemClick(e.args[0].event)}.bind(this)})}_processItemClick(e){const t=(0,D.A)(e.currentTarget),n=this._getItemData(t);t.is(".dx-scheduler-appointment-collector")||("keydown"===e.type||(0,be._0)(e)?this.notifyObserver("showEditAppointmentPopup",{data:n,target:t}):this._appointmentClickTimeout=setTimeout(()=>{!this._preventSingleAppointmentClick&&(0,St.A1)(t)&&this.notifyObserver("showAppointmentTooltip",{data:n,target:t}),this._preventSingleAppointmentClick=!1},300))}_extendActionArgs(e){const t=super._extendActionArgs(e);return this.invoke("mapAppointmentFields",t)}_render(){super._render(),this._attachAppointmentDblClick()}_attachAppointmentDblClick(){const e=this,t=e._itemSelector(),n=this._itemContainer();Ae.A.off(n,ao,t),Ae.A.on(n,ao,t,t=>{e._itemDXEventHandler(t,"onAppointmentDblClick",{},{afterExecute(t){e._dblClickHandler(t.args[0].event)}})})}_dblClickHandler(e){const t=(0,D.A)(e.currentTarget),n=this._getItemData(t);clearTimeout(this._appointmentClickTimeout),this._preventSingleAppointmentClick=!0,this.notifyObserver("showEditAppointmentPopup",{data:n,target:t})}_renderItem(e,t,n){if("items"in t)return this.renderDropDownAppointment(n,t);this._currentAppointmentSettings=t;const i=super._renderItem(e,t.itemData,n);return i.data(It,t),-1!==t.sortedIndex&&(this.renderedElementsBySortedIndex||(this.renderedElementsBySortedIndex=[]),this.renderedElementsBySortedIndex[t.sortedIndex]=i),i}_getItemContent(e){e.data(It,this._currentAppointmentSettings);const t=super._getItemContent(e);return t}_createItemByTemplate(e,t){const{itemData:n,container:i,index:a}=t,r=(0,D.A)(i).parent();return r.prepend((0,D.A)("<span>").addClass(Lt.ARIA_DESCRIPTION).attr("hidden",!0)),e.render({model:{appointmentData:n,targetedAppointmentData:this.invoke("getTargetedAppointmentData",n,r)},container:i,index:a})}_getAppointmentContainer(e){const t=this.option("allDayContainer"),n=this.itemsContainer().not(t);return e&&t?t:n}_postprocessRenderItem(e){this.renderAppointment(e.itemElement,this._currentAppointmentSettings)}renderAppointment(e,t){e.data(It,t),this._applyResourceDataAttr(e),this.isAgendaView?this.renderAgendaAppointment(e,t):this.renderGeneralAppointment(e,t)}renderAgendaAppointment(e,t){const{groups:n,groupsLeafs:i,resourceById:a}=this.getResourceManager(),r={data:t.itemData,groupIndex:t.groupIndex,groupTexts:Qa(n,i,a,t.groupIndex),notifyScheduler:this.option("notifyScheduler"),geometry:t,allowResize:!1,allowDrag:!1,groups:this.option("groups"),dataAccessors:this.option("dataAccessors"),timeZoneCalculator:this.option("timeZoneCalculator"),getResourceManager:this.option("getResourceManager")};this._createComponent(e,Or,r)}renderGeneralAppointment(e,t){var n;const i=this.option("allowResize")&&(!(0,k.O9)(t.skipResizing)||(0,k.Kg)(t.skipResizing)),a=this.option("allowDrag"),{allDay:r}=t,{groups:o,groupsLeafs:s,resourceById:l}=this.getResourceManager(),u={data:t.itemData,groupIndex:t.groupIndex,groupTexts:Qa(o,s,l,t.groupIndex),notifyScheduler:this.option("notifyScheduler"),geometry:t,direction:t.direction||"vertical",allowResize:i,allowDrag:a,allDay:r,reduced:t.reduced,isCompact:t.isCompact,startDate:new Date(null===(n=t.info)||void 0===n?void 0:n.appointment.startDate),cellWidth:this.invoke("getCellWidth"),cellHeight:this.invoke("getCellHeight"),resizableConfig:this._resizableConfig(t.itemData,t),groups:this.option("groups"),partIndex:t.partIndex,partTotalCount:t.partTotalCount,dataAccessors:this.option("dataAccessors"),timeZoneCalculator:this.option("timeZoneCalculator"),getResizableStep:this.option("getResizableStep"),getResourceManager:this.option("getResourceManager")};this._createComponent(e,Ir,u)}_applyResourceDataAttr(e){const{resources:t}=this.getResourceManager(),n=this._getItemData(e),i=st(n,t);Object.entries(i).forEach(t=>{let[n,i]=t;if(i.length){const t=`data-${(0,v.l5)(n.toLowerCase())}-`;i.forEach(n=>e.attr(t+(0,v.l5)(n),!0))}})}_resizableConfig(e,t){return{area:this._calculateResizableArea(t,e),onResizeStart:function(e){if(this.resizeOccur=!0,this._$currentAppointment=(0,D.A)(e.element),this.invoke("needRecalculateResizableArea")){const t=this._calculateResizableArea(this._$currentAppointment.data(It),this._$currentAppointment.data("dxItemData"));e.component.option("area",t),e.component._renderDragOffsets(e.event)}this._initialSize={width:e.width,height:e.height},this._initialCoordinates=(0,Ct.x5)(this._$currentAppointment)}.bind(this),onResizeEnd:function(e){this.resizeOccur=!1,this._resizeEndHandler(e)}.bind(this)}}_calculateResizableArea(e,t){const n=this.$element().closest(".dx-scrollable-content");return this.invoke("getResizableAppointmentArea",{coordinates:{left:e.left,top:0,groupIndex:e.groupIndex},allDay:e.allDay})||n}_resizeEndHandler(e){const t=(0,D.A)(e.element),{allDay:n,info:i}=t.data(It),a=this._getItemData(t),r=this.invoke("getViewOffsetMs");let o;if(n)o=this.resizeAllDay(e);else{const t=this._getEndResizeAppointmentStartDate(e,a,i.appointment),{endDate:n}=i.appointment,s=R.X.addOffsets(t,[-r]),l=R.X.addOffsets(n,[-r]);o=this._getDateRange(e,s,l),o.startDate=R.X.addOffsets(o.startDate,[r]),o.endDate=R.X.addOffsets(o.endDate,[r])}this.updateResizedAppointment(t,o,this.dataAccessors,this.option("timeZoneCalculator"))}resizeAllDay(e){const t=(0,D.A)(e.element),n=this.option("timeZoneCalculator");return Lr({handles:e.handles,appointmentSettings:t.data(It),isVerticalGroupedWorkSpace:this.option("isVerticalGroupedWorkSpace")(),appointmentRect:(0,x.N)(t[0]),parentAppointmentRect:(0,x.N)(t.parent()[0]),viewDataProvider:this.option("getViewDataProvider")(),isDateAndTimeView:this.option("isDateAndTimeView")(),startDayHour:this.invoke("getStartDayHour"),endDayHour:this.invoke("getEndDayHour"),timeZoneCalculator:n,dataAccessors:this.dataAccessors,rtlEnabled:this.option("rtlEnabled"),DOMMetaData:this.option("getDOMElementsMetaData")(),viewOffset:this.invoke("getViewOffsetMs")})}updateResizedAppointment(e,t,n,i){const a=this._getItemData(e),r=new it(a,n).clone();r.startDate=new Date(t.startDate),r.endDate=new Date(t.endDate);const o=r.clone().calculateDates(i,"fromGrid").calculateDates(i,"toGrid"),s=r.startDate.getTime()-o.startDate.getTime(),l=r.endDate.getTime()-o.endDate.getTime();r.startDate=R.X.addOffsets(r.startDate,[s]),r.endDate=R.X.addOffsets(r.endDate,[l]);const u=r.calculateDates(i,"fromGrid").source;this.notifyObserver("updateAppointmentAfterResize",{target:a,data:u,$appointment:e})}_getEndResizeAppointmentStartDate(e,t,n){const i=this.option("timeZoneCalculator"),a=new it(t,this.dataAccessors);let{startDate:r}=n;const{startDateTimeZone:o,isRecurrent:s}=a,l=this.invoke("isAllDay",t);return e.handles.top||s||l||(r=i.createDate(a.startDate,"toGrid",o)),r}_getDateRange(e,t,n){const i=this._getItemData(e.element),a=this.invoke("getDeltaTime",e,this._initialSize,i),r=this.invoke("getRenderingStrategyDirection");let o=!1;const s=this.invoke("isAllDay",i),l=this.invoke("needCorrectAppointmentDates")&&!s;let u,d;return o="vertical"!==r||s?this.option("rtlEnabled")?e.handles.right:e.handles.left:e.handles.top,o?(u=l?this._correctStartDateByDelta(t,a):t.getTime()-a,u+=Oe.A.getTimezoneOffsetChangeInMs(t,n,u,n),d=n.getTime()):(u=t.getTime(),d=l?this._correctEndDateByDelta(n,a):n.getTime()+a,d-=Oe.A.getTimezoneOffsetChangeInMs(t,n,t,d)),{startDate:new Date(u),endDate:new Date(d)}}_correctEndDateByDelta(e,t){const n=this.invoke("getEndDayHour"),i=this.invoke("getStartDayHour"),a=new Date(e),r=new Date(e),o=new Date(e);r.setHours(i,0,0,0),a.setHours(n,0,0,0),o>a&&o.setHours(n,0,0,0);let s=o.getTime()+t;const l=(n-i)*ro("hour"),u=t>0?Math.ceil(t/l):Math.floor(t/l);if(s>a.getTime()||s<=r.getTime()){const e=a.getTime()-o.getTime(),n=t-e,r=new Date(o).setDate(o.getDate()+u),d=new Date(r);d.setHours(i,0,0,0),s=d.getTime()+n-l*(u-1)}return s}_correctStartDateByDelta(e,t){const n=this.invoke("getEndDayHour"),i=this.invoke("getStartDayHour"),a=new Date(e),r=new Date(e),o=new Date(e);r.setHours(i,0,0,0),a.setHours(n,0,0,0),o<r&&o.setHours(i,0,0,0);let s=o.getTime()-t;const l=(n-i)*ro("hour"),u=t>0?Math.ceil(t/l):Math.floor(t/l);if(s<r.getTime()||s>=a.getTime()){const e=o.getTime()-r.getTime(),i=t-e,a=new Date(o.setDate(o.getDate()-u));a.setHours(n,0,0,0),s=a.getTime()-i+l*(u-1)}return s}renderDropDownAppointments(){this._renderByFragments((e,t)=>{const n=this.option("items")||[];n.forEach(n=>{if("items"in n){const i=n.allDay?t:e;this.renderDropDownAppointment(i,n)}})})}renderDropDownAppointment(e,t){const n=t.items,i=[];n.forEach(e=>{const n={itemData:e.itemData,groupIndex:t.groupIndex,groups:this.option("groups")},a=this.getResourceManager();i.push({appointment:e.itemData,targetedAppointment:nr(e.itemData,e,this.dataAccessors,this.option("timeZoneCalculator"),a),color:a.getAppointmentColor(n),settings:e})});const a=this.invoke("renderCompactAppointments",{$container:e,coordinates:{top:t.top,left:t.left},items:i,buttonColor:i[0].color,sortedIndex:t.sortedIndex,width:t.width,height:t.height,onAppointmentClick:this.option("onItemClick"),allowDrag:this.option("allowDrag"),isCompact:t.isCompact});return this.renderedElementsBySortedIndex[t.sortedIndex]=a,a}_sortAppointmentsByStartDate(e){return Jr(e,this.dataAccessors)}_processRecurrenceAppointment(e,t,n){const i=this.dataAccessors.get("recurrenceRule",e),a={parts:[],indexes:[]};if(i){const r=e.settings||e,o=this.dataAccessors.get("startDate",r),s=this.dataAccessors.get("startDateTimeZone",e),l=this.dataAccessors.get("endDate",r),u=l.getTime()-o.getTime(),d=this.dataAccessors.get("recurrenceException",e),c=this.invoke("getStartViewDate"),h=this.invoke("getEndViewDate"),p=this.option("timeZoneCalculator"),m=ja({rule:i,exception:d,start:o,end:l,min:c,max:h,appointmentTimezoneOffset:p.getOriginStartDateOffsetInMs(o,s,!1)}),g=e.settings?1:m.length;for(let t=0;t<g;t++){const i=(0,T.X)({},e,!0);if(m[t]){const e=this._applyStartDateToObj(m[t],{});this._applyEndDateToObj(new Date(m[t].getTime()+u),e),i.settings=e}else i.settings=r;a.parts.push(i),n||this._processLongAppointment(i,a)}a.indexes.push(t)}return a}_processLongAppointment(e,t){const n=this.splitAppointmentByDay(e),i=n.length,a=this.invoke("getEndViewDate").getTime(),r=this.invoke("getStartViewDate").getTime(),o=this.option("timeZoneCalculator");if(t=t||{parts:[]},i>1){(0,T.X)(e,n[0]);for(let e=1;e<i;e++){let i=this.dataAccessors.get("startDate",n[e].settings);i=o.createDate(i.getTime(),"toGrid"),i<a&&i>r&&t.parts.push(n[e])}}return t}_reduceRecurrenceAppointments(e,t){(0,bt.__)(e,(e,n)=>{t.splice(n-e,1)})}_combineAppointments(e,t){t.length&&e.push(...t),this._sortAppointmentsByStartDate(e)}_applyStartDateToObj(e,t){return this.dataAccessors.set("startDate",t,e),t}_applyEndDateToObj(e,t){return this.dataAccessors.set("endDate",t,e),t}moveAppointmentBack(e){const t=this._$currentAppointment,n=this._initialSize,i=this._initialCoordinates;e&&(this._removeDragSourceClassFromDraggedAppointment(),(0,k.uF)(e.cancel)?e.cancel.resolve(!0):e.cancel=!0),t&&!e&&(i&&((0,Ct.Cy)(t,i),delete this._initialSize),n&&((0,xe.iT)(t,n.width),(0,xe.NG)(t,n.height),delete this._initialCoordinates))}focus(){if(this._$currentAppointment){const e=(0,f.cc)(this._$currentAppointment);this.option("focusedElement",e),Ae.A.trigger(e,"focus")}}splitAppointmentByDay(e){const t=e.settings||e,n=this.dataAccessors.get("startDate",t);let i=A.A.makeDate(n),a=A.A.makeDate(this.dataAccessors.get("endDate",t));const r=this.invoke("getEndViewDate"),o=this.invoke("getStartDayHour"),s=this.invoke("getEndDayHour"),l=this.option("timeZoneCalculator"),u=new it(e,this.dataAccessors),d=Qr(u),c=[];i=l.createDate(i,"toGrid"),a=l.createDate(a,"toGrid"),i.getHours()<=s&&i.getHours()>=o&&!d&&(c.push(this._applyStartDateToObj(new Date(i),{appointmentData:e})),i.setDate(i.getDate()+1));while(d&&i.getTime()<a.getTime()&&i<r){const t=new Date(i),r=new Date(i);this._checkStartDate(t,n,o),this._checkEndDate(r,a,s);const l=(0,Tt.tm)({},e,!0),u={};this._applyStartDateToObj(t,u),this._applyEndDateToObj(r,u),l.settings=u,c.push(l),i=A.A.trimTime(i),i.setDate(i.getDate()+1),i.setHours(o)}return c}_checkStartDate(e,t,n){!A.A.sameDate(e,t)||e.getHours()<=n?e.setHours(n,0,0,0):e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}_checkEndDate(e,t,n){!A.A.sameDate(e,t)||e.getHours()>n?e.setHours(n,0,0,0):e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}_removeDragSourceClassFromDraggedAppointment(){const e=this._itemElements().filter(`.${Ft}`);e.each((e,t)=>{const n=(0,D.A)(t).dxSchedulerAppointment("instance");n.option("isDragSource",!1)})}_setDragSourceAppointment(e,t){const n=this._findItemElementByItem(e),{startDate:i,endDate:a}=t.info.sourceAppointment,{groupIndex:r}=t;n.forEach(e=>{const{info:t,groupIndex:n}=e.data(It),{startDate:o,endDate:s}=t.sourceAppointment,l=e.dxSchedulerAppointment("instance"),u=i.getTime()===o.getTime()&&a.getTime()===s.getTime()&&r===n;l.option("isDragSource",u)})}updateResizableArea(){const e=this.$element().find(".dx-scheduler-appointment.dx-resizable"),t=(0,v.VM)(e,e=>{const t=(0,D.A)(e),n=t.dxResizable("instance"),{area:i,handles:a}=n.option();return("right left"===a||"left right"===a)&&(0,k.Qd)(i)});(0,bt.__)(t,(e,t)=>{const n=(0,D.A)(t),i=(0,Ct.x5)(n),a=this._getItemData(n),r=this._calculateResizableArea({left:i.left},a);n.dxResizable("instance").option("area",r)})}}(0,m.A)("dxSchedulerAppointments",oo);var so=oo;class lo{constructor(e){let{scheduler:t}=e;this.scheduler=t}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.scheduler.fire(e,...n)}}var uo=lo,co=(n(12438),n(61636)),ho=n(7698),po=n(57064);const mo="dx-scheduler-navigator-calendar",go="dx-scheduler-navigator-calendar-popover";class fo extends ho.A{show(e){this._isMobileLayout()||this._overlay.option("target",e),this._overlay.show()}hide(){this._overlay.hide()}_keyboardHandler(e){var t;null===(t=this._calendar)||void 0===t||t._keyboardHandler(e)}_init(){super._init(),this.$element()}_render(){super._render(),this._renderOverlay()}_renderOverlay(){this.$element().addClass(go);const e=this._isMobileLayout(),t=e?Ge.A:lr;this._overlay=this._createComponent(this.$element(),t,{contentTemplate:()=>this._createOverlayContent(),onShown:()=>this._calendar.focus(),defaultOptionsRules:[{device:()=>e,options:{fullScreen:!0,showCloseButton:!1,toolbarItems:[{shortcut:"cancel"}],_ignorePreventScrollEventsDeprecation:!0,preventScrollEvents:!1,enableBodyScroll:!1}}]})}_createOverlayContent(){const e=(0,D.A)("<div>").addClass(mo);if(this._calendar=this._createComponent(e,s.A,this._getCalendarOptions()),this._isMobileLayout()){const t=this._createScrollable(e);return t.$element()}return e}_createScrollable(e){const t=this._createComponent("<div>",po.A,{height:"auto",direction:"both"});return t.$content().append(e),t}_optionChanged(e){var t;let{name:n,value:i}=e;"value"===n&&(null===(t=this._calendar)||void 0===t||t.option("value",i))}_getCalendarOptions(){return{value:this.option("value"),min:this.option("min"),max:this.option("max"),firstDayOfWeek:this.option("firstDayOfWeek"),focusStateEnabled:this.option("focusStateEnabled"),onValueChanged:this.option("onValueChanged"),skipFocusCheck:!0,tabIndex:this.option("tabIndex")}}_isMobileLayout(){return!Te.A.current().generic}}(0,m.A)("dxSchedulerCalendarPopup",fo);var Do,yo=n(50846);!function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(Do||(Do={}));const _o={container:"dx-scheduler-navigator",previousButton:"dx-scheduler-navigator-previous",calendarButton:"dx-scheduler-navigator-caption",nextButton:"dx-scheduler-navigator-next"},Co={previousButton:"prev",nextButton:"next",calendarButton:"dateInterval"},vo=[Co.previousButton,Co.nextButton,Co.calendarButton],{trimTime:wo}=A.A,Ao=e=>{const t=e.option("min");if(!R.X.isValidDate(t))return!1;let n=new Date(t);const i=e._getCaption();n=wo(n);const a=e._getNextDate(Do.Left,i.endDate);return a<n},So=e=>{const t=e.option("max");if(!R.X.isValidDate(t))return!1;const n=new Date(t),i=e._getCaption();n.setHours(23,59,59);const a=e._getNextDate(Do.Right,i.startDate);return a>n},bo=e=>{const t=p.A.format("dxScheduler-navigationPrevious");return{key:Co.previousButton,icon:"chevronprev",elementAttr:{class:_o.previousButton,"aria-label":t},clickHandler:()=>e._updateDateByDirection(Do.Left),onContentReady:t=>{const n=t.component;n.option("disabled",Ao(e)),e._addEvent("min",()=>{n.option("disabled",Ao(e))}),e._addEvent("currentDate",()=>{n.option("disabled",Ao(e))}),e._addEvent("startViewDate",()=>{n.option("disabled",Ao(e))})}}},To=e=>({key:Co.calendarButton,text:e.captionText,elementAttr:{class:_o.calendarButton},clickHandler:t=>e._showCalendar(t),onContentReady:t=>{const n=t.component;e._addEvent("currentView",()=>{n.option("text",e.captionText)}),e._addEvent("currentDate",()=>{n.option("text",e.captionText)}),e._addEvent("startViewDate",()=>{n.option("text",e.captionText)}),e._addEvent("views",()=>{n.option("text",e.captionText)}),e._addEvent("firstDayOfWeek",()=>{n.option("text",e.captionText)})}}),xo=e=>{const t=p.A.format("dxScheduler-navigationNext");return{key:Co.nextButton,icon:"chevronnext",elementAttr:{class:_o.nextButton,"aria-label":t},clickHandler:()=>e._updateDateByDirection(Do.Right),onContentReady:t=>{const n=t.component;n.option("disabled",So(e)),e._addEvent("min",()=>{n.option("disabled",So(e))}),e._addEvent("currentDate",()=>{n.option("disabled",So(e))}),e._addEvent("startViewDate",()=>{n.option("disabled",So(e))})}}},ko=(e,t)=>{const n=(0,Z.Nt)()?"text":"contained",i=(0,yo.X)(!0,{},{location:"before",name:"dateNavigator",widget:"dxButtonGroup",cssClass:_o.container,options:{stylingMode:n,selectionMode:"none"}},t),a=i.options,{onItemClick:r}=a;return a.items=(a.items??vo).map(t=>{switch(t){case Co.previousButton:return bo(e);case Co.nextButton:return xo(e);case Co.calendarButton:return To(e);default:return t}}),a.onItemClick=e=>{var t,n;null===(t=(n=e.itemData).clickHandler)||void 0===t||t.call(n,e),null===r||void 0===r||r(e)},i};var Eo=n(96846);const{correctDateWithUnitBeginning:Io,getFirstWeekDate:Oo,getLastMonthDay:Mo,addDateInterval:Ro}=A.A,{format:Vo}=h.A,Po={milliseconds:1},Ho={days:1},Wo={days:7},$o=6,Bo=0,Go=e=>Ro(e,Po,-1),No=e=>Ro(e,Po,1),Fo=e=>Ro(e,Ho,1),zo=e=>Ro(e,Wo,1),Lo=e=>{const t=Mo(e);return Ro(e,{days:t},1)},Uo=e=>[$o,Bo].includes(e.getDay()),Zo=e=>{let t=new Date(e);while(Uo(t))t=Fo(t);return t},Yo=e=>{let t=new Date(e),n=0;while(n<5)Uo(t)||n++,t=Fo(t);return t},jo=(e,t)=>Ro(e,{days:t},1),Xo=e=>{const{date:t,step:n,firstDayOfWeek:i}=e;switch(n){case"day":case"week":case"month":return Io(t,n,!1,i);case"workWeek":const e=Oo(t,i);return Zo(e);case"agenda":return new Date(t)}},qo=(e,t)=>{const{intervalCount:n,step:i,agendaDuration:a}=t;let r,o,s=new Date(e);for(let l=0;l<n;l++)r=s,o=Qo(r,i,a),s=Jo(o,i);return o},Ko=e=>{const t=Xo(e),n=qo(t,e);return{startDate:t,endDate:n}},Qo=(e,t,n)=>{let i;switch(t){case"day":i=Fo(e);break;case"week":i=zo(e);break;case"month":i=Lo(e);break;case"workWeek":i=Yo(e);break;case"agenda":i=jo(e,n)}return Go(i)},Jo=(e,t)=>{let n=No(e);if("workWeek"===t)while(Uo(n))n=Fo(n);return n},es=(e,t)=>{const{date:n,step:i,intervalCount:a,agendaDuration:r}=e;let o;switch(i){case"day":o=Number(a);break;case"week":case"workWeek":o=7*a;break;case"agenda":o=r;break;case"month":return ts(n,a,t)}return Ro(n,{days:o},t)},ts=(e,t,n)=>{const i=e.getDate(),a=new Date(new Date(e.getTime()).setDate(1)),r=new Date(a.setMonth(a.getMonth()+t*n)),o=Mo(r),s=i<o?i:o,l=new Date(new Date(e.getTime()).setDate(s)),u=new Date(l.setMonth(l.getMonth()+t*n));return u},ns=e=>{const t=e?"abbreviated":"wide",n=h.A.getMonthNames(t);return e=>{const t=Vo(e,"day"),i=n[e.getMonth()];return`${t} ${i}`}},is=e=>{const t=h.A.getMonthNames("abbreviated"),n=t[e.getMonth()],i=Vo(e,"year");return`${n} ${i}`},as=e=>t=>{const n=ns(e),i=n(t),a=Vo(t,"year");return`${i} ${a}`},rs=(e,t)=>{const n=Vo(e,as(!0)),i=Vo(t,as(!0));return`${n}-${i}`},os=(e,t,n)=>{const i=e.getMonth()!==t.getMonth(),a=i||n,r=i?ns(a):"d",o=Vo(e,r),s=Vo(t,as(a));return`${o}-${s}`},ss=(e,t,n)=>{const i="agenda"===t&&n,a=ns(i),r=a(e),o=Vo(e,"year");return`${r} ${o}`},ls=(e,t,n)=>{const i=e.getFullYear()!==t.getFullYear();return i?rs(e,t):os(e,t,n)},us=(e,t)=>{if(A.A.sameMonth(e,t))return String(Vo(e,"monthandyear")??"");const n=A.A.sameYear(e,t),i=n?h.A.getMonthNames("abbreviated")[e.getMonth()]:is(e),a=is(t);return`${i}-${a}`},ds=(e,t,n,i)=>A.A.sameDate(e,t)?ss(e,i,n):"month"===i?us(e,t):ls(e,t,n),cs=(e,t,n)=>{const{startDate:i,endDate:a}=Ko(e);let r=ds(i,a,t,e.step);return(0,k.Tn)(n)&&(r=n({startDate:i,endDate:a,text:r})),{startDate:i,endDate:a,text:r}},hs={day:"day",week:"week",workWeek:"workWeek",month:"month",timelineDay:"day",timelineWeek:"week",timelineWorkWeek:"workWeek",timelineMonth:"month",agenda:"agenda"},ps=e=>(0,k.Gv)(e)?e.name??e.type:e,ms=e=>e.name||p.A.format(`dxScheduler-switcher${(0,Eo.PT)(e.type,!0)}`),gs=e=>e.map(e=>(0,d.A)({},e,{name:ps(e),text:ms(e)})),fs=e=>hs[e],Ds=(e,t)=>1===e.length&&ps(e[0])===t,ys={container:"dx-scheduler-view-switcher",dropDownButton:"dx-scheduler-view-switcher-dropdown-button",dropDownButtonContent:"dx-scheduler-view-switcher-dropdown-button-content"},_s=e=>{const t=gs(e.option("views")),n=ps(e.option("currentView")),i=t.some(e=>e.name===n);return{selectedView:i?n:void 0,views:t}},Cs=(e,t)=>{const{selectedView:n,views:i}=_s(e),a=(0,Z.Ft)()?"outlined":"contained";return(0,d.A)({widget:"dxButtonGroup",locateInMenu:"auto",location:"after",name:"viewSwitcher",cssClass:ys.container,options:{items:i,keyExpr:"name",selectedItemKeys:[n],stylingMode:a,onItemClick:t=>{e._updateCurrentView(t.itemData)},onContentReady:t=>{const n=t.component;e._addEvent("currentView",e=>{n.option("selectedItemKeys",[ps(e)])})}}},t)},vs=(e,t)=>{const{selectedView:n,views:i}=_s(e),a=Ds(i,n);return(0,d.A)({widget:"dxDropDownButton",locateInMenu:"never",location:"after",name:"viewSwitcher",cssClass:ys.container,options:{items:i,useSelectMode:!0,keyExpr:"name",selectedItemKey:n,displayExpr:"text",showArrowIcon:!a,elementAttr:{class:ys.dropDownButton},onItemClick:t=>{e._updateCurrentView(t.itemData)},onContentReady:t=>{const n=t.component;e._addEvent("currentView",t=>{const i=e.option("views");n.option("showArrowIcon",!Ds(i,t.name)),n.option("selectedItemKey",ps(t))})},dropDownOptions:{onShowing:e=>{a&&(e.cancel=!0)},width:"max-content",_wrapperClassExternal:ys.dropDownButtonContent}}},t)},ws=(e,t)=>(0,yo.X)(!0,{},{location:"before",locateInMenu:"auto",widget:"dxButton",cssClass:"dx-scheduler-today",options:{text:p.A.format("dxScheduler-navigationToday"),icon:"today",stylingMode:"outlined",type:"normal",onClick(){e._updateCurrentDate(e.option("indicatorTime")??new Date)}}},t),As={component:"dx-scheduler-header",invisible:"dx-state-invisible"},Ss={today:"today",dateNavigator:"dateNavigator",viewSwitcher:"viewSwitcher"};class bs extends ho.A{get captionText(){return this._getCaption().text}getIntervalOptions(e){const t=this.option("currentView"),n=fs(t.type),i=this.option("firstDayOfWeek");return{date:e,step:n,firstDayOfWeek:i,intervalCount:t.intervalCount,agendaDuration:t.agendaDuration}}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{_useShortDateFormat:!Te.A.real().generic||Te.A.isSimulator()})}_createEventMap(){this.eventMap=new Map([["currentView",[]],["views",[]],["currentDate",[this._getCalendarOptionUpdater("value")]],["min",[this._getCalendarOptionUpdater("min")]],["max",[this._getCalendarOptionUpdater("max")]],["tabIndex",[this.repaint.bind(this)]],["focusStateEnabled",[this.repaint.bind(this)]],["useDropDownViewSwitcher",[this.repaint.bind(this)]],["indicatorTime",[]]])}_addEvent(e,t){this.eventMap.has(e)||this.eventMap.set(e,[]);const n=this.eventMap.get(e);this.eventMap.set(e,[...n,t])}_optionChanged(e){const{name:t,value:n}=e;if(this.eventMap.has(t)){const e=this.eventMap.get(t);e.forEach(e=>{e(n)})}}onToolbarOptionChanged(e,t){const n=(0,w.u7)(e),i=e.replace(/^toolbar\./,"");switch(this.option(e,t),this._toggleVisibility(),!0){case"toolbar"===e:this.repaint();break;case"toolbar.items"===e:this._toolbar.option("items",t.map(e=>this._parseItem(e)));break;case"items"===n[1]&&3===n.length:this._toolbar.option(i,this._parseItem(t));break;default:this._toolbar.option(i,t)}}_init(){super._init(),this._createEventMap(),this.$element().addClass(As.component)}_render(){super._render(),this._createEventMap(),this._renderToolbar(),this._toggleVisibility()}_renderToolbar(){const e=this._createToolbarConfig(),t=(0,D.A)("<div>");t.appendTo(this.$element()),this._toolbar=this._createComponent(t,co.A,e)}_toggleVisibility(){const e=this.option("toolbar"),t=e.visible||void 0===e.visible&&e.items.length;t?this.$element().removeClass(As.invisible):this.$element().addClass(As.invisible)}_createToolbarConfig(){const e=this.option("toolbar"),t=e.items.map(e=>this._parseItem(e));return(0,d.A)({},e,{items:t})}_parseItem(e){const t="string"===typeof e?e:e.name,n="string"===typeof e?{}:e;if(t)switch(t){case Ss.today:return ws(this,n);case Ss.viewSwitcher:return this.option("useDropDownViewSwitcher")?vs(this,n):Cs(this,n);case Ss.dateNavigator:return this._renderCalendar(),ko(this,n);default:Ta.A.log(`Unknown default element type: ${t}`)}return(0,T.X)(!0,{},e)}_callEvent(e,t){if(this.eventMap.has(e)){const n=this.eventMap.get(e);n.forEach(e=>e(t))}}_updateCurrentView(e){this.option("onCurrentViewChange")(e.name)}_updateCalendarValueAndCurrentDate(e){this._updateCurrentDate(e),this._calendar.option("value",e)}_updateCurrentDate(e){this.option("onCurrentDateChange")(e),this._callEvent("currentDate",e)}_renderCalendar(){this._calendar=this._createComponent("<div>",fo,{value:this.option("currentDate"),min:this.option("min"),max:this.option("max"),firstDayOfWeek:this.option("firstDayOfWeek"),focusStateEnabled:this.option("focusStateEnabled"),tabIndex:this.option("tabIndex"),onValueChanged:e=>{this._updateCurrentDate(e.value),this._calendar.hide()}}),this._calendar.$element().appendTo(this.$element())}_getCalendarOptionUpdater(e){return t=>{this._calendar&&this._calendar.option(e,t)}}_getNextDate(e,t){const n=t??this.option("currentDate"),i=this.getIntervalOptions(n);return es(i,e)}_getDisplayedDate(){var e;const t=new Date(this.option("startViewDate")),n="month"===(null===(e=this.option("currentView"))||void 0===e?void 0:e.type);return n?zo(t):t}_getCaptionOptions(){let e=this.option("currentDate");return this.option("startViewDate")&&(e=this._getDisplayedDate()),e=A.A.trimTime(e),this.getIntervalOptions(e)}_getCaption(){const e=this._getCaptionOptions(),t=this.option("customizeDateNavigatorText"),n=this.option("_useShortDateFormat");return cs(e,Boolean(n),t)}_updateDateByDirection(e){const t=this._getNextDate(e);this._updateCalendarValueAndCurrentDate(t)}_showCalendar(e){this._calendar.show(e.element)}_hideCalendar(){this._calendar.hide()}}(0,m.A)("dxSchedulerHeader",bs);var Ts=n(6815),xs=n(98793);const ks="dx-scheduler-appointment-collector",Es=`${ks}-compact`,Is=`${ks}-content`;class Os{constructor(e){this.instance=e,this.elements=[]}render(e){const{isCompact:t,items:n}=e,i=this._createTemplate(n.length,t),a=this._createCompactButton(i,e),r=a.$element();return this.elements.push(r),r.data("items",n),r}clear(){this.elements.forEach(e=>{e.detach(),e.remove()}),this.elements=[]}_onButtonClick(e,t){const n=(0,D.A)(e.element);this.instance.showAppointmentTooltipCore(n,n.data("items"),this._getExtraOptionsForTooltip(t,n))}_getExtraOptionsForTooltip(e,t){return{clickEvent:this._clickEvent(e.onAppointmentClick).bind(this),dragBehavior:e.allowDrag&&this._createTooltipDragBehavior(t).bind(this),dropDownAppointmentTemplate:this.instance.option().dropDownAppointmentTemplate,isButtonClick:!0,_loopFocus:!0}}_clickEvent(e){return t=>{const n=this.instance._createEventArgs(t);e(n)}}_createTooltipDragBehavior(e){return t=>{const n=(0,D.A)(t.element),i=(0,D.A)(this.instance.element()),a=this.instance.getWorkSpace(),r=(0,Ct.x5)(e),o={filter:`.${Et}`,isSetCursorOffset:!0,initialPosition:r,getItemData:e=>{var t;return null===(t=(0,D.A)(e).data(kt))||void 0===t?void 0:t.appointment},getItemSettings:(e,t)=>t.itemSettings};a._createDragBehaviorBase(n,i,o)}}_setPosition(e,t){(0,Ct.Cy)(e,{top:t.top,left:t.left})}_createCompactButton(e,t){const n=this._createCompactButtonElement(t);return this.instance._createComponent(n,xs.A,{type:"default",width:t.width,height:t.height,onClick:e=>this._onButtonClick(e,t),template:this._renderTemplate(e,t.items,t.isCompact)})}_createCompactButtonElement(e){let{isCompact:t,$container:n,coordinates:i,sortedIndex:a,items:r}=e;const o=this._getDateText(r[0].appointment),s=(0,D.A)("<div>").addClass(ks).attr("aria-roledescription",o).toggleClass(Es,t).appendTo(n);return s.data(It,{sortedIndex:a}),this._setPosition(s,i),s}_renderTemplate(e,t,n){return new Ts.l(i=>e.render({model:{appointmentCount:t.length,items:t.map(e=>e.appointment),isCompact:n},container:i.container}))}_createTemplate(e,t){return this._initButtonTemplate(e,t),this.instance._getAppointmentTemplate("appointmentCollectorTemplate")}_initButtonTemplate(e,t){this.instance._templateManager.addDefaultTemplates({appointmentCollector:new Ts.l(n=>this._createButtonTemplate(e,(0,D.A)(n.container),t))})}_createButtonTemplate(e,t,n){const i=n?e:p.A.getFormatter("dxScheduler-moreAppointments")(e);return t.append((0,D.A)("<span>").text(i)).addClass(Is)}_localizeDate(e){return`${h.A.format(e,"monthAndDay")}, ${h.A.format(e,"year")}`}_getStartDate(e){const t=e.startDate;return t?new Date(t):null}_getEndDate(e){const t=e.endDate;return t?new Date(t):null}_getDateText(e){const t=this.instance._dataAccessors.get("startDate",e),n=this.instance._dataAccessors.get("endDate",e),i=t?this._localizeDate(t):"",a=n?this._localizeDate(n):"",r=i===a?`${i}`:`${i} - ${a}`;return`${r}`}}const Ms=e=>{const{startDate:t,endDate:n,allDay:i,format:a}=e,r=a||Rs(t,n,i);return Vs(t,n,r)},Rs=(e,t,n,i)=>n?"DATE":i&&A.A.sameDate(e,t)?"TIME":"DATETIME",Vs=(e,t,n)=>{const i=e.getDate()===t.getDate();switch(n){case"DATETIME":return[h.A.format(e,"monthandday")," ",h.A.format(e,"shorttime")," - ",i?"":`${h.A.format(t,"monthandday")} `,h.A.format(t,"shorttime")].join("");case"TIME":return`${h.A.format(e,"shorttime")} - ${h.A.format(t,"shorttime")}`;case"DATE":return`${h.A.format(e,"monthandday")}${i?"":` - ${h.A.format(t,"monthandday")}`}`;default:return}},Ps=A.A.dateToMilliseconds,Hs=(e,t,n)=>{const i=n||2,a=t.width;return Math.round((e.width-a)/i)},Ws=(e,t,n)=>{let{cellSize:i,cellDurationInMinutes:a}=n;const r=e.width-t.width,o=Ps("minute")*Math.round(r*a/i.width);return o},$s=(e,t,n)=>{let{cellSize:i,cellDurationInMinutes:a}=n;const r=e.height-t.height,o=Ps("minute")*Math.round(r*a/i.height);return o},Bs=(e,t,n)=>{const{viewType:i,resizableStep:a,isAllDay:r}=n;switch(!0){case["timelineMonth","month"].includes(i)||Boolean(r):return Hs(e,t,a)*Ps("day");case"agenda"===i:return 0;case Rt.includes(i)&&!r:return $s(e,t,n);default:return Ws(e,t,n)}},Gs={dataAccessors:{getAppointmentSettings:e=>(0,D.A)(e).data(It)},DOM:{getHeaderHeight:e=>e?e._$element&&parseInt((0,xe.P$)(e._$element),10):0},renovation:{renderComponent:(e,t,n,i,a)=>{let r=e[i];if(r){const e=r.$element(),t=e.get(0).style,{height:n}=t,{width:i}=t;r.option(a),n&&(0,xe.k$)(e,n),i&&(0,xe.zj)(e,i)}else{const o=(0,f.cc)(t);r=e._createComponent(o,n,a),e[i]=r}}}};n(64727);const Ns={DAY:"day",WEEK:"week",WORK_WEEK:"workWeek",MONTH:"month",TIMELINE_DAY:"timelineDay",TIMELINE_WEEK:"timelineWeek",TIMELINE_WORK_WEEK:"timelineWorkWeek",TIMELINE_MONTH:"timelineMonth",AGENDA:"agenda"},Fs=Object.values(Ns),zs=(e,t)=>({groupOrientation:t,intervalCount:1,type:e}),Ls={day:zs("day","horizontal"),week:zs("week","horizontal"),workWeek:zs("workWeek","horizontal"),month:zs("month","horizontal"),timelineDay:zs("timelineDay","vertical"),timelineWeek:zs("timelineWeek","vertical"),timelineWorkWeek:zs("timelineWorkWeek","vertical"),timelineMonth:zs("timelineMonth","vertical"),agenda:{agendaDuration:7,intervalCount:1,type:"agenda"}},Us=A.A.dateToMilliseconds,Zs=(e,t)=>Math.floor((t.getTime()-e.getTime())/Us("hour")),Ys=(e,t)=>{const n=A.A.trimTime(e),i=A.A.trimTime(t);return i.setDate(i.getDate()+1),[n,i]},js=(e,t)=>{const{startDate:n,endDate:i,allDay:a}=e;switch(t){case"hidden":return!1;case"allDay":return a;default:return!!a||!!(0,k.O9)(i)&&Zs(n,i)>=24}},Xs=e=>{switch(null===e||void 0===e?void 0:e.length){case 1:return nn[0];case 2:return nn[1];case 3:return nn[2];default:return}},qs=(e,t)=>{const n=new Date(e);return(0,k.O9)(t)?(n.setHours(t,t%1*60,0,0),n):n},Ks=(e,t)=>t-e,Qs=(e,t)=>{const n=Math.floor(t),i=Oe.A.isTimezoneChangeInDate(e);return i&&n!==e.getHours()?A.A.dateToMilliseconds("hour"):0},Js=(e,t)=>{let{startViewDate:n,startDayHour:i,cellIndexShift:a,viewOffset:r}=t;const o=R.X.addOffsets(e,[-r]),s=Oe.A.isTimezoneChangeInDate(o);if(!s)return e;const l=new Date(new Date(n).setDate(n.getDate()+2)),u=Qs(n,i);return R.X.addOffsets(l,[r,a,-u])},el=e=>e[e.length-1].length,tl=(e,t)=>e??el(t),nl=(e,t,n,i,a)=>{const r=i(e,t,a);return h.A.format(r,n)},il=(e,t)=>t===Ot&&e>0,al=(e,t)=>{const n=il(e,t);return n?1:e},rl=[Ns.TIMELINE_DAY,Ns.TIMELINE_WEEK,Ns.TIMELINE_WORK_WEEK,Ns.TIMELINE_MONTH],ol=e=>Boolean(e&&rl.includes(e)),sl=e=>e!==Ns.TIMELINE_MONTH&&e!==Ns.MONTH,ll=e=>{switch(e){case Ns.TIMELINE_DAY:case Ns.TIMELINE_WEEK:case Ns.TIMELINE_WORK_WEEK:case Ns.TIMELINE_MONTH:case Ns.MONTH:return!0;default:return!1}},ul=(e,t,n,i)=>i>0?A.A.dateInRange(e,t,new Date(n.getTime()-1)):A.A.dateInRange(e,n,t,"date"),dl=(e,t)=>1===e.getDate()&&t>1,cl=(e,t,n,i)=>{if(!e)return new Date(t);let a=A.A.trimTime(i);const r=a.getTime()<=t.getTime()?1:-1;let o=new Date(a.getTime()+n*r);while(!ul(t,a,o,r))a=o,o=new Date(a.getTime()+n*r);return r>0?a:o},hl=(e,t,n)=>il(e,t)&&n,pl=e=>e,ml=(e,t,n,i)=>{switch(e){case"month":return 36e5*Ks(t,n);case"timelineMonth":return A.A.dateToMilliseconds("day");default:return 36e5*i}},gl=(e,t,n)=>t*n+e,fl=e=>e.length,Dl=(e,t)=>e??fl(t),yl=(e,t)=>{const n=Oe.A.getDateWithoutTimezoneChange(e);return n.setHours(t),n},_l=(e,t)=>e&&t,Cl=(e,t)=>t&&void 0!==e?e.toString():"0",vl=(e,t)=>{const n=e??new Date;return(null===t||void 0===t?void 0:t.createDate(n,"toGrid"))||n},wl=e=>(0,k.O9)(e)?e:h.A.firstDayOfWeekIndex(),Al=(e,t)=>t===Mt&&e>0,Sl=(e,t,n)=>{const i=Al(e,t);return n&&i},bl=(e,t,n,i)=>{const a=n&&!i.viewType.includes("timeline");let r=0;const o=new Date(e);o.setDate(o.getDate()+1),o.setHours(0,0,0,0);const s=new Date(t);s.setHours(0,0,0,0);const{startDayHour:l,endDayHour:u}=i.getViewOptions(),d=a?24:u-l;while(o<s)i.isSkippedDate(o)&&(r+=d),o.setDate(o.getDate()+1);const c=e.getHours(),h=t.getHours()+t.getTime()%36e5/36e5;if(i.isSkippedDate(e))switch(!0){case a:r+=24;break;case c<l:r+=d;break;case c<u:r+=u-c}if(i.isSkippedDate(t))switch(!0){case a:r+=24;break;case h>u:r+=d;break;case h>l:r+=h-l}return r},Tl=e=>{const t=e.getDay();return 6===t||0===t},xl=e=>2*Math.floor(e/7),kl=(e,t)=>[...new Array(t)].reduce((t,n,i)=>e.map((e,n)=>{const a=t[n]||[];return[...a,...e.map((t,n)=>(0,d.A)({},t,{key:`${t.key}_group_by_date_${i}`,isFirstGroupCell:0===n,isLastGroupCell:n===e.length-1}))]}),[]),El=e=>(0,k.Gv)(e)?JSON.stringify(e):String(e),Il=(e,t,n,i)=>{let a=1,r=e.map(e=>{const t=[],{resourceName:n,resourceIndex:i,items:r,data:o}=e;for(let s=0;s<a;s+=1)t.push(...r.map((e,t)=>{let{id:a,text:r,color:l}=e;return{id:a,text:r,color:l,key:`${s}_${i}_${El(a)}`,resourceName:n,data:null===o||void 0===o?void 0:o[t]}}));return a*=r.length,t}).filter(e=>e.length);return n&&(r=kl(r,t)),{groupPanelItems:r,baseColSpan:i}},Ol=(e,t)=>Array.from({length:Math.ceil(e/t)},(n,i)=>Math.min(e-t*i,t)),Ml=A.A.dateToMilliseconds,Rl=(e,t)=>{const n=new it(t,e._dataAccessors);return"agenda"!==e.currentView.type&&(Rt.includes(e.currentView.type)?js(n,e.option("allDayPanelMode")):n.allDay)},Vl={isCurrentViewAgenda(){return"agenda"===this.currentView.type},getOption(e){return this.option(e)},isVirtualScrolling(){return this.isVirtualScrolling()},isGroupedByDate(){return this.getWorkSpace().isGroupedByDate()},showAppointmentTooltip(e){const t=this.getTargetedAppointment(e.data,e.target);this.showAppointmentTooltip(e.data,e.target,t)},hideAppointmentTooltip(){this.hideAppointmentTooltip()},showEditAppointmentPopup(e){const t=this.getTargetedAppointment(e.data,e.target);this.showAppointmentPopup(e.data,!1,t)},updateAppointmentAfterResize(e){const{info:t}=Gs.dataAccessors.getAppointmentSettings(e.$appointment),{startDate:n}=t.sourceAppointment;this._checkRecurringAppointment(e.target,e.data,n,()=>{this._updateAppointment(e.target,e.data,function(){this._appointments.moveAppointmentBack()})})},getUpdatedData(e){return this._getUpdatedData(e)},updateAppointmentAfterDrag(e){let{event:t,element:n,rawAppointment:i,isDropToTheSameCell:a,isDropToSelfScheduler:r}=e;const{info:o}=Gs.dataAccessors.getAppointmentSettings(n),s=(0,T.X)({},i,this._getUpdatedData(i)),l=Boolean(i.allDay),u=Boolean(s.allDay),d=this._workSpace.supportAllDayRow()&&l!==u,c=t.fromComponent!==t.toComponent,h=()=>{this._appointments.moveAppointmentBack(t)};!r&&c||(r&&(!a||c||d)?this._checkRecurringAppointment(i,s,o.sourceAppointment.startDate,()=>{this._updateAppointment(i,s,h,t)},void 0,void 0,t):h())},onDeleteButtonPress(e){const t=this.getTargetedAppointment(e.data,(0,D.A)(e.target));this.checkAndDeleteAppointment(e.data,t),this.hideAppointmentTooltip()},createFormattedDateText(e,t,n){const i=(0,d.A)({},e,t),a=new it(i,this._dataAccessors),r=i.displayStartDate||this.timeZoneCalculator.createDate(a.startDate,"toGrid"),o=i.displayEndDate||this.timeZoneCalculator.createDate(a.endDate,"toGrid"),s=n??Rs(r,o,a.allDay,"month"!==this.currentView.type);return{text:a.text,formatDate:Vs(r,o,s)}},_createAppointmentTitle(e){return(0,k.Qd)(e)?e.text:String(e)},getResizableAppointmentArea(e){const{allDay:t}=e,n=this.getViewOption("groups");if(null!==n&&void 0!==n&&n.length){if(t||!Rt.includes(this.currentView.type)){const t=this._workSpace.getGroupBounds(e.coordinates);return{left:t.left,right:t.right,top:0,bottom:0}}if(!t&&Rt.includes(this.currentView.type)&&this._workSpace._isVerticalGroupedWorkSpace()){const t=this._workSpace.getGroupBounds(e.coordinates);return{left:0,right:0,top:t.top,bottom:t.bottom}}}},needRecalculateResizableArea(){return this.getWorkSpace().needRecalculateResizableArea()},isAllDay(e){return Rl(this,e)},getDeltaTime(e,t,n){return Bs(e,t,{viewType:this.currentView.type,cellSize:{width:this.getWorkSpace().getCellWidth(),height:this.getWorkSpace().getCellHeight()},cellDurationInMinutes:this.getWorkSpace().option("cellDuration"),resizableStep:this.getWorkSpace().positionHelper.getResizableStep(),isAllDay:Rl(this,n)})},getCellWidth(){return this.getWorkSpace().getCellWidth()},getCellHeight(){return this.getWorkSpace().getCellHeight()},needCorrectAppointmentDates(){return!["month","timelineMonth"].includes(this.currentView.type)},getRenderingStrategyDirection(){return Rt.includes(this.currentView.type)?"vertical":"horizontal"},updateAppointmentEndDate(e){const{endDate:t}=e,n=this.getViewOption("endDayHour"),i=this.getViewOption("startDayHour");let a=t;return t.getHours()>=n?a.setHours(n,0,0,0):!e.isSameDate&&i>0&&60*t.getHours()+t.getMinutes()<60*i&&(a=new Date(a.getTime()-Ml("day")),a.setHours(n,0,0,0)),a},renderCompactAppointments(e){return this._compactAppointmentsHelper.render(e)},clearCompactAppointments(){this._compactAppointmentsHelper.clear()},getGroupCount(){return this._workSpace._getGroupCount()},mapAppointmentFields(e){const{itemData:t,itemElement:n,targetedAppointment:i}=e,a=i||this.getTargetedAppointment(t,n);return{appointmentData:e.itemData,appointmentElement:e.itemElement,targetedAppointmentData:a}},dayHasAppointment(e,t,n){return this.dayHasAppointment(e,t,n)},getLayoutManager(){return this._layoutManager},getAgendaVerticalStepHeight(){return this.getWorkSpace().getAgendaVerticalStepHeight()},getAgendaDuration(){return this.getViewOption("agendaDuration")},getStartViewDate(){return this.getStartViewDate()},getEndViewDate(){return this.getEndViewDate()},forceMaxAppointmentPerCell(){return this.forceMaxAppointmentPerCell()},onAgendaReady(e){const t=this.getAppointmentsInstance()._itemElements();let n=0;const i=function(e,i){const a=i+n-1;t.eq(a).addClass(Ut),n+=i};for(let a=0;a<e.length;a++)(0,bt.__)(e[a],i)},getTargetedAppointmentData(e,t){return this.getTargetedAppointment(e,t)},getEndDayHour(){return this._workSpace.option("endDayHour")||this.option("endDayHour")},getStartDayHour(){return this._workSpace.option("startDayHour")||this.option("startDayHour")},getViewOffsetMs(){return this.getViewOffsetMs()},isAdaptive(){return this.option("adaptivityEnabled")},removeDroppableCellClass(){this._workSpace.removeDroppableCellClass()}};var Pl=Vl;const Hl=()=>{const e=(0,Z.ss)();return{isCompact:(0,Z.ip)(e),isMaterial:(0,Z.gx)(e),isFluent:(0,Z.Ft)(e),isMaterialBased:(0,Z.Nt)(e)}},Wl=(e,t)=>{const n=new Date(e);return qs(n,t)},$l=(e,t,n,i)=>{const a=cl(n,e,i,n);return qs(a,t)},Bl=(e,t,n,i)=>e*i+t,Gl=(e,t,n,i)=>{if(!e)return new Date(t);let a=new Date(i);const r=new Date(i),o=a.getTime()<=t.getTime()?1:-1;let s=new Date(new Date(r.setMonth(r.getMonth()+o*n)));while(!ul(t,a,s,o))a=new Date(s),o>0&&a.setDate(1),s=new Date(new Date(s.setMonth(s.getMonth()+o*n)));return o>0?a:s},Nl=(e,t)=>{if(dl(e,t)){const t=h.A.getMonthNames("abbreviated")[e.getMonth()];return[t,h.A.format(e,"day")].join(" ")}return h.A.format(e,"dd")},Fl=(e,t,n,i,a)=>{const r=Gl(n,e,i,A.A.getFirstMonthDate(n)),o=A.A.getFirstMonthDate(r),s=wl(a),l=A.A.getFirstWeekDate(o,s);return qs(l,t)};var zl=n(4012);const Ll=(e,t)=>{const n=t??{},i=(0,d.A)({},n);return e.forEach(e=>{let{attr:t,value:a}=e;i[t]=a||n[t]}),i},Ul=(e,t)=>{const n=e?`${e}px`:"";return Ll([{attr:"width",value:n}],t)},Zl=(e,t)=>{const n=e?`${e}px`:"";return Ll([{attr:"height",value:n}],t)},Yl=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(0,zl.g)({"dx-scheduler-first-group-cell":e,"dx-scheduler-last-group-cell":t,[n]:!0})},jl=(e,t)=>{switch(e){case"day":case"week":case"workWeek":case"month":return t?"dx-scheduler-cell-sizes-horizontal":"";default:return"dx-scheduler-cell-sizes-horizontal"}},Xl=e=>e?"":"dx-scheduler-cell-sizes-vertical",ql=(e,t,n,i)=>{const a=A.A.getFirstMonthDate(Gl(n,e,i,A.A.getFirstMonthDate(n)));return qs(a,t)},Kl=(e,t,n)=>{let{startDayHour:i,startViewDate:a,cellCountInDay:r,interval:o,viewOffset:s}=n;return Js(t,{startViewDate:a,startDayHour:i,cellIndexShift:e%r*o,viewOffset:s})},Ql=(e,t,n,i,a,r)=>{if(e%2!==0)return"";const o=Js(t,{startViewDate:n,startDayHour:a,cellIndexShift:Math.round(i)*e,viewOffset:r});return h.A.format(o,"shorttime")},Jl=e=>7*A.A.dateToMilliseconds("day")*e,eu=(e,t)=>e?A.A.getFirstWeekDate(e,t):void 0,tu=(e,t,n,i,a)=>{const r=wl(a),o=cl(n,e,i,eu(n,r)),s=A.A.getFirstWeekDate(o,r);return qs(s,t)},nu=(e,t)=>{const n=t??h.A.firstDayOfWeekIndex();return A.A.getFirstWeekDate(e,n)},iu=(e,t,n,i,a)=>{const r=cl(n,e,i,eu(n,a)),o=A.A.getFirstWeekDate(r,a);if(Tl(o)){const e=o.getDay(),t=(8-e)%7;o.setDate(o.getDate()+t)}return qs(o,t)},au="yyyyMMddTHHmmss",ru=`${au}Z`,ou=(e,t,n)=>(n&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),S.A.serializeDate(e,ru)),su=(e,t)=>{const n=[];return e.recurrenceException&&n.push(e.recurrenceException),n.push(ou(t,e.startDate,e.allDay)),n.join()},lu=(e,t,n)=>{const i=new it((0,d.A)({},e),n);return i.recurrenceException=su(i,t),i},uu=e=>h.A.getDayNames("abbreviated")[e.getDay()],du=e=>`${uu(e)} ${h.A.format(e,"day")}`,cu={calculateStartViewDate:Wl},hu={calculateStartViewDate:$l},pu={getIntervalDuration:Jl,getTimePanelCellText:Ql,calculateStartViewDate:tu,calculateViewStartDate:nu},mu={calculateStartViewDate:iu},gu={getViewStartByOptions:Gl,getCellText:Nl,calculateCellIndex:Bl,calculateStartViewDate:Fl},fu={getDateForHeaderText:Kl},Du={calculateStartViewDate:ql},yu={addToStyles:Ll,addWidthToStyle:Ul,addHeightToStyle:Zl,getGroupCellClasses:Yl,getCellSizeHorizontalClass:jl,getCellSizeVerticalClass:Xl},_u={getThemeType:Hl},Cu={dateFilter:0,userFilter:1};class vu{constructor(e){this.options=e}get dataAccessors(){return this.options.dataAccessors}get dataSourceFilter(){return this.options.dataSourceFilter}get dateSerializationFormat(){return this.options.dateSerializationFormat}get forceIsoDateParsing(){return!(0,k.O9)(this.options.forceIsoDateParsing)||this.options.forceIsoDateParsing}makeDateFilter(e,t){const{startDateExpr:n,endDateExpr:i,recurrenceRuleExpr:a}=this.dataAccessors.expr,r=[[[i,">=",e],[n,"<",t]],"or",[a,"startswith","freq"],"or",[[i,e],[n,e]]];return a||r.splice(1,2),r}combineFilters(e,t){const n=[];return e&&n.push(e),t&&n.push(t),this.serializeRemoteFilter(n)}serializeRemoteFilter(e){if(!Array.isArray(e))return e;const{startDateExpr:t,endDateExpr:n}=this.dataAccessors.expr,i=(0,T.X)([],e);if((0,k.Kg)(i[0])&&this.forceIsoDateParsing&&i.length>1&&(i[0]===t||i[0]===n)){const e=i[i.length-1];i[i.length-1]=S.A.serializeDate(new Date(e),this.dateSerializationFormat)}for(let a=0;a<i.length;a+=1)i[a]=this.serializeRemoteFilter(i[a]);return i}getUserFilter(e){if(!this.dataSourceFilter||(0,v.RL)(this.dataSourceFilter,e))return;const t=this.dataSourceFilter.length>0&&(0,v.RL)(this.dataSourceFilter[Cu.dateFilter],e),n=t?this.dataSourceFilter[Cu.userFilter]:this.dataSourceFilter;return n}combine(e,t){const[n,i]=Ys(e,t),a=this.makeDateFilter(n,i),r=this.getUserFilter(a),o=this.combineFilters(a,r);return o}}const wu=e=>new vu(e).combine(e.min,e.max),Au=A.A.dateToMilliseconds;class Su{constructor(e){this.options=e}createDate(e,t,n){const i=new Date(e);switch(t){case"toAppointment":return this.getConvertedDate(i,n,!1);case"fromAppointment":return this.getConvertedDate(i,n,!0);case"toGrid":return this.getConvertedDate(i,void 0,!1);case"fromGrid":return this.getConvertedDate(i,void 0,!0);default:throw new Error("not specified pathTimeZoneConversion")}}getOffsets(e,t){const n=-this.getClientOffset(e)/A.A.dateToMilliseconds("hour"),i=this.getCommonOffset(e),a=this.getAppointmentOffset(e,t);return{client:n,common:(0,k.O9)(i)?i:n,appointment:"number"!==typeof a?n:a}}getOriginStartDateOffsetInMs(e,t,n){const i=this.getOffsetInHours(e,t,n);return 36e5*i}getOffsetInHours(e,t,n){const{client:i,appointment:a,common:r}=this.getOffsets(e,t);return Boolean(t)&&n?a-i:Boolean(t)&&!n?a-r:!t&&n?r-i:0}getClientOffset(e){return this.options.getClientOffset(e)}getCommonOffset(e){return this.options.tryGetCommonOffset(e)}getAppointmentOffset(e,t){return this.options.tryGetAppointmentOffset(e,t)}getConvertedDate(e,t,n){const i=new Date(e.getTime()),a=this.getOffsets(i,t),r=t?"appointment":"common",o=n?-1:1;return R.X.addOffsets(i,[o*Au("hour")*a[r],-o*Au("hour")*a.client])}}const bu=e=>new Su({timeZone:e,getClientOffset:e=>Oe.A.getClientTimezoneOffset(e),tryGetCommonOffset:t=>Oe.A.calculateTimezoneByValue(e,t),tryGetAppointmentOffset:(e,t)=>Oe.A.calculateTimezoneByValue(t,e)}),Tu={indicatorTime:void 0,renovateRender:!0,_draggingMode:"outlook",_appointmentTooltipOffset:{x:0,y:0},_appointmentCountPerCell:2,_collectorOffset:0,_appointmentOffset:26,appointmentPopupTemplate:"appointmentPopup",disabledExpr:"disabled",allowMultipleCellSelection:!0},xu={views:["day","week"],currentView:"day",currentDate:A.A.trimTime(new Date),min:void 0,max:void 0,dateSerializationFormat:void 0,firstDayOfWeek:void 0,groups:[],resources:[],dataSource:null,customizeDateNavigatorText:void 0,appointmentTemplate:"item",dropDownAppointmentTemplate:"dropDownAppointment",appointmentCollectorTemplate:"appointmentCollector",dataCellTemplate:void 0,timeCellTemplate:void 0,resourceCellTemplate:void 0,dateCellTemplate:void 0,startDayHour:0,endDayHour:24,offset:0,editing:{allowAdding:!0,allowDeleting:!0,allowDragging:!0,allowResizing:!0,allowUpdating:!0,allowTimeZoneEditing:!1},showAllDayPanel:!0,showCurrentTimeIndicator:!0,shadeUntilCurrentTime:!1,indicatorUpdateInterval:3e5,recurrenceEditMode:"dialog",cellDuration:30,maxAppointmentsPerCell:"auto",selectedCellData:[],groupByDate:!1,onAppointmentRendered:void 0,onAppointmentClick:void 0,onAppointmentDblClick:void 0,onAppointmentContextMenu:void 0,onCellClick:void 0,onCellContextMenu:void 0,onAppointmentAdding:void 0,onAppointmentAdded:void 0,onAppointmentUpdating:void 0,onAppointmentUpdated:void 0,onAppointmentDeleting:void 0,onAppointmentDeleted:void 0,onAppointmentFormOpening:void 0,onAppointmentTooltipShowing:void 0,appointmentTooltipTemplate:"appointmentTooltip",crossScrollingEnabled:!1,useDropDownViewSwitcher:!1,startDateExpr:"startDate",endDateExpr:"endDate",textExpr:"text",descriptionExpr:"description",allDayExpr:"allDay",recurrenceRuleExpr:"recurrenceRule",recurrenceExceptionExpr:"recurrenceException",remoteFiltering:!1,timeZone:"",startDateTimeZoneExpr:"startDateTimeZone",endDateTimeZoneExpr:"endDateTimeZone",noDataText:p.A.format("dxCollectionWidget-noDataText"),adaptivityEnabled:!1,scrolling:{mode:"standard"},allDayPanelMode:"all",toolbar:{disabled:!1,multiline:!1,items:[{location:"before",name:"dateNavigator"},{location:"after",name:"viewSwitcher"}]}},ku={integrationOptions:{useDeferUpdateForTemplates:!1}},Eu={dropDownAppointmentTemplate:{since:"19.2",message:"appointmentTooltipTemplate"}},Iu=[{device:()=>"desktop"===Te.A.real().deviceType&&!Te.A.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!Te.A.current().generic,options:{useDropDownViewSwitcher:!0,editing:{allowDragging:!1,allowResizing:!1}}},{device:()=>(0,Z.Nt)(),options:{useDropDownViewSwitcher:!0,dateCellTemplate:(e,t,n)=>{const{text:i=""}=e;i.split(" ").forEach((e,t)=>{const i=(0,D.A)("<span>").text(e).addClass("dx-scheduler-header-panel-cell-date");(0,D.A)(n).append(i),t||(0,D.A)(n).append(" ")})},_appointmentCountPerCell:1,_collectorOffset:20,_appointmentOffset:30}},{device:()=>(0,Z.gx)(),options:{_appointmentTooltipOffset:{x:0,y:11}}}];var Ou=n(58453);const Mu=e=>Fs.includes((0,k.Gv)(e)?e.type:e),Ru=e=>Boolean(e),Vu=e=>(0,k.Gv)(e)?(0,yo.X)({},Ls[e.type],e):Ls[e],Pu=e=>e.filter(Mu).map(Vu).filter(Ru);function Hu(e,t){const n=Pu(t),i=n.find(t=>[t.name,t.type].includes(e));return i??Ls[e]??n[0]??Ls[Fs[0]]}const Wu=e=>e?new Date(Ou.J.deserializeDate(e)):void 0,$u=e=>{const t=Wu(e);return Hr.s.trimTime(t)},Bu=e=>["currentDate","min","max"].includes(e),Gu=(e,t)=>{if(!Bu(e))return t;const n="currentDate"===e?$u(t):Wu(t);return n},Nu=e=>Number.isInteger(e),Fu=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?e>t:e>=t},zu=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?e<t:e<=t},Lu=(e,t)=>{let[n,i]=t;return e>=n&&e<=i},Uu=(e,t)=>e%t===0;class Zu{constructor(e){this.validators=e}validate(e){const t=Object.entries(this.validators).reduce((t,n)=>{let[i,a]=n;const r=a.validate(e);return!0!==r&&(t[i]=r),t},{});return!(Object.keys(t).length>0)||t}}const Yu=(e,t)=>"boolean"!==typeof t&&Array.isArray(t.arguments)?`${e}${JSON.stringify(t.arguments)}`:e,ju=e=>"boolean"!==typeof e&&Array.isArray(e.arguments)?e.arguments:[];class Xu{constructor(e,t){this.validatorNameToErrorCodeMap=e,this.globalErrorHandler=t}handleValidationResult(e){if(!0===e)return;const t=new Map,n=new Map;Object.entries(e).forEach(e=>{let[i,a]=e;const r=this.validatorNameToErrorCodeMap[i];if(!r)return;const o=r.startsWith("E")?n:t;Object.values(a).forEach(e=>{const t=Yu(r,e),n=ju(e);o.set(t,{errorCode:r,args:n})})}),Array.from(t).forEach(e=>{const[,{errorCode:t,args:n}]=e;this.globalErrorHandler.logError(t,...n)}),Array.from(n).forEach((e,t)=>{const[,{errorCode:i,args:a}]=e,r=t===n.size-1;r?this.globalErrorHandler.throwError(i,...a):this.globalErrorHandler.logError(i,...a)})}}class qu{constructor(e,t){this.valueSelector=e,this.rules=t}validate(e){const t=this.valueSelector(e),n=this.rules.reduce((e,n)=>{const i=n(t);return!0!==i&&(e[n.name]=i),e},{});return!Object.keys(n).length||n}}const Ku=(e,t)=>(Object.defineProperty(t,"name",{value:e,writable:!1}),t),Qu=Ku("mustBeInteger",e=>Nu(e)),Ju=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ku("mustBeGreaterThan",n=>Fu(n,e,t))},ed=e=>Ku("mustBeInRange",t=>Lu(t,e)),td=e=>Ku("mustBeDivisibleBy",t=>Uu(t,e)),nd=Ku("endDayHourGreaterThanStartDayHour",e=>{let{startDayHour:t,endDayHour:n}=e;return Fu(n,t)}),id=Ku("visibleIntervalMustBeDivisibleByCellDuration",e=>{let{cellDuration:t,startDayHour:n,endDayHour:i}=e;const a=60*(i-n);return Uu(a,t)}),ad=Ku("cellDurationMustBeLessThanVisibleInterval",e=>{let{cellDuration:t,startDayHour:n,endDayHour:i}=e;const a=60*(i-n);return zu(t,a,!1)}),rd=Ku("allViewsHasCorrectType",e=>{const t=e.reduce((e,t)=>{const n=(0,k.Gv)(t)?t.type:t,i=Boolean(n&&Fs.includes(n));return i||e.push(`'${n}'`),e},[]);return!t.length||{arguments:[t.join(", ")]}});class od extends Zu{constructor(){super({startDayHour:new qu(e=>{let{startDayHour:t}=e;return t},[Qu,ed([0,24])]),endDayHour:new qu(e=>{let{endDayHour:t}=e;return t},[Qu,ed([0,24])]),offset:new qu(e=>{let{offset:t}=e;return t},[Qu,ed([-1440,1440]),td(5)]),cellDuration:new qu(e=>{let{cellDuration:t}=e;return t},[Qu,Ju(0)]),startDayHourAndEndDayHour:new qu(e=>e,[nd]),cellDurationAndVisibleInterval:new qu(e=>e,[id,ad]),views:new qu(e=>e.views,[rd])})}}const sd={logError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];M.A.log(e,...n)},throwError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw M.A.Error(e,...n)}};class ld extends Xu{constructor(){super({startDayHour:"E1058",endDayHour:"E1058",startDayHourAndEndDayHour:"E1058",offset:"E1061",cellDuration:"E1062",cellDurationAndVisibleInterval:"E1062",views:"W0008"},sd)}}class ud extends ho.A{constructor(){super(...arguments),this.views=[]}_init(){super._init(),this.optionsValidator=new od,this.optionsValidatorErrorHandler=new ld}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,yo.X)(!0,e,(0,d.A)({},xu,Tu,ku))}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,yo.X)(this._deprecatedOptions,Eu)}_defaultOptionsRules(){const e=super._defaultOptionsRules();return e.concat(Iu)}updateViews(){const e=this.option("views")??[];this.views=Pu(e),this.currentView=Hu(this.option("currentView")??"",e)}_initMarkup(){super._initMarkup(),this.updateViews(),this.validateOptions()}schedulerOptionChanged(e){switch(e.name){case"currentView":case"views":this.updateViews()}this.validateOptions()}validateOptions(){const e=(0,d.A)({},this.option(),{startDayHour:this.getViewOption("startDayHour"),endDayHour:this.getViewOption("endDayHour"),offset:this.getViewOption("offset"),cellDuration:this.getViewOption("cellDuration")}),t=this.optionsValidator.validate(e);this.optionsValidatorErrorHandler.handleValidationResult(t)}getViewOption(e){var t;const n=null===(t=this.currentView)||void 0===t?void 0:t[e],i=n??this.option(e);return Gu(e,i)}hasAgendaView(){return this.views.some(e=>"agenda"===e.type||"agenda"===e.name)}}var dd=n(89651);function cd(){let e,t;const n=new Promise((n,i)=>{e=n,t=i});return{promise:n,resolve:e,reject:t}}var hd=n(82380);const pd="dx-tooltip-appointment-item",md=`${pd}-content`,gd=`${pd}-content-subject`,fd=`${pd}-content-date`,Dd=`${pd}-marker`,yd=`${pd}-marker-body`,_d=`${pd}-delete-button-container`,Cd=`${pd}-delete-button`;class vd{constructor(e){this.asyncTemplatePromises=new Set,this._tooltip=null,this._options=e,this._extraOptions=null}show(e,t,n){this._canShowTooltip(t)&&(this.hide(),this._extraOptions=n,this._showCore(e,t))}_showCore(e,t){const n=(0,k.Kb)(e)&&e.attr("aria-describedby");this._tooltip?(this._shouldUseTarget()&&this._tooltip.option("target",e),this._list.option("dataSource",t)):this._tooltip=this._createTooltip(e,t),this._prepareBeforeVisibleChanged(t),this._tooltip.option("visible",!0),n&&e.attr("aria-describedby",n)}_prepareBeforeVisibleChanged(e){}_getContentTemplate(e){return t=>{var n,i;const a=(0,D.A)("<div>");(0,D.A)(t).append(a),this._list=this._createList(a,e),null===(n=(i=this._list).registerKeyHandler)||void 0===n||n.call(i,"escape",()=>{this.hide(),this._tooltip.option("target").focus()})}}isAlreadyShown(e){if(this._tooltip&&this._tooltip.option("visible"))return this._tooltip.option("target")[0]===e[0]}_onShown(){this._list.option("focusStateEnabled",this._extraOptions.focusStateEnabled)}dispose(){}hide(){this._tooltip&&this._tooltip.option("visible",!1)}_shouldUseTarget(){return!0}_createTooltip(e,t){}_canShowTooltip(e){return!!e.length}_createListOption(e){return{dataSource:e,onContentReady:this._onListRender.bind(this),onItemClick:e=>this._onListItemClick(e),onItemContextMenu:this._onListItemContextMenu.bind(this),itemTemplate:(e,t)=>this._renderTemplate(e.appointment,e.targetedAppointment,t,e.color),_swipeEnabled:!1,pageLoadMode:"scrollBottom"}}_onListRender(e){}_createTooltipElement(e){return(0,D.A)("<div>").appendTo(this._options.container).addClass(e)}_createList(e,t){return this._options.createComponent(e,hd.A,this._createListOption(t))}_renderTemplate(e,t,n,i){const a=this._createItemListContent(e,t,i);this._options.addDefaultTemplates({[this._getItemListTemplateName()]:new Ts.l(e=>{const t=(0,D.A)(e.container);return t.append(a),t})});const r=this._options.getAppointmentTemplate(`${this._getItemListTemplateName()}Template`);return this._createFunctionTemplate(r,e,t,n)}_createFunctionTemplate(e,t,n,i){const a=Boolean(this._extraOptions.isButtonClick),r=this._isEmptyDropDownAppointmentTemplate();return new Ts.l(o=>{const{promise:s,resolve:l}=cd();return this.asyncTemplatePromises.add(s),e.render({model:r?{appointmentData:t,targetedAppointmentData:n,isButtonClicked:a}:t,container:o.container,index:i,onRendered:()=>{this.asyncTemplatePromises.delete(s),l()}})})}_getItemListTemplateName(){return this._isEmptyDropDownAppointmentTemplate()?"appointmentTooltip":"dropDownAppointment"}_isEmptyDropDownAppointmentTemplate(){return!this._extraOptions.dropDownAppointmentTemplate||"dropDownAppointment"===this._extraOptions.dropDownAppointmentTemplate}_onListItemClick(e){this.hide(),this._extraOptions.clickEvent&&this._extraOptions.clickEvent(e),this._options.showAppointmentPopup(e.itemData.appointment,!1,e.itemData.targetedAppointment)}_onListItemContextMenu(e){}_createItemListContent(e,t,n){const{editing:i}=this._extraOptions,a=(0,D.A)("<div>").addClass(pd);a.append(this._createItemListMarker(n)),a.append(this._createItemListInfo(this._options.createFormattedDateText(e,t)));const r=this._options.getAppointmentDisabled(e);return!r&&(i&&!0===i.allowDeleting||!0===i)&&a.append(this._createDeleteButton(e,t)),a}_createItemListMarker(e){const t=(0,D.A)("<div>").addClass(Dd),n=(0,D.A)("<div>").addClass(yd);return t.append(n),e.then(e=>{e&&n.css("background",e)}),t}_createItemListInfo(e){const t=(0,D.A)("<div>").addClass(md),n=(0,D.A)("<div>").addClass(gd).text(e.text),i=(0,D.A)("<div>").addClass(fd).text(e.formatDate);return t.append(n).append(i)}_createDeleteButton(e,t){const n=(0,D.A)("<div>").addClass(_d),i=(0,D.A)("<div>").addClass(Cd);return n.append(i),this._options.createComponent(i,xs.A,{icon:"trash",stylingMode:"text",onClick:n=>{this.hide(),n.event.stopPropagation(),this._options.checkAndDeleteAppointment(e,t)}}),n}}const wd="dx-scheduler-appointment-tooltip-wrapper";class Ad extends vd{_prepareBeforeVisibleChanged(e){this._tooltip.option("position",{my:"bottom",at:"top",boundary:this._getBoundary(e),offset:this._extraOptions.offset,collision:"fit flipfit"})}_getBoundary(e){return this._options.isAppointmentInAllDayPanel(e[0].appointment)?this._options.container:this._options.getScrollableContainer()}_onShown(){super._onShown(),this._extraOptions.isButtonClick&&(this._list.focus(),this._list.option("focusedElement",null))}_createListOption(e,t){const n=super._createListOption(e,t);return n.showScrollbar=dd.Ay.touch?"always":"onHover",n}_createTooltip(e,t){const n=this._createTooltipElement(wd),i=this._options.createComponent(n,dr,{target:e,maxHeight:200,rtlEnabled:this._extraOptions.rtlEnabled,onShown:this._onShown.bind(this),contentTemplate:this._getContentTemplate(t),wrapperAttr:{class:wd},_loopFocus:this._extraOptions._loopFocus});return i.setAria({role:"dialog",label:p.A.format("dxScheduler-appointmentListAriaLabel")}),i}_onListRender(e){return this._extraOptions.dragBehavior&&this._extraOptions.dragBehavior(e)}_onListItemContextMenu(e){const t=this._options.createEventArgs(e);this._options.onItemContextMenu(t)}}var Sd=n(35328);const bd={slidePanel:"dx-scheduler-overlay-panel",scrollableContent:".dx-scrollable-content"},Td={PHONE:250,TABLET:"90%",DEFAULT:"auto"},xd={PHONE:"100%",TABLET:"80%"},kd={show:{type:"slide",duration:300,from:{position:{my:"top",at:"bottom",of:(0,E.zk)()}},to:{position:{my:"center",at:"center",of:(0,E.zk)()}}},hide:{type:"slide",duration:300,to:{position:{my:"top",at:"bottom",of:(0,E.zk)()}},from:{position:{my:"center",at:"center",of:(0,E.zk)()}}}},Ed=e=>({shading:!1,width:xd.PHONE,height:e>Td.PHONE?Td.PHONE:Td.DEFAULT,position:{my:"bottom",at:"bottom",of:(0,E.zk)()}}),Id=e=>{const t=.9*(0,xe.Oq)((0,E.zk)());return{shading:!0,width:xd.TABLET,height:e>t?Td.TABLET:Td.DEFAULT,position:{my:"center",at:"center",of:(0,E.zk)()}}};class Od extends vd{_shouldUseTarget(){return!1}setTooltipConfig(){const e=(0,xe.RG)((0,E.zk)())>700,t=(0,xe.P$)(this._list.$element().find(bd.scrollableContent));this._tooltip.option(e?Id(t):Ed(t))}async _onShowing(){this._tooltip.option("height",Td.DEFAULT),this.setTooltipConfig(),await Promise.all([...this.asyncTemplatePromises]),this.setTooltipConfig()}_createTooltip(e,t){const n=this._createTooltipElement(bd.slidePanel);return this._options.createComponent(n,Sd.A,{target:(0,E.zk)(),hideOnOutsideClick:!0,animation:kd,onShowing:()=>this._onShowing(),onShown:this._onShown.bind(this),contentTemplate:this._getContentTemplate(t),wrapperAttr:{class:bd.slidePanel}})}}var Md=n(47018);class Rd{constructor(){this.getter={},this.setter={}}updateExpressions(e){Object.entries(e).forEach(e=>{let[t,n]=e;return this.updateExpression(t,n)})}get(e,t){if(this.getter[e])return this.getter[e](t)}set(e,t,n){return this.setter[e]&&this.setter[e](t,n),this}has(e){return(0,Md.O9)(this.getter[e])}}const Vd=e=>"startDate"===e||"endDate"===e,Pd=e=>"allDay"===e||"disabled"===e;class Hd extends Rd{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;super(),this.forceIsoDateParsing=t,this.dateSerializationFormat=n,this.expr=(0,d.A)({},e),this.updateExpressions(e)}getCommonAccessExpressions(e){return{getter:(0,w.Hz)(e),setter:(0,w.vL)(e)}}getDateFieldAccessExpressions(e){const{getter:t,setter:n}=this.getCommonAccessExpressions(e);let i;return{getter:e=>{const n=this.forceIsoDateParsing?S.A.deserializeDate(t(e)):t(e);return void 0===n?n:new Date(n)},setter:(e,a)=>{if(this.dateSerializationFormat)i=this.dateSerializationFormat;else if(this.forceIsoDateParsing&&!i){const n=t(e);i=S.A.getDateSerializationFormat(n)}const r=S.A.serializeDate(a,i);n(e,r)}}}getBooleanFieldAccessExpressions(e){const{getter:t,setter:n}=this.getCommonAccessExpressions(e);return{getter:e=>Boolean(t(e)),setter:n}}getAccessExpressions(e,t){switch(!0){case Pd(e):return this.getBooleanFieldAccessExpressions(t);case Vd(e):return this.getDateFieldAccessExpressions(t);default:return this.getCommonAccessExpressions(t)}}updateExpression(e,t){const n=e.replace("Expr","");if(!t)return delete this.getter[n],delete this.setter[n],void delete this.expr[e];const{getter:i,setter:a}=this.getAccessExpressions(n,t);this.getter[n]=i,this.setter[n]=a,this.expr[e]=t}isRecurrent(e){const t=this.get("recurrenceRule",e),n=Na(t);return n}}var Wd=n(76216);function $d(e){return"dxSchedulerAgenda"===e.NAME}const Bd=e=>Object.values(e).map(e=>{const t=e.resourceIndex;return{editorOptions:{dataSource:e.dataSource,displayExpr:e.dataAccessor.textExpr,valueExpr:e.dataAccessor.idExpr,stylingMode:(0,Z.Ft)((0,Z.ss)())?"filled":"outlined"},dataField:t,editorType:e.allowMultiple?"dxTagBox":"dxSelectBox",label:{text:e.resourceName??t}}}),Gd=e=>e.fieldExpr??e.field??"",Nd=e=>{const t=Gd(e),n=(0,w.Hz)(t),i=(0,w.vL)(t);return{idsGetter:e=>(0,at.BO)(n(e)??[]),idsSetter:(e,t)=>i(e,t)}};class Fd extends Rd{constructor(e){super(),this.idExpr=e.valueExpr??"id",this.textExpr=e.displayExpr??"text",this.colorExpr=e.colorExpr??"color",this.updateExpressions({idExpr:this.idExpr,textExpr:this.textExpr,colorExpr:this.colorExpr})}updateExpression(e,t){const n=e.replace("Expr","");if(!t)return delete this.getter[n],void delete this.setter[n];this.getter[n]=(0,w.Hz)(t),this.setter[n]=(0,w.vL)(t)}}var zd=n(27407),Ld=n(92759);const Ud=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;if(e instanceof zd.A)return e;const n=(0,d.A)({},(0,Ld.ho)(e,{}),t);return new zd.A(n)},Zd=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?new Promise((t,n)=>{e.reload().then(t,n)}):e.isLoaded()?e.items():new Promise((t,n)=>{e.load().then(t,n)}):[]};class Yd{constructor(e,t){this.items=[],this.data=[],this.unsubscribe=v.lQ,this.dataSource=Ud(e.dataSource,t),this.isSharedDataSource=e.dataSource instanceof zd.A,this.addDataSourceHandlers()}onInit(){var e;this.isLoaded()&&this.applyChanges((null===(e=this.dataSource)||void 0===e?void 0:e.items())??[])}isLoaded(){var e;return Boolean(null===(e=this.dataSource)||void 0===e?void 0:e.isLoaded())}addDataSourceHandlers(){const e=this.onChange.bind(this),t=this.onLoadingChanged.bind(this),n=this.onLoadError.bind(this),{dataSource:i}=this;i&&(i.on("changed",e),i.on("loadingChanged",t),i.on("loadError",n),this.unsubscribe=()=>{i.off("changed",e),i.off("loadingChanged",t),i.off("loadError",n)})}async load(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dataSource&&(e||!this.dataSource.isLoaded()&&!this.loadingStatePromise)&&(this.loadingStatePromise=this.loadingStatePromise&&!e?this.loadingStatePromise:Zd(this.dataSource,e)),await this.loadingStatePromise}onLoadingChanged(e){var t;!e&&this.isLoaded()&&this.applyChanges((null===(t=this.dataSource)||void 0===t?void 0:t.items())??[])}applyChanges(e){e&&e!==this.data&&(this.data=e,this.items=this.onLoadTransform(this.data))}dispose(){this.dataSource&&(this.isSharedDataSource?(this.unsubscribe(),this.unsubscribe=v.lQ):this.dataSource.dispose(),this.data=[],this.items=[])}}class jd extends Yd{constructor(e){super(e,{pageSize:0});const t=Nd(e);this.idsGetter=t.idsGetter,this.idsSetter=t.idsSetter,this.dataAccessor=new Fd(e),this.allowMultiple=Boolean(e.allowMultiple),this.useColorAsDefault=Boolean(e.useColorAsDefault),this.resourceIndex=String(Gd(e)),this.resourceName=e.label,this.onInit()}onLoadTransform(e){return e.map(e=>({id:this.dataAccessor.get("id",e),text:this.dataAccessor.get("text",e),color:this.dataAccessor.get("color",e)}))}applyChanges(e){super.applyChanges(e)}onLoadError(){}onChange(){}}const Xd=(e,t,n)=>{const i=e.filter(e=>t.includes(e.resourceIndex)),a=i.find(e=>e.useColorAsDefault);if(a)return a;const r=n.filter(e=>t.includes(e)),o=r.map(e=>i.find(t=>t.resourceIndex===e)).filter(Boolean);return o.length?o.at(-1):i.at(-1)},qd=(e,t)=>{var n;return null===(n=ot(e,t))||void 0===n?void 0:n.color},Kd=async(e,t,n,i)=>{const{groupIndex:a,itemData:r}=i,o=st(r,e),s=Object.keys(o),l=Xd(e,s,n);if(!l)return;await l.load();const u=Ka(t,a),d=l.idsGetter(r),c=u[l.resourceIndex]??d[0];return qd(l,c)};class Qd{constructor(e){this.resources=[],this.resourceById={},this.groups=[],this.groupsLeafs=[],this.groupsTree=[],null===e||void 0===e||e.filter(Gd).forEach(e=>{const t=new jd(e);this.resourceById[t.resourceIndex]=t,this.resources.push(t)})}async load(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await Promise.all(e.map(e=>{var n;return null===(n=this.resourceById[e])||void 0===n?void 0:n.load(t)}))}async loadGroupResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await this.load(e,t);const{groupTree:n,groupLeafs:i}=Xa(this.resourceById,e);this.groups=e,this.groupsLeafs=i,this.groupsTree=n}groupCount(){return this.groupsLeafs.length}groupResources(){return this.groups.map(e=>this.resourceById[e]).filter(Boolean)}async loadAppointmentsResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Object.keys(this.resourceById).filter(t=>!this.resourceById[t].isLoaded()&&e.some(e=>this.resourceById[t].idsGetter(e).length>0));await this.load(n,t)}async getAppointmentColor(e){return Kd(this.resources,this.groupsLeafs,this.groups,e)}async getAppointmentResourcesValues(e){const t=st(e,this.resources),n=Object.keys(t);return await this.load(n),dt(t,this.resourceById)}dispose(){Object.values(this.resourceById).forEach(e=>e.dispose())}}const Jd={updating:"updating",push:"push"};class ec{constructor(e){this.setDataSource(e),this.updatedAppointmentKeys=[]}get keyName(){const e=this.dataSource.store();return e.key()}get isDataSourceInit(){return Boolean(this.dataSource)}_getStoreKey(e){const t=this.dataSource.store();return t.keyOf(e)}setDataSource(e){this.dataSource=e,this.cleanState(),this._initStoreChangeHandlers()}_initStoreChangeHandlers(){const{dataSource:e}=this,t=null===e||void 0===e?void 0:e.store();t&&(t.on(Jd.updating,e=>{const n=t.key();n?this.updatedAppointmentKeys.push({key:n,value:e}):this.updatedAppointment=e}),t.on(Jd.push,n=>{const i=e.items(),a=t.key();n.forEach(e=>{const t=0!==i.filter(t=>t[a]===e.key).length;if(t)this.updatedAppointmentKeys.push({key:a,value:e.key});else{const{data:t}=e;t&&i.push(t)}}),e.load()}))}getUpdatedAppointment(){return this.updatedAppointment}getUpdatedAppointmentKeys(){return this.updatedAppointmentKeys}cleanState(){this.updatedAppointment=null,this.updatedAppointmentKeys=[]}add(e){return this.dataSource.store().insert(e).done(()=>this.dataSource.load())}update(e,t){const n=this._getStoreKey(e),i=new b.cY;return this.dataSource.store().update(n,t).done(e=>this.dataSource.load().done(()=>i.resolve(e)).fail(i.reject)).fail(i.reject),i.promise()}remove(e){const t=this._getStoreKey(e);return this.dataSource.store().remove(t).done(()=>this.dataSource.load())}destroy(){var e;const t=null===(e=this.dataSource)||void 0===e?void 0:e.store();t&&(t.off(Jd.updating),t.off(Jd.push))}}const tc=e=>{const{dateTableCellsMeta:t}=e,n=null===t||void 0===t?void 0:t.length;if(!n)return{width:0,height:0};const i=n>1?1:0,a=t[i][0];return{width:a.width,height:a.height}},nc=(e,t,n,i)=>{const{dateTableCellsMeta:a}=i,r=a[0];if(!r)return 0;const{columnIndex:o}=t.getLastGroupCellPosition(e),s=r[o];return s?n?s.left:s.left+s.width:0},ic=e=>tc(e).height,ac=e=>tc(e).width,rc=(e,t,n)=>{if(!e)return 0;if(t){const{dateTableCellsMeta:e}=n,t=null===e||void 0===e?void 0:e.length;return t?e[0][0].height:0}const{allDayPanelCellsMeta:i}=n;return null!==i&&void 0!==i&&i.length?i[0].height:0},oc=(e,t,n,i)=>{const a=e||0;return nc(a,t,n,i)},sc=(e,t,n)=>{const{isVirtualScrolling:i,rtlEnabled:a,DOMMetaData:r}=n,o=ac(r);let s=t.getCellCount(n)*o;if(i){const n=t.groupedDataMap.dateTableGroupedMap,i=n[e][0].length;s=i*o}const l=oc(e,t,a,r),u=l[e];return u&&(s=a?u-l[e+1]:0===e?u:u-l[e-1]),s};class lc{get viewDataProvider(){return this.options.viewDataProvider}get rtlEnabled(){return this.options.rtlEnabled}get isGroupedByDate(){return this.options.isGroupedByDate}get groupCount(){return this.options.groupCount}get DOMMetaData(){return this.options.getDOMMetaDataCallback()}constructor(e){this.options=e,this.groupStrategy=this.options.isVerticalGrouping?new uc(this.options):new dc(this.options)}getHorizontalMax(e){const t=e=>oc(e,this.viewDataProvider,this.rtlEnabled,this.DOMMetaData);if(this.isGroupedByDate){const n=this.viewDataProvider.getViewPortGroupCount();return Math.max(t(e),t(n-1))}return t(e)}getResizableStep(){const e=ac(this.DOMMetaData);return this.isGroupedByDate?this.groupCount*e:e}getVerticalMax(e){return this.groupStrategy.getVerticalMax(e)}getOffsetByAllDayPanel(e){return this.groupStrategy.getOffsetByAllDayPanel(e)}getGroupTop(e){return this.groupStrategy.getGroupTop(e)}}class uc{constructor(e){this.options=e}get viewDataProvider(){return this.options.viewDataProvider}get isGroupedByDate(){return this.options.isGroupedByDate}get rtlEnabled(){return this.options.rtlEnabled}get groupCount(){return this.options.groupCount}get DOMMetaData(){return this.options.getDOMMetaDataCallback()}getOffsetByAllDayPanel(e){let{groupIndex:t,supportAllDayRow:n,showAllDayPanel:i}=e,a=0;if(n&&i){const e=rc(i,!0,this.DOMMetaData);a=e*(t+1)}return a}getVerticalMax(e){let t=this._getMaxAllowedVerticalPosition((0,d.A)({},e,{viewDataProvider:this.viewDataProvider,rtlEnabled:this.rtlEnabled,DOMMetaData:this.DOMMetaData}));return t+=this.getOffsetByAllDayPanel(e),t}getGroupTop(e){let{groupIndex:t,showAllDayPanel:n,isGroupedAllDayPanel:i}=e;const a=this.viewDataProvider.getRowCountInGroup(t),r=this._getMaxAllowedVerticalPosition({groupIndex:t,viewDataProvider:this.viewDataProvider,showAllDayPanel:n,isGroupedAllDayPanel:i,isVerticalGrouping:!0,DOMMetaData:this.DOMMetaData});return r-ic(this.DOMMetaData)*a}_getAllDayHeight(e){return rc(e,!0,this.DOMMetaData)}_getMaxAllowedVerticalPosition(e){let{groupIndex:t,showAllDayPanel:n,isGroupedAllDayPanel:i}=e;const{rowIndex:a}=this.viewDataProvider.getLastGroupCellPosition(t),{dateTableCellsMeta:r}=this.DOMMetaData,o=r[a];if(!o)return 0;let s=o[0].top+o[0].height;return i&&(s-=(t+1)*this._getAllDayHeight(n)),s}}class dc extends uc{getOffsetByAllDayPanel(){return 0}getVerticalMax(e){const{isVirtualScrolling:t,groupIndex:n}=e,i=t?n:0;return this._getMaxAllowedVerticalPosition((0,d.A)({},e,{groupIndex:i}))}getGroupTop(){return 0}_getAllDayHeight(e){return rc(e,!1,this.DOMMetaData)}}n(32225);var cc=n(85386);const hc=(e,t)=>(0,cc.A)(e).filter(t).toArray(),pc=Hr.s.dateToMilliseconds,mc=pc("second"),gc=pc("day"),fc=pc("day")-pc("second"),Dc=(e,t)=>{const n=Hr.s.trimTime(e),i=R.X.addOffsets(n,[t]),a=R.X.addOffsets(n,[fc,t]);switch(!0){case e>a:return R.X.addOffsets(a,[mc]);case e<i:return R.X.addOffsets(i,[-gc]);default:return i}},yc=(e,t)=>{const n=Hr.s.trimTime(e),i=R.X.addOffsets(n,[t]),a=R.X.addOffsets(n,[fc,t]);switch(!0){case e>a:return R.X.addOffsets(a,[gc]);case e<i:return R.X.addOffsets(i,[-mc]);default:return a}},_c=(e,t)=>{let{startDate:n,endDate:i,allDay:a}=e;switch(!0){case!a:return{startDate:n,endDate:i};case 0===t:return{startDate:Hr.s.trimTime(n),endDate:R.X.addOffsets(Hr.s.trimTime(i),[fc])};default:return{startDate:Dc(n,t),endDate:yc(i,t)}}},Cc="yyyyMMddTHHmmss",vc=(e,t,n)=>{const i=e.replace(/\s/g,""),a=S.A.deserializeDate(i),r=n.createDate(t,"toGrid");let o=n.createDate(a,"toGrid");return o=Oe.A.correctRecurrenceExceptionByTimezone(o,r),S.A.serializeDate(o,Cc)},wc=(e,t,n)=>{if(e){const i=e.split(",");for(let e=0;e<i.length;e+=1)i[e]=vc(i[e],t,n);return i.join()}return e},Ac=(e,t,n)=>{let{firstDayOfWeek:i,interval:a}=t;if(!Na(e.recurrenceRule))return[e];const r=wc(e.recurrenceException,e.startDate,n),o=ja({rule:e.recurrenceRule,exception:r,start:e.startDate,end:e.endDate,min:a.min,max:a.max,firstDayOfWeek:i,appointmentTimezoneOffset:n.getOriginStartDateOffsetInMs(e.startDate,e.startDateTimeZone,!1)}),s=e.endDate.getTime()-e.startDate.getTime();return o.map(t=>(0,d.A)({},e,{startDate:t,endDate:R.X.addOffsets(t,[s])}))},Sc=(e,t)=>{let{startDate:n,endDate:i}=e;const a=t.findIndex(e=>{let{max:t}=e;return n<t});if(-1===a)return!1;const r=t[a].min;return n>=r||i>r},bc=(e,t)=>{if(0===t.length)return!0;const n=st(e,t);return t.every(e=>{const t=n[e.resourceIndex];return null===t||void 0===t?void 0:t.some(t=>e.items.some(e=>(0,v.RL)(t,e.id)))})},Tc=(e,t)=>{const{firstDayOfWeek:n,resources:i,allDayPanelFilter:a,allDayPanelMode:r,supportAllDayRow:o,visibleDateIntervals:s,visibleTimeIntervals:l,viewOffset:u}=e;return e=>{const c=e.visible??!0;if(!c)return!1;const h=o?js(e,r):e.allDay;if(void 0!==a&&h!==a)return!1;const p=h?s:l;if(0===p.length)return!1;if(!bc(e.rawAppointment,i))return!1;const m={min:p[0].min,max:p[p.length-1].max},g=Ac((0,d.A)({},e,{allDay:h}),{firstDayOfWeek:n,interval:m},t).map(e=>(0,d.A)({},e,_c(e,u)));return g.some(e=>Sc(e,p))}},xc=e=>e.map(e=>{let{rawAppointment:t}=e;return t}),kc=Hr.s.dateToMilliseconds,Ec=(e,t)=>{let{startDayHour:n,endDayHour:i,min:a,max:r}=e;if(t||0===n&&24===i){const[e,t]=Ys(a,r);return[{min:e,max:t}]}if(n>=i)return[];const o=Hr.s.dateTimeFromDecimal(n),s=Hr.s.dateTimeFromDecimal(i),l=Hr.s.trimTime(a);l.setHours(o.hours,o.minutes,0,0);const u=Hr.s.trimTime(r);u.setHours(s.hours,s.minutes,0,0);let d=l.getTime();const c=u.getTime(),h=[];while(d<c){const e=new Date(d);e.setHours(s.hours,s.minutes,0,0),h.push({min:new Date(d),max:e}),d+=kc("day")}return h},Ic=(e,t)=>e.map(e=>({min:R.X.addOffsets(e.min,[t]),max:R.X.addOffsets(e.max,[t])}));class Oc{constructor(e){this.options=e,this.dataAccessors=this.options.dataAccessors}get timeZoneCalculator(){return this.options.timeZoneCalculator}get viewStartDayHour(){return this._resolveOption("startDayHour")}get viewEndDayHour(){return this._resolveOption("endDayHour")}get firstDayOfWeek(){return this._resolveOption("firstDayOfWeek")}get showAllDayPanel(){return this._resolveOption("showAllDayPanel")}get supportAllDayRow(){return this._resolveOption("supportAllDayRow")}get viewType(){return this._resolveOption("viewType")}get viewDirection(){return this._resolveOption("viewDirection")}get dateRange(){return this._resolveOption("dateRange")}get groupCount(){return this._resolveOption("groupCount")}get viewDataProvider(){return this._resolveOption("viewDataProvider")}get allDayPanelMode(){return this._resolveOption("allDayPanelMode")}_resolveOption(e){const t=this.options[e];return"function"===typeof t?t():t}getIntervals(e){const t=this._resolveOption("viewOffset"),n={visibleDateIntervals:Ec(e,!0),visibleTimeIntervals:Ec(e,!1)};return n.visibleDateIntervals=Ic(n.visibleDateIntervals,t),n.visibleTimeIntervals=Ic(n.visibleTimeIntervals,t),n}getFilterOptions(){const[e,t]=this.dateRange,n=!(!this.showAllDayPanel&&this.supportAllDayRow)&&void 0,i={startDayHour:this.viewStartDayHour,endDayHour:this.viewEndDayHour,min:new Date(e),max:new Date(t)};return(0,d.A)({},i,this.getIntervals(i),{resources:this.options.getResourceManager().groupResources(),firstDayOfWeek:this.firstDayOfWeek,allDayPanelFilter:n,allDayPanelMode:this.allDayPanelMode,supportAllDayRow:this.supportAllDayRow,viewOffset:this._resolveOption("viewOffset")})}filter(e){const t=this.getFilterOptions(),n=this.createCombinedFilter(t),i=hc(e,n);return xc(i)}hasAllDayAppointments(e,t){return e.map(e=>new it(e,this.dataAccessors)).some(e=>js(e,this.allDayPanelMode))}createCombinedFilter(e){return[[Tc(e,this.timeZoneCalculator)]]}}Oc.strategyName="standard";const Mc=A.A.dateToMilliseconds;class Rc extends Oc{getBasePanelFilterOptions(){const e=this._resolveOption("viewOffset"),t=Mc("hour"),n=sl(this.viewType),i=this.viewDataProvider.getLastViewDateByEndDayHour(this.viewEndDayHour),a=R.X.addOffsets(i,[e]),r=[],o=this.viewDataProvider.getCompletedGroupsInfo();return o.forEach(e=>{const{groupIndex:i}=e,o=e.startDate,s=new Date(Math.min(e.endDate.getTime(),a.getTime())),l=n?o.getHours():this.viewStartDayHour,u=n?l+o.getMinutes()/60+(s.getTime()-o.getTime())/t:this.viewEndDayHour,c=this.options.getResourceManager(),h=Ja(c.groupsLeafs,c.resourceById,i),p={startDayHour:l,endDayHour:u,min:o,max:s};r.push((0,d.A)({},p,this.getIntervals(p),{resources:h,firstDayOfWeek:this.firstDayOfWeek,allDayPanelFilter:!1,allDayPanelMode:this.allDayPanelMode,supportAllDayRow:this.supportAllDayRow,viewOffset:this._resolveOption("viewOffset")}))}),r}filterByResources(e,t){return this.groupCount?e.filter(e=>{let{rawAppointment:n}=e;return t.some(e=>{let{resources:t}=e;return bc(n,t)})}):e}getCombinedFilterOptions(e){const t=[];e.forEach(e=>{t.length&&t.push("or");const n=this.createCombinedFilter(e);t.push(n)});const n=this.getFilterOptions();return void 0===n.allDayPanelFilter&&(t.push("or"),t.push(this.createCombinedFilter((0,d.A)({},n,{allDayPanelFilter:!0})))),t}filter(e){const t=this.getBasePanelFilterOptions(),n=this.filterByResources(e,t),i=this.getCombinedFilterOptions(t),a=hc(n,i);return xc(a)}hasAllDayAppointments(e,t){return this.filterAllDayAppointments(t).length>0}filterAllDayAppointments(e){const t=this.createAllDayAppointmentFilter(),n=hc(e,t);return xc(n)}createAllDayAppointmentFilter(){return[[e=>js(e,this.allDayPanelMode)]]}}Rc.strategyName="virtual";const Vc={[Rc.strategyName]:Rc,[Oc.strategyName]:Oc},Pc=e=>{const t={resources:e.option("resources"),getResourceManager:()=>e.resourceManager,dataAccessors:e._dataAccessors,startDayHour:()=>e.getViewOption("startDayHour"),endDayHour:()=>e.getViewOption("endDayHour"),viewOffset:()=>e.getViewOffsetMs(),showAllDayPanel:()=>e.option("showAllDayPanel"),timeZoneCalculator:e.timeZoneCalculator,supportAllDayRow:e._workSpace.supportAllDayRow(),viewType:()=>e._workSpace.type,viewDirection:()=>e._workSpace.viewDirection,dateRange:()=>e._workSpace.getDateRange(),groupCount:()=>e._workSpace._getGroupCount(),viewDataProvider:()=>e._workSpace.viewDataProvider,allDayPanelMode:()=>e.getViewOption("allDayPanelMode")},n=e.isVirtualScrolling()?Rc.strategyName:Oc.strategyName,i=new Vc[n](t);return i},Hc=e=>e.flatMap(e=>e.settings.map(t=>(0,d.A)({},t,{itemData:e.itemData}))),Wc=(e,t,n)=>{const i=Hc(e);return i.map(e=>{const{agendaSettings:i}=e,a=new it(i??e.itemData,t);return{isAgendaModel:!0,itemData:e.itemData,allDay:Boolean(e.allDay),groupIndex:e.groupIndex,sortedIndex:e.sortedIndex,direction:e.direction,height:e.height,width:e.width,info:{sourceAppointment:{allDay:e.allDay,startDate:a.startDate,endDate:a.endDate},appointment:(0,d.A)({allDay:e.allDay},a.getCalculatedDates(n,"toGrid"))}}})},$c=e=>({itemData:e.itemData,allDay:Boolean(e.allDay),direction:e.direction,groupIndex:e.groupIndex,sortedIndex:e.sortedIndex,skipResizing:e.skipResizing,level:e.index,maxLevel:e.count,info:{sourceAppointment:e.info.sourceAppointment,appointment:e.info.appointment},empty:e.geometry.empty,left:e.geometry.left,top:e.geometry.top,height:e.geometry.height,width:e.geometry.width,isCompact:e.isCompact,reduced:e.appointmentReduced,partIndex:e.partIndex,partTotalCount:e.partTotalCount,rowIndex:e.positionByMap.rowIndex,columnIndex:e.positionByMap.columnIndex}),Bc=(e,t)=>{if(!t.virtual)return;const n=t.virtual,i=n.index;(0,k.O9)(e[i])||(e[i]={itemData:t.itemData,allDay:Boolean(n.isAllDay),groupIndex:t.groupIndex,sortedIndex:t.sortedIndex,top:n.top,left:n.left,width:n.width,height:n.height,isCompact:n.isCompact,items:[]}),e[i].items.push($c(t))},Gc=(e,t)=>{const n=Hc(e),i=[],a={};n.map(e=>(0,d.A)({},e,{info:{sourceAppointment:e.info.sourceAppointment,appointment:(0,d.A)({},e.info.appointment,{startDate:t.createDate(e.info.sourceAppointment.startDate,"toGrid"),endDate:t.createDate(e.info.sourceAppointment.endDate,"toGrid")})}})).forEach(e=>{!0===Boolean(e.virtual)?Bc(a,e):i.push($c(e))});const r=[...i,...Object.values(a)];return r.sort((e,t)=>e.sortedIndex-t.sortedIndex).map((e,t)=>(0,d.A)({},e,{sortedIndex:t}))};class Nc{constructor(e){this.isVirtualScrolling=!1,this.options=e}get DOMMetaData(){return this.options.DOMMetaData}get appointments(){return this.options.dateSettings}get viewDataProvider(){return this.options.viewDataProvider}get positionHelper(){return this.options.positionHelper}get startViewDate(){return this.options.startViewDate}get viewStartDayHour(){return this.options.viewStartDayHour}get viewEndDayHour(){return this.options.viewEndDayHour}get cellDuration(){return this.options.cellDuration}get getPositionShift(){return this.options.getPositionShiftCallback}get groupCount(){return this.options.groupCount}get rtlEnabled(){return this.options.rtlEnabled}get isVerticalGrouping(){return this.options.isVerticalGroupOrientation}get showAllDayPanel(){return this.options.showAllDayPanel}get supportAllDayRow(){return this.options.supportAllDayRow}get isGroupedAllDayPanel(){return this.options.isGroupedAllDayPanel}calculateCellPositions(e,t,n){const i=[];return this.appointments.forEach((a,r)=>{const o=this.getCoordinateInfos({appointment:a,groupIndices:e,isAllDayRowAppointment:t,isRecurrentAppointment:n});o.forEach(e=>{Boolean(e)&&i.push(this._prepareObject(e,r))})}),i}getCoordinateInfos(e){const{appointment:t,isAllDayRowAppointment:n,groupIndices:i,recurrent:a}=e,{startDate:r}=t,o=a?void 0:t.source.groupIndex;return this.getCoordinatesByDateInGroup(r,i,n,o)}_prepareObject(e,t){return e.dateSettingIndex=t,{coordinates:e,dateSettingIndex:t}}getCoordinatesByDate(e,t,n){const i=t||0,a={groupIndex:i,startDate:e,isAllDay:n},r=this.viewDataProvider.findCellPositionInMap(a,!0);if(!r)return;const o=this.getCellPosition(r,n&&!this.isVerticalGrouping),s=this.viewDataProvider.getGroupEdgeIndices(i),{top:l}=this.getCellPosition({columnIndex:r.columnIndex,rowIndex:s.firstRowIndex},n&&!this.isVerticalGrouping),u=n?0:this.getTimeShiftRatio(r,e),d=this.getPositionShift(u,n),c=this.positionHelper.getHorizontalMax(i,e),h=this.positionHelper.getVerticalMax({groupIndex:i,isVirtualScrolling:this.isVirtualScrolling,showAllDayPanel:this.showAllDayPanel,supportAllDayRow:this.supportAllDayRow,isGroupedAllDayPanel:this.isGroupedAllDayPanel,isVerticalGrouping:this.isVerticalGrouping});return{positionByMap:r,cellPosition:o.left+d.cellPosition,top:o.top+d.top,left:o.left+d.left,rowIndex:o.rowIndex,columnIndex:o.columnIndex,hMax:c,vMax:h,vMin:l,groupIndex:i}}getCoordinatesByDateInGroup(e,t,n,i){const a=[];if(this.viewDataProvider.isSkippedDate(e))return a;let r=[i];return(0,k.O9)(i)||(r=this.groupCount?t:[0]),r.forEach(t=>{const i=this.getCoordinatesByDate(e,t,n);i&&a.push(i)}),a}getCellPosition(e,t){const{dateTableCellsMeta:n,allDayPanelCellsMeta:i}=this.DOMMetaData,{columnIndex:a,rowIndex:r}=e,o=t?i[a]:n[r][a],s=(0,d.A)({},o);return this.rtlEnabled&&(s.left+=o.width),s&&(s.rowIndex=e.rowIndex,s.columnIndex=e.columnIndex),s}getTimeShiftRatio(e,t){const{cellDuration:n,viewOffset:i}=this.options,{rowIndex:a,columnIndex:r}=e,o=this.viewDataProvider.viewDataMap.dateTableMap[a][r],s=R.X.addOffsets(o.cellData.startDate,[-i]),l=(t.getTime()-s.getTime())/n;return l%1}}class Fc extends Nc{constructor(){super(...arguments),this.isVirtualScrolling=!0}calculateCellPositions(e,t,n){return n?this.createRecurrentAppointmentInfos(this.appointments,t):super.calculateCellPositions(e,t,n)}createRecurrentAppointmentInfos(e,t){const n=[];return e.forEach((e,i)=>{let{source:a,startDate:r}=e;const o=this.getCoordinatesByDate(r,a.groupIndex,t);o&&n.push(this._prepareObject(o,i))}),n}}class zc{constructor(e){this.options=e}calculateCellPositions(e,t,n){const i=this.options.isVirtualScrolling?new Fc(this.options):new Nc(this.options);return i.calculateCellPositions(e,t,n)}}const Lc=A.A.dateToMilliseconds;class Uc{constructor(e){this.options=e}get resourceManager(){return this.options.getResourceManager()}get rawAppointment(){return this.options.rawAppointment}get timeZoneCalculator(){return this.options.timeZoneCalculator}get viewDataProvider(){return this.options.viewDataProvider}get appointmentTakesAllDay(){return this.options.appointmentTakesAllDay}get supportAllDayRow(){return this.options.supportAllDayRow}get isAllDayRowAppointment(){return this.options.isAllDayRowAppointment}get timeZone(){return this.options.timeZone}get dateRange(){return this.options.dateRange}get firstDayOfWeek(){return this.options.firstDayOfWeek}get viewStartDayHour(){return this.options.viewStartDayHour}get viewEndDayHour(){return this.options.viewEndDayHour}get endViewDate(){return this.options.endViewDate}get viewType(){return this.options.viewType}get isGroupedByDate(){return this.options.isGroupedByDate}get isVerticalOrientation(){return this.options.isVerticalGroupOrientation}get dataAccessors(){return this.options.dataAccessors}get isDateAppointment(){return!sl(this.viewType)&&this.appointmentTakesAllDay}getIntervalDuration(){return this.appointmentTakesAllDay?this.options.allDayIntervalDuration:this.options.intervalDuration}generate(e){const{isRecurrent:t}=e,n=this._getGroupIndices(this.rawAppointment);let i=this._createAppointments(e,n);i=this._getProcessedByAppointmentTimeZone(i,e),this._canProcessNotNativeTimezoneDates(e)&&(i=this._getProcessedNotNativeTimezoneDates(i,e));let a=this._createGridAppointmentList(i,e);const r=this._getAppointmentsFirstViewDate(a);return a=this._fillNormalizedStartDate(a,r),a=this._cropAppointmentsByStartDayHour(a,r),a=this._fillNormalizedEndDate(a,this.rawAppointment),this._needSeparateLongParts()&&(a=this._separateLongParts(a,e)),a=this.shiftSourceAppointmentDates(a),{dateSettings:a,itemGroupIndices:n,isRecurrent:t}}shiftSourceAppointmentDates(e){const{viewOffset:t}=this.options;return e.map(e=>(0,d.A)({},e,{source:(0,d.A)({},e.source,{startDate:R.X.addOffsets(e.source.startDate,[t]),endDate:R.X.addOffsets(e.source.endDate,[t])})}))}_getProcessedByAppointmentTimeZone(e,t){const n=!(0,k.RI)(t.startDateTimeZone)||!(0,k.RI)(t.endDateTimeZone);if(n){const n={startDate:this.timeZoneCalculator.getOffsets(t.startDate,t.startDateTimeZone),endDate:this.timeZoneCalculator.getOffsets(t.endDate,t.endDateTimeZone)};e.forEach(e=>{const i=this.timeZoneCalculator.getOffsets(e.startDate,t.startDateTimeZone),a=this.timeZoneCalculator.getOffsets(e.endDate,t.endDateTimeZone),r=n.startDate.appointment-i.appointment,o=n.endDate.appointment-a.appointment;i.appointment!==i.common&&(e.startDate=new Date(e.startDate.getTime()+r*Lc("hour"))),a.appointment!==a.common&&(e.endDate=new Date(e.endDate.getTime()+o*Lc("hour")))})}return e}_createAppointments(e,t){let n=this._createRecurrenceAppointments(e,t);return e.isRecurrent||0!==n.length||n.push({startDate:e.startDate,endDate:e.endDate}),n=n.map(e=>{var t;const n=null===(t=e.endDate)||void 0===t?void 0:t.getTime();return e.startDate.getTime()===n&&e.endDate.setTime(n+Lc("minute")),(0,d.A)({},e)}),n}_canProcessNotNativeTimezoneDates(e){const t=!(0,k.RI)(this.timeZone);return!!t&&(!!e.isRecurrent&&!Oe.A.isEqualLocalTimeZone(this.timeZone,e.startDate))}_getDateOffsetDST(e){const t=new Date(e);t.setHours(t.getHours()-1);const n=this.timeZoneCalculator.getOffsets(e).common,i=this.timeZoneCalculator.getOffsets(t).common;return i-n}_getProcessedNotNativeDateIfCrossDST(e,t){return t<0&&0!==this._getDateOffsetDST(e)?0:t}_getCommonOffset(e){return this.timeZoneCalculator.getOffsets(e).common}_getProcessedNotNativeTimezoneDates(e,t){return e.map(e=>{let n=this._getCommonOffset(t.startDate)-this._getCommonOffset(e.startDate),i=this._getCommonOffset(t.endDate)-this._getCommonOffset(e.endDate);if(0===n&&0===i)return e;n=this._getProcessedNotNativeDateIfCrossDST(e.startDate,n),i=this._getProcessedNotNativeDateIfCrossDST(e.endDate,i);const a=new Date(e.startDate.getTime()+n*Lc("hour"));let r=new Date(e.endDate.getTime()+i*Lc("hour"));const o=this.timeZoneCalculator.createDate(a,"toGrid"),s=this.timeZoneCalculator.createDate(r,"toGrid");return t.duration>s.getTime()-o.getTime()&&(r=new Date(a.getTime()+t.duration)),(0,d.A)({},e,{startDate:a,endDate:r})})}_needSeparateLongParts(){return this.isVerticalOrientation?this.isGroupedByDate:this.isGroupedByDate&&this.appointmentTakesAllDay}normalizeEndDateByViewEnd(e,t){let n=new Date(t.getTime());const i=sl(this.viewType)&&this.appointmentTakesAllDay;if(!i){const e=A.A.roundToHour(this.endViewDate);n>e&&(n=e)}const a=this.viewEndDayHour,r=this.dataAccessors.get("allDay",e),o=new Date(new Date(t.getTime()).setHours(a,0,0,0));return(n.getTime()>o.getTime()||r&&n.getHours()<a)&&(n=o),n}_fillNormalizedEndDate(e,t){return e.map(e=>(0,d.A)({},e,{normalizedEndDate:this.normalizeEndDateByViewEnd(t,e.endDate)}))}_separateLongParts(e,t){let n=[];return e.forEach(e=>{const i=new Date(this.dateRange[1]),{startDate:a,normalizedEndDate:r}=e,o=A.A.getDatesOfInterval(a,r,{milliseconds:this.getIntervalDuration()}),s=o.filter(e=>new Date(e)<i).map(n=>{const i=new Date(new Date(n).setMilliseconds(t.duration)),a=this.normalizeEndDateByViewEnd(this.rawAppointment,i);return{startDate:n,endDate:i,normalizedEndDate:a,source:e.source}});n=n.concat(s)}),n}_createGridAppointmentList(e,t){return e.map(e=>{const n=t.startDate.getTimezoneOffset()-e.startDate.getTimezoneOffset();0!==n&&this._canProcessNotNativeTimezoneDates(t)&&(e.startDate=R.X.addOffsets(e.startDate,[n*Lc("minute")]),e.endDate=R.X.addOffsets(e.endDate,[n*Lc("minute")]));const i=e.endDate.getTime()-e.startDate.getTime(),a=this.timeZoneCalculator.createDate(e.startDate,"toGrid"),r=R.X.addOffsets(a,[i]);return{startDate:a,endDate:r,allDay:t.allDay||!1,source:e}})}_createExtremeRecurrenceDates(e){let t=this.appointmentTakesAllDay?A.A.trimTime(this.dateRange[0]):this.dateRange[0],n=this.dateRange[1];if(this.timeZone){t=this.timeZoneCalculator.createDate(t,"fromGrid"),n=this.timeZoneCalculator.createDate(n,"fromGrid");const e=Oe.A.getDaylightOffsetInMs(t,n);e&&(n=new Date(n.getTime()+e))}return[t,n]}_createRecurrenceOptions(e,t){const{viewOffset:n}=this.options,i=R.X.addOffsets(e.startDate,[n]),a=R.X.addOffsets(e.endDate,[n]),[r,o]=this._createExtremeRecurrenceDates(t),s=R.X.addOffsets(r,[n]),l=R.X.addOffsets(o,[n]);return{rule:e.recurrenceRule,exception:e.recurrenceException,min:s,max:l,firstDayOfWeek:this.firstDayOfWeek,start:i,end:a,appointmentTimezoneOffset:this.timeZoneCalculator.getOriginStartDateOffsetInMs(i,e.startDateTimeZone,!0),getExceptionDateTimezoneOffsets:t=>{const n=-Oe.A.getClientTimezoneOffset(t),i=this.timeZoneCalculator.getOriginStartDateOffsetInMs(t,e.startDateTimeZone,!0),a=this._getDateOffsetDST(t),r=a<0?a*Lc("hour"):0;return[n,i,r]}}}_createRecurrenceAppointments(e,t){const{duration:n}=e,{viewOffset:i}=this.options,a=this._createRecurrenceOptions(e),r=ja(a);return r.map(e=>{const t=Oe.A.createUTCDateWithLocalOffset(e);t.setTime(t.getTime()+n);const i=Oe.A.createDateFromUTCWithLocalOffset(t);return{startDate:new Date(e),endDate:i}}).map(e=>{let{startDate:t,endDate:n}=e;return{startDate:R.X.addOffsets(t,[-i]),endDate:R.X.addOffsets(n,[-i])}})}_getAppointmentsFirstViewDate(e){const{viewOffset:t}=this.options;return e.map(e=>{const n=this._getAppointmentFirstViewDate((0,d.A)({},e,{startDate:R.X.addOffsets(e.startDate,[t]),endDate:R.X.addOffsets(e.endDate,[t])}));if(!n)return e.startDate;const i=R.X.addOffsets(n,[-t]);return i>e.startDate?i:e.startDate})}_fillNormalizedStartDate(e,t,n){return e.map((e,i)=>(0,d.A)({},e,{startDate:this._getAppointmentResultDate({appointment:e,rawAppointment:n,startDate:new Date(e.startDate),startDayHour:this.viewStartDayHour,firstViewDate:t[i]})}))}_cropAppointmentsByStartDayHour(e,t){return e.filter((e,n)=>!!t[n]&&(!!this.appointmentTakesAllDay||e.endDate>e.startDate))}_getAppointmentResultDate(e){const{appointment:t,startDayHour:n,firstViewDate:i}=e;let a,{startDate:r}=e;return this.appointmentTakesAllDay?a=A.A.normalizeDate(r,i):(r<i&&(r=i),a=A.A.normalizeDate(t.startDate,r)),this.isDateAppointment?a:A.A.roundDateByStartDayHour(a,n)}_getAppointmentFirstViewDate(e){const t=e.source.groupIndex||0,{startDate:n,endDate:i}=e;return this.isAllDayRowAppointment||e.allDay?this.viewDataProvider.findAllDayGroupCellStartDate(t):this.viewDataProvider.findGroupCellStartDate(t,n,i,this.isDateAppointment)}_getGroupIndices(e){const t=st(e,this.resourceManager.resources);return ht(t,this.resourceManager.groupsLeafs)}}class Zc extends Uc{get groupCount(){return this.resourceManager.groupCount()}_createRecurrenceAppointments(e,t){const{duration:n}=e,i=[],a=this.groupCount?t:[0];return a.forEach(t=>{const a=this._createRecurrenceOptions(e,t),r=ja(a),o=r.map(e=>{const i=new Date(e),a=Oe.A.createUTCDateWithLocalOffset(e);a.setTime(a.getTime()+n);const r=Oe.A.createDateFromUTCWithLocalOffset(a);return{startDate:i,endDate:r,groupIndex:t}});i.push(...o)}),i}_updateGroupIndices(e,t){const n=[];return t.forEach(t=>{const i=this.viewDataProvider.getGroupStartDate(t);i&&e.forEach(e=>{const i=(0,T.X)({},e);i.groupIndex=t,n.push(i)})}),n}_getGroupIndices(e){var t;let n=super._getGroupIndices(e);const i=this.viewDataProvider.getGroupIndices();return null!==(t=n)&&void 0!==t&&t.length||(n=[0]),n.filter(e=>-1!==i.indexOf(e))}_createAppointments(e,t){const n=super._createAppointments(e,t);return e.isRecurrent?n:this._updateGroupIndices(n,t)}}class Yc{constructor(e){this.options=e,this.appointmentAdapter=new it(this.rawAppointment,this.dataAccessors)}get rawAppointment(){return this.options.rawAppointment}get dataAccessors(){return this.options.dataAccessors}get timeZoneCalculator(){return this.options.timeZoneCalculator}get isAllDayRowAppointment(){return this.options.appointmentTakesAllDay&&this.options.supportAllDayRow}get groups(){return this.options.groups}get dateSettingsStrategy(){const e=(0,d.A)({},this.options,{isAllDayRowAppointment:this.isAllDayRowAppointment});return this.options.isVirtualScrolling?new Zc(e):new Uc(e)}create(){const{dateSettings:e,itemGroupIndices:t,isRecurrent:n}=this._generateDateSettings(),{isVirtualScrolling:i,viewDataProvider:a}=this.options,r=this.isAllDayRowAppointment||!i?e:e.filter(e=>{let{source:t,startDate:n,endDate:i}=e;return a.isGroupIntersectDateInterval(t.groupIndex,n,i)}),o=this._calculateCellPositions(r,t),s=this._prepareAppointmentInfos(r,o,n);return s}_generateDateSettings(){return this.dateSettingsStrategy.generate(this.appointmentAdapter)}_calculateCellPositions(e,t){const n=new zc((0,d.A)({},this.options,{dateSettings:e}));return n.calculateCellPositions(t,this.isAllDayRowAppointment,this.appointmentAdapter.isRecurrent)}_prepareAppointmentInfos(e,t,n){const i=[];return t.forEach(t=>{let{coordinates:a,dateSettingIndex:r}=t;const o=e[r],s=this._getAppointmentDateText(o),l={appointment:o,sourceAppointment:o.source,dateText:s,isRecurrent:n};i.push((0,d.A)({},a,{info:l}))}),i}_getAppointmentDateText(e){const{startDate:t,endDate:n,allDay:i}=e;return Ms({startDate:t,endDate:n,allDay:i,format:"TIME"})}}class jc{constructor(e){this._renderingStrategy=e}getDropDownAppointmentWidth(e,t){return t||!(0,k.O9)(t)?75*this._renderingStrategy.cellWidth/100:24}getCollectorTopOffset(e){return 3}getCollectorLeftOffset(){return 3}getAppointmentDefaultOffset(){return this._renderingStrategy._isCompactTheme()?22:this._renderingStrategy.appointmentOffset}getDynamicAppointmentCountPerCell(){const e=this._renderingStrategy,{cellHeight:t}=e,n=Math.floor((t-e._getAppointmentDefaultOffset())/e._getAppointmentDefaultHeight())||this._getAppointmentMinCount();return e.allDaySupported()?{allDay:"vertical"===e.groupOrientation?n:this._renderingStrategy.appointmentCountPerCell,simple:this._calculateDynamicAppointmentCountPerCell()||this._getAppointmentMinCount()}:n}getDropDownAppointmentHeight(){}_getAppointmentMinCount(){return 1}_calculateDynamicAppointmentCountPerCell(){return Math.floor(this._renderingStrategy._getAppointmentMaxWidth()/50)}_getAppointmentDefaultWidth(){return 40}}var Xc=jc;class qc extends Xc{getDropDownAppointmentWidth(e,t){return this.getDropDownButtonAdaptiveSize()}getDropDownButtonAdaptiveSize(){return 28}getCollectorTopOffset(e){const t=this._renderingStrategy;return t.allDaySupported()&&e?(t.allDayHeight-t.getDropDownButtonAdaptiveSize())/2:this._renderingStrategy.cellHeight-40}getCollectorLeftOffset(){const e=this._renderingStrategy.getDropDownAppointmentWidth();return(this._renderingStrategy.cellWidth-e)/2}getAppointmentDefaultOffset(){return 35}getDynamicAppointmentCountPerCell(){const e=this._renderingStrategy;return e.allDaySupported()?{allDay:0,simple:this._calculateDynamicAppointmentCountPerCell()||this._getAppointmentMinCount()}:0}getDropDownAppointmentHeight(){return 28}_getAppointmentMinCount(){return 0}_getAppointmentDefaultWidth(){const e=this._renderingStrategy;return e.allDaySupported()?30:super._getAppointmentDefaultWidth()}_calculateDynamicAppointmentCountPerCell(){return Math.floor(this._renderingStrategy._getAppointmentMaxWidth()/this._renderingStrategy._getAppointmentDefaultWidth())}}var Kc=qc;const Qc=A.A.dateToMilliseconds;class Jc{constructor(e){this.options=e,this._initPositioningStrategy()}get isAdaptive(){return this.options.adaptivityEnabled}get rtlEnabled(){return this.options.rtlEnabled}get startDayHour(){return this.options.startDayHour}get endDayHour(){return this.options.endDayHour}get maxAppointmentsPerCell(){return this.options.maxAppointmentsPerCell}get cellWidth(){return this.options.cellWidth}get cellHeight(){return this.options.cellHeight}get allDayHeight(){return this.options.allDayHeight}get resizableStep(){return this.options.resizableStep}get isGroupedByDate(){return this.options.isGroupedByDate}get visibleDayDuration(){return this.options.visibleDayDuration}get viewStartDayHour(){return this.options.viewStartDayHour}get viewEndDayHour(){return this.options.viewEndDayHour}get cellDuration(){return this.options.cellDuration}get cellDurationInMinutes(){return this.options.cellDurationInMinutes}get leftVirtualCellCount(){return this.options.leftVirtualCellCount}get topVirtualCellCount(){return this.options.topVirtualCellCount}get positionHelper(){return this.options.positionHelper}get showAllDayPanel(){return this.options.showAllDayPanel}get isGroupedAllDayPanel(){return this.options.isGroupedAllDayPanel}get groupOrientation(){return this.options.groupOrientation}get rowCount(){return this.options.rowCount}get groupCount(){return this.options.groupCount}get currentDate(){return this.options.currentDate}get appointmentCountPerCell(){return this.options.appointmentCountPerCell}get appointmentOffset(){return this.options.appointmentOffset}get allowResizing(){return this.options.allowResizing}get allowAllDayResizing(){return this.options.allowAllDayResizing}get viewDataProvider(){return this.options.viewDataProvider}get dataAccessors(){return this.options.dataAccessors}get timeZoneCalculator(){return this.options.timeZoneCalculator}get intervalCount(){return this.options.intervalCount}get allDayPanelMode(){return this.options.allDayPanelMode}get isVirtualScrolling(){return this.options.isVirtualScrolling}_correctCollectorCoordinatesInAdaptive(e,t){e.top+=this.getCollectorTopOffset(t),e.left+=this.getCollectorLeftOffset()}_initPositioningStrategy(){this._positioningStrategy=this.isAdaptive?new Kc(this):new Xc(this)}getPositioningStrategy(){return this._positioningStrategy}getAppointmentMinSize(){return 2}keepAppointmentSettings(){return!1}getAppointmentGeometry(e){return e}getDirection(){return"horizontal"}createTaskPositionMap(e,t){delete this._maxAppointmentCountPerCell;const n=null===e||void 0===e?void 0:e.length;if(!n)return;const i=[];for(let o=0;o<n;o++){let t=this._getItemPosition(e[o]);t.length&&this.rtlEnabled&&(t=this._correctRtlCoordinates(t)),t.forEach(e=>{e.leftVirtualCellCount=this.leftVirtualCellCount,e.topVirtualCellCount=this.topVirtualCellCount,e.leftVirtualWidth=this.leftVirtualCellCount*this.cellWidth,e.topVirtualHeight=this.topVirtualCellCount*this.cellHeight}),i.push(t)}const a=this._getSortedPositions(i),r=this._getResultPositions(a);return this._getExtendedPositionMap(i,r)}_correctRtlCoordinates(e){const t=e[0].width||this._getAppointmentMaxWidth();return e.forEach(e=>{e.appointmentReduced||(e.left-=t)}),e}_getAppointmentMaxWidth(){return this.cellWidth}_getItemPosition(e){const t=this.shiftAppointmentByViewOffset(e),n=this.generateAppointmentSettings(t),i=this.isAllDay(t);let a=[];for(let r=0;r<n.length;r++){const e=this.calculateAppointmentHeight(t,n[r]),o=this.calculateAppointmentWidth(t,n[r]);let s=o,l=null,u=[],d=n[r].rowIndex,c=n[r].columnIndex;if(this._needVerifyItemSize()||i){const t=n[r].hMax;this.isAppointmentGreaterThan(t,{left:n[r].left,width:o})&&(l="head",d=n[r].rowIndex,c=n[r].columnIndex,s=this._reduceMultiWeekAppointment(o,{left:n[r].left,right:t}),u=this._getAppointmentParts({sourceAppointmentWidth:o,reducedWidth:s,height:e},n[r]),this.rtlEnabled&&(n[r].left=t))}(0,T.X)(n[r],{height:e,width:s,allDay:i,rowIndex:d,columnIndex:c,appointmentReduced:l}),a=this._getAppointmentPartsPosition(u,n[r],a)}return a}_getAppointmentPartsPosition(e,t,n){return e.length?(e.unshift(t),e.forEach((t,n)=>{t.partIndex=n,t.partTotalCount=e.length}),n=n.concat(e)):n.push(t),n}getAppointmentSettingsGenerator(e){return new Yc((0,d.A)({rawAppointment:e,appointmentTakesAllDay:this.isAppointmentTakesAllDay(e),getPositionShiftCallback:this.getPositionShift.bind(this)},this.options))}generateAppointmentSettings(e){return this.getAppointmentSettingsGenerator(e).create()}isAppointmentTakesAllDay(e){return js(new it(e,this.dataAccessors),this.allDayPanelMode)}_getAppointmentParts(e,t){return[]}_getCompactAppointmentParts(e){const t=this.cellWidth||this.getAppointmentMinSize();return Math.round(e/t)}_reduceMultiWeekAppointment(e,t){return e=this.rtlEnabled?Math.floor(t.left-t.right):t.right-Math.floor(t.left),e}calculateAppointmentHeight(e,t){return 0}calculateAppointmentWidth(e,t){return 0}isAppointmentGreaterThan(e,t){let n=t.left+t.width-e;return this.rtlEnabled&&(n=e+t.width-t.left),n>this.cellWidth/2}isAllDay(e){return!1}cropAppointmentWidth(e,t){return this.isGroupedByDate?t:e}_getSortedPositions(e,t){const n=[],i=e=>Math.round(100*e)/100,a=(e,t,n,a,r,o,s,l)=>({i:e,j:t,top:i(n),left:i(a),bottom:i(r),right:i(o),cellPosition:s,allDay:l});for(let r=0,o=e.length;r<o;r++)for(let t=0,i=e[r].length;t<i;t++){const{top:i,left:o,height:s,width:l,cellPosition:u,allDay:d}=e[r][t];n.push(a(r,t,i,o,i+s,o+l,u,d))}return n.sort((e,t)=>this._sortCondition(e,t))}_sortCondition(e,t){}_getConditions(e,t){const n=this._isSomeEdge(e,t);return{columnCondition:n||this._normalizeCondition(e.left,t.left),rowCondition:n||this._normalizeCondition(e.top,t.top),cellPositionCondition:n||this._normalizeCondition(e.cellPosition,t.cellPosition)}}_rowCondition(e,t){const n=this._getConditions(e,t);return n.columnCondition||n.rowCondition}_columnCondition(e,t){const n=this._getConditions(e,t);return n.rowCondition||n.columnCondition}_isSomeEdge(e,t){return e.i===t.i&&e.j===t.j}_normalizeCondition(e,t){const n=e-t;return Math.abs(n)>1?n:0}_isItemsCross(e,t){const n=Boolean(e.allDay)===Boolean(t.allDay),i=e.allDay&&t.allDay;if(n){const n=this._getOrientation(i);return this._checkItemsCrossing(e,t,n)}return!1}_checkItemsCrossing(e,t,n){const i=Math.floor(e[n[0]]),a=Math.floor(e[n[1]]),r=Math.ceil(t[n[0]]),o=Math.ceil(t[n[1]]),s=Math.abs(e[n[2]]-t[n[2]])<=1;return s&&(i<=r&&a>r||i<o&&a>=o||i===r&&a===o)}_getOrientation(e){return e?["left","right","top"]:["top","bottom","left"]}_getResultPositions(e){const t=[];let n,i,a,r,o=0,s=0,l={};const u=(e,t)=>{const n=e.some(e=>e===t);return n?u(e,++t):t},d=(e,t)=>{const n=t||0,i=this._skipSortedIndex(n);return i&&(l.shouldShiftAfterSkip=!0),{index:n,i:e.i,j:e.j,left:e.left,right:e.right,top:e.top,bottom:e.bottom,allDay:e.allDay,sortedIndex:i?l.startSortedIndex:o++}},c=e=>{l.items=[d(e)],l.left=e.left,l.right=e.right,l.top=e.top,l.bottom=e.bottom,l.allDay=e.allDay,l.startSortedIndex=l.items[0].sortedIndex},h=e=>{e.items.forEach(n=>{t.push({index:n.index,count:s+1,i:n.i,j:n.j,sortedIndex:e.shouldShiftAfterSkip&&!this._skipSortedIndex(n.index)?n.sortedIndex+1:n.sortedIndex})}),e.shouldShiftAfterSkip&&(o+=1)};for(n=0;n<e.length;n++)i=e[n],a=[],l.items?this._isItemsCross(l,i)?(l.items.forEach(e=>{this._isItemsCross(e,i)&&a.push(e.index)}),r=a.length?u(a,0):0,l.items.push(d(i,r)),s=Math.max(r,s),l.left=Math.min(l.left,i.left),l.right=Math.max(l.right,i.right),l.top=Math.min(l.top,i.top),l.bottom=Math.max(l.bottom,i.bottom),l.allDay=i.allDay):(h(l),l={},c(i),s=0):c(i);return l.items&&h(l),t.sort((e,t)=>{const n=e.j-t.j,i=e.i-t.i;return i||n})}_skipSortedIndex(e){return e>this._getMaxAppointmentCountPerCell()-1}_findIndexByKey(e,t,n,i,a){let r=0;for(let o=0,s=e.length;o<s;o++)if(e[o][t]===i&&e[o][n]===a){r=o;break}return r}_getExtendedPositionMap(e,t){let n=0;const i=[];for(let a=0,r=e.length;a<r;a++){const r=[];for(let i=0,o=e[a].length;i<o;i++)e[a][i].index=t[n].index,e[a][i].sortedIndex=t[n].sortedIndex,e[a][i].count=t[n++].count,r.push(e[a][i]),this._checkLongCompactAppointment(e[a][i],r);i.push(r)}return i}_checkLongCompactAppointment(e,t){return this._splitLongCompactAppointment(e,t),t}_splitLongCompactAppointment(e,t){const n=this._getMaxAppointmentCountPerCellByType(e.allDay);let i=0;if(void 0!==n&&e.index>n-1){e.isCompact=!0,i=this._getCompactAppointmentParts(e.width);for(let n=1;n<i;n++){const i=(0,T.X)(!0,{},e);i.left=this._getCompactLeftCoordinate(e.left,n),i.columnIndex+=n,i.sortedIndex=null,t.push(i)}}return t}_adjustDurationByDaylightDiff(e,t,n){const{viewOffset:i}=this.options,a=R.X.addOffsets(t,[i]),r=R.X.addOffsets(n,[i]),o=Oe.A.getDaylightOffset(a,r),s=this._needAdjustDuration(o)?this._calculateDurationByDaylightDiff(e,o):e;return s<=Math.abs(o)?e:s}_needAdjustDuration(e){return 0!==e}_calculateDurationByDaylightDiff(e,t){return e+t*Qc("minute")}_getCollectorLeftOffset(e){if(e||!this.isApplyCompactAppointmentOffset())return 0;const t=this.getDropDownAppointmentWidth(this.intervalCount,e),n=this._isCompactTheme()?1:5;return this.cellWidth-t-n}_markAppointmentAsVirtual(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._getMaxAppointmentCountPerCellByType(t);if(e.count-n>0){const{top:n,left:i}=e,a=this.isAdaptive||!t&&this.supportCompactDropDownAppointments(),r=this.getDropDownAppointmentWidth(this.intervalCount,t)-this.options._collectorOffset,o=this.getDropDownAppointmentHeight(),s=this.rtlEnabled?r:0;e.virtual={left:i+this._getCollectorLeftOffset(t)+s,top:n,width:r,height:o,index:this._generateAppointmentCollectorIndex(e,t),isAllDay:t,groupIndex:e.groupIndex,isCompact:a}}}isApplyCompactAppointmentOffset(){return this.supportCompactDropDownAppointments()}supportCompactDropDownAppointments(){return!0}_generateAppointmentCollectorIndex(e,t){let{groupIndex:n,rowIndex:i,columnIndex:a}=e;return`${n}-${i}-${a}-${t}`}_getMaxAppointmentCountPerCellByType(e){const t=this._getMaxAppointmentCountPerCell();return(0,k.Gv)(t)?e?t.allDay:t.simple:t}getDropDownAppointmentWidth(e,t){return this.getPositioningStrategy().getDropDownAppointmentWidth(e,t)}getDropDownAppointmentHeight(){return this.getPositioningStrategy().getDropDownAppointmentHeight()}getDropDownButtonAdaptiveSize(){return 28}getCollectorTopOffset(e){return this.getPositioningStrategy().getCollectorTopOffset(e)}getCollectorLeftOffset(){return this.getPositioningStrategy().getCollectorLeftOffset()}getAppointmentDataCalculator(){}getVerticalAppointmentHeight(e,t,n){let i=n;if((0,k.kf)(this.maxAppointmentsPerCell)){const e=this._getDynamicAppointmentCountPerCell(),a=e.allDay||e,r=Math.max(t,a);i=Math.min(r,n)}return e/i}_customizeCoordinates(e,t,n,i,a){const{index:r,count:o}=e,s=this.getVerticalAppointmentHeight(t,o,n),l=e.top+r*s,u=l+i,{width:d}=e,{left:c}=e;return e.isCompact&&(this.isAdaptive&&this._correctCollectorCoordinatesInAdaptive(e,a),this._markAppointmentAsVirtual(e,a)),{height:s,width:d,top:u,left:c,empty:this._isAppointmentEmpty(t,d)}}_isAppointmentEmpty(e,t){return e<this._getAppointmentMinHeight()||t<this._getAppointmentMinWidth()}_calculateGeometryConfig(e){const t=this.maxAppointmentsPerCell,n=this._getOffsets(),i=this._getAppointmentDefaultOffset();let a=this._getAppointmentCount(t,e),r=this._getDefaultRatio(e,a),o=this._getMaxHeight();(0,k.kf)(a)||(a=e.count,r=(o-n.unlimited)/o);let s=(1-r)*o;return("auto"===t||(0,k.kf)(t))&&(r=1,o-=i,s=i),{height:r*o,appointmentCountPerCell:a,offset:s}}_getAppointmentCount(e,t){}_getDefaultRatio(e,t){}_getOffsets(){}_getMaxHeight(){}_needVerifyItemSize(){return!1}_getMaxAppointmentCountPerCell(){if(!this._maxAppointmentCountPerCell){const e=this.maxAppointmentsPerCell;let t;(0,k.kf)(e)&&(t=e),"auto"===e&&(t=this._getDynamicAppointmentCountPerCell()),"unlimited"===e&&(t=void 0),this._maxAppointmentCountPerCell=t}return this._maxAppointmentCountPerCell}_getDynamicAppointmentCountPerCell(){return this.getPositioningStrategy().getDynamicAppointmentCountPerCell()}allDaySupported(){return!1}_isCompactTheme(){return"compact"===((0,Z.ss)()||"").split(".").pop()}_getAppointmentDefaultOffset(){return this.getPositioningStrategy().getAppointmentDefaultOffset()}_getAppointmentDefaultHeight(){return this._getAppointmentHeightByTheme()}_getAppointmentMinHeight(){return this._getAppointmentDefaultHeight()}_getAppointmentHeightByTheme(){return this._isCompactTheme()?18:20}_getAppointmentDefaultWidth(){return this.getPositioningStrategy()._getAppointmentDefaultWidth()}_getAppointmentMinWidth(){return this._getAppointmentDefaultWidth()}getAppointmentDurationInMs(e,t,n){if(n){const n=t.getTime()-e.getTime(),i=Math.ceil(n/Qc("day"));return i*this.visibleDayDuration}const i=Qc("hour"),a=A.A.trimTime(e),r=A.A.trimTime(t),o=r-a,s=o/Qc("day")+1,l=this.endDayHour-this.startDayHour,u=l*s,d=(e-a)/i,c=Math.max(0,d-this.startDayHour),h=Math.max(0,(t-r)/i-this.startDayHour),p=Math.max(0,l-h),m=(u-(c+p))*i;return m}getPositionShift(e,t){return{top:e*this.cellHeight,left:0,cellPosition:0}}shiftAppointmentByViewOffset(e){const{viewOffset:t}=this.options,n=this.dataAccessors.expr.startDateExpr,i=this.dataAccessors.expr.endDateExpr;let a=this.dataAccessors.get("startDate",e),r=this.dataAccessors.get("endDate",e);return a=R.X.addOffsets(a,[-t]),r=R.X.addOffsets(r,[-t]),(0,d.A)({},e,{[n]:a,[i]:r})}}var eh=Jc;class th extends eh{get instance(){return this.options.instance}get agendaDuration(){return this.options.agendaDuration}getAppointmentMinSize(){}keepAppointmentSettings(){return!0}getAppointmentGeometry(e){return e}groupAppointmentByResources(e){const t=this.options.getResourceManager(),n=pt(t.resourceById,t.groupsLeafs,e);return n.map(e=>e.map(e=>(0,d.A)({},e)))}createTaskPositionMap(e){let t,n;if(this.calculateRows(e,this.agendaDuration,this.currentDate),e.length){t=this.instance.fire("getAgendaVerticalStepHeight"),n=this.groupAppointmentByResources(e);let i=[];n.forEach(e=>{let t=[],n=[];e.forEach((e,i)=>{const a=this.instance.getAppointmentsInstance()._processRecurrenceAppointment(e,i);let r=null;a.indexes.length||(r=this.instance.getAppointmentsInstance()._processLongAppointment(e),t=t.concat(r.parts)),t=t.concat(a.parts),n=n.concat(a.indexes)}),this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(n,e),this.instance.getAppointmentsInstance()._combineAppointments(e,t),i=i.concat(e)}),Array.prototype.splice.apply(e,[0,e.length].concat(i))}const i=[];let a=0;return e.forEach((e,r)=>{i.push([{height:t,width:"100%",sortedIndex:a++,groupIndex:this._calculateGroupIndex(r,n),agendaSettings:e.settings}]),delete e.settings}),i}_calculateGroupIndex(e,t){let n=0;for(const i in t){const a=t[i].length;if(e>=n&&e<n+a)return Number(i);n+=a}}_getAppointmentMaxWidth(){return this.cellWidth}_needVerifyItemSize(){return!1}_getAppointmentParts(e,t){}_reduceMultiWeekAppointment(){}calculateAppointmentHeight(){return 0}calculateAppointmentWidth(){return 0}isAppointmentGreaterThan(e,t){}isAllDay(){return!1}_sortCondition(){}_rowCondition(e,t){}_columnCondition(e,t){}_findIndexByKey(e,t,n,i,a){}_markAppointmentAsVirtual(){}getDropDownAppointmentWidth(){}getCollectorLeftOffset(){}getCollectorTopOffset(){}calculateRows(e,t,n){this._rows=[],n=A.A.trimTime(new Date(n));const i=this.groupAppointmentByResources(e);return(0,bt.__)(i,(e,i)=>{const a=[],r={indexes:[],parts:[]};if(!i.length)return this._rows.push([]),!0;(0,bt.__)(i,(e,t)=>{const n=this.instance.getAppointmentsInstance()._processRecurrenceAppointment(t,e,!1);r.parts=r.parts.concat(n.parts),r.indexes=r.indexes.concat(n.indexes)}),this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(r.indexes,i),i.push(...r.parts);const o=i.length;for(let s=0;s<t;s++){const e=new Date(n);e.setMilliseconds(e.getMilliseconds()+864e5*s),void 0===a[s]&&(a[s]=0);for(let t=0;t<o;t++){const n=i[t].settings||i[t],r=new it(i[t],this.dataAccessors),o=Qr(r),l=this.dataAccessors.get("recurrenceRule",i[t]);(this.instance.fire("dayHasAppointment",e,n,!0)||!l&&o&&this.instance.fire("dayHasAppointment",e,i[t],!0))&&(a[s]+=1)}}this._rows.push(a)}),this._rows}_iterateRow(e,t,n){for(let i=0;i<e.length;i++)if(t.counter+=e[i],t.counter>=n){t.indexInRow=i;break}}getDateByIndex(e,t,n){const i={counter:0,indexInRow:0};e++;for(let a=0;a<t.length;a++)if(this._iterateRow(t[a],i,e),i.indexInRow)break;return new Date(new Date(n).setDate(n.getDate()+i.indexInRow))}getAppointmentDataCalculator(){return(e,t)=>{const n=e.index(),i=this.instance.getStartViewDate(),a=this.getDateByIndex(n,this._rows,i),r=new Date(t);return{startDate:new Date(a.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))}}}}var nh=th;const ih=A.A.dateToMilliseconds;class ah extends eh{_needVerifyItemSize(){return!0}calculateAppointmentWidth(e,t){const n=this.cellWidth||this.getAppointmentMinSize(),i=this.dataAccessors.get("allDay",e),{startDate:a,endDate:r,normalizedEndDate:o}=t.info.appointment;let s=this.getAppointmentDurationInMs(a,o,i);s=this._adjustDurationByDaylightDiff(s,a,o);const l=this.cellDurationInMinutes*ih("minute"),u=bl(a,r,e.allDay,this.viewDataProvider),d=(s-u*ih("hour"))/l,c=this.cropAppointmentWidth(d*n,n);return c}_needAdjustDuration(e){return e<0}getAppointmentGeometry(e){const t=this._customizeAppointmentGeometry(e);return super.getAppointmentGeometry(t)}_customizeAppointmentGeometry(e){const t=this._calculateGeometryConfig(e);return this._customizeCoordinates(e,t.height,t.appointmentCountPerCell,t.offset)}_getOffsets(){return{unlimited:0,auto:0}}_getCompactLeftCoordinate(e,t){const n=this.cellWidth||this.getAppointmentMinSize();return e+n*t}_getMaxHeight(){return this.cellHeight||this.getAppointmentMinSize()}_getAppointmentCount(e,t){return this._getMaxAppointmentCountPerCellByType(!1)}_getAppointmentDefaultHeight(){return 60}_getAppointmentMinHeight(){return 35}_sortCondition(e,t){return this._columnCondition(e,t)}_getOrientation(){return["left","right","top"]}getDropDownAppointmentWidth(e,t){return this.cellWidth-4}isAllDay(e){return this.dataAccessors.get("allDay",e)}_isItemsCross(e,t){const n=this._getOrientation();return this._checkItemsCrossing(e,t,n)}getPositionShift(e){const t=super.getPositionShift(e);let n=this.cellWidth*e;return this.rtlEnabled&&(n*=-1),n+=t.left,{top:0,left:n,cellPosition:n}}supportCompactDropDownAppointments(){return!1}}var rh=ah;class oh extends rh{calculateAppointmentWidth(e,t){const{startDate:n,normalizedEndDate:i}=t.info.appointment,a=A.A.trimTime(n),r=this.cellWidth||this.getAppointmentMinSize(),o=Math.ceil(this._getDurationInDays(a,i));let s=this.cropAppointmentWidth(o*r,r);if(this.isVirtualScrolling){const e=this.viewDataProvider.getSkippedDaysCount(t.groupIndex,a,i,o);s-=e*r}return s}_columnCondition(e,t){const n=this._getConditions(e,t);return n.rowCondition||n.columnCondition||n.cellPositionCondition}_getDurationInDays(e,t){const n=this._adjustDurationByDaylightDiff(t.getTime()-e.getTime(),e,t);return n/A.A.dateToMilliseconds("day")||1}isAllDay(){return!1}createTaskPositionMap(e,t){return t||Jr(e,this.dataAccessors),super.createTaskPositionMap(e)}_getSortedPositions(e,t){let n=super._getSortedPositions(e);return t||(n=(0,cc.A)(n).sortBy("top").thenBy("left").thenBy("cellPosition").thenBy("i").toArray()),n}getPositionShift(e){return{top:0,left:0,cellPosition:e*this.cellWidth}}}var sh=oh;const lh=A.A.dateToMilliseconds;class uh extends sh{get endViewDate(){return this.options.endViewDate}get adaptivityEnabled(){return this.options.adaptivityEnabled}get DOMMetaData(){return this.options.DOMMetaData}_getLeftPosition(e){const t=this.getGroupWidth(e.groupIndex);return this._calculateMultiWeekAppointmentLeftOffset(e.hMax,t)}_getChunkCount(e,t,n,i){const{groupIndex:a,info:{appointment:{startDate:r}}}=i,o=e-t+n,s=Math.ceil(o/n),l=this._tryGetRowIndexInView(r);if(void 0!==l){const e=this.viewDataProvider.getRowCountInGroup(a),t=e-l;return s<=t?s:t}return s}_tryGetRowIndexInView(e){var t;const n=this.viewDataProvider.getColumnsCount();if((null===(t=this.options.dataRange)||void 0===t?void 0:t.length)<1||!n)return;const[i]=this.options.dateRange,a=lh("day"),r=e.getTime()-i.getTime();return Math.floor(r/a/n)}_getChunkWidths(e,t,n){const i=e.reducedWidth,a=Math.floor(e.sourceAppointmentWidth),r=a-i;return[i,a,r]}_getTailChunkSettings(e,t,n){const i=e%t||t,a=n+(t-i),r=this.rtlEnabled?a:n;return[i,r]}_getAppointmentParts(e,t){const n=[],i=Math.round(this.getGroupWidth(t.groupIndex)),[a,r,o]=this._getChunkWidths(e,t,i),s=this._getLeftPosition(t),{endDate:l}=t.info.appointment,u=this.endViewDate>l,c=this._getChunkCount(r,a,i,t),[h,p]=this._getTailChunkSettings(o,i,s);for(let m=1;m<c;m++){const a=t.top+this.cellHeight*m,r=u&&m===c-1;n.push((0,d.A)({},t,{top:a,left:r?p:s,height:e.height,width:r?h:i,appointmentReduced:r?"tail":"body",rowIndex:++t.rowIndex,columnIndex:0}))}return n}_calculateMultiWeekAppointmentLeftOffset(e,t){return this.rtlEnabled?e:e-t}getGroupWidth(e){return sc(e,this.viewDataProvider,{intervalCount:this.options.intervalCount,currentDate:this.options.currentDate,viewType:this.options.viewType,hoursInterval:this.options.hoursInterval,startDayHour:this.options.startDayHour,endDayHour:this.options.endDayHour,isVirtualScrolling:this.isVirtualScrolling,rtlEnabled:this.rtlEnabled,DOMMetaData:this.DOMMetaData})}_getAppointmentDefaultHeight(){return this._getAppointmentHeightByTheme()}_getAppointmentMinHeight(){return this._getAppointmentDefaultHeight()}createTaskPositionMap(e){return super.createTaskPositionMap(e,!0)}_getSortedPositions(e){return super._getSortedPositions(e,!0)}_getDefaultRatio(){return.6}_getOffsets(){return{unlimited:26,auto:30}}getDropDownAppointmentWidth(e,t){if(this.adaptivityEnabled)return this.getDropDownButtonAdaptiveSize();const n=e>1?60:36;return this.cellWidth-n}}var dh=uh,ch=n(58936);const hh=A.A.dateToMilliseconds;class ph extends eh{_correctCollectorCoordinatesInAdaptive(e,t){if(t)super._correctCollectorCoordinatesInAdaptive(e,t);else if(0===this._getMaxAppointmentCountPerCellByType()){const{cellHeight:t}=this,{cellWidth:n}=this;e.top+=(t-this.getDropDownButtonAdaptiveSize())/2,e.left+=(n-this.getDropDownButtonAdaptiveSize())/2}}getAppointmentGeometry(e){let t=null;return t=e.allDay?this._getAllDayAppointmentGeometry(e):this.isAdaptive&&e.isCompact?this._getAdaptiveGeometry(e):this._getVerticalAppointmentGeometry(e),super.getAppointmentGeometry(t)}_getAdaptiveGeometry(e){const t=this._calculateGeometryConfig(e);return this._customizeCoordinates(e,t.height,t.appointmentCountPerCell,t.offset)}_getItemPosition(e){const t=this.isAllDay(e);if(t)return super._getItemPosition(e);const n=super.shiftAppointmentByViewOffset(e),i=new it(n,this.dataAccessors),a=i.isRecurrent,{startDate:r,endDate:o}=i.getCalculatedDates(this.timeZoneCalculator,"toGrid"),s=o.getTime()-r.getTime(),l=this.options.startViewDate<r,u=!Oe.A.isSameAppointmentDates(r,o),d=this.generateAppointmentSettings(n);let c=[];for(let h=0;h<d.length;h++){const e=d[h],i=this.calculateAppointmentHeight(n,e),o=this.calculateAppointmentWidth(n,e);let p=i,m=null,g=[];const f=e.vMax;if(this._isMultiViewAppointment(e,i)||u&&!a){const t=A.A.trimTime(r),n=A.A.trimTime(e.info.appointment.startDate),u=t<=n||a;u&&(p=this._reduceMultiDayAppointment(i,{top:e.top,bottom:f}),g=this._getAppointmentParts({sourceAppointmentHeight:i,reducedHeight:p,width:o},e));const{startDate:d,normalizedEndDate:c}=e.info.appointment,h=c-d,D=h<s;m=D?l?"head":"body":l?"head":"tail"}(0,T.X)(e,{height:p,width:o,allDay:t,appointmentReduced:m}),c=this._getAppointmentPartsPosition(g,e,c)}return c}_isMultiViewAppointment(e,t){let{vMax:n,top:i}=e;const a=(0,ch.ar)(t,2),r=(0,ch.ar)(n-i,2);return a>r}_reduceMultiDayAppointment(e,t){return Math.min(e,t.bottom-Math.floor(t.top))}_getGroupHeight(){return this.cellHeight*this.rowCount}_getGroupTopOffset(e){const{groupIndex:t}=e,n=Math.max(0,this.positionHelper.getGroupTop({groupIndex:t,showAllDayPanel:this.showAllDayPanel,isGroupedAllDayPanel:this.isGroupedAllDayPanel})),i=this.positionHelper.getOffsetByAllDayPanel({groupIndex:t,supportAllDayRow:this.allDaySupported(),showAllDayPanel:this.showAllDayPanel}),a=e.top-n-i;return a}_getTailHeight(e,t){if(!this.isVirtualScrolling)return e.sourceAppointmentHeight-e.reducedHeight;const n=this._getGroupTopOffset(t),{sourceAppointmentHeight:i}=e,a=this._getGroupHeight(),r=n+i-a;return r}_getAppointmentParts(e,t){const{width:n}=e,i=[];let a=Math.max(0,this.positionHelper.getGroupTop({groupIndex:t.groupIndex,showAllDayPanel:this.showAllDayPanel,isGroupedAllDayPanel:this.isGroupedAllDayPanel}));const r=this.isGroupedByDate?this.groupCount:1,o=this.cellWidth*r,s=this.positionHelper.getOffsetByAllDayPanel({groupIndex:t.groupIndex,supportAllDayRow:this.allDaySupported(),showAllDayPanel:this.showAllDayPanel});a+=s;const l=this.getAppointmentMinSize(),{hMax:u,vMax:c,vMin:h}=t,{bottomVirtualRowHeight:p=0}=this.viewDataProvider.getViewOptions(),m=this.isVirtualScrolling?c+p:c-h,g=this.options.endViewDate>t.info.appointment.endDate;let f=Math.round(t.left+o),D=this._getTailHeight(e,t),{columnIndex:y}=t;while(D>0&&f<Math.round(u)){D=Math.max(l,D),y+=r;const e=Math.min(D,m);i.push((0,d.A)({},t,{top:a,left:f,height:e,width:n,appointmentReduced:"body",rowIndex:0,columnIndex:y})),f+=o,D-=m}return g&&i.length>0&&(i[i.length-1].appointmentReduced="tail"),i}_getMinuteHeight(){return this.cellHeight/this.cellDurationInMinutes}_getCompactLeftCoordinate(e,t){const n=this.cellWidth||this.getAppointmentMinSize();return e+(1+n)*t}_getVerticalAppointmentGeometry(e){const t=this._calculateVerticalGeometryConfig(e);return this._customizeVerticalCoordinates(e,t.width,t.appointmentCountPerCell,t.offset)}_customizeVerticalCoordinates(e,t,n,i,a){const r=Math.max(t/n,t/e.count),{height:o}=e,s=e.left+e.index*r,{top:l}=e;return e.isCompact&&this._markAppointmentAsVirtual(e,a),{height:o,width:r,top:l,left:s,empty:this._isAppointmentEmpty(o,t)}}_calculateVerticalGeometryConfig(e){const t=this.maxAppointmentsPerCell,n=this._getOffsets(),i=this._getAppointmentDefaultOffset();let a=this._getAppointmentCount(t,e),r=this._getDefaultRatio(e,a),o=this._getMaxWidth();a||(a=e.count,r=(o-n.unlimited)/o);let s=(1-r)*o;return("auto"===t||(0,k.kf)(t))&&(r=1,o-=i,s=0),{width:r*o,appointmentCountPerCell:a,offset:s}}_getMaxWidth(){return this.cellWidth}isAllDay(e){return js(new it(e,this.dataAccessors),this.allDayPanelMode)}_getAppointmentMaxWidth(){return this.cellWidth-this._getAppointmentDefaultOffset()}calculateAppointmentWidth(e,t){if(!this.isAllDay(e))return 0;const{startDate:n,endDate:i,normalizedEndDate:a}=t.info.appointment,r=A.A.trimTime(n),o=this.cellWidth||this.getAppointmentMinSize(),s=(a.getTime()-r.getTime())/hh("hour"),l=bl(r,i,e.allDay,this.viewDataProvider);let u=Math.ceil((s-l)/24)*o;return u=this.cropAppointmentWidth(u,o),u}calculateAppointmentHeight(e,t){if(this.isAllDay(e))return 0;const{startDate:n,normalizedEndDate:i}=t.info.appointment,a=this.dataAccessors.get("allDay",e),r=this.getAppointmentDurationInMs(n,i,a),o=60*bl(n,i,e.allDay,this.viewDataProvider),s=this._adjustDurationByDaylightDiff(r,n,i)/hh("minute")-o,l=s*this._getMinuteHeight();return l}getDirection(){return"vertical"}_sortCondition(e,t){if(Boolean(e.allDay)!==Boolean(t.allDay))return e.allDay?1:-1;const n=e.allDay&&t.allDay;return"vertical"===this.groupOrientation&&n?this._columnCondition(e,t):this._rowCondition(e,t)}allDaySupported(){return!0}_getAllDayAppointmentGeometry(e){const t=this._calculateGeometryConfig(e);return this._customizeCoordinates(e,t.height,t.appointmentCountPerCell,t.offset,!0)}_calculateGeometryConfig(e){this.allowResizing&&this.allowAllDayResizing||(e.skipResizing=!0);const t=super._calculateGeometryConfig(e),n=Math.min(t.appointmentCountPerCell,this._getDynamicAppointmentCountPerCell().allDay);return e.allDay&&e.count<=n&&(t.offset=0),t}_getAppointmentCount(e,t){return"auto"===e||1!==t.count||(0,k.kf)(e)?this._getMaxAppointmentCountPerCellByType(t.allDay):t.count}_getDefaultRatio(e,t){return e.count>this.appointmentCountPerCell?.65:1}_getOffsets(){return{unlimited:5,auto:20}}_getMaxHeight(){return this.allDayHeight||this.getAppointmentMinSize()}getPositionShift(e,t){return!t&&this.isAdaptive&&0===this._getMaxAppointmentCountPerCellByType(t)?{top:0,left:0,cellPosition:0}:super.getPositionShift(e,t)}}var mh=ph;class gh extends mh{isApplyCompactAppointmentOffset(){return(!this.isAdaptive||0!==this._getMaxAppointmentCountPerCellByType())&&this.supportCompactDropDownAppointments()}}var fh=gh;const Dh={horizontal:rh,horizontalMonth:dh,horizontalMonthLine:sh,vertical:mh,week:fh,agenda:nh};class yh{initRenderingStrategy(e){const t=Dh[e.appointmentRenderingStrategyName];this.renderingStrategy=new t(e)}getRenderingStrategy(){return this.renderingStrategy}generate(e,t){const{viewOffset:n,appointmentRenderingStrategyName:i,dataAccessors:a,timeZoneCalculator:r}=t,o=e?e.slice():[];this.initRenderingStrategy(t);const s=this.getRenderingStrategy(),l=s.createTaskPositionMap(o),u=this.postProcess(o,l),d=this.unshiftViewModelAppointmentsByViewOffset(u,n);d.forEach(e=>{e.settings.forEach(e=>{e.geometry="agenda"===i?void 0:s.getAppointmentGeometry(e)})});const c="agenda"===i?Wc(d,a,r):Gc(d,r);return{positionMap:l,viewModel:c}}postProcess(e,t){const n=this.getRenderingStrategy();return e.map((e,i)=>{n.keepAppointmentSettings()||delete e.settings;const a=t[i];a.forEach(e=>{e.direction="vertical"!==n.getDirection()||e.allDay?"horizontal":"vertical"});const r={itemData:e,settings:a,needRepaint:!0,needRemove:!1};return r})}unshiftViewModelAppointmentsByViewOffset(e,t){const n=new Set;for(const a of e)for(const e of a.settings??[]){var i;const a=null===e||void 0===e||null===(i=e.info)||void 0===i?void 0:i.appointment;a&&!n.has(a)&&(a.startDate=R.X.addOffsets(a.startDate,[t]),a.endDate=R.X.addOffsets(a.endDate,[t]),a.normalizedEndDate=R.X.addOffsets(a.normalizedEndDate,[t]),n.add(a))}return e}}const _h=Hr.s.dateToMilliseconds,Ch=(e,t,n)=>{const i=n.get("startDate",e),a=n.get("endDate",e);if(!R.X.isValidDate(i))return!1;const r=!R.X.isValidDate(a)||i.getTime()>a.getTime();if(r){const a=n.get("allDay",e),r=a?Hr.s.setToDayEnd(new Date(i)):new Date(i.getTime()+t*_h("minute"));n.set("endDate",e,r)}return!0},vh=(e,t,n,i)=>{const a=[];return null===e||void 0===e||e.forEach(e=>{const r=Ch(e,n,t);if(!r)return;const o=new it(e,t),{startDate:s,endDate:l}=o.getCalculatedDates(i,"toGrid"),{recurrenceRule:u}=o,d=o.isRecurrent,c=!(0,k.O9)(e.visible)||Boolean(e.visible);a.push({allDay:Boolean(o.allDay),startDate:s,startDateTimeZone:e.startDateTimeZone,endDate:l,endDateTimeZone:e.endDateTimeZone,recurrenceRule:u,recurrenceException:o.recurrenceException,hasRecurrenceRule:d,visible:c,rawAppointment:e})}),a},wh=A.A.dateToMilliseconds,Ah={day:"vertical",week:"week",workWeek:"week",month:"horizontalMonth",timelineDay:"horizontal",timelineWeek:"horizontal",timelineWorkWeek:"horizontal",timelineMonth:"horizontalMonthLine",agenda:"agenda"};class Sh{constructor(e){this.instance=e,this.preparedItems=[],this.filteredItems=[],this.appointmentViewModel=new yh}get appointmentRenderingStrategyName(){return Ah[this.instance.currentView.type]}prepareItems(e){this.preparedItems=vh(e,this.instance._dataAccessors,this.instance.getViewOption("cellDuration"),this.instance.timeZoneCalculator)}filterAppointments(){const e=Pc(this.instance);this.filteredItems=e.filter(this.preparedItems)}hasAllDayAppointments(){const e=Pc(this.instance);return e.hasAllDayAppointments(this.filteredItems,this.preparedItems)}_getRenderingStrategyOptions(){const e=this.instance.getWorkSpace(),{virtualScrollingDispatcher:t}=this.instance.getWorkSpace(),{cellCountInsideLeftVirtualCell:n,cellCountInsideTopVirtualRow:i}=t,a=this.instance.resourceManager.groupCount(),r=e.getDOMElementsMetaData(),o=rc(e.option("showAllDayPanel"),e._isVerticalGroupedWorkSpace(),r),s=e._getRowCount(),{positionHelper:l,viewDataProvider:u}=e,d=u.getVisibleDayDuration(e.option("startDayHour"),e.option("endDayHour"),e.option("hoursInterval")),c=ml(e.type,e.option("startDayHour"),e.option("endDayHour"),e.option("hoursInterval"));return{resources:this.instance.option("resources"),getResourceManager:()=>this.instance.resourceManager,getAppointmentColor:e=>this.instance.resourceManager.getAppointmentColor(e),dataAccessors:this.instance._dataAccessors,appointmentRenderingStrategyName:this.appointmentRenderingStrategyName,adaptivityEnabled:this.instance.option("adaptivityEnabled"),rtlEnabled:this.instance.option("rtlEnabled"),startDayHour:this.instance.getViewOption("startDayHour"),endDayHour:this.instance.getViewOption("endDayHour"),viewOffset:this.instance.getViewOption("offset")*wh("minute"),maxAppointmentsPerCell:this.instance.getViewOption("maxAppointmentsPerCell"),currentDate:this.instance.option("currentDate"),isVirtualScrolling:this.instance.isVirtualScrolling(),leftVirtualCellCount:n,topVirtualCellCount:i,intervalCount:e.option("intervalCount"),hoursInterval:e.option("hoursInterval"),showAllDayPanel:e.option("showAllDayPanel"),isGroupedAllDayPanel:e.isGroupedAllDayPanel(),groups:this.instance.getViewOption("groups"),groupCount:a,rowCount:s,appointmentCountPerCell:this.instance.option("_appointmentCountPerCell"),appointmentOffset:this.instance.option("_appointmentOffset"),allowResizing:this.instance._allowResizing(),allowAllDayResizing:this.instance._allowAllDayResizing(),startViewDate:e.getStartViewDate(),groupOrientation:e._getRealGroupOrientation(),cellWidth:ac(r),cellHeight:ic(r),allDayHeight:o,resizableStep:l.getResizableStep(),visibleDayDuration:d,allDayPanelMode:this.instance.getViewOption("allDayPanelMode"),timeZoneCalculator:this.instance.timeZoneCalculator,timeZone:this.instance.option("timeZone"),firstDayOfWeek:this.instance.getFirstDayOfWeek(),viewStartDayHour:this.instance.getViewOption("startDayHour"),viewEndDayHour:this.instance.getViewOption("endDayHour"),viewType:e.type,endViewDate:e.getEndViewDate(),positionHelper:l,isGroupedByDate:e.isGroupedByDate(),cellDuration:c,cellDurationInMinutes:e.option("cellDuration"),viewDataProvider:e.viewDataProvider,supportAllDayRow:e.supportAllDayRow(),dateRange:e.getDateRange(),intervalDuration:e.getIntervalDuration(),allDayIntervalDuration:e.getIntervalDuration(!0),isVerticalGroupOrientation:e.isVerticalOrientation(),_collectorOffset:this.instance.getCollectorOffset(),DOMMetaData:r,instance:this.instance,agendaDuration:e.option("agendaDuration")}}createAppointmentsMap(){const e=this._getRenderingStrategyOptions(),{viewModel:t,positionMap:n}=this.appointmentViewModel.generate(this.filteredItems,e);return this._positionMap=n,t}getRenderingStrategyInstance(){const e=this.appointmentViewModel.getRenderingStrategy();if(!e){const e=this._getRenderingStrategyOptions();this.appointmentViewModel.initRenderingStrategy(e)}return this.appointmentViewModel.getRenderingStrategy()}}var bh=Sh,Th=n(69135);class xh{constructor(){this.VERTICAL="vertical",this.HORIZONTAL="horizontal"}insertAllDayRow(e,t,n){if(e[n]){let i=e[n].find("tr");i.length||(i=(0,D.A)(wt.A.createElement("tr")),i.append(e[n].get(0))),t.appendChild(i.get?i.get(0):i)}}makeTable(e){const t=wt.A.createElement("tbody"),n=[];let i;const a=e.groupCount?e.rowCount/e.groupCount:e.rowCount;let r=0;const{allDayElements:o}=e,{groupIndex:s}=e,{rowCount:l}=e;(0,D.A)(e.container).append(t),o&&(this.insertAllDayRow(o,t,0),r++);for(let c=0;c<l;c++){i=wt.A.createElement("tr"),t.appendChild(i);const l=(c+1)%a===0;e.rowClass&&(i.className=e.rowClass);for(let t=0;t<e.cellCount;t++){var u;const a=wt.A.createElement("td");let r,o,l;if(i.appendChild(a),e.cellClass&&((0,k.Tn)(e.cellClass)?a.className=e.cellClass(c,t):a.className=e.cellClass),e.getCellData&&(r=e.getCellData(a,c,t,s),o=r.key,l=r.value,o&&(0,At.p)(a,o,l)),null===(u=e.setAdditionalClasses)||void 0===u||u.call(e,(0,D.A)(a),l),e.cellTemplate&&e.cellTemplate.render){const i=e.getTemplateData?e.getTemplateData(c):{},r={model:(0,d.A)({text:e.getCellText?e.getCellText(c,t):"",date:e.getCellDate?e.getCellDate(c):void 0},i),container:(0,f.cc)((0,D.A)(a)),index:c*e.cellCount+t};l&&(l.startDate&&(r.model.startDate=l.startDate),l.endDate&&(r.model.endDate=l.endDate),l.groups&&(r.model.groups=l.groups),l.allDay&&(r.model.allDay=l.allDay)),n.push(e.cellTemplate.render.bind(e.cellTemplate,r))}else e.getCellText&&(0,D.A)("<div>").text(e.getCellText(c,t)).addClass(e.getCellTextClass).appendTo((0,D.A)(a))}o&&l&&(this.insertAllDayRow(o,t,r),r++)}return n}makeGroupedTable(e,t,n,i,a,r,o){let s=[];return s=e===this.VERTICAL?this._makeVerticalGroupedRows(t,n,a,r):this._makeHorizontalGroupedRows(t,n,i,a,o),s}makeGroupedTableFromJSON(e,t){let n;const i=[];let a=0;t=t||{};const r=t.cellTag||"td",{groupTableClass:o}=t,{groupRowClass:s}=t,{groupCellClass:l}=t,{groupCellCustomContent:u}=t;function d(e){return e.children?e.children.length:0}function c(e,t,n,i){const a={element:wt.A.createElement(r),childCount:t};l&&(a.element.className=l);const o=wt.A.createTextNode(e);return"function"===typeof u?u(a.element,o,n,i):a.element.appendChild(o),a}return function(){n=wt.A.createElement("table"),o&&(n.className=o)}(),function e(t){for(let n=0;n<t.length;n++){const r=d(t[n]),o=c(t[n].resourceText,r,n,t[n]);i[a]||(i[a]=[]),i[a].push(o),r?e(t[n].children):a++}}(e),i.forEach(e=>{const t=wt.A.createElement("tr");s&&(t.className=s);const i=[];for(let n=e.length-1;n>=0;n--){const t=e[n+1];let a=e[n].childCount;t&&t.childCount&&(a*=t.childCount),i.push(a)}i.reverse(),e.forEach((e,n)=>{i[n]&&e.element.setAttribute("rowSpan",i[n]),t.appendChild(e.element)}),n.appendChild(t)}),n}_makeFlexGroupedRowCells(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const r=[],{items:o}=e,s=o.length;for(let l=0;l<t*a;l++)for(let t=0;t<s;t++){let a=(0,D.A)("<div>");const u={};if(i&&i.render){const n={model:o[t],container:(0,f.cc)(a),index:l*s+t};e.data&&(n.model.data=e.data[t]),u.template=i.render.bind(i,n)}else a.text(o[t].text).attr("title",o[t].text).addClass("dx-scheduler-group-header-content"),a=(0,D.A)("<div>").append(a);const d=(0,k.Tn)(n.groupHeaderClass)?n.groupHeaderClass(t):n.groupHeaderClass;u.element=a.addClass(d),r.push(u)}return r}_makeVerticalGroupedRows(e,t,n,i){const a=[];let r=1;const o=[],s=function(e){e.template&&a.push(e.template)};for(let d=0;d<e.length;d++){d>0&&(r=e[d-1].items.length*r);const i=this._makeFlexGroupedRowCells(e[d],r,t,n);i.forEach(s),o.push(i)}const l=[],u=o.length;for(let d=0;d<u;d++)l.push((0,D.A)("<div>").addClass(t.groupHeaderRowClass));for(let d=u-1;d>=0;d--){const e=o[d].length;for(let t=0;t<e;t++)l[d].append(o[d][t].element)}return{elements:(0,D.A)("<div>").addClass("dx-scheduler-group-flex-container").append(l),cellTemplates:a}}_makeHorizontalGroupedRows(e,t,n,i,a){let r=1;const o=e.length,s=[],l=[],u=a?n:1,d=function(e){return e.template&&l.push(e.template),e.element};for(let h=0;h<o;h++){h>0&&(r=e[h-1].items.length*r);const n=this._makeGroupedRowCells(e[h],r,t,i,u);s.push((0,D.A)("<tr>").addClass(t.groupRowClass).append(n.map(d)))}const c=s[o-1].find("th").length;for(let h=0;h<o;h++){const e=s[h].find("th");let t=c/e.length;a||(t*=n),(t>1&&1===u||a&&o>1)&&e.attr("colSpan",t)}return{elements:s,cellTemplates:l}}_makeGroupedRowCells(e,t,n,i,a){a=a||1,t*=a;const r=[],{items:o}=e,s=o.length;for(let l=0;l<t;l++)for(let t=0;t<s;t++){let a=(0,D.A)("<div>");const u={};if(i&&i.render){const n={model:o[t],container:(0,f.cc)(a),index:l*s+t};e.data&&(n.model.data=e.data[t]),u.template=i.render.bind(i,n)}else a.text(o[t].text),a=(0,D.A)("<div>").append(a);let d;a.addClass(n.groupHeaderContentClass),d=(0,k.Tn)(n.groupHeaderClass)?n.groupHeaderClass(t):n.groupHeaderClass,u.element=(0,D.A)("<th>").addClass(d).append(a),r.push(u)}return r}}var kh={tableCreator:new xh};const Eh=(e,t,n)=>{const i=e[n.resourceIndex],a=n.grouped[n.resourceIndex];return t.some(e=>i.idsGetter(e).includes(a))},Ih=(e,t,n)=>{if(Eh(e,t,n))return(0,d.A)({},n,{children:n.children.length?n.children.map(n=>Ih(e,t,n)).filter(Boolean):[]})},Oh=(e,t,n)=>t.map(t=>Ih(e,n,t)).filter(Boolean);var Mh=n(97137),Rh=n(39332);function Vh(e){const t=e();let n={};return function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a={top:void 0!==e.top?Math.ceil(e.top):void 0,left:void 0!==e.left?Math.ceil(e.left):void 0},r=a.top===n.top&&a.left===n.left;!i&&r||(n=a,t.scrollTo(e))}}var Ph=n(59652),Hh=n(60550),Wh=n(20177);class $h extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const e=p.A.format("dxScheduler-allDay");return(0,Hh.bF)(1,"div","dx-scheduler-all-day-title",e,0)}}$h.defaultProps={};class Bh extends Ph.X{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:[],props:[]}}get _viewComponent(){return $h}}(0,m.A)("dxAllDayPanelTitle",Bh);const Gh={allDayPanelHeight:25},Nh="dx-scheduler-date-table-cell",Fh="dx-scheduler-date-table-row",zh="dx-scheduler-all-day-table-cell";var Lh=n(8895);const Uh=e=>{let{template:t,templateProps:n,renderOptions:i}=e;if(void 0===t)return(0,Hh.nl)();const a=(0,Lh.$F)(t),r=(0,d.A)({},n,{data:(0,d.A)({},n.data??{},{isEqual:(null===i||void 0===i?void 0:i.propsComparer)??v.RL})});return null===a||void 0===a?void 0:a(r)},Zh={className:"",isFirstGroupCell:!1,isLastGroupCell:!1,startDate:new Date,endDate:new Date,allDay:!1,text:"",index:0,contentTemplateProps:{data:{},index:0}};class Yh extends Wh.eh{render(){const{className:e,isFirstGroupCell:t,isLastGroupCell:n,children:i,ariaLabel:a}=this.props,r=yu.getGroupCellClasses(t,n,e);return(0,Hh.bF)(1,"td",r,i,0,{"aria-label":a})}}Yh.defaultProps=Zh;const jh=(0,d.A)({},Zh,{otherMonth:!1,today:!1,isFirstDayMonthHighlighting:!1,isSelected:!1,isFocused:!1});class Xh extends Wh.eh{constructor(){super(...arguments),this.dataCellTemplateProps=null}getDataCellTemplateProps(){if(null!==this.dataCellTemplateProps)return this.dataCellTemplateProps;const{allDay:e,contentTemplateProps:t,endDate:n,groupIndex:i,groups:a,index:r,startDate:o}=this.props;return this.dataCellTemplateProps={data:(0,d.A)({startDate:o,endDate:n,groups:a,groupIndex:a?i:void 0,text:"",allDay:Boolean(e)||void 0},null===t||void 0===t?void 0:t.data),index:r},this.dataCellTemplateProps}componentWillUpdate(e){this.props.allDay===e.allDay&&this.props.contentTemplateProps===e.contentTemplateProps&&this.props.endDate===e.endDate&&this.props.groupIndex===e.groupIndex&&this.props.groups===e.groups&&this.props.index===e.index&&this.props.startDate===e.startDate||(this.dataCellTemplateProps=null)}render(){const{viewContext:e,allDay:t,className:n,isFocused:i,isSelected:a,isFirstGroupCell:r,isLastGroupCell:o,dataCellTemplate:s,children:l}=this.props,{view:{type:u},crossScrollingEnabled:d}=e,c=yu.getCellSizeHorizontalClass(u,d),h=yu.getCellSizeVerticalClass(Boolean(t)),p=(0,zl.g)({[c]:!0,[h]:!0,[Nh]:!t,"dx-state-focused":a,"dx-scheduler-focused-cell":i,[n??""]:!0}),m=a?"Add appointment":void 0,g=this.getDataCellTemplateProps();return(0,Hh.sO)(2,Yh,{className:p,viewContext:e,isFirstGroupCell:r,isLastGroupCell:o,ariaLabel:m,startDate:Zh.startDate,endDate:Zh.endDate,index:Zh.index,children:(0,Hh.nl)(s?(0,Hh.sO)(2,Uh,{template:s,templateProps:{index:g.index,data:g.data}}):l,0)})}}Xh.defaultProps=jh;class qh extends Wh.eh{render(){const{className:e,viewContext:t,dataCellTemplate:n,endDate:i,groupIndex:a,groups:r,index:o,isFirstGroupCell:s,isFocused:l,isLastGroupCell:u,isSelected:d,startDate:c}=this.props;return(0,Hh.sO)(2,Xh,{className:`${zh} ${e}`,viewContext:t,startDate:c,endDate:i,groups:r,groupIndex:a,allDay:!0,isFirstGroupCell:s,isLastGroupCell:u,index:o,dataCellTemplate:n,isSelected:d,isFocused:l})}}qh.defaultProps=jh;const Kh={};class Qh extends Wh.eh{render(){const{children:e,className:t,colSpan:n,styles:i}=this.props;return(0,Hh.bF)(1,"td",t,e,0,{style:(0,Wh.gs)(i),colspan:n})}}Qh.defaultProps=Kh;class Jh extends Wh.eh{render(){const{children:e,className:t,colSpan:n,styles:i}=this.props;return(0,Hh.bF)(1,"th",t,e,0,{style:(0,Wh.gs)(i),colspan:n})}}Jh.defaultProps=Kh;const ep={width:0,isHeaderCell:!1};class tp extends Wh.eh{render(){const{colSpan:e,isHeaderCell:t,className:n="",width:i,styles:a}=this.props,r=yu.addWidthToStyle(i,a),o=t?Jh:Qh;return(0,Hh.sO)(2,o,{className:`dx-scheduler-virtual-cell ${n}`,styles:r,colSpan:e})}}tp.defaultProps=ep;const np={className:"",leftVirtualCellWidth:0,rightVirtualCellWidth:0,isHeaderRow:!1};class ip extends Wh.eh{render(){const{children:e,className:t,isHeaderRow:n,leftVirtualCellCount:i,leftVirtualCellWidth:a=np.leftVirtualCellWidth,rightVirtualCellCount:r,rightVirtualCellWidth:o=np.rightVirtualCellWidth,styles:s}=this.props,l=Boolean(i),u=Boolean(r);return(0,Hh.bF)(1,"tr",t,[l&&null!=i&&Ol(i,1e3).map(e=>(0,Hh.sO)(2,tp,{width:a*(e/i),colSpan:e,isHeaderCell:n??ep.isHeaderCell})),e,u&&null!=r&&Ol(r,1e3).map(e=>(0,Hh.sO)(2,tp,{width:o*(e/r),colSpan:e,isHeaderCell:n??ep.isHeaderCell}))],0,{style:(0,Wh.gs)(s)})}}ip.defaultProps=np;const ap={viewData:[],isVerticalGroupOrientation:!1,className:"",leftVirtualCellWidth:0,rightVirtualCellWidth:0};class rp extends Wh.eh{render(){const{className:e,viewData:t,viewContext:n,leftVirtualCellWidth:i,rightVirtualCellWidth:a,leftVirtualCellCount:r,rightVirtualCellCount:o,isVerticalGroupOrientation:s,dataCellTemplate:l}=this.props,u=(0,zl.g)({"dx-scheduler-all-day-table-row":!0,[e??""]:Boolean(e)});return(0,Hh.sO)(2,ip,{leftVirtualCellWidth:i,rightVirtualCellWidth:a,leftVirtualCellCount:r,rightVirtualCellCount:o,className:u,children:t.map(e=>{let{endDate:t,groupIndex:i,groups:a,index:r,isFirstGroupCell:o,isFocused:u,isLastGroupCell:d,isSelected:c,key:h,startDate:p}=e;return(0,Hh.sO)(2,qh,{viewContext:n,isFirstGroupCell:!s&&o,isLastGroupCell:!s&&d,startDate:p,endDate:t,groups:a,groupIndex:i,index:r,dataCellTemplate:l,isSelected:c??!1,isFocused:u??!1},h)})})}}rp.defaultProps=ap;const op={viewData:{groupedData:[],leftVirtualCellCount:0,rightVirtualCellCount:0,topVirtualRowCount:0,bottomVirtualRowCount:0},leftVirtualCellWidth:0,rightVirtualCellWidth:0,topVirtualRowHeight:0,bottomVirtualRowHeight:0,addDateTableClass:!0,addVerticalSizesClassToRows:!0},sp=(0,d.A)({},np,{leftVirtualCellWidth:0,rightVirtualCellWidth:0,cellsCount:1});class lp extends Wh.eh{constructor(){super(...arguments),this.virtualCells=null}getVirtualCells(){if(null!==this.virtualCells)return this.virtualCells;const{cellsCount:e}=this.props;return this.virtualCells=[...Array(e)],this.virtualCells}componentWillUpdate(e){this.props.cellsCount!==e.cellsCount&&(this.virtualCells=null)}render(){const{className:e,leftVirtualCellCount:t,leftVirtualCellWidth:n,rightVirtualCellCount:i,rightVirtualCellWidth:a,styles:r,height:o}=this.props,s=`dx-scheduler-virtual-row ${e}`,l=yu.addHeightToStyle(o,r),u=this.getVirtualCells();return(0,Hh.sO)(2,ip,{className:s,styles:l,leftVirtualCellWidth:n,rightVirtualCellWidth:a,leftVirtualCellCount:t,rightVirtualCellCount:i,children:u.map((e,t)=>(0,Hh.sO)(2,tp,{width:ep.width,isHeaderCell:ep.isHeaderCell,className:"dx-scheduler-cell-sizes-horizontal"},t.toString()))})}}lp.defaultProps=sp;const up={topVirtualRowHeight:0,bottomVirtualRowHeight:0,leftVirtualCellWidth:0,rightVirtualCellWidth:0,virtualCellsCount:0};class dp extends Wh.eh{getResultStyles(){const{height:e,width:t,styles:n}=this.props,i=yu.addHeightToStyle(e,n);return yu.addWidthToStyle(t,i)}render(){const{className:e,topVirtualRowHeight:t,bottomVirtualRowHeight:n,children:i,leftVirtualCellCount:a,leftVirtualCellWidth:r,rightVirtualCellCount:o,rightVirtualCellWidth:s,tableRef:l,virtualCellsCount:u}=this.props,d=Boolean(t),c=Boolean(n),h=this.getResultStyles();return(0,Hh.bF)(1,"table",e,(0,Hh.bF)(1,"tbody",null,[d&&(0,Hh.sO)(2,lp,{height:t,cellsCount:u??sp.cellsCount,leftVirtualCellWidth:r??sp.leftVirtualCellWidth,rightVirtualCellWidth:s??sp.rightVirtualCellWidth,leftVirtualCellCount:a,rightVirtualCellCount:o}),i,c&&(0,Hh.sO)(2,lp,{height:n,cellsCount:u??sp.cellsCount,leftVirtualCellWidth:r??sp.leftVirtualCellWidth,rightVirtualCellWidth:s??sp.rightVirtualCellWidth,leftVirtualCellCount:a,rightVirtualCellCount:o})],0),2,{style:(0,Wh.gs)(h),"aria-hidden":!0},null,l)}}dp.defaultProps=up;class cp extends Wh.oe{constructor(){super(...arguments),this.allDayPanelData=null}createEffects(){return[(0,Wh.h2)()]}getAllDayPanelData(){return null!==this.allDayPanelData||(this.allDayPanelData=this.props.viewData.groupedData[0].allDayPanel),this.allDayPanelData}componentWillUpdate(e){super.componentWillUpdate(),this.props.viewData!==e.viewData&&(this.allDayPanelData=null)}render(){const{viewData:e,viewContext:t,width:n,tableRef:i,dataCellTemplate:a}=this.props,r=this.getAllDayPanelData();return(0,Hh.sO)(2,dp,{className:"dx-scheduler-all-day-table",height:r?void 0:Gh.allDayPanelHeight,width:n,tableRef:i,children:(0,Hh.sO)(2,rp,{viewData:r??ap.viewData,viewContext:t,leftVirtualCellWidth:e.leftVirtualCellWidth??ap.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??ap.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount,dataCellTemplate:a})})}}cp.defaultProps=op;var hp=n(27401);const pp=(0,d.A)({},op,{cellTemplate:Xh});class mp extends Wh.eh{render(){const{viewData:e,viewContext:t,addVerticalSizesClassToRows:n,cellTemplate:i,dataCellTemplate:a}=this.props,r=(0,zl.g)({[Fh]:!0,"dx-scheduler-cell-sizes-vertical":n});return(0,Hh.nl)(e.groupedData.map(n=>{let{allDayPanel:o,dateTable:s,isGroupedAllDayPanel:l,key:u}=n;return(0,Hh.nl)([l&&(0,Hh.sO)(2,rp,{viewData:o??ap.viewData,viewContext:t,dataCellTemplate:a,isVerticalGroupOrientation:!0,leftVirtualCellWidth:e.leftVirtualCellWidth??ap.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??ap.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount}),s.map(n=>{let{cells:o,key:s}=n;return(0,Hh.sO)(2,ip,{className:r,leftVirtualCellWidth:e.leftVirtualCellWidth??np.leftVirtualCellWidth,rightVirtualCellWidth:e.rightVirtualCellWidth??np.rightVirtualCellWidth,leftVirtualCellCount:e.leftVirtualCellCount,rightVirtualCellCount:e.rightVirtualCellCount,children:o.map(e=>{let{key:n,endDate:r,isFirstDayMonthHighlighting:o,groupIndex:s,groups:l,index:u,isFirstGroupCell:d,isFocused:c,isLastGroupCell:h,isSelected:p,otherMonth:m,startDate:g,text:f,today:D}=e;return(0,Hh.sO)(2,Uh,{template:i,templateProps:{key:n,viewContext:t,isFirstGroupCell:d,isLastGroupCell:h,startDate:g,endDate:r,groups:l,groupIndex:s,index:u,dataCellTemplate:a,text:f,today:D,otherMonth:m,isFirstDayMonthHighlighting:o,isSelected:p,isFocused:c}})})},s)})],0,u)}),0)}}mp.defaultProps=pp;const gp=["viewData","viewContext","tableRef","addDateTableClass","width","cellTemplate","dataCellTemplate","groupOrientation","addVerticalSizesClassToRows"],fp=(0,d.A)({},op,{cellTemplate:Xh});class Dp extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const e=this.props,{viewData:t,viewContext:n,tableRef:i,addDateTableClass:a,width:r,cellTemplate:o,dataCellTemplate:s,groupOrientation:l,addVerticalSizesClassToRows:u}=e,c=(0,hp.A)(e,gp),h=a?"dx-scheduler-date-table":void 0,p=t.topVirtualRowHeight??0,m=t.bottomVirtualRowHeight??0,g=t.leftVirtualCellWidth??0,f=t.rightVirtualCellWidth??0,D=t.groupedData[0].dateTable[0].cells.length;return(0,Hh._B)((0,Hh.sO)(2,dp,(0,d.A)({},c,{tableRef:i,topVirtualRowHeight:p,bottomVirtualRowHeight:m,leftVirtualCellWidth:g,rightVirtualCellWidth:f,leftVirtualCellCount:t.leftVirtualCellCount,rightVirtualCellCount:t.rightVirtualCellCount,virtualCellsCount:D,className:h,width:r,children:(0,Hh.sO)(2,mp,{viewData:t,viewContext:n,cellTemplate:o,dataCellTemplate:s,leftVirtualCellWidth:g,rightVirtualCellWidth:f,groupOrientation:l,addVerticalSizesClassToRows:u,topVirtualRowHeight:pp.topVirtualRowHeight,bottomVirtualRowHeight:pp.bottomVirtualRowHeight,addDateTableClass:pp.addDateTableClass})})))}}Dp.defaultProps=fp;class yp extends Ph.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=(0,d.A)({},this._optionsByReference,{dataCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["cellTemplate","dataCellTemplate"],props:["viewData","viewContext","cellTemplate","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return Dp}}(0,m.A)("dxDateTableLayoutBase",yp);class _p extends yp{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dataCellTemplate"],props:["viewData","viewContext","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return cp}}(0,m.A)("dxAllDayTable",_p);class Cp extends Wh.eh{constructor(){super(...arguments),this.contentTemplateProps=null}getContentTemplateProps(){if(null!==this.contentTemplateProps)return this.contentTemplateProps;const{index:e,text:t}=this.props;return this.contentTemplateProps={data:{text:t},index:e},this.contentTemplateProps}componentWillUpdate(e){this.props.index===e.index&&this.props.text===e.text||(this.contentTemplateProps=null)}render(){const{viewContext:e,dataCellTemplate:t,endDate:n,groupIndex:i,groups:a,index:r,isFirstGroupCell:o,isFocused:s,isLastGroupCell:l,isSelected:u,startDate:d,text:c,className:h,isFirstDayMonthHighlighting:p,otherMonth:m,today:g}=this.props,f=(0,zl.g)({"dx-scheduler-date-table-other-month":Boolean(m),"dx-scheduler-date-table-current-date":Boolean(g),"dx-scheduler-date-table-first-of-month":Boolean(p),[h??""]:Boolean(h)}),D=this.getContentTemplateProps();return(0,Hh.sO)(2,Xh,{className:f,viewContext:e,dataCellTemplate:t,startDate:d,endDate:n,text:c,groups:a,groupIndex:i,index:r,isFirstGroupCell:o,isLastGroupCell:l,isSelected:u,isFocused:s,contentTemplateProps:D,children:(0,Hh.bF)(1,"div","dx-scheduler-date-table-cell-text",c,0)})}}Cp.defaultProps=jh;const vp=["viewData","viewContext","addDateTableClass","addVerticalSizesClassToRows","dataCellTemplate","groupOrientation","tableRef","width"];class wp extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const e=this.props,{viewData:t,viewContext:n,addDateTableClass:i,addVerticalSizesClassToRows:a,dataCellTemplate:r,groupOrientation:o,tableRef:s,width:l}=e,u=(0,hp.A)(e,vp);return(0,Hh._B)((0,Hh.sO)(2,Dp,(0,d.A)({},u,{viewData:t,viewContext:n,groupOrientation:o,addDateTableClass:i,dataCellTemplate:r,cellTemplate:Cp,tableRef:s,addVerticalSizesClassToRows:a,width:l})))}}wp.defaultProps=fp;class Ap extends yp{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["cellTemplate","dataCellTemplate"],props:["viewData","viewContext","cellTemplate","groupOrientation","leftVirtualCellWidth","rightVirtualCellWidth","topVirtualRowHeight","bottomVirtualRowHeight","addDateTableClass","addVerticalSizesClassToRows","width","dataCellTemplate"]}}get _viewComponent(){return wp}}(0,m.A)("dxMonthDateTableLayout",Ap);const Sp={groupPanelData:{groupPanelItems:[],baseColSpan:1},groupByDate:!1,styles:{}},bp={id:0,text:"",data:{id:0},className:""},Tp={groupItems:[],className:""},xp=(0,d.A)({},bp,{isFirstGroupCell:!1,isLastGroupCell:!1,colSpan:1});class kp extends Wh.eh{render(){const{cellTemplate:e,colSpan:t,color:n,data:i,id:a,index:r,text:o,className:s,isFirstGroupCell:l,isLastGroupCell:u}=this.props,d=(0,zl.g)({"dx-scheduler-group-header":!0,"dx-scheduler-first-group-cell":l,"dx-scheduler-last-group-cell":u,[s??""]:Boolean(s)});return(0,Hh.bF)(1,"th",d,(0,Hh.bF)(1,"div","dx-scheduler-group-header-content",e?(0,Hh.sO)(2,Uh,{template:e,templateProps:{data:{data:i,id:a,color:n,text:o},index:r}}):(0,Hh.bF)(1,"div",null,o,0),0),2,{colspan:t})}}kp.defaultProps=xp;class Ep extends Wh.eh{render(){const{cellTemplate:e,className:t,groupItems:n}=this.props;return(0,Hh.bF)(1,"tr",`dx-scheduler-group-row ${t}`,n.map((t,n)=>{let{colSpan:i,color:a,data:r,id:o,isFirstGroupCell:s,isLastGroupCell:l,key:u,text:d}=t;return(0,Hh.sO)(2,kp,{text:d,id:o,data:r,index:n,color:a,colSpan:i??xp.colSpan,isFirstGroupCell:Boolean(s),isLastGroupCell:Boolean(l),cellTemplate:e},u)}),0)}}Ep.defaultProps=Tp;class Ip extends Wh.eh{constructor(){super(...arguments),this._groupPanelItems=null}getGroupPanelItems(){if(null!==this._groupPanelItems)return this._groupPanelItems;const{groupPanelData:{baseColSpan:e,groupPanelItems:t}}=this.props,n=t.reduceRight((n,i,a)=>{const r=n,o=i.length,s=a===t.length-1?e:n[a+1],l=a===t.length-1?o:t[a+1].length,u=l/o;return r[a]=u*s,r},[...new Array(t.length)]);return this._groupPanelItems=t.map((e,t)=>{const i=n[t];return e.map(e=>(0,d.A)({},e,{colSpan:i}))}),this._groupPanelItems}componentWillUpdate(e){this.props.groupPanelData!==e.groupPanelData&&(this._groupPanelItems=null)}render(){const{resourceCellTemplate:e}=this.props,t=this.getGroupPanelItems();return(0,Hh.nl)(t.map(t=>(0,Hh.sO)(2,Ep,{groupItems:t,cellTemplate:e},t[0].key)),0)}}Ip.defaultProps=Sp;class Op extends Wh.eh{render(){const{className:e,data:t,id:n,color:i,text:a,index:r,cellTemplate:o}=this.props;return(0,Hh.bF)(1,"div",`dx-scheduler-group-header ${e}`,o?(0,Hh.sO)(2,Uh,{template:o,templateProps:{data:{data:t,id:n,color:i,text:a},index:r}}):(0,Hh.bF)(1,"div","dx-scheduler-group-header-content",a,0),0)}}Op.defaultProps=bp;class Mp extends Wh.eh{render(){const{className:e,groupItems:t,cellTemplate:n}=this.props;return(0,Hh.bF)(1,"div",`dx-scheduler-group-row ${e}`,t.map((e,t)=>{let{color:i,data:a,id:r,key:o,text:s}=e;return(0,Hh.sO)(2,Op,{text:s,id:r,data:a,index:t,color:i,cellTemplate:n},o)}),0)}}Mp.defaultProps=Tp;class Rp extends Wh.eh{render(){const{className:e,elementRef:t,groupPanelData:n,resourceCellTemplate:i,height:a,styles:r}=this.props,o=(0,Wh.gs)(yu.addHeightToStyle(a,r));return(0,Hh.bF)(1,"div",e,(0,Hh.bF)(1,"div","dx-scheduler-group-flex-container",n.groupPanelItems.map(e=>(0,Hh.sO)(2,Mp,{groupItems:e,cellTemplate:i},e[0].key)),0),2,{style:o},null,t)}}Rp.defaultProps=Sp;const Vp=(0,d.A)({},Sp,{groups:[],groupOrientation:Ot});class Pp extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const{className:e,viewContext:t,elementRef:n,groupPanelData:i,height:a,resourceCellTemplate:r,groupOrientation:o,groups:s,styles:l}=this.props,u=il(s.length,o),d=u?Rp:Ip;return(0,Hh.sO)(2,d,{viewContext:t,height:a,resourceCellTemplate:r,className:e,groupPanelData:i,elementRef:n,styles:l,groups:Vp.groups,groupOrientation:Vp.groupOrientation,groupByDate:Vp.groupByDate})}}Pp.defaultProps=Vp;class Hp extends Ph.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=(0,d.A)({},this._optionsByReference,{resourceCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["resourceCellTemplate"],props:["viewContext","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return Pp}}(0,m.A)("dxGroupPanel",Hp);const Wp={text:"",splitText:!1};class $p extends Wh.eh{constructor(){super(...arguments),this._textCache=null}getTextParts(){if(null!==this._textCache)return this._textCache;const{text:e}=this.props;return this._textCache=e?e.split(" "):[""],this._textCache}componentWillUpdate(e){this.props.text!==e.text&&(this._textCache=null)}render(){const{splitText:e,text:t}=this.props,n=this.getTextParts();return(0,Hh.nl)(e?n.map(e=>(0,Hh.bF)(1,"div","dx-scheduler-header-panel-cell-date",(0,Hh.bF)(1,"span",null,e,0),2)):t,0)}}$p.defaultProps=Wp;const Bp=(0,d.A)({},Zh,{today:!1,colSpan:1,isWeekDayCell:!1,splitText:!1,isTimeCellTemplate:!1});class Gp extends Wh.eh{render(){const{viewContext:{view:{type:e},crossScrollingEnabled:t},colSpan:n,dateCellTemplate:i,groupIndex:a,groups:r,index:o,isTimeCellTemplate:s,splitText:l,startDate:u,text:d,timeCellTemplate:c,className:h,isFirstGroupCell:p,isLastGroupCell:m,isWeekDayCell:g,today:f}=this.props,D=yu.getCellSizeHorizontalClass(e,t),y=(0,zl.g)({"dx-scheduler-header-panel-cell":!0,[D]:!0,"dx-scheduler-header-panel-current-time-cell":f,"dx-scheduler-header-panel-week-cell":g,[h??""]:Boolean(h)}),_=yu.getGroupCellClasses(p,m,y),C=!s&&Boolean(i)||s&&Boolean(c),v=C?(0,Hh.nl)([s&&(0,Hh.sO)(2,Uh,{template:c,templateProps:{data:{date:u,text:d,groups:r,groupIndex:a},index:o}}),!s&&(0,Hh.sO)(2,Uh,{template:i,templateProps:{data:{date:u,text:d,groups:r,groupIndex:a},index:o}})],0):(0,Hh.sO)(2,$p,{splitText:l,text:d});return(0,Hh.bF)(1,"th",_,v,0,{colspan:n,title:d})}}Gp.defaultProps=Bp;const{isMaterialBased:Np}=_u.getThemeType(),Fp={groupOrientation:"horizontal",groupByDate:!1,groups:[]};class zp extends Wh.eh{render(){const{viewContext:e,dateCellTemplate:t,dateHeaderData:{dataMap:n,leftVirtualCellCount:i,leftVirtualCellWidth:a,rightVirtualCellCount:r,rightVirtualCellWidth:o},groupByDate:s,groupOrientation:l,groups:u}=this.props,d=Al(u.length,l)&&!s;return(0,Hh.nl)(n.map((n,s)=>(0,Hh.sO)(2,ip,{className:"dx-scheduler-header-row",leftVirtualCellWidth:a,leftVirtualCellCount:i,rightVirtualCellWidth:o,rightVirtualCellCount:r,isHeaderRow:!0,children:n.map(n=>{let{colSpan:i,endDate:a,groupIndex:r,groups:o,index:s,isFirstGroupCell:l,isLastGroupCell:u,key:c,startDate:h,text:p,today:m}=n;return(0,Hh.sO)(2,Gp,{viewContext:e,startDate:h,endDate:a,groups:d?o:void 0,groupIndex:d?r:void 0,today:m??!1,isWeekDayCell:!1,isTimeCellTemplate:!1,index:s,text:p,isFirstGroupCell:l,isLastGroupCell:u,dateCellTemplate:t,colSpan:i,splitText:Np},c)})},s.toString())),0)}}zp.defaultProps=Fp;const Lp=(0,d.A)({},Vp,{isRenderDateHeader:!0,dateHeaderTemplate:zp});class Up extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const{viewContext:e,dateHeaderData:t,groupByDate:n,groupOrientation:i,groupPanelData:a,groups:r,isRenderDateHeader:o,dateCellTemplate:s,dateHeaderTemplate:l,resourceCellTemplate:u,timeCellTemplate:d}=this.props,c=Al(r.length,i);return(0,Hh.bF)(1,"thead",null,[c&&!n&&(0,Hh.sO)(2,Pp,{viewContext:e,groupPanelData:a,groups:r,groupByDate:n,groupOrientation:i,resourceCellTemplate:u}),o&&(0,Hh.sO)(2,Uh,{template:l,templateProps:{viewContext:e,groupByDate:n,dateHeaderData:t,groupOrientation:i,groups:r,dateCellTemplate:s,timeCellTemplate:d}}),n&&(0,Hh.sO)(2,Pp,{viewContext:e,groupPanelData:a,groups:r,groupByDate:n,groupOrientation:i,resourceCellTemplate:u})],0)}}Up.defaultProps=Lp;class Zp extends Ph.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=(0,d.A)({},this._optionsByReference,{dateHeaderData:!0,resourceCellTemplate:!0,dateCellTemplate:!0,timeCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dateCellTemplate","timeCellTemplate","dateHeaderTemplate","resourceCellTemplate"],props:["viewContext","dateHeaderData","isRenderDateHeader","dateCellTemplate","timeCellTemplate","dateHeaderTemplate","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return Up}}(0,m.A)("dxHeaderPanelLayout",Zp);const{isMaterialBased:Yp}=Hl();class jp extends Wh.eh{render(){const{viewContext:e,groupByDate:t,groupOrientation:n,groups:i,dateHeaderData:a,dateCellTemplate:r,timeCellTemplate:o}=this.props,{dataMap:s,isMonthDateHeader:l,leftVirtualCellCount:u,leftVirtualCellWidth:d,rightVirtualCellCount:c,rightVirtualCellWidth:h,weekDayLeftVirtualCellCount:p,weekDayLeftVirtualCellWidth:m,weekDayRightVirtualCellCount:g,weekDayRightVirtualCellWidth:f}=a,D=Al(i.length,n)&&!t;return(0,Hh.nl)(s.map((t,n)=>{const i=s.length,a=i-1===n,y=i>1&&0===n,_=Yp&&(l||y);let C=u,v=c,w=h,A=d;return y&&(C=p,v=g,w=f,A=m),(0,Hh.sO)(2,ip,{className:"dx-scheduler-header-row",leftVirtualCellWidth:A??np.leftVirtualCellWidth,leftVirtualCellCount:C,rightVirtualCellWidth:w??np.rightVirtualCellWidth,rightVirtualCellCount:v,children:t.map(t=>{let{colSpan:n,endDate:i,groupIndex:s,groups:l,index:u,isFirstGroupCell:d,isLastGroupCell:c,key:h,startDate:p,text:m,today:g}=t;return(0,Hh.sO)(2,Gp,{viewContext:e,startDate:p,endDate:i,groups:D?l:void 0,groupIndex:D?s:void 0,today:g??Bp.today,index:u,text:m,isFirstGroupCell:d,isLastGroupCell:c,isWeekDayCell:y,colSpan:n,splitText:_,dateCellTemplate:r,timeCellTemplate:o,isTimeCellTemplate:a},h)})},n.toString())}),0)}}jp.defaultProps=Fp;class Xp extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const{viewContext:e,dateCellTemplate:t,dateHeaderData:n,groupByDate:i,groupOrientation:a,groupPanelData:r,groups:o,isRenderDateHeader:s,resourceCellTemplate:l,timeCellTemplate:u}=this.props;return(0,Hh.sO)(2,Up,{viewContext:e,dateHeaderData:n,groupPanelData:r,groupByDate:i,groups:o,groupOrientation:a,isRenderDateHeader:s,dateHeaderTemplate:jp,resourceCellTemplate:l,dateCellTemplate:t,timeCellTemplate:u})}}Xp.defaultProps=Lp;class qp extends Zp{get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["dateCellTemplate","timeCellTemplate","dateHeaderTemplate","resourceCellTemplate"],props:["viewContext","dateHeaderData","isRenderDateHeader","dateCellTemplate","timeCellTemplate","dateHeaderTemplate","groups","groupOrientation","groupPanelData","groupByDate","height","className","resourceCellTemplate"]}}get _viewComponent(){return Xp}}(0,m.A)("dxTimelineHeaderPanelLayout",qp);class Kp extends Wh.eh{constructor(){super(...arguments),this.timeCellTemplateProps=null}getTimeCellTemplateProps(){if(null!==this.timeCellTemplateProps)return this.timeCellTemplateProps;const{groupIndex:e,groups:t,index:n,startDate:i,text:a}=this.props;return this.timeCellTemplateProps={data:{date:i,groups:t,groupIndex:e,text:a},index:n},this.timeCellTemplateProps}componentWillUpdate(e){this.props.groupIndex===e.groupIndex&&this.props.groups===e.groups&&this.props.index===e.index&&this.props.startDate===e.startDate&&this.props.text===e.text||(this.timeCellTemplateProps=null)}render(){const{className:e,viewContext:t,highlighted:n,isFirstGroupCell:i,isLastGroupCell:a,text:r,timeCellTemplate:o}=this.props,s=yu.getCellSizeVerticalClass(!1),l=(0,zl.g)({"dx-scheduler-time-panel-cell":!0,[s]:!0,"dx-scheduler-time-panel-current-time-cell":Boolean(n),[e??""]:!0}),u=this.getTimeCellTemplateProps();return(0,Hh.sO)(2,Yh,{className:l,viewContext:t,isFirstGroupCell:i,isLastGroupCell:a,startDate:Zh.startDate,endDate:Zh.endDate,index:Zh.index,children:o?(0,Hh.sO)(2,Uh,{template:o,templateProps:{index:u.index,data:u.data}}):(0,Hh.bF)(1,"div",null,r,0)})}}Kp.defaultProps=Zh;const Qp=["timePanelData","viewContext","tableRef","timeCellTemplate"],Jp={timePanelData:{groupedData:[],leftVirtualCellCount:0,rightVirtualCellCount:0,topVirtualRowCount:0,bottomVirtualRowCount:0}};class em extends Wh.oe{createEffects(){return[(0,Wh.h2)()]}render(){const e=this.props,{timePanelData:t,viewContext:n,tableRef:i,timeCellTemplate:a}=e,r=(0,hp.A)(e,Qp),{topVirtualRowHeight:o,bottomVirtualRowHeight:s}=t;return(0,Hh._B)((0,Hh.sO)(2,dp,(0,d.A)({},r,{className:"dx-scheduler-time-panel",topVirtualRowHeight:o??0,bottomVirtualRowHeight:s??0,virtualCellsCount:1,tableRef:i,children:t.groupedData.map(e=>{let{dateTable:t,groupIndex:i,isGroupedAllDayPanel:r,key:o}=e;return(0,Hh.nl)([r&&(0,Hh.sO)(2,ip,{leftVirtualCellWidth:np.leftVirtualCellWidth,rightVirtualCellWidth:np.rightVirtualCellWidth,children:(0,Hh.sO)(2,Yh,{className:"dx-scheduler-time-panel-title-cell",viewContext:n,startDate:Zh.startDate,endDate:Zh.endDate,index:Zh.index,children:(0,Hh.sO)(2,$h)})}),t.map(e=>{let{groups:t,highlighted:r,index:o,isFirstGroupCell:s,isLastGroupCell:l,key:u,startDate:d,text:c}=e;return(0,Hh.sO)(2,ip,{className:"dx-scheduler-time-panel-row",leftVirtualCellWidth:np.leftVirtualCellWidth,rightVirtualCellWidth:np.rightVirtualCellWidth,children:(0,Hh.sO)(2,Kp,{viewContext:n,startDate:d,endDate:Zh.endDate,text:c,groups:t,groupIndex:i,isFirstGroupCell:s,isLastGroupCell:l,index:o,timeCellTemplate:a,highlighted:r})},u)})],0,o)})})))}}em.defaultProps=Jp;class tm extends Ph.X{_setOptionsByReference(){super._setOptionsByReference(),this._optionsByReference=(0,d.A)({},this._optionsByReference,{timeCellTemplate:!0})}get _propsInfo(){return{twoWay:[],allowNull:[],elements:[],templates:["timeCellTemplate"],props:["viewContext","groupOrientation","timePanelData","timeCellTemplate"]}}get _viewComponent(){return em}}(0,m.A)("dxTimePanelTableLayout",tm);var nm=n(68554),im=n(89658),am=n(85835),rm=am.A;function om(e){return"dxScheduler"===e.NAME}const sm="dx-scheduler-appointment";class lm{constructor(e){this.scheduler=e,this.workspace=this.scheduler._workSpace,this.appointments=this.scheduler._appointments,this.initialPosition={left:0,top:0},this.appointmentInfo=null,this.dragBetweenComponentsPromise=null}isAllDay(e){return e.data(It).allDay}onDragStart(e){const{itemSettings:t,itemData:n,initialPosition:i}=e;this.initialPosition=i,this.appointmentInfo={appointment:n,settings:t},this.appointments.notifyObserver("hideAppointmentTooltip")}onDragMove(e){e.fromComponent!==e.toComponent&&this.appointments.notifyObserver("removeDroppableCellClass")}getAppointmentElement(e){var t;const n=(null===(t=e.event.data)||void 0===t?void 0:t.itemElement)||e.itemElement;return(0,D.A)(n)}onDragEnd(e){const t=this.getAppointmentElement(e),n=this.isAllDay(t),i=this.appointments._getItemData(t),a=this.appointments._getAppointmentContainer(n);a.append(t);const r=this.workspace.getDroppableCell(),o=this.workspace.getCellByCoordinates(this.initialPosition,n);this.appointments.notifyObserver("updateAppointmentAfterDrag",{event:e,element:t,rawAppointment:i,isDropToTheSameCell:r.is(o),isDropToSelfScheduler:r.length>0})}onDragCancel(){this.removeDroppableClasses()}getItemData(e){const t=(0,D.A)(e).data(kt),n=null===t||void 0===t?void 0:t.appointment,i=this.appointments._getItemData(e);return n||i}getItemSettings(e){const t=(0,D.A)(e).data(kt);return null===t||void 0===t?void 0:t.settings}createDragStartHandler(e,t){return n=>{var i;n.itemData=this.getItemData(n.itemElement),n.itemSettings=this.getItemSettings(n.itemElement),this.scheduler._isAppointmentBeingUpdated(n.itemData)?n.cancel=!0:(null===(i=t.onDragStart)||void 0===i||i.call(t,n),n.cancel||e.onDragStart(n))}}createDragMoveHandler(e,t){return n=>{var i;this.appointmentInfo?this.scheduler._isAppointmentBeingUpdated(this.appointmentInfo.appointment)?n.cancel=!0:(null===(i=t.onDragMove)||void 0===i||i.call(t,n),n.cancel||e.onDragMove(n)):n.cancel=!0}}createDragEndHandler(e,t){return n=>{var i;if(!this.appointmentInfo)return void(n.cancel=!0);const a=this.appointments.invoke("getUpdatedData",n.itemData);var r;(this.appointmentInfo=null,n.toItemData=(0,T.X)({},n.itemData,a),null===(i=t.onDragEnd)||void 0===i||i.call(t,n),n.cancel)||(e.onDragEnd(n),n.fromComponent!==n.toComponent&&(null===(r=t.onRemove)||void 0===r||r.call(t,n)));if(!0===n.cancel&&e.onDragCancel(n),!0!==n.cancel&&om(n.toComponent)){const e=n.toComponent._getDragBehavior();e.dragBetweenComponentsPromise=new b.cY}}}createDropHandler(e){return t=>{const n=this.appointments.invoke("getUpdatedData",t.itemData);var i;(t.itemData=(0,T.X)({},t.itemData,n),t.fromComponent!==t.toComponent)&&(null===(i=e.onAdd)||void 0===i||i.call(e,t));this.dragBetweenComponentsPromise&&this.dragBetweenComponentsPromise.resolve()}}addTo(e,t){const n=this.scheduler.option("appointmentDragging")||{},i=(0,T.X)({component:this.scheduler,contentTemplate:null,filter:`.${sm}`,immediate:!1,onDragStart:this.onDragStart.bind(this),onDragMove:this.onDragMove.bind(this),onDragEnd:this.onDragEnd.bind(this),onDragCancel:this.onDragCancel.bind(this)},t);this.appointments._createComponent(e,rm,(0,T.X)({},i,n,{onDragStart:this.createDragStartHandler(i,n),onDragMove:this.createDragMoveHandler(i,n),onDragEnd:this.createDragEndHandler(i,n),onDrop:this.createDropHandler(n),onCancelByEsc:!0}))}updateDragSource(e,t){const{appointmentInfo:n}=this;if(n||e){const i=e||n.appointment,a=t||n.settings;this.appointments._setDragSourceAppointment(i,a)}}removeDroppableClasses(){this.appointments._removeDragSourceClassFromDraggedAppointment(),this.workspace.removeDroppableCellClass()}}const um="dx-scheduler-date-time-shader";class dm{constructor(e){this._workSpace=e,this._$container=this._workSpace._dateTableScrollable.$content()}render(){this.initShaderElements(),this.renderShader(),this._shader.forEach(e=>{this._$container.append(e)})}initShaderElements(){this._$shader=this.createShader(),this._shader=[],this._shader.push(this._$shader)}renderShader(){}createShader(){return(0,D.A)("<div>").addClass(um)}clean(){this._$container&&this._$container.find(`.${um}`).remove()}}var cm=dm;const hm="dx-scheduler-date-time-shader-all-day",pm="dx-scheduler-date-time-shader-top",mm="dx-scheduler-date-time-shader-bottom";class gm extends cm{renderShader(){let e=this._getShaderHeight();const t=this._getShaderMaxHeight(),n=e>t;e>t&&(e=t),(0,xe.k$)(this._$shader,e);const i=this._workSpace._getGroupCount()||1;this._workSpace.isGroupedByDate()?this._renderGroupedByDateShaderParts(i,e,t,n):this._renderShaderParts(i,e,t,n)}_renderShaderParts(e,t,n,i){for(let a=0;a<e;a++){const e=this._getShaderWidth(a);this._renderTopShader(this._$shader,t,e,a),!i&&this._renderBottomShader(this._$shader,n,t,e,a),this._renderAllDayShader(e,a)}}_renderGroupedByDateShaderParts(e,t,n,i){const a=this._getShaderWidth(0);let r=a-this._workSpace.getCellWidth();t<0&&(t=0,r=a),this._renderTopShader(this._$shader,t,a*e,0),!i&&this._renderBottomShader(this._$shader,n,t,r*e+this._workSpace.getCellWidth(),0),this._renderAllDayShader(a*e,0)}_renderTopShader(e,t,n,i){this._$topShader=(0,D.A)("<div>").addClass(pm),n&&(0,xe.zj)(this._$topShader,n),t&&(0,xe.k$)(this._$topShader,t),this._$topShader.css("marginTop",this._getShaderTopOffset(i)),this._$topShader.css("left",this._getShaderOffset(i,n)),e.append(this._$topShader)}_renderBottomShader(e,t,n,i,a){this._$bottomShader=(0,D.A)("<div>").addClass(mm);const r=n<0?i:i-this._workSpace.getCellWidth(),o=n<0?t:t-n;(0,xe.zj)(this._$bottomShader,r),(0,xe.k$)(this._$bottomShader,o),this._$bottomShader.css("left",this._getShaderOffset(a,i-this._workSpace.getCellWidth())),e.append(this._$bottomShader)}_renderAllDayShader(e,t){this._workSpace.option("showAllDayPanel")&&(this._$allDayIndicator=(0,D.A)("<div>").addClass(hm),(0,xe.k$)(this._$allDayIndicator,this._workSpace.getAllDayHeight()),(0,xe.zj)(this._$allDayIndicator,e),this._$allDayIndicator.css("left",this._getShaderOffset(t,e)),this._workSpace._$allDayPanel.prepend(this._$allDayIndicator))}_getShaderOffset(e,t){return this._workSpace.getGroupedStrategy().getShaderOffset(e,t)}_getShaderTopOffset(e){return this._workSpace.getGroupedStrategy().getShaderTopOffset(e)}_getShaderHeight(){return this._workSpace.getGroupedStrategy().getShaderHeight()}_getShaderMaxHeight(){return this._workSpace.getGroupedStrategy().getShaderMaxHeight()}_getShaderWidth(e){return this._workSpace.getGroupedStrategy().getShaderWidth(e)}clean(){super.clean(),this._workSpace&&this._workSpace._$allDayPanel&&this._workSpace._$allDayPanel.find(`.${hm}`).remove()}}var fm=gm;class Dm{handleArrowClick(e){const{key:t,focusedCellPosition:n,edgeIndices:i,getCellDataByPosition:a,isAllDayPanelCell:r}=e;let o;switch(t){case"down":o=this.getCellFromNextRowPosition(n,"next",i);break;case"up":o=this.getCellFromNextRowPosition(n,"prev",i);break;case"left":o=this.getCellFromNextColumnPosition((0,d.A)({},e,{direction:"prev"}));break;case"right":o=this.getCellFromNextColumnPosition((0,d.A)({},e,{direction:"next"}))}const s=a(o.rowIndex,o.columnIndex,r);return this.moveToCell((0,d.A)({},e,{currentCellData:s}))}getCellFromNextRowPosition(e,t,n){const{columnIndex:i,rowIndex:a}=e,r="next"===t?1:-1,o=a+r,s=o>=0&&o<=n.lastRowIndex?o:a;return{columnIndex:i,rowIndex:s}}getCellFromNextColumnPosition(e){const{focusedCellPosition:t,direction:n,edgeIndices:i,isRTL:a,isGroupedByDate:r,groupCount:o,isMultiSelection:s,viewType:l}=e,{columnIndex:u,rowIndex:d}=t,{firstColumnIndex:c,lastColumnIndex:h,firstRowIndex:p,lastRowIndex:m}=i,g=r&&s?o:1,f=a?-1:1,D="next"===n?f*g:-1*f*g,y=u+D,_=y>=c&&y<=h;return _?{columnIndex:y,rowIndex:d}:sl(l)?t:this._processEdgeCell({nextColumnIndex:y,rowIndex:d,columnIndex:u,firstColumnIndex:c,lastColumnIndex:h,firstRowIndex:p,lastRowIndex:m,step:g})}_processEdgeCell(e){const{nextColumnIndex:t,rowIndex:n,columnIndex:i,firstColumnIndex:a,lastColumnIndex:r,firstRowIndex:o,lastRowIndex:s,step:l}=e;let u=t,d=n;const c=t<a,h=t>r;if(c){const e=r-(l-i%l-1),t=n-1,a=t>=o;d=a?t:n,u=a?e:i}if(h){const e=a+i%l,t=n+1,r=t<=s;d=r?t:n,u=r?e:i}return{columnIndex:u,rowIndex:d}}moveToCell(e){const{isMultiSelection:t,isMultiSelectionAllowed:n,focusedCellData:i,currentCellData:a}=e,r=t&&n,o=r?this._getNextCellData(a,i):a;return o}_getNextCellData(e,t,n){if(n)return t;const i=this._isValidNextFocusedCell(e,t);return i?e:t}_isValidNextFocusedCell(e,t){if(!t)return!0;const{groupIndex:n,allDay:i}=t,{groupIndex:a,allDay:r}=e;return n===a&&i===r}}class ym{constructor(e){this.viewDataProvider=e,this._focusedCell=null,this._selectedCells=null,this._firstSelectedCell=null,this._prevFocusedCell=null,this._prevSelectedCells=null}getFocusedCell(){const e=this._focusedCell;if(!e)return;const{groupIndex:t,startDate:n,allDay:i}=e,a={groupIndex:t,startDate:n,isAllDay:i,index:e.index},r=this.viewDataProvider.findCellPositionInMap(a);return{coordinates:r,cellData:e}}setFocusedCell(e,t,n){if(e>=0){const i=this.viewDataProvider.getCellData(e,t,n);this._focusedCell=i}}setSelectedCells(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const{viewDataProvider:n}=this,{rowIndex:i,columnIndex:a,allDay:r}=e;if(i<0)return;const o=t?n.getCellData(t.rowIndex,t.columnIndex,t.allDay):this._firstSelectedCell,s=n.getCellData(i,a,r);this._firstSelectedCell=o,this._selectedCells=this.viewDataProvider.getCellsBetween(o,s)}setSelectedCellsByData(e){this._selectedCells=e}getSelectedCells(){return this._selectedCells}releaseSelectedAndFocusedCells(){this.releaseSelectedCells(),this.releaseFocusedCell()}releaseSelectedCells(){this._prevSelectedCells=this._selectedCells,this._prevFirstSelectedCell=this._firstSelectedCell,this._selectedCells=null,this._firstSelectedCell=null}releaseFocusedCell(){this._prevFocusedCell=this._focusedCell,this._focusedCell=null}restoreSelectedAndFocusedCells(){this._selectedCells=this._selectedCells||this._prevSelectedCells,this._focusedCell=this._focusedCell||this._prevFocusedCell,this._firstSelectedCell=this._firstSelectedCell||this._prevFirstSelectedCell,this._prevSelectedCells=null,this._prevFirstSelectedCell=null,this._prevFocusedCell=null}clearSelectedAndFocusedCells(){this._prevSelectedCells=null,this._selectedCells=null,this._prevFocusedCell=null,this._focusedCell=null}}const _m=(0,be.b4)("scroll","dxSchedulerVirtualScrolling"),Cm={vertical:"vertical",horizontal:"horizontal",both:"both",none:"none"},vm=Cm.both;class wm{constructor(e){this.options=e,e&&(this._rowHeight=this.getCellHeight(),this._cellWidth=this.getCellWidth(),this._createVirtualScrollingBase())}get isRTL(){return this.options.isRTL()}get verticalVirtualScrolling(){return this._verticalVirtualScrolling}set verticalVirtualScrolling(e){this._verticalVirtualScrolling=e}get horizontalVirtualScrolling(){return this._horizontalVirtualScrolling}set horizontalVirtualScrolling(e){this._horizontalVirtualScrolling=e}get document(){return wt.A.getDocument()}get height(){return this.options.getSchedulerHeight()}get width(){return this.options.getSchedulerWidth()}get rowHeight(){return this._rowHeight}set rowHeight(e){this._rowHeight=e}get outlineCount(){return this.options.getScrolling().outlineCount}get cellWidth(){return this._cellWidth}set cellWidth(e){this._cellWidth=e}get viewportWidth(){const e=this.width&&this.options.getViewWidth();return e>0?e:this.options.getWindowWidth()}get viewportHeight(){const e=this.height&&this.options.getViewHeight();return e>0?e:this.options.getWindowHeight()}get cellCountInsideTopVirtualRow(){var e;return(null===(e=this.verticalScrollingState)||void 0===e?void 0:e.virtualItemCountBefore)||0}get cellCountInsideLeftVirtualCell(){var e;return(null===(e=this.horizontalScrollingState)||void 0===e?void 0:e.virtualItemCountBefore)||0}get cellCountInsideRightVirtualCell(){var e;return(null===(e=this.horizontalScrollingState)||void 0===e?void 0:e.virtualItemCountAfter)||0}get topVirtualRowsCount(){return this.cellCountInsideTopVirtualRow>0?1:0}get leftVirtualCellsCount(){const e=this.isRTL?this.cellCountInsideRightVirtualCell:this.cellCountInsideLeftVirtualCell;return Math.ceil(e/1e3)}get virtualRowOffset(){var e;return(null===(e=this.verticalScrollingState)||void 0===e?void 0:e.virtualItemSizeBefore)||0}get virtualCellOffset(){var e;return(null===(e=this.horizontalScrollingState)||void 0===e?void 0:e.virtualItemSizeBefore)||0}get scrollingState(){var e,t;return{vertical:null===(e=this.verticalVirtualScrolling)||void 0===e?void 0:e.state,horizontal:null===(t=this.horizontalVirtualScrolling)||void 0===t?void 0:t.state}}get verticalScrollingState(){return this.scrollingState.vertical}get horizontalScrollingState(){return this.scrollingState.horizontal}get scrollingOrientation(){const e=this.options.getScrolling();return"standard"===e.mode?Cm.none:e.orientation||vm}get verticalScrollingAllowed(){return this.scrollingOrientation===Cm.vertical||this.scrollingOrientation===Cm.both}get horizontalScrollingAllowed(){return this.scrollingOrientation===Cm.horizontal||this.scrollingOrientation===Cm.both}setViewOptions(e){this.options=e,this.verticalVirtualScrolling&&(this.verticalVirtualScrolling.options=e,this.verticalVirtualScrolling.itemSize=this.rowHeight,this.verticalVirtualScrolling.viewportSize=this.viewportHeight),this.horizontalVirtualScrolling&&(this.horizontalVirtualScrolling.options=e,this.verticalVirtualScrolling.itemSize=this.cellWidth,this.verticalVirtualScrolling.viewportSize=this.viewportWidth)}getRenderState(){var e,t;const n=(null===(e=this.verticalVirtualScrolling)||void 0===e?void 0:e.getRenderState())||{},i=(null===(t=this.horizontalVirtualScrolling)||void 0===t?void 0:t.getRenderState())||{};return(0,d.A)({},n,i)}getCellHeight(){const e=this.options.getCellHeight(),t=e>0?e:50;return Math.floor(t)}getCellWidth(){let e=this.options.getCellWidth();const t=this.options.getCellMinWidth();(!e||e<t)&&(e=t);const n=e>0?e:1;return Math.floor(n)}calculateCoordinatesByDataAndPosition(e,t,n,i,a){const{rowIndex:r,columnIndex:o}=t,{startDate:s,endDate:l,allDay:u}=e,d=n.getTime(),c=s.getTime(),h=l.getTime(),p=u||!i?0:(d-c)/(h-c),m=this.getCellWidth(),g=this.getCellHeight(),f=a?(r+p)*g:r*g;let D=a?o*m:(o+p)*m;return this.isRTL&&(D=this.options.getScrollableOuterWidth()-D),{top:f,left:D}}dispose(){this._onScrollHandler&&Ae.A.off(this.document,_m,this._onScrollHandler)}createVirtualScrolling(){const e=Boolean(this.verticalVirtualScrolling),t=Boolean(this.horizontalVirtualScrolling);this.verticalScrollingAllowed===e&&this.horizontalScrollingAllowed===t||(this._rowHeight=this.getCellHeight(),this._cellWidth=this.getCellWidth(),this._createVirtualScrollingBase())}_createVirtualScrollingBase(){this.verticalScrollingAllowed&&(this.verticalVirtualScrolling=new Sm((0,d.A)({},this.options,{viewportHeight:this.viewportHeight,rowHeight:this.rowHeight,outlineCount:this.outlineCount}))),this.horizontalScrollingAllowed&&(this.horizontalVirtualScrolling=new bm((0,d.A)({},this.options,{viewportWidth:this.viewportWidth,cellWidth:this.cellWidth,outlineCount:this.outlineCount})))}isAttachWindowScrollEvent(){return(this.horizontalScrollingAllowed||this.verticalScrollingAllowed)&&!this.height}attachScrollableEvents(){this.isAttachWindowScrollEvent()&&this._attachWindowScroll()}_attachWindowScroll(){const e=(0,E.zk)();this._onScrollHandler=this.options.createAction(()=>{const{scrollX:t,scrollY:n}=e;(t>=10||n>=10)&&this.handleOnScrollEvent({left:t,top:n})}),Ae.A.on(this.document,_m,this._onScrollHandler)}handleOnScrollEvent(e){if(e){var t,n;const{left:r,top:o}=e,s=(0,k.O9)(o)&&(null===(t=this.verticalVirtualScrolling)||void 0===t?void 0:t.updateState(o)),l=(0,k.O9)(r)&&(null===(n=this.horizontalVirtualScrolling)||void 0===n?void 0:n.updateState(r));var i,a;if(s||l)null===(i=(a=this.options).updateRender)||void 0===i||i.call(a)}}updateDimensions(e){const t=this.getCellHeight(),n=this.verticalScrollingAllowed&&t!==this.rowHeight;(n||e)&&this.verticalVirtualScrolling&&(this.rowHeight=t,this.verticalVirtualScrolling.viewportSize=this.viewportHeight,this.verticalVirtualScrolling.reinitState(t,e));const i=this.getCellWidth(),a=this.horizontalScrollingAllowed&&i!==this.cellWidth;var r,o;((a||e)&&this.horizontalVirtualScrolling&&(this.cellWidth=i,this.horizontalVirtualScrolling.viewportSize=this.viewportWidth,this.horizontalVirtualScrolling.reinitState(i,e)),n||a)&&(null===(r=(o=this.options).updateGrid)||void 0===r||r.call(o))}}class Am{constructor(e){this.options=e,this._state=this.defaultState,this.viewportSize=this.options.viewportSize,this._itemSize=this.options.itemSize,this._position=-1,this._itemSizeChanged=!1,this.updateState(0)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSizeChanged=this._itemSize!==e,this._itemSize=e}get state(){return this._state}set state(e){this._state=e}get startIndex(){return this.state.startIndex}get pageSize(){return Math.ceil(this.viewportSize/this.itemSize)}get outlineCount(){return(0,k.O9)(this.options.outlineCount)?this.options.outlineCount:Math.floor(this.pageSize/2)}get groupCount(){return this.options.getGroupCount()}get isVerticalGrouping(){return this.options.isVerticalGrouping()}get defaultState(){return{prevPosition:0,startIndex:-1,itemCount:0,virtualItemCountBefore:0,virtualItemCountAfter:0,outlineCountBefore:0,outlineCountAfter:0,virtualItemSizeBefore:0,virtualItemSizeAfter:0,outlineSizeBefore:0,outlineSizeAfter:0}}get maxScrollPosition(){return this.getTotalItemCount()*this.itemSize-this.viewportSize}get position(){return this._position}set position(e){this._position=e}needUpdateState(e){const{prevPosition:t,startIndex:n}=this.state,i=n<0;if(i)return!0;let a=!1;if(this._validateAndSavePosition(e)){if(0===e||e===this.maxScrollPosition)return!0;const n=t,i=Math.floor(n/this.itemSize),r=Math.floor(e/this.itemSize);a=Math.abs(i-r)>=this.outlineCount}return a}_validateAndSavePosition(e){if(!(0,k.O9)(e))return!1;const t=this.position!==e;return this.position=e,t}_correctPosition(e){return e>=0?Math.min(e,this.maxScrollPosition):-1}updateState(e,t){if(e=this._correctPosition(e),!this.needUpdateState(e)&&!t)return!1;const n=this._calcItemInfoBefore(e),i=this._calcItemDeltaBefore(n),{outlineCountAfter:a,virtualItemCountAfter:r,itemCountWithAfter:o}=this._calcItemInfoAfter(i),{virtualItemCountBefore:s,outlineCountBefore:l}=n,u=l+o+a,d=Math.floor(e/this.itemSize);return this.state.prevPosition=d*this.itemSize,this.state.startIndex=d-l,this.state.virtualItemCountBefore=s,this.state.outlineCountBefore=l,this.state.itemCount=u,this.state.outlineCountAfter=a,this.state.virtualItemCountAfter=r,this._updateStateCore(),!0}reinitState(e,t){const{position:n}=this;this.itemSize=e,this.updateState(0,t),n>0&&this.updateState(n,t)}_calcItemInfoBefore(e){let t=Math.floor(e/this.itemSize);const n=Math.min(t,this.outlineCount);return t-=n,{virtualItemCountBefore:t,outlineCountBefore:n}}_calcItemDeltaBefore(e){const{virtualItemCountBefore:t,outlineCountBefore:n}=e,i=this.getTotalItemCount();return i-t-n}getTotalItemCount(){throw"getTotalItemCount method should be implemented"}getRenderState(){throw"getRenderState method should be implemented"}_calcItemInfoAfter(e){const t=e>=this.pageSize?this.pageSize:e;let n=e-t;const i=n>0?Math.min(n,this.outlineCount):0;return n>0&&(n-=i),{virtualItemCountAfter:n,outlineCountAfter:i,itemCountWithAfter:t}}_updateStateCore(){const{state:e}=this,{virtualItemCountBefore:t}=e,{virtualItemCountAfter:n}=e,{outlineCountBefore:i}=e,{outlineCountAfter:a}=e,r=e.virtualItemSizeBefore,o=e.virtualItemSizeAfter,s=e.outlineSizeBefore,l=e.outlineSizeAfter,u=this.itemSize*t,d=this.itemSize*n,c=this.itemSize*i,h=this.itemSize*a,p=r+s,m=u+c,g=o+l,f=d+h,D=p<m,y=g<f,_=this._itemSizeChanged||D||y;_&&this._updateStateVirtualItems(u,d)}_updateStateVirtualItems(e,t){const{state:n}=this;n.virtualItemSizeBefore=e,n.virtualItemSizeAfter=t}}class Sm extends Am{constructor(e){super((0,d.A)({},e,{itemSize:e.rowHeight,viewportSize:e.viewportHeight}))}get prevTopPosition(){return this.state.prevPosition}get rowCount(){return this.state.itemCount}get topVirtualRowCount(){return this.state.virtualItemCountBefore}get bottomVirtualRowCount(){return this.state.virtualItemCountAfter}getTotalItemCount(){return this.options.getTotalRowCount(this.groupCount,this.isVerticalGrouping)}getRenderState(){return{topVirtualRowHeight:this.state.virtualItemSizeBefore,bottomVirtualRowHeight:this.state.virtualItemSizeAfter,startRowIndex:this.state.startIndex,rowCount:this.state.itemCount,startIndex:this.state.startIndex}}}class bm extends Am{constructor(e){super((0,d.A)({},e,{itemSize:e.cellWidth,viewportSize:e.viewportWidth}))}get isRTL(){return this.options.isRTL()}getTotalItemCount(){return this.options.getTotalCellCount(this.groupCount,this.isVerticalGrouping)}getRenderState(){return{leftVirtualCellWidth:this.state.virtualItemSizeBefore,rightVirtualCellWidth:this.state.virtualItemSizeAfter,startCellIndex:this.state.startIndex,cellCount:this.state.itemCount,cellWidth:this.itemSize}}_updateStateVirtualItems(e,t){if(this.isRTL){const{state:n}=this;n.virtualItemSizeAfter=e,n.virtualItemSizeBefore=t,n.startIndex=this.getTotalItemCount()-this.startIndex-this.state.itemCount}else super._updateStateVirtualItems(e,t)}}class Tm{constructor(e){this._workspace=e,this._renderAppointmentTimeoutID=null}getRenderTimeout(){return 15}get workspace(){return this._workspace}updateRender(){this._renderGrid(),this._renderAppointments()}_renderGrid(){this.workspace.renderWorkSpace(!1)}_renderAppointments(){const e=this.getRenderTimeout();e>=0?(clearTimeout(this._renderAppointmentTimeoutID),this._renderAppointmentTimeoutID=setTimeout(()=>this.workspace.updateAppointments(),e)):this.workspace.updateAppointments()}}const xm=1;class km{constructor(e){this._workSpace=e}prepareCellIndexes(e,t,n){const i=this._workSpace.isGroupedByDate();return i?{rowIndex:e.rowIndex,columnIndex:e.columnIndex*this._workSpace._getGroupCount()+t}:{rowIndex:e.rowIndex,columnIndex:e.columnIndex+t*this._workSpace._getCellCount()}}getGroupIndex(e,t){const n=this._workSpace.isGroupedByDate(),i=this._workSpace._getGroupCount();return n?t%i:Math.floor(t/this._workSpace._getCellCount())}calculateHeaderCellRepeatCount(){return this._workSpace._getGroupCount()||1}insertAllDayRowsIntoDateTable(){return!1}getTotalCellCount(e){return e=e||1,this._workSpace._getCellCount()*e}getTotalRowCount(){return this._workSpace._getRowCount()}calculateTimeCellRepeatCount(){return 1}getWorkSpaceMinWidth(){const e=(0,x.N)(this._workSpace.$element().get(0)).width;return e-this._workSpace.getTimePanelWidth()-2*xm}getAllDayOffset(){return this._workSpace.getAllDayHeight()}getGroupCountClass(e){}getLeftOffset(){return this._workSpace.getTimePanelWidth()}_createGroupBoundOffset(e,t,n){const i=n/2,a=e?e.offset().left-i:0,r=t?t.offset().left+n+i:0;return{left:a,right:r,top:0,bottom:0}}_getGroupedByDateBoundOffset(e,t){const n=e.length-1,i=e.eq(0),a=e.eq(n);return this._createGroupBoundOffset(i,a,t)}getGroupBoundsOffset(e,t,n,i,a){if(this._workSpace.isGroupedByDate())return this._getGroupedByDateBoundOffset(t,n);let r,o;const s=this._workSpace.getCellIndexByCoordinates(i),l=i.groupIndex||Math.floor(s/e),u=a.dateTableGroupedMap[l];if(u){const e=u[0].length,n=u[0][0].position,i=u[0][e-1].position;r=t.eq(n.columnIndex),o=t.eq(i.columnIndex)}return this._createGroupBoundOffset(r,o,n)}shiftIndicator(e,t,n,i){const a=this._getIndicatorOffset(i),r=n?n-a:a;e.css("left",r),e.css("top",t)}_getIndicatorOffset(e){const t=this._workSpace.isGroupedByDate();return t?this._calculateGroupByDateOffset(e):this._calculateOffset(e)}_calculateOffset(e){const t=this._workSpace.getIndicatorOffset(e),n=this._workSpace._getCellCount()*this._workSpace.getRoundedCellWidth(e-1,0)*e;return t+n}_calculateGroupByDateOffset(e){return this._workSpace.getIndicatorOffset(0)*this._workSpace._getGroupCount()+this._workSpace.getRoundedCellWidth(e-1,0)*e}getShaderOffset(e,t){const n=this._workSpace._getCellCount()*this._workSpace.getRoundedCellWidth(e-1)*e;return this._workSpace.option("rtlEnabled")?(0,x.N)(this._workSpace._dateTableScrollable.$content().get(0)).width-n-this._workSpace.getTimePanelWidth()-t:n}getShaderTopOffset(e){return-this.getShaderMaxHeight()*(e>0?1:0)}getShaderHeight(){const e=this._workSpace.getIndicationHeight();return e}getShaderMaxHeight(){return(0,x.N)(this._workSpace._dateTableScrollable.$content().get(0)).height}getShaderWidth(e){return this._workSpace.getIndicationWidth(e)}getScrollableScrollTop(e){return e?0:this._workSpace.getScrollable().scrollTop()}addAdditionalGroupCellClasses(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e=this._addLastGroupCellClass(e,t,a),this._addFirstGroupCellClass(e,t,a)}_addLastGroupCellClass(e,t,n){if(n)return`${e} ${en}`;const i=this._workSpace.isGroupedByDate();if(i){if(t%this._workSpace._getGroupCount()===0)return`${e} ${en}`}else if(t%this._workSpace._getCellCount()===0)return`${e} ${en}`;return e}_addFirstGroupCellClass(e,t,n){if(n)return`${e} ${tn}`;const i=this._workSpace.isGroupedByDate();if(i){if((t-1)%this._workSpace._getGroupCount()===0)return`${e} ${tn}`}else if((t-1)%this._workSpace._getCellCount()===0)return`${e} ${tn}`;return e}}var Em=km;class Im{constructor(e){this._workSpace=e,this.cache=new im.l}prepareCellIndexes(e,t,n){let i=e.rowIndex+t*this._workSpace._getRowCount();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(i+=t,n||(i+=1)),{rowIndex:i,columnIndex:e.columnIndex}}getGroupIndex(e){return Math.floor(e/this._workSpace._getRowCount())}calculateHeaderCellRepeatCount(){return 1}insertAllDayRowsIntoDateTable(){return this._workSpace.option("showAllDayPanel")}getTotalCellCount(){return this._workSpace._getCellCount()}getTotalRowCount(){return this._workSpace._getRowCount()*this._workSpace._getGroupCount()}calculateTimeCellRepeatCount(){return this._workSpace._getGroupCount()||1}getWorkSpaceMinWidth(){let e=this._workSpace._getWorkSpaceWidth();const t=(0,x.N)(this._workSpace.$element().get(0)).width,n=t-this._workSpace.getTimePanelWidth()-this._workSpace.getGroupTableWidth()-2*xm;return e<n&&(e=n),e}getAllDayOffset(){return 0}getGroupCountClass(e){return Xs(e)}getLeftOffset(){return this._workSpace.getTimePanelWidth()+this._workSpace.getGroupTableWidth()}getGroupBoundsOffset(e,t){let[n,i]=t;return this.cache.memo(`groupBoundsOffset${e}`,()=>{const t=this._workSpace.option("startDayHour"),a=this._workSpace.option("endDayHour"),r=this._workSpace.option("hoursInterval"),o=Ks(t,a)/r*this._workSpace.getCellHeight(),s=this.getScrollableScrollTop(),l=(0,x.N)(this._workSpace._$headerPanelContainer.get(0)).height;let u=e*o+l+this._workSpace.option("getHeaderHeight")()-s;this._workSpace.option("showAllDayPanel")&&this._workSpace.supportAllDayRow()&&(u+=this._workSpace.getCellHeight()*(e+1));const d=u+o,{left:c}=n.getBoundingClientRect(),{right:h}=i.getBoundingClientRect();return this._groupBoundsOffset={left:c,right:h,top:u,bottom:d},this._groupBoundsOffset})}shiftIndicator(e,t,n,i){const a=this._workSpace.getIndicatorOffset(0),r=this._workSpace.option("crossScrollingEnabled")?0:this._workSpace.getGroupTableWidth(),o=n?n-a:a;let s=this._workSpace._getRowCount()*this._workSpace.getCellHeight()*i;this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(s+=this._workSpace.getAllDayHeight()*(i+1)),e.css("left",o+r),e.css("top",t+s)}getShaderOffset(e,t){const n=this._workSpace.option("crossScrollingEnabled")?0:this._workSpace.getGroupTableWidth();return this._workSpace.option("rtlEnabled")?(0,x.N)(this._$container.get(0)).width-n-this._workSpace.getWorkSpaceLeftOffset()-t:n}getShaderTopOffset(e){return 0}getShaderHeight(){let e=this._workSpace.getIndicationHeight();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(e+=this._workSpace.getCellHeight()),e}getShaderMaxHeight(){let e=this._workSpace._getRowCount()*this._workSpace.getCellHeight();return this._workSpace.supportAllDayRow()&&this._workSpace.option("showAllDayPanel")&&(e+=this._workSpace.getCellHeight()),e}getShaderWidth(){return this._workSpace.getIndicationWidth(0)}getScrollableScrollTop(){return this._workSpace.getScrollable().scrollTop()}addAdditionalGroupCellClasses(e,t,n,i){return e=this._addLastGroupCellClass(e,n+1),this._addFirstGroupCellClass(e,n+1)}_addLastGroupCellClass(e,t){return t%this._workSpace._getRowCount()===0?`${e} ${en}`:e}_addFirstGroupCellClass(e,t){return(t-1)%this._workSpace._getRowCount()===0?`${e} ${tn}`:e}}var Om=Im;const Mm=["startDate","endDate","isFirstGroupCell","isLastGroupCell"];class Rm{constructor(e){this._viewDataGenerator=e}getCompleteDateHeaderMap(e,t){const{isGenerateWeekDaysHeaderData:n}=e,i=[];if(n){const n=this._generateWeekDaysHeaderRowMap(e,t);i.push(n)}const a=this._generateHeaderDateRow(e,t);return i.push(a),i}_generateWeekDaysHeaderRowMap(e,t){const{isGroupedByDate:n,getResourceManager:i,groupOrientation:a,startDayHour:r,endDayHour:o,hoursInterval:s,isHorizontalGrouping:l,intervalCount:u,viewOffset:c}=e,h=i(),p=h.groupCount(),m=this._viewDataGenerator.getCellCountInDay(r,o,s),g=al(p,a),f=t[0][0].allDay?1:0,D=n?g*m:m,y=l&&!n?p:1,_=this._viewDataGenerator.daysInInterval*u,C=_*y,v=[];for(let w=0;w<C;w+=1){const e=t[f][w*D],n=Oe.A.addOffsetsWithoutDST(e.startDate,-c);v.push((0,d.A)({},e,{colSpan:D,text:du(n),isFirstGroupCell:!1,isLastGroupCell:!1}))}return v}_generateHeaderDateRow(e,t){const{today:n,isGroupedByDate:i,groupOrientation:a,getResourceManager:r,headerCellTextFormat:o,getDateForHeaderText:s,interval:l,startViewDate:u,startDayHour:c,endDayHour:h,hoursInterval:p,intervalCount:m,currentDate:g,viewType:f,viewOffset:D}=e,y=al(r().groupCount(),a),_=t[0][0].allDay?1:0,C=i?y:1,v="vertical"===a,w=this._viewDataGenerator.getCellCount({intervalCount:m,currentDate:g,viewType:f,hoursInterval:p,startDayHour:c,endDayHour:h}),S=this._viewDataGenerator.getCellCountInDay(c,h,p),b=i?t[_].filter((e,t)=>t%y===0):t[_],T=!ol(f)||f===Ns.TIMELINE_MONTH;return b.map((e,t)=>{let{startDate:a,isFirstGroupCell:r,isLastGroupCell:h}=e,p=(0,hp.A)(e,Mm);const m=Oe.A.addOffsetsWithoutDST(a,-D),g=T?m:a,f=nl(t%w,g,o,s,{interval:l,startViewDate:u,startDayHour:c,cellCountInDay:S,viewOffset:D});return(0,d.A)({},p,{startDate:a,text:f,today:A.A.sameDate(m,n),colSpan:C,isFirstGroupCell:i||r&&!v,isLastGroupCell:i||h&&!v})})}generateDateHeaderData(e,t,n){const{isGenerateWeekDaysHeaderData:i,cellWidth:a,isProvideVirtualCellsWidth:r,startDayHour:o,endDayHour:s,hoursInterval:l,isMonthDateHeader:u}=n,d=[];let c={};const h=a||0;i&&(c=this._generateDateHeaderDataRow(n,e,t,this._viewDataGenerator.getCellCountInDay(o,s,l),0,h),d.push(c.dateRow));const p=this._generateDateHeaderDataRow(n,e,t,1,i?1:0,h);return d.push(p.dateRow),{dataMap:d,leftVirtualCellWidth:r?p.leftVirtualCellWidth:void 0,rightVirtualCellWidth:r?p.rightVirtualCellWidth:void 0,leftVirtualCellCount:p.leftVirtualCellCount,rightVirtualCellCount:p.rightVirtualCellCount,weekDayLeftVirtualCellWidth:c.leftVirtualCellWidth,weekDayRightVirtualCellWidth:c.rightVirtualCellWidth,weekDayLeftVirtualCellCount:c.leftVirtualCellCount,weekDayRightVirtualCellCount:c.rightVirtualCellCount,isMonthDateHeader:u}}_generateDateHeaderDataRow(e,t,n,i,a,r){const{startCellIndex:o,cellCount:s,isProvideVirtualCellsWidth:l,getResourceManager:u,groupOrientation:d,isGroupedByDate:c}=e,h=al(u().groupCount(),d),p=c?h*i:i,m=Math.floor(o/p),g=tl(s,n),f=Math.ceil((o+g)/p),D=el(n),y=t[a].slice(m,f),_=m*p,C=_*r,v=D-f*p,w=v*r;return{dateRow:y,leftVirtualCellCount:_,leftVirtualCellWidth:l?C:void 0,rightVirtualCellCount:v,rightVirtualCellWidth:l?w:void 0}}}const Vm=A.A.dateToMilliseconds;class Pm{constructor(e,t,n,i){this.groupedDataMap=e.generateGroupedDataMap(t),this.completeViewDataMap=n,this._viewOptions=i}getGroupStartDate(e){var t;const n=this.getFirstGroupRow(e);return(null===n||void 0===n||null===(t=n[0])||void 0===t||null===(t=t.cellData)||void 0===t?void 0:t.startDate)??null}getGroupEndDate(e){const t=this.getLastGroupRow(e);if(t){const e=t.length-1,{cellData:n}=t[e],{endDate:i}=n;return i}}findGroupCellStartDate(e,t,n,i){const a=this.getGroupFromDateTableGroupMap(e),r=(e,r)=>{const{cellData:o}=a[e][r];let{startDate:s,endDate:l}=o;if(i&&(s=A.A.trimTime(s),l=A.A.setToDayEnd(s)),A.A.intervalsOverlap({firstMin:t,firstMax:n,secondMin:s,secondMax:l}))return s},o=(()=>{const e=a[0].length;for(let t=0;t<e;++t)for(let e=0;e<a.length;++e){const n=r(e,t);if(n)return n}})(),s=(()=>{for(let e=0;e<a.length;++e){const t=a[e];for(let n=0;n<t.length;++n){const t=r(e,n);if(t)return t}}})();return o>s?s:o}findAllDayGroupCellStartDate(e){var t;const n=this.getGroupFromDateTableGroupMap(e),i=null===n||void 0===n||null===(t=n[0])||void 0===t||null===(t=t[0])||void 0===t?void 0:t.cellData;return(null===i||void 0===i?void 0:i.startDate)??null}findCellPositionInMap(e,t){const{groupIndex:n,startDate:i,isAllDay:a,index:r}=e,{allDayPanelGroupedMap:o,dateTableGroupedMap:s}=this.groupedDataMap,{viewOffset:l}=this._viewOptions,u=a&&!this._viewOptions.isVerticalGrouping?o[n]?[o[n]]:[]:s[n]||[];for(let c=0;c<u.length;c+=1){const e=u[c];for(let o=0;o<e.length;o+=1){const s=e[o],u=s.cellData,c=t?(0,d.A)({},u,{startDate:R.X.addOffsets(s.cellData.startDate,[-l]),endDate:R.X.addOffsets(s.cellData.endDate,[-l])}):u;if(this._isSameGroupIndexAndIndex(c,n,r)&&this.isStartDateInCell(i,a,c,u))return s.position}}}isStartDateInCell(e,t,n,i){let{startDate:a,endDate:r,allDay:o}=n,{startDate:s,endDate:l}=i;const{viewType:u}=this._viewOptions,d=this.getCellSecondIntervalOffset(s,l),c=0!==d;switch(!0){case!sl(u):case t&&o:return A.A.sameDate(e,a);case!t&&!c:return e>=a&&e<r;case!t&&c:return this.isStartDateInTwoIntervalsCell(e,d,a,r);default:return!1}}getCellSecondIntervalOffset(e,t){const n=R.X.addOffsets(e,[Vm("hour")]),i=Oe.A.getDaylightOffset(e,t),a=Oe.A.getDaylightOffset(e,n),r=0!==i,o=a<0;return!r&&o?Math.abs(a*Vm("minute")):0}isStartDateInTwoIntervalsCell(e,t,n,i){const a=R.X.addOffsets(n,[t]),r=R.X.addOffsets(i,[t]),o=e>=n&&e<i,s=e>=a&&e<r;return o||s}_isSameGroupIndexAndIndex(e,t,n){return e.groupIndex===t&&(void 0===n||e.index===n)}getCellsGroup(e){const{dateTableGroupedMap:t}=this.groupedDataMap,n=t[e];if(n){const{cellData:e}=n[0][0];return e.groups}}getCompletedGroupsInfo(){const{dateTableGroupedMap:e}=this.groupedDataMap;return e.map(e=>{const t=e[0][0],{allDay:n,groupIndex:i}=t.cellData;return{allDay:n,groupIndex:i,startDate:this.getGroupStartDate(i),endDate:this.getGroupEndDate(i)}}).filter(e=>{let{startDate:t}=e;return Boolean(t)})}getGroupIndices(){return this.getCompletedGroupsInfo().map(e=>{let{groupIndex:t}=e;return t})}getGroupFromDateTableGroupMap(e){const{dateTableGroupedMap:t}=this.groupedDataMap;return t[e]}getFirstGroupRow(e){const t=this.getGroupFromDateTableGroupMap(e);if(t){const{cellData:e}=t[0][0];return e.allDay?t[1]:t[0]}}getLastGroupRow(e){const{dateTableGroupedMap:t}=this.groupedDataMap,n=t[e];if(n){const e=n.length-1;return n[e]}}getLastGroupCellPosition(e){const t=this.getLastGroupRow(e);return null===t||void 0===t?void 0:t[(null===t||void 0===t?void 0:t.length)-1].position}getRowCountInGroup(e){const t=this.getLastGroupRow(e),n=t.length,i=t[n-1].cellData,a=i.index;return(a+1)/t.length}}const Hm=(e,t)=>{if(!Number.isInteger(e))throw Error(`Passed integer value ${e} is not an integer.`);if(!Number.isInteger(t))throw Error(`Passed module value ${t} is not an integer.`);if(t<=0)throw Error(`Passed module value ${t} must be > 0.`);const n=e%t;switch(!0){case 0===n:return 0;case n>0:return n;case n<0:return t+n;default:throw Error(`Unexpected division (${e} % ${t}) occurred.`)}},Wm=["allDay","startDate","endDate","groups","groupIndex","isFirstGroupCell","isLastGroupCell","index"],$m=A.A.dateToMilliseconds;class Bm{constructor(e){this._viewDataGenerator=e}getCompleteTimePanelMap(e,t){const{startViewDate:n,cellDuration:i,startDayHour:a,isVerticalGrouping:r,intervalCount:o,currentDate:s,viewType:l,hoursInterval:u,endDayHour:c,viewOffset:h,today:p,showCurrentTimeIndicator:m}=e,g=t.length-1,f=t[g][t[g].length-1].endDate,D=this._viewDataGenerator.getRowCount({intervalCount:o,currentDate:s,viewType:l,hoursInterval:u,startDayHour:a,endDayHour:c}),y=this._viewDataGenerator.getCellCount({intervalCount:o,currentDate:s,viewType:l,hoursInterval:u,startDayHour:a,endDayHour:c});let _=0,C=0;return t.map((e,o)=>{const s=e[0],{allDay:l,startDate:u,groups:c,groupIndex:g,isFirstGroupCell:v,isLastGroupCell:w,index:A}=s,S=(0,hp.A)(s,Wm),b=!l&&this.isTimeCellShouldBeHighlighted(p,h,{startViewDate:n,realEndViewDate:f,showCurrentTimeIndicator:m},{date:u,index:C,duration:Math.round(i),isFirst:0===C,isLast:this.isLastCellInGroup(t,o)});l?(_+=1,C=0):C+=1;const T=(o-_)%D;return(0,d.A)({},S,{startDate:u,allDay:l,highlighted:b,text:pu.getTimePanelCellText(T,u,n,i,a,h),groups:r?c:void 0,groupIndex:r?g:void 0,isFirstGroupCell:r&&v,isLastGroupCell:r&&w,index:Math.floor(A/y)})})}generateTimePanelData(e,t){const{startRowIndex:n,rowCount:i,topVirtualRowHeight:a,bottomVirtualRowHeight:r,isGroupedAllDayPanel:o,isVerticalGrouping:s,isAllDayPanelVisible:l}=t,u=s||!l?0:1,d=n+u,c=Dl(i,e),h=e.slice(d,d+c),p={topVirtualRowHeight:a,bottomVirtualRowHeight:r,isGroupedAllDayPanel:o},{previousGroupedData:m}=this._generateTimePanelDataFromMap(h,s);return p.groupedData=m,p}_generateTimePanelDataFromMap(e,t){return e.reduce((e,n)=>{let{previousGroupIndex:i,previousGroupedData:a}=e;const r=n.groupIndex;return r!==i&&a.push({dateTable:[],isGroupedAllDayPanel:_l(Boolean(n.allDay),t),groupIndex:r,key:Cl(r,t)}),n.allDay?a[a.length-1].allDayPanel=n:a[a.length-1].dateTable.push(n),{previousGroupIndex:r,previousGroupedData:a}},{previousGroupIndex:-1,previousGroupedData:[]})}isTimeCellShouldBeHighlighted(e,t,n,i){let{startViewDate:a,realEndViewDate:r,showCurrentTimeIndicator:o}=n;const s=R.X.addOffsets(e,[t]),l=R.X.addOffsets(a,[t]);if(!o||s<l||s>=r)return!1;const u=this.getLocalDateTimeInMs(s),[d,c]=this.getHighlightedInterval(i);return d<c?u>=d&&u<c:u>=d&&u<$m("day")||u>=0&&u<c}getHighlightedInterval(e){let{date:t,index:n,duration:i,isFirst:a,isLast:r}=e;const o=this.getLocalDateTimeInMs(t),s=n%2===0;switch(!0){case a||r&&!s:return[o,Hm(o+i,$m("day"))];case s:return[Hm(o-i,$m("day")),Hm(o+i,$m("day"))];default:return[o,Hm(o+2*i,$m("day"))]}}getLocalDateTimeInMs(e){const t=e.getTime()-e.getTimezoneOffset()*$m("minute");return Hm(t,$m("day"))}isLastCellInGroup(e,t){if(t===e.length-1)return!0;const{groupIndex:n}=e[t][0],{groupIndex:i,allDay:a}=e[t+1][0];return a||i!==n}}const Gm=A.A.dateToMilliseconds;class Nm{constructor(e){this.viewType=e,this.daysInInterval=1,this.tableAllDay=!1,this.hiddenInterval=0}isWorkWeekView(){return[Ns.WORK_WEEK,Ns.TIMELINE_WORK_WEEK].includes(this.viewType)}isSkippedDate(e){return!1}_calculateStartViewDate(e){return new Date}getStartViewDate(e){return this._calculateStartViewDate(e)}getCompleteViewDataMap(e){const{getResourceManager:t,isGroupedByDate:n,isHorizontalGrouping:i,isVerticalGrouping:a,intervalCount:r,currentDate:o,viewType:s,startDayHour:l,endDayHour:u,hoursInterval:d}=e;this._setVisibilityDates(e),this.setHiddenInterval(l,u,d);const c=qa(t().groupsLeafs),h=this.getCellCount({intervalCount:r,currentDate:o,viewType:s,startDayHour:l,endDayHour:u,hoursInterval:d}),p=this.getRowCount({intervalCount:r,currentDate:o,viewType:s,hoursInterval:d,startDayHour:l,endDayHour:u});let m=[];const g=this._generateAllDayPanelData(e,p,h),f=this._generateViewCellsData(e,p,h);return g&&m.push(g),m.push(...f),i&&!n&&(m=this._transformViewDataMapForHorizontalGrouping(m,c)),a&&(m=this._transformViewDataMapForVerticalGrouping(m,c)),n&&(m=this._transformViewDataMapForGroupingByDate(m,c)),this._addKeysToCells(m)}_transformViewDataMapForHorizontalGrouping(e,t){const n=e.map(e=>e.slice());return t.slice(1).forEach((t,i)=>{const a=i+1;e.forEach((e,i)=>{const r=e.map(e=>(0,d.A)({},e,{groups:t,groupIndex:a}));n[i].push(...r)})}),n}_transformViewDataMapForVerticalGrouping(e,t){const n=e.map(e=>e.slice());return t.slice(1).forEach((t,i)=>{const a=i+1,r=e.map(e=>{const n=e.map(e=>(0,d.A)({},e,{groupIndex:a,groups:t}));return n});n.push(...r)}),n}_transformViewDataMapForGroupingByDate(e,t){const n=t.slice(1),i=n.length,a=e.map(e=>{const t=e.reduce((e,t)=>{const a=[...e,(0,d.A)({},t,{isFirstGroupCell:!0,isLastGroupCell:0===i}),...n.map((e,n)=>(0,d.A)({},t,{groups:e,groupIndex:n+1,isFirstGroupCell:!1,isLastGroupCell:n===i-1}))];return a},[]);return t});return a}_addKeysToCells(e){const t=e[0].length,{currentViewDataMap:n}=e.reduce((e,n,i)=>{let{allDayPanelsCount:a,currentViewDataMap:r}=e;const o=n[0].allDay,s=(i-a)*t,l=o?a+1:a;return r.push(n.map((e,t)=>(0,d.A)({},e,{key:s+t}))),{allDayPanelsCount:l,currentViewDataMap:r}},{allDayPanelsCount:0,currentViewDataMap:[]});return n}generateViewDataMap(e,t){const{rowCount:n,startCellIndex:i,startRowIndex:a,cellCount:r,isVerticalGrouping:o,isAllDayPanelVisible:s}=t,l=(e,t,n,i)=>{const a=void 0!==i?n+i:void 0;return e.slice(n,a).map((e,n)=>({cellData:e,position:{rowIndex:t,columnIndex:n}}))};let u=a,d=[];this._isStandaloneAllDayPanel(o,s)&&(u++,d=l(e[0],0,i,r));const c=Dl(n,e),h=e.slice(u,u+c).map((e,t)=>l(e,t,i,r));return{allDayPanelMap:d,dateTableMap:h}}_isStandaloneAllDayPanel(e,t){return!e&&t}getViewDataFromMap(e,t,n){const{topVirtualRowHeight:i,bottomVirtualRowHeight:a,leftVirtualCellWidth:r,rightVirtualCellWidth:o,cellCount:s,rowCount:l,startRowIndex:u,startCellIndex:d,isProvideVirtualCellsWidth:c,isGroupedAllDayPanel:h,isVerticalGrouping:p,isAllDayPanelVisible:m}=n,{allDayPanelMap:g,dateTableMap:f}=t,{groupedData:D}=f.reduce((e,t)=>{let{previousGroupIndex:n,groupedData:i}=e;const a=t.map(e=>{let{cellData:t}=e;return t}),r=a[0],o=r.allDay,s=r.groupIndex;return s!==n&&i.push({dateTable:[],isGroupedAllDayPanel:_l(Boolean(o),p),groupIndex:s,key:Cl(s,p)}),o?i[i.length-1].allDayPanel=a:i[i.length-1].dateTable.push({cells:a,key:a[0].key-d}),{groupedData:i,previousGroupIndex:s}},{previousGroupIndex:-1,groupedData:[]});this._isStandaloneAllDayPanel(p,m)&&(D[0].allDayPanel=g.map(e=>{let{cellData:t}=e;return t}));const y=el(e),_=fl(e),C=tl(s,e),v=Dl(l,e);return{groupedData:D,topVirtualRowHeight:i,bottomVirtualRowHeight:a,leftVirtualCellWidth:c?r:void 0,rightVirtualCellWidth:c?o:void 0,isGroupedAllDayPanel:h,leftVirtualCellCount:d,rightVirtualCellCount:void 0===s?0:y-d-C,topVirtualRowCount:u,bottomVirtualRowCount:_-u-v}}_generateViewCellsData(e,t,n){const i=[];for(let a=0;a<t;a+=1)i.push(this._generateCellsRow(e,!1,a,t,n));return i}_generateAllDayPanelData(e,t,n){return e.isAllDayPanelVisible?this._generateCellsRow(e,!0,0,t,n):null}_generateCellsRow(e,t,n,i,a){const r=[];for(let o=0;o<a;++o){const s=this.getCellData(n,o,e,t),l=n*a+o,u=this._isFirstGroupCell(n,o,e,i,a),c=this._isLastGroupCell(n,o,e,i,a);r.push((0,d.A)({},s,{index:l,isFirstGroupCell:u,isLastGroupCell:c}))}return r}getCellData(e,t,n,i){return i?this.prepareAllDayCellData(n,e,t):this.prepareCellData(n,e,t)}prepareCellData(e,t,n){const{getResourceManager:i}=e,a=qa(i().groupsLeafs),r=this.getDateByCellIndices(e,t,n),o=this.getCellEndDate(r,e),s={startDate:r,endDate:o,allDay:this.tableAllDay,groupIndex:0};return a.length>0&&(s.groups=a[0]),s}prepareAllDayCellData(e,t,n){const i=this.prepareCellData((0,d.A)({},e,{viewOffset:0}),t,n),{viewOffset:a}=e,r=A.A.trimTime(i.startDate),o=R.X.addOffsets(r,[a]);return(0,d.A)({},i,{startDate:o,endDate:o,allDay:!0})}getDateByCellIndices(e,t,n){const{startViewDate:i}=e,{startDayHour:a,endDayHour:r,hoursInterval:o,interval:s,firstDayOfWeek:l,intervalCount:u,viewOffset:d}=e,c=this.getCellCountInDay(a,r,o),h=this.getCellCount(e),p=this.getRowCount(e),m=this._calculateCellIndex(t,n,p,h),g=this.getMillisecondsOffset(m,s,c),f=this.isWorkWeekView()?this.getTimeOffsetByColumnIndex(n,this.getFirstDayOfWeek(l),h,u):0,D=i.getHours()!==Math.floor(a);let y=i.getTime(),_=new Date(y+g+f+d);const C=Oe.A.isLocalTimeMidnightDST(i),v=Oe.A.isLocalTimeMidnightDST(_);if(C||v)_=new Date(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes());else if(D){const e=yl(i,a);y=e.getTime()-Gm("day"),_=new Date(y+g+f+d)}else{const e=A.A.getTimezonesDifference(i,_);_.setTime(_.getTime()+e)}return _}getMillisecondsOffset(e,t,n){const i=Math.floor(e/n),a=i*this.hiddenInterval;return t*e+a}getTimeOffsetByColumnIndex(e,t,n,i){const a=Math.max(0,t-1),r=n/i,o=Math.floor((e+a)/r);return 2*o*Gm("day")}calculateEndDate(e,t,n){return this.getCellEndDate(e,{interval:t})}_calculateCellIndex(e,t,n,i){return gl(e,t,n)}generateGroupedDataMap(e){const{allDayPanelMap:t,dateTableMap:n}=e,{previousGroupedDataMap:i}=n.reduce((e,t)=>{const{previousGroupedDataMap:n,previousRowIndex:i,previousGroupIndex:a}=e,{groupIndex:r}=t[0].cellData,o=r===a?i+1:0;return t.forEach(e=>{const{groupIndex:t}=e.cellData;n[t]||(n[t]=[]),n[t][o]||(n[t][o]=[]),n[t][o].push(e)}),{previousGroupedDataMap:n,previousRowIndex:o,previousGroupIndex:r}},{previousGroupedDataMap:[],previousRowIndex:-1,previousGroupIndex:-1}),a=[];return null===t||void 0===t||t.forEach(e=>{const{groupIndex:t}=e.cellData;a[t]||(a[t]=[]),a[t].push(e)}),{allDayPanelGroupedMap:a,dateTableGroupedMap:i}}_isFirstGroupCell(e,t,n,i,a){const{groupOrientation:r,getResourceManager:o,isGroupedByDate:s}=n,l=o().groupCount();return s?t%l===0:r===Mt?t%a===0:e%i===0}_isLastGroupCell(e,t,n,i,a){const{groupOrientation:r,getResourceManager:o,isGroupedByDate:s}=n,l=o().groupCount();return s?(t+1)%l===0:r===Mt?(t+1)%a===0:(e+1)%i===0}markSelectedAndFocusedCells(e,t){const{selectedCells:n,focusedCell:i}=t;if(!n&&!i)return e;const{allDayPanelMap:a,dateTableMap:r}=e,o=r.map(e=>this._markSelectedAndFocusedCellsInRow(e,n,i)),s=this._markSelectedAndFocusedCellsInRow(a,n,i);return{allDayPanelMap:s,dateTableMap:o}}_markSelectedAndFocusedCellsInRow(e,t,n){return e.map(e=>{const{index:i,groupIndex:a,allDay:r,startDate:o}=e.cellData,s=t.findIndex(e=>{let{index:t,groupIndex:n,allDay:s,startDate:l}=e;return a===n&&(i===t||void 0===t&&o.getTime()===l.getTime())&&Boolean(r)===Boolean(s)}),l=Boolean(n)&&i===n.cellData.index&&a===n.cellData.groupIndex&&r===n.cellData.allDay;return l||-1!==s?(0,d.A)({},e,{cellData:(0,d.A)({},e.cellData,{isSelected:s>-1,isFocused:l})}):e})}getInterval(e){return e*Gm("hour")}_getIntervalDuration(e){return Gm("day")*e}_setVisibilityDates(e){}getCellCountInDay(e,t,n){const i=Ks(e,t)/n;return Math.ceil(i)}getCellCount(e){const{intervalCount:t,viewType:n,startDayHour:i,endDayHour:a,hoursInterval:r}=e,o=this.getCellCountInDay(i,a,r),s=ll(n)?o:1;return this.daysInInterval*t*s}getRowCount(e){const{viewType:t,startDayHour:n,endDayHour:i,hoursInterval:a}=e,r=this.getCellCountInDay(n,i,a),o=ll(t)?1:r;return o}setHiddenInterval(e,t,n){this.hiddenInterval=Gm("day")-this.getVisibleDayDuration(e,t,n)}getVisibleDayDuration(e,t,n){const i=this.getCellCountInDay(e,t,n);return n*i*Gm("hour")}getFirstDayOfWeek(e){return e}getCellEndDate(e,t){const n=Math.round(t.interval);return Oe.A.addOffsetsWithoutDST(e,n)}}class Fm extends Nm{_calculateStartViewDate(e){return hu.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount))}}const zm=(e,t)=>{const n=new Date(e);let i=n.getDay()-t;return i<0&&(i+=7),n.setDate(n.getDate()-i),n},Lm=(e,t)=>{const n=zm(e,t);return n.setDate(n.getDate()+7-1),n},Um=(e,t)=>{const n=A.A.trimTime(t).getTime()-A.A.trimTime(e).getTime();return Math.round(n/864e5)+1},Zm=(e,t,n)=>{const i=zm(e,n),a=Lm(t,n),r=Um(i,a)/7;return Math.max(r,6)},Ym=A.A.dateToMilliseconds;class jm extends Nm{constructor(){super(...arguments),this.tableAllDay=void 0}getCellData(e,t,n){const{indicatorTime:i,timeZoneCalculator:a,intervalCount:r,viewOffset:o}=n,s=super.getCellData(e,t,n,!1),l=Oe.A.addOffsetsWithoutDST(s.startDate,-o);return s.today=this.isCurrentDate(l,i,a),s.otherMonth=this.isOtherMonth(l,this._minVisibleDate,this._maxVisibleDate),s.isFirstDayMonthHighlighting=dl(l,r),s.text=gu.getCellText(l,r),s}isCurrentDate(e,t,n){return A.A.sameDate(e,vl(t,n))}isOtherMonth(e,t,n){return!A.A.dateInRange(e,t,n,"date")}_calculateCellIndex(e,t,n,i){return gu.calculateCellIndex(e,t,n,i)}calculateEndDate(e,t,n){return qs(e,n)}getInterval(){return Ym("day")}_calculateStartViewDate(e){return gu.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,e.intervalCount,this.getFirstDayOfWeek(e.firstDayOfWeek))}_setVisibilityDates(e){const{intervalCount:t,startDate:n,currentDate:i}=e,a=A.A.getFirstMonthDate(n),r=gu.getViewStartByOptions(n,i,t,a);this._minVisibleDate=new Date(r.setDate(1));const o=new Date(r.setMonth(r.getMonth()+t));this._maxVisibleDate=new Date(o.setDate(0))}getCellCount(){return 7}getRowCount(e){const t=new Date(e.currentDate);t.setDate(1);const n=new Date(t);return n.setMonth(n.getMonth()+e.intervalCount),n.setDate(0),Zm(t,n,e.firstDayOfWeek??h.A.firstDayOfWeekIndex())}getCellCountInDay(){return 1}setHiddenInterval(){this.hiddenInterval=0}getCellEndDate(e,t){const{startDayHour:n,endDayHour:i}=t,a=(i-n)*Ym("hour");return Oe.A.addOffsetsWithoutDST(e,a)}}const Xm=A.A.dateToMilliseconds;class qm extends Nm{calculateEndDate(e,t,n){return qs(e,n)}getInterval(){return Xm("day")}_calculateStartViewDate(e){return Du.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,e.intervalCount)}getCellCount(e){const{intervalCount:t}=e,n=new Date(e.currentDate);let i=0;for(let a=1;a<=t;a++)i+=new Date(n.getFullYear(),n.getMonth()+a,0).getDate();return i}setHiddenInterval(){this.hiddenInterval=0}getCellEndDate(e,t){const{startDayHour:n,endDayHour:i}=t,a=(i-n)*Xm("hour");return Oe.A.addOffsetsWithoutDST(e,a)}}class Km extends Nm{constructor(){super(...arguments),this.daysInInterval=7}_getIntervalDuration(e){return pu.getIntervalDuration(e)}_calculateStartViewDate(e){return pu.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount),this.getFirstDayOfWeek(e.firstDayOfWeek))}}class Qm extends Km{constructor(){super(...arguments),this.daysInInterval=5}isSkippedDate(e){return Tl(e)}_calculateStartViewDate(e){return mu.calculateStartViewDate(e.currentDate,e.startDayHour,e.startDate,this._getIntervalDuration(e.intervalCount),this.getFirstDayOfWeek(e.firstDayOfWeek))}getFirstDayOfWeek(e){return e||0}}const Jm=e=>{switch(e){case Ns.MONTH:return new jm(e);case Ns.TIMELINE_MONTH:return new qm(e);case Ns.DAY:case Ns.TIMELINE_DAY:return new Fm(e);case Ns.WEEK:case Ns.TIMELINE_WEEK:return new Km(e);case Ns.WORK_WEEK:case Ns.TIMELINE_WORK_WEEK:return new Qm(e);default:return new Nm(e)}},eg=["getResourceManager","groupOrientation","groupByDate","isAllDayPanelVisible","viewOffset"];class tg{constructor(e){this.viewType=e,this.viewDataGenerator=Jm(e),this.viewData={},this.completeViewDataMap=[],this.completeDateHeaderMap=[],this.viewDataMap={dateTableMap:[],allDayPanelMap:[]},this._groupedDataMapProvider=null}get groupedDataMap(){return this._groupedDataMapProvider.groupedDataMap}get hiddenInterval(){return this.viewDataGenerator.hiddenInterval}isSkippedDate(e){return this.viewDataGenerator.isSkippedDate(e)}update(e,t){this.viewDataGenerator=Jm(e.viewType);const{viewDataGenerator:n}=this,i=new Rm(n),a=new Bm(n),r=this._transformRenderOptions(e);this._options=r,t&&(this.completeViewDataMap=n.getCompleteViewDataMap(r),this.completeDateHeaderMap=i.getCompleteDateHeaderMap(r,this.completeViewDataMap),r.isGenerateTimePanelData&&(this.completeTimePanelMap=a.getCompleteTimePanelMap(r,this.completeViewDataMap))),this.viewDataMap=n.generateViewDataMap(this.completeViewDataMap,r),this.updateViewData(r),this._groupedDataMapProvider=new Pm(this.viewDataGenerator,this.viewDataMap,this.completeViewDataMap,{isVerticalGrouping:r.isVerticalGrouping,viewType:r.viewType,viewOffset:e.viewOffset}),this.dateHeaderData=i.generateDateHeaderData(this.completeDateHeaderMap,this.completeViewDataMap,r),r.isGenerateTimePanelData&&(this.timePanelData=a.generateTimePanelData(this.completeTimePanelMap,r))}createGroupedDataMapProvider(){this._groupedDataMapProvider=new Pm(this.viewDataGenerator,this.viewDataMap,this.completeViewDataMap,{isVerticalGrouping:this._options.isVerticalGrouping,viewType:this._options.viewType})}updateViewData(e){const t=this._transformRenderOptions(e);this.viewDataMapWithSelection=this.viewDataGenerator.markSelectedAndFocusedCells(this.viewDataMap,t),this.viewData=this.viewDataGenerator.getViewDataFromMap(this.completeViewDataMap,this.viewDataMapWithSelection,t)}_transformRenderOptions(e){const{getResourceManager:t,groupOrientation:n,groupByDate:i,isAllDayPanelVisible:a,viewOffset:r}=e,o=(0,hp.A)(e,eg),s=t(),l=s.groupCount(),u=this.viewDataGenerator.getInterval(e.hoursInterval);return(0,d.A)({},o,{startViewDate:this.viewDataGenerator.getStartViewDate(e),isVerticalGrouping:il(l,n),isHorizontalGrouping:Al(l,n),isGroupedByDate:Sl(l,n,i),isGroupedAllDayPanel:hl(l,n,a),getResourceManager:t,groupOrientation:n,isAllDayPanelVisible:a,viewOffset:r,interval:u})}getGroupPanelData(e){const t=this._transformRenderOptions(e),n=t.getResourceManager().groupResources();if(n.length>0){const e=this.getCellCount(t);return Il(n,e,t.isGroupedByDate,t.isGroupedByDate?1:e)}}getGroupStartDate(e){return this._groupedDataMapProvider.getGroupStartDate(e)}getGroupEndDate(e){return this._groupedDataMapProvider.getGroupEndDate(e)}findGroupCellStartDate(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._groupedDataMapProvider.findGroupCellStartDate(e,t,n,i)}findAllDayGroupCellStartDate(e){return this._groupedDataMapProvider.findAllDayGroupCellStartDate(e)}findCellPositionInMap(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._groupedDataMapProvider.findCellPositionInMap(e,t)}getCellsGroup(e){return this._groupedDataMapProvider.getCellsGroup(e)}getCompletedGroupsInfo(){return this._groupedDataMapProvider.getCompletedGroupsInfo()}getGroupIndices(){return this._groupedDataMapProvider.getGroupIndices()}getLastGroupCellPosition(e){return this._groupedDataMapProvider.getLastGroupCellPosition(e)}getRowCountInGroup(e){return this._groupedDataMapProvider.getRowCountInGroup(e)}getCellData(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=n&&!this._options.isVerticalGrouping?this.viewDataMap.allDayPanelMap:this.viewDataMap.dateTableMap[e],r=i?a.length-1-t:t,{cellData:o}=a[r];return o}getCellsByGroupIndexAndAllDay(e,t){const n=this._getRowCountWithAllDayRows(),i=this._options.isAllDayPanelVisible,a=this._options.isVerticalGrouping?e*n:0,r=this._options.isVerticalGrouping?(e+1)*n-1:n,o=i&&!t?a+1:a,s=t?o:r;return this.completeViewDataMap.slice(o,s+1).map(t=>t.filter(t=>{let{groupIndex:n}=t;return e===n}))}getCellCountWithGroup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{dateTableGroupedMap:n}=this.groupedDataMap;return n.filter((t,n)=>n<=e).reduce((e,n)=>e+n[t].length,0)}hasGroupAllDayPanel(e){var t,n;return this._options.isVerticalGrouping?Boolean(null===(n=this.groupedDataMap.dateTableGroupedMap[e])||void 0===n?void 0:n[0][0].cellData.allDay):(null===(t=this.groupedDataMap.allDayPanelGroupedMap[e])||void 0===t?void 0:t.length)>0}isGroupIntersectDateInterval(e,t,n){const i=this.getGroupStartDate(e),a=this.getGroupEndDate(e);return t<a&&n>i}findGlobalCellPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{completeViewDataMap:i}=this,a=this._options.isAllDayPanelVisible;for(let r=0;r<i.length;r+=1){const o=i[r];for(let i=0;i<o.length;i+=1){const s=o[i],{startDate:l,endDate:u,groupIndex:d,allDay:c}=s;if(t===d&&n===Boolean(c)&&this._compareDatesAndAllDay(e,l,u,n))return{position:{columnIndex:i,rowIndex:a&&!this._options.isVerticalGrouping?r-1:r},cellData:s}}}}_compareDatesAndAllDay(e,t,n,i){return i?A.A.sameDate(e,t):e>=t&&e<n}getSkippedDaysCount(e,t,n,i){const{dateTableGroupedMap:a}=this._groupedDataMapProvider.groupedDataMap,r=a[e];let o=0;for(let c=0;c<r.length;c+=1)for(let e=0;e<r[c].length;e+=1){const i=r[c][e].cellData;t.getTime()<i.endDate.getTime()&&n.getTime()>i.startDate.getTime()&&(o+=1)}const s=r[r.length-1][r[0].length-1].cellData,l=A.A.trimTime(s.startDate),u=Math.floor((n.getTime()-l.getTime())/A.A.dateToMilliseconds("day")),d=u>0?u:0;return i-o-d}getColumnsCount(){const{dateTableMap:e}=this.viewDataMap;return e?e[0].length:0}getViewEdgeIndices(e){return e?{firstColumnIndex:0,lastColumnIndex:this.viewDataMap.allDayPanelMap.length-1,firstRowIndex:0,lastRowIndex:0}:{firstColumnIndex:0,lastColumnIndex:this.viewDataMap.dateTableMap[0].length-1,firstRowIndex:0,lastRowIndex:this.viewDataMap.dateTableMap.length-1}}getGroupEdgeIndices(e,t){const n=this.groupedDataMap.dateTableGroupedMap[e],i=n[0].length,a=n.length,r=n[0][0].position.columnIndex,o=n[0][i-1].position.columnIndex;return t?{firstColumnIndex:r,lastColumnIndex:o,firstRowIndex:0,lastRowIndex:0}:{firstColumnIndex:r,lastColumnIndex:o,firstRowIndex:n[0][0].position.rowIndex,lastRowIndex:n[a-1][0].position.rowIndex}}isSameCell(e,t){const{startDate:n,groupIndex:i,allDay:a,index:r}=e,{startDate:o,groupIndex:s,allDay:l,index:u}=t;return n.getTime()===o.getTime()&&i===s&&a===l&&r===u}getLastViewDate(){const{completeViewDataMap:e}=this,t=e.length-1;return e[t][e[t].length-1].endDate}getStartViewDate(){return this._options.startViewDate}getIntervalDuration(e){return this.viewDataGenerator._getIntervalDuration(e)}getLastCellEndDate(){const e=new Date(this.getLastViewDate().getTime()-A.A.dateToMilliseconds("minute"));return R.X.addOffsets(e,[-this._options.viewOffset])}getLastViewDateByEndDayHour(e){const t=this.getLastCellEndDate(),n=A.A.dateTimeFromDecimal(e),i=new Date(t.setHours(n.hours,n.minutes));return this._adjustEndDateByDaylightDiff(t,i)}_adjustEndDateByDaylightDiff(e,t){const n=Oe.A.getDaylightOffsetInMs(e,t),i=new Date(t.getTime()-n);return new Date(i.getTime()-A.A.dateToMilliseconds("minute"))}getCellCountInDay(e,t,n){return this.viewDataGenerator.getCellCountInDay(e,t,n)}getCellCount(e){return this.viewDataGenerator.getCellCount(e)}getRowCount(e){return this.viewDataGenerator.getRowCount(e)}getVisibleDayDuration(e,t,n){return this.viewDataGenerator.getVisibleDayDuration(e,t,n)}_getRowCountWithAllDayRows(){const e=this._options.isAllDayPanelVisible?1:0;return this.getRowCount(this._options)+e}getFirstDayOfWeek(e){return this.viewDataGenerator.getFirstDayOfWeek(e)}setViewOptions(e){this._options=this._transformRenderOptions(e)}getViewOptions(){return this._options}getViewPortGroupCount(){const{dateTableGroupedMap:e}=this.groupedDataMap;return(null===e||void 0===e?void 0:e.length)||0}getCellsBetween(e,t){const[n,i]=this.normalizeCellsOrder(e,t),{index:a}=n,{index:r}=i,o=this.getCellsByGroupIndexAndAllDay(n.groupIndex??0,i.allDay??!1);return ll(this.viewType)?this.getCellsBetweenHorizontalView(o,a,r):this.getCellsBetweenVerticalView(o,a,r)}getCellsBetweenHorizontalView(e,t,n){return e.reduce((e,i)=>e.concat(i.filter(e=>{let{index:i}=e;return t<=i&&i<=n})),[])}getCellsBetweenVerticalView(e,t,n){var i;const a=[],r=e.length,o=(null===(i=e[0])||void 0===i?void 0:i.length)??0;let s=!1;for(let l=0;l<o;l+=1)for(let i=0;i<r;i+=1){const r=e[i][l],{index:o}=r;if(o===t&&(s=!0),s&&a.push(r),o===n)return a}return a}normalizeCellsOrder(e,t){return e.startDate>t.startDate?[t,e]:[e,t]}}const{tableCreator:ng}=kh,{abstract:ig}=ho.A,ag=A.A.dateToMilliseconds,rg="dx-scheduler-work-space",og="dx-scheduler-work-space-grouped",sg="dx-scheduler-work-space-vertical-grouped",lg="dx-scheduler-work-space-vertical-group-table",ug="dx-scheduler-work-space-both-scrollbar",dg="dx-scheduler-work-space-count",cg="dx-scheduler-work-space-group-by-date",hg="dx-scheduler-work-space-odd-cells",pg="dx-scheduler-time-panel-cell",mg="dx-scheduler-time-panel-row",gg="dx-scheduler-all-day-panel",fg="dx-scheduler-all-day-table",Dg="dx-scheduler-all-day-appointments",yg="dx-scheduler-all-day-title",_g="dx-scheduler-all-day-table-cell",Cg="dx-scheduler-all-day-table-row",vg="dx-scheduler-work-space-all-day",wg="dx-scheduler-work-space-all-day-collapsed",Ag="dx-scheduler-work-space-mouse-selection",Sg="dx-scheduler-cell-sizes-horizontal",bg="dx-scheduler-cell-sizes-vertical",Tg="dx-scheduler-header-panel",xg="dx-scheduler-header-panel-cell",kg="dx-scheduler-header-row",Eg="dx-scheduler-group-header",Ig="dx-scheduler-date-table-cell",Og="dx-scheduler-virtual-row",Mg="dx-scheduler-date-table-droppable-cell",Rg=(0,be.b4)(ir.A.down,"dxSchedulerWorkSpace"),Vg={ENTER:(0,be.b4)(Rh.Ve,"dxSchedulerDateTable"),DROP:(0,be.b4)(Rh.gv,"dxSchedulerDateTable"),LEAVE:(0,be.b4)(Rh.qG,"dxSchedulerDateTable")},Pg=(0,be.b4)(ve.U,"dxSchedulerDateTable"),Hg=(0,be.b4)(ir.A.down,"dxSchedulerDateTable"),Wg=(0,be.b4)(ir.A.up,"dxSchedulerDateTable"),$g=(0,be.b4)(ir.A.move,"dxSchedulerDateTable"),Bg="dxCellData",Gg=ag("day"),Ng=ag("hour"),Fg=`.${qt} td, .${fg} td`,zg=`.${Ig}, .${_g}`,Lg={renderComponents:{header:!0,timePanel:!0,dateTable:!0,allDayPanel:!0},generateNewData:!0};class Ug extends ho.A{constructor(){super(...arguments),this.viewDirection="vertical"}_activeStateUnit(){return zg}get type(){return""}get viewDataProvider(){return this._viewDataProvider||(this._viewDataProvider=new tg(this.type)),this._viewDataProvider}get cache(){return this._cache||(this._cache=new im.l),this._cache}get resourceManager(){return this.option("getResourceManager")()}get cellsSelectionState(){if(!this._cellsSelectionState){this._cellsSelectionState=new ym(this.viewDataProvider);const e=this.option("selectedCellData");if((null===e||void 0===e?void 0:e.length)>0){const t=e.map(e=>{const{groups:t}=e;if(!t||0===this._getGroupCount())return(0,d.A)({},e,{groupIndex:0});const n=this._getGroupIndexByGroupValues(t);return(0,d.A)({},e,{groupIndex:n})});this._cellsSelectionState.setSelectedCellsByData(t)}}return this._cellsSelectionState}get cellsSelectionController(){return this._cellsSelectionController||(this._cellsSelectionController=new Dm),this._cellsSelectionController}get isAllDayPanelVisible(){return this._isShowAllDayPanel()&&this.supportAllDayRow()}get verticalGroupTableClass(){return lg}get renovatedHeaderPanelComponent(){return Zp}get timeZoneCalculator(){return this.option("timeZoneCalculator")}get isDefaultDraggingMode(){return"default"===this.option("draggingMode")}notifyObserver(e,t){this.invoke(e,...t)}invoke(e){const t=this.option("notifyScheduler");if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.invoke(e,...i)}}_supportedKeys(){const e=function(e){e.preventDefault(),e.stopPropagation();const t=this._getSelectedCellsData();if(null!==t&&void 0!==t&&t.length){const n=t.map(e=>this._getCellByData(e)).filter(e=>Boolean(e));e.target=n,this._showPopup=!0,this._cellClickAction({event:e,cellElement:(0,D.A)(n),cellData:t[0]})}},t=(e,t)=>{var n;e.preventDefault(),e.stopPropagation();const i=null===(n=this.cellsSelectionState.getFocusedCell())||void 0===n?void 0:n.cellData;if(i){const n=i.allDay&&!this._isVerticalGroupedWorkSpace(),a=e.shiftKey,r=this.option("allowMultipleCellSelection"),o=this._isRTL(),s=this._getGroupCount(),l=this.isGroupedByDate(),u=this._isHorizontalGroupedWorkSpace(),c=this.viewDataProvider.findCellPositionInMap((0,d.A)({},i,{isAllDay:i.allDay})),h=u&&a&&!l?this.viewDataProvider.getGroupEdgeIndices(i.groupIndex,n):this.viewDataProvider.getViewEdgeIndices(n),p=this.cellsSelectionController.handleArrowClick({focusedCellPosition:c,edgeIndices:h,isRTL:o,isGroupedByDate:l,groupCount:s,isMultiSelection:a,isMultiSelectionAllowed:r,viewType:this.type,key:t,getCellDataByPosition:this.viewDataProvider.getCellData.bind(this.viewDataProvider),isAllDayPanelCell:n,focusedCellData:i});this._processNextSelectedCell(p,i,a&&r)}};return(0,T.X)(super._supportedKeys(),{enter:e,space:e,downArrow:e=>{t(e,"down")},upArrow:e=>{t(e,"up")},rightArrow:e=>{t(e,"right")},leftArrow:e=>{t(e,"left")}})}_isRTL(){return this.option("rtlEnabled")}_moveToCell(e,t){if(!(0,k.O9)(e)||!e.length)return;const n=this.option("allowMultipleCellSelection"),i=this._getFullCellData(e),a=this.cellsSelectionState.getFocusedCell().cellData,r=this.cellsSelectionController.moveToCell({isMultiSelection:t,isMultiSelectionAllowed:n,currentCellData:i,focusedCellData:a,isVirtualCell:e.hasClass(jt)});this._processNextSelectedCell(r,a,n&&t)}_processNextSelectedCell(e,t,n){const i=this.viewDataProvider.findCellPositionInMap({startDate:e.startDate,groupIndex:e.groupIndex,isAllDay:e.allDay,index:e.index});if(!this.viewDataProvider.isSameCell(t,e)){const t=e.allDay&&!this._isVerticalGroupedWorkSpace()?this._dom_getAllDayPanelCell(i.columnIndex):this._dom_getDateCell(i),a=e.allDay;this._setSelectedCellsStateAndUpdateSelection(a,i,n,t),this._dateTableScrollable.scrollToElement(t)}}_setSelectedCellsStateAndUpdateSelection(e,t,n,i){const a={rowIndex:t.rowIndex,columnIndex:t.columnIndex,allDay:e};this.cellsSelectionState.setFocusedCell(a.rowIndex,a.columnIndex,e),n?this.cellsSelectionState.setSelectedCells(a):this.cellsSelectionState.setSelectedCells(a,a),this.updateCellsSelection(),this._updateSelectedCellDataOption(this._getSelectedCellsData(),i)}_hasAllDayClass(e){return e.hasClass(_g)}_focusInHandler(e){if((0,D.A)(e.target).is(this._focusTarget())&&this._isCellClick){if(delete this._isCellClick,delete this._contextMenuHandled,super._focusInHandler.apply(this,arguments),this.cellsSelectionState.restoreSelectedAndFocusedCells(),!this.cellsSelectionState.getFocusedCell()){const e={columnIndex:0,rowIndex:0,allDay:this._isVerticalGroupedWorkSpace()&&this.isAllDayPanelVisible};this.cellsSelectionState.setFocusedCell(e.rowIndex,e.columnIndex,e.allDay),this.cellsSelectionState.setSelectedCells(e,e)}this.updateCellsSelection(),this._updateSelectedCellDataOption(this._getSelectedCellsData())}}_focusOutHandler(){super._focusOutHandler.apply(this,arguments),this._contextMenuHandled||this._disposed||(this.cellsSelectionState.releaseSelectedAndFocusedCells(),this.viewDataProvider.updateViewData(this.generateRenderOptions()),this.updateCellsSelection())}_focusTarget(){return this.$element()}_isVerticalGroupedWorkSpace(){var e;return Boolean(null===(e=this.option("groups"))||void 0===e?void 0:e.length)&&"vertical"===this.option("groupOrientation")}_isHorizontalGroupedWorkSpace(){var e;return Boolean(null===(e=this.option("groups"))||void 0===e?void 0:e.length)&&"horizontal"===this.option("groupOrientation")}_isWorkSpaceWithCount(){return this.option("intervalCount")>1}_isWorkspaceWithOddCells(){return.5===this.option("hoursInterval")&&!this.isVirtualScrolling()}_getRealGroupOrientation(){return this._isVerticalGroupedWorkSpace()?"vertical":"horizontal"}createRAllDayPanelElements(){this._$allDayPanel=(0,D.A)("<div>").addClass(gg),this._$allDayTitle=(0,D.A)("<div>").appendTo(this._$headerPanelEmptyCell)}_dateTableScrollableConfig(){let e={useKeyboard:!1,bounceEnabled:!1,updateManually:!0,onScroll:()=>{var e;null===(e=this._groupedStrategy.cache)||void 0===e||e.clear()},onInitialized:e=>{let{component:t}=e;const n=!1===t.option("useKeyboard"),i=!0===t.option("useNative");n&&i&&(0,D.A)(t.container()).attr("tabindex",-1)},onOptionChanged:e=>{let{fullName:t,value:n,component:i}=e;const a=!1===i.option("useKeyboard");a&&"useNative"===t&&!0===n&&(0,D.A)(i.container()).attr("tabindex",-1)}};if(this._needCreateCrossScrolling()&&(e=(0,T.X)(e,this._createCrossScrollingConfig(e))),this.isVirtualScrolling()&&(this.virtualScrollingDispatcher.horizontalScrollingAllowed||this.virtualScrollingDispatcher.height)){const t=e.onScroll;e=(0,d.A)({},e,{onScroll:e=>{null===t||void 0===t||t(e),this.virtualScrollingDispatcher.handleOnScrollEvent(null===e||void 0===e?void 0:e.scrollOffset)}})}return e}_createCrossScrollingConfig(e){let{onScroll:t}=e;return{direction:"both",onScroll:e=>{null===t||void 0===t||t(),this._scrollSync.sidebar({top:e.scrollOffset.top}),this._scrollSync.header({left:e.scrollOffset.left})},onEnd:()=>{this.option("onScrollEnd")()}}}_headerScrollableConfig(){return{useKeyboard:!1,showScrollbar:"never",direction:"horizontal",useNative:!1,updateManually:!0,bounceEnabled:!1,onScroll:e=>{this._scrollSync.dateTable({left:e.scrollOffset.left})}}}_visibilityChanged(e){this.cache.clear(),e&&this._updateGroupTableHeight(),e&&this._needCreateCrossScrolling()&&this._setTableSizes()}_setTableSizes(){this.cache.clear(),this._attachTableClasses();let e=this.getCellWidth();e<this.getCellMinWidth()&&(e=this.getCellMinWidth());const t=this.getWorkSpaceMinWidth(),n=this._getGroupCount(),i=this._getTotalCellCount(n);let a=e*i;a<t&&(a=t),(0,xe.zj)(this._$headerPanel,a),(0,xe.zj)(this._$dateTable,a),this._$allDayTable&&(0,xe.zj)(this._$allDayTable,a),this._attachHeaderTableClasses(),this._updateGroupTableHeight(),this._updateScrollable()}getWorkSpaceMinWidth(){return this._groupedStrategy.getWorkSpaceMinWidth()}_dimensionChanged(){this._isVisible()&&(this.option("crossScrollingEnabled")&&this._setTableSizes(),this.updateHeaderEmptyCellWidth(),this._updateScrollable(),this.cache.clear())}_needCreateCrossScrolling(){return this.option("crossScrollingEnabled")}_getElementClass(){return(0,v.lQ)()}_getRowCount(){return this.viewDataProvider.getRowCount({intervalCount:this.option("intervalCount"),currentDate:this.option("currentDate"),viewType:this.type,hoursInterval:this.option("hoursInterval"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour")})}_getCellCount(){return this.viewDataProvider.getCellCount({intervalCount:this.option("intervalCount"),currentDate:this.option("currentDate"),viewType:this.type,hoursInterval:this.option("hoursInterval"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour")})}isRenovatedRender(){return this.renovatedRenderSupported()&&this.option("renovateRender")}_isVirtualModeOn(){return"virtual"===this.option("scrolling.mode")}isVirtualScrolling(){return this.isRenovatedRender()&&this._isVirtualModeOn()}_initVirtualScrolling(){this.virtualScrollingDispatcher&&(this.virtualScrollingDispatcher.dispose(),this.virtualScrollingDispatcher=null),this.virtualScrollingDispatcher=new wm(this._getVirtualScrollingDispatcherOptions()),this.virtualScrollingDispatcher.attachScrollableEvents(),this.renderer=new Tm(this)}onDataSourceChanged(e){}isGroupedAllDayPanel(){return hl(this.option("groups").length,this.option("groupOrientation"),this.isAllDayPanelVisible)}generateRenderOptions(e){var t;const n=this._getGroupCount(),i=n>0?this.option("groupOrientation"):this._getDefaultGroupStrategy(),a=(0,d.A)({groupByDate:this.option("groupByDate"),startRowIndex:0,startCellIndex:0,groupOrientation:i,today:null===(t=this._getToday)||void 0===t?void 0:t.call(this),getResourceManager:this.option("getResourceManager"),isProvideVirtualCellsWidth:e,isAllDayPanelVisible:this.isAllDayPanelVisible,selectedCells:this.cellsSelectionState.getSelectedCells(),focusedCell:this.cellsSelectionState.getFocusedCell(),headerCellTextFormat:this._getFormat(),getDateForHeaderText:(e,t)=>t,viewOffset:this.option("viewOffset"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),cellDuration:this.getCellDuration(),viewType:this.type,intervalCount:this.option("intervalCount"),hoursInterval:this.option("hoursInterval"),currentDate:this.option("currentDate"),startDate:this.option("startDate"),firstDayOfWeek:this.option("firstDayOfWeek"),showCurrentTimeIndicator:this.option("showCurrentTimeIndicator")},this.virtualScrollingDispatcher.getRenderState());return a}renovatedRenderSupported(){return!0}_updateGroupTableHeight(){this._isVerticalGroupedWorkSpace()&&(0,E.Vd)()&&this._setHorizontalGroupHeaderCellsHeight()}updateHeaderEmptyCellWidth(){if((0,E.Vd)()&&this._isRenderHeaderPanelEmptyCell()){const e=this.getTimePanelWidth(),t=this.getGroupTableWidth();this._$headerPanelEmptyCell.css("width",e+t)}}updateHeaderPanelScrollbarPadding(){if((0,E.Vd)()&&this._$headerPanelContainer){const e=this._getScrollbarWidth();this._$headerPanelContainer.css("paddingRight",`${e}px`)}}_getScrollbarWidth(){const e=(0,D.A)(this._dateTableScrollable.container()).get(0),t=e.offsetWidth-e.clientWidth;return t}_isGroupsSpecified(e){var t;return(null===(t=this.option("groups"))||void 0===t?void 0:t.length)&&e}_getGroupIndexByGroupValues(e){return e&&ht(ut(e),this.resourceManager.groupsLeafs)[0]}_getViewStartByOptions(){return cl(this.option("startDate"),this.option("currentDate"),this._getIntervalDuration(),this.option("startDate")?this._calculateViewStartDate():void 0)}_getIntervalDuration(){return this.viewDataProvider.getIntervalDuration(this.option("intervalCount"))}_getHeaderDate(){return this.getStartViewDate()}_calculateViewStartDate(){return pl(this.option("startDate"))}_firstDayOfWeek(){return this.viewDataProvider.getFirstDayOfWeek(this.option("firstDayOfWeek"))}_attachEvents(){this._createSelectionChangedAction(),this._attachClickEvent(),this._attachContextMenuEvent()}_attachClickEvent(){const e=this,t=this._createAction(t=>{e._pointerDownHandler(t.event)});this._createCellClickAction();const n=`.${Ig},.${_g}`,i=this.$element();Ae.A.off(i,Rg),Ae.A.off(i,Pg),Ae.A.on(i,Rg,e=>{(0,be.Er)(e)&&e.which>1?e.preventDefault():t({event:e})}),Ae.A.on(i,Pg,n,t=>{const n=(0,D.A)(t.target);e._cellClickAction({event:t,cellElement:(0,f.cc)(n),cellData:e.getCellData(n)})})}_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick",{afterExecute:e=>this._cellClickHandler(e.args[0].event)})}_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")}_cellClickHandler(e){this._showPopup&&(delete this._showPopup,this._handleSelectedCellsClick())}_pointerDownHandler(e){const t=(0,D.A)(e.target);if(t.hasClass(Ig)||t.hasClass(_g))if(this._isCellClick=!0,t.hasClass("dx-scheduler-focused-cell"))this._showPopup=!0;else{const e=this._getCoordinatesByCell(t),n=this._hasAllDayClass(t);this._setSelectedCellsStateAndUpdateSelection(n,e,!1,t)}else this._isCellClick=!1}_handleSelectedCellsClick(){const e=this._getSelectedCellsData(),t=e[0],n=e[e.length-1],i={startDate:t.startDate,endDate:n.endDate,startDateUTC:t.startDateUTC,endDateUTC:n.endDateUTC};void 0!==n.allDay&&(i.allDay=n.allDay),this.option("onSelectedCellsClick")(i,n.groups)}_attachContextMenuEvent(){this._createContextMenuAction();const e=`.${Ig},.${_g}`,t=this.$element(),n=(0,be.b4)(Mh.U,this.NAME);Ae.A.off(t,n,e),Ae.A.on(t,n,e,this._contextMenuHandler.bind(this))}_contextMenuHandler(e){const t=(0,D.A)(e.target);this._contextMenuAction({event:e,cellElement:(0,f.cc)(t),cellData:this.getCellData(t)}),this._contextMenuHandled=!0}_createContextMenuAction(){this._contextMenuAction=this._createActionByOption("onCellContextMenu")}_getGroupHeaderContainer(){return this._isVerticalGroupedWorkSpace()?this._$groupTable:this._$thead}_getDateHeaderContainer(){return this._$thead}_getCalculateHeaderCellRepeatCount(){return this._groupedStrategy.calculateHeaderCellRepeatCount()}_updateScrollable(){var e,t;this._dateTableScrollable.update(),null===(e=this._headerScrollable)||void 0===e||e.update(),null===(t=this._sidebarScrollable)||void 0===t||t.update(),this.updateHeaderPanelScrollbarPadding()}_getTimePanelRowCount(){return this._getCellCountInDay()}_getCellCountInDay(){const e=this.option("hoursInterval"),t=this.option("startDayHour"),n=this.option("endDayHour");return this.viewDataProvider.getCellCountInDay(t,n,e)}_getTotalCellCount(e){return this._groupedStrategy.getTotalCellCount(e)}_getTotalRowCount(e,t){let n=this._groupedStrategy.getTotalRowCount(e);return t&&this.isAllDayPanelVisible&&(n+=e),n}_getGroupIndex(e,t){return this._groupedStrategy.getGroupIndex(e,t)}calculateEndDate(e){const{viewDataGenerator:t}=this.viewDataProvider;return t.calculateEndDate(e,t.getInterval(this.option("hoursInterval")),this.option("endDayHour"))}_getGroupCount(){return this.resourceManager.groupCount()}_attachTablesEvents(){const e=this.$element();this._attachDragEvents(e),this._attachPointerEvents(e)}_detachDragEvents(e){Ae.A.off(e,Vg.ENTER),Ae.A.off(e,Vg.LEAVE),Ae.A.off(e,Vg.DROP)}_attachDragEvents(e){this._detachDragEvents(e),Ae.A.on(e,Vg.ENTER,Fg,{checkDropTarget:(e,t)=>!this._isOutsideScrollable(e,t)},e=>{this.preventDefaultDragging||(this.removeDroppableCellClass(),(0,D.A)(e.target).addClass(Mg))}),Ae.A.on(e,Vg.LEAVE,()=>{this.preventDefaultDragging||this.removeDroppableCellClass()}),Ae.A.on(e,Vg.DROP,Fg,()=>{var e,t;this.dragBehavior&&(null!==(e=this.dragBehavior)&&void 0!==e&&e.dragBetweenComponentsPromise?null===(t=this.dragBehavior.dragBetweenComponentsPromise)||void 0===t||t.then(()=>{this.dragBehavior.removeDroppableClasses()}):this.dragBehavior.removeDroppableClasses())})}_attachPointerEvents(e){let t=!1;Ae.A.off(e,$g),Ae.A.off(e,Hg),Ae.A.on(e,Hg,Fg,e=>{(0,be.Er)(e)&&1===e.which&&(t=!0,this.$element().addClass(Ag),Ae.A.off(wt.A.getDocument(),Wg),Ae.A.on(wt.A.getDocument(),Wg,()=>{t=!1,this.$element().removeClass(Ag)}))}),Ae.A.on(e,$g,Fg,e=>{t&&this._dateTableScrollable&&!this._dateTableScrollable.option("scrollByContent")&&(e.preventDefault(),e.stopPropagation(),this._moveToCell((0,D.A)(e.target),!0))})}_getFormat(){return ig()}getWorkArea(){return this._$dateTableContainer}getScrollable(){return this._dateTableScrollable}getScrollableScrollTop(){return this._dateTableScrollable.scrollTop()}getGroupedScrollableScrollTop(e){return this._groupedStrategy.getScrollableScrollTop(e)}getScrollableScrollLeft(){return this._dateTableScrollable.scrollLeft()}getScrollableOuterWidth(){return this._dateTableScrollable.scrollWidth()}getScrollableContainer(){return(0,D.A)(this._dateTableScrollable.container())}getHeaderPanelHeight(){return this._$headerPanel&&(0,xe.P$)(this._$headerPanel,!0)}getTimePanelWidth(){return this._$timePanel&&(0,x.N)(this._$timePanel.get(0)).width}getGroupTableWidth(){return this._$groupTable?(0,xe.Ot)(this._$groupTable):0}getWorkSpaceLeftOffset(){return this._groupedStrategy.getLeftOffset()}_getCellCoordinatesByIndex(e){const t=Math.floor(e/this._getRowCount()),n=e-this._getRowCount()*t;return{columnIndex:t,rowIndex:n}}_getDateGenerationOptions(){var e;return{startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),interval:null===(e=this.viewDataProvider.viewDataGenerator)||void 0===e?void 0:e.getInterval(this.option("hoursInterval")),startViewDate:this.getStartViewDate(),firstDayOfWeek:this._firstDayOfWeek()}}_getIntervalBetween(e,t){const n=this.getStartViewDate(),i=this.option("startDayHour")*Ng,a=A.A.getTimezonesDifference(n,e),r=e.getTime()-n.getTime()-a,o=this._getDaysOfInterval(r,i),s=this._getWeekendsCount(o);let l=(o-s)*Gg;if(!t){const{hiddenInterval:e}=this.viewDataProvider,t=this.getVisibleDayDuration();l=r-o*e-s*t}return l}_getWeekendsCount(e){return 0}_getDaysOfInterval(e,t){return Math.floor((e+t)/Gg)}_updateIndex(e){return e*this._getRowCount()}getDroppableCell(){return this._getDateTables().find(`.${Mg}`)}_getWorkSpaceWidth(){return this.cache.memo("workspaceWidth",()=>{if(this._needCreateCrossScrolling())return(0,x.N)(this._$dateTable.get(0)).width;const e=(0,x.N)(this.$element().get(0)).width,t=this.getTimePanelWidth(),n=this.getGroupTableWidth();return e-t-n})}_getCellByCoordinates(e,t,n){const i=this._groupedStrategy.prepareCellIndexes(e,t,n);return this._dom_getDateCell(i)}_dom_getDateCell(e){return this._$dateTable.find(`tr:not(.${Og})`).eq(e.rowIndex).find(`td:not(.${jt})`).eq(e.columnIndex)}_dom_getAllDayPanelCell(e){return this._$allDayPanel.find("tr").eq(0).find("td").eq(e)}_getCells(e,t){const n=e?_g:Ig;if("vertical"===t){let e=[];for(let t=1;;t++){const i=this.$element().find(`tr .${n}:nth-child(${t})`);if(!i.length)break;e=e.concat(i.toArray())}return(0,D.A)(e)}return this.$element().find(`.${n}`)}_getFirstAndLastDataTableCell(){const e=this.isVirtualScrolling()?`.${Ig}, .${jt}`:`.${Ig}`,t=this.$element().find(e);return[t[0],t[t.length-1]]}_getAllCells(e){if(this._isVerticalGroupedWorkSpace())return this._$dateTable.find(`td:not(.${jt})`);const t=e&&this.supportAllDayRow()?_g:Ig;return this.$element().find(`.${t}`)}_setHorizontalGroupHeaderCellsHeight(){const{height:e}=(0,x.N)(this._$dateTable.get(0));(0,xe.NG)(this._$groupTable,e)}_getGroupHeaderCells(){return this.$element().find(`.${Eg}`)}_getScrollCoordinates(e,t,n,i,a){const r=n||new Date(this.option("currentDate")),o=this.option("startDayHour"),s=this.option("endDayHour");e<o&&(e=o),e>=s&&(e=s-1),r.setHours(e,t,0,0);const l=this.viewDataProvider.findGlobalCellPosition(r,i,a);return this.virtualScrollingDispatcher.calculateCoordinatesByDataAndPosition(null===l||void 0===l?void 0:l.cellData,null===l||void 0===l?void 0:l.position,r,sl(this.type),"vertical"===this.viewDirection)}_isOutsideScrollable(e,t){const n=this._dateTableScrollable.$element(),i=(0,x.N)(n.get(0)),a=(0,E.zk)(),r=!(0,D.A)(e).closest(n).length,o=t.pageX<i.left||t.pageX>i.left+i.width+(a.scrollX||0),s=t.pageY<i.top||t.pageY>i.top+i.height+(a.scrollY||0);return!(r&&!o)&&(s||o)}supportAllDayRow(){return!0}keepOriginalHours(){return!1}_normalizeCellData(e){var t,n;return(0,T.X)(!0,{},{startDate:e.startDate,endDate:e.endDate,startDateUTC:e.startDate&&(null===(t=this.timeZoneCalculator)||void 0===t?void 0:t.createDate(e.startDate,"fromGrid")),endDateUTC:e.endDate&&(null===(n=this.timeZoneCalculator)||void 0===n?void 0:n.createDate(e.endDate,"fromGrid")),groups:e.groups,groupIndex:e.groupIndex,allDay:e.allDay})}_getSelectedCellsData(){const e=this.cellsSelectionState.getSelectedCells();return null===e||void 0===e?void 0:e.map(this._normalizeCellData.bind(this))}getCellData(e){const t=this._getFullCellData(e)??{};return this._normalizeCellData(t)}_getFullCellData(e){const t=e[0];if(t)return this._getDataByCell(e)}_getVirtualRowOffset(){return this.virtualScrollingDispatcher.virtualRowOffset}_getVirtualCellOffset(){return this.virtualScrollingDispatcher.virtualCellOffset}_getDataByCell(e){const t=e.parent().index()-this.virtualScrollingDispatcher.topVirtualRowsCount,n=e.index()-this.virtualScrollingDispatcher.leftVirtualCellsCount,{viewDataProvider:i}=this,a=this._hasAllDayClass(e),r=i.getCellData(t,n,a);return r||void 0}isGroupedByDate(){return this.option("groupByDate")&&this._isHorizontalGroupedWorkSpace()&&this._getGroupCount()>0}getCellIndexByDate(e,t){const{viewDataGenerator:n}=this.viewDataProvider,i=t?864e5:n.getInterval(this.option("hoursInterval")),a=Qs(this.getStartViewDate(),this.option("startDayHour")),r=this._getIntervalBetween(e,t)+a;let o=Math.floor(r/i);return t&&(o=this._updateIndex(o)),o<0&&(o=0),o}getDataByDroppableCell(){const e=this.getCellData((0,D.A)(this.getDroppableCell())),{allDay:t}=e,{startDate:n}=e,{endDate:i}=e;return{startDate:n,endDate:i,allDay:t,groups:e.groups}}getDateRange(){return[this.getStartViewDate(),this.getEndViewDateByEndDayHour()]}getCellMinWidth(){return 75}getRoundedCellWidth(e,t,n){if(e<0||!(0,E.Vd)())return 0;const i=this.$element().find(`.${Kt}`).eq(0);let a=0;const r=i.find(`.${Ig}`),o=this._getCellCount()*e;n=n||this._getCellCount(),(0,k.O9)(t)||(t=o);for(let s=t;s<o+n;s++){const e=(0,D.A)(r).eq(s).get(0),t=e?(0,x.N)(e).width:0;a+=t}return a/(o+n-t)}getCellWidth(){return ac(this.getDOMElementsMetaData())}getCellHeight(){return ic(this.getDOMElementsMetaData())}getAllDayHeight(){return rc(this.option("showAllDayPanel"),this._isVerticalGroupedWorkSpace(),this.getDOMElementsMetaData())}getMaxAllowedPosition(e){return oc(e,this.viewDataProvider,this.option("rtlEnabled"),this.getDOMElementsMetaData())}getAllDayOffset(){return this._groupedStrategy.getAllDayOffset()}getCellIndexByCoordinates(e,t){const{horizontalScrollingState:n,verticalScrollingState:i}=this.virtualScrollingDispatcher,a=(null===n||void 0===n?void 0:n.itemCount)??this._getTotalCellCount(this._getGroupCount()),r=this.getCellWidth(),o=t?this.getAllDayHeight():this.getCellHeight(),s=(null===n||void 0===n?void 0:n.virtualItemSizeBefore)??0,l=(null===i||void 0===i?void 0:i.virtualItemSizeBefore)??0,u=Math.floor(Math.floor(e.top-l)/Math.floor(o));let d=(e.left-s)/r;return d=Math.floor(d+.05),this._isRTL()&&(d=a-d-1),a*u+d}getStartViewDate(){return this.viewDataProvider.getStartViewDate()}getEndViewDate(){return this.viewDataProvider.getLastCellEndDate()}getEndViewDateByEndDayHour(){return this.viewDataProvider.getLastViewDateByEndDayHour(this.option("endDayHour"))}getCellDuration(){return ml(this.type,this.option("startDayHour"),this.option("endDayHour"),this.option("hoursInterval"))}getIntervalDuration(e){return e?ag("day"):this.getCellDuration()}getVisibleDayDuration(){const e=this.option("startDayHour"),t=this.option("endDayHour"),n=this.option("hoursInterval");return this.viewDataProvider.getVisibleDayDuration(e,t,n)}getGroupBounds(e){const t=this._groupedStrategy instanceof Om?this.getGroupBoundsVertical(e.groupIndex):this.getGroupBoundsHorizontal(e);return this._isRTL()?this.getGroupBoundsRtlCorrection(t):t}getGroupBoundsVertical(e){const t=this._getFirstAndLastDataTableCell();return this._groupedStrategy.getGroupBoundsOffset(e,t)}getGroupBoundsHorizontal(e){const t=this._getCellCount(),n=this._getCells(),i=this.getCellWidth(),{groupedDataMap:a}=this.viewDataProvider;return this._groupedStrategy.getGroupBoundsOffset(t,n,i,e,a)}getGroupBoundsRtlCorrection(e){const t=this.getCellWidth();return(0,d.A)({},e,{left:e.right-2*t,right:e.left+2*t})}needRecalculateResizableArea(){return this._isVerticalGroupedWorkSpace()&&0!==this.getScrollable().scrollTop()}getCellByCoordinates(e,t){const n=this._getCells(t),i=this.getCellIndexByCoordinates(e,t);return n.eq(i)}getVisibleBounds(){const e={},t=this.getScrollable().$element(),n=this.getCellHeight(),i=this.getScrollableScrollTop()/n,a=i+(0,xe.Oq)(t)/n;return e.top={hours:Math.floor(i*this.option("hoursInterval"))+this.option("startDayHour"),minutes:i%2?30:0},e.bottom={hours:Math.floor(a*this.option("hoursInterval"))+this.option("startDayHour"),minutes:Math.floor(a)%2?30:0},e}updateScrollPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.timeZoneCalculator.createDate(e,"toGrid"),a=n&&this.isAllDayPanelVisible;this.needUpdateScrollPosition(i,t,a)&&this.scrollTo(i,t,a,!1)}needUpdateScrollPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this._getCellsInViewport(n),a=this._isGroupsSpecified(t)?this._getGroupIndexByGroupValues(t):0,r=e.getTime(),o=A.A.trimTime(e).getTime();return i.reduce((e,t)=>{const{startDate:i,endDate:s,groupIndex:l}=this.getCellData(t),u=i.getTime(),d=s.getTime();return(!(!n&&u<=r&&r<d||n&&o===u)||a!==l)&&e},!0)}_getCellsInViewport(e){const t=this.getScrollable().$element(),n=this.getCellHeight(),i=this.getCellWidth(),a=this._getTotalCellCount(this._getGroupCount()),r=this.getScrollableScrollTop(),o=this.getScrollableScrollLeft(),s=r/n-this.virtualScrollingDispatcher.topVirtualRowsCount;let l=Math.floor(s);r%n!==0&&(l+=1);const u=o/i;let d=Math.floor(u);o%i!==0&&(d+=1);const c=Math.floor(s+(0,xe.Oq)(t)/n),h=Math.floor(u+(0,xe.RG)(t)/i),p=this._getAllCells(e),m=[];return p.each(function(e){const t=(0,D.A)(this),n=e%a,i=e/a;d<=n&&n<h&&l<=i&&i<c&&m.push(t)}),m}scrollToTime(e,t,n){if(!this._isValidScrollDate(n))return;const i=this._getScrollCoordinates(e,t,n),a=this.getScrollable();a.scrollBy({top:i.top-a.scrollTop(),left:0})}scrollTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this._isValidScrollDate(e,i))return;const a=this._getGroupCount()&&t?this._getGroupIndexByGroupValues(t):0,r=n&&this.isAllDayPanelVisible,o=this._getScrollCoordinates(e.getHours(),e.getMinutes(),e,a,r),s=this.getScrollable(),l=s.$element(),u=this.getCellWidth(),d=this.option("rtlEnabled")?u:0,c=(0,xe.Oq)(l),h=(0,xe.RG)(l),p=this.getCellHeight(),m=(h-u)/2,g=(c-p)/2,f=o.left-s.scrollLeft()-m-d;let D=o.top-s.scrollTop()-g;r&&!this._isVerticalGroupedWorkSpace()&&(D=0),this.option("templatesRenderAsynchronously")?setTimeout(()=>{s.scrollBy({left:f,top:D})}):s.scrollBy({left:f,top:D})}_isValidScrollDate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.getStartViewDate(),i=this.getEndViewDate();return!(e<n||e>i)||(t&&M.A.log("W1008",e),!1)}needApplyCollectorOffset(){return!1}removeDroppableCellClass(e){const t=e||this.getDroppableCell();null===t||void 0===t||t.removeClass(Mg)}_getCoordinatesByCell(e){const t=e.index()-this.virtualScrollingDispatcher.leftVirtualCellsCount;let n=e.parent().index();const i=this._hasAllDayClass(e),a=this._isVerticalGroupedWorkSpace();return i&&!a||(n-=this.virtualScrollingDispatcher.topVirtualRowsCount),{rowIndex:n,columnIndex:t}}_isShowAllDayPanel(){return this.option("showAllDayPanel")}_getTimePanelCells(){return this.$element().find(`.${pg}`)}_getRDateTableProps(){return{viewData:this.viewDataProvider.viewData,viewContext:this.getR1ComponentsViewContext(),dataCellTemplate:this.option("dataCellTemplate"),addDateTableClass:!this.option("crossScrollingEnabled")||this.isVirtualScrolling(),groupOrientation:this.option("groupOrientation"),addVerticalSizesClassToRows:!1}}getR1ComponentsViewContext(){return{view:{type:this.type},crossScrollingEnabled:Boolean(this.option("crossScrollingEnabled"))}}_updateSelectedCellDataOption(e,t){this.option("selectedCellData",e),this._selectionChangedAction({selectedCellData:e})}_getCellByData(e){const{startDate:t,groupIndex:n,allDay:i,index:a}=e,r=this.viewDataProvider.findCellPositionInMap({startDate:t,groupIndex:n,isAllDay:i,index:a});if(r)return i&&!this._isVerticalGroupedWorkSpace()?this._dom_getAllDayPanelCell(r.columnIndex):this._dom_getDateCell(r)}getDOMElementsMetaData(){return this.cache.memo("cellElementsMeta",()=>({dateTableCellsMeta:this._getDateTableDOMElementsInfo(),allDayPanelCellsMeta:this._getAllDayPanelDOMElementsInfo()}))}_getDateTableDOMElementsInfo(){const e=this._getAllCells(!1);if(!e.length||!(0,E.Vd)())return[[{}]];const t=this._getDateTable(),n=(0,x.N)(t.get(0)),i=this.viewDataProvider.getColumnsCount(),a=[];return e.each((e,t)=>{const r=Math.floor(e/i);a.length===r&&a.push([]),this._addCellMetaData(a[r],t,n)}),a}_getAllDayPanelDOMElementsInfo(){const e=[];if(this.isAllDayPanelVisible&&!this._isVerticalGroupedWorkSpace()&&(0,E.Vd)()){const t=this._getAllCells(!0);if(!t.length)return[{}];const n=this._$allDayPanel,i=(0,x.N)(n.get(0));t.each((t,n)=>{this._addCellMetaData(e,n,i)})}return e}_addCellMetaData(e,t,n){const i=(0,x.N)(t);e.push({left:i.left-n.left,top:i.top-n.top,width:i.width,height:i.height})}_oldRender_getAllDayCellData(e){return(t,n,i)=>{const a=i%this._getCellCount(),r=this._getDateGenerationOptions(!0);let o=this.viewDataProvider.viewDataGenerator.getDateByCellIndices(r,n,a);o=A.A.trimTime(o);let s=e||0;this.isGroupedByDate()?s=Math.floor(i%this._getGroupCount()):this._isHorizontalGroupedWorkSpace()&&(s=Math.floor(i/this._getCellCount()));const l={startDate:o,endDate:o,allDay:!0,groupIndex:s,groups:Ka(this.resourceManager.groupsLeafs,s)};return{key:Bg,value:l}}}renderRWorkSpace(){let{header:e,timePanel:t,dateTable:n,allDayPanel:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lg.renderComponents;e&&this.renderRHeaderPanel(),t&&this.renderRTimeTable(),n&&this.renderRDateTable(),i&&this.renderRAllDayPanel()}renderRDateTable(){Gs.renovation.renderComponent(this,this._$dateTable,yp,"renovatedDateTable",this._getRDateTableProps())}renderRGroupPanel(){var e;const t={viewContext:this.getR1ComponentsViewContext(),groups:this.option("groups"),groupOrientation:this.option("groupOrientation"),groupByDate:this.isGroupedByDate(),resourceCellTemplate:this.option("resourceCellTemplate"),className:this.verticalGroupTableClass,groupPanelData:this.viewDataProvider.getGroupPanelData(this.generateRenderOptions())};null!==(e=this.option("groups"))&&void 0!==e&&e.length?(this._attachGroupCountClass(),Gs.renovation.renderComponent(this,this._getGroupHeaderContainer(),Hp,"renovatedGroupPanel",t)):this._detachGroupCountClass()}renderRAllDayPanel(){const e=this.isAllDayPanelVisible&&!this.isGroupedAllDayPanel();if(e){var t;this._updateAllDayVisibility();const e=(0,d.A)({viewData:this.viewDataProvider.viewData,viewContext:this.getR1ComponentsViewContext(),dataCellTemplate:this.option("dataCellTemplate"),startCellIndex:0},(null===(t=this.virtualScrollingDispatcher.horizontalVirtualScrolling)||void 0===t?void 0:t.getRenderState())||{});Gs.renovation.renderComponent(this,this._$allDayTable,_p,"renovatedAllDayPanel",e),Gs.renovation.renderComponent(this,this._$allDayTitle,Bh,"renovatedAllDayPanelTitle",{})}this._updateAllDayVisibility(),this._updateScrollable()}renderRTimeTable(){Gs.renovation.renderComponent(this,this._$timePanel,tm,"renovatedTimePanel",{viewContext:this.getR1ComponentsViewContext(),timePanelData:this.viewDataProvider.timePanelData,timeCellTemplate:this.option("timeCellTemplate"),groupOrientation:this.option("groupOrientation")})}renderRHeaderPanel(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null!==(e=this.option("groups"))&&void 0!==e&&e.length?this._attachGroupCountClass():this._detachGroupCountClass(),Gs.renovation.renderComponent(this,this._$thead,this.renovatedHeaderPanelComponent,"renovatedHeaderPanel",{viewContext:this.getR1ComponentsViewContext(),dateHeaderData:this.viewDataProvider.dateHeaderData,groupPanelData:this.viewDataProvider.getGroupPanelData(this.generateRenderOptions()),dateCellTemplate:this.option("dateCellTemplate"),timeCellTemplate:this.option("timeCellTemplate"),groups:this.option("groups"),groupByDate:this.isGroupedByDate(),groupOrientation:this.option("groupOrientation"),resourceCellTemplate:this.option("resourceCellTemplate"),isRenderDateHeader:t})}initDragBehavior(e){if(!this.dragBehavior&&e){this.dragBehavior=new lm(e);const t=(0,D.A)(e.element());this._createDragBehavior(this.getWorkArea(),t),this._isVerticalGroupedWorkSpace()||this._createDragBehavior(this._$allDayPanel,t)}}_createDragBehavior(e,t){const n={getItemData:(e,t)=>t._getItemData(e),getItemSettings:e=>e.data(It)};this._createDragBehaviorBase(e,t,n)}_createDragBehaviorBase(e,t,n){const i=this.$element().find(`.${Vt}`);this.dragBehavior.addTo(e,Zg(i,t,this.isDefaultDraggingMode,this.dragBehavior,()=>{this.isDefaultDraggingMode||(this.preventDefaultDragging=!1)},()=>{this.isDefaultDraggingMode||(this.preventDefaultDragging=!0)},()=>this.getDroppableCell(),()=>this._getDateTables(),()=>this.removeDroppableCellClass(),()=>this.getCellWidth(),n))}_isRenderHeaderPanelEmptyCell(){return this._isVerticalGroupedWorkSpace()}_dispose(){super._dispose(),this.virtualScrollingDispatcher.dispose()}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{currentDate:new Date,intervalCount:1,startDate:null,firstDayOfWeek:void 0,startDayHour:0,endDayHour:24,viewOffset:0,hoursInterval:.5,activeStateEnabled:!0,hoverStateEnabled:!0,groups:[],showAllDayPanel:!0,allDayExpanded:!1,onCellClick:null,crossScrollingEnabled:!1,dataCellTemplate:null,timeCellTemplate:null,resourceCellTemplate:null,dateCellTemplate:null,allowMultipleCellSelection:!0,indicatorTime:new Date,indicatorUpdateInterval:5*ag("minute"),shadeUntilCurrentTime:!0,groupOrientation:"horizontal",selectedCellData:[],groupByDate:!1,scrolling:{mode:"standard"},allDayPanelMode:"all",renovateRender:!0,height:void 0,draggingMode:"outlook",onScrollEnd:()=>{},getHeaderHeight:void 0,onRenderAppointments:()=>{},onShowAllDayPanel:()=>{},onSelectedCellsClick:()=>{},timeZoneCalculator:void 0,schedulerHeight:void 0,schedulerWidth:void 0})}_optionChanged(e){switch(e.name){case"startDayHour":case"endDayHour":case"viewOffset":case"dateCellTemplate":case"resourceCellTemplate":case"dataCellTemplate":case"timeCellTemplate":case"hoursInterval":case"firstDayOfWeek":case"currentDate":case"startDate":this._cleanWorkSpace();break;case"groups":this._cleanView(),this._removeAllDayElements(),this._initGrouping(),this.repaint();break;case"groupOrientation":this._initGroupedStrategy(),this._createAllDayPanelElements(),this._removeAllDayElements(),this._cleanWorkSpace(),this._toggleGroupByDateClass();break;case"showAllDayPanel":this._isVerticalGroupedWorkSpace()?(this._cleanView(),this._removeAllDayElements(),this._initGrouping(),this.repaint()):this.isRenovatedRender()?this.renderWorkSpace():(this._updateAllDayVisibility(),this._updateScrollable());break;case"allDayExpanded":this._updateAllDayExpansion(),this._attachTablesEvents(),this._updateScrollable();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"onCellClick":this._createCellClickAction();break;case"onCellContextMenu":this._attachContextMenuEvent();break;case"intervalCount":this._cleanWorkSpace(),this._toggleWorkSpaceCountClass();break;case"groupByDate":this._cleanWorkSpace(),this._toggleGroupByDateClass();break;case"crossScrollingEnabled":this._toggleHorizontalScrollClass(),this._dateTableScrollable.option(this._dateTableScrollableConfig());break;case"allDayPanelMode":this.updateShowAllDayPanel(),this.updateAppointments();break;case"width":super._optionChanged(e),this._dimensionChanged();break;case"timeZoneCalculator":case"allowMultipleCellSelection":case"selectedCellData":break;case"renovateRender":case"scrolling":this.repaint();break;case"schedulerHeight":case"schedulerWidth":this.virtualScrollingDispatcher.updateDimensions(!0);break;default:super._optionChanged(e)}}updateShowAllDayPanel(){const e="hidden"===this.option("allDayPanelMode");this.option("onShowAllDayPanel")(!e)}_getVirtualScrollingDispatcherOptions(){return{getCellHeight:this.getCellHeight.bind(this),getCellWidth:this.getCellWidth.bind(this),getCellMinWidth:this.getCellMinWidth.bind(this),isRTL:this._isRTL.bind(this),getSchedulerHeight:()=>this.option("schedulerHeight"),getSchedulerWidth:()=>this.option("schedulerWidth"),getViewHeight:()=>this.$element().height?this.$element().height():(0,xe.Oq)(this.$element()),getViewWidth:()=>this.$element().width?this.$element().width():(0,xe.RG)(this.$element()),getWindowHeight:()=>(0,E.zk)().innerHeight,getWindowWidth:()=>(0,E.zk)().innerWidth,getScrolling:()=>this.option("scrolling"),getScrollableOuterWidth:this.getScrollableOuterWidth.bind(this),getScrollable:this.getScrollable.bind(this),createAction:this._createAction.bind(this),updateRender:this.updateRender.bind(this),updateGrid:this.updateGrid.bind(this),getGroupCount:this._getGroupCount.bind(this),isVerticalGrouping:this._isVerticalGroupedWorkSpace.bind(this),getTotalRowCount:this._getTotalRowCount.bind(this),getTotalCellCount:this._getTotalCellCount.bind(this)}}_cleanWorkSpace(){this._cleanView(),this._toggleGroupedClass(),this._toggleWorkSpaceWithOddCells(),this.virtualScrollingDispatcher.updateDimensions(!0),this._renderView(),this.option("crossScrollingEnabled")&&this._setTableSizes(),this.cache.clear()}_init(){this._scrollSync={},this._viewDataProvider=null,this._cellsSelectionState=null,super._init(),this._initGrouping(),this._toggleHorizontalScrollClass(),this._toggleWorkSpaceCountClass(),this._toggleGroupByDateClass(),this._toggleWorkSpaceWithOddCells(),this.$element().addClass(rg).addClass(this._getElementClass())}_initPositionHelper(){this.positionHelper=new lc({key:this.option("key"),viewDataProvider:this.viewDataProvider,viewStartDayHour:this.option("startDayHour"),viewEndDayHour:this.option("endDayHour"),cellDuration:this.getCellDuration(),groupedStrategy:this._groupedStrategy,isGroupedByDate:this.isGroupedByDate(),rtlEnabled:this.option("rtlEnabled"),startViewDate:this.getStartViewDate(),isVerticalGrouping:this._isVerticalGroupedWorkSpace(),groupCount:this._getGroupCount(),isVirtualScrolling:this.isVirtualScrolling(),getDOMMetaDataCallback:this.getDOMElementsMetaData.bind(this)})}_initGrouping(){this._initGroupedStrategy(),this._toggleGroupingDirectionClass(),this._toggleGroupByDateClass()}isVerticalOrientation(){var e;const t=null!==(e=this.option("groups"))&&void 0!==e&&e.length?this.option("groupOrientation"):this._getDefaultGroupStrategy();return"vertical"===t}_initGroupedStrategy(){const e=this.isVerticalOrientation()?Om:Em;this._groupedStrategy=new e(this)}_getDefaultGroupStrategy(){return"horizontal"}_toggleHorizontalScrollClass(){this.$element().toggleClass(ug,this.option("crossScrollingEnabled"))}_toggleGroupByDateClass(){this.$element().toggleClass(cg,this.isGroupedByDate())}_toggleWorkSpaceCountClass(){this.$element().toggleClass(dg,this._isWorkSpaceWithCount())}_toggleWorkSpaceWithOddCells(){this.$element().toggleClass(hg,this._isWorkspaceWithOddCells())}_toggleGroupingDirectionClass(){this.$element().toggleClass(sg,this._isVerticalGroupedWorkSpace())}_getDateTableCellClass(e,t){const n=`${Ig} ${Sg} ${bg}`;return this._groupedStrategy.addAdditionalGroupCellClasses(n,t+1,e,t)}_getGroupHeaderClass(e){const t=Eg;return this._groupedStrategy.addAdditionalGroupCellClasses(t,e+1)}_initWorkSpaceUnits(){this._$headerPanelContainer=(0,D.A)("<div>").addClass("dx-scheduler-header-panel-container"),this._$headerTablesContainer=(0,D.A)("<div>").addClass("dx-scheduler-header-tables-container"),this._$headerPanel=(0,D.A)("<table>").attr("aria-hidden",!0),this._$thead=(0,D.A)("<thead>").appendTo(this._$headerPanel),this._$headerPanelEmptyCell=(0,D.A)("<div>").addClass("dx-scheduler-header-panel-empty-cell"),this._$allDayTable=(0,D.A)("<table>").attr("aria-hidden",!0),this._$fixedContainer=(0,D.A)("<div>").addClass(Vt),this._$allDayContainer=(0,D.A)("<div>").addClass(Dg),this._$dateTableScrollableContent=(0,D.A)("<div>").addClass("dx-scheduler-date-table-scrollable-content"),this._$sidebarScrollableContent=(0,D.A)("<div>").addClass("dx-scheduler-side-bar-scrollable-content"),this._initAllDayPanelElements(),this.isRenovatedRender()?this.createRAllDayPanelElements():this._createAllDayPanelElements(),this._$timePanel=(0,D.A)("<table>").addClass(Xt).attr("aria-hidden",!0),this._$dateTable=(0,D.A)("<table>").attr("aria-hidden",!0),this._$dateTableContainer=(0,D.A)("<div>").addClass("dx-scheduler-date-table-container"),this._$groupTable=(0,D.A)("<div>").addClass(lg)}_initAllDayPanelElements(){this._allDayTitles=[],this._allDayTables=[],this._allDayPanels=[]}_initDateTableScrollable(){const e=(0,D.A)("<div>").addClass("dx-scheduler-date-table-scrollable");this._dateTableScrollable=this._createComponent(e,nm.A,this._dateTableScrollableConfig()),this._scrollSync.dateTable=Vh(()=>this._dateTableScrollable)}_createWorkSpaceElements(){this.option("crossScrollingEnabled")?this._createWorkSpaceScrollableElements():this._createWorkSpaceStaticElements()}_createWorkSpaceStaticElements(){var e;(this._$dateTableContainer.append(this._$dateTable),this._isVerticalGroupedWorkSpace())?(this._$dateTableContainer.append(this._$allDayContainer),this._$dateTableScrollableContent.append(this._$groupTable,this._$timePanel,this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$headerTablesContainer.append(this._$headerPanel)):(this._$dateTableScrollableContent.append(this._$timePanel,this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$headerTablesContainer.append(this._$headerPanel,this._$allDayPanel),null===(e=this._$allDayPanel)||void 0===e||e.append(this._$allDayContainer,this._$allDayTable));this._appendHeaderPanelEmptyCellIfNecessary(),this._$headerPanelContainer.append(this._$headerTablesContainer),this.$element().append(this._$fixedContainer).append(this._$headerPanelContainer).append(this._dateTableScrollable.$element())}_createWorkSpaceScrollableElements(){var e;(this.$element().append(this._$fixedContainer),this._$flexContainer=(0,D.A)("<div>").addClass("dx-scheduler-work-space-flex-container"),this._createHeaderScrollable(),this._headerScrollable.$content().append(this._$headerPanel),this._appendHeaderPanelEmptyCellIfNecessary(),this._$headerPanelContainer.append(this._$headerTablesContainer),this.$element().append(this._$headerPanelContainer),this.$element().append(this._$flexContainer),this._createSidebarScrollable(),this._$flexContainer.append(this._dateTableScrollable.$element()),this._$dateTableContainer.append(this._$dateTable),this._$dateTableScrollableContent.append(this._$dateTableContainer),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._isVerticalGroupedWorkSpace())?(this._$dateTableContainer.append(this._$allDayContainer),this._$sidebarScrollableContent.append(this._$groupTable,this._$timePanel)):(this._headerScrollable.$content().append(this._$allDayPanel),null===(e=this._$allDayPanel)||void 0===e||e.append(this._$allDayContainer,this._$allDayTable),this._$sidebarScrollableContent.append(this._$timePanel));this._sidebarScrollable.$content().append(this._$sidebarScrollableContent)}_appendHeaderPanelEmptyCellIfNecessary(){this._isRenderHeaderPanelEmptyCell()&&this._$headerPanelContainer.append(this._$headerPanelEmptyCell)}_createHeaderScrollable(){const e=(0,D.A)("<div>").addClass("dx-scheduler-header-scrollable").appendTo(this._$headerTablesContainer);this._headerScrollable=this._createComponent(e,nm.A,this._headerScrollableConfig()),this._scrollSync.header=Vh(()=>this._headerScrollable)}_createSidebarScrollable(){const e=(0,D.A)("<div>").addClass("dx-scheduler-sidebar-scrollable").appendTo(this._$flexContainer);this._sidebarScrollable=this._createComponent(e,nm.A,{useKeyboard:!1,showScrollbar:"never",direction:"vertical",useNative:!1,updateManually:!0,bounceEnabled:!1,onScroll:e=>{this._scrollSync.dateTable({top:e.scrollOffset.top})}}),this._scrollSync.sidebar=Vh(()=>this._sidebarScrollable)}_attachTableClasses(){if(this._addTableClass(this._$dateTable,qt),this._isVerticalGroupedWorkSpace()){const e=this._getGroupCount();for(let t=0;t<e;t++)this._addTableClass(this._allDayTables[t],fg)}else this.isRenovatedRender()||this._addTableClass(this._$allDayTable,fg)}_attachHeaderTableClasses(){this._addTableClass(this._$headerPanel,Tg)}_addTableClass(e,t){e&&!e.hasClass(t)&&e.addClass(t)}_initMarkup(){this.cache.clear(),this._initWorkSpaceUnits(),this._initVirtualScrolling(),this._initDateTableScrollable(),this._createWorkSpaceElements(),super._initMarkup(),this.option("crossScrollingEnabled")||(this._attachTableClasses(),this._attachHeaderTableClasses()),this._toggleGroupedClass(),this._renderView(),this._attachEvents()}_render(){super._render(),this._renderDateTimeIndication(),this._setIndicationUpdateInterval()}_toggleGroupedClass(){this.$element().toggleClass(og,this._getGroupCount()>0)}_renderView(){this.isRenovatedRender()?this._isVerticalGroupedWorkSpace()&&this.renderRGroupPanel():this._applyCellTemplates(this._renderGroupHeader()),this.renderWorkSpace(),this.isRenovatedRender()&&this.virtualScrollingDispatcher.updateDimensions(),this._updateGroupTableHeight(),this.updateHeaderEmptyCellWidth(),this._shader=new fm(this)}updateCellsSelection(){const e=this.generateRenderOptions();this.viewDataProvider.updateViewData(e),this.renderRWorkSpace({timePanel:!0,dateTable:!0,allDayPanel:!0})}_renderDateTimeIndication(){return(0,v.lQ)()}renderCurrentDateTimeLineAndShader(){return(0,v.lQ)()}renderCurrentDateTimeIndication(){return(0,v.lQ)()}_setIndicationUpdateInterval(){return(0,v.lQ)()}_detachGroupCountClass(){nn.forEach(e=>{this.$element().removeClass(e)})}_attachGroupCountClass(){const e=this._groupedStrategy.getGroupCountClass(this.option("groups"));this.$element().addClass(e)}_getDateHeaderTemplate(){return this.option("dateCellTemplate")}_updateAllDayVisibility(){this.$element().toggleClass(vg,this._isShowAllDayPanel()),this._updateAllDayExpansion()}_updateAllDayExpansion(){const e=!this.option("allDayExpanded")&&this._isShowAllDayPanel();this.cache.clear(),this.$element().toggleClass(wg,e)}_getDateTables(){return this._$dateTable.add(this._$allDayTable)}_getDateTable(){return this._$dateTable}_removeAllDayElements(){var e,t;null===(e=this._$allDayTable)||void 0===e||e.remove(),null===(t=this._$allDayTitle)||void 0===t||t.remove()}_cleanView(){var e,t,n;(this.cache.clear(),this._cleanTableWidths(),this.cellsSelectionState.clearSelectedAndFocusedCells(),this.isRenovatedRender())||(this._$thead.empty(),this._$dateTable.empty(),this._$timePanel.empty(),this._$groupTable.empty(),null===(t=this._$allDayTable)||void 0===t||t.empty(),null===(n=this._$sidebarTable)||void 0===n||n.empty());null===(e=this._shader)||void 0===e||e.clean(),delete this._interval}_clean(){Ae.A.off(wt.A.getDocument(),Wg),this._disposeRenovatedComponents(),super._clean()}_cleanTableWidths(){var e;this._$headerPanel.css("width",""),this._$dateTable.css("width",""),null===(e=this._$allDayTable)||void 0===e||e.css("width","")}_disposeRenovatedComponents(){var e,t,n,i,a;null===(e=this.renovatedAllDayPanel)||void 0===e||e.dispose(),this.renovatedAllDayPanel=void 0,null===(t=this.renovatedDateTable)||void 0===t||t.dispose(),this.renovatedDateTable=void 0,null===(n=this.renovatedTimePanel)||void 0===n||n.dispose(),this.renovatedTimePanel=void 0,null===(i=this.renovatedGroupPanel)||void 0===i||i.dispose(),this.renovatedGroupPanel=void 0,null===(a=this.renovatedHeaderPanel)||void 0===a||a.dispose(),this.renovatedHeaderPanel=void 0}getGroupedStrategy(){return this._groupedStrategy}getFixedContainer(){return this._$fixedContainer}getAllDayContainer(){return this._$allDayContainer}updateRender(){this.renderer.updateRender()}updateGrid(){this.renderer._renderGrid()}updateAppointments(){var e;this.option("onRenderAppointments")(),null===(e=this.dragBehavior)||void 0===e||e.updateDragSource()}_createAllDayPanelElements(){const e=this._getGroupCount();if(this._isVerticalGroupedWorkSpace()&&0!==e)for(let t=0;t<e;t++){const e=(0,D.A)("<div>").addClass(yg).text(p.A.format("dxScheduler-allDay"));this._allDayTitles.push(e),this._$allDayTable=(0,D.A)("<table>").attr("aria-hidden",!0),this._allDayTables.push(this._$allDayTable),this._$allDayPanel=(0,D.A)("<div>").addClass(gg).append(this._$allDayTable),this._allDayPanels.push(this._$allDayPanel)}else this._$allDayTitle=(0,D.A)("<div>").addClass(yg).text(p.A.format("dxScheduler-allDay")).appendTo(this.$element()),this._$allDayTable=(0,D.A)("<table>").attr("aria-hidden",!0),this._$allDayPanel=(0,D.A)("<div>").addClass(gg).append(this._$allDayTable)}renderWorkSpace(){let{generateNewData:e,renderComponents:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lg;this.cache.clear(),this.viewDataProvider.update(this.generateRenderOptions(),e),this.isRenovatedRender()?this.renderRWorkSpace(t):(this._renderDateHeader(),this._renderTimePanel(),this._renderGroupAllDayPanel(),this._renderDateTable(),this._renderAllDayPanel()),this._initPositionHelper()}_renderGroupHeader(){const e=this._getGroupHeaderContainer(),t=this._getGroupCount();let n=[];if(t){const t=this._makeGroupRows(this.option("groups"),this.option("groupByDate"));this._attachGroupCountClass(),e.append(t.elements),n=t.cellTemplates}else this._detachGroupCountClass();return n}_applyCellTemplates(e){null===e||void 0===e||e.forEach(e=>{e()})}_makeGroupRows(e,t){const n=this._isVerticalGroupedWorkSpace()?ng.VERTICAL:ng.HORIZONTAL;return ng.makeGroupedTable(n,e,{groupHeaderRowClass:Qt,groupRowClass:Qt,groupHeaderClass:this._getGroupHeaderClass.bind(this),groupHeaderContentClass:Jt},this._getCellCount()||1,this.option("resourceCellTemplate"),this._getGroupCount(),t)}_renderDateHeader(){const e=this._getDateHeaderContainer(),t=(0,D.A)("<tr>").addClass(kg),n=this._getCellCount(),i=this._getDateHeaderTemplate(),a=this._getCalculateHeaderCellRepeatCount(),r=[],o=this.isGroupedByDate();if(o){const s=o?this._getGroupCount():1;for(let e=0;e<n;e++){const n=e*a,o=this._renderDateHeaderTemplate(t,e,n,i,r);o.attr("colSpan",s)}e.prepend(t)}else{for(let e=0;e<a;e++)for(let a=0;a<n;a++){const o=e*n+a;this._renderDateHeaderTemplate(t,a,o,i,r)}e.append(t)}return this._applyCellTemplates(r),t}_renderDateHeaderTemplate(e,t,n,i,a){const r=this.isGroupedByDate()?Math.floor(n/this._getGroupCount()):n,{completeDateHeaderMap:o}=this.viewDataProvider,{text:s,startDate:l}=o[o.length-1][r],u=(0,D.A)("<th>").addClass(this._getHeaderPanelCellClass(t)).attr("title",s);return null!==i&&void 0!==i&&i.render?a.push(i.render.bind(i,{model:(0,d.A)({text:s,date:l},this._getGroupsForDateHeaderTemplate(n)),index:n,container:(0,f.cc)(u)})):u.text(s),e.append(u),u}_getGroupsForDateHeaderTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()){const n=this._getGroupIndex(0,e*t),i=Ka(this.resourceManager.groupsLeafs,n);return{groups:i,groupIndex:n}}return{}}_getHeaderPanelCellClass(e){const t=`${xg} ${Sg}`;return this._groupedStrategy.addAdditionalGroupCellClasses(t,e+1,void 0,void 0,this.isGroupedByDate())}_renderAllDayPanel(e){let t=this._getCellCount();this._isVerticalGroupedWorkSpace()||(t*=this._getGroupCount()||1);const n=this._renderTableBody({container:this._allDayPanels.length?(0,f.cc)(this._allDayTables[e]):(0,f.cc)(this._$allDayTable),rowCount:1,cellCount:t,cellClass:this._getAllDayPanelCellClass.bind(this),rowClass:Cg,cellTemplate:this.option("dataCellTemplate"),getCellData:this._oldRender_getAllDayCellData(e),groupIndex:e},!0);this._updateAllDayVisibility(),this._updateScrollable(),this._applyCellTemplates(n)}_renderGroupAllDayPanel(){if(this._isVerticalGroupedWorkSpace()){const e=this._getGroupCount();for(let t=0;t<e;t++)this._renderAllDayPanel(t)}}_getAllDayPanelCellClass(e,t){const n=`${_g} ${Sg}`;return this._groupedStrategy.addAdditionalGroupCellClasses(n,t+1)}_renderTimePanel(){const e=this._groupedStrategy.calculateTimeCellRepeatCount(),t=(e,t)=>{let n=0;this.isAllDayPanelVisible&&(n=1),this.isGroupedAllDayPanel()&&(n=Math.ceil((e+1)/this._getRowCount()));const i=e+n;return this.viewDataProvider.completeTimePanelMap[i][t]};this._renderTableBody({container:(0,f.cc)(this._$timePanel),rowCount:this._getTimePanelRowCount()*e,cellCount:1,cellClass:this._getTimeCellClass.bind(this),rowClass:mg,cellTemplate:this.option("timeCellTemplate"),getCellText:e=>t(e,"text"),getCellDate:e=>t(e,"startDate"),groupCount:this._getGroupCount(),allDayElements:this._insertAllDayRowsIntoDateTable()?this._allDayTitles:void 0,getTemplateData:(e=>{if(!this._isVerticalGroupedWorkSpace())return{};const t=this._getGroupIndex(e,0),n=Ka(this.resourceManager.groupsLeafs,t);return{groupIndex:t,groups:n}}).bind(this)})}_getTimeCellClass(e){const t=`${pg} ${bg}`;return this._isVerticalGroupedWorkSpace()?this._groupedStrategy.addAdditionalGroupCellClasses(t,e,e):t}_renderDateTable(){const e=this._getGroupCount();this._renderTableBody({container:(0,f.cc)(this._$dateTable),rowCount:this._getTotalRowCount(e),cellCount:this._getTotalCellCount(e),cellClass:this._getDateTableCellClass.bind(this),rowClass:Kt,cellTemplate:this.option("dataCellTemplate"),getCellData:(e,t,n)=>{const i=this.isGroupedAllDayPanel();let a=t;if(i){const e=this._getRowCount(),n=Math.ceil(t/e);a+=n}const{cellData:r}=this.viewDataProvider.viewDataMap.dateTableMap[a][n];return{value:this._normalizeCellData(r),fullValue:r,key:Bg}},allDayElements:this._insertAllDayRowsIntoDateTable()?this._allDayPanels:void 0,groupCount:e,groupByDate:this.option("groupByDate")})}_insertAllDayRowsIntoDateTable(){return this._groupedStrategy.insertAllDayRowsIntoDateTable()}_renderTableBody(e,t){let n=[];return t?n=ng.makeTable(e):this._applyCellTemplates(ng.makeTable(e)),n}}const Zg=(e,t,n,i,a,r,o,s,l,u,c)=>{const h={dragElement:void 0,itemData:void 0},p=()=>{const{itemData:e}=h;if(e){const t=(0,w.Hz)("disabled");return t(e)}return!0},m=c.isSetCursorOffset?()=>{const e=(0,D.A)(h.dragElement);return{x:(0,xe.RG)(e)/2,y:(0,xe.Oq)(e)/2}}:void 0;return{container:e,dragTemplate:()=>h.dragElement,onDragStart:e=>{n||r();const t=e.cancel,{event:a}=e,o=(0,D.A)(e.itemElement),s=e.component._appointments;h.itemData=c.getItemData(e.itemElement,s);const l=c.getItemSettings(o,e),{initialPosition:u}=c;p()||(a.data=a.data||{},t||(l.isCompact||i.updateDragSource(h.itemData,l),h.dragElement=((e,t,n)=>{const i=n.option("items").length,a=n._renderItem(i,(0,d.A)({itemData:e},t,{isCompact:!1,virtual:!1,sortedIndex:-1}));return a})(h.itemData,l,s),a.data.itemElement=h.dragElement,a.data.initialPosition=u??(0,Ct.x5)((0,D.A)(h.dragElement)),a.data.itemData=h.itemData,a.data.itemSettings=l,i.onDragStart(a.data),(0,Ct.fw)((0,D.A)(h.dragElement))))},onDragMove:()=>{if(n)return;const e=(()=>{const e=(0,xe.RG)(h.dragElement),t=u(),n=e>t,i=e<=10,a=(0,D.A)(h.dragElement).parent().get(0),r=(0,x.N)(a),o=r.left,s=r.top;return n?wt.A.elementsFromPoint(o+10,s+10,a):i?wt.A.elementsFromPoint(o,s,a):wt.A.elementsFromPoint(o+e/2,s+10,a)})(),i=Boolean(e.find(e=>e===t.get(0))),a=s(),r=e.find(e=>{const{classList:t}=e,n=1===a.find(e).length;return n&&(t.contains(Ig)||t.contains(_g))});r?(o().is(r)||l(),(0,D.A)(r).addClass(Mg)):i||l()},onDragEnd:e=>{var t;n||a(),p()||i.onDragEnd(e),null===(t=h.dragElement)||void 0===t||t.remove(),l()},onDragCancel:e=>{var t,i;n||a(),l(),null===(t=e.itemElement)||void 0===t||null===(i=t.removeClass)||void 0===i||i.call(t,Ft)},cursorOffset:m,filter:c.filter}};var Yg=Ug;const{tableCreator:jg}=kh,Xg="dx-scheduler-agenda",qg="dx-scheduler-agenda-date",Kg="dx-scheduler-group-table",Qg="dx-scheduler-time-panel-row",Jg="dx-scheduler-time-panel-cell",ef="dx-scheduler-agenda-nodata",tf="dx-scheduler-date-table-last-row";class nf extends Yg{_activeStateUnit(){return Th.Of}get type(){return Ns.AGENDA}get renderingStrategy(){return this.invoke("getLayoutManager").getRenderingStrategyInstance()}getStartViewDate(){return this._startViewDate}_init(){super._init()}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{agendaDuration:7,rowHeight:60,noDataText:""})}_optionChanged(e){const{name:t}=e,{value:n}=e;switch(t){case"agendaDuration":break;case"noDataText":case"rowHeight":this._recalculateAgenda(this._rows);break;case"groups":null!==n&&void 0!==n&&n.length?this._$groupTable||(this._initGroupTable(),this._dateTableScrollable.$content().prepend(this._$groupTable)):this._$groupTable&&(this._$groupTable.remove(),this._$groupTable=null,this._detachGroupCountClass()),super._optionChanged(e);break;default:super._optionChanged(e)}}_renderFocusState(){return(0,v.lQ)()}_renderFocusTarget(){return(0,v.lQ)()}_cleanFocusState(){return(0,v.lQ)()}supportAllDayRow(){return!1}_isVerticalGroupedWorkSpace(){return!1}_getElementClass(){return Xg}_calculateStartViewDate(){return cu.calculateStartViewDate(this.option("currentDate"),this.option("startDayHour"))}_getRowCount(){return this.option("agendaDuration")}_getCellCount(){return 1}_getTimePanelRowCount(){return this.option("agendaDuration")}_renderAllDayPanel(){return(0,v.lQ)()}_updateAllDayVisibility(){return(0,v.lQ)()}_updateAllDayHeight(){return(0,v.lQ)()}_initWorkSpaceUnits(){this._initGroupTable(),this._$timePanel=(0,D.A)("<table>").attr("aria-hidden",!0).addClass(Xt),this._$dateTable=(0,D.A)("<table>").attr("aria-hidden",!0).addClass(qt),this._$dateTableScrollableContent=(0,D.A)("<div>").addClass("dx-scheduler-date-table-scrollable-content"),this._$dateTableContainer=(0,D.A)("<div>").addClass("dx-scheduler-date-table-container")}_initGroupTable(){const e=this.option("groups");null!==e&&void 0!==e&&e.length&&(this._$groupTable=(0,D.A)("<table>").attr("aria-hidden",!0).addClass(Kg))}_renderView(){this._startViewDate=this._calculateStartViewDate(),this._rows=[],this._initPositionHelper()}_recalculateAgenda(e){let t=[];this._cleanView(),this._rowsIsEmpty(e)?this._renderNoData():(this._rows=e,this._$groupTable&&(t=this._renderGroupHeader(),this._setGroupHeaderCellsHeight()),this._renderTimePanel(),this._renderDateTable(),this.invoke("onAgendaReady",e),this._applyCellTemplates(t),this._dateTableScrollable.update())}_renderNoData(){this._$noDataContainer=(0,D.A)("<div>").addClass(ef).html(this.option("noDataText")),this._dateTableScrollable.$content().append(this._$noDataContainer)}_setTableSizes(){return(0,v.lQ)()}_toggleHorizontalScrollClass(){return(0,v.lQ)()}_createCrossScrollingConfig(e){return(0,v.lQ)()}_setGroupHeaderCellsHeight(){const e=this._getGroupHeaderCells().filter((e,t)=>!t.getAttribute("rowSpan")),t=this._removeEmptyRows(this._rows);if(t.length)for(let n=0;n<e.length;n++){const i=e.eq(n).find(".dx-scheduler-group-header-content");(0,xe.NG)(i,this._getGroupRowHeight(t[n]))}}_rowsIsEmpty(e){let t=!0;for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(i[e]){t=!1;break}}return t}_attachGroupCountClass(){const e=Xs(this.option("groups"));this.$element().addClass(e)}_removeEmptyRows(e){const t=[];for(let i=0;i<e.length;i++)e[i].length&&(n=e[i],n.some(e=>e>0))&&t.push(e[i]);var n;return t}_getGroupHeaderContainer(){return this._$groupTable}_makeGroupRows(){const e=this.option("getResourceManager")(),t=this.option("getFilteredItems")(),n=Oh(e.resourceById,e.groupsTree,t),i=this.option("resourceCellTemplate"),a=Jt,r=[],o=jg.makeGroupedTableFromJSON(n,{cellTag:"th",groupTableClass:Kg,groupRowClass:Qt,groupCellClass:this._getGroupHeaderClass(),groupCellCustomContent(t,n,o,s){const l=wt.A.createElement("div");l.className=a;const u=s.grouped[s.resourceIndex],d=e.resourceById[s.resourceIndex],c=null===d||void 0===d?void 0:d.data.find(e=>d.dataAccessor.get("id",e)===u),h=null===d||void 0===d?void 0:d.items.find(e=>e.id===u);if(null!==i&&void 0!==i&&i.render)r.push(i.render.bind(i,{model:{data:c,id:u,color:null===h||void 0===h?void 0:h.color,text:n.textContent},container:(0,f.cc)((0,D.A)(l)),index:o}));else{const e=wt.A.createElement("div");e.appendChild(n),l.appendChild(e)}t.appendChild(l)},cellTemplate:i});return{elements:(0,D.A)(o).find(`.${Qt}`),cellTemplates:r}}_cleanView(){this._$dateTable.empty(),this._$timePanel.empty(),this._$groupTable&&this._$groupTable.empty(),this._$noDataContainer&&(this._$noDataContainer.empty(),this._$noDataContainer.remove(),delete this._$noDataContainer)}_createWorkSpaceElements(){this._createWorkSpaceStaticElements()}_createWorkSpaceStaticElements(){this._$dateTableContainer.append(this._$dateTable),this._dateTableScrollable.$content().append(this._$dateTableScrollableContent),this._$groupTable&&this._$dateTableScrollableContent.prepend(this._$groupTable),this._$dateTableScrollableContent.append(this._$timePanel,this._$dateTableContainer),this.$element().append(this._dateTableScrollable.$element())}_renderDateTable(){this._renderTableBody({container:(0,f.cc)(this._$dateTable),rowClass:Kt,cellClass:this._getDateTableCellClass()})}_attachTablesEvents(){return(0,v.lQ)()}_attachEvents(){return(0,v.lQ)()}_cleanCellDataCache(){return(0,v.lQ)()}isIndicationAvailable(){return!1}_prepareCellTemplateOptions(e,t,n,i){const a=this.resourceManager.groupsLeafs[n],r=(null===a||void 0===a?void 0:a.grouped)??{},o=null===a||void 0===a?void 0:a.groupIndex;return{model:{text:e,date:t,groups:r,groupIndex:o},container:(0,f.cc)(i),index:n}}_renderTableBody(e,t){const n=[],i=e.cellTemplate;let a;this._$rows=[];const r=function(t,r){if(r){let s,l,u;const d=(0,D.A)("<tr>"),c=(0,D.A)("<td>");var o;if((0,xe.k$)(c,this._getRowHeight(r)),e.getStartDate)s=null===(o=e.getStartDate)||void 0===o?void 0:o.call(e,t),l=h.A.format(s,"d"),u=h.A.format(s,uu);if(null!==i&&void 0!==i&&i.render){const e=this._prepareCellTemplateOptions(`${l} ${u}`,s,a,c);n.push(i.render.bind(i,e))}else l&&u&&c.addClass(qg).text(`${l} ${u}`);e.rowClass&&d.addClass(e.rowClass),e.cellClass&&c.addClass(e.cellClass),d.append(c),this._$rows.push(d)}}.bind(this);for(a=0;a<this._rows.length;a++)(0,bt.__)(this._rows[a],r),this._setLastRowClass();(0,D.A)(e.container).append((0,D.A)("<tbody>").append(this._$rows)),this._applyCellTemplates(n)}_setLastRowClass(){if(this._rows.length>1&&this._$rows.length){const e=this._$rows[this._$rows.length-1];e.addClass(tf)}}_renderTimePanel(){this._renderTableBody({container:(0,f.cc)(this._$timePanel),rowCount:this._getTimePanelRowCount(),cellCount:1,rowClass:Qg,cellClass:Jg,cellTemplate:this.option("dateCellTemplate"),getStartDate:this._getTimePanelStartDate.bind(this)})}_getTimePanelStartDate(e){const t=new Date(this.option("currentDate")),n=new Date(t.setDate(t.getDate()+e));return n}_getRowHeight(e){const t=this.option("rowHeight"),n=5*(e-1);return e?t*e+n+20:0}_getGroupRowHeight(e){if(!e)return;let t=0;for(let n=0;n<e.length;n++)t+=this._getRowHeight(e[n]);return t}_calculateRows(e){return this.renderingStrategy.calculateRows(e,this.option("agendaDuration"),this.option("currentDate"))}onDataSourceChanged(e){super.onDataSourceChanged(),this._renderView();const t=this._calculateRows(e);this._recalculateAgenda(t)}getAgendaVerticalStepHeight(){return this.option("rowHeight")}getEndViewDate(){const e=new Date(this.option("currentDate")),t=this.option("agendaDuration");e.setHours(this.option("endDayHour"));const n=e.setDate(e.getDate()+t-1)-6e4;return new Date(n)}getEndViewDateByEndDayHour(){return this.getEndViewDate()}updateScrollPosition(e){const t=this.timeZoneCalculator.createDate(e,"toGrid"),n=this.getVisibleBounds(),i=t.getHours(),a=t.getMinutes();this.needUpdateScrollPosition(i,a,n,t)&&this.scrollToTime(i,a,t)}needUpdateScrollPosition(e,t,n,i){let a=!1;return(e<n.top.hours||e>n.bottom.hours)&&(a=!0),e===n.top.hours&&t<n.top.minutes&&(a=!0),e===n.bottom.hours&&t>n.top.minutes&&(a=!0),a}renovatedRenderSupported(){return!1}_setSelectedCellsByCellData(){}_getIntervalDuration(){return A.A.dateToMilliseconds("day")*this.option("intervalCount")}getDOMElementsMetaData(){return{dateTableCellsMeta:[[{}]],allDayPanelCellsMeta:[{}]}}}(0,m.A)("dxSchedulerAgenda",nf);var af=nf;class rf extends cm{renderShader(){const e=this._workSpace._isHorizontalGroupedWorkSpace()?this._workSpace._getGroupCount():1;for(let t=0;t<e;t+=1){const e=0===t,n=e?this._$shader:this.createShader();this._workSpace.isGroupedByDate()?this._customizeGroupedByDateShader(n,t):this._customizeShader(n,t),!e&&this._shader.push(n)}}_customizeShader(e,t){const n=this._workSpace.getIndicationWidth();if(this._applyShaderWidth(e,n),t>=1){const t=this._workSpace,n=t._getCellCount()*t.getCellWidth();e.css("left",n)}else e.css("left",0)}_applyShaderWidth(e,t){const n=(0,x.N)(this._$container.get(0)).width;t>n&&(t=n),t>0&&(0,xe.zj)(e,t)}_customizeGroupedByDateShader(e,t){const n=this._workSpace.getIndicationCellCount(),i=Math.floor(n),a=n-i,r=0===t,o=this._workSpace,s=r?o.getIndicationWidth():a*o.getCellWidth();let l;this._applyShaderWidth(e,s),l=r?o._getCellCount()*o.getCellWidth()*t:o.getCellWidth()*i*o._getGroupCount()+t*o.getCellWidth(),e.css("left",l)}}var of=rf;const sf=A.A.dateToMilliseconds,lf="dx-scheduler-time-panel-current-time-cell";class uf extends Yg{_getToday(){const e=this.option("viewOffset"),t=vl(this.option("indicatorTime"),this.timeZoneCalculator);return R.X.addOffsets(t,[-e])}isIndicationOnView(){if(this.option("showCurrentTimeIndicator")){const e=this._getToday(),t=A.A.trimTime(this.getEndViewDate());return A.A.dateInRange(e,this.getStartViewDate(),new Date(t.getTime()+sf("day")))}return!1}isIndicationAvailable(){if(!(0,E.Vd)())return!1;const e=this._getToday();return e>=A.A.trimTime(new Date(this.getStartViewDate()))}isIndicatorVisible(){const e=this._getToday(),t=new Date(this.getEndViewDate().getTime()+sf("minute")-1),n=new Date(this.getStartViewDate());return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),A.A.dateInRange(e,n,t)}_renderIndicator(e,t,n,i){const a=this.isGroupedByDate(),r=a?1:i;for(let o=0;o<r;o++){const r=this._createIndicator(n);(0,xe.zj)(r,a?this.getCellWidth()*i:this.getCellWidth()),this._groupedStrategy.shiftIndicator(r,e,t,o)}}_createIndicator(e){const t=(0,D.A)("<div>").addClass("dx-scheduler-date-time-indicator");return e.append(t),t}_getRtlOffset(e){return this.option("rtlEnabled")?(0,x.N)(this._dateTableScrollable.$content().get(0)).width-this.getTimePanelWidth()-e:0}_setIndicationUpdateInterval(){this.option("showCurrentTimeIndicator")&&0!==this.option("indicatorUpdateInterval")&&(this._clearIndicatorUpdateInterval(),this._indicatorInterval=setInterval(()=>{this.renderCurrentDateTimeIndication()},this.option("indicatorUpdateInterval")))}_clearIndicatorUpdateInterval(){this._indicatorInterval&&(clearInterval(this._indicatorInterval),delete this._indicatorInterval)}_isVerticalShader(){return!0}getIndicationWidth(e){const t=this.getCellWidth()*this._getCellCount();let n=this._getIndicatorDuration();n>this._getCellCount()&&(n=this._getCellCount());const i=n*this.getRoundedCellWidth(e,e*this._getCellCount(),n);return t<i?t:i}getIndicatorOffset(e){const t=this._getIndicatorDuration()-1,n=t*this.getRoundedCellWidth(e,e*this._getCellCount(),t);return n}_getIndicatorDuration(){const e=this._getToday(),t=new Date(this.getStartViewDate());let n=e.getTime()-t.getTime();return"workWeek"===this.option("type")&&(n-=this._getWeekendsCount(Math.round(n/sf("day")))*sf("day")),Math.ceil((n+1)/sf("day"))}getIndicationHeight(){const e=Oe.A.getDateWithoutTimezoneChange(this._getToday()),t=this.getCellHeight(),n=new Date(this.getStartViewDate());this.isIndicationOnView()&&n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());const i=e.getTime()-n.getTime(),a=i/this.getCellDuration();return a*t}_dispose(){this._clearIndicatorUpdateInterval(),super._dispose.apply(this,arguments)}renderCurrentDateTimeIndication(){this.renderCurrentDateTimeLineAndShader(),this.isRenovatedRender()&&this.renderWorkSpace({generateNewData:!0,renderComponents:{header:!0,timePanel:!0}})}renderCurrentDateTimeLineAndShader(){var e;this._cleanDateTimeIndicator(),null===(e=this._shader)||void 0===e||e.clean(),this._renderDateTimeIndication()}_isCurrentTimeHeaderCell(e){if(this.isIndicationOnView()){const{completeDateHeaderMap:t}=this.viewDataProvider,n=t[t.length-1][e].startDate;return A.A.sameDate(n,this._getToday())}return!1}_getHeaderPanelCellClass(e){const t=super._getHeaderPanelCellClass(e);return this._isCurrentTimeHeaderCell(e)?`${t} ${Yt}`:t}_cleanView(){super._cleanView(),this._cleanDateTimeIndicator()}_dimensionChanged(){super._dimensionChanged(),this.renderCurrentDateTimeLineAndShader()}_cleanDateTimeIndicator(){this.$element().find(".dx-scheduler-date-time-indicator").remove()}_cleanWorkSpace(){super._cleanWorkSpace(),this._renderDateTimeIndication(),this._setIndicationUpdateInterval()}_optionChanged(e){switch(e.name){case"showCurrentTimeIndicator":case"indicatorTime":this._cleanWorkSpace();break;case"indicatorUpdateInterval":this._setIndicationUpdateInterval();break;case"showAllDayPanel":case"allDayExpanded":case"crossScrollingEnabled":super._optionChanged(e),this.renderCurrentDateTimeIndication();break;case"shadeUntilCurrentTime":this.renderCurrentDateTimeIndication();break;default:super._optionChanged(e)}}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{showCurrentTimeIndicator:!0,indicatorTime:new Date,indicatorUpdateInterval:5*sf("minute"),shadeUntilCurrentTime:!0})}_getCurrentTimePanelCellIndices(){const e=this._getTimePanelRowCount(),t=this._getToday(),n=this.getCellIndexByDate(t),{rowIndex:i}=this._getCellCoordinatesByIndex(n);if(void 0===i)return[];let a;a=0===i?[i]:i%2===0?[i-1,i]:[i,i+1];const r=this._isVerticalGroupedWorkSpace()?this._getGroupCount():1;return[...new Array(r)].reduce((t,n,i)=>[...t,...a.map(t=>e*i+t)],[])}_renderDateTimeIndication(){if(!this.isIndicationAvailable())return;if(this.option("shadeUntilCurrentTime")&&this._shader.render(),!this.isIndicationOnView()||!this.isIndicatorVisible())return;const e=this._getGroupCount()||1,t=this._dateTableScrollable.$content(),n=this.getIndicationHeight(),i=this._getRtlOffset(this.getCellWidth());this._renderIndicator(n,i,t,e),this.isRenovatedRender()||this._setCurrentTimeCells()}_setCurrentTimeCells(){const e=this._getTimePanelCells(),t=this._getCurrentTimePanelCellIndices();t.forEach(t=>{e.eq(t).addClass(lf)})}_cleanCurrentTimeCells(){this.$element().find(`.${lf}`).removeClass(lf)}}(0,m.A)("dxSchedulerWorkSpace",uf);var df=uf;const{tableCreator:cf}=kh,hf="dx-scheduler-timeline",pf="dx-scheduler-group-table",mf="dx-scheduler-work-space-horizontal-grouped",gf="dx-scheduler-header-panel-cell",ff="dx-scheduler-header-panel-week-cell",Df="dx-scheduler-header-row",yf="horizontal",_f=A.A.dateToMilliseconds;class Cf extends df{constructor(){super(...arguments),this.viewDirection="horizontal"}get verticalGroupTableClass(){return pf}get renovatedHeaderPanelComponent(){return qp}getGroupTableWidth(){return this._$sidebarTable?(0,xe.Ot)(this._$sidebarTable):0}_getTotalRowCount(e){return this._isHorizontalGroupedWorkSpace()?this._getRowCount():(e=e||1,this._getRowCount()*e)}_getFormat(){return"shorttime"}_getWorkSpaceHeight(){return this.option("crossScrollingEnabled")&&(0,E.Vd)()?(0,x.N)(this._$dateTable.get(0)).height:(0,x.N)(this.$element().get(0)).height}_dateTableScrollableConfig(){const e=super._dateTableScrollableConfig(),t={direction:yf};return this.option("crossScrollingEnabled")?e:(0,T.X)(e,t)}_needCreateCrossScrolling(){return!0}_headerScrollableConfig(){const e=super._headerScrollableConfig();return(0,T.X)(e,{scrollByContent:!0})}supportAllDayRow(){return!1}_getGroupHeaderContainer(){return this._isHorizontalGroupedWorkSpace()?this._$thead:this._$sidebarTable}_insertAllDayRowsIntoDateTable(){return!1}_needRenderWeekHeader(){return!1}_incrementDate(e){e.setDate(e.getDate()+1)}getIndicationCellCount(){const e=this._getTimeDiff();return this._calculateDurationInCells(e)}_getTimeDiff(){let e=this._getToday();const t=this._getIndicationFirstViewDate(),n=this.getStartViewDate(),i=Oe.A.getDaylightOffsetInMs(n,e);return i&&(e=new Date(e.getTime()+i)),e.getTime()-t.getTime()}_calculateDurationInCells(e){const t=this._getToday(),n=Math.floor(e/_f("day"));let i=(e-n*_f("day")-this.option("startDayHour")*_f("hour"))/this.getCellDuration();return t.getHours()>this.option("endDayHour")&&(i=this._getCellCountInDay()),i<0&&(i=0),n*this._getCellCountInDay()+i}getIndicationWidth(){if(this.isGroupedByDate()){const e=this.getIndicationCellCount(),t=Math.floor(e),n=e-t;return this.getCellWidth()*(t*this._getGroupCount()+n)}return this.getIndicationCellCount()*this.getCellWidth()}_isVerticalShader(){return!1}_isCurrentTimeHeaderCell(){return!1}_setTableSizes(){super._setTableSizes();const e=this._getWorkSpaceMinHeight();(0,xe.k$)(this._$sidebarTable,e),(0,xe.k$)(this._$dateTable,e),this.virtualScrollingDispatcher.updateDimensions()}_getWorkSpaceMinHeight(){let e=this._getWorkSpaceHeight();const t=(0,xe.P$)(this._$flexContainer,!0);return e<t&&(e=t),e}_getCellCoordinatesByIndex(e){return{columnIndex:e%this._getCellCount(),rowIndex:0}}_getCellByCoordinates(e,t){const n=this._groupedStrategy.prepareCellIndexes(e,t);return this._$dateTable.find("tr").eq(n.rowIndex).find("td").eq(n.columnIndex)}_getWorkSpaceWidth(){return(0,xe.Ot)(this._$dateTable,!0)}_getIndicationFirstViewDate(){return A.A.trimTime(new Date(this.getStartViewDate()))}_getIntervalBetween(e,t){const n=this.option("startDayHour"),i=this.option("endDayHour"),a=this.getStartViewDate(),r=a.getTime(),o=(24-i+n)*_f("hour"),s=A.A.getTimezonesDifference(a,e),l=e.getTime(),u=l-r-s,d=Math.floor(u/_f("day")),c=u-d*_f("day");let h=0;const p=this._getCellCountInDay()*(d-this._getWeekendsCount(d)),m=l-A.A.trimTime(new Date(e)).getTime();let g=p*this.option("hoursInterval")*_f("hour");if(!t){const t=e.getHours();switch(!0){case t<n:h=c-o+m;break;case t>=n&&t<i:h=c;break;case t>=n&&t>=i:h=c-(m-i*_f("hour"));break;case!d:g=u}g+=h}return g}_getWeekendsCount(e){return 0}getAllDayContainer(){return null}getTimePanelWidth(){return 0}getIntervalDuration(e){return this.getCellDuration()}getCellMinWidth(){return 0}getWorkSpaceLeftOffset(){return 0}scrollToTime(e,t,n){const i=this._getScrollCoordinates(e,t,n),a=this.getScrollable(),r=this.option("rtlEnabled")?(0,x.N)(this.getScrollableContainer().get(0)).width:0;this.option("templatesRenderAsynchronously")?setTimeout(()=>{a.scrollBy({left:i.left-a.scrollLeft()-r,top:0})}):a.scrollBy({left:i.left-a.scrollLeft()-r,top:0})}renderRAllDayPanel(){}renderRTimeTable(){}_renderGroupAllDayPanel(){}generateRenderOptions(e){const t=super.generateRenderOptions(!0);return(0,d.A)({},t,{isGenerateWeekDaysHeaderData:this._needRenderWeekHeader(),getDateForHeaderText:fu.getDateForHeaderText})}_init(){super._init(),this.$element().addClass(hf),this._$sidebarTable=(0,D.A)("<div>").addClass(pf)}_getDefaultGroupStrategy(){return"vertical"}_toggleGroupingDirectionClass(){this.$element().toggleClass(mf,this._isHorizontalGroupedWorkSpace())}_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{groupOrientation:"vertical"})}_createWorkSpaceElements(){this._createWorkSpaceScrollableElements()}_updateAllDayVisibility(){return(0,v.lQ)()}_updateAllDayHeight(){return(0,v.lQ)()}_getDateHeaderTemplate(){return this.option("timeCellTemplate")}_renderView(){let e;this.isRenovatedRender()||(e=this._renderGroupHeader()),this.renderWorkSpace(),this.isRenovatedRender()&&this.virtualScrollingDispatcher.updateDimensions(),this._shader=new of(this),this._$sidebarTable.appendTo(this._sidebarScrollable.$content()),this.isRenovatedRender()&&this._isVerticalGroupedWorkSpace()&&this.renderRGroupPanel(),this.updateHeaderEmptyCellWidth(),this._applyCellTemplates(e)}_setHorizontalGroupHeaderCellsHeight(){return(0,v.lQ)()}_getTimePanelCells(){return this.$element().find(`.${gf}:not(.${ff})`)}_getCurrentTimePanelCellIndices(){const e=this._getCellCount(),t=this._getToday(),n=this.getCellIndexByDate(t),{columnIndex:i}=this._getCellCoordinatesByIndex(n);if(void 0===i)return[];const a=this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()?this._getGroupCount():1;return[...new Array(a)].map((t,n)=>e*n+i)}_renderTimePanel(){return(0,v.lQ)()}_renderAllDayPanel(){return(0,v.lQ)()}_createAllDayPanelElements(){return(0,v.lQ)()}_renderDateHeader(){const e=super._renderDateHeader();if(this._needRenderWeekHeader()){const t=new Date(this.getStartViewDate());let n=new Date(t);const i=[],a=this._getGroupCount(),r=this._getCellCountInDay(),o=this.isGroupedByDate()?r*a:r,s=this.option("dateCellTemplate"),l=this._isHorizontalGroupedWorkSpace()&&!this.isGroupedByDate()?a:1,u=this.viewDataProvider.viewDataGenerator.daysInInterval*this.option("intervalCount"),c=u*l;for(let e=0;e<c;e++){const a=(0,D.A)("<th>"),r=du(n);if(s){const t={model:(0,d.A)({text:r,date:new Date(n)},this._getGroupsForDateHeaderTemplate(e,o)),container:a,index:e};s.render(t)}else a.text(r);a.addClass(gf).addClass(ff).attr("colSpan",o),i.push(a),e%u===u-1?n=new Date(t):this._incrementDate(n)}const h=(0,D.A)("<tr>").addClass(Df).append(i);e.before(h)}}_renderIndicator(e,t,n,i){let a;const r=this.getIndicationWidth();if("vertical"===this.option("groupOrientation"))a=this._createIndicator(n),(0,xe.k$)(a,(0,x.N)(n.get(0)).height),a.css("left",t?t-r:r);else for(let o=0;o<i;o++){const e=this.isGroupedByDate()?o*this.getCellWidth():this._getCellCount()*this.getCellWidth()*o;a=this._createIndicator(n),(0,xe.k$)(a,(0,x.N)(n.get(0)).height),a.css("left",t?t-r-e:r+e)}}_makeGroupRows(e,t){const n="vertical"===this.option("groupOrientation")?cf.VERTICAL:cf.HORIZONTAL;return cf.makeGroupedTable(n,e,{groupRowClass:Qt,groupHeaderRowClass:Qt,groupHeaderClass:this._getGroupHeaderClass.bind(this),groupHeaderContentClass:Jt},this._getCellCount()||1,this.option("resourceCellTemplate"),this._getTotalRowCount(this._getGroupCount()),t)}_setCurrentTimeCells(){const e=this._getTimePanelCells(),t=this._getCurrentTimePanelCellIndices();t.forEach(t=>{e.eq(t).addClass(Yt)})}_cleanCurrentTimeCells(){this.$element().find(`.${Yt}`).removeClass(Yt)}}(0,m.A)("dxSchedulerTimeline",Cf);var vf=Cf;const wf="dx-scheduler-timeline-day";class Af extends vf{get type(){return Ns.TIMELINE_DAY}_getElementClass(){return wf}_needRenderWeekHeader(){return this._isWorkSpaceWithCount()}}(0,m.A)("dxSchedulerTimelineDay",Af);var Sf=Af;const bf="dx-scheduler-timeline-month";class Tf extends vf{constructor(){super(...arguments),this.viewDirection="horizontal"}get type(){return Ns.TIMELINE_MONTH}get renovatedHeaderPanelComponent(){return Zp}_renderView(){super._renderView(),this._updateScrollable()}_getElementClass(){return bf}_getDateHeaderTemplate(){return this.option("dateCellTemplate")}_calculateDurationInCells(e){return e/this.getCellDuration()}isIndicatorVisible(){return!0}_getFormat(){return du}_getIntervalBetween(e){const t=this.getStartViewDate(),n=A.A.getTimezonesDifference(t,e);return e.getTime()-(t.getTime()-36e5*this.option("startDayHour"))-n}_getViewStartByOptions(){return gu.getViewStartByOptions(this.option("startDate"),this.option("currentDate"),this.option("intervalCount"),A.A.getFirstMonthDate(this.option("startDate")))}generateRenderOptions(){const e=super.generateRenderOptions(!0);return(0,d.A)({},e,{getDateForHeaderText:(e,t)=>t})}keepOriginalHours(){return!0}}(0,m.A)("dxSchedulerTimelineMonth",Tf);var xf=Tf;const kf="dx-scheduler-timeline-week";class Ef extends vf{get type(){return Ns.TIMELINE_WEEK}_getElementClass(){return kf}_getHeaderPanelCellWidth(e){return(0,x.N)(e.children().first().get(0)).width}_needRenderWeekHeader(){return!0}_incrementDate(e){e.setDate(e.getDate()+1)}}(0,m.A)("dxSchedulerTimelineWeek",Ef);const If="dx-scheduler-timeline-work-week";class Of extends Ef{get type(){return Ns.TIMELINE_WORK_WEEK}constructor(){super(...arguments),this._getWeekendsCount=xl}_getElementClass(){return If}_incrementDate(e){const t=e.getDay();5===t&&e.setDate(e.getDate()+2),super._incrementDate(e)}}(0,m.A)("dxSchedulerTimelineWorkWeek",Of);var Mf=Of;class Rf extends df{_getFormat(){return du}generateRenderOptions(){const e=super.generateRenderOptions();return(0,d.A)({},e,{isGenerateTimePanelData:!0})}_isRenderHeaderPanelEmptyCell(){return!0}}var Vf=Rf;const Pf="dx-scheduler-work-space-day";class Hf extends Vf{get type(){return Ns.DAY}_getElementClass(){return Pf}_renderDateHeader(){return 1===this.option("intervalCount")?null:super._renderDateHeader()}renderRHeaderPanel(){1===this.option("intervalCount")?super.renderRHeaderPanel(!1):super.renderRHeaderPanel(!0)}}(0,m.A)("dxSchedulerWorkSpaceDay",Hf);var Wf=Hf;const $f="dx-scheduler-work-space-month",Bf="dx-scheduler-date-table-current-date",Gf="dx-scheduler-date-table-cell-text",Nf="dx-scheduler-date-table-first-of-month",Ff="dx-scheduler-date-table-other-month",zf=A.A.dateToMilliseconds;class Lf extends df{get type(){return Ns.MONTH}_getElementClass(){return $f}_getFormat(){return uu}_getIntervalBetween(e){const t=this.getStartViewDate(),n=A.A.getTimezonesDifference(t,e);return e.getTime()-(t.getTime()-36e5*this.option("startDayHour"))-n}_getDateGenerationOptions(){return(0,d.A)({},super._getDateGenerationOptions(),{cellCountInDay:1})}getCellWidth(){return this.cache.memo("cellWidth",()=>{let e=0;const t=this._getCells().slice(0,7);return t.each((t,n)=>{e+=(0,E.Vd)()?(0,x.N)(n).width:0}),0===t.length?void 0:e/7})}_insertAllDayRowsIntoDateTable(){return!1}_getCellCoordinatesByIndex(e){const t=Math.floor(e/this._getCellCount()),n=e-this._getCellCount()*t;return{rowIndex:t,columnIndex:n}}_needCreateCrossScrolling(){return this.option("crossScrollingEnabled")||this._isVerticalGroupedWorkSpace()}_getViewStartByOptions(){return gu.getViewStartByOptions(this.option("startDate"),this.option("currentDate"),this.option("intervalCount"),A.A.getFirstMonthDate(this.option("startDate")))}_updateIndex(e){return e}isIndicationAvailable(){return!1}getIntervalDuration(){return zf("day")}getTimePanelWidth(){return 0}supportAllDayRow(){return!1}keepOriginalHours(){return!0}getWorkSpaceLeftOffset(){return 0}needApplyCollectorOffset(){return!0}_getHeaderDate(){return this._getViewStartByOptions()}scrollToTime(){return(0,v.lQ)()}renderRAllDayPanel(){}renderRTimeTable(){}renderRDateTable(){Gs.renovation.renderComponent(this,this._$dateTable,Ap,"renovatedDateTable",this._getRDateTableProps())}_createWorkSpaceElements(){this._isVerticalGroupedWorkSpace()?this._createWorkSpaceScrollableElements():super._createWorkSpaceElements()}_updateAllDayVisibility(){return(0,v.lQ)()}_updateAllDayHeight(){return(0,v.lQ)()}_renderTimePanel(){return(0,v.lQ)()}_renderAllDayPanel(){return(0,v.lQ)()}_setMonthClassesToCell(e,t){e.toggleClass(Bf,t.isCurrentDate).toggleClass(Nf,t.isFirstDayMonthHighlighting).toggleClass(Ff,t.otherMonth)}_createAllDayPanelElements(){}_renderTableBody(e){e.getCellText=(e,t)=>{const n=this.viewDataProvider.completeViewDataMap[e][t].startDate;return gu.getCellText(n,this.option("intervalCount"))},e.getCellTextClass=Gf,e.setAdditionalClasses=this._setMonthClassesToCell.bind(this),super._renderTableBody(e)}}(0,m.A)("dxSchedulerWorkSpaceMonth",Lf);var Uf=Lf;const Zf="dx-scheduler-work-space-week";class Yf extends Vf{get type(){return Ns.WEEK}_getElementClass(){return Zf}_calculateViewStartDate(){return pu.calculateViewStartDate(this.option("startDate"),this._firstDayOfWeek())}}(0,m.A)("dxSchedulerWorkSpaceWeek",Yf);var jf=Yf;const Xf="dx-scheduler-work-space-work-week";class qf extends jf{get type(){return Ns.WORK_WEEK}constructor(){super(...arguments),this._getWeekendsCount=xl}_getElementClass(){return Xf}}(0,m.A)("dxSchedulerWorkSpaceWorkWeek",qf);var Kf=qf;const Qf=A.A.dateToMilliseconds,Jf="dx-scheduler",eD=`${Jf}-small`,tD=`${Jf}-adaptive`,nD=`${Jf}-readonly`,iD="yyyyMMddTHHmmss",aD=`${iD}Z`,rD={day:{workSpace:Wf,renderingStrategy:"vertical"},week:{workSpace:jf,renderingStrategy:"vertical"},workWeek:{workSpace:Kf,renderingStrategy:"vertical"},month:{workSpace:Uf,renderingStrategy:"horizontalMonth"},timelineDay:{workSpace:Sf,renderingStrategy:"horizontal"},timelineWeek:{workSpace:Ef,renderingStrategy:"horizontal"},timelineWorkWeek:{workSpace:Mf,renderingStrategy:"horizontal"},timelineMonth:{workSpace:xf,renderingStrategy:"horizontalMonthLine"},agenda:{workSpace:af,renderingStrategy:"agenda"}},oD={ADDING:"onAppointmentAdding",ADDED:"onAppointmentAdded",DELETING:"onAppointmentDeleting",DELETED:"onAppointmentDeleted",UPDATING:"onAppointmentUpdating",UPDATED:"onAppointmentUpdated"},sD={SERIES:"editSeries",OCCURRENCE:"editOccurrence",CANCEL:"cancel"};class lD extends ud{constructor(){super(...arguments),this._updatingAppointments=new Set}get timeZoneCalculator(){return this._timeZoneCalculator||(this._timeZoneCalculator=bu(this.option("timeZone"))),this._timeZoneCalculator}_postponeDataSourceLoading(e){this.postponedOperations.add("_reloadDataSource",this._reloadDataSource.bind(this),e)}_postponeResourceLoading(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.postponedOperations.add("loadResources",()=>{const t=this.getViewOption("groups");return(0,b.Sx)(this.resourceManager.loadGroupResources(t,e))}),n=new b.cY;return t.done(()=>{n.resolve()}),this._postponeDataSourceLoading(t),n.promise()}_optionChanged(e){var t;this.schedulerOptionChanged(e);const{value:n,name:i}=e;switch(e.name){case"customizeDateNavigatorText":this._updateOption("header",i,n);break;case"firstDayOfWeek":this._updateOption("workSpace",i,n),this._updateOption("header",i,n);break;case"currentDate":{const e=this.getViewOption(i);this.option("selectedCellData",[]),this._updateOption("workSpace",i,e),this._updateOption("header",i,e),this._updateOption("header","startViewDate",this.getStartViewDate()),this._appointments.option("items",[]),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break}case"dataSource":this._initDataSource(),this._postponeResourceLoading().done(()=>{this.appointmentDataSource.setDataSource(this._dataSource),this._filterAppointmentsByDate(),this._updateOption("workSpace","showAllDayPanel",this.option("showAllDayPanel"))});break;case"min":case"max":{const e=this.getViewOption(i);this._updateOption("header",i,e),this._updateOption("workSpace",i,e);break}case"views":this.currentView?this.repaint():this._updateOption("header","views",this.views);break;case"useDropDownViewSwitcher":this._updateOption("header",i,n);break;case"currentView":this._appointments.option({items:[],allowDrag:this._allowDragging(),allowResize:this._allowResizing(),itemTemplate:this._getAppointmentTemplate("appointmentTemplate")}),this._postponeResourceLoading().done(()=>{var e;this._refreshWorkSpace(),null===(e=this._header)||void 0===e||e.option(this._headerConfig()),this._filterAppointmentsByDate(),this._appointments.option("allowAllDayResize","day"!==n)}),this.postponedOperations.callPostponedOperations();break;case"appointmentTemplate":this._appointments.option("itemTemplate",n);break;case"dateCellTemplate":case"resourceCellTemplate":case"dataCellTemplate":case"timeCellTemplate":this.repaint();break;case"groups":this._postponeResourceLoading().done(()=>{this._refreshWorkSpace(),this._filterAppointmentsByDate()});break;case"resources":null===(t=this.resourceManager)||void 0===t||t.dispose(),this.resourceManager=new Qd(this.option("resources")),this.updateAppointmentDataSource(),this._postponeResourceLoading().done(()=>{this._appointments.option("items",[]),this._refreshWorkSpace(),this._filterAppointmentsByDate(),this._createAppointmentPopupForm()});break;case"startDayHour":case"endDayHour":this.updateAppointmentDataSource(),this._appointments.option("items",[]),this._updateOption("workSpace",i,n),this._appointments.repaint(),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case"offset":this.updateAppointmentDataSource(),this._appointments.option("items",[]),this._updateOption("workSpace","viewOffset",this.normalizeViewOffsetValue(n)),this._appointments.repaint(),this._filterAppointmentsByDate(),this._postponeDataSourceLoading();break;case oD.ADDING:case oD.ADDED:case oD.UPDATING:case oD.UPDATED:case oD.DELETING:case oD.DELETED:case"onAppointmentFormOpening":case"onAppointmentTooltipShowing":this._actions[i]=this._createActionByOption(i);break;case"onAppointmentRendered":this._appointments.option("onItemRendered",this._getAppointmentRenderedAction());break;case"onAppointmentClick":this._appointments.option("onItemClick",this._createActionByOption(i));break;case"onAppointmentDblClick":this._appointments.option(i,this._createActionByOption(i));break;case"onAppointmentContextMenu":this._appointments.option("onItemContextMenu",this._createActionByOption(i)),this._appointmentTooltip._options.onItemContextMenu=this._createActionByOption(i);break;case"noDataText":case"allowMultipleCellSelection":case"selectedCellData":case"accessKey":case"onCellClick":case"onCellContextMenu":this._updateOption("workSpace",i,n);break;case"crossScrollingEnabled":this._postponeResourceLoading().done(()=>{this._appointments.option("items",[]),this._refreshWorkSpace(),this._readyToRenderAppointments&&this._appointments.option("items",this._getAppointmentsToRepaint())});break;case"cellDuration":this._updateOption("workSpace",i,n),this._appointments.option("items",[]),this._readyToRenderAppointments&&(this._updateOption("workSpace","hoursInterval",n/60),this._appointments.option("items",this._getAppointmentsToRepaint()));break;case"tabIndex":case"focusStateEnabled":this._updateOption("header",i,n),this._updateOption("workSpace",i,n),this._appointments.option(i,n),super._optionChanged(e);break;case"width":this._updateOption("header",i,n),this.option("crossScrollingEnabled")&&this._updateOption("workSpace","width",n),this._updateOption("workSpace","schedulerWidth",n),super._optionChanged(e),this._dimensionChanged(null,!0);break;case"height":super._optionChanged(e),this._dimensionChanged(null,!0),this._updateOption("workSpace","schedulerHeight",n);break;case"editing":{this._initEditing();const e=this._editing;this._bringEditingModeToAppointments(e),this.hideAppointmentTooltip(),this._cleanPopup();break}case"showAllDayPanel":this.updateAppointmentDataSource(),this.repaint();break;case"showCurrentTimeIndicator":case"indicatorUpdateInterval":case"shadeUntilCurrentTime":case"groupByDate":this._updateOption("workSpace",i,n),this.repaint();break;case"indicatorTime":this._updateOption("workSpace",i,n),this._updateOption("header",i,n),this.repaint();break;case"appointmentDragging":case"appointmentTooltipTemplate":case"appointmentPopupTemplate":case"recurrenceEditMode":case"remoteFiltering":case"timeZone":this.updateAppointmentDataSource(),this.repaint();break;case"dropDownAppointmentTemplate":case"appointmentCollectorTemplate":case"_appointmentTooltipOffset":case"_appointmentCountPerCell":case"_collectorOffset":case"_appointmentOffset":this.repaint();break;case"dateSerializationFormat":case"maxAppointmentsPerCell":break;case"startDateExpr":case"endDateExpr":case"startDateTimeZoneExpr":case"endDateTimeZoneExpr":case"textExpr":case"descriptionExpr":case"allDayExpr":case"recurrenceRuleExpr":case"recurrenceExceptionExpr":case"disabledExpr":this._updateExpression(i,n),this._initAppointmentTemplate(),this.repaint();break;case"adaptivityEnabled":this._toggleAdaptiveClass(),this.repaint();break;case"scrolling":this.option("crossScrollingEnabled",this._isHorizontalVirtualScrolling()||this.option("crossScrollingEnabled")),this._updateOption("workSpace",e.fullName,n);break;case"allDayPanelMode":this.updateAppointmentDataSource(),this._updateOption("workSpace",e.fullName,n);break;case"renovateRender":this._updateOption("workSpace",i,n);break;case"_draggingMode":this._updateOption("workSpace","draggingMode",n);break;case"toolbar":this._header?this._header.onToolbarOptionChanged(e.fullName,n):this.repaint();break;default:super._optionChanged(e)}}_bringEditingModeToAppointments(e){const t={allowDelete:e.allowUpdating&&e.allowDeleting};this._isAgenda()||(t.allowDrag=e.allowDragging,t.allowResize=e.allowResizing,t.allowAllDayResize=e.allowResizing&&this._supportAllDayResizing()),this._appointments.option(t),this.repaint()}_isAgenda(){return"agenda"===this._layoutManager.appointmentRenderingStrategyName}_allowDragging(){return this._editing.allowDragging&&!this._isAgenda()}_allowResizing(){return this._editing.allowResizing&&!this._isAgenda()}_allowAllDayResizing(){return this._editing.allowResizing&&this._supportAllDayResizing()}_supportAllDayResizing(){return"day"!==this.currentView.type||this.currentView.intervalCount>1}_isAllDayExpanded(){return this.option("showAllDayPanel")&&this._layoutManager.hasAllDayAppointments()}_filterAppointmentsByDate(){if(!this._workSpace)return;const e=this._workSpace.getDateRange(),t=this.timeZoneCalculator.createDate(e[0],"fromGrid"),n=this.timeZoneCalculator.createDate(e[1],"fromGrid");this.setRemoteFilter(t,n,this.option("remoteFiltering"),this.option("dateSerializationFormat"))}setRemoteFilter(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;const a=this._dataSource,r=this._dataAccessors;if(!a||!n)return;const o=a.filter(),s=wu({dataSourceFilter:o,dataAccessors:r,min:e,max:t,dateSerializationFormat:i,forceIsoDateParsing:(0,g.A)().forceIsoDateParsing});a.filter(s)}_reloadDataSource(){const e=new b.cY;return this._dataSource?(this._dataSource.load().done(()=>{tt(),this._fireContentReadyAction(e)}).fail(()=>{tt(),e.reject()}),this._dataSource.isLoading()&&et({container:this.$element(),position:{of:this.$element()}})):this._fireContentReadyAction(e),e.promise()}_fireContentReadyAction(e){const t=super._fireContentReadyAction.bind(this),n=()=>{t(),null===e||void 0===e||e.resolve()};var i;this._workSpaceRecalculation?null===(i=this._workSpaceRecalculation)||void 0===i||i.done(()=>{n()}):n()}_dimensionChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n="number"===typeof this.option("height"),i="number"===typeof this.option("width");if(!this._isVisible())return;this._toggleSmallClass();const a=this.getWorkSpace();if(!this._isAgenda()&&this._layoutManager&&a&&!$d(a)&&(t||!n||!i)){a.option("allDayExpanded",this._isAllDayExpanded()),a._dimensionChanged();const e=this._layoutManager.createAppointmentsMap();this._appointments.option("items",e)}this.hideAppointmentTooltip(),this._appointmentPopup.triggerResize(),this._appointmentPopup.updatePopupFullScreenMode()}_clean(){this._cleanPopup(),super._clean()}_toggleSmallClass(){const{width:e}=(0,x.N)(this.$element().get(0));this.$element().toggleClass(eD,e<400)}_toggleAdaptiveClass(){this.$element().toggleClass(tD,this.option("adaptivityEnabled"))}_visibilityChanged(e){e&&this._dimensionChanged(null,!0)}_dataSourceOptions(){return{paginate:!1}}_initAllDayPanel(){"hidden"===this.option("allDayPanelMode")&&this.option("showAllDayPanel",!1)}_init(){this._timeZonesPromise=Oe.A.cacheTimeZones(),this._initExpressions({startDateExpr:this.option("startDateExpr"),endDateExpr:this.option("endDateExpr"),startDateTimeZoneExpr:this.option("startDateTimeZoneExpr"),endDateTimeZoneExpr:this.option("endDateTimeZoneExpr"),allDayExpr:this.option("allDayExpr"),textExpr:this.option("textExpr"),descriptionExpr:this.option("descriptionExpr"),recurrenceRuleExpr:this.option("recurrenceRuleExpr"),recurrenceExceptionExpr:this.option("recurrenceExceptionExpr"),disabledExpr:this.option("disabledExpr")}),super._init(),this._initAllDayPanel(),this._initDataSource(),this._customizeDataSourceLoadOptions(),this.$element().addClass(Jf),this._initEditing(),this.updateAppointmentDataSource(),this._initActions(),this._compactAppointmentsHelper=new Os(this),this._asyncTemplatesTimers=[],this._dataSourceLoadedCallback=(0,C.A)(),this._subscribes=Pl,this.resourceManager=new Qd(this.option("resources")),this._notifyScheduler=new uo({scheduler:this})}createAppointmentDataSource(){var e;null===(e=this.appointmentDataSource)||void 0===e||e.destroy(),this.appointmentDataSource=new ec(this._dataSource)}updateAppointmentDataSource(){this._timeZoneCalculator=null,this.getWorkSpace()&&this.createAppointmentDataSource()}_customizeDataSourceLoadOptions(){var e;null===(e=this._dataSource)||void 0===e||e.on("customizeStoreLoadOptions",e=>{let{storeLoadOptions:t}=e;t.startDate=this.getStartViewDate(),t.endDate=this.getEndViewDate()})}_initTemplates(){this._initAppointmentTemplate(),this._templateManager.addDefaultTemplates({appointmentTooltip:new _.A,dropDownAppointment:new _.A}),super._initTemplates()}_initAppointmentTemplate(){const{expr:e}=this._dataAccessors,t=e=>(0,w.Hz)(`appointmentData.${e}`),n=e=>t=>{const n=e(t);return n instanceof Date?n.valueOf():n};this._templateManager.addDefaultTemplates({item:new y.U((e,t,n)=>this.getAppointmentsInstance()._renderAppointmentTemplate(e,t,n),["html","text","startDate","endDate","allDay","description","recurrenceRule","recurrenceException","startDateTimeZone","endDateTimeZone"],this.option("integrationOptions.watchMethod"),{text:t(e.textExpr),startDate:n(t(e.startDateExpr)),endDate:n(t(e.endDateExpr)),startDateTimeZone:t(e.startDateTimeZoneExpr),endDateTimeZone:t(e.endDateTimeZoneExpr),allDay:t(e.allDayExpr),recurrenceRule:t(e.recurrenceRuleExpr)})})}_renderContent(){this._renderContentImpl()}_dataSourceChangedHandler(e){this._readyToRenderAppointments&&this._workSpaceRecalculation.done(()=>{this._layoutManager.prepareItems(e),this._renderAppointments(),this._updateA11yStatus(),this.getWorkSpace().onDataSourceChanged(this._layoutManager.filteredItems)})}isVirtualScrolling(){const e=this.getWorkSpace();if(e)return e.isVirtualScrolling();const t=this.getViewOption("scrolling");return"virtual"===(null===t||void 0===t?void 0:t.mode)}_renderAppointments(){const e=this.getWorkSpace();this._layoutManager.filterAppointments(),e.option("allDayExpanded",this._isAllDayExpanded());const t=this._isVisible()?this._getAppointmentsToRepaint():[];this._appointments.option("items",t),this.appointmentDataSource.cleanState()}_getAppointmentsToRepaint(){const e=this._layoutManager.createAppointmentsMap();return e}_initExpressions(e){this._dataAccessors=new Hd(e,Boolean((0,g.A)().forceIsoDateParsing),this.option("dateSerializationFormat"))}_updateExpression(e,t){this._dataAccessors.updateExpression(e,t)}_initEditing(){const e=this.option("editing");this._editing={allowAdding:Boolean(e),allowUpdating:Boolean(e),allowDeleting:Boolean(e),allowResizing:Boolean(e),allowDragging:Boolean(e)},(0,k.Gv)(e)&&(this._editing=(0,T.X)(this._editing,e)),this._editing.allowDragging=this._editing.allowDragging&&this._editing.allowUpdating,this._editing.allowResizing=this._editing.allowResizing&&this._editing.allowUpdating;const t=Object.values(this._editing).every(e=>!e);this.$element().toggleClass(nD,t)}_dispose(){var e,t,n;null===(e=this.resourceManager)||void 0===e||e.dispose(),null===(t=this._appointmentTooltip)||void 0===t||t.dispose(),null===(n=this._recurrenceDialog)||void 0===n||n.hide(sD.CANCEL),this.hideAppointmentPopup(),this.hideAppointmentTooltip(),this._asyncTemplatesTimers.forEach(clearTimeout),this._asyncTemplatesTimers=[],Wd.j.dispose(),super._dispose()}_initActions(){this._actions={onAppointmentAdding:this._createActionByOption(oD.ADDING),onAppointmentAdded:this._createActionByOption(oD.ADDED),onAppointmentUpdating:this._createActionByOption(oD.UPDATING),onAppointmentUpdated:this._createActionByOption(oD.UPDATED),onAppointmentDeleting:this._createActionByOption(oD.DELETING),onAppointmentDeleted:this._createActionByOption(oD.DELETED),onAppointmentFormOpening:this._createActionByOption("onAppointmentFormOpening"),onAppointmentTooltipShowing:this._createActionByOption("onAppointmentTooltipShowing")}}_getAppointmentRenderedAction(){return this._createActionByOption("onAppointmentRendered",{excludeValidators:["disabled","readOnly"]})}_renderFocusTarget(){return(0,v.lQ)()}_updateA11yStatus(){const e=this._workSpace.getDateRange(),t=this.option("showCurrentTimeIndicator")?vl(this.option("indicatorTime"),this.timeZoneCalculator):void 0,n=F(this.currentView,e[0],e[1],this._appointments.appointmentsCount,t);this.setAria({label:n}),this._a11yStatus.text(n)}_renderA11yStatus(){this._a11yStatus=P(),this._a11yStatus.prependTo(this.$element()),this.setAria({role:"group"})}_initMarkupOnResourceLoaded(){this._disposed||(this._initMarkupCore(),this._reloadDataSource())}_initMarkup(){if(super._initMarkup(),this._renderA11yStatus(),this._renderMainContainer(),this._renderHeader(),this._layoutManager=new bh(this),this._appointments=this._createComponent("<div>",so,this._appointmentsConfig()),this._appointments.option("itemTemplate",this._getAppointmentTemplate("appointmentTemplate")),this._appointmentTooltip=new(this.option("adaptivityEnabled")?Od:Ad)(this._getAppointmentTooltipOptions()),this._createAppointmentPopupForm(),this._isDataSourceLoaded()||this._isDataSourceLoading())this._initMarkupCore(),this._dataSourceChangedHandler(this._dataSource.items()),this._fireContentReadyAction();else{const e=this.getViewOption("groups");null!==e&&void 0!==e&&e.length?this.resourceManager.loadGroupResources(e,!0).then(()=>this._initMarkupOnResourceLoaded()):this._initMarkupOnResourceLoaded()}}_createAppointmentPopupForm(){var e,t;this._appointmentForm&&(null===(t=this._appointmentForm.form)||void 0===t||t.dispose());this._appointmentForm=this.createAppointmentForm(),null===(e=this._appointmentPopup)||void 0===e||e.dispose(),this._appointmentPopup=this.createAppointmentPopup(this._appointmentForm)}_renderMainContainer(){this._mainContainer=(0,D.A)("<div>").addClass("dx-scheduler-container"),this.$element().append(this._mainContainer)}createAppointmentForm(){const e={createResourceEditorModel:()=>Bd(this.resourceManager.resourceById),getDataAccessors:()=>this._dataAccessors,createComponent:(e,t,n)=>this._createComponent(e,t,n),getEditingConfig:()=>this._editing,getFirstDayOfWeek:()=>this.option("firstDayOfWeek"),getStartDayHour:()=>this.option("startDayHour"),getCalculatedEndDate:e=>this._workSpace.calculateEndDate(e),getTimeZoneCalculator:()=>this.timeZoneCalculator};return new Be(e)}createAppointmentPopup(e){const t={getElement:()=>this.$element(),createComponent:(e,t,n)=>this._createComponent(e,t,n),focus:()=>this.focus(),getResourceManager:()=>this.resourceManager,getEditingConfig:()=>this._editing,getTimeZoneCalculator:()=>this.timeZoneCalculator,getDataAccessors:()=>this._dataAccessors,getAppointmentFormOpening:()=>this._actions.onAppointmentFormOpening,processActionResult:(e,t)=>this._processActionResult(e,t),addAppointment:e=>this.addAppointment(e),updateAppointment:(e,t)=>this.updateAppointment(e,t),updateScrollPosition:(e,t,n)=>{this._workSpace.updateScrollPosition(e,t,n)}};return new _t(t,e)}_getAppointmentTooltipOptions(){return{createComponent:this._createComponent.bind(this),container:this.$element(),getScrollableContainer:this.getWorkSpaceScrollableContainer.bind(this),addDefaultTemplates:this._templateManager.addDefaultTemplates.bind(this._templateManager),getAppointmentTemplate:this._getAppointmentTemplate.bind(this),showAppointmentPopup:this.showAppointmentPopup.bind(this),checkAndDeleteAppointment:this.checkAndDeleteAppointment.bind(this),isAppointmentInAllDayPanel:this.isAppointmentInAllDayPanel.bind(this),createFormattedDateText:(e,t,n)=>this.fire("createFormattedDateText",e,t,n),getAppointmentDisabled:e=>this._dataAccessors.get("disabled",e),onItemContextMenu:this._createActionByOption("onAppointmentContextMenu"),createEventArgs:this._createEventArgs.bind(this)}}_createEventArgs(e){const t={itemData:e.itemData.appointment,itemElement:e.itemElement,targetedAppointment:e.itemData.targetedAppointment};return(0,T.X)({},this.fire("mapAppointmentFields",t),{component:e.component,element:e.element,event:e.event,model:e.model})}checkAndDeleteAppointment(e,t){const n=new it(t,this._dataAccessors),i=this.fireOnAppointmentDeleting(e,n);this._checkRecurringAppointment(e,t,n.startDate,()=>{this.processDeleteAppointment(e,i)},!0)}_getExtraAppointmentTooltipOptions(){return{rtlEnabled:this.option("rtlEnabled"),focusStateEnabled:this.option("focusStateEnabled"),editing:this.option("editing"),offset:this.option("_appointmentTooltipOffset")}}isAppointmentInAllDayPanel(e){const t=this._workSpace,n=this.appointmentTakesAllDay(e);return n&&t.supportAllDayRow()&&t.option("showAllDayPanel")}_initMarkupCore(){this._readyToRenderAppointments=(0,E.Vd)(),this._workSpace&&this._cleanWorkspace(),this._renderWorkSpace(),this._appointments.option({fixedContainer:this._workSpace.getFixedContainer(),allDayContainer:this._workSpace.getAllDayContainer()}),this._waitAsyncTemplate(()=>{var e;return null===(e=this._workSpaceRecalculation)||void 0===e?void 0:e.resolve()}),this.createAppointmentDataSource(),this._filterAppointmentsByDate(),this._validateKeyFieldIfAgendaExist(),this._updateA11yStatus()}_isDataSourceLoaded(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded()}_render(){var e;this._toggleAdaptiveClass(),null===(e=this.getWorkSpace())||void 0===e||e.updateHeaderEmptyCellWidth(),super._render()}_renderHeader(){var e;const t=this.option("toolbar"),n=Boolean(t.visible??(null===(e=t.items)||void 0===e?void 0:e.length));if(n){const e=(0,D.A)("<div>").appendTo(this._mainContainer),t=this._headerConfig();this._header=this._createComponent(e,bs,t)}}_headerConfig(){return{currentView:this.currentView,views:this.views,currentDate:this.getViewOption("currentDate"),min:this.getViewOption("min"),max:this.getViewOption("max"),indicatorTime:this.option("indicatorTime"),startViewDate:this.getStartViewDate(),tabIndex:this.option("tabIndex"),focusStateEnabled:this.option("focusStateEnabled"),useDropDownViewSwitcher:this.option("useDropDownViewSwitcher"),firstDayOfWeek:this.getFirstDayOfWeek(),toolbar:this.option("toolbar"),customizeDateNavigatorText:this.option("customizeDateNavigatorText"),onCurrentViewChange:e=>{this.option("currentView",e)},onCurrentDateChange:e=>{this.option("currentDate",e)}}}_appointmentsConfig(){const e={getResourceManager:()=>this.resourceManager,getAppointmentDataSource:()=>this.appointmentDataSource,dataAccessors:this._dataAccessors,notifyScheduler:this._notifyScheduler,onItemRendered:this._getAppointmentRenderedAction(),onItemClick:this._createActionByOption("onAppointmentClick"),onItemContextMenu:this._createActionByOption("onAppointmentContextMenu"),onAppointmentDblClick:this._createActionByOption("onAppointmentDblClick"),tabIndex:this.option("tabIndex"),focusStateEnabled:this.option("focusStateEnabled"),allowDrag:this._allowDragging(),allowDelete:this._editing.allowUpdating&&this._editing.allowDeleting,allowResize:this._allowResizing(),allowAllDayResize:this._allowAllDayResizing(),rtlEnabled:this.option("rtlEnabled"),groups:this.getViewOption("groups"),timeZoneCalculator:this.timeZoneCalculator,getResizableStep:()=>this._workSpace?this._workSpace.positionHelper.getResizableStep():0,getDOMElementsMetaData:()=>{var e;return null===(e=this._workSpace)||void 0===e?void 0:e.getDOMElementsMetaData()},getViewDataProvider:()=>{var e;return null===(e=this._workSpace)||void 0===e?void 0:e.viewDataProvider},isVerticalGroupedWorkSpace:()=>this._workSpace._isVerticalGroupedWorkSpace(),isDateAndTimeView:()=>sl(this._workSpace.type),onContentReady:()=>{var e;null===(e=this._workSpace)||void 0===e||e.option("allDayExpanded",this._isAllDayExpanded())}};return e}getCollectorOffset(){return this._workSpace.needApplyCollectorOffset()&&!this.option("adaptivityEnabled")?this.option("_collectorOffset"):0}getAppointmentDurationInMinutes(){return this.getViewOption("cellDuration")}_renderWorkSpace(){const e=this.currentView;if(!e)return;this._readyToRenderAppointments&&(this._toggleSmallClass(),Promise.resolve().then(()=>{var e;this._toggleSmallClass(),null===(e=this._workSpace)||void 0===e||e.updateHeaderEmptyCellWidth()}));const t=(0,D.A)("<div>").appendTo(this._mainContainer),n=e.type,i=rD[n].workSpace,a=this._workSpaceConfig(e);this._workSpace=this._createComponent(t,i,a),this._allowDragging()&&this._workSpace.initDragBehavior(this,this._all),this._workSpace._attachTablesEvents(),this._workSpace.getWorkArea().append(this._appointments.$element()),this._recalculateWorkspace(),e.startDate&&this._updateOption("header","currentDate",this._workSpace._getHeaderDate())}_recalculateWorkspace(){this._workSpaceRecalculation=new b.cY,this._waitAsyncTemplate(()=>{(0,c.ho)(this._workSpace.$element()),this._workSpace.renderCurrentDateTimeLineAndShader()})}_workSpaceConfig(e){const t=this.getViewOption("scrolling"),n="virtual"===t.mode,i=n&&(!(0,k.O9)(t.orientation)||["horizontal","both"].includes(t.orientation)),a=this.option("crossScrollingEnabled")||i||ol(e.type),r=(0,T.X)({resources:this.option("resources"),getResourceManager:()=>this.resourceManager,getFilteredItems:()=>this._layoutManager.filteredItems,noDataText:this.option("noDataText"),firstDayOfWeek:this.option("firstDayOfWeek"),startDayHour:this.option("startDayHour"),endDayHour:this.option("endDayHour"),viewOffset:this.getViewOffsetMs(),tabIndex:this.option("tabIndex"),accessKey:this.option("accessKey"),focusStateEnabled:this.option("focusStateEnabled"),cellDuration:this.option("cellDuration"),showAllDayPanel:this.option("showAllDayPanel"),showCurrentTimeIndicator:this.option("showCurrentTimeIndicator"),indicatorTime:this.option("indicatorTime"),indicatorUpdateInterval:this.option("indicatorUpdateInterval"),shadeUntilCurrentTime:this.option("shadeUntilCurrentTime"),crossScrollingEnabled:a,dataCellTemplate:this.option("dataCellTemplate"),timeCellTemplate:this.option("timeCellTemplate"),resourceCellTemplate:this.option("resourceCellTemplate"),dateCellTemplate:this.option("dateCellTemplate"),allowMultipleCellSelection:this.option("allowMultipleCellSelection"),selectedCellData:this.option("selectedCellData"),onSelectionChanged:e=>{this.option("selectedCellData",e.selectedCellData)},groupByDate:this.getViewOption("groupByDate"),scrolling:t,draggingMode:this.option("_draggingMode"),timeZoneCalculator:this.timeZoneCalculator,schedulerHeight:this.option("height"),schedulerWidth:this.option("width"),allDayPanelMode:this.option("allDayPanelMode"),onSelectedCellsClick:this.showAddAppointmentPopup.bind(this),onRenderAppointments:this._renderAppointments.bind(this),onShowAllDayPanel:e=>this.option("showAllDayPanel",e),getHeaderHeight:()=>Gs.DOM.getHeaderHeight(this._header),onScrollEnd:()=>this._appointments.updateResizableArea(),renovateRender:this._isRenovatedRender(n)},e);return r.notifyScheduler=this._notifyScheduler,r.groups=this.resourceManager.groupResources(),r.onCellClick=this._createActionByOption("onCellClick"),r.onCellContextMenu=this._createActionByOption("onCellContextMenu"),r.currentDate=this.getViewOption("currentDate"),r.hoursInterval=r.cellDuration/60,r.allDayExpanded=!1,r.dataCellTemplate=r.dataCellTemplate?this._getTemplate(r.dataCellTemplate):null,r.timeCellTemplate=r.timeCellTemplate?this._getTemplate(r.timeCellTemplate):null,r.resourceCellTemplate=r.resourceCellTemplate?this._getTemplate(r.resourceCellTemplate):null,r.dateCellTemplate=r.dateCellTemplate?this._getTemplate(r.dateCellTemplate):null,r}_isRenovatedRender(e){return this.option("renovateRender")&&(0,E.Vd)()||e}_waitAsyncTemplate(e){if(this._options.silent("templatesRenderAsynchronously")){const t=setTimeout(()=>{e(),clearTimeout(t)});this._asyncTemplatesTimers.push(t)}else e()}_getAppointmentTemplate(e){var t;return null!==(t=this.currentView)&&void 0!==t&&t[e]?this._getTemplate(this.currentView[e]):this._getTemplateByOption(e)}_updateOption(e,t,n){var i;null===(i=this[`_${e}`])||void 0===i||i.option(t,n)}_refreshWorkSpace(){this._cleanWorkspace(),delete this._workSpace,this._renderWorkSpace(),this._readyToRenderAppointments&&(this._appointments.option({fixedContainer:this._workSpace.getFixedContainer(),allDayContainer:this._workSpace.getAllDayContainer()}),this._waitAsyncTemplate(()=>this._workSpaceRecalculation.resolve()))}_cleanWorkspace(){this._appointments.$element().detach(),this._workSpace._dispose(),this._workSpace.$element().remove(),this.option("selectedCellData",[])}getWorkSpaceScrollable(){return this._workSpace.getScrollable()}getWorkSpaceScrollableContainer(){return this._workSpace.getScrollableContainer()}getWorkSpace(){return this._workSpace}getHeader(){return this._header}_cleanPopup(){var e;null===(e=this._appointmentPopup)||void 0===e||e.dispose()}_checkRecurringAppointment(e,t,n,i,a,r,o,s){const l=this._dataAccessors.get("recurrenceRule",e);if(!Na(l)||!this._editing.allowUpdating)return void i();const u=s||this.option("recurrenceEditMode");switch(u){case"series":i();break;case"occurrence":this._excludeAppointmentFromSeries(e,t,n,a,r,o);break;default:o&&(o.cancel=new b.cY),this._showRecurrenceChangeConfirm(a).done(s=>{s===sD.SERIES&&i(),s===sD.OCCURRENCE&&this._excludeAppointmentFromSeries(e,t,n,a,r,o)}).fail(()=>this._appointments.moveAppointmentBack(o))}}_excludeAppointmentFromSeries(e,t,n,i,a,r){const o=lu(e,n,this._dataAccessors),s=(0,d.A)({},t);delete s[this._dataAccessors.expr.recurrenceExceptionExpr],delete s[this._dataAccessors.expr.recurrenceRuleExpr];const l=this.appointmentDataSource.keyName;delete s[l];const u=!i&&!a;u&&this.addAppointment(s),a?(this._appointmentPopup.show(s,{isToolbarVisible:!0,action:yt.EXCLUDE_FROM_SERIES,excludeInfo:{sourceAppointment:e,updatedAppointment:o.source}}),this._editAppointmentData=e):this._updateAppointment(e,o.source,()=>{this._appointments.moveAppointmentBack(r)},r)}_createRecurrenceException(e,t){const n=[];return e.recurrenceException&&n.push(e.recurrenceException),n.push(this._getSerializedDate(t,e.startDate,e.allDay)),n.join()}_getSerializedDate(e,t,n){return n&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),S.A.serializeDate(e,aD)}_showRecurrenceChangeConfirm(e){const t=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteTitle":"dxScheduler-confirmRecurrenceEditTitle"),n=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteMessage":"dxScheduler-confirmRecurrenceEditMessage"),i=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteSeries":"dxScheduler-confirmRecurrenceEditSeries"),a=p.A.format(e?"dxScheduler-confirmRecurrenceDeleteOccurrence":"dxScheduler-confirmRecurrenceEditOccurrence");return this._recurrenceDialog=(0,O.Ie)({title:t,messageHtml:n,showCloseButton:!0,showTitle:!0,buttons:[{text:i,onClick:()=>sD.SERIES},{text:a,onClick:()=>sD.OCCURRENCE}],popupOptions:{wrapperAttr:{class:"dx-dialog"},onHidden:()=>{var e;null===(e=this._appointments)||void 0===e||e.focus()}}}),this._recurrenceDialog.show()}_getUpdatedData(e){const t=this.getViewOffsetMs(),n=e=>{if(!e)return;const n=this.timeZoneCalculator.createDate(e,"fromGrid");return R.X.addOffsets(n,[-t])},i=this.getTargetCellData(),a=new it(e,this._dataAccessors),r=n(i.startDate),o=n(i.endDate);let s=new Date(a.startDate);s=R.X.addOffsets(s,[-t]);let l=new Date(a.endDate);l=R.X.addOffsets(l,[-t]);let u=r??s;R.X.isValidDate(s)||(s=u),R.X.isValidDate(l)||(l=o);const d=l.getTime()-s.getTime(),c=this._workSpace.keepOriginalHours()&&R.X.isValidDate(a.startDate)&&R.X.isValidDate(r);if(c){const e=this.timeZoneCalculator.createDate(s,"toGrid"),n=e.getTime()-A.A.trimTime(e).getTime(),a=R.X.addOffsets(i.startDate,[-t]);u=new Date(A.A.trimTime(a).getTime()+n),u=this.timeZoneCalculator.createDate(u,"fromGrid")}const h=new it({},this._dataAccessors);void 0!==i.allDay&&(h.allDay=i.allDay),h.startDate=u;let p=new Date(u.getTime()+d);if(this.appointmentTakesAllDay(e)&&!h.allDay&&this._workSpace.supportAllDayRow()&&(p=this._workSpace.calculateEndDate(u)),a.allDay&&!this._workSpace.supportAllDayRow()&&!this._workSpace.keepOriginalHours()){const e=new Date(u);e.setHours(0),p=new Date(e.getTime()+d),0!==p.getHours()&&p.setHours(this.getViewOption("endDayHour"))}h.startDate=R.X.addOffsets(h.startDate,[t]),h.endDate=R.X.addOffsets(p,[t]);const m=h.source;return ct(m,this.resourceManager.resourceById,i.groups),m}getTargetedAppointment(e,t){const n=Gs.dataAccessors.getAppointmentSettings(t);return nr(e,n,this._dataAccessors,this.timeZoneCalculator,this.resourceManager)}subscribe(e,t){this._subscribes[e]=Pl[e]=t}fire(e){const t=this._subscribes[e];if(!(0,k.Tn)(t))throw M.A.Error("E1031",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.call(this,...i)}getTargetCellData(){return this._workSpace.getDataByDroppableCell()}_updateAppointment(e,t,n,i){const a={newData:t,oldData:(0,T.X)({},e),cancel:!1},r=function(e){if(n&&n.call(this),e&&"Error"===e.name)throw e}.bind(this);return this._actions[oD.UPDATING](a),i&&!(0,k.uF)(i.cancel)&&(i.cancel=new b.cY),(0,k.yL)(a.cancel)&&i&&this._updatingAppointments.add(e),this._processActionResult(a,function(n){let a=new b.cY;if(n)r(),this._updatingAppointments.delete(e),a.resolve();else{this._expandAllDayPanel(t);try{a=this.appointmentDataSource.update(e,t).done(()=>{null===i||void 0===i||i.cancel.resolve(!1)}).always(t=>{this._updatingAppointments.delete(e),this._onDataPromiseCompleted(oD.UPDATED,t)}).fail(()=>r())}catch(o){r(o),this._updatingAppointments.delete(e),a.resolve()}}return a.promise()})}_processActionResult(e,t){const n=new b.cY,i=e=>{(0,b.z7)((0,b.Sx)(e)).always(n.resolve)};return(0,k.yL)(e.cancel)?(0,b.z7)((0,b.Sx)(e.cancel)).always(n=>{(0,k.O9)(n)||(n="rejected"===e.cancel.state()),i(t.call(this,n))}):i(t.call(this,e.cancel)),n.promise()}_expandAllDayPanel(e){!this._isAllDayExpanded()&&this.appointmentTakesAllDay(e)&&this._updateOption("workSpace","allDayExpanded",!0)}_onDataPromiseCompleted(e,t,n){const i={appointmentData:n||t};t instanceof Error?i.error=t:this._appointmentPopup.visible&&this._appointmentPopup.hide(),this._actions[e](i),this._fireContentReadyAction()}getAppointmentsInstance(){return this._appointments}getLayoutManager(){return this._layoutManager}getActions(){return this._actions}appointmentTakesAllDay(e){const t=new it(e,this._dataAccessors);return js(t,this.getViewOption("allDayPanelMode"))}dayHasAppointment(e,t,n){const i=e=>this.timeZoneCalculator.createDate(e,"toGrid"),a=new it(t,this._dataAccessors);let r=new Date(a.startDate),o=new Date(a.endDate);if(r=i(r),o=i(o),e.getTime()===o.getTime())return r.getTime()===o.getTime();n&&(e=A.A.trimTime(e),r=A.A.trimTime(r),o=A.A.trimTime(o));const s=e.getTime(),l=r.getTime(),u=o.getTime();return l<=s&&s<=u}getStartViewDate(){var e;return null===(e=this._workSpace)||void 0===e?void 0:e.getStartViewDate()}getEndViewDate(){return this._workSpace.getEndViewDate()}showAddAppointmentPopup(e,t){const n=new it({},this._dataAccessors);n.allDay=Boolean(e.allDay),n.startDate=e.startDateUTC,n.endDate=e.endDateUTC;const i=(0,T.X)(n.source,t);this.showAppointmentPopup(i,!0)}showAppointmentPopup(e,t,n){const i=(0,d.A)({},n);i&&(delete i.displayStartDate,delete i.displayEndDate);const a=(0,T.X)({},e,i),r=t??(0,k.RI)(e);if((0,k.RI)(e)&&(e=this.createPopupAppointment()),r)delete this._editAppointmentData,this._editing.allowAdding&&this._appointmentPopup.show(e,{isToolbarVisible:!0,action:yt.CREATE});else{const t=this._dataAccessors.get("startDate",i||e);this._checkRecurringAppointment(e,a,t,()=>{this._editAppointmentData=e,this._appointmentPopup.show(e,{isToolbarVisible:this._editing.allowUpdating,action:yt.UPDATE})},!1,!0)}}createPopupAppointment(){const e={},t=A.A.dateToMilliseconds,n=new Date(this.option("currentDate")),i=new Date(n.getTime()+this.option("cellDuration")*t("minute"));return this._dataAccessors.set("startDate",e,n),this._dataAccessors.set("endDate",e,i),e}hideAppointmentPopup(e){var t;null!==(t=this._appointmentPopup)&&void 0!==t&&t.visible&&(e&&this._appointmentPopup.saveChangesAsync(),this._appointmentPopup.hide())}showAppointmentTooltip(e,t,n){if(e){const i=Gs.dataAccessors.getAppointmentSettings(t),a={itemData:n??e,groupIndex:null===i||void 0===i?void 0:i.groupIndex},r={appointment:e,targetedAppointment:n,color:this.resourceManager.getAppointmentColor(a)};this.showAppointmentTooltipCore(t,[r])}}showAppointmentTooltipCore(e,t,n){const i={cancel:!1,appointments:t.map(e=>({appointmentData:e.appointment,currentAppointmentData:(0,d.A)({},e.targetedAppointment),color:e.color})),targetElement:(0,f.cc)(e)};this._createActionByOption("onAppointmentTooltipShowing")(i),this._appointmentTooltip.isAlreadyShown(e)?this.hideAppointmentTooltip():this._processActionResult(i,i=>{!i&&this._appointmentTooltip.show(e,t,(0,d.A)({},this._getExtraAppointmentTooltipOptions(),n))})}hideAppointmentTooltip(){var e;null===(e=this._appointmentTooltip)||void 0===e||e.hide()}scrollToTime(e,t,n){M.A.log("W0002","dxScheduler","scrollToTime","21.1",'Use the "scrollTo" method instead'),this._workSpace.scrollToTime(e,t,n)}scrollTo(e,t,n){this._workSpace.scrollTo(e,t,n)}_isHorizontalVirtualScrolling(){const e=this.option("scrolling"),{orientation:t,mode:n}=e,i="virtual"===n;return i&&("horizontal"===t||"both"===t)}addAppointment(e){const t=new it(e,this._dataAccessors);t.text=t.text||"";const n=t.serialize().source,i={appointmentData:n,cancel:!1};return this._actions[oD.ADDING](i),this._processActionResult(i,e=>e?(new b.cY).resolve():(this._expandAllDayPanel(n),this.appointmentDataSource.add(n).always(e=>this._onDataPromiseCompleted(oD.ADDED,e))))}updateAppointment(e,t){return this._updateAppointment(e,t)}deleteAppointment(e){const t=this.fireOnAppointmentDeleting(e);this.processDeleteAppointment(e,t)}fireOnAppointmentDeleting(e,t){const n={appointmentData:e,targetedAppointmentData:t,cancel:!1};return this._actions[oD.DELETING](n),n}processDeleteAppointment(e,t){this._processActionResult(t,function(t){t||this.appointmentDataSource.remove(e).always(t=>this._onDataPromiseCompleted(oD.DELETED,t,e))})}deleteRecurrence(e,t,n){"string"===typeof t&&(t=new Date(t)),this._checkRecurringAppointment(e,{},t,()=>{this.processDeleteAppointment(e,{cancel:!1})},!0,!1,null,n)}focus(){this._editAppointmentData?this._appointments.focus():this._workSpace.focus()}getFirstDayOfWeek(){return(0,k.O9)(this.getViewOption("firstDayOfWeek"))?this.getViewOption("firstDayOfWeek"):h.A.firstDayOfWeekIndex()}_validateKeyFieldIfAgendaExist(){if(!this.appointmentDataSource.isDataSourceInit)return;const e=this.hasAgendaView(),t=!this.appointmentDataSource.keyName;e&&t&&M.A.log("W1023")}_getDragBehavior(){return this._workSpace.dragBehavior}_isAppointmentBeingUpdated(e){return this._updatingAppointments.has(e)}getViewOffsetMs(){const e=this.getViewOption("offset");return this.normalizeViewOffsetValue(e)}normalizeViewOffsetValue(e){var t;return(0,k.O9)(e)&&(null===(t=this.currentView)||void 0===t?void 0:t.type)!==Ns.AGENDA?e*Qf("minute"):0}}lD.include(I.A),(0,m.A)("dxScheduler",lD);var uD=lD,dD=uD;
/*!
 * devextreme-vue
 * Version: 25.1.7
 * Build date: Mon Nov 10 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const cD={props:{accessKey:String,adaptivityEnabled:Boolean,allDayExpr:String,allDayPanelMode:String,appointmentCollectorTemplate:{},appointmentDragging:Object,appointmentTemplate:{},appointmentTooltipTemplate:{},cellDuration:Number,crossScrollingEnabled:Boolean,currentDate:[Date,Number,String],currentView:String,customizeDateNavigatorText:Function,dataCellTemplate:{},dataSource:[Array,Object,String],dateCellTemplate:{},dateSerializationFormat:String,descriptionExpr:String,disabled:Boolean,dropDownAppointmentTemplate:{},editing:[Boolean,Object],elementAttr:Object,endDateExpr:String,endDateTimeZoneExpr:String,endDayHour:Number,firstDayOfWeek:Number,focusStateEnabled:Boolean,groupByDate:Boolean,groups:Array,height:[Number,String],hint:String,indicatorUpdateInterval:Number,max:[Date,Number,String],maxAppointmentsPerCell:[String,Number],min:[Date,Number,String],noDataText:String,offset:Number,onAppointmentAdded:Function,onAppointmentAdding:Function,onAppointmentClick:Function,onAppointmentContextMenu:Function,onAppointmentDblClick:Function,onAppointmentDeleted:Function,onAppointmentDeleting:Function,onAppointmentFormOpening:Function,onAppointmentRendered:Function,onAppointmentTooltipShowing:Function,onAppointmentUpdated:Function,onAppointmentUpdating:Function,onCellClick:Function,onCellContextMenu:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,recurrenceEditMode:String,recurrenceExceptionExpr:String,recurrenceRuleExpr:String,remoteFiltering:Boolean,resourceCellTemplate:{},resources:Array,rtlEnabled:Boolean,scrolling:Object,selectedCellData:Array,shadeUntilCurrentTime:Boolean,showAllDayPanel:Boolean,showCurrentTimeIndicator:Boolean,startDateExpr:String,startDateTimeZoneExpr:String,startDayHour:Number,tabIndex:Number,textExpr:String,timeCellTemplate:{},timeZone:String,toolbar:Object,useDropDownViewSwitcher:Boolean,views:Array,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:adaptivityEnabled":null,"update:allDayExpr":null,"update:allDayPanelMode":null,"update:appointmentCollectorTemplate":null,"update:appointmentDragging":null,"update:appointmentTemplate":null,"update:appointmentTooltipTemplate":null,"update:cellDuration":null,"update:crossScrollingEnabled":null,"update:currentDate":null,"update:currentView":null,"update:customizeDateNavigatorText":null,"update:dataCellTemplate":null,"update:dataSource":null,"update:dateCellTemplate":null,"update:dateSerializationFormat":null,"update:descriptionExpr":null,"update:disabled":null,"update:dropDownAppointmentTemplate":null,"update:editing":null,"update:elementAttr":null,"update:endDateExpr":null,"update:endDateTimeZoneExpr":null,"update:endDayHour":null,"update:firstDayOfWeek":null,"update:focusStateEnabled":null,"update:groupByDate":null,"update:groups":null,"update:height":null,"update:hint":null,"update:indicatorUpdateInterval":null,"update:max":null,"update:maxAppointmentsPerCell":null,"update:min":null,"update:noDataText":null,"update:offset":null,"update:onAppointmentAdded":null,"update:onAppointmentAdding":null,"update:onAppointmentClick":null,"update:onAppointmentContextMenu":null,"update:onAppointmentDblClick":null,"update:onAppointmentDeleted":null,"update:onAppointmentDeleting":null,"update:onAppointmentFormOpening":null,"update:onAppointmentRendered":null,"update:onAppointmentTooltipShowing":null,"update:onAppointmentUpdated":null,"update:onAppointmentUpdating":null,"update:onCellClick":null,"update:onCellContextMenu":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:recurrenceEditMode":null,"update:recurrenceExceptionExpr":null,"update:recurrenceRuleExpr":null,"update:remoteFiltering":null,"update:resourceCellTemplate":null,"update:resources":null,"update:rtlEnabled":null,"update:scrolling":null,"update:selectedCellData":null,"update:shadeUntilCurrentTime":null,"update:showAllDayPanel":null,"update:showCurrentTimeIndicator":null,"update:startDateExpr":null,"update:startDateTimeZoneExpr":null,"update:startDayHour":null,"update:tabIndex":null,"update:textExpr":null,"update:timeCellTemplate":null,"update:timeZone":null,"update:toolbar":null,"update:useDropDownViewSwitcher":null,"update:views":null,"update:visible":null,"update:width":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=dD,this.$_hasAsyncTemplate=!1,this.$_expectedChildren={appointmentDragging:{isCollectionItem:!1,optionName:"appointmentDragging"},editing:{isCollectionItem:!1,optionName:"editing"},resource:{isCollectionItem:!0,optionName:"resources"},scrolling:{isCollectionItem:!1,optionName:"scrolling"},toolbar:{isCollectionItem:!1,optionName:"toolbar"},view:{isCollectionItem:!0,optionName:"views"}}}};(0,o.bx)(cD);const hD=(0,i.pM)(cD),pD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:autoScroll":null,"update:data":null,"update:group":null,"update:onAdd":null,"update:onDragEnd":null,"update:onDragMove":null,"update:onDragStart":null,"update:onRemove":null,"update:scrollSensitivity":null,"update:scrollSpeed":null},props:{autoScroll:Boolean,data:{},group:String,onAdd:Function,onDragEnd:Function,onDragMove:Function,onDragStart:Function,onRemove:Function,scrollSensitivity:Number,scrollSpeed:Number}};(0,o.nm)(pD);const mD=(0,i.pM)(pD);mD.$_optionName="appointmentDragging";const gD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowAdding":null,"update:allowDeleting":null,"update:allowDragging":null,"update:allowResizing":null,"update:allowTimeZoneEditing":null,"update:allowUpdating":null},props:{allowAdding:Boolean,allowDeleting:Boolean,allowDragging:Boolean,allowResizing:Boolean,allowTimeZoneEditing:Boolean,allowUpdating:Boolean}};(0,o.nm)(gD);const fD=(0,i.pM)(gD);fD.$_optionName="editing";const DD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:elementAttr":null,"update:hint":null,"update:html":null,"update:icon":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:type":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,elementAttr:Object,hint:String,html:String,icon:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:Object,showText:String,template:{},text:String,type:String,visible:Boolean,widget:String}};(0,o.nm)(DD);const yD=(0,i.pM)(DD);yD.$_optionName="items",yD.$_isCollectionItem=!0,yD.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const _D={emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:buttonTemplate":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:items":null,"update:keyExpr":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onItemClick":null,"update:onOptionChanged":null,"update:onSelectionChanged":null,"update:rtlEnabled":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:selectionMode":null,"update:stylingMode":null,"update:tabIndex":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,buttonTemplate:{},disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,items:Array,keyExpr:[Function,String],onContentReady:Function,onDisposing:Function,onInitialized:Function,onItemClick:Function,onOptionChanged:Function,onSelectionChanged:Function,rtlEnabled:Boolean,selectedItemKeys:Array,selectedItems:Array,selectionMode:String,stylingMode:String,tabIndex:Number,visible:Boolean,width:[Number,String]}};(0,o.nm)(_D);const CD=(0,i.pM)(_D);CD.$_optionName="options",CD.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},optionsItem:{isCollectionItem:!0,optionName:"items"}};const vD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:elementAttr":null,"update:hint":null,"update:icon":null,"update:template":null,"update:text":null,"update:type":null,"update:visible":null},props:{disabled:Boolean,elementAttr:Object,hint:String,icon:String,template:{},text:String,type:String,visible:Boolean}};(0,o.nm)(vD);const wD=(0,i.pM)(vD);wD.$_optionName="items",wD.$_isCollectionItem=!0;const AD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowMultiple":null,"update:colorExpr":null,"update:dataSource":null,"update:displayExpr":null,"update:fieldExpr":null,"update:label":null,"update:useColorAsDefault":null,"update:valueExpr":null},props:{allowMultiple:Boolean,colorExpr:String,dataSource:[Array,Object,String],displayExpr:[Function,String],fieldExpr:String,label:String,useColorAsDefault:Boolean,valueExpr:[Function,String]}};(0,o.nm)(AD);const SD=(0,i.pM)(AD);SD.$_optionName="resources",SD.$_isCollectionItem=!0;const bD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:mode":null},props:{mode:String}};(0,o.nm)(bD);const TD=(0,i.pM)(bD);TD.$_optionName="scrolling";const xD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:items":null,"update:multiline":null,"update:visible":null},props:{disabled:Boolean,items:Array,multiline:Boolean,visible:Boolean}};(0,o.nm)(xD);const kD=(0,i.pM)(xD);kD.$_optionName="toolbar",kD.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},toolbarItem:{isCollectionItem:!0,optionName:"items"}};const ED={emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:Object,showText:String,template:{},text:String,visible:Boolean,widget:String}};(0,o.nm)(ED);const ID=(0,i.pM)(ED);ID.$_optionName="items",ID.$_isCollectionItem=!0,ID.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};const OD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:agendaDuration":null,"update:allDayPanelMode":null,"update:appointmentCollectorTemplate":null,"update:appointmentTemplate":null,"update:appointmentTooltipTemplate":null,"update:cellDuration":null,"update:dataCellTemplate":null,"update:dateCellTemplate":null,"update:dropDownAppointmentTemplate":null,"update:endDayHour":null,"update:firstDayOfWeek":null,"update:groupByDate":null,"update:groupOrientation":null,"update:groups":null,"update:intervalCount":null,"update:maxAppointmentsPerCell":null,"update:name":null,"update:offset":null,"update:resourceCellTemplate":null,"update:scrolling":null,"update:startDate":null,"update:startDayHour":null,"update:timeCellTemplate":null,"update:type":null},props:{agendaDuration:Number,allDayPanelMode:String,appointmentCollectorTemplate:{},appointmentTemplate:{},appointmentTooltipTemplate:{},cellDuration:Number,dataCellTemplate:{},dateCellTemplate:{},dropDownAppointmentTemplate:{},endDayHour:Number,firstDayOfWeek:Number,groupByDate:Boolean,groupOrientation:String,groups:Array,intervalCount:Number,maxAppointmentsPerCell:[String,Number],name:String,offset:Number,resourceCellTemplate:{},scrolling:Object,startDate:[Date,Number,String],startDayHour:Number,timeCellTemplate:{},type:String}};(0,o.nm)(OD);const MD=(0,i.pM)(OD);MD.$_optionName="views",MD.$_isCollectionItem=!0,MD.$_expectedChildren={scrolling:{isCollectionItem:!1,optionName:"scrolling"}};
/*!
 * devextreme-vue
 * Version: 25.1.7
 * Build date: Mon Nov 10 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const RD={props:{animation:Object,container:{},contentTemplate:{},deferRendering:Boolean,disabled:Boolean,height:[Number,String],hideEvent:[Object,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onShowing:Function,onShown:Function,position:[String,Object],rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showEvent:[Object,String],target:{},visible:Boolean,width:[Number,String],wrapperAttr:{}},emits:{"update:isActive":null,"update:hoveredElement":null,"update:animation":null,"update:container":null,"update:contentTemplate":null,"update:deferRendering":null,"update:disabled":null,"update:height":null,"update:hideEvent":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onShowing":null,"update:onShown":null,"update:position":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showEvent":null,"update:target":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=cr,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},hideEvent:{isCollectionItem:!1,optionName:"hideEvent"},position:{isCollectionItem:!1,optionName:"position"},showEvent:{isCollectionItem:!1,optionName:"showEvent"}}}};(0,o.bx)(RD);const VD=(0,i.pM)(RD),PD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}};(0,o.nm)(PD);const HD=(0,i.pM)(PD);HD.$_optionName="animation",HD.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};const WD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}};(0,o.nm)(WD);const $D=(0,i.pM)(WD);$D.$_optionName="at";const BD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}};(0,o.nm)(BD);const GD=(0,i.pM)(BD);GD.$_optionName="boundaryOffset";const ND={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}};(0,o.nm)(ND);const FD=(0,i.pM)(ND);FD.$_optionName="collision";const zD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}};(0,o.nm)(zD);const LD=(0,i.pM)(zD);LD.$_optionName="from",LD.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};const UD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}};(0,o.nm)(UD);const ZD=(0,i.pM)(UD);ZD.$_optionName="hide",ZD.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};const YD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:delay":null,"update:name":null},props:{delay:Number,name:String}};(0,o.nm)(YD);const jD=(0,i.pM)(YD);jD.$_optionName="hideEvent";const XD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}};(0,o.nm)(XD);const qD=(0,i.pM)(XD);qD.$_optionName="my";const KD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}};(0,o.nm)(KD);const QD=(0,i.pM)(KD);QD.$_optionName="offset";const JD={emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[String,Object],my:[Object,String],of:{},offset:[Object,String]}};(0,o.nm)(JD);const ey=(0,i.pM)(JD);ey.$_optionName="position",ey.$_expectedChildren={at:{isCollectionItem:!1,optionName:"at"},boundaryOffset:{isCollectionItem:!1,optionName:"boundaryOffset"},collision:{isCollectionItem:!1,optionName:"collision"},my:{isCollectionItem:!1,optionName:"my"},offset:{isCollectionItem:!1,optionName:"offset"}};const ty={emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}};(0,o.nm)(ty);const ny=(0,i.pM)(ty);ny.$_optionName="show",ny.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};const iy={emits:{"update:isActive":null,"update:hoveredElement":null,"update:delay":null,"update:name":null},props:{delay:Number,name:String}};(0,o.nm)(iy);const ay=(0,i.pM)(iy);ay.$_optionName="showEvent";const ry={emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}};(0,o.nm)(ry);const oy=(0,i.pM)(ry);oy.$_optionName="to",oy.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};var sy=n(85302),ly=n(61334),uy=n(99455),dy=n(82185),cy=n(45724);const hy="dx-fa-button",py="dx-fa-button-icon",my="dx-fa-button-label",gy="dx-fa-button-label-wrapper",fy="dx-fa-button-content-reverse";class Dy extends cy.A{_getDefaultOptions(){return(0,d.A)({},super._getDefaultOptions(),{shading:!1,useInkRipple:!1,callOverlayRenderShading:!1,width:"auto",zIndex:1500,_observeContentResize:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,Z.gx)(),options:{useInkRipple:!0}}])}_moveToContainer(){this._$wrapper.appendTo(this.$element()),this._$content.appendTo(this._$wrapper)}_render(){this.$element().addClass(hy),this._renderIcon(),this._renderLabel(),super._render(),this.option("useInkRipple")&&this._renderInkRipple(),this._renderClick()}_renderLabel(){this._$label&&this._$label.remove();const{label:e}=this.option();if(!e)return void(this._$label=null);const t=(0,D.A)("<div>").addClass(my),n=(0,D.A)("<div>").addClass(gy);this._$label=n.prependTo(this.$content()).append(t.text(e)),this.$content().toggleClass(fy,this._isPositionLeft(this.option("parentPosition")))}_isPositionLeft(e){let t="";return e&&((0,k.Qd)(e)&&e.at?t=e.at.x?e.at.x:e.at:"string"===typeof e&&(t=e)),"left"===t.split(" ")[0]}_renderButtonIcon(e,t,n){e&&e.remove(),e=(0,D.A)("<div>").addClass(n);const i=(0,uy.N)(t);return e.append(i).appendTo(this.$content()),e}_renderIcon(){this._$icon=this._renderButtonIcon(this._$icon,this._options.silent("icon"),py)}_renderWrapper(){this._options.silent("callOverlayRenderShading")&&super._renderWrapper()}_getVisibleActions(e){const t=e||this.option("actions")||[];return t.filter(e=>e.option("visible"))}_getActionComponent(){return 1===this._getVisibleActions().length?this._getVisibleActions()[0]:this.option("actionComponent")||this.option("actions")[0]}_initContentReadyAction(){this._contentReadyAction=this._getActionComponent()._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]},!0)}_fireContentReadyAction(){this._contentReadyAction({actionElement:this.$element()})}_updateZIndexStackPosition(){const{zIndex:e}=this.option();this._$wrapper.css("zIndex",e),this._$content.css("zIndex",e)}_setClickAction(){const e=(0,be.b4)(ve.U,this.NAME),t=this.$element().find(".dx-overlay-content");Ae.A.off(t,e),Ae.A.on(t,e,e=>{const t={event:e,actionElement:this.element(),element:this._getActionComponent().$element()};this._clickAction(t)})}_defaultActionArgs(){return{component:this._getActionComponent()}}_renderClick(){this._clickAction=this._getActionComponent()._createActionByOption("onClick"),this._setClickAction()}_renderInkRipple(){this._inkRipple=(0,dy.XX)()}_getInkRippleContainer(){return this._$icon}_toggleActiveState(e,t,n){if(super._toggleActiveState(e,t,n),!this._inkRipple)return;const i={element:this._getInkRippleContainer(),event:n};t?this._inkRipple.showWave(i):this._inkRipple.hideWave(i)}_optionChanged(e){const{name:t,value:n,previousValue:i}=e;switch(t){case"icon":this._renderIcon();break;case"onClick":this._renderClick();break;case"label":this._renderLabel();break;case"visible":this._currentVisible=i,n?this._show():this._hide();break;case"useInkRipple":this._render();break;default:super._optionChanged(e)}}}var yy=Dy;const{getSwatchContainer:_y}=ly.A,Cy="dx-fa-button-main",vy="dx-fa-button-icon-close";let wy=null;const Ay=e=>{const{animation:t,actionComponent:n,actionVisible:i,actions:a,activeStateEnabled:r,direction:o,elementAttr:s,hint:l,hoverStateEnabled:u,icon:d,id:c,index:h,label:p,onClick:m,onContentReady:g,parentPosition:f,position:D,visible:y,zIndex:_}=e.option();return(0,T.X)({},{animation:t,actionComponent:n,actionVisible:i,actions:a,activeStateEnabled:r,direction:o,elementAttr:s,hint:l,hoverStateEnabled:u,icon:d,id:c,index:h,label:p,onClick:m,onContentReady:g,parentPosition:f,position:D,visible:y,zIndex:_},{onInitialized:null,onDisposing:null})};class Sy extends yy{_getDefaultOptions(){const e={icon:"add",closeIcon:"close",position:{at:"right bottom",my:"right bottom",offset:{x:-16,y:-16}},maxSpeedDialActionCount:5,hint:"",label:"",direction:"auto",actions:[],activeStateEnabled:!0,hoverStateEnabled:!0,indent:(0,Z.ip)()?49:55,childIndent:40,childOffset:(0,Z.ip)()?2:9,callOverlayRenderShading:!0,hideOnOutsideClick:!0};return(0,d.A)({},super._getDefaultOptions(),e,(0,g.A)().floatingActionButtonConfig,{shading:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,Z.Ft)()&&!(0,Z.ip)(),options:{indent:60,childIndent:60,childOffset:0}},{device:()=>(0,Z.Ft)()&&(0,Z.ip)(),options:{indent:48,childIndent:48,childOffset:0}},{device:()=>(0,Z.gx)()&&!(0,Z.ip)(),options:{indent:72,childIndent:56,childOffset:8}},{device:()=>(0,Z.gx)()&&(0,Z.ip)(),options:{indent:58,childIndent:48,childOffset:1}}])}_render(){this.$element().addClass(Cy),super._render(),this._moveToContainer(),this._renderCloseIcon(),this._renderClick()}_renderLabel(){super._renderLabel(),this.$element().toggleClass("dx-fa-button-with-label",!!this._$label)}_renderIcon(){super._renderIcon(),this.$element().toggleClass("dx-fa-button-without-icon",!this.option("icon"))}_renderCloseIcon(){this._$closeIcon=this._renderButtonIcon(this._$closeIcon,this._options.silent("closeIcon"),vy),this._$closeIcon.addClass("dx-state-invisible")}_renderClick(){this._clickAction=1===this._getVisibleActions().length?this._getActionComponent()._createActionByOption("onClick"):this._createAction(this._clickHandler.bind(this)),this._setClickAction()}_getVisibleActions(e){const t=e||this.option("actions");return t.filter(e=>e.option("visible"))}_getCurrentOptions(e){var t;const n=null===(t=wy)||void 0===t?void 0:t._getVisibleActions(e),i=this._getDefaultOptions();return 1===n.length?(0,T.X)(Ay(n[0]),{position:this._getPosition()}):(0,T.X)(i,{visible:0!==n.length})}_clickHandler(){var e;const t=this._actionItems.filter(e=>e.option("actionVisible")).sort((e,t)=>e.option("index")-t.option("index"));if(1===t.length)return;const n=t.length-1;for(let i=0;i<t.length;i++)t[i].option("animation",this._getActionAnimation(t[i],i,n)),t[i].option("position",this._getActionPosition(t,i)),t[i]._$wrapper.css("position",this._$wrapper.css("position")),t[i].toggle();null!==(e=(0,g.A)().floatingActionButtonConfig)&&void 0!==e&&e.shading&&(this._isShadingShown=!this.option("shading"),this.option("shading",this._isShadingShown)),this._$icon.toggleClass("dx-state-invisible"),this._$closeIcon.toggleClass("dx-state-invisible")}_updateZIndexStackPosition(){super._updateZIndexStackPosition();const e=this._overlayStack();e.push(this)}_renderActions(){var e;const{actions:t=[]}=this.option();if(null!==(e=this._actionItems)&&void 0!==e&&e.length&&(this._actionItems.forEach(e=>{e.dispose(),e.$element().remove()}),this._actionItems=[]),this._actionItems=[],1!==t.length)for(let n=0;n<t.length;n++){const e=t[n],i=(0,D.A)("<div>").appendTo(_y(e.$element()));Ae.A.off(i,"click"),Ae.A.on(i,"click",()=>{this._clickHandler()}),e._options.silent("actionComponent",e),e._options.silent("parentPosition",this._getPosition()),e._options.silent("actionVisible",e._options.silent("visible")),this._actionItems.push(this._createComponent(i,yy,(0,T.X)({},Ay(e),{visible:!1})))}}_getActionAnimation(e,t,n){return e._options.silent("animation.show.delay",30*t),e._options.silent("animation.hide.delay",30*(n-t)),e._options.silent("animation")}_getDirectionIndex(e,t){if("auto"===t){const t=(0,xe.Oq)(this.$content()),n=this.initialOption("indent")+this.initialOption("childIndent")*e.length-t,i=this.$content().offset().top;if(n<i)return-1;const a=(0,xe.Oq)(this._positionController._$wrapperCoveredElement)-t-i;return i>=a?-1:1}return"down"!==t?-1:1}_getActionPosition(e,t){const n=e[t],i=this.initialOption("childOffset"),a=n._options.silent("label")&&!this._$label?this._isPositionLeft(this._getPosition())?i:-i:0,r=this.initialOption("indent")+this.initialOption("childIndent")*t,o=this._getDirectionIndex(e,this.option("direction"))*r,s=n._options.silent("label")?this._isPositionLeft(this._getPosition())?"left":"right":"center";return{of:this.$content(),at:s,my:s,offset:{x:a,y:o}}}_outsideClickHandler(e){if(this._isShadingShown){const t=(0,D.A)(e.target)[0]===this._$wrapper[0];t&&(e.preventDefault(),this._clickHandler())}}_setPosition(){this.option("visible")&&(this._hide(),this._show())}_getPosition(){return this._getDefaultOptions().position}_getInkRippleContainer(){return this.$content()}_optionChanged(e){switch(e.name){case"actions":this._isVisible()&&(this._renderIcon(),this._renderLabel()),this._renderCloseIcon(),this._renderClick(),this._renderActions();break;case"maxSpeedDialActionCount":this._renderActions();break;case"closeIcon":this._renderCloseIcon();break;case"position":super._optionChanged(e),this._setPosition();break;case"label":this._isVisible()&&this._renderLabel(),this._setPosition();break;case"icon":this._isVisible()&&this._renderIcon();break;default:super._optionChanged(e)}}}function by(e){e._options.silent("onInitializing",null);let t=!1;if(wy){const{actions:n=[]}=wy.option();if(n.forEach(n=>{if(n._options.silent("id")===e._options.silent("id"))return t=!0,e}),delete wy._options.position,t)1===n.length?wy.option((0,T.X)({},Ay(n[0]),{actions:n,position:wy._getPosition()})):wy.option((0,T.X)(wy._getCurrentOptions(n),{actions:n}));else{if(wy._getVisibleActions(n).length>=wy.option("maxSpeedDialActionCount"))return e.dispose(),void M.A.log("W1014");n.push(e),wy.option((0,T.X)(wy._getCurrentOptions(n),{actions:n}))}}else{const t=(0,D.A)("<div>").appendTo(_y(e.$element()));wy=e._createComponent(t,Sy,(0,T.X)({},Ay(e),{actions:[e]}))}}function Ty(e){if(!wy)return;const{actions:t=[]}=wy.option();let n=t;const i=n.length;n=n.filter(t=>t._options.silent("id")!==e),i!==n.length&&(n.length?1===n.length?wy.option((0,T.X)({},Ay(n[0]),{actions:n})):wy.option({actions:n}):(wy.dispose(),wy.$element().remove(),wy=null))}const{getSwatchContainer:xy}=ly.A,ky=sy.A.add;class Ey extends Th.Ay{_getDefaultOptions(){return(0,T.X)(super._getDefaultOptions(),{icon:"",onClick:null,label:"",visible:!0,index:0,onContentReady:null,activeStateEnabled:!0,hoverStateEnabled:!0,animation:{show:{type:"pop",duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)",from:{scale:0,opacity:0},to:{scale:1,opacity:1}},hide:{type:"pop",duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)",from:{scale:1,opacity:1},to:{scale:0,opacity:0}}},id:new rr.A})}_optionChanged(e){switch(e.name){case"onClick":case"icon":case"label":case"visible":case"index":case"onInitializing":by(this);break;case"animation":case"id":break;default:super._optionChanged(e)}}_render(){this._toggleVisibility(!1),xy(this.$element())?by(this):ky(()=>by(this))}_dispose(){Ty(this._options.silent("id")),super._dispose()}}(0,m.A)("dxSpeedDialAction",Ey);var Iy=Ey,Oy=Iy;
/*!
 * devextreme-vue
 * Version: 25.1.7
 * Build date: Mon Nov 10 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const My={props:{accessKey:String,activeStateEnabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,hint:String,hoverStateEnabled:Boolean,icon:String,index:Number,label:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,tabIndex:Number,visible:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:index":null,"update:label":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:tabIndex":null,"update:visible":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=Oy,this.$_hasAsyncTemplate=!0}};(0,o.bx)(My);const Ry=(0,i.pM)(My);var Vy=n(37260),Py=n(98416),Hy=n(26379),Wy=n(13906);const $y={class:"side-panel-container"},By={key:0,class:"button-container"},Gy={class:"side-panel-content-wrapper"};var Ny=(0,i.pM)({__name:"left-side-panel",setup(e){const t=(0,a.KR)(!(Py.du.value.isXSmall||Py.du.value.isSmall)),n=(0,i.EW)(()=>Py.du.value.isXSmall||Py.du.value.isSmall);return(0,i.nT)(()=>{t.value=!(Py.du.value.isXSmall||Py.du.value.isSmall)}),(e,o)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,Hy.C4)({"left-side-panel":!0,overlapping:n.value,open:t.value})},[(0,i.Lk)("div",$y,[n.value?((0,i.uX)(),(0,i.CE)("div",By,[(0,i.bF)((0,a.R1)(r.x),{class:"open-button",icon:t.value?"hidepanel":"showpanel",onClick:o[0]||(o[0]=e=>t.value=!t.value)},null,8,["icon"])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Gy,[(0,i.bF)((0,a.R1)(Wy.$),{style:{"max-height":"100%"}},{default:(0,i.k6)(()=>[(0,i.RG)(e.$slots,"default")]),_:3})])])],2))}}),Fy=n(14480);const zy=(0,Fy.A)(Ny,[["__scopeId","data-v-fcc13ca2"]]);var Ly=zy,Uy=n(34299),Zy=n(97755);
/*!
 * devextreme-vue
 * Version: 25.1.7
 * Build date: Mon Nov 10 2025
 *
 * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
const Yy={props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,enableThreeStateBehavior:Boolean,focusStateEnabled:Boolean,height:[Number,String],hint:String,hoverStateEnabled:Boolean,iconSize:[Number,String],isDirty:Boolean,isValid:Boolean,name:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,readOnly:Boolean,rtlEnabled:Boolean,tabIndex:Number,text:String,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:Boolean,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:enableThreeStateBehavior":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:iconSize":null,"update:isDirty":null,"update:isValid":null,"update:name":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:readOnly":null,"update:rtlEnabled":null,"update:tabIndex":null,"update:text":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:visible":null,"update:width":null},model:{prop:"value",event:"update:value"},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=Zy.A,this.$_hasAsyncTemplate=!0}};(0,o.bx)(Yy);const jy=(0,i.pM)(Yy);const Xy={class:"list-header"},qy={class:"list-item"},Ky={class:"list-item-text"};var Qy=(0,i.pM)({__name:"calendar-list",props:{dataSource:{default:()=>[]}},emits:["listSelectionChanged"],setup(e,{emit:t}){const n=e;let r=[];(0,i.nT)(()=>{r=[...n.dataSource.flatMap(e=>e.items)]});const o=t;function s(e,{value:t}){r=t?[...r,e]:r.filter(t=>t!==e),o("listSelectionChanged",r)}return(t,n)=>((0,i.uX)(),(0,i.Wv)((0,a.R1)(Uy.T$),{class:"calendar-list","data-source":e.dataSource,"active-state-enabled":!1,"focus-state-enabled":!1,"hover-state-enabled":!1,grouped:!0,"collapsible-groups":!0,"scrolling-enabled":!1},{group:(0,i.k6)(({data:e})=>[(0,i.Lk)("div",Xy,(0,Hy.v_)(e.key),1)]),item:(0,i.k6)(({data:e})=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",qy,[(0,i.bF)((0,a.R1)(jy),{value:(0,a.R1)(r).includes(e),"focus-state-enabled":!1,onValueChanged:t=>s(e,t)},null,8,["value","onValueChanged"]),(0,i.Lk)("span",Ky,(0,Hy.v_)(e.text),1)])])]),_:1},8,["data-source"]))}});const Jy=(0,Fy.A)(Qy,[["__scopeId","data-v-665ca718"]]);var e_=Jy;const t_={key:0,class:"appointment-tooltip"},n_={class:"title"},i_={class:"content"},a_={class:"date"},r_={key:0,class:"description"},o_={class:"buttons"};var s_=(0,i.pM)({__name:"scheduler-tooltip",props:{selectedAppointmentData:{default:()=>({})}},emits:["clickEditAppointment","clickDeleteAppointment"],setup(e,{emit:t}){const n=e,o=(0,i.EW)(()=>{const e={hour:"numeric",minute:"numeric",hour12:!1},t={...e,weekday:"short",day:"numeric",month:"numeric",year:"numeric"};return`${n.selectedAppointmentData?.startDate?.toLocaleString(void 0,t)} - ${n.selectedAppointmentData?.endDate?.toLocaleTimeString(void 0,e)}`}),s=t;return(t,n)=>e.selectedAppointmentData?((0,i.uX)(),(0,i.CE)("div",t_,[(0,i.Lk)("div",n_,(0,Hy.v_)(e.selectedAppointmentData.text),1),(0,i.Lk)("div",i_,[(0,i.Lk)("div",a_,[(0,i.bF)((0,a.R1)(r.x),{icon:"clock","styling-mode":"text","focus-state-enabled":!1,"active-state-enabled":!1,"hover-state-enabled":!1}),(0,i.eW)(" "+(0,Hy.v_)(o.value),1)]),e.selectedAppointmentData.description?((0,i.uX)(),(0,i.CE)("div",r_,[(0,i.bF)((0,a.R1)(r.x),{icon:"textdocument","styling-mode":"text","focus-state-enabled":!1,"active-state-enabled":!1,"hover-state-enabled":!1}),(0,i.eW)(" "+(0,Hy.v_)(e.selectedAppointmentData.description),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",o_,[(0,i.bF)((0,a.R1)(r.x),{class:"button-danger",text:"Delete",type:"danger","styling-mode":"text",onClick:n[0]||(n[0]=()=>s("clickDeleteAppointment",e.selectedAppointmentData))}),(0,i.bF)((0,a.R1)(r.x),{class:"button-success",text:"Edit",type:"success","styling-mode":"text",onClick:n[1]||(n[1]=()=>s("clickEditAppointment"))})])])):(0,i.Q3)("",!0)}});const l_=s_;var u_=l_;const d_={class:"right-side-panel"},c_={class:"side-panel-container"},h_={class:"side-panel-header"},p_={key:0,class:"side-panel-title"},m_={class:"side-panel-title-text"},g_={class:"side-panel-content-wrapper"};var f_=(0,i.pM)({__name:"right-side-panel",props:{title:{default:""},isOpened:{type:Boolean,default:!1},showOpenButton:{type:Boolean,default:!0}},emits:["openedChange"],setup(e,{emit:t}){const n=e,o=(0,a.KR)(!1),s=t;function l(){o.value=!o.value,s("openedChange",o.value)}return(0,i.nT)(()=>{o.value=n.isOpened}),(t,n)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,Hy.C4)({"right-side-panel-wrapper":!0,overlapping:!(0,a.R1)(Py.du).isLarge,open:o.value,"closed-state-hidden":!e.showOpenButton})},[(0,i.Lk)("div",d_,[(0,i.Lk)("div",c_,[(0,i.Lk)("div",h_,[e.title?((0,i.uX)(),(0,i.CE)("div",p_,[(0,i.Lk)("div",m_,(0,Hy.v_)(e.title),1)])):(0,i.Q3)("",!0),(0,i.bF)((0,a.R1)(r.x),{class:"open-button","styling-mode":"text",icon:e.isOpened?(0,a.R1)(Py.du).isLarge?"panelleft":"close":"panelright",onClick:l},null,8,["icon"])]),(0,i.Lk)("div",g_,[(0,i.RG)(t.$slots,"default")])])])],2))}});const D_=(0,Fy.A)(f_,[["__scopeId","data-v-06259f59"]]);var y_=D_,__=n(166);class C_ extends Error{}class v_ extends C_{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class w_ extends C_{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class A_ extends C_{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class S_ extends C_{}class b_ extends C_{constructor(e){super(`Invalid unit ${e}`)}}class T_ extends C_{}class x_ extends C_{constructor(){super("Zone is an abstract class")}}const k_="numeric",E_="short",I_="long",O_={year:k_,month:k_,day:k_},M_={year:k_,month:E_,day:k_},R_={year:k_,month:E_,day:k_,weekday:E_},V_={year:k_,month:I_,day:k_},P_={year:k_,month:I_,day:k_,weekday:I_},H_={hour:k_,minute:k_},W_={hour:k_,minute:k_,second:k_},$_={hour:k_,minute:k_,second:k_,timeZoneName:E_},B_={hour:k_,minute:k_,second:k_,timeZoneName:I_},G_={hour:k_,minute:k_,hourCycle:"h23"},N_={hour:k_,minute:k_,second:k_,hourCycle:"h23"},F_={hour:k_,minute:k_,second:k_,hourCycle:"h23",timeZoneName:E_},z_={hour:k_,minute:k_,second:k_,hourCycle:"h23",timeZoneName:I_},L_={year:k_,month:k_,day:k_,hour:k_,minute:k_},U_={year:k_,month:k_,day:k_,hour:k_,minute:k_,second:k_},Z_={year:k_,month:E_,day:k_,hour:k_,minute:k_},Y_={year:k_,month:E_,day:k_,hour:k_,minute:k_,second:k_},j_={year:k_,month:E_,day:k_,weekday:E_,hour:k_,minute:k_},X_={year:k_,month:I_,day:k_,hour:k_,minute:k_,timeZoneName:E_},q_={year:k_,month:I_,day:k_,hour:k_,minute:k_,second:k_,timeZoneName:E_},K_={year:k_,month:I_,day:k_,weekday:I_,hour:k_,minute:k_,timeZoneName:I_},Q_={year:k_,month:I_,day:k_,weekday:I_,hour:k_,minute:k_,second:k_,timeZoneName:I_};class J_{get type(){throw new x_}get name(){throw new x_}get ianaName(){return this.name}get isUniversal(){throw new x_}offsetName(e,t){throw new x_}formatOffset(e,t){throw new x_}offset(e){throw new x_}equals(e){throw new x_}get isValid(){throw new x_}}let eC=null;class tC extends J_{static get instance(){return null===eC&&(eC=new tC),eC}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return zv(e,t,n)}formatOffset(e,t){return Yv(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}const nC=new Map;function iC(e){let t=nC.get(e);return void 0===t&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),nC.set(e,t)),t}const aC={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function rC(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,a,r,o,s,l,u,d]=i;return[o,a,r,s,l,u,d]}function oC(e,t){const n=e.formatToParts(t),i=[];for(let a=0;a<n.length;a++){const{type:e,value:t}=n[a],r=aC[e];"era"===e?i[r]=t:Dv(r)||(i[r]=parseInt(t,10))}return i}const sC=new Map;class lC extends J_{static create(e){let t=sC.get(e);return void 0===t&&sC.set(e,t=new lC(e)),t}static resetCache(){sC.clear(),nC.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=lC.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return zv(e,t,n,this.name)}formatOffset(e,t){return Yv(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const n=iC(this.name);let[i,a,r,o,s,l,u]=n.formatToParts?oC(n,t):rC(n,t);"BC"===o&&(i=1-Math.abs(i));const d=24===s?0:s,c=Bv({year:i,month:a,day:r,hour:d,minute:l,second:u,millisecond:0});let h=+t;const p=h%1e3;return h-=p>=0?p:1e3+p,(c-h)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let uC={};function dC(e,t={}){const n=JSON.stringify([e,t]);let i=uC[n];return i||(i=new Intl.ListFormat(e,t),uC[n]=i),i}const cC=new Map;function hC(e,t={}){const n=JSON.stringify([e,t]);let i=cC.get(n);return void 0===i&&(i=new Intl.DateTimeFormat(e,t),cC.set(n,i)),i}const pC=new Map;function mC(e,t={}){const n=JSON.stringify([e,t]);let i=pC.get(n);return void 0===i&&(i=new Intl.NumberFormat(e,t),pC.set(n,i)),i}const gC=new Map;function fC(e,t={}){const{base:n,...i}=t,a=JSON.stringify([e,i]);let r=gC.get(a);return void 0===r&&(r=new Intl.RelativeTimeFormat(e,t),gC.set(a,r)),r}let DC=null;function yC(){return DC||(DC=(new Intl.DateTimeFormat).resolvedOptions().locale,DC)}const _C=new Map;function CC(e){let t=_C.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),_C.set(e,t)),t}const vC=new Map;function wC(e){let t=vC.get(e);if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in t||(t={...MC,...t}),vC.set(e,t)}return t}function AC(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,a;try{t=hC(e).resolvedOptions(),a=e}catch(i){const r=e.substring(0,n);t=hC(r).resolvedOptions(),a=r}const{numberingSystem:r,calendar:o}=t;return[a,r,o]}}function SC(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}function bC(e){const t=[];for(let n=1;n<=12;n++){const i=PS.utc(2009,n,1);t.push(e(i))}return t}function TC(e){const t=[];for(let n=1;n<=7;n++){const i=PS.utc(2016,11,13+n);t.push(e(i))}return t}function xC(e,t,n,i){const a=e.listingMode();return"error"===a?null:"en"===a?n(t):i(t)}function kC(e){return(!e.numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===CC(e.locale).numberingSystem)}class EC{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:a,...r}=n;if(!t||Object.keys(r).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=mC(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}{const t=this.floor?Math.floor(e):Pv(e,3);return Ov(t,this.padTo)}}}class IC{constructor(e,t,n){let i;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&lC.create(n).valid?(i=n,this.dt=e):(i="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const a={...this.opts};a.timeZone=a.timeZone||i,this.dtf=hC(t,a)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class OC{constructor(e,t,n){this.opts={style:"long",...n},!t&&wv()&&(this.rtf=fC(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):hw(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const MC={firstDay:1,minimalDays:4,weekend:[6,7]};class RC{static fromOpts(e){return RC.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,i,a=!1){const r=e||JC.defaultLocale,o=r||(a?"en-US":yC()),s=t||JC.defaultNumberingSystem,l=n||JC.defaultOutputCalendar,u=kv(i)||JC.defaultWeekSettings;return new RC(o,s,l,u,r)}static resetCache(){DC=null,cC.clear(),pC.clear(),gC.clear(),_C.clear(),vC.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:i}={}){return RC.create(e,t,n,i)}constructor(e,t,n,i,a){const[r,o,s]=AC(e);this.locale=r,this.numberingSystem=t||o||null,this.outputCalendar=n||s||null,this.weekSettings=i,this.intl=SC(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=kC(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?RC.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,kv(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return xC(this,e,Qv,()=>{const n="ja"===this.intl||this.intl.startsWith("ja-");t&=!n;const i=t?{month:e,day:"numeric"}:{month:e},a=t?"format":"standalone";if(!this.monthsCache[a][e]){const t=n?e=>this.dtFormatter(e,i).format():e=>this.extract(e,i,"month");this.monthsCache[a][e]=bC(t)}return this.monthsCache[a][e]})}weekdays(e,t=!1){return xC(this,e,nw,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=TC(e=>this.extract(e,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return xC(this,void 0,()=>iw,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[PS.utc(2016,11,13,9),PS.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return xC(this,e,sw,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[PS.utc(-40,1,1),PS.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,n){const i=this.dtFormatter(e,t),a=i.formatToParts(),r=a.find(e=>e.type.toLowerCase()===n);return r?r.value:null}numberFormatter(e={}){return new EC(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new IC(e,this.intl,t)}relFormatter(e={}){return new OC(this.intl,this.isEnglish(),e)}listFormatter(e={}){return dC(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||CC(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Av()?wC(this.locale):MC}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let VC=null;class PC extends J_{static get utcInstance(){return null===VC&&(VC=new PC(0)),VC}static instance(e){return 0===e?PC.utcInstance:new PC(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new PC(Lv(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${Yv(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${Yv(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Yv(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class HC extends J_{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function WC(e,t){if(Dv(e)||null===e)return t;if(e instanceof J_)return e;if(Cv(e)){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?tC.instance:"utc"===n||"gmt"===n?PC.utcInstance:PC.parseSpecifier(n)||lC.create(e)}return yv(e)?PC.instance(e):"object"===typeof e&&"offset"in e&&"function"===typeof e.offset?e:new HC(e)}const $C={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},BC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},GC=$C.hanidec.replace(/[\[|\]]/g,"").split("");function NC(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(-1!==e[n].search($C.hanidec))t+=GC.indexOf(e[n]);else for(const e in BC){const[n,a]=BC[e];i>=n&&i<=a&&(t+=i-n)}}return parseInt(t,10)}return t}const FC=new Map;function zC(){FC.clear()}function LC({numberingSystem:e},t=""){const n=e||"latn";let i=FC.get(n);void 0===i&&(i=new Map,FC.set(n,i));let a=i.get(t);return void 0===a&&(a=new RegExp(`${$C[n]}${t}`),i.set(t,a)),a}let UC,ZC=()=>Date.now(),YC="system",jC=null,XC=null,qC=null,KC=60,QC=null;class JC{static get now(){return ZC}static set now(e){ZC=e}static set defaultZone(e){YC=e}static get defaultZone(){return WC(YC,tC.instance)}static get defaultLocale(){return jC}static set defaultLocale(e){jC=e}static get defaultNumberingSystem(){return XC}static set defaultNumberingSystem(e){XC=e}static get defaultOutputCalendar(){return qC}static set defaultOutputCalendar(e){qC=e}static get defaultWeekSettings(){return QC}static set defaultWeekSettings(e){QC=kv(e)}static get twoDigitCutoffYear(){return KC}static set twoDigitCutoffYear(e){KC=e%100}static get throwOnInvalid(){return UC}static set throwOnInvalid(e){UC=e}static resetCaches(){RC.resetCache(),lC.resetCache(),PS.resetCache(),zC()}}class ev{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const tv=[0,31,59,90,120,151,181,212,243,273,304,334],nv=[0,31,60,91,121,152,182,213,244,274,305,335];function iv(e,t){return new ev("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function av(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const a=i.getUTCDay();return 0===a?7:a}function rv(e,t,n){return n+(Hv(e)?nv:tv)[t-1]}function ov(e,t){const n=Hv(e)?nv:tv,i=n.findIndex(e=>e<t),a=t-n[i];return{month:i+1,day:a}}function sv(e,t){return(e-t+7)%7+1}function lv(e,t=4,n=1){const{year:i,month:a,day:r}=e,o=rv(i,a,r),s=sv(av(i,a,r),n);let l,u=Math.floor((o-s+14-t)/7);return u<1?(l=i-1,u=Nv(l,t,n)):u>Nv(i,t,n)?(l=i+1,u=1):l=i,{weekYear:l,weekNumber:u,weekday:s,...jv(e)}}function uv(e,t=4,n=1){const{weekYear:i,weekNumber:a,weekday:r}=e,o=sv(av(i,1,t),n),s=Wv(i);let l,u=7*a+r-o-7+t;u<1?(l=i-1,u+=Wv(l)):u>s?(l=i+1,u-=Wv(i)):l=i;const{month:d,day:c}=ov(l,u);return{year:l,month:d,day:c,...jv(e)}}function dv(e){const{year:t,month:n,day:i}=e,a=rv(t,n,i);return{year:t,ordinal:a,...jv(e)}}function cv(e){const{year:t,ordinal:n}=e,{month:i,day:a}=ov(t,n);return{year:t,month:i,day:a,...jv(e)}}function hv(e,t){const n=!Dv(e.localWeekday)||!Dv(e.localWeekNumber)||!Dv(e.localWeekYear);if(n){const n=!Dv(e.weekday)||!Dv(e.weekNumber)||!Dv(e.weekYear);if(n)throw new S_("Cannot mix locale-based week fields with ISO-based week fields");return Dv(e.localWeekday)||(e.weekday=e.localWeekday),Dv(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Dv(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function pv(e,t=4,n=1){const i=_v(e.weekYear),a=Ev(e.weekNumber,1,Nv(e.weekYear,t,n)),r=Ev(e.weekday,1,7);return i?a?!r&&iv("weekday",e.weekday):iv("week",e.weekNumber):iv("weekYear",e.weekYear)}function mv(e){const t=_v(e.year),n=Ev(e.ordinal,1,Wv(e.year));return t?!n&&iv("ordinal",e.ordinal):iv("year",e.year)}function gv(e){const t=_v(e.year),n=Ev(e.month,1,12),i=Ev(e.day,1,$v(e.year,e.month));return t?n?!i&&iv("day",e.day):iv("month",e.month):iv("year",e.year)}function fv(e){const{hour:t,minute:n,second:i,millisecond:a}=e,r=Ev(t,0,23)||24===t&&0===n&&0===i&&0===a,o=Ev(n,0,59),s=Ev(i,0,59),l=Ev(a,0,999);return r?o?s?!l&&iv("millisecond",a):iv("second",i):iv("minute",n):iv("hour",t)}function Dv(e){return"undefined"===typeof e}function yv(e){return"number"===typeof e}function _v(e){return"number"===typeof e&&e%1===0}function Cv(e){return"string"===typeof e}function vv(e){return"[object Date]"===Object.prototype.toString.call(e)}function wv(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Av(){try{return"undefined"!==typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Sv(e){return Array.isArray(e)?e:[e]}function bv(e,t,n){if(0!==e.length)return e.reduce((e,i)=>{const a=[t(i),i];return e&&n(e[0],a[0])===e[0]?e:a},null)[1]}function Tv(e,t){return t.reduce((t,n)=>(t[n]=e[n],t),{})}function xv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kv(e){if(null==e)return null;if("object"!==typeof e)throw new T_("Week settings must be an object");if(!Ev(e.firstDay,1,7)||!Ev(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!Ev(e,1,7)))throw new T_("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ev(e,t,n){return _v(e)&&e>=t&&e<=n}function Iv(e,t){return e-t*Math.floor(e/t)}function Ov(e,t=2){const n=e<0;let i;return i=n?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),i}function Mv(e){return Dv(e)||null===e||""===e?void 0:parseInt(e,10)}function Rv(e){return Dv(e)||null===e||""===e?void 0:parseFloat(e)}function Vv(e){if(!Dv(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Pv(e,t,n="round"){const i=10**t;switch(n){case"expand":return e>0?Math.ceil(e*i)/i:Math.floor(e*i)/i;case"trunc":return Math.trunc(e*i)/i;case"round":return Math.round(e*i)/i;case"floor":return Math.floor(e*i)/i;case"ceil":return Math.ceil(e*i)/i;default:throw new RangeError(`Value rounding ${n} is out of range`)}}function Hv(e){return e%4===0&&(e%100!==0||e%400===0)}function Wv(e){return Hv(e)?366:365}function $v(e,t){const n=Iv(t-1,12)+1,i=e+(t-n)/12;return 2===n?Hv(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Bv(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Gv(e,t,n){const i=sv(av(e,1,t),n);return-i+t-1}function Nv(e,t=4,n=1){const i=Gv(e,t,n),a=Gv(e+1,t,n);return(Wv(e)-i+a)/7}function Fv(e){return e>99?e:e>JC.twoDigitCutoffYear?1900+e:2e3+e}function zv(e,t,n,i=null){const a=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:t,...r},s=new Intl.DateTimeFormat(n,o).formatToParts(a).find(e=>"timezonename"===e.type.toLowerCase());return s?s.value:null}function Lv(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,a=n<0||Object.is(n,-0)?-i:i;return 60*n+a}function Uv(e){const t=Number(e);if("boolean"===typeof e||""===e||!Number.isFinite(t))throw new T_(`Invalid unit value ${e}`);return t}function Zv(e,t){const n={};for(const i in e)if(xv(e,i)){const a=e[i];if(void 0===a||null===a)continue;n[t(i)]=Uv(a)}return n}function Yv(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),a=e>=0?"+":"-";switch(t){case"short":return`${a}${Ov(n,2)}:${Ov(i,2)}`;case"narrow":return`${a}${n}${i>0?`:${i}`:""}`;case"techie":return`${a}${Ov(n,2)}${Ov(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function jv(e){return Tv(e,["hour","minute","second","millisecond"])}const Xv=["January","February","March","April","May","June","July","August","September","October","November","December"],qv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Kv=["J","F","M","A","M","J","J","A","S","O","N","D"];function Qv(e){switch(e){case"narrow":return[...Kv];case"short":return[...qv];case"long":return[...Xv];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Jv=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ew=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],tw=["M","T","W","T","F","S","S"];function nw(e){switch(e){case"narrow":return[...tw];case"short":return[...ew];case"long":return[...Jv];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const iw=["AM","PM"],aw=["Before Christ","Anno Domini"],rw=["BC","AD"],ow=["B","A"];function sw(e){switch(e){case"narrow":return[...ow];case"short":return[...rw];case"long":return[...aw];default:return null}}function lw(e){return iw[e.hour<12?0:1]}function uw(e,t){return nw(t)[e.weekday-1]}function dw(e,t){return Qv(t)[e.month-1]}function cw(e,t){return sw(t)[e.year<0?0:1]}function hw(e,t,n="always",i=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&r){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${a[e][0]}`;case-1:return n?"yesterday":`last ${a[e][0]}`;case 0:return n?"today":`this ${a[e][0]}`}}const o=Object.is(t,-0)||t<0,s=Math.abs(t),l=1===s,u=a[e],d=i?l?u[1]:u[2]||u[1]:l?a[e][0]:e;return o?`${s} ${d} ago`:`in ${s} ${d}`}function pw(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const mw={D:O_,DD:M_,DDD:V_,DDDD:P_,t:H_,tt:W_,ttt:$_,tttt:B_,T:G_,TT:N_,TTT:F_,TTTT:z_,f:L_,ff:Z_,fff:X_,ffff:K_,F:U_,FF:Y_,FFF:q_,FFFF:Q_};class gw{static create(e,t={}){return new gw(e,t)}static parseFormat(e){let t=null,n="",i=!1;const a=[];for(let r=0;r<e.length;r++){const o=e.charAt(r);"'"===o?((n.length>0||i)&&a.push({literal:i||/^\s+$/.test(n),val:""===n?"'":n}),t=null,n="",i=!i):i||o===t?n+=o:(n.length>0&&a.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&a.push({literal:i||/^\s+$/.test(n),val:n}),a}static macroTokenToFormatOpts(e){return mw[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());const n=this.systemLoc.dtFormatter(e,{...this.opts,...t});return n.format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){const n=this.dtFormatter(e.start,t);return n.dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,n=void 0){if(this.opts.forceSimple)return Ov(e,t);const i={...this.opts};return t>0&&(i.padTo=t),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,a=(t,n)=>this.loc.extract(e,t,n),r=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=()=>n?lw(e):a({hour:"numeric",hourCycle:"h12"},"dayperiod"),s=(t,i)=>n?dw(e,t):a(i?{month:t}:{month:t,day:"numeric"},"month"),l=(t,i)=>n?uw(e,t):a(i?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),u=t=>{const n=gw.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},d=t=>n?cw(e,t):a({era:t},"era"),c=t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return i?a({day:"numeric"},"day"):this.num(e.day);case"dd":return i?a({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?a({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?a({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return i?a({month:"numeric"},"month"):this.num(e.month);case"MM":return i?a({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return i?a({year:"numeric"},"year"):this.num(e.year);case"yy":return i?a({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?a({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?a({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(t)}};return pw(gw.parseFormat(t),c)}formatDurationFromString(e,t){const n="negativeLargestOnly"===this.opts.signMode?-1:1,i=e=>{switch(e[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},a=(e,t)=>a=>{const r=i(a);if(r){const i=t.isNegativeDuration&&r!==t.largestUnit?n:1;let o;return o="negativeLargestOnly"===this.opts.signMode&&r!==t.largestUnit?"never":"all"===this.opts.signMode?"always":"auto",this.num(e.get(r)*i,a.length,o)}return a},r=gw.parseFormat(t),o=r.reduce((e,{literal:t,val:n})=>t?e:e.concat(n),[]),s=e.shiftTo(...o.map(i).filter(e=>e)),l={isNegativeDuration:s<0,largestUnit:Object.keys(s.values)[0]};return pw(r,a(s,l))}}const fw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Dw(...e){const t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function yw(...e){return t=>e.reduce(([e,n,i],a)=>{const[r,o,s]=a(t,i);return[{...e,...r},o||n,s]},[{},null,1]).slice(0,2)}function _w(e,...t){if(null==e)return[null,null];for(const[n,i]of t){const t=n.exec(e);if(t)return i(t)}return[null,null]}function Cw(...e){return(t,n)=>{const i={};let a;for(a=0;a<e.length;a++)i[e[a]]=Mv(t[n+a]);return[i,null,n+a]}}const vw=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,ww=`(?:${vw.source}?(?:\\[(${fw.source})\\])?)?`,Aw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Sw=RegExp(`${Aw.source}${ww}`),bw=RegExp(`(?:[Tt]${Sw.source})?`),Tw=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,xw=/(\d{4})-?W(\d\d)(?:-?(\d))?/,kw=/(\d{4})-?(\d{3})/,Ew=Cw("weekYear","weekNumber","weekDay"),Iw=Cw("year","ordinal"),Ow=/(\d{4})-(\d\d)-(\d\d)/,Mw=RegExp(`${Aw.source} ?(?:${vw.source}|(${fw.source}))?`),Rw=RegExp(`(?: ${Mw.source})?`);function Vw(e,t,n){const i=e[t];return Dv(i)?n:Mv(i)}function Pw(e,t){const n={year:Vw(e,t),month:Vw(e,t+1,1),day:Vw(e,t+2,1)};return[n,null,t+3]}function Hw(e,t){const n={hours:Vw(e,t,0),minutes:Vw(e,t+1,0),seconds:Vw(e,t+2,0),milliseconds:Vv(e[t+3])};return[n,null,t+4]}function Ww(e,t){const n=!e[t]&&!e[t+1],i=Lv(e[t+1],e[t+2]),a=n?null:PC.instance(i);return[{},a,t+3]}function $w(e,t){const n=e[t]?lC.create(e[t]):null;return[{},n,t+1]}const Bw=RegExp(`^T?${Aw.source}$`),Gw=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Nw(e){const[t,n,i,a,r,o,s,l,u]=e,d="-"===t[0],c=l&&"-"===l[0],h=(e,t=!1)=>void 0!==e&&(t||e&&d)?-e:e;return[{years:h(Rv(n)),months:h(Rv(i)),weeks:h(Rv(a)),days:h(Rv(r)),hours:h(Rv(o)),minutes:h(Rv(s)),seconds:h(Rv(l),"-0"===l),milliseconds:h(Vv(u),c)}]}const Fw={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function zw(e,t,n,i,a,r,o){const s={year:2===t.length?Fv(Mv(t)):Mv(t),month:qv.indexOf(n)+1,day:Mv(i),hour:Mv(a),minute:Mv(r)};return o&&(s.second=Mv(o)),e&&(s.weekday=e.length>3?Jv.indexOf(e)+1:ew.indexOf(e)+1),s}const Lw=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Uw(e){const[,t,n,i,a,r,o,s,l,u,d,c]=e,h=zw(t,a,i,n,r,o,s);let p;return p=l?Fw[l]:u?0:Lv(d,c),[h,new PC(p)]}function Zw(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Yw=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,jw=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Xw=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function qw(e){const[,t,n,i,a,r,o,s]=e,l=zw(t,a,i,n,r,o,s);return[l,PC.utcInstance]}function Kw(e){const[,t,n,i,a,r,o,s]=e,l=zw(t,s,n,i,a,r,o);return[l,PC.utcInstance]}const Qw=Dw(Tw,bw),Jw=Dw(xw,bw),eA=Dw(kw,bw),tA=Dw(Sw),nA=yw(Pw,Hw,Ww,$w),iA=yw(Ew,Hw,Ww,$w),aA=yw(Iw,Hw,Ww,$w),rA=yw(Hw,Ww,$w);function oA(e){return _w(e,[Qw,nA],[Jw,iA],[eA,aA],[tA,rA])}function sA(e){return _w(Zw(e),[Lw,Uw])}function lA(e){return _w(e,[Yw,qw],[jw,qw],[Xw,Kw])}function uA(e){return _w(e,[Gw,Nw])}const dA=yw(Hw);function cA(e){return _w(e,[Bw,dA])}const hA=Dw(Ow,Rw),pA=Dw(Mw),mA=yw(Hw,Ww,$w);function gA(e){return _w(e,[hA,nA],[pA,mA])}const fA="Invalid Duration",DA={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},yA={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...DA},_A=365.2425,CA=30.436875,vA={years:{quarters:4,months:12,weeks:_A/7,days:_A,hours:24*_A,minutes:24*_A*60,seconds:24*_A*60*60,milliseconds:24*_A*60*60*1e3},quarters:{months:3,weeks:_A/28,days:_A/4,hours:24*_A/4,minutes:24*_A*60/4,seconds:24*_A*60*60/4,milliseconds:24*_A*60*60*1e3/4},months:{weeks:CA/7,days:CA,hours:24*CA,minutes:24*CA*60,seconds:24*CA*60*60,milliseconds:24*CA*60*60*1e3},...DA},wA=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],AA=wA.slice(0).reverse();function SA(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new kA(i)}function bA(e,t){let n=t.milliseconds??0;for(const i of AA.slice(1))t[i]&&(n+=t[i]*e[i]["milliseconds"]);return n}function TA(e,t){const n=bA(e,t)<0?-1:1;wA.reduceRight((i,a)=>{if(Dv(t[a]))return i;if(i){const r=t[i]*n,o=e[a][i],s=Math.floor(r/o);t[a]+=s*n,t[i]-=s*o*n}return a},null),wA.reduce((n,i)=>{if(Dv(t[i]))return n;if(n){const a=t[n]%1;t[n]-=a,t[i]+=a*e[n][i]}return i},null)}function xA(e){const t={};for(const[n,i]of Object.entries(e))0!==i&&(t[n]=i);return t}class kA{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?vA:yA;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||RC.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return kA.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!==typeof e)throw new T_("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new kA({values:Zv(e,kA.normalizeUnit),loc:RC.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(yv(e))return kA.fromMillis(e);if(kA.isDuration(e))return e;if("object"===typeof e)return kA.fromObject(e);throw new T_(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=uA(e);return n?kA.fromObject(n,t):kA.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=cA(e);return n?kA.fromObject(n,t):kA.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new T_("need to specify a reason the Duration is invalid");const n=e instanceof ev?e:new ev(e,t);if(JC.throwOnInvalid)throw new A_(n);return new kA({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new b_(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?gw.create(this.loc,n).formatDurationFromString(this,e):fA}toHuman(e={}){if(!this.isValid)return fA;const t=!1!==e.showZeros,n=wA.map(n=>{const i=this.values[n];return Dv(i)||0===i&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(i)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Pv(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};const n=PS.fromMillis(t,{zone:"UTC"});return n.toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?bA(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=kA.fromDurationLike(e),n={};for(const i of wA)(xv(t.values,i)||xv(this.values,i))&&(n[i]=t.get(i)+this.get(i));return SA(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=kA.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=Uv(e(this.values[n],n));return SA(this,{values:t},!0)}get(e){return this[kA.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Zv(e,kA.normalizeUnit)};return SA(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){const a=this.loc.clone({locale:e,numberingSystem:t}),r={loc:a,matrix:i,conversionAccuracy:n};return SA(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return TA(this.matrix,e),SA(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=xA(this.normalize().shiftToAll().toObject());return SA(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map(e=>kA.normalizeUnit(e));const t={},n={},i=this.toObject();let a;for(const r of wA)if(e.indexOf(r)>=0){a=r;let e=0;for(const t in n)e+=this.matrix[t][r]*n[t],n[t]=0;yv(i[r])&&(e+=i[r]);const o=Math.trunc(e);t[r]=o,n[r]=(1e3*e-1e3*o)/1e3}else yv(i[r])&&(n[r]=i[r]);for(const r in n)0!==n[r]&&(t[a]+=r===a?n[r]:n[r]/this.matrix[a][r]);return TA(this.matrix,t),SA(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return SA(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=xA(this.values);return SA(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const n of wA)if(!t(this.values[n],e.values[n]))return!1;return!0}}const EA="Invalid Interval";function IA(e,t){return e&&e.isValid?t&&t.isValid?t<e?OA.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:OA.invalid("missing or invalid end"):OA.invalid("missing or invalid start")}class OA{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new T_("need to specify a reason the Interval is invalid");const n=e instanceof ev?e:new ev(e,t);if(JC.throwOnInvalid)throw new w_(n);return new OA({invalid:n})}static fromDateTimes(e,t){const n=HS(e),i=HS(t),a=IA(n,i);return null==a?new OA({start:n,end:i}):a}static after(e,t){const n=kA.fromDurationLike(t),i=HS(e);return OA.fromDateTimes(i,i.plus(n))}static before(e,t){const n=kA.fromDurationLike(t),i=HS(e);return OA.fromDateTimes(i.minus(n),i)}static fromISO(e,t){const[n,i]=(e||"").split("/",2);if(n&&i){let e,a,r,o;try{e=PS.fromISO(n,t),a=e.isValid}catch(i){a=!1}try{r=PS.fromISO(i,t),o=r.isValid}catch(i){o=!1}if(a&&o)return OA.fromDateTimes(e,r);if(a){const n=kA.fromISO(i,t);if(n.isValid)return OA.after(e,n)}else if(o){const e=kA.fromISO(n,t);if(e.isValid)return OA.before(r,e)}}return OA.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let i;return i=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,i=i.startOf(e,t),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?OA.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(HS).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),n=[];let{s:i}=this,a=0;while(i<this.e){const e=t[a]||this.e,r=+e>+this.e?this.e:e;n.push(OA.fromDateTimes(i,r)),i=r,a+=1}return n}splitBy(e){const t=kA.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:i}=this,a=1;const r=[];while(i<this.e){const e=this.start.plus(t.mapUnits(e=>e*a));n=+e>+this.e?this.e:e,r.push(OA.fromDateTimes(i,n)),i=n,a+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e===+e.s}abutsEnd(e){return!!this.isValid&&+e.e===+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:OA.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return OA.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const i=[],a=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]),r=Array.prototype.concat(...a),o=r.sort((e,t)=>e.time-t.time);for(const s of o)n+="s"===s.type?1:-1,1===n?t=s.time:(t&&+t!==+s.time&&i.push(OA.fromDateTimes(t,s.time)),t=null);return OA.merge(i)}difference(...e){return OA.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:EA}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=O_,t={}){return this.isValid?gw.create(this.s.loc.clone(t),e).formatInterval(this):EA}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:EA}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:EA}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:EA}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:EA}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):kA.invalid(this.invalidReason)}mapEndpoints(e){return OA.fromDateTimes(e(this.s),e(this.e))}}class MA{static hasDST(e=JC.defaultZone){const t=PS.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return lC.isValidZone(e)}static normalizeZone(e){return WC(e,JC.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||RC.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||RC.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||RC.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:a="gregory"}={}){return(i||RC.create(t,n,a)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:a="gregory"}={}){return(i||RC.create(t,n,a)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||RC.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||RC.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return RC.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return RC.create(t,null,"gregory").eras(e)}static features(){return{relative:wv(),localeWeek:Av()}}}function RA(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(kA.fromMillis(i).as("days"))}function VA(e,t,n){const i=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=RA(e,t);return(n-n%7)/7}],["days",RA]],a={},r=e;let o,s;for(const[l,u]of i)n.indexOf(l)>=0&&(o=l,a[l]=u(e,t),s=r.plus(a),s>t?(a[l]--,e=r.plus(a),e>t&&(s=e,a[l]--,e=r.plus(a))):e=s);return[e,a,s,o]}function PA(e,t,n,i){let[a,r,o,s]=VA(e,t,n);const l=t-a,u=n.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===u.length&&(o<t&&(o=a.plus({[s]:1})),o!==a&&(r[s]=(r[s]||0)+l/(o-a)));const d=kA.fromObject(r,i);return u.length>0?kA.fromMillis(l,i).shiftTo(...u).plus(d):d}const HA="missing Intl.DateTimeFormat.formatToParts support";function WA(e,t=e=>e){return{regex:e,deser:([e])=>t(NC(e))}}const $A=String.fromCharCode(160),BA=`[ ${$A}]`,GA=new RegExp(BA,"g");function NA(e){return e.replace(/\./g,"\\.?").replace(GA,BA)}function FA(e){return e.replace(/\./g,"").replace(GA," ").toLowerCase()}function zA(e,t){return null===e?null:{regex:RegExp(e.map(NA).join("|")),deser:([n])=>e.findIndex(e=>FA(n)===FA(e))+t}}function LA(e,t){return{regex:e,deser:([,e,t])=>Lv(e,t),groups:t}}function UA(e){return{regex:e,deser:([e])=>e}}function ZA(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function YA(e,t){const n=LC(t),i=LC(t,"{2}"),a=LC(t,"{3}"),r=LC(t,"{4}"),o=LC(t,"{6}"),s=LC(t,"{1,2}"),l=LC(t,"{1,3}"),u=LC(t,"{1,6}"),d=LC(t,"{1,9}"),c=LC(t,"{2,4}"),h=LC(t,"{4,6}"),p=e=>({regex:RegExp(ZA(e.val)),deser:([e])=>e,literal:!0}),m=m=>{if(e.literal)return p(m);switch(m.val){case"G":return zA(t.eras("short"),0);case"GG":return zA(t.eras("long"),0);case"y":return WA(u);case"yy":return WA(c,Fv);case"yyyy":return WA(r);case"yyyyy":return WA(h);case"yyyyyy":return WA(o);case"M":return WA(s);case"MM":return WA(i);case"MMM":return zA(t.months("short",!0),1);case"MMMM":return zA(t.months("long",!0),1);case"L":return WA(s);case"LL":return WA(i);case"LLL":return zA(t.months("short",!1),1);case"LLLL":return zA(t.months("long",!1),1);case"d":return WA(s);case"dd":return WA(i);case"o":return WA(l);case"ooo":return WA(a);case"HH":return WA(i);case"H":return WA(s);case"hh":return WA(i);case"h":return WA(s);case"mm":return WA(i);case"m":return WA(s);case"q":return WA(s);case"qq":return WA(i);case"s":return WA(s);case"ss":return WA(i);case"S":return WA(l);case"SSS":return WA(a);case"u":return UA(d);case"uu":return UA(s);case"uuu":return WA(n);case"a":return zA(t.meridiems(),0);case"kkkk":return WA(r);case"kk":return WA(c,Fv);case"W":return WA(s);case"WW":return WA(i);case"E":case"c":return WA(n);case"EEE":return zA(t.weekdays("short",!1),1);case"EEEE":return zA(t.weekdays("long",!1),1);case"ccc":return zA(t.weekdays("short",!0),1);case"cccc":return zA(t.weekdays("long",!0),1);case"Z":case"ZZ":return LA(new RegExp(`([+-]${s.source})(?::(${i.source}))?`),2);case"ZZZ":return LA(new RegExp(`([+-]${s.source})(${i.source})?`),2);case"z":return UA(/[a-z_+-/]{1,256}?/i);case" ":return UA(/[^\S\n\r]/);default:return p(m)}},g=m(e)||{invalidReason:HA};return g.token=e,g}const jA={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function XA(e,t,n){const{type:i,value:a}=e;if("literal"===i){const e=/^\s+$/.test(a);return{literal:!e,val:e?" ":a}}const r=t[i];let o=i;"hour"===i&&(o=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let s=jA[o];if("object"===typeof s&&(s=s[r]),s)return{literal:!1,val:s}}function qA(e){const t=e.map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"");return[`^${t}$`,e]}function KA(e,t,n){const i=e.match(t);if(i){const e={};let t=1;for(const a in n)if(xv(n,a)){const r=n[a],o=r.groups?r.groups+1:1;!r.literal&&r.token&&(e[r.token.val[0]]=r.deser(i.slice(t,t+o))),t+=o}return[i,e]}return[i,{}]}function QA(e){const t=e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n,i=null;Dv(e.z)||(i=lC.create(e.z)),Dv(e.Z)||(i||(i=new PC(e.Z)),n=e.Z),Dv(e.q)||(e.M=3*(e.q-1)+1),Dv(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Dv(e.u)||(e.S=Vv(e.u));const a=Object.keys(e).reduce((n,i)=>{const a=t(i);return a&&(n[a]=e[i]),n},{});return[a,i,n]}let JA=null;function eS(){return JA||(JA=PS.fromMillis(1555555555555)),JA}function tS(e,t){if(e.literal)return e;const n=gw.macroTokenToFormatOpts(e.val),i=oS(n,t);return null==i||i.includes(void 0)?e:i}function nS(e,t){return Array.prototype.concat(...e.map(e=>tS(e,t)))}class iS{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=nS(gw.parseFormat(t),e),this.units=this.tokens.map(t=>YA(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){const[e,t]=qA(this.units);this.regex=RegExp(e,"i"),this.handlers=t}}explainFromTokens(e){if(this.isValid){const[t,n]=KA(e,this.regex,this.handlers),[i,a,r]=n?QA(n):[null,null,void 0];if(xv(n,"a")&&xv(n,"H"))throw new S_("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:i,zone:a,specificOffset:r}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function aS(e,t,n){const i=new iS(e,n);return i.explainFromTokens(t)}function rS(e,t,n){const{result:i,zone:a,specificOffset:r,invalidReason:o}=aS(e,t,n);return[i,a,r,o]}function oS(e,t){if(!e)return null;const n=gw.create(t,e),i=n.dtFormatter(eS()),a=i.formatToParts(),r=i.resolvedOptions();return a.map(t=>XA(t,e,r))}const sS="Invalid DateTime",lS=864e13;function uS(e){return new ev("unsupported zone",`the zone "${e.name}" is not supported`)}function dS(e){return null===e.weekData&&(e.weekData=lv(e.c)),e.weekData}function cS(e){return null===e.localWeekData&&(e.localWeekData=lv(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function hS(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new PS({...n,...t,old:n})}function pS(e,t,n){let i=e-60*t*1e3;const a=n.offset(i);if(t===a)return[i,t];i-=60*(a-t)*1e3;const r=n.offset(i);return a===r?[i,a]:[e-60*Math.min(a,r)*1e3,Math.max(a,r)]}function mS(e,t){e+=60*t*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function gS(e,t,n){return pS(Bv(e),t,n)}function fS(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),r={...e.c,year:i,month:a,day:Math.min(e.c.day,$v(i,a))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=kA.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),s=Bv(r);let[l,u]=pS(s,n,e.zone);return 0!==o&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function DS(e,t,n,i,a,r){const{setZone:o,zone:s}=n;if(e&&0!==Object.keys(e).length||t){const i=t||s,a=PS.fromObject(e,{...n,zone:i,specificOffset:r});return o?a:a.setZone(s)}return PS.invalid(new ev("unparsable",`the input "${a}" can't be parsed as ${i}`))}function yS(e,t,n=!0){return e.isValid?gw.create(RC.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function _S(e,t,n){const i=e.c.year>9999||e.c.year<0;let a="";if(i&&e.c.year>=0&&(a+="+"),a+=Ov(e.c.year,i?6:4),"year"===n)return a;if(t){if(a+="-",a+=Ov(e.c.month),"month"===n)return a;a+="-"}else if(a+=Ov(e.c.month),"month"===n)return a;return a+=Ov(e.c.day),a}function CS(e,t,n,i,a,r,o){let s=!n||0!==e.c.millisecond||0!==e.c.second,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=Ov(e.c.hour),"hour"===o)break;if(t){if(l+=":",l+=Ov(e.c.minute),"minute"===o)break;s&&(l+=":",l+=Ov(e.c.second))}else{if(l+=Ov(e.c.minute),"minute"===o)break;s&&(l+=Ov(e.c.second))}if("second"===o)break;!s||i&&0===e.c.millisecond||(l+=".",l+=Ov(e.c.millisecond,3))}return a&&(e.isOffsetFixed&&0===e.offset&&!r?l+="Z":e.o<0?(l+="-",l+=Ov(Math.trunc(-e.o/60)),l+=":",l+=Ov(Math.trunc(-e.o%60))):(l+="+",l+=Ov(Math.trunc(e.o/60)),l+=":",l+=Ov(Math.trunc(e.o%60)))),r&&(l+="["+e.zone.ianaName+"]"),l}const vS={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},wS={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},AS={ordinal:1,hour:0,minute:0,second:0,millisecond:0},SS=["year","month","day","hour","minute","second","millisecond"],bS=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],TS=["year","ordinal","hour","minute","second","millisecond"];function xS(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new b_(e);return t}function kS(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return xS(e)}}function ES(e){if(void 0===RS&&(RS=JC.now()),"iana"!==e.type)return e.offset(RS);const t=e.name;let n=VS.get(t);return void 0===n&&(n=e.offset(RS),VS.set(t,n)),n}function IS(e,t){const n=WC(t.zone,JC.defaultZone);if(!n.isValid)return PS.invalid(uS(n));const i=RC.fromObject(t);let a,r;if(Dv(e.year))a=JC.now();else{for(const n of SS)Dv(e[n])&&(e[n]=vS[n]);const t=gv(e)||fv(e);if(t)return PS.invalid(t);const i=ES(n);[a,r]=gS(e,i,n)}return new PS({ts:a,zone:n,loc:i,o:r})}function OS(e,t,n){const i=!!Dv(n.round)||n.round,a=Dv(n.rounding)?"trunc":n.rounding,r=(e,r)=>{e=Pv(e,i||n.calendary?0:2,n.calendary?"round":a);const o=t.loc.clone(n).relFormatter(n);return o.format(e,r)},o=i=>n.calendary?t.hasSame(e,i)?0:t.startOf(i).diff(e.startOf(i),i).get(i):t.diff(e,i).get(i);if(n.unit)return r(o(n.unit),n.unit);for(const s of n.units){const e=o(s);if(Math.abs(e)>=1)return r(e,s)}return r(e>t?-0:0,n.units[n.units.length-1])}function MS(e){let t,n={};return e.length>0&&"object"===typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let RS;const VS=new Map;class PS{constructor(e){const t=e.zone||JC.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ev("invalid input"):null)||(t.isValid?null:uS(t));this.ts=Dv(e.ts)?JC.now():e.ts;let i=null,a=null;if(!n){const r=e.old&&e.old.ts===this.ts&&e.old.zone.equals(t);if(r)[i,a]=[e.old.c,e.old.o];else{const r=yv(e.o)&&!e.old?e.o:t.offset(this.ts);i=mS(this.ts,r),n=Number.isNaN(i.year)?new ev("invalid input"):null,i=n?null:i,a=n?null:r}}this._zone=t,this.loc=e.loc||RC.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=a,this.isLuxonDateTime=!0}static now(){return new PS({})}static local(){const[e,t]=MS(arguments),[n,i,a,r,o,s,l]=t;return IS({year:n,month:i,day:a,hour:r,minute:o,second:s,millisecond:l},e)}static utc(){const[e,t]=MS(arguments),[n,i,a,r,o,s,l]=t;return e.zone=PC.utcInstance,IS({year:n,month:i,day:a,hour:r,minute:o,second:s,millisecond:l},e)}static fromJSDate(e,t={}){const n=vv(e)?e.valueOf():NaN;if(Number.isNaN(n))return PS.invalid("invalid input");const i=WC(t.zone,JC.defaultZone);return i.isValid?new PS({ts:n,zone:i,loc:RC.fromObject(t)}):PS.invalid(uS(i))}static fromMillis(e,t={}){if(yv(e))return e<-lS||e>lS?PS.invalid("Timestamp out of range"):new PS({ts:e,zone:WC(t.zone,JC.defaultZone),loc:RC.fromObject(t)});throw new T_(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(yv(e))return new PS({ts:1e3*e,zone:WC(t.zone,JC.defaultZone),loc:RC.fromObject(t)});throw new T_("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=WC(t.zone,JC.defaultZone);if(!n.isValid)return PS.invalid(uS(n));const i=RC.fromObject(t),a=Zv(e,kS),{minDaysInFirstWeek:r,startOfWeek:o}=hv(a,i),s=JC.now(),l=Dv(t.specificOffset)?n.offset(s):t.specificOffset,u=!Dv(a.ordinal),d=!Dv(a.year),c=!Dv(a.month)||!Dv(a.day),h=d||c,p=a.weekYear||a.weekNumber;if((h||u)&&p)throw new S_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&u)throw new S_("Can't mix ordinal dates with month/day");const m=p||a.weekday&&!h;let g,f,D=mS(s,l);m?(g=bS,f=wS,D=lv(D,r,o)):u?(g=TS,f=AS,D=dv(D)):(g=SS,f=vS);let y=!1;for(const b of g){const e=a[b];Dv(e)?a[b]=y?f[b]:D[b]:y=!0}const _=m?pv(a,r,o):u?mv(a):gv(a),C=_||fv(a);if(C)return PS.invalid(C);const v=m?uv(a,r,o):u?cv(a):a,[w,A]=gS(v,l,n),S=new PS({ts:w,zone:n,o:A,loc:i});return a.weekday&&h&&e.weekday!==S.weekday?PS.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${S.toISO()}`):S.isValid?S:PS.invalid(S.invalid)}static fromISO(e,t={}){const[n,i]=oA(e);return DS(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,i]=sA(e);return DS(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,i]=lA(e);return DS(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(Dv(e)||Dv(t))throw new T_("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:a=null}=n,r=RC.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0}),[o,s,l,u]=rS(r,e,t);return u?PS.invalid(u):DS(o,s,n,`format ${t}`,e,l)}static fromString(e,t,n={}){return PS.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,i]=gA(e);return DS(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new T_("need to specify a reason the DateTime is invalid");const n=e instanceof ev?e:new ev(e,t);if(JC.throwOnInvalid)throw new v_(n);return new PS({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=oS(e,RC.fromObject(t));return n?n.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){const n=nS(gw.parseFormat(e),RC.fromObject(t));return n.map(e=>e.val).join("")}static resetCache(){RS=void 0,VS.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?dS(this).weekYear:NaN}get weekNumber(){return this.isValid?dS(this).weekNumber:NaN}get weekday(){return this.isValid?dS(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?cS(this).weekday:NaN}get localWeekNumber(){return this.isValid?cS(this).weekNumber:NaN}get localWeekYear(){return this.isValid?cS(this).weekYear:NaN}get ordinal(){return this.isValid?dv(this.c).ordinal:NaN}get monthShort(){return this.isValid?MA.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?MA.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?MA.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?MA.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Bv(this.c),i=this.zone.offset(n-e),a=this.zone.offset(n+e),r=this.zone.offset(n-i*t),o=this.zone.offset(n-a*t);if(r===o)return[this];const s=n-r*t,l=n-o*t,u=mS(s,r),d=mS(l,o);return u.hour===d.hour&&u.minute===d.minute&&u.second===d.second&&u.millisecond===d.millisecond?[hS(this,{ts:s}),hS(this,{ts:l})]:[this]}get isInLeapYear(){return Hv(this.year)}get daysInMonth(){return $v(this.year,this.month)}get daysInYear(){return this.isValid?Wv(this.year):NaN}get weeksInWeekYear(){return this.isValid?Nv(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Nv(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:i}=gw.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(PC.instance(e),t)}toLocal(){return this.setZone(JC.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=WC(e,JC.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[i]=gS(n,t,e)}return hS(this,{ts:i,zone:e})}return PS.invalid(uS(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return hS(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Zv(e,kS),{minDaysInFirstWeek:n,startOfWeek:i}=hv(t,this.loc),a=!Dv(t.weekYear)||!Dv(t.weekNumber)||!Dv(t.weekday),r=!Dv(t.ordinal),o=!Dv(t.year),s=!Dv(t.month)||!Dv(t.day),l=o||s,u=t.weekYear||t.weekNumber;if((l||r)&&u)throw new S_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&r)throw new S_("Can't mix ordinal dates with month/day");let d;a?d=uv({...lv(this.c,n,i),...t},n,i):Dv(t.ordinal)?(d={...this.toObject(),...t},Dv(t.day)&&(d.day=Math.min($v(d.year,d.month),d.day))):d=cv({...dv(this.c),...t});const[c,h]=gS(d,this.o,this.zone);return hS(this,{ts:c,o:h})}plus(e){if(!this.isValid)return this;const t=kA.fromDurationLike(e);return hS(this,fS(this,t))}minus(e){if(!this.isValid)return this;const t=kA.fromDurationLike(e).negate();return hS(this,fS(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},i=kA.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if("weeks"===i)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===i){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?gw.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):sS}toLocaleString(e=O_,t={}){return this.isValid?gw.create(this.loc.clone(t),e).formatDateTime(this):sS}toLocaleParts(e={}){return this.isValid?gw.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:a=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;r=xS(r);const o="extended"===e;let s=_S(this,o,r);return SS.indexOf(r)>=3&&(s+="T"),s+=CS(this,o,t,n,i,a,r),s}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?_S(this,"extended"===e,xS(t)):null}toISOWeekDate(){return yS(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:a=!1,format:r="extended",precision:o="milliseconds"}={}){if(!this.isValid)return null;o=xS(o);let s=i&&SS.indexOf(o)>=3?"T":"";return s+CS(this,"extended"===r,t,e,n,a,o)}toRFC2822(){return yS(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yS(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?_S(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),yS(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():sS}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return kA.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},a=Sv(t).map(kA.normalizeUnit),r=e.valueOf()>this.valueOf(),o=r?this:e,s=r?e:this,l=PA(o,s,a,i);return r?l.negate():l}diffNow(e="milliseconds",t={}){return this.diff(PS.now(),e,t)}until(e){return this.isValid?OA.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const i=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(t,n)<=i&&i<=a.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||PS.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],a=e.unit;return Array.isArray(e.unit)&&(i=e.unit,a=void 0),OS(t,this.plus(n),{...e,numeric:"always",units:i,unit:a})}toRelativeCalendar(e={}){return this.isValid?OS(e.base||PS.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(PS.isDateTime))throw new T_("min requires all arguments be DateTimes");return bv(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(PS.isDateTime))throw new T_("max requires all arguments be DateTimes");return bv(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:i=null,numberingSystem:a=null}=n,r=RC.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});return aS(r,e,t)}static fromStringExplain(e,t,n={}){return PS.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:i=null}=t,a=RC.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new iS(a,e)}static fromFormatParser(e,t,n={}){if(Dv(e)||Dv(t))throw new T_("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:a=null}=n,r=RC.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});if(!r.equals(t.locale))throw new T_(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:o,zone:s,specificOffset:l,invalidReason:u}=t.explainFromTokens(e);return u?PS.invalid(u):DS(o,s,n,`format ${t.format}`,e,l)}static get DATE_SHORT(){return O_}static get DATE_MED(){return M_}static get DATE_MED_WITH_WEEKDAY(){return R_}static get DATE_FULL(){return V_}static get DATE_HUGE(){return P_}static get TIME_SIMPLE(){return H_}static get TIME_WITH_SECONDS(){return W_}static get TIME_WITH_SHORT_OFFSET(){return $_}static get TIME_WITH_LONG_OFFSET(){return B_}static get TIME_24_SIMPLE(){return G_}static get TIME_24_WITH_SECONDS(){return N_}static get TIME_24_WITH_SHORT_OFFSET(){return F_}static get TIME_24_WITH_LONG_OFFSET(){return z_}static get DATETIME_SHORT(){return L_}static get DATETIME_SHORT_WITH_SECONDS(){return U_}static get DATETIME_MED(){return Z_}static get DATETIME_MED_WITH_SECONDS(){return Y_}static get DATETIME_MED_WITH_WEEKDAY(){return j_}static get DATETIME_FULL(){return X_}static get DATETIME_FULL_WITH_SECONDS(){return q_}static get DATETIME_HUGE(){return K_}static get DATETIME_HUGE_WITH_SECONDS(){return Q_}}function HS(e){if(PS.isDateTime(e))return e;if(e&&e.valueOf&&yv(e.valueOf()))return PS.fromJSDate(e);if(e&&"object"===typeof e)return PS.fromObject(e);throw new T_(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const WS={class:"agenda-list-item"},$S={class:"time"},BS={class:"start"},GS={class:"duration"},NS={class:"description"},FS={class:"description-title"},zS={class:"description-resource"};var LS=(0,i.pM)({__name:"agenda-list-item",props:{appointment:{},resources:{default:()=>[]}},setup(e){const t=e,n=(0,i.EW)(()=>t.appointment.startDate.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric",hour12:!1})),a=(0,i.EW)(()=>{const{startDate:e,endDate:n}=t.appointment;return kA.fromMillis(n-e).rescale().toFormat("h'h' m'm'")});return(t,r)=>((0,i.uX)(),(0,i.CE)("div",WS,[(0,i.Lk)("div",$S,[(0,i.Lk)("div",BS,(0,Hy.v_)(n.value),1),(0,i.Lk)("div",GS,(0,Hy.v_)(a.value),1)]),(0,i.Lk)("div",NS,[(0,i.Lk)("div",FS,(0,Hy.v_)(e.appointment.text),1),(0,i.Lk)("div",zS,(0,Hy.v_)(e.resources[e.appointment.calendarId]?.text),1)])]))}});const US=(0,Fy.A)(LS,[["__scopeId","data-v-4b271126"]]);var ZS=US;const YS={class:"agenda-item"};var jS=(0,i.pM)({__name:"agenda-list",props:{items:{default:()=>[]},resources:{default:()=>[]}},emits:["clickAppointment"],setup(e,{emit:t}){const n=t;function r({itemData:e,element:t}){n("clickAppointment",{itemData:e,element:t})}return(t,n)=>((0,i.uX)(),(0,i.Wv)((0,a.R1)(Uy.T$),{"data-source":e.items,onItemClick:r},{item:(0,i.k6)(({data:t})=>[(0,i.Lk)("div",YS,[(0,i.bF)(ZS,{appointment:t,resources:e.resources},null,8,["appointment","resources"])])]),_:1},8,["data-source"]))}});const XS=(0,Fy.A)(jS,[["__scopeId","data-v-5dfb635b"]]);var qS=XS;const KS={class:"planning-scheduler"},QS={class:"view-wrapper"},JS={class:"panels"},eb={class:"left-side-panel-content"},tb={class:"buttons"},nb={class:"calendar"},ib={class:"scheduler-container"};var ab=(0,i.pM)({__name:"planning-scheduler",setup(e){const t=(0,a.KR)(),n=(0,a.KR)(),o=(0,a.KR)(new Date),s=(0,a.KR)("workWeek"),l=(0,a.KR)(!1),d=(0,a.KR)(null),c=(0,a.KR)([]),h=(0,a.KR)(new Date),p=__.Qp.reduce((e,t)=>e.concat(t.items),[]),m=(0,a.KR)(null),g=(0,a.KR)(!1),f=(0,i.EW)(()=>{if(Py.du.value.isSmall)return"bottom";const e=m.value?.target,t=e?.[0]?.classList||e?.classList;return t?.contains("dx-list")&&g?"left":"top"});function D(e){l.value=e||!l.value}function y(e){if(!d.value)return[];const t=d.value.items();return 0!==t.length&&e?t.filter(t=>t.startDate.getDate()===e.startDate.getDate()&&t.startDate.getMonth()===e.startDate.getMonth()):[]}function _(e){c.value=y(e)}function C({value:e}){o.value=e,_({startDate:o.value})}function v(e){t.value?.instance.showAppointmentPopup(e?.data,!e)}function w(e){const t=e instanceof Date?e:new Date;o.value=t,m.value={data:{startDate:t},target:void 0},_({startDate:t})}function A(e){const t=e.flatMap(e=>[["calendarId","=",e.id],"or"]).slice(0,-1);d.value?.filter(t.length>0?t:null),d.value?.load(),_({startDate:o.value})}function S(e){const t=e.form.getEditor("calendarId");void 0===e.appointmentData.calendarId&&t.option("value",0)}function b(e){e.appointmentData.startDate.toDateString()===m.value?.data.startDate.toDateString()&&_(e.appointmentData)}function T(e){s.value=e,"month"!==s.value||Py.du.value.isSmall?"month"!==e&&Py.du.value.isLarge&&(l.value=!1):(l.value=!0,_({startDate:o.value}))}function x({name:e,value:t}){"currentView"===e&&T(t)}function k(e){const{appointmentData:t}=e;m.value={data:t,target:e.targetElement},"month"===s.value&&(_(t),D(!0))}function E(e){e.cancel=!0;const{appointmentData:t}=e.appointments[0],i=({targetElement:e})=>e?.[0]?.classList.contains("dx-scheduler-appointment-collector");m.value={data:t,target:e.targetElement},("month"===s.value||i(e))&&_(t),"month"===s.value&&Py.du.value.isSmall||i(e)?D(!0):n.value?.instance.show()}function I({cellData:e}){if(w(e.startDate),"month"===s.value&&e){const t=y(e);t.length>1&&(m.value={data:e,target:void 0},c.value=t,D(!0))}}function O(e){t.value?.instance.showAppointmentTooltip(e.itemData,e.element)}function M(){v(m.value),n.value?.instance.hide()}function R(e){t.value?.instance.deleteAppointment(m.value?.data),n.value?.instance.hide(),c.value=y(e)}return(0,i.nT)(()=>{const e=[d.value,s.value,h.value,l.value];e.length&&setTimeout(()=>t.value?.instance?.repaint())}),(0,i.nT)(()=>{const e=t?.value?.instance,n=e?.getStartViewDate(),i=e?.getEndViewDate();(h.value?.getMonth()!==o.value?.getMonth()||n&&n>o.value||i&&i<o.value)&&(h.value=o.value)}),(0,__.v0)().then(e=>{d.value=new zd.A(e)}),(e,g)=>((0,i.uX)(),(0,i.CE)("div",KS,[(0,i.Lk)("div",QS,[(0,i.Lk)("div",JS,[(0,i.bF)(Ly,{class:"left-side-panel"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",eb,[(0,i.Lk)("div",tb,[(0,i.bF)((0,a.R1)(r.x),{text:"Today",onClick:w}),(0,i.bF)((0,a.R1)(r.x),{text:"Create event",type:"default",onClick:g[0]||(g[0]=()=>v())})]),(0,i.Lk)("div",nb,[(0,i.bF)((0,a.R1)(u),{value:o.value,onValueChanged:C},null,8,["value"])]),(0,i.bF)(e_,{"data-source":(0,a.R1)(__.Qp),onListSelectionChanged:A},null,8,["data-source"])])]),_:1}),(0,i.Lk)("div",ib,[(0,i.bF)((0,a.R1)(hD),{ref_key:"schedulerRef",ref:t,height:"inherit","adaptivity-enabled":!!(0,a.R1)(Py.du).isXSmall,"all-day-panel-mode":"hidden","data-source":d.value,"current-view":s.value,"current-date":h.value,"start-day-hour":4,"show-current-time-indicator":!1,onOptionChanged:x,onAppointmentClick:k,onAppointmentAdded:b,onAppointmentDeleted:b,onAppointmentTooltipShowing:E,onAppointmentFormOpening:S,onCellClick:I},{default:(0,i.k6)(()=>[(0,i.bF)((0,a.R1)(SD),{"field-expr":"calendarId",label:"Calendar","data-source":(0,a.R1)(p)},null,8,["data-source"]),(0,i.bF)((0,a.R1)(MD),{type:"day"}),(0,i.bF)((0,a.R1)(MD),{type:"workWeek"}),(0,i.bF)((0,a.R1)(MD),{type:"month"}),(0,i.bF)((0,a.R1)(MD),{type:"agenda"})]),_:1},8,["adaptivity-enabled","data-source","current-view","current-date"]),(0,i.bF)((0,a.R1)(VD),{ref_key:"tooltipRef",ref:n,"show-event":"click",target:m.value?.target,position:f.value},{default:(0,i.k6)(()=>[(0,i.bF)(u_,{"selected-appointment-data":m.value?.data,onClickEditAppointment:M,onClickDeleteAppointment:R},null,8,["selected-appointment-data"])]),_:1},8,["target","position"]),(0,i.bF)((0,a.R1)(Ry),{icon:"add",visible:(0,a.R1)(Py.du).isXSmall,onClick:g[1]||(g[1]=()=>v())},null,8,["visible"])]),(0,i.bF)(y_,{class:"right-side-panel","is-opened":l.value,"show-open-button":"month"===s.value,title:(0,a.R1)(Vy.Yq)(c.value[0]?.startDate||o.value,"EE, MMMM d"),onOpenedChange:g[2]||(g[2]=e=>D(e))},{default:(0,i.k6)(()=>[(0,i.bF)(qS,{items:c.value,resources:(0,a.R1)(p),onClickAppointment:O},null,8,["items","resources"])]),_:1},8,["is-opened","show-open-button","title"])])])]))}});const rb=(0,Fy.A)(ab,[["__scopeId","data-v-92ff7344"]]);var ob=rb},55501:function(e,t,n){n.d(t,{lJ:function(){return k},Ie:function(){return T}});n(82438),n(99819),n(50020);var i=n(82950),a=n(61928),r=n(82454),o=n(68803),s=n(39904),l=n(90218),u=n(47759),d=n(85563),c=n(39889),h=n(66703),p=n(1767),m=n(50172),g=n(60177),f=n(27996),D=n(68951),y=n(93821),_=n(5548),C=n(53342);const v=(0,f.zk)(),w={h:10,v:0},A={text:r.A.format("OK"),onClick:()=>!0},S=()=>(0,D.Ft)((0,D.ss)())?{stylingMode:"contained",type:"default"}:{},b=()=>(0,D.Ft)((0,D.ss)())?{stylingMode:"outlined",type:"default"}:{},T=e=>{const{buttons:t,dragEnabled:n,message:r,messageHtml:f,popupOptions:D,showCloseButton:S,showTitle:b,title:T="",width:x,position:k}=e??{},E=(0,m.O9)(r);E&&y.A.log("W1013");const I=(0,m.O9)(f),O=String(I?f:r),M=T?null:(new u.A).toString(),R=(0,h.cY)(),V=(0,d.A)("<div>").addClass("dx-dialog").appendTo((0,g.Uq)()),P=(0,d.A)("<div>").addClass("dx-dialog-message").html(O).attr("id",M);let H=null;const W=e=>{var t;R.resolve(e),null===(t=H)||void 0===t||t.hide()},$=t??[A],B=$.map(e=>{const{onClick:t}=e,n=new o.A(t,{context:H}),a={toolbar:"bottom",location:l.A.current().android?"after":"center",widget:"dxButton",options:(0,i.A)({},e,{onClick:e=>{const t=n.execute(e);W(t)}})};return a}),G=k??{boundaryOffset:(0,i.A)({},w)},N={animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},container:V,dragAndResizeArea:v,dragEnabled:(0,c.YD)(n,!0),height:"auto",ignoreChildEvents:!1,onContentReady:e=>{const t=e.component;t.$content().addClass("dx-dialog-content").append(P),M&&t.$overlayContent().attr("aria-labelledby",M)},onHiding:()=>{R.reject()},onShowing:e=>{const t=e.component,n=t.bottomToolbar();null===n||void 0===n||n.addClass("dx-dialog-buttons").find(".dx-button").addClass("dx-dialog-button"),_.Ay.resetActiveElement()},onShown:e=>{const t=e.component,n=t.bottomToolbar(),i=null===n||void 0===n?void 0:n.find(".dx-button").first();a.A.trigger(i,"focus")},position:G,rtlEnabled:(0,s.A)().rtlEnabled,showCloseButton:S??!1,showTitle:(0,c.YD)(b,!0),title:T,toolbarItems:B,visualContainer:v,width:x},F=(0,i.A)({},N,D,{onHidden:e=>{var t;(0,d.A)(e.element).remove(),null===D||void 0===D||null===(t=D.onHidden)||void 0===t||t.call(D,e)}});H=new C.Ay(V,F),H.$wrapper().addClass("dx-dialog-wrapper").addClass("dx-dialog-root");const z={show:()=>{var e;if("phone"===l.A.real().deviceType){var t;const e=(0,p.Oq)(v)>(0,p.RG)(v),n=e?"90%":"60%";null===(t=H)||void 0===t||t.option({width:n})}return null===(e=H)||void 0===e||e.show(),R.promise()},hide:W};return z},x=e=>(0,m.Qd)(e),k=(e,t,n)=>{const a=t??"",o=x(e)?e:{title:a,messageHtml:e,showTitle:n,buttons:[(0,i.A)({text:r.A.format("Yes"),onClick:()=>!0},S()),(0,i.A)({text:r.A.format("No"),onClick:()=>!1},b())],dragEnabled:n};return T(o).show()}},55509:function(e,t,n){n.d(t,{N:function(){return o},f:function(){return r}});var i=n(74567),a=n(85563);const r=function(e,t,n){const i=(0,a.A)(e),r=n?i.scrollLeft():i.scrollTop(),o=n?"Width":"Height",s=i.prop(`scroll${o}`),l=i.prop(`client${o}`),u=s-l-r|0;if(0===r&&0===u)return!1;const d=0===r&&t>=0,c=0===u&&t<=0,h=r>0&&u>0;return!!(d||c||h)||void 0},o=function(e,t){const n=(0,a.A)(e);return{validate(o){if((0,i.X1)(o)&&(s=o.target,!t||(0,a.A)(s).is(e)))return!!r(n,-o.delta,o.shiftKey)&&(o._needSkipEvent=!0,!0);var s}}}},57064:function(e,t,n){var i=n(68554);t.A=i.A},65200:function(e,t,n){var i=n(79117),a=n(92860),r=n(64466).f,o=n(9304).f,s=i.Symbol;if(a("asyncDispose"),s){var l=o(s,"asyncDispose");l.enumerable&&l.configurable&&l.writable&&r(s,"asyncDispose",{value:l.value,enumerable:!1,configurable:!1,writable:!1})}},66295:function(e,t,n){var i=n(39944),a=n(97509),r=n(12913),o=n(74418),s=n(4282),l=n(52037).IteratorPrototype,u=s("dispose");o(l,u)||a(l,u,function(){var e=r(this,"return");e&&i(e,this)})},75382:function(e,t,n){var i=n(88088),a=n(87308),r=n(14582),o=Error.captureStackTrace;e.exports=function(e,t,n,s){r&&(o?o(e,t):i(e,"stack",a(n,s)))}},82617:function(e,t,n){var i=n(5613),a=n(79117),r=n(4578),o=n(91786),s=n(5054),l=n(98657),u=n(77065),d=n(88088),c=n(39123),h=n(75382),p=n(69866),m=n(4282),g=n(5234),f=n(1942),D=a.SuppressedError,y=m("toStringTag"),_=Error,C=!!D&&3!==D.length,v=!!D&&g(function(){return 4===new D(1,2,3,{cause:4}).cause}),w=C||v,A=function(e,t,n){var i,a=r(S,this);return s?i=!w||a&&o(this)!==S?s(new _,a?o(this):S):new D:(i=a?this:u(S),d(i,y,"Error")),void 0!==n&&d(i,"message",p(n)),h(i,A,i.stack,1),d(i,"error",e),d(i,"suppressed",t),i};s?s(A,_):l(A,_,{name:!0});var S=A.prototype=w?D.prototype:u(_.prototype,{constructor:c(1,A),message:c(1,""),name:c(1,"SuppressedError")});w&&!f&&(S.constructor=A),i({global:!0,constructor:!0,arity:3,forced:w},{SuppressedError:A})},90346:function(e,t,n){var i=n(4282);t.f=i},91020:function(e,t,n){var i=n(5613),a=n(39944),r=n(44977),o=n(3770),s=n(96002),l=n(41829),u=n(32331),d=n(88500),c=n(1942),h=n(59475),p=n(20850),m=!c&&!h("flatMap",function(){}),g=!c&&!m&&p("flatMap",TypeError),f=c||m||g,D=u(function(){var e,t,n=this.iterator,i=this.mapper;while(1){if(t=this.inner)try{if(e=o(a(t.next,t.iterator)),!e.done)return e.value;this.inner=null}catch(r){d(n,"throw",r)}if(e=o(a(this.next,n)),this.done=!!e.done)return;try{this.inner=l(i(e.value,this.counter++),!1)}catch(r){d(n,"throw",r)}}});i({target:"Iterator",proto:!0,real:!0,forced:f},{flatMap:function(e){o(this);try{r(e)}catch(t){d(this,"throw",t)}return g?a(g,this,e):new D(s(this),{mapper:e,inner:null})}})},92860:function(e,t,n){var i=n(49120),a=n(74418),r=n(90346),o=n(64466).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});a(t,e)||o(t,e,{value:r.f(e)})}},93251:function(e,t,n){var i=n(11697);t.A=i.A}}]);