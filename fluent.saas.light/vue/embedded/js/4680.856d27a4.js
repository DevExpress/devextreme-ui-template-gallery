"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[4680],{48:function(e,t,i){i.d(t,{Ay:function(){return H}});var a=i(82950),n=i(66529),s=i(90218),o=i(92324),r=i(35754),l=i(85563),d=i(64743),h=i(99455),u=i(50172),p=i(68951),c=i(89651),_=(i(82438),i(2989),i(12266),i(99819),i(57327),i(22044)),m=i(86498),g=i(42576),v=i(82454),f=i(39889),C=i(66703),y=i(58936),b=i(1767),x=i(23249),D=i(63029);const A={move(e,t){(0,_.Cy)(e,{left:t})}},w={moveTo(e,t,i,a){D.fx.animate(e.get(0),{type:"slide",to:{left:t},duration:i,complete:a})},complete(e){D.fx.stop(e.get(0),!0)}},I=e=>+e,V=e=>(0,_.x5)(e).left;class T extends x.A{_activeStateUnit(){return".dx-multiview-item"}_supportedKeys(){return(0,a.A)({},super._supportedKeys(),{pageUp:f.lQ,pageDown:f.lQ})}_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===s.A.real().deviceType&&!s.A.isSimulator(),options:{focusStateEnabled:!0}}])}_itemClass(){return"dx-multiview-item"}_itemDataKey(){return"dxMultiViewItemData"}_itemContainer(){return this._$itemContainer}_itemElements(){return this._itemContainer().children(this._itemSelector())}_itemWidth(){return this._itemWidthValue?this._itemWidthValue:(0,b.RG)(this._$wrapper)}_clearItemWidthCache(){delete this._itemWidthValue}_itemsCount(){const{items:e=[]}=this.option();return e.length}_isAllItemsHidden(){const{items:e=[]}=this.option();return e.every((e,t)=>!this._isItemVisible(t))}_normalizeIndex(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=this._itemsCount();let n=e;if(this._isAllItemsHidden())return;e<0&&(n+=a),e>=a&&(n-=a);const s=t>0?-1:1,o=-1===s?0:a-1;while(!this._isItemVisible(n)&&(i||n!==o))n=(n+s+a)%a;return n}_getRTLSignCorrection(){const{rtlEnabled:e}=this.option();return e?-1:1}_init(){super._init();const e=this.$element();e.addClass("dx-multiview"),this._$wrapper=(0,l.A)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(e),this._$itemContainer=(0,l.A)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper);const{loop:t}=this.option();this.option("loopItemFocus",t),this._findBoundaryIndices(),this._initSwipeable()}_ensureSelectedItemIsVisible(){const{loop:e,selectedIndex:t}=this.option();if(!(0,u.O9)(t))return;if(this._isItemVisible(t))return;if(this._isAllItemsHidden())return void this.option("selectedIndex",0);const i=-1*this._getRTLSignCorrection();let a=this._normalizeIndex(t,i,e);a===t&&(a=this._normalizeIndex(t,-i,e)),this.option("selectedIndex",a)}_initMarkup(){this._deferredItems=[],super._initMarkup(),this._ensureSelectedItemIsVisible();const e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0]),this._setElementAria(),this._setItemsAria()}_afterItemElementDeleted(e,t){super._afterItemElementDeleted(e,t),this._deferredItems&&this._deferredItems.splice(t.itemIndex,1)}_beforeItemElementInserted(e){super._beforeItemElementInserted(e),this._deferredItems&&this._deferredItems.splice(e.index,0,null)}_executeItemRenderAction(e,t,i){const{items:a=[]}=this.option(),n=a.indexOf(t);super._executeItemRenderAction(n,t,i)}_renderItemContent(e){const t=(0,C.cY)(),i=(0,C.cY)();i.done(()=>{const i=super._renderItemContent(e);t.resolve(i)}),this._deferredItems[e.index]=i;const{deferRendering:a}=this.option();return a||i.resolve(),t.promise()}_render(){super._render(),(0,f.zE)(()=>{const e=this._getSelectedItemIndices();this._updateItems(e[0])})}_getElementAria(){return{role:"group",roledescription:v.A.format("dxMultiView-elementAriaRoleDescription"),label:v.A.format("dxMultiView-elementAriaLabel")}}_setElementAria(){const e=this._getElementAria();this.setAria(e,this.$element())}_setItemsAria(){const e=this._itemElements(),t=this._itemsCount();e.each((e,i)=>{const a=this._getItemAria({itemIndex:e,itemsCount:t});this.setAria(a,(0,l.A)(i))})}_getItemAria(e){const{itemIndex:t,itemsCount:i}=e;return{role:"group",roledescription:v.A.format("dxMultiView-itemAriaRoleDescription"),label:v.A.format("dxMultiView-itemAriaLabel",t+1,i)}}_updateItems(e,t){this._updateItemsPosition(e,t),this._updateItemsVisibility(e,t)}_modifyByChanges(e,t){super._modifyByChanges(e,t);const i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0])}_updateItemsPosition(e,t){const i=this._itemElements(),a=(0,u.O9)(t)?-this._animationDirection(t,e):void 0,n=i.eq(e);A.move(n,0),(0,u.O9)(t)&&(0,u.O9)(a)&&A.move(i.eq(t),100*a+"%")}_isItemVisible(e){var t;const{items:i=[]}=this.option();return((0,u.O9)(e)&&(null===(t=i[e])||void 0===t?void 0:t.visible))??!0}_updateItemsVisibility(e,t){const i=this._itemElements();i.each((i,a)=>{const n=(0,l.A)(a),s=i!==e&&i!==t;s||this._renderSpecificItem(i),n.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,n)})}_renderSpecificItem(e){const t=this._itemElements().eq(e),i=t.find(this._itemContentClass()).length>0;var a;(0,u.O9)(e)&&!i&&(null===(a=this._deferredItems[e])||void 0===a||a.resolve(),(0,g.ho)(t))}_refreshItem(e,t){super._refreshItem(e,t);const{selectedIndex:i=0}=this.option();this._updateItemsVisibility(i)}_setAriaSelectionAttribute(){}_updateSelection(e,t){const i=e[0],a=t[0];w.complete(this._$itemContainer),this._updateItems(a,i);const n=this._animationDirection(i,a);this._animateItemContainer(n*this._itemWidth(),()=>{A.move(this._$itemContainer,0),this._updateItems(i),(0,b.RG)(this._$itemContainer)})}_animateItemContainer(e,t){const{animationEnabled:i}=this.option(),a=i?200:0;w.moveTo(this._$itemContainer,e,a,t)}_animationDirection(e,t){const i=V(this._$itemContainer),a=this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection(),n=(t-e)*a,s=0!==i,o=s?i:n;return(0,y._S)(o)}_getSwipeDisabledState(){const{swipeEnabled:e}=this.option();return!e||this._itemsCount()<=1}_initSwipeable(){this._createComponent(this.$element(),m.A,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:e=>{this._swipeStartHandler(e.event)},onUpdated:e=>{this._swipeUpdateHandler(e.event)},onEnd:e=>{this._swipeEndHandler(e.event)}})}_findBoundaryIndices(){const{items:e=[]}=this.option();let t,i;e.forEach((e,a)=>{const n=Boolean(null===e||void 0===e?void 0:e.disabled),s=this._isItemVisible(a);!n&&s&&(t??(t=a),i=a)}),this._boundaryIndices={firstAvailableIndex:t??0,lastAvailableIndex:i??e.length-1,firstTrueIndex:0,lastTrueIndex:e.length-1}}_swipeStartHandler(e){w.complete(this._$itemContainer);const{selectedIndex:t,loop:i,rtlEnabled:a}=this.option();if(!(0,u.O9)(t)||!(0,u.O9)(this._boundaryIndices))return;const{firstAvailableIndex:n,lastAvailableIndex:s}=this._boundaryIndices,o=a?t>n:t<s,r=a?t<s:t>n;e.maxLeftOffset=I(!!i||o),e.maxRightOffset=I(!!i||r)}_swipeUpdateHandler(e){const{offset:t}=e,i=(0,y._S)(t)*this._getRTLSignCorrection(),{selectedIndex:a}=this.option();if(!(0,u.O9)(a))return;const n=this._normalizeIndex(a-i,i);a!==n&&(A.move(this._$itemContainer,t*this._itemWidth()),this._updateItems(a,n))}_findNextAvailableIndex(e,t){if(!(0,u.O9)(this._boundaryIndices))return e;const{items:i=[],loop:a}=this.option(),{firstAvailableIndex:n,lastAvailableIndex:s,firstTrueIndex:o,lastTrueIndex:r}=this._boundaryIndices,l=[o,n].includes(e),d=[r,s].includes(e);if(a){if(l&&t<0)return s;if(d&&t>0)return n}for(let h=e+t;h>=n&&h<=s;h+=t){const e=Boolean(i[h].disabled),t=this._isItemVisible(h);if(!e&&t)return h}return e}_postprocessSwipe(e){}_swipeEndHandler(e){const t=e.targetOffset*this._getRTLSignCorrection();if(t){const{selectedIndex:e}=this.option();if(!(0,u.O9)(e))return;const i=this._findNextAvailableIndex(e,-t);this.selectItem(i).fail(()=>{this._animateItemContainer(0,f.lQ)}).done(()=>{this._postprocessSwipe({swipedTabsIndex:i})});const a=this.itemElements().filter(".dx-item-selected"),{focusStateEnabled:n}=this.option();n&&this.option("focusedElement",(0,r.cc)(a))}else this._animateItemContainer(0,f.lQ)}_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1}_moveFocus(e,t){super._moveFocus(e,t),this._itemFocusLooped=!1}_prevItem(e){const t=super._prevItem(e);return this._itemFocusLooped=t.is(e.last()),t}_nextItem(e){const t=super._nextItem(e);return this._itemFocusLooped=t.is(e.first()),t}_dimensionChanged(){this._clearItemWidthCache()}_visibilityChanged(e){e&&this._dimensionChanged()}_updateSwipeDisabledState(){const e=this._getSwipeDisabledState();m.A.getInstance(this.$element()).option("disabled",e)}_dispose(){delete this._boundaryIndices,super._dispose()}_itemOptionChanged(e,t,i,a){super._itemOptionChanged(e,t,i,a);const{selectedItem:n}=this.option();"visible"===t&&e===n&&this._ensureSelectedItemIsVisible()}_optionChanged(e){const{value:t}=e;switch(e.name){case"loop":this.option("loopItemFocus",t);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),super._optionChanged(e);break;case"selectedIndex":this._isItemVisible(t)?super._optionChanged(e):this._ensureSelectedItemIsVisible();break;default:super._optionChanged(e)}}}(0,n.A)("dxMultiView",T);var S=T,O=i(89917),M=i(88641);class k extends M.A{_renderWatchers(){this._startWatcher("badge",f.lQ),super._renderWatchers()}}const B={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},E={top:"top",right:"right",bottom:"bottom",left:"left"},R={top:"bottom",right:"left",bottom:"top",left:"right"},F={horizontal:"horizontal",vertical:"vertical"},$={top:"top",end:"end",bottom:"bottom",start:"start"},P={primary:"primary",secondary:"secondary"};class N extends S{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{itemTitleTemplate:"title",hoverStateEnabled:!0,selectOnFocus:!1,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:E.top,iconPosition:$.start,stylingMode:P.primary,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:e=>null===e||void 0===e?void 0:e.badge,_tabsIndicatorPosition:null})}_defaultOptionsRules(){const e=(0,p.ss)();return super._defaultOptionsRules().concat([{device:()=>"desktop"===s.A.real().deviceType&&!s.A.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!c.Ay.touch,options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>(0,p.Ft)(e),options:{stylingMode:P.secondary}},{device:()=>(0,p.Nt)(e),options:{iconPosition:$.top}}])}_init(){super._init(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()}_getElementAria(){return{role:"tabpanel"}}_getItemAria(){return{role:"tabpanel"}}_initMarkup(){super._initMarkup(),this._createTitleActions(),this._renderLayout()}_prepareTabsItemTemplate(e,t){const i=(0,h.N)(null===e||void 0===e?void 0:e.icon);i&&t.append(i);const a=(0,u.Qd)(e)?null===e||void 0===e?void 0:e.title:e;if((0,u.O9)(a)&&!(0,u.Qd)(a)){const e=(0,l.A)("<span>").addClass(O.hS);e.append(o.A.createTextNode(a));const i=(0,l.A)("<span>").addClass(O.yd);i.append(o.A.createTextNode(a)),i.appendTo(e),e.appendTo(t)}}_initTemplates(){super._initTemplates(),this._templateManager.addDefaultTemplates({title:new d.U((e,t)=>{this._prepareTabsItemTemplate(t,e);const i=(0,l.A)("<div>").addClass(O.ku);e.wrapInner(i)},["title","icon"],this.option("integrationOptions.watchMethod"))})}_createTitleActions(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()}_createTitleClickAction(){this._titleClickAction=this._createActionByOption("onTitleClick")}_createTitleHoldAction(){this._titleHoldAction=this._createActionByOption("onTitleHold")}_createTitleRenderedAction(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")}_renderLayout(){if(this._tabs)return;const e=this.$element();this._$tabContainer=(0,l.A)("<div>").addClass("dx-tabpanel-tabs").appendTo(e);const t=(0,l.A)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(t,O.Ay,this._tabConfig()),this._$container=(0,l.A)("<div>").addClass("dx-tabpanel-container").appendTo(e),this._$container.append(this._$wrapper);const{focusStateEnabled:i,selectedIndex:a}=this.option();if(i&&(0,u.O9)(a)){const e=this._tabs.itemElements().get(a);e&&this._tabs.option({focusedElement:e})}}_refreshActiveDescendant(){if(!this._tabs)return;const e=this._tabs,t=e.itemElements(),i=(0,l.A)(t[e.option("selectedIndex")]),a=this.getFocusedItemId();this.setAria("controls",void 0,(0,l.A)(t)),this.setAria("controls",a,i)}_getTabsIndicatorPosition(){const{_tabsIndicatorPosition:e,tabsPosition:t}=this.option();return e??R[t??E.top]}_tabConfig(){const e=this._getTabsIndicatorPosition(),{focusStateEnabled:t,hoverStateEnabled:i,repaintChangesOnly:a,tabIndex:n,selectedIndex:s,badgeExpr:o,itemHoldTimeout:d,items:h,scrollingEnabled:u,scrollByContent:p,showNavButtons:c,loop:_,iconPosition:m,stylingMode:g}=this.option();return{selectOnFocus:!0,focusStateEnabled:t,hoverStateEnabled:i,repaintChangesOnly:a,tabIndex:n,selectedIndex:s,badgeExpr:o,onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:d,onSelectionChanging:e=>{const t=e.addedItems[0],i=this._getIndexByItemData(t),a=this.selectItem(i),n=a.state();e.cancel="pending"===n?new Promise(e=>{a.done(()=>{e(!1)}).fail(()=>{e(!0)})}):"rejected"===n},onSelectionChanged:()=>{this._refreshActiveDescendant()},onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:h,noDataText:null,scrollingEnabled:u,scrollByContent:p,showNavButtons:c,itemTemplateProperty:"tabTemplate",loopItemFocus:_,selectionRequired:!0,onOptionChanged:e=>{if("focusedElement"===e.name)if(e.value){const t=(0,l.A)(e.value),i=this._itemElements().eq(t.index());this.option("focusedElement",(0,r.cc)(i))}else this.option("focusedElement",e.value)},onFocusIn:e=>{this._focusInHandler(e.event)},onFocusOut:e=>{this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)},orientation:this._getTabsOrientation(),iconPosition:m,stylingMode:g,_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:e}}_renderFocusTarget(){this._focusTarget().attr("tabIndex",-1)}_getTabsOrientation(){const{tabsPosition:e}=this.option();return[E.right,E.left].includes(e)?F.vertical:F.horizontal}_getTabPanelTabsPositionClass(){const{tabsPosition:e}=this.option();switch(e){case E.right:return B.right;case E.bottom:return B.bottom;case E.left:return B.left;case E.top:default:return B.top}}_toggleTabPanelTabsPositionClass(){for(const t in B)this.$element().removeClass(B[t]);const e=this._getTabPanelTabsPositionClass();this.$element().addClass(e)}_updateTabsOrientation(){const e=this._getTabsOrientation();this._setTabsOption("orientation",e)}_toggleWrapperFocusedClass(e){this._toggleFocusClass(e,this._$wrapper)}_toggleDisabledFocusedClass(e){this._focusTarget().toggleClass("dx-disabled-focused-tab",e)}_updateFocusState(e,t){super._updateFocusState(e,t);const i=e.target===this._tabs._focusTarget().get(0),a=e.target===this._focusTarget().get(0);if(i&&this._toggleFocusClass(t,this._focusTarget()),i||a){const e=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(t&&!e),this._toggleDisabledFocusedClass(t&&e)}a&&(this._toggleFocusClass(t,this._tabs.$element()),this._toggleFocusClass(t,this._tabs.option("focusedElement")))}_focusOutHandler(e){this._isFocusOutHandlerExecuting=!0,super._focusOutHandler(e),this._tabs._focusOutHandler(e),this._isFocusOutHandlerExecuting=!1}_setTabsOption(e,t){this._tabs&&this._tabs.option(e,t)}_postprocessSwipe(e){this._setTabsOption("selectedIndex",e.swipedTabsIndex)}_visibilityChanged(e){e&&this._tabs._dimensionChanged()}registerKeyHandler(e,t){super.registerKeyHandler(e,t),this._tabs&&this._tabs.registerKeyHandler(e,t)}repaint(){super.repaint(),this._tabs.repaint()}_updateTabsIndicatorPosition(){const e=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",e)}_optionChanged(e){const{name:t,value:i,fullName:a}=e;switch(t){case"dataSource":default:super._optionChanged(e);break;case"items":this._setTabsOption(t,this.option(t)),this.option("repaintChangesOnly")||this._tabs.repaint(),super._optionChanged(e);break;case"width":super._optionChanged(e),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":{this._setTabsOption(a,i),super._optionChanged(e);const{focusStateEnabled:t}=this.option();if(!0===t){const e=this.option("selectedIndex"),t=this._itemElements().eq(e);this.option("focusedElement",(0,r.cc)(t))}break}case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(a,i),super._optionChanged(e);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(a,i);break;case"focusedElement":{const t=i?(0,l.A)(i).index():i,a=i&&this._tabs?this._tabs._itemElements().eq(t):i;if(this._setTabsOption("focusedElement",(0,r.cc)(a)),i){const e=this._isDisabled(i);this._toggleWrapperFocusedClass(!e),this._toggleDisabledFocusedClass(e)}super._optionChanged(e);break}case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i),super._optionChanged(e);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",i);break;case"stylingMode":this._setTabsOption("stylingMode",i);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",i)}}}N.ItemClass=k,(0,n.A)("dxTabPanel",N);var H=N},24039:function(e,t,i){i.d(t,{A:function(){return oe}});var a=i(66529),n=(i(82438),i(50020),i(82950)),s=i(61928),o=i(18692),r=i(74567),l=i(2163),d=i(35167),h=i(90218),u=i(39889),p=i(58936),c=i(50172),_=i(82454),m=i(92324),g=i(85563),v=i(26228),f=i(66703),C=i(31079);(0,a.A)("dxTextEditor",C.A);var y=C.A,b=i(96004),x=i(44956),D=i(99408),A=i(64826),w=i(85997),I=i(69135);const V="dx-numberbox-spin",T="dx-numberbox-spin-button",S="dxNumberBox",O=(0,r.b4)(b.A.up,S),M=(0,r.b4)(b.A.cancel,S);class k extends I.Ay{_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})}_initMarkup(){super._initMarkup();const{direction:e}=this.option(),t=`${V}-${e}`;this.$element().addClass(T).addClass(t),this._spinIcon=(0,g.A)("<div>").addClass(`${t}-icon`).appendTo(this.$element())}_render(){super._render();const e=(0,r.b4)(b.A.down,this.NAME),t=this.$element();s.A.off(t,e),s.A.on(t,e,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")}_spinDownHandler(e){e.preventDefault(),this._clearTimer(),s.A.on(this.$element(),w.A.name,()=>{this._feedBackDeferred=(0,f.cY)(),(0,A.s2)(this._feedBackDeferred),this._spinChangeHandler({event:e}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:e})});const t=m.A.getDocument();s.A.on(t,O,this._clearTimer.bind(this)),s.A.on(t,M,this._clearTimer.bind(this)),this._spinChangeHandler({event:e})}_dispose(){this._clearTimer(),super._dispose()}_clearTimer(){s.A.off(this.$element(),w.A.name);const e=m.A.getDocument();s.A.off(e,O),s.A.off(e,M),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)}_optionChanged(e){switch(e.name){case"onChange":case"direction":this._invalidate();break;default:super._optionChanged(e)}}}var B=k;const E="dx-numberbox-spin",R="dx-numberbox-spin-container",F="dx-numberbox-spin-touch-friendly";class $ extends D.A{_attachEvents(e,t){const{editor:i}=this,a=(0,r.b4)(b.A.down,i.NAME),n=t.children(),o=i._createAction(e=>i._spinButtonsPointerDownHandler(e));s.A.off(t,a),s.A.on(t,a,e=>o({event:e})),B.getInstance(n.eq(0)).option("onChange",e=>i._spinUpChangeHandler(e)),B.getInstance(n.eq(1)).option("onChange",e=>i._spinDownChangeHandler(e))}_create(){const{editor:e}=this,t=(0,g.A)("<div>").addClass(R),i=(0,g.A)("<div>").appendTo(t),a=(0,g.A)("<div>").appendTo(t),n=this._getOptions();return this._addToContainer(t),e._createComponent(i,B,(0,x.X)({direction:"up"},n)),e._createComponent(a,B,(0,x.X)({direction:"down"},n)),this._legacyRender(e.$element(),this._isTouchFriendly(),n.visible),{instance:t,$element:t}}_getOptions(){const{editor:e}=this,t=this._isVisible(),i=e.option("disabled");return{visible:t,disabled:i}}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){const{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,t,i){e.toggleClass(F,t),e.toggleClass(E,i)}update(){const e=super.update();if(e){const{editor:e,instance:t}=this,i=e.$element(),a=this._isVisible(),n=this._isTouchFriendly(),s=t.children(),o=B.getInstance(s.eq(0)),r=B.getInstance(s.eq(1)),l=this._getOptions();o.option(l),r.option(l),this._legacyRender(i,n,a)}}}const P=Math,N="dx-numberbox",H=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"];class L extends y{_supportedKeys(){return(0,n.A)({},super._supportedKeys(),{upArrow(e){(0,r.By)(e)||(e.preventDefault(),e.stopPropagation(),this._spinUpChangeHandler(e))},downArrow(e){(0,r.By)(e)||(e.preventDefault(),e.stopPropagation(),this._spinDownChangeHandler(e))},enter(){}})}_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:_.A.format("dxNumberBox-invalidValueMessage"),buttons:void 0})}_useTemplates(){return!1}_getDefaultButtons(){return super._getDefaultButtons().concat([{name:"spins",Ctor:$}])}_isSupportInputMode(){const e=parseFloat(v.A.version);return v.A.chrome&&e>=66||v.A.safari&&e>=12}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>h.A.real().generic&&!h.A.isSimulator(),options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==h.A.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])}_initMarkup(){this._renderSubmitElement(),this.$element().addClass(N),super._initMarkup(),this._toggleTabIndex()}_getDefaultAttributes(){const e=super._getDefaultAttributes();return e.inputmode="decimal",e}_renderContentImpl(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")}_renderSubmitElement(){this._$submitElement=(0,g.A)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))}_setSubmitValue(e){this._getSubmitElement().val((0,u.EG)(e))}_getSubmitElement(){return this._$submitElement}_keyPressHandler(e){super._keyPressHandler();const t=(0,r.Pg)(e),i=/[\d.,eE\-+]/.test(t);if(!i){const t=(0,r.YD)(e);if((0,r.By)(e)||t&&H.includes(t))return;return void e.preventDefault()}this._keyPressed=!0}_hasMouseWheelHandler(){return!0}_onMouseWheel(e){e.delta>0?this._spinValueChange(1,e):this._spinValueChange(-1,e)}_renderValue(){const e=this._input().val(),t=this.option("value");e.length&&Number(e)===t||(this._forceValueRender(),this._toggleEmptinessEventHandler());const i=(0,c.O9)(t)?null:_.A.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,u.YD)(t,""),valuetext:i}),this.option("text",this._input().val()),this._updateButtons(),(0,f.cY)().resolve()}_forceValueRender(){const e=this.option("value"),t=Number(e),i=isNaN(t)?"":this._applyDisplayValueFormatter(e);this._renderDisplayText(i)}_applyDisplayValueFormatter(e){const{displayValueFormatter:t}=this.option();return null===t||void 0===t?void 0:t(e)}_renderProps(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,u.YD)(this.option("min"),""),valuemax:(0,u.YD)(this.option("max"),"")})}_spinButtonsPointerDownHandler(){const e=this._input();this.option("useLargeSpinButtons")||m.A.getActiveElement()===e[0]||s.A.trigger(e,"focus")}_spinUpChangeHandler(e){this.option("readOnly")||this._spinValueChange(1,e.event||e)}_spinDownChangeHandler(e){this.option("readOnly")||this._spinValueChange(-1,e.event||e)}_spinValueChange(e,t){const i=parseFloat(this.option("step"));if(0===i)return;let a=parseFloat(this._normalizeInputValue())||0;a=this._correctRounding(a,i*e);const n=this.option("min"),s=this.option("max");(0,c.O9)(n)&&(a=Math.max(n,a)),(0,c.O9)(s)&&(a=Math.min(s,a)),this._saveValueChangeEvent(t),this.option("value",a)}_correctRounding(e,t){const i=/[,.](.*)/,a=i.test(e),n=i.test(t);if(a||n){const s=a?i.exec(e)[0].length:0,o=n?i.exec(t)[0].length:0,r=P.max(s,o);return e=this._round(e+t,r),e}return e+t}_round(e,t){t=t||0;const i=10**t;return e*=i,e=Math.round(e)/i,e}_renderValueChangeEvent(){super._renderValueChangeEvent();const e=(0,r.b4)("focusout","NumberBoxForceValueChange");s.A.off(this.element(),e),s.A.on(this.element(),e,this._forceRefreshInputValue.bind(this))}_forceRefreshInputValue(){const{mode:e}=this.option();if("number"===e)return;const t=this._input(),i=this._applyDisplayValueFormatter(this.option("value"));t.val(null),t.val(i)}_valueChangeEventHandler(e){const t=this._input(),i=this._normalizeText(),a=this._parseValue(i),n="."!==i&&"-"!==i;!this._isValueValid()||this._validateValue(a)?(n&&super._valueChangeEventHandler(e,isNaN(a)?null:a),this._applyValueBoundaries(i,a),this.validationRequest.fire({value:a,editor:this})):t.val(this._applyDisplayValueFormatter(a))}_applyValueBoundaries(e,t){const i=this._isValueIncomplete(e),a=this._isValueInRange(e);i||a||null===t||Number(e)!==t&&this._input().val(this._applyDisplayValueFormatter(t))}_replaceCommaWithPoint(e){return e.replace(",",".")}_inputIsInvalid(){const{mode:e}=this.option(),t="number"===e,i=this._input().get(0).validity;return t&&(null===i||void 0===i?void 0:i.badInput)}_renderDisplayText(e){this._inputIsInvalid()||super._renderDisplayText(e)}_isValueIncomplete(e){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(e)}_isValueInRange(e){return(0,p.r4)(e,this.option("min"),this.option("max"))}_isNumber(e){return null!==this._parseValue(e)}_validateValue(e){const t=this._normalizeText(),i=this._isValueValid();let a=!0;const n=this._isNumber(t);return isNaN(Number(e))&&(a=!1),!e&&i?a=!0:n||i||(a=!1),this.option({isValid:a,validationError:a?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),a}_normalizeInputValue(){return this._parseValue(this._normalizeText())}_normalizeText(){const e=this._input().val().trim();return this._replaceCommaWithPoint(e)}_parseValue(e){const t=parseFloat(e);return isNaN(t)?null:(0,p.df)(t,this.option("min"),this.option("max"))}_clearValue(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),super._clearValue()}clear(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)}_optionChanged(e){switch(e.name){case"value":this._validateValue(e.value),this._setSubmitValue(e.value),super._optionChanged(e),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:super._optionChanged(e)}}}var W=L;const z=function(e){let t=0,i=0;for(let a=0;a<e.length;++a)if("'"===e[a]&&t++,"."===e[a]&&(++i,t%2===0))return{occurrence:i,index:a};return{occurrence:1,index:-1}},G=function(e,t,i){let a=-1;while(i--&&a++<e.length)a=e.indexOf(t,a);return a},Y=function(e,t){return-1===t?[e]:[e.slice(0,t),e.slice(t+1)]},K=function(e,t){return e?(0,p.Ai)(e/100,t/100):e},q=function(e,t){if("string"===typeof t){const i=t.split(";"),a=d.A.getSign(e,t);i[1]=i[1]||`-${i[0]}`,t=i[a<0?1:0];const n=e=>e.replace(/'([^']*)'/g,e=>e.split("").map(()=>" ").join("").substr(2));t=n(t);const s=/^[^#0.,]*/.exec(t)[0].length,o=/[^#0.,]*$/.exec(t)[0].length;return{start:s,end:e.length-o}}return{start:0,end:e.length}},U=function(e,t){const i=d.A.getDecimalSeparator(),a=new RegExp(`[^0-9${(0,u.Nt)(i)}]`,"g"),n=t.slice(0,e);return n.replace(a,"").length},j=function(e){return e.split("").reverse().join("")},X=function(e,t){if(!e)return-1;const i=/[0-9]/g;let a=1,n=null,s=i.exec(t);while(s){if(n=s.index,a>=e)return n;a++,s=i.exec(t)}return null===n?t.length:n},Z=function(e){return e.replace(/[^0-9e]+$/,"")},Q=function(e,t){return void 0===e.start&&(e={start:e,end:e}),{start:e.start+t,end:e.end+t}},J=function(e,t,i,a){i=Q(i,0);const n=d.A.getDecimalSeparator(),s=ee(e),o=z(a).occurrence,r=s?0:G(e,n,o),l=G(t,n,o),h=Y(e,r),u=Y(t,l),p=-1!==r&&i.start>r;if(p){const e=i.start-r-1,n=U(e,h[1]),s=u[1]?l+1+X(n,u[1])+1:t.length;return ie(s,t,a)}const c=Z(u[0]),_=h[0].length-i.start,m=U(_,j(h[0])),g=X(m,j(c)),v=c.length-(g+1);return ie(v,t,a)};function ee(e){return 1===e.length&&!!e.match(/^[,.][0-9]*$/g)}const te=function(e,t,i){e=Q(e,0);const a=ie(e,t,i);return e.start>=a.start&&e.end<=a.end};function ie(e,t,i){e=Q(e,0);const a=q(t,i),n={start:(0,p.df)(e.start,a.start,a.end),end:(0,p.df)(e.end,a.start,a.end)};return n}const ae=function(e,t,i){const a=q(e,i),n=q(t,i);return n.start-a.start};class ne extends W{_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{useMaskBehavior:!0,format:null})}_isDeleteKey(e){return"del"===e}_supportedKeys(){return this._useMaskBehavior()?(0,n.A)({},super._supportedKeys(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):super._supportedKeys()}_getTextSeparatorIndex(e){const t=d.A.getDecimalSeparator(),i=z(this.option("format")).occurrence;return G(e,t,i)}_focusInHandler(e){this._preventNestedFocusEvent(e)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0;const t=this._caret();if(t.start===t.end&&this._useMaskBehavior()){const t=this._getInputVal(),i=this._getTextSeparatorIndex(t);i>=0?this._caret({start:i,end:i}):this._moveCaretToBoundaryEventHandler(-1,e)}},0)),super._focusInHandler(e)}_focusOutHandler(e){const t=!this._preventNestedFocusEvent(e);t&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),super._focusOutHandler(e),t&&(this._focusOutOccurs=!1)}_hasValueBeenChanged(e){const t=this._getFormatPattern(),i=this.option("value"),a=this._format(i,t)||"";return a!==e}_updateFormattedValue(){const e=this._getInputVal();if(this._hasValueBeenChanged(e)){this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue();const{value:e}=this.option();this._parsedValue!==e&&s.A.trigger(this._input(),"change")}}_arrowHandler(e,t){if(!this._useMaskBehavior())return;const i=this._getInputVal(),a=this._getFormatPattern();let n=Q(this._caret(),e);te(n,i,a)||(n=1===e?n.end:n.start,t.preventDefault(),this._caret(ie(n,i,a)))}_moveCaretToBoundary(e){const t=q(this._getInputVal(),this._getFormatPattern()),i=Q(1===e?t.start:t.end,0);this._caret(i)}_moveCaretToBoundaryEventHandler(e,t){!this._useMaskBehavior()||null!==t&&void 0!==t&&t.shiftKey||(this._moveCaretToBoundary(e),null===t||void 0===t||t.preventDefault())}_shouldMoveCaret(e,t){const i=d.A.getDecimalSeparator(),a=e.charAt(t.end)===i,n=(this._lastKey===i||"."===this._lastKey||","===this._lastKey)&&a;return n}_getInputVal(){return d.A.convertDigits(this._input().val(),!0)}_keyboardHandler(e){if(this.clearCaretTimeout(),this._lastKey=d.A.convertDigits((0,r.Pg)(e),!0),this._lastKeyName=(0,r.YD)(e),!this._shouldHandleKey(e.originalEvent))return super._keyboardHandler(e);const t=this._getInputVal(),i=this._caret();let a;a="minus"===this._lastKeyName?"":110===e.which?d.A.getDecimalSeparator():this._lastKey;const n=this._tryParse(t,i,a);return this._shouldMoveCaret(t,i)&&(this._moveCaret(1),e.originalEvent.preventDefault()),void 0===n?"minus"!==this._lastKeyName&&e.originalEvent.preventDefault():this._parsedValue=n,super._keyboardHandler(e)}_keyPressHandler(e){this._useMaskBehavior()||super._keyPressHandler(e)}_removeHandler(e){const t=this._caret(),i=this._getInputVal();let{start:a}=t,{end:n}=t;this._lastKey=(0,r.Pg)(e),this._lastKeyName=(0,r.YD)(e);const o=this._isDeleteKey(this._lastKeyName),l=!o;if(a===n){const t=a,s=l&&t>0||o&&t<i.length;if(!s)return void e.preventDefault();o&&n++,l&&a--}const h=i.slice(a,n);if(this._isStub(h)){if(this._moveCaret(o?1:-1),this._parsedValue<0||1/this._parsedValue===-1/0){this._revertSign(e),this._setTextByParsedValue();const t=this.option("valueChangeEvent").split(" ").includes("input");t&&s.A.trigger(this._input(),"input")}return void e.preventDefault()}const u=d.A.getDecimalSeparator();if(h===u){const t=i.indexOf(u);return void(this._isNonStubAfter(t+1)&&(this._moveCaret(o?1:-1),e.preventDefault()))}if(n-a<i.length){const e=this._replaceSelectedText(i,{start:a,end:n},""),t=e.search(/[0-9]/)<0;if(t&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue===-1/0?-0:0)}const p=this._tryParse(i,{start:a,end:n},"");void 0===p?e.preventDefault():this._parsedValue=p}_isPercentFormat(){const e=this._getFormatPattern(),t=e.replace(/'[^']+'/g,"");return-1!==t.indexOf("%")}_parse(e,t){const i=this.option("format"),a=(0,c.Tn)(i.parser),n=a?i.parser:d.A.parse;let s=0;if(!a){const i=z(t).index,a=this._getTextSeparatorIndex(e),n=-1!==i?i:t.length,o=-1!==a?a:e.length;o>n&&-1===t.indexOf("#")&&(s=o-n)}return e=e.substr(s),n(e,t)}_format(e,t){const i=this.option("format"),a=(null===i||void 0===i?void 0:i.formatter)||i,n=(0,c.Tn)(a)?a:d.A.format,s=null===e?"":n(e,t);return s}_getFormatPattern(){return this._currentFormat||this._updateFormat(),this._currentFormat}_updateFormat(){const{format:e}=this.option(),t=(0,c.Tn)(null===e||void 0===e?void 0:e.parser),i=(0,c.Kg)(e)&&(e.includes("0")||e.includes("#")),a="exponential"===e||"exponential"===(null===e||void 0===e?void 0:e.type),n=t||i||a;this._currentFormat=n?e:(0,l.g)(t=>{const i=this._format(t,e);return d.A.convertDigits(i,!0)})}_getFormatForSign(e){const t=this._getFormatPattern();if((0,c.Kg)(t)){const i=t.split(";"),a=d.A.getSign(e,t);return i[1]=i[1]||`-${i[0]}`,a<0?i[1]:i[0]}const i=d.A.getSign(e);return i<0?"-":""}_removeStubs(e,t){const i=this._getFormatForSign(e),a=d.A.getThousandsSeparator(),n=this._getStubs(i);let s=e;if(n.length){const e=n[0],i=new RegExp(`(${(0,u.Nt)(n[1]||"")})$`,"g"),o=new RegExp(`[-${(0,u.Nt)(t?"":a)}]`,"g");s=s.replace(e,"").replace(i,"").replace(o,"")}return s}_getStubs(e){const t=/[^']([#0.,]+)/g.exec(e),i=t&&t[0].trim();return e.split(i).map(e=>e.replace(/'/g,""))}_truncateToPrecision(e,t){if((0,c.O9)(e)){const i=e.toString(),a=i.indexOf(".");if(i&&a>-1){const n=parseFloat(i.substr(0,a+t+1));return isNaN(n)?e:n}}return e}_tryParse(e,t,i){const a=t.start!==t.end,n=a&&0===t.start&&t.end===e.length,s=d.A.getDecimalSeparator();if(n&&i===s)return 0;const o=this._replaceSelectedText(e,t,i),r=this._getFormatPattern();let l=this._getParsedValue(o,r);const h=!r.parser&&this._getPrecisionLimits(o).max,u=l!==this._parsedValue,p=i===s&&0===h,c=!a&&!u&&"-"!==i&&this._isStub(i);if(p||c)return;if(""===this._removeStubs(o)&&(l=Math.abs(0*this._parsedValue)),isNaN(l))return;const _=null===l?this._parsedValue:l;if(l=h?this._truncateToPrecision(_,h):l,!r.parser&&this._isPercentFormat()){const e=this._getIntervalFromPrecision(h);return K(l,e)}return l}_getIntervalFromPrecision(e){return e<1?1:10**-e}_getParsedValue(e,t){const i=d.A.getSign(e,(null===t||void 0===t?void 0:t.formatter)||t),a=this._removeStubs(e,!0),n=this._parse(a,t),s=n<0?-1:1,o=(0,c.kf)(n)&&i!==s?i*n:n;return o}_isValueIncomplete(e){if(!this._useMaskBehavior())return super._isValueIncomplete(e);const t=this._caret(),i=d.A.getDecimalSeparator(),a=this._getTextSeparatorIndex(e),n=a>=0&&a<t.start,s=this._removeStubs(e,!0).split(i);if(!n||2!==s.length)return!1;const o=s[1].length,r=this._getFormatPattern(),l=!!r.parser,h=!l&&this._getPrecisionLimits(this._getFormatPattern()),u=!!l||(0,p.r4)(o,h.min,h.max),c="0"===s[1].charAt(o-1);return u&&(c||!o)}_isValueInRange(e){const t=(0,u.YD)(this.option("min"),-1/0),i=(0,u.YD)(this.option("max"),1/0);return(0,p.r4)(e,t,i)}_setInputText(e){const t=d.A.convertDigits(e,!0),i=J(this._getInputVal(),t,this._caret(),this._getFormatPattern());this._input().val(e),this._toggleEmptinessEventHandler(),this._formattedValue=e,this._focusOutOccurs||this._caret(i)}_useMaskBehavior(){const{useMaskBehavior:e}=this.option();return!!this.option("format")&&e}_renderInputType(){const{mode:e}=this.option(),t="number"===e,i="desktop"===h.A.real().deviceType;this._useMaskBehavior()&&t?this._setInputType(i||this._isSupportInputMode()?"text":"tel"):super._renderInputType()}_isChar(e){return(0,c.Kg)(e)&&1===e.length}_moveCaret(e){if(!e)return;const t=Q(this._caret(),e),i=ie(t,this._getInputVal(),this._getFormatPattern());this._caret(i)}_shouldHandleKey(e){const t=(0,r.YD)(e),i=(0,r.By)(e)||e.altKey||e.shiftKey||!this._isChar(t),a="minus"===t,n=this._useMaskBehavior();return n&&!i&&!a}_renderInput(){super._renderInput(),this._renderFormatter()}_renderFormatter(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()}_detachFormatterEvents(){s.A.off(this._input(),".dxNumberFormatter")}_isInputFromPaste(e){var t;const i=null===(t=e.originalEvent)||void 0===t?void 0:t.inputType;return(0,c.O9)(i)?"insertFromPaste"===i:this._isValuePasted}_attachFormatterEvents(){const e=this._input();s.A.on(e,(0,r.b4)("input","dxNumberFormatter"),e=>{this._formatValue(e),this._isValuePasted=!1}),s.A.on(e,(0,r.b4)("dxclick","dxNumberFormatter"),()=>{this._caretTimeout||(this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0,this._caret(ie(this._caret(),this._getInputVal(),this._getFormatPattern()))},0))}),s.A.on(e,o.U,()=>{this.clearCaretTimeout()})}clearCaretTimeout(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0}_forceRefreshInputValue(){if(!this._useMaskBehavior())return super._forceRefreshInputValue()}_isNonStubAfter(e){const t=this._getInputVal().slice(e);return t&&!this._isStub(t,!0)}_isStub(e,t){const i=(0,u.Nt)(d.A.getDecimalSeparator()),a=`^[^0-9${i}]+$`,n=new RegExp(a,"g");return n.test(e)&&(t||this._isChar(e))}_parseValue(e){return this._useMaskBehavior()?this._parsedValue:super._parseValue(e)}_getPrecisionLimits(e){const t=this._getFormatForSign(e),i=z(t).index,a=(Y(t,i)[1]||"").replace(/[^#0]/g,""),n=a.replace(/^(0*)#*/,"$1").length,s=a.length;return{min:n,max:s}}_revertSign(e){if(!this._useMaskBehavior())return;const t=this._caret();if(t.start!==t.end){if("minus"===(0,r.YD)(e))return void this._applyRevertedSign(e,t,!0);this._caret(ie(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(e,t)}_applyRevertedSign(e,t,i){const a=-1*(0,u.YD)(this._parsedValue,null);if((this._isValueInRange(a)||0===a)&&(this._parsedValue=a,i)){const i=this._getFormatPattern(),a=this._getInputVal();this._setTextByParsedValue(),e.preventDefault();const n=this._getInputVal(),s=ae(a,n,i);t=Q(t,s);const o=ie(t,n,i);this._caret(o)}}_removeMinusFromText(e,t){const i="minus"===this._lastKeyName&&"-"===e.charAt(t.start-1);return i?this._replaceSelectedText(e,{start:t.start-1,end:t.start},""):e}_setTextByParsedValue(){const e=this._getFormatPattern(),t=this._parseValue(),i=this._format(t,e)||"";this._setInputText(i)}_formatValue(e){let t=this._getInputVal();const i=this._caret(),a=this._removeMinusFromText(t,i),n=a!==t;if(t=a,!this._isInputFromPaste(e)&&this._isValueIncomplete(a))return this._formattedValue=t,void(n&&this._setTextByParsedValue());const s=d.A.convertDigits(this._formattedValue,!0)!==t;if(s){const e=this._tryParse(t,i,"");(0,c.O9)(e)&&(this._parsedValue=e)}this._setTextByParsedValue()}_renderDisplayText(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():super._renderDisplayText.apply(this,arguments)}_renderValue(){if(this._useMaskBehavior()){const{value:e}=this.option();this._parsedValue=e,this._setTextByParsedValue()}return super._renderValue()}_updateParsedValue(){const e=this._getInputVal();this._parsedValue=this._tryParse(e,this._caret())}_adjustParsedValue(){if(!this._useMaskBehavior())return;const e=this._removeStubs(this._getInputVal()),t=e?this._parseValue():null;(0,c.kf)(t)?this._parsedValue=(0,p.df)(t,this.option("min"),this.option("max")):this._parsedValue=t}_valueChangeEventHandler(e){if(!this._useMaskBehavior())return super._valueChangeEventHandler(e);const t=this._caret();this._saveValueChangeEvent(e),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),t&&this._caret(t)}_optionChanged(e){switch(e.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),super._optionChanged(e);break;default:super._optionChanged(e)}}_clearCache(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout}_clean(){this._clearCache(),super._clean()}}var se=ne;(0,a.A)("dxNumberBox",se);var oe=se},27735:function(e,t,i){i.d(t,{A:function(){return ct}});i(69375),i(82438),i(99819),i(57327),i(69033),i(68903),i(21018),i(1415),i(4448),i(58871),i(56539);var a=i(82950),n=i(43607),s=(i(98741),i(61928)),o=i(42576),r=i(82454),l=i(66529),d=i(39904),h=i(35754),u=i(47759),p=i(85563),c=i(29754),_=i(39889),m=i(66703),g=i(44956),v=i(89214),f=i(50172),C=i(27996),y=i(68951),b=i(69135),x=i(46361),D=i(33892);const A="dx-form",w="dx-form-group",I="dx-form-group-caption",V="dx-form-group-custom-caption",T="dx-col-",S="dx-field-item",O="dx-layout-manager-one-col",M="dx-field-item-label-content",k="dx-layout-manager",B="dx-field-item-label",E="dx-field-item-content",R="dx-single-column-item-content",F="dx-root-simple-item",$="dx-form-group-content",P="dx-field-item-has-group",N="dx-field-item-has-tabs",H="dx-form-group-with-caption",L="dx-field-item-tab",W="dx-group-colcount-",z="group-col-count",G="dx-form-validation-summary",Y="dx-form-styling-mode-underlined",K="simple";i(34840);var q=i(58368);const U=["dxTagBox","dxRangeSlider","dxDateRangeBox"],j=["dxRangeSlider","dxDateRangeBox"],X=["dxRangeSlider","dxSlider"],Z=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"],Q=["dxSelectBox","dxDropDownBox","dxTagBox","dxLookup","dxAutocomplete","dxColorBox","dxDateBox","dxDateRangeBox"];function J(e){return null===e||void 0===e?void 0:e.some(e=>"required"===e.type)}function ee(e,t){let{showRequiredMark:i,requiredMark:a,showOptionalMark:n,optionalMark:s}=e;return{showRequiredMark:i&&t,requiredMark:a,showOptionalMark:n&&!t,optionalMark:s}}function te(e){let{item:t,id:i,isRequired:a,managerMarkOptions:n,showColonAfterLabel:s,labelLocation:o,labelTemplate:r,formLabelMode:l,onLabelTemplateRendered:d}=e;const h=Z.includes(t.editorType),p=(0,g.X)({showColon:s,location:o,id:i,visible:"outside"===l||h&&"hidden"!==l,isRequired:a},t?t.label:{},{markOptions:ee(n,a),labelTemplate:r,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(t.editorType)&&(p.labelID=`dx-label-${new u.A}`),!p.text&&t.dataField&&(p.text=(0,q.Bc)(t.dataField)),p.text&&(p.textWithoutColon=p.text,p.text+=p.showColon?":":""),p}function ie(e,t,i){const a=Q.includes(t);return a?{onPopupInitialized:t=>{let{component:a,popup:n}=t;const{openOnFieldClick:s}=a.option(),{hideOnOutsideClick:o}=n.option();if(s&&(0,f.Tn)(o)){const t=t=>{const a=(0,p.A)(t.target),n=e.find(`label[for="${i}"]`),s=!!a.closest(n).length;return!s&&o(t)};a.option("dropDownOptions",{hideOnOutsideClick:t}),n.option({hideOnOutsideClick:t})}}}:{}}function ae(e){let{$parent:t,editorType:i,defaultEditorName:a,editorValue:n,canAssignUndefinedValueToEditor:s,externalEditorOptions:o,editorInputId:r,editorValidationBoundary:l,editorStylingMode:d,formLabelMode:h,labelText:u,labelMark:p}=e;const c={};(void 0!==n||s)&&(c.value=n),U.includes(i)&&(c.value=c.value||[]);let _=null===o||void 0===o?void 0:o.labelMode;(0,f.O9)(_)||(_="outside"===h?"hidden":h);const m=(null===o||void 0===o?void 0:o.stylingMode)||d,v=X.includes(i),C=ie(t,i,r),y=(0,g.X)(!0,c,o,C,{inputAttr:{id:r},validationBoundary:l,stylingMode:m,label:v?null===o||void 0===o?void 0:o.label:u,labelMode:_,labelMark:p});if(o&&(y.dataSource&&(y.dataSource=o.dataSource),y.items&&(y.items=o.items)),a){if(j.includes(i))return"dxRangeSlider"===i&&(y.startName||(y.startName=`${a}Start`),y.endName||(y.endName=`${a}End`)),"dxDateRangeBox"===i&&(y.startDateName||(y.startDateName=`${a}Start`),y.endDateName||(y.endDateName=`${a}End`)),y;y.name||(y.name=a)}return y}function ne(e){let{$parent:t,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:n,item:s,template:o,labelTemplate:r,name:l,formLabelLocation:d,requiredMessageTemplate:h,validationGroup:p,editorValue:c,canAssignUndefinedValueToEditor:_,editorValidationBoundary:m,editorStylingMode:g,showColonAfterLabel:v,managerLabelLocation:C,itemId:y,managerMarkOptions:b,labelMode:x,onLabelTemplateRendered:D}=e;const A=(0,f.O9)(s.isRequired)?s.isRequired:!!J(s.validationRules),w=s.itemType===K,I=s.helpText?`dx-${new u.A}`:null,V=te({item:s,id:y,isRequired:A,managerMarkOptions:b,showColonAfterLabel:v,labelLocation:C,formLabelMode:x,labelTemplate:r,onLabelTemplateRendered:D}),T=!!V.visible&&!!(V.text||V.labelTemplate&&w),{location:S,labelID:O}=V,M="top"!==S&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(s.editorType??""),k=ae({$parent:t,editorType:s.editorType,editorValue:c,defaultEditorName:s.dataField,canAssignUndefinedValueToEditor:_,externalEditorOptions:s.editorOptions,editorInputId:y,editorValidationBoundary:m,editorStylingMode:g,formLabelMode:x,labelText:V.textWithoutColon,labelMark:V.markOptions.showRequiredMark?String.fromCharCode(160)+V.markOptions.requiredMark:""}),B=V.markOptions.showOptionalMark&&!V.visible&&"hidden"!==k.labelMode&&!(0,f.O9)(s.helpText),E=B?V.markOptions.optionalMark:s.helpText;return{$parent:t,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:n,labelOptions:V,labelNeedBaselineAlign:M,labelLocation:S,needRenderLabel:T,item:s,isSimpleItem:w,isRequired:A,template:o,helpID:I,labelID:O,name:l,helpText:E,formLabelLocation:d,requiredMessageTemplate:h,validationGroup:p,editorOptions:k}}function se(e){let{showRequiredMark:t,requiredMark:i,showOptionalMark:a,optionalMark:n}=e;return t||a?String.fromCharCode(160)+(t?i:n):""}function oe(e){const t=se(e);if(""===t)return(0,p.A)();const i=e.showRequiredMark?"dx-field-item-required-mark":"dx-field-item-optional-mark";return(0,p.A)("<span>").addClass(i).text(t)}function re(e){let{text:t,id:i,location:a,alignment:n,labelID:s=null,markOptions:o={},labelTemplate:r,labelTemplateData:l,onLabelTemplateRendered:d}=e;if((!(0,f.O9)(t)||t.length<=0)&&!(0,f.O9)(r))return null;const u=(0,p.A)("<label>").addClass(`${B} dx-field-item-label-location-${a}`).attr("for",i).attr("id",s).css("textAlign",n),c=(0,p.A)("<span>").addClass(M);let _=(0,p.A)("<span>").addClass("dx-field-item-label-text");return _.text(t),r&&(_=(0,p.A)("<div>").addClass("dx-field-item-custom-label-content"),l.text=t,r.render({container:(0,h.cc)(_),model:l,onRendered(){null===d||void 0===d||d()}})),u.append(c.append(_).append(oe(o)))}function le(e){let t=0;const i=e.children.length;for(let a=0;a<i;a+=1){const i=e.children[a];t+=i.offsetWidth}return t}function de(e,t){const i=`${t} > .${B}:not(.dx-field-item-label-location-top) > .${M}`,a=e.find(i),n=a.length;let s=0,o=0;for(let r=0;r<n;r+=1)s=le(a[r]),s>o&&(o=s);for(let r=0;r<n;r+=1)a[r].style.width=`${o}px`}var he=i(71791),ue=i(54624);class pe{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){ue.A.abstract()}}const ce=(e,t)=>`${t?"tabs":"items"}[${e}]`,_e=(e,t)=>(0,f.O9)(e)&&(0,f.O9)(t)?`${e}.${t}`:e||t,me=e=>e?e.replace(/\s/g,""):void 0,ge=(e,t)=>!!e&&(e.dataField===t||e.name===t||me(e.title)===t||"group"===e.itemType&&me(e.caption)===t),ve=(e,t)=>`${e}.${t}`,fe=e=>{const t=e.split(".");return t[t.length-1].replace(/\[\d+]/,"")},Ce=e=>e.includes("tabs"),ye=e=>{const t=e.split("."),i=[...t];for(let a=t.length-1;a>=0;a-=1){if(Ce(t[a]))return i.join(".");i.splice(a,1)}return""},be=(e,t,i)=>{if(!t)return"";const a=e.indexOf(t);if(a>-1)return ce(a,i);for(let n=0;n<e.length;n+=1){const a=e[n],s=a.tabs??a.items;if(s){const e=be(s,t,!!a.tabs);if(e)return _e(ce(n,i),e)??""}}return""};function xe(e){let{form:t,$formElement:i,formOptions:a,items:n,validationGroup:s,extendedLayoutManagerOptions:o,onFieldDataChanged:r,onContentReady:l,onDisposing:d,onFieldItemRendered:h}=e;const u={form:t,items:n,$formElement:i,validationGroup:s,onFieldDataChanged:r,onContentReady:l,onDisposing:d,onFieldItemRendered:h,validationBoundary:a.scrollingEnabled?i:void 0,scrollingEnabled:a.scrollingEnabled,showRequiredMark:a.showRequiredMark,showOptionalMark:a.showOptionalMark,requiredMark:a.requiredMark,optionalMark:a.optionalMark,requiredMessage:a.requiredMessage,screenByWidth:a.screenByWidth,layoutData:a.formData,labelLocation:a.labelLocation,customizeItem:a.customizeItem,minColWidth:a.minColWidth,showColonAfterLabel:a.showColonAfterLabel,onEditorEnterKey:a.onEditorEnterKey,labelMode:a.labelMode},p=(0,g.X)(u,{isRoot:o.isRoot,colCount:o.colCount,alignItemLabels:o.alignItemLabels,cssItemClass:o.cssItemClass,colCountByScreen:o.colCountByScreen,onLayoutChanged:o.onLayoutChanged,width:o.width});return p}class De extends pe{tryExecute(){const{value:e}=this._options,t=this.findInstance();return!!t&&(t.option(e),!0)}}class Ae extends pe{tryExecute(){const e=this.findInstance();if(e){const{optionName:t,item:i,value:a}=this._options,n=this._itemsRunTimeInfo.findItemIndexByItem(i)??-1;if(n>=0)return e.option(ve(`items[${n}]`,t),a),!0}return!1}}class we extends pe{tryExecute(){return!1}}class Ie extends pe{tryExecute(){const e=this.findPreparedItem();return!(null===e||void 0===e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate)&&(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),!0)}}class Ve extends pe{tryExecute(){const e=this.findInstance();if(e){const{value:t}=this._options;return e.option("dataSource",t),!0}return!1}}class Te extends pe{tryExecute(){const{item:e}=this._options,t=this.findInstance(),i=t&&(0,he.p)(t.$element()[0],"dxValidator");if(i&&e){const t=e=>"required"===e.type,a=(i.option("validationRules")||[]).some(t),n=(e.validationRules??[]).some(t);if(a===n)return i.option("validationRules",e.validationRules),!0}return!1}}class Se extends pe{tryExecute(){const e=this.findItemContainer();if(e.length){const{previousValue:t="",value:i=""}=this._options;return e.removeClass(t).addClass(i),!0}return!1}}const Oe=(e,t)=>{switch(e){case"editorOptions":case"buttonOptions":return new De(t);case"validationRules":return new Te(t);case"cssClass":return new Se(t);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return t.optionName=e,new Ae(t);case"tabs":return new Ve(t);case"template":{var i,a;const n=(null===t||void 0===t||null===(i=t.item)||void 0===i?void 0:i.itemType)??(null===(a=t.itemsRunTimeInfo.findPreparedItemByItem(null===t||void 0===t?void 0:t.item))||void 0===a?void 0:a.itemType);return"simple"===n?new we(t):"group"===n?new Ie(t):(t.optionName=e,new Ae(t))}default:return null}};var Me=Oe;i(12266);class ke{constructor(){this._map={}}_findWidgetInstance(e){let t;return(0,v.__)(this._map,(i,a)=>{let{widgetInstance:n,item:s}=a;return!e(s)||(t=n,!1)}),t}_findFieldByCondition(e,t){let i;return(0,v.__)(this._map,(a,n)=>!e(n)||(i="guid"===t?a:n[t],!1)),i}clear(){this._map={}}removeItemsByItems(e){(0,v.__)(e.getItems(),e=>this.removeItemByKey(e))}removeItemByKey(e){delete this._map[e]}add(e){const t=e.guid??(new u.A).toString();return this._map[t]=e,t}addItemsOrExtendFrom(e){e.each((e,t)=>{this._map[e]?(t.widgetInstance&&(this._map[e].widgetInstance=t.widgetInstance),this._map[e].$itemContainer=t.$itemContainer):this.add({item:t.item,widgetInstance:t.widgetInstance,guid:e,$itemContainer:t.$itemContainer})})}extendRunTimeItemInfoByKey(e,t){this._map[e]&&(this._map[e]=(0,g.X)(this._map[e],t))}findWidgetInstanceByItem(e){return this._findWidgetInstance(t=>t===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(t=>{let{path:i}=t;return i===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(t=>{let{path:i}=t;return i===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(t=>e===t.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(t=>e===((0,f.Kg)(t)?t:t.dataField))}findItemContainerByItem(e){for(const t in this._map)if(this._map[t].item===e)return this._map[t].$itemContainer??(0,p.A)();return(0,p.A)()}findItemIndexByItem(e){return this._findFieldByCondition(t=>{let{item:i}=t;return i===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(t=>{let{item:i}=t;return i===e},"preparedItem")}getItems(){return this._map}each(e){(0,v.__)(this._map,(t,i)=>{e(t,i)})}removeItemsByPathStartWith(e){const t=Object.keys(this._map),i=t.filter(t=>{var i;return!!this._map[t].path&&(null===(i=this._map[t].path)||void 0===i?void 0:i.includes(e,0))});i.forEach(e=>this.removeItemByKey(e))}}i(52087),i(90550),i(97755),i(93865);var Be=i(69357),Ee=i(74035),Re=i(80028),Fe=i(1767),$e=i(98064),Pe=i(18134);function Ne(e){return(0,f.O9)(e)?e:"right"}function He(e){switch(e){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}function Le(e){let{item:t,$parent:i,rootElementCssClassList:a,validationGroup:n,createComponentCallback:s}=e;const o=(0,p.A)("<div>").appendTo(i).addClass(a.join(" ")).addClass("dx-field-button-item").css("textAlign",Ne(t.horizontalAlignment));i.css("justifyContent",He(t.verticalAlignment));const r=(0,p.A)("<div>").appendTo(o);return{$rootElement:o,buttonInstance:s(r,(0,g.X)({validationGroup:n},t.buttonOptions))}}function We(e){const{$parent:t,rootElementCssClassList:i}=e;return(0,p.A)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(i.join(" ")).appendTo(t)}var ze=i(59981),Ge=i(19287),Ye=i(93821),Ke=i(35032);function qe(e){const t=e.children().first();return t.hasClass("dx-template-wrapper")?t.children().first():t}function Ue(e){if(e&&(0,y.Nt)((0,y.ss)())){const t=".dx-field-item-content-wrapper",i=e=>{let{element:i,component:a}=e;const{isValid:n,validationMessageMode:s}=a.option();(0,p.A)(i).parents(t).toggleClass("dx-invalid",!1===n&&(a._isFocused()||"always"===s))};e.on("optionChanged",e=>{"isValid"===e.name&&i(e)}),e.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function je(e){var t;return(null===e||void 0===e?void 0:e.data("dx-validation-target"))||(null===e||void 0===e||null===(t=e.parent)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t.data("dx-validation-target"))}function Xe(e,t,i){return{dataField:e.dataField,editorType:e.editorType,editorOptions:t,component:i,name:e.name}}function Ze(e){let{$parent:t,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:n,labelOptions:o,labelNeedBaselineAlign:r,labelLocation:l,needRenderLabel:d,formLabelLocation:u,item:c,editorOptions:_,isSimpleItem:m,isRequired:g,template:v,helpID:f,labelID:C,name:y,helpText:b,requiredMessageTemplate:x,validationGroup:D}=e;const A=(0,p.A)("<div>").addClass(i.join(" ")).appendTo(t);A.addClass(g?"dx-field-item-required":"dx-field-item-optional"),m&&A.addClass("dx-flex-layout"),m&&r&&A.addClass("dx-field-item-label-align");const w=(0,p.A)("<div>");w.data("dx-form-item",c),w.addClass(E).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[u]);let I,V=null;if(d&&(o.labelTemplate&&(o.labelTemplateData=Xe(c,_,a)),V=re(o)),V){const{editorType:e}=c;A.append(V),"top"!==l&&"left"!==l||A.append(w),"right"===l&&A.prepend(w),"top"===l?A.addClass("dx-label-v-align"):A.addClass("dx-label-h-align"),"dxCheckBox"!==e&&"dxSwitch"!==e||s.A.on(V,ze.U,()=>{s.A.trigger(w.children(),ze.U)});const t=["dxCheckBox","dxSwitch","dxRadioGroup"],i=t.includes(e),a=o.alignment,n="left"===a||!a,r=!v,d="top"===l;r&&i&&d&&n&&w.addClass("dx-toggle-controls-paddings")}else A.append(w);if(v)v.render({container:(0,h.cc)(w),model:Xe(c,_,a),onRendered(){const e=qe(w),t=je(e);Ue(t)}});else{const e=(0,p.A)("<div>").appendTo(w);try{I=n(e,c.editorType,_),I.setAria("describedby",f),C&&I.setAria("labelledby",C),I.setAria("required",g)}catch(M){Ye.A.log("E1035",M.message)}}const T=qe(w),S=null===T||void 0===T?void 0:T.data("dx-validation-target");if(S){var O;const e=null===(O=c.label)||void 0===O?void 0:O.text,t=e?null:y,i=e?c.label.text:t&&(0,q.Bc)(t);let a=null;if(m)if(c.validationRules)a=c.validationRules;else{const e=(0,Ge.GP)(x,i);a=c.isRequired?[{type:"required",message:e}]:null}Array.isArray(a)&&a.length&&n(T,Ke.A,{validationRules:a,validationGroup:D,dataGetter:()=>({formItem:c})}),Ue(S)}if(b&&m){const e=w.parent();e.append((0,p.A)("<div>").addClass("dx-field-item-content-wrapper").append(w).append((0,p.A)("<div>").addClass("dx-field-item-help-text").attr("id",f).text(b)))}return{$fieldEditorContainer:w,$rootElement:A,widgetInstance:I}}i(74786);var Qe=i(28299),Je=i(92638);const et="dx-responsivebox-screen-";class tt extends Qe.A{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{rows:[],cols:[],singleColumnScreen:"",screenByWidth:null,height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onLayoutChanged:null})}_init(){const{screenByWidth:e}=this.option();e||this._options.silent("screenByWidth",C.zY),super._init(),this._initLayoutChangedAction()}_initLayoutChangedAction(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readOnly"]})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-responsivebox")}_renderItems(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()}_itemOptionChanged(e){const t=this._findItemElementByItem(e);t.length&&(this._refreshItem(t,e),this._clearItemNodeTemplates(),this._update(!0))}_setScreenSize(){const e=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(et+e),this.option("currentScreenFactor",e)}_removeScreenSizeClass(){const{currentScreenFactor:e}=this.option();e&&this.$element().removeClass(et+e)}_prepareGrid(){this._grid=[],this._prepareRowsAndCols(),(0,v.__)(this._rows,()=>{const e=[];this._grid.push(e),(0,v.__)(this._cols,()=>{e.push(this._createEmptyCell())})})}getSingleColumnRows(){const{rows:e}=this.option(),t=this._screenItems.length;if(null!==e&&void 0!==e&&e.length){const i=this._filterByScreen(e),a=[];for(let e=0;e<t;e+=1){const t=this._defaultSizeConfig();e<i.length&&(0,f.O9)(i[e].shrink)&&(t.shrink=i[e].shrink),a.push(t)}return a}return this._defaultSizeConfig(t)}_prepareRowsAndCols(){if(this._isSingleColumnScreen())this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1);else{const{rows:e,cols:t}=this.option();this._rows=this._sizesByScreen(e),this._cols=this._sizesByScreen(t)}}_isSingleColumnScreen(){const{singleColumnScreen:e,rows:t,cols:i}=this.option();return this._screenRegExp().test(e)||!(null!==t&&void 0!==t&&t.length)||!(null!==i&&void 0!==i&&i.length)}_prepareSingleColumnScreenItems(){this._screenItems.sort((e,t)=>e.location.row-t.location.row||e.location.col-t.location.col),(0,v.__)(this._screenItems,(e,t)=>{Object.assign(t.location,{row:e,col:0,rowspan:1,colspan:1})})}_sizesByScreen(e){return(0,v.Tj)(this._filterByScreen(e),e=>(0,g.X)(this._defaultSizeConfig(),e))}_createDefaultSizeConfig(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}}_defaultSizeConfig(e){const t=this._createDefaultSizeConfig();if(!arguments.length)return t;const i=[];for(let a=0;a<e;a+=1)i.push(t);return i}_filterByScreen(e){const t=this._screenRegExp();return(0,_.VM)(e,e=>!e.screen||t.test(e.screen))}_screenRegExp(){const e=this._getCurrentScreen();return new RegExp(`(^|\\s)${e}($|\\s)`,"i")}_getCurrentScreen(){const e=this._screenWidth(),{screenByWidth:t}=this.option();return null===t||void 0===t?void 0:t(e)}_screenWidth(){return(0,C.Vd)()?(0,Fe.RG)((0,C.zk)()):1920}_createEmptyCell(){return{item:{},location:{colspan:1,rowspan:1}}}_spreadItems(){(0,v.__)(this._screenItems,(e,t)=>{const i=t.location||{},a=i.col,n=i.row,s=this._grid[n],o=null===s||void 0===s?void 0:s[a];this._occupyCells(o,t)})}_itemsByScreen(){const{items:e=[]}=this.option();return e.reduce((e,t)=>{let i=t.location??{};return i=(0,f.Qd)(i)?[i]:i,this._filterByScreen(i).forEach(i=>{e.push({item:t,location:(0,a.A)({rowspan:1,colspan:1},i)})}),e},[])}_occupyCells(e,t){e&&!this._isItemCellOccupied(e,t)&&((0,g.X)(e,t),this._markSpanningCell(e))}_isItemCellOccupied(e,t){if(!(0,f.RI)(e.item))return!0;let i=!1;return this._loopOverSpanning(t.location,e=>{i=i||!(0,f.RI)(e.item)}),i}_loopOverSpanning(e,t){const i=e.row+e.rowspan-1,a=e.col+e.colspan-1,n=Math.min(i,this._rows.length-1),s=Math.min(a,this._cols.length-1);e.rowspan-=i-n,e.colspan-=a-s;for(let o=e.row;o<=n;o+=1)for(let i=e.col;i<=s;i+=1)o===e.row&&i===e.col||t(this._grid[o][i])}_markSpanningCell(e){this._loopOverSpanning(e.location,t=>{t.item=e.item,t.spanningCell=e})}_linkNodeToItem(){(0,v.__)(this._itemElements(),(e,t)=>{const i=(0,p.A)(t),a=i.data("dxBoxItemData");a.box||(a.node=i.children())})}_layoutItems(){const e=this._grid.length,t=e&&this._grid[0].length;if(!e&&!t)return;const i=this._layoutBlock({direction:"col",row:{start:0,end:e-1},col:{start:0,end:t-1}}),a=this._prepareBoxConfig((null===i||void 0===i?void 0:i.box)??{direction:"row",items:[(0,g.X)(i,{ratio:1})]});(0,g.X)(a,this._rootBoxConfig(a.items)),this._$root=(0,p.A)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,Je.A,a)}_rootBoxConfig(e){const t=(0,v.__)(e,(e,t)=>{this._needApplyAutoBaseSize(t)&&(t.baseSize="auto")}),{itemHoldTimeout:i}=this.option();return{width:"100%",height:"100%",items:t,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:i,onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}}_needApplyAutoBaseSize(e){return!e.baseSize&&(!e.minSize||"auto"===e.minSize)&&(!e.maxSize||"auto"===e.maxSize)}_prepareBoxConfig(e){const{onItemStateChanged:t}=this.option();return(0,g.X)(e||{},{crossAlign:"stretch",onItemStateChanged:t})}_layoutBlock(e){return this._isSingleItem(e)?this._itemByCell(e.row.start,e.col.start):this._layoutDirection(e)}_isSingleItem(e){const{row:t,col:i}=e,a=this._grid[t.start][i.start].location,n=t.end-t.start===a.rowspan-1,s=i.end-i.start===a.colspan-1;return n&&s}_itemByCell(e,t){const i=this._grid[e][t];return i.spanningCell?null:i.item}_layoutDirection(e){const t=[],{direction:i}=e,a=this._crossDirection(i);let n=null;while(n=this._nextBlock(e)){if(this._isBlockIndivisible(e.prevBlockOptions,n))throw Ye.A.Error("E1025");const i=this._layoutBlock({direction:a,row:n.row,col:n.col,prevBlockOptions:e});i&&((0,g.X)(i,this._blockSize(n,a)),t.push(i)),e[a].start=n[a].end+1}return{box:this._prepareBoxConfig({direction:i,items:t})}}_isBlockIndivisible(e,t){return!!e&&e.col.start===t.col.start&&e.col.end===t.col.end&&e.row.start===t.row.start&&e.row.end===t.row.end}_crossDirection(e){return"col"===e?"row":"col"}_nextBlock(e){const{direction:t}=e,i=this._crossDirection(t),a=e[t].start,n=e[t].end,s=e[i].start;if(s>e[i].end)return null;let o=1;for(let l=s;l<s+o;l+=1){let e=1;for(let s=a;s<=n;s+=1){const a=this._cellByDirection(t,s,l);e=Math.max(e,a.location[`${i}span`])}const r=l+e,d=s+o;r>d&&(o+=r-d)}const r={};return r[t]={start:a,end:n},r[i]={start:s,end:s+o-1},r}_cellByDirection(e,t,i){return"col"===e?this._grid[i][t]:this._grid[t][i]}_blockSize(e,t){const i="row"===t?"auto":0,n="row"===t?this._rows:this._cols,s=(0,a.A)({},this._createDefaultSizeConfig(),{ratio:0});for(let a=e[t].start;a<=e[t].end;a+=1){const e=n[a];s.ratio+=e.ratio,s.baseSize+=e.baseSize,s.minSize+=e.minSize,s.maxSize+=e.maxSize,(0,f.O9)(e.shrink)&&(s.shrink=e.shrink)}return s.minSize||(s.minSize=i),s.maxSize||(s.maxSize="auto"),this._isSingleColumnScreen()&&(s.baseSize="auto"),s}_update(e){var t;const i=this._$root;this._renderItems(),i&&(e?i.remove():(i.detach(),this._saveAssistantRoot(i))),null===(t=this._layoutChangedAction)||void 0===t||t.call(this)}_saveAssistantRoot(e){this._assistantRoots=this._assistantRoots??[],this._assistantRoots.push(e)}_dispose(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),super._dispose()}_cleanUnusedRoots(){this._assistantRoots&&(0,v.__)(this._assistantRoots,(e,t)=>{(0,p.A)(t).remove()})}_clearItemNodeTemplates(){const{items:e}=this.option();(0,v.__)(e,function(){delete this.node})}_attachClickEvent(){}_optionChanged(e){const{name:t}=e;switch(t){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":super._optionChanged(e),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),super._optionChanged(e);break;case"currentScreenFactor":break;default:super._optionChanged(e)}}_dimensionChanged(){const{currentScreenFactor:e}=this.option();this._getCurrentScreen()!==e&&this._update()}repaint(){this._update()}}(0,l.A)("dxResponsiveBox",tt);var it=tt;const at=200;class nt extends b.Ay{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{layoutData:{},readOnly:!1,colCount:1,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:at,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:r.A.format("dxForm-optionalMark"),requiredMessage:r.A.getFormatter("dxForm-requiredMessage")})}_setOptionsByReference(){super._setOptionsByReference(),(0,g.X)(this._optionsByReference,{layoutData:!0,validationGroup:!0})}_init(){const{layoutData:e}=this.option();super._init(),this._itemWatchers=[],this._itemsRunTimeInfo=new ke,this._updateReferencedOptions(e),this._initDataAndItems(e)}_dispose(){super._dispose(),this._cleanItemWatchers()}_initDataAndItems(e){this._syncDataWithItems(),this._updateItems(e)}_syncDataWithItems(){const{layoutData:e,items:t}=this.option();(0,f.O9)(t)&&t.forEach(t=>{if(t.dataField&&void 0===this._getDataByField(t.dataField)){var i;const a=null===(i=t.editorOptions)||void 0===i?void 0:i.value;((0,f.O9)(a)||t.dataField in e)&&this._updateFieldValue(t.dataField,a)}})}_getDataByField(e){return e?this.option(`layoutData.${e}`):null}_isCheckboxUndefinedStateEnabled(e,t,i){if(e&&"dxCheckBox"===t){const e=["layoutData",...i.split(".")],t=e.pop(),a=this.option(e.join("."));return!!t&&(a&&t in a)}return!1}_updateFieldValue(e,t){const{layoutData:i}=this.option();let a=t;!$e.A.isWrapped(i[e])&&(0,f.O9)(e)?this.option(`layoutData.${e}`,a):$e.A.isWritableWrapped(i[e])&&(a=(0,f.Tn)(a)?a():a,i[e](a)),this._triggerOnFieldDataChanged({dataField:e,value:a})}_triggerOnFieldDataChanged(e){this._createActionByOption("onFieldDataChanged")(e)}_updateItems(e){const{items:t}=this.option(),i=(0,f.O9)(t),{customizeItem:a}=this.option(),n=i?t:this._generateItemsByData(e);if((0,f.O9)(n)){const e=[];(0,v.__)(n,(t,i)=>{this._isAcceptableItem(i)&&(i=this._processItem(i),null===a||void 0===a||a(i),(0,f.Gv)(i)&&!1!==$e.A.unwrap(i.visible)&&e.push(i))}),this._itemWatchers.length&&i||this._updateItemWatchers(n),this._setItems(e),this._sortItems()}}_cleanItemWatchers(){this._itemWatchers.forEach(e=>{e()}),this._itemWatchers=[]}_updateItemWatchers(e){const t=this._getWatch();e.forEach(e=>{(0,f.Gv)(e)&&(0,f.O9)(e.visible)&&(0,f.Tn)(t)&&this._itemWatchers.push(t(()=>$e.A.unwrap(e.visible),()=>{const{layoutData:e}=this.option();this._updateItems(e),this.repaint()},{skipImmediate:!0}))})}_generateItemsByData(e){const t=[];return(0,f.O9)(e)&&(0,v.__)(e,e=>{t.push({dataField:e})}),t}_isAcceptableItem(e){const t=(0,f.Kg)(e)?e:e.dataField,i=this._getDataByField(t);return!((0,f.Tn)(i)&&!$e.A.isWrapped(i))}_processItem(e){if("string"===typeof e&&(e={dataField:e}),"object"!==typeof e||e.itemType||(e.itemType=K),!(0,f.O9)(e.editorType)&&(0,f.O9)(e.dataField)){const t=this._getDataByField(e.dataField);e.editorType=(0,f.O9)(t)?this._getEditorTypeByDataType((0,f.NW)(t)):"dxTextBox"}return"dxCheckBox"===e.editorType&&(e.allowIndeterminateState=e.allowIndeterminateState??!0),e}_getEditorTypeByDataType(e){switch(e){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}}_sortItems(){(0,Ee.Il)(this._items,"visibleIndex"),this._sortIndexes()}_sortIndexes(){var e;null===(e=this._items)||void 0===e||e.sort((e,t)=>{const i=e.visibleIndex,a=t.visibleIndex;return i>a?1:i<a?-1:0})}_initMarkup(){this._itemsRunTimeInfo.clear(),this.$element().addClass(k),super._initMarkup(),this._renderResponsiveBox()}_renderResponsiveBox(){var e;const t=[];if(null!==(e=this._items)&&void 0!==e&&e.length){const e=this._getColCount(),i=(0,p.A)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);const a=this._generateLayoutItems();this._responsiveBox=super._createComponent(i,it,this._getResponsiveBoxConfig(a,e,t)),(0,C.Vd)()||this._renderTemplates(t)}}_itemStateChangedHandler(e){this._refresh()}_renderTemplates(e){let t=0;e.forEach(e=>{var i;let{item:a}=e;null!==a&&void 0!==a&&null!==(i=a.label)&&void 0!==i&&i.template&&(t+=1)}),(0,v.__)(e,(e,i)=>{switch(i.itemType){case"empty":We(i);break;case"button":this._renderButtonItem(i);break;default:this._renderFieldItem(i,t)}})}_getResponsiveBoxConfig(e,t,i){const a=this,{colCountByScreen:n,screenByWidth:s}=this.option(),o=null===n||void 0===n?void 0:n.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:()=>{const{onLayoutChanged:e}=this.option(),t=this.isSingleColumnMode();e&&(this.$element().toggleClass(O,t),e(t))},onContentReady:e=>{(0,C.Vd)()&&this._renderTemplates(i);const{onLayoutChanged:t}=this.option();t&&this.$element().toggleClass(O,this.isSingleColumnMode(e.component))},itemTemplate(e,n,s){var o;const{location:r}=e;if(!r)return;const l=(0,p.A)(s),d=r.row*t,h=null===(o=a._items)||void 0===o?void 0:o[r.col+d];if(!h)return;const u=[h.cssClass??""];l.toggleClass(R,a.isSingleColumnMode(this)),0===r.row&&u.push("dx-first-row"),0===r.col&&u.push("dx-first-col");const{isRoot:c}=a.option();h.itemType===K&&c&&l.addClass(F);const _=r.col===t-1||r.col+r.colspan===t,m=a._getRowsCount(),g=r.row===m-1;if(_&&u.push("dx-last-col"),g&&u.push("dx-last-row"),"empty"!==h.itemType){u.push(S);const{cssItemClass:e=""}=a.option();u.push(e),(0,f.O9)(h.col)&&u.push(`dx-col-${h.col}`)}i.push({itemType:h.itemType,item:h,$parent:l,rootElementCssClassList:u})},cols:this._generateRatio(t),rows:this._generateRatio(this._getRowsCount(),!0),dataSource:e,screenByWidth:s,singleColumnScreen:!o&&"xs"}}_getColCount(){let{colCount:e}=this.option();const t=this.option("colCountByScreen");if(t){const{form:i}=this.option();let a=null===i||void 0===i?void 0:i.getTargetScreenFactor();a||(a=(0,C.Vd)()?(0,C.ne)(this.option("screenByWidth")):"lg"),e=t[a]||e}if("auto"===e){if(this._cashedColCount)return this._cashedColCount;e=this._getMaxColCount(),this._cashedColCount=e}return e<1?1:e}_getMaxColCount(){if(!(0,C.Vd)())return 1;const{minColWidth:e=at}=this.option(),t=(0,Fe.RG)(this.$element()),i=this._items.length,a=Math.floor(t/e)||1;return i<a?i:a}isCachedColCountObsolete(){return!!this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount}_prepareItemsWithMerging(e){const t=(this._items??[]).slice(0);let i=[];for(let a=0;a<t.length;a+=1){const n=t[a];i.push(n);const{alignItemLabels:s}=this.option();if((s||n.alignItemLabels||n.colSpan)&&(n.col=this._getColByIndex(i.length-1,e)),n.colSpan>1&&n.col+n.colSpan<=e){const e=[];for(let t=0;t<n.colSpan-1;t+=1)e.push({merged:!0});i=i.concat(e)}else delete n.colSpan}this._setItems(i)}_getColByIndex(e,t){return e%t}_setItems(e){this._items=e,this._cashedColCount=null}_generateLayoutItems(){const e=this._items??[],t=this._getColCount(),i=[];for(let a=0;a<e.length;a+=1){const n=e[a];if(!n.merged){const e={row:parseInt(String(a/t),10),col:this._getColByIndex(a,t)};(0,f.O9)(n.colSpan)&&(e.colspan=n.colSpan),(0,f.O9)(n.rowSpan)&&(e.rowspan=n.rowSpan);const s={location:e};(0,f.O9)(n.disabled)&&(s.disabled=n.disabled),(0,f.O9)(n.visible)&&(s.visible=n.visible),i.push(s)}}return i}_renderButtonItem(e){const{item:t,$parent:i,rootElementCssClassList:a}=e,{validationGroup:n}=this.option(),{$rootElement:s,buttonInstance:o}=Le({item:t,$parent:i,rootElementCssClassList:a,validationGroup:n,createComponentCallback:(e,t)=>super._createComponent(e,Pe.A,t)});this._itemsRunTimeInfo.add({item:t,widgetInstance:o,guid:t.guid,$itemContainer:s})}_renderFieldItem(e,t){var i;const{item:a,$parent:n,rootElementCssClassList:s}=e,o=this._getDataByField(a.dataField);let r=!1;if(void 0===o){const{allowIndeterminateState:e,editorType:t,dataField:i}=a;r=this._isCheckboxUndefinedStateEnabled(e,t,i)}const l=a.dataField||a.name,d=this._getFormOrThis(),{form:h,labelLocation:u,requiredMessage:p,validationGroup:c,validationBoundary:_,showColonAfterLabel:m,labelMode:g}=this.option(),v=ne({$parent:n,rootElementCssClassList:s,item:a,name:l,editorValue:o,canAssignUndefinedValueToEditor:r,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:u,requiredMessageTemplate:p,validationGroup:c,editorValidationBoundary:_,editorStylingMode:null===h||void 0===h?void 0:h.option("stylingMode"),showColonAfterLabel:Boolean(m),managerLabelLocation:u,template:a.template?this._getTemplate(a.template):null,labelTemplate:null!==(i=a.label)&&void 0!==i&&i.template?this._getTemplate(a.label.template):null,itemId:null===h||void 0===h?void 0:h.getItemID(l),managerMarkOptions:this._getMarkOptions(),labelMode:g,onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(d,t)&&d._alignLabels(this,this.isSingleColumnMode(d))}}),{$fieldEditorContainer:f,widgetInstance:C,$rootElement:y}=Ze(v),{onFieldItemRendered:b}=this.option();null===b||void 0===b||b(),C&&a.dataField&&this._bindDataField(C,a.dataField,f),this._itemsRunTimeInfo.add({item:a,widgetInstance:C,guid:a.guid,$itemContainer:y})}_incTemplateRenderedCallCount(){this._labelTemplateRenderedCallCount=(this._labelTemplateRenderedCallCount??0)+1}_shouldAlignLabelsOnTemplateRendered(e,t){const{templatesRenderAsynchronously:i}=e.option();return!!i&&this._labelTemplateRenderedCallCount===t}_getMarkOptions(){const{showRequiredMark:e,requiredMark:t,showOptionalMark:i,optionalMark:a}=this.option();return{showRequiredMark:e,requiredMark:t,showOptionalMark:i,optionalMark:a}}_getFormOrThis(){const{form:e}=this.option();return e||this}_bindDataField(e,t,i){const a=this._getFormOrThis();e.on("enterKey",e=>{a._createActionByOption("onEditorEnterKey")((0,g.X)(e,{dataField:t}))}),this._createWatcher(e,i,t),this.linkEditorToDataField(e,t)}_createWatcher(e,t,i){const a=this._getWatch();if(!(0,f.Tn)(a))return;const n=a(()=>this._getDataByField(i),()=>{const t=this._getDataByField(i);if("dxTagBox"===e.NAME){const i=e.option("value");if(t!==i&&function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]!==t[i])return!1;return!0}(t,i))return}e.option("value",t)},{deep:!0,skipImmediate:!0},{createWatcherDataField:i});s.A.on(t,Be.N,n)}_getWatch(){if(!(0,f.O9)(this._watch)){const{form:e}=this.option();this._watch=null===e||void 0===e?void 0:e.option("integrationOptions.watchMethod")}return this._watch}_createComponent(e,t,i){const{readOnly:n}=this.option();let s=Object.hasOwn(i,"readOnly");const o=super._createComponent(e,t,(0,a.A)({},i,{readOnly:s?i.readOnly:n}));let r=!1;return o.on("optionChanged",e=>{"readOnly"!==e.name||r||(s=!0)}),this.on("optionChanged",e=>{"readOnly"!==e.name||s||(r=!0,o.option(e.name,e.value),r=!1)}),o}_generateRatio(e,t){const i=[];for(let a=0;a<e;a+=1){const e={ratio:1};t&&(e.baseSize="auto"),i.push(e)}return i}_getRowsCount(){const e=this._items??[];return Math.ceil(e.length/this._getColCount())}_updateReferencedOptions(e){const t=this.option("layoutData");(0,f.Gv)(t)&&Object.getOwnPropertyNames(t).forEach(e=>delete this._optionsByReference[`layoutData.${e}`]),(0,f.Gv)(e)&&Object.getOwnPropertyNames(e).forEach(e=>this._optionsByReference[`layoutData.${e}`]=!0)}_clearWidget(e){this._disableEditorValueChangedHandler=!0,e.clear(),this._disableEditorValueChangedHandler=!1,e.option("isValid",!0)}_optionChanged(e){if(0!==e.fullName.search("layoutData."))switch(e.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"layoutData":{this._updateReferencedOptions(e.value);const{items:t}=this.option();t?(0,f.RI)(e.value)||this._itemsRunTimeInfo.each((t,i)=>{if((0,f.O9)(i.item)){const{dataField:t}=i.item;if(t&&(0,f.O9)(i.widgetInstance)){const a=(0,Re.Hz)(t),n=a(e.value),{allowIndeterminateState:s,editorType:o}=i.item;void 0!==n||this._isCheckboxUndefinedStateEnabled(s,o,t)?i.widgetInstance.option("value",n):this._clearWidget(i.widgetInstance)}}}):(this._initDataAndItems(e.value),this._invalidate());break}case"items":this._cleanItemWatchers(),this._initDataAndItems(e.value),this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":{const{colCount:e}=this.option();"auto"===e&&this._resetColCount();break}case"readOnly":case"onFieldDataChanged":break;case"width":{super._optionChanged(e);const{colCount:t}=this.option();"auto"===t&&this._resetColCount();break}default:super._optionChanged(e)}}_resetColCount(){this._cashedColCount=null,this._invalidate()}linkEditorToDataField(e,t){this.on("optionChanged",i=>{i.fullName===`layoutData.${t}`&&e._setOptionWithoutOptionChange("value",i.value)}),e.on("valueChanged",e=>{const i=(0,f.Gv)(e.value)||Array.isArray(e.value);this._disableEditorValueChangedHandler||i&&e.value===e.previousValue||this._updateFieldValue(t,e.value)})}_dimensionChanged(){const{colCount:e}=this.option();"auto"===e&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")}updateData(e,t){(0,f.Gv)(e)?(0,v.__)(e,(e,t)=>{this._updateFieldValue(e,t)}):"string"===typeof e&&this._updateFieldValue(e,t)}getEditor(e){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(e)??this._itemsRunTimeInfo.findWidgetInstanceByName(e)}isSingleColumnMode(e){const t=this._responsiveBox||e;if(t){const{currentScreenFactor:e,singleColumnScreen:i}=t.option();return e===i}return!1}getItemsRunTimeInfo(){return this._itemsRunTimeInfo}}(0,l.A)("dxLayoutManager",nt);var st=nt,ot=i(65997),rt=i(68554),lt=i(48),dt=i(30336),ht=i(58054);const ut=["items","isRequired","validationRules","visible"];class pt extends b.Ay{_init(){super._init(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new ke,this._groupsColCount=[],this._attachSyncSubscriptions()}_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{formID:`dx-${new u.A}`,formData:{},colCount:1,screenByWidth:C.zY,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:r.A.format("dxForm-optionalMark"),requiredMessage:r.A.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,scrollingEnabled:!1,stylingMode:(0,d.A)().editorStylingMode,labelMode:"outside",isDirty:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,y.Nt)((0,y.ss)()),options:{labelLocation:"top"}},{device:()=>(0,y.gx)((0,y.ss)()),options:{showColonAfterLabel:!1}}])}_setOptionsByReference(){super._setOptionsByReference(),(0,g.X)(this._optionsByReference,{formData:!0,validationGroup:!0})}_getGroupColCount(e){return parseInt(e.attr(z)??"1",10)}_applyLabelsWidthByCol(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=null!==i&&void 0!==i&&i.inOneColumn?S:T+t,n=null!==i&&void 0!==i&&i.excludeTabbed?`:not(.${L})`:"";de(e,`.${a}${n}`)}_applyLabelsWidth(e,t,i,a){const n={excludeTabbed:t,inOneColumn:i},s=i?1:a??this._getGroupColCount(e);for(let o=0;o<s;o+=1)this._applyLabelsWidthByCol(e,o,n)}_getGroupElementsInColumn(e,t,i){const a=(0,f.O9)(i)?`.${W}${i}`:"",n=`.${T}${t} > .${E} > .${w}${a}`;return e.find(n)}_applyLabelsWidthWithGroups(e,t,i){const{alignRootItemLabels:a}=this.option();if(!0===a){const i=e.find(`.${F}`);for(let e=0;e<t;e+=1)this._applyLabelsWidthByCol(i,e)}const n=this.option("alignItemLabelsInAllGroups");if(n)this._applyLabelsWidthWithNestedGroups(e,t,i);else{const e=this.$element().find(`.${w}`);for(let t=0;t<e.length;t+=1)this._applyLabelsWidth(e.eq(t),i,!1,void 0)}}_applyLabelsWidthWithNestedGroups(e,t,i){const a={excludeTabbed:i};for(let n=0;n<t;n+=1){const t=this._getGroupElementsInColumn(e,n);this._applyLabelsWidthByCol(t,0,a);for(let i=0;i<this._groupsColCount.length;i+=1){const t=this._getGroupElementsInColumn(e,n,this._groupsColCount[i]),s=this._getGroupColCount(t);for(let e=1;e<s;e+=1)this._applyLabelsWidthByCol(t,e,a)}}}_labelLocation(){const{labelLocation:e}=this.option();return e}_alignLabelsInColumn(e){const{layoutManager:t,inOneColumn:i,$container:a,excludeTabbed:n,items:s}=e;(0,C.Vd)()&&"top"!==this._labelLocation()&&(i?this._applyLabelsWidth(a,n,!0,void 0):this._checkGrouping(s)?this._applyLabelsWidthWithGroups(a,t._getColCount(),n):this._applyLabelsWidth(a,n,!1,t._getColCount()))}_prepareFormData(){(0,f.O9)(this.option("formData"))||this.option("formData",{})}_setStylingModeClass(){const{stylingMode:e}=this.option();"underlined"===e&&this.$element().addClass(Y)}_initMarkup(){ot.A.addGroup(this._getValidationGroup(),!1),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass(A),this._setStylingModeClass(),super._initMarkup(),this.setAria("role","form",this.$element());const{scrollingEnabled:e}=this.option();e&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()}_attachResizeObserverSubscription(){if((0,C.Vd)()){const e=this.$element().get(0);c.A.unobserve(e),c.A.observe(e,()=>{this._resizeHandler()})}}_resizeHandler(){this._cachedLayoutManagers.length&&(0,v.__)(this._cachedLayoutManagers,(e,t)=>{const{onLayoutChanged:i}=t.option();null===i||void 0===i||i(t.isSingleColumnMode())})}_getCurrentScreenFactor(){const{screenByWidth:e}=this.option();if((0,C.Vd)()){const t=(0,C.ne)(e);return t}return"lg"}_clearCachedInstances(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]}_alignLabels(e,t){const{items:i}=this.option();this._alignLabelsInColumn({$container:this.$element(),layoutManager:e,excludeTabbed:!0,items:i,inOneColumn:t}),(0,o.ho)(this.$element().find(`.${ht.l}`))}_clean(){this._clearValidationSummary(),super._clean(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,c.A.unobserve(this.$element().get(0))}_renderScrollable(){const e=this.option("useNativeScrolling");this._scrollable=new rt.A(this.$element(),{useNative:!!e,useSimulatedScrollbar:!e,useKeyboard:!1,direction:"both",bounceEnabled:!1})}_getContent(){var e;const{scrollingEnabled:t}=this.option();return t?(0,p.A)(null===(e=this._scrollable)||void 0===e?void 0:e.content()):this.$element()}_clearValidationSummary(){var e;null===(e=this._$validationSummary)||void 0===e||e.remove(),this._$validationSummary=void 0,this._validationSummary=void 0}_renderValidationSummary(){this._clearValidationSummary();const{showValidationSummary:e}=this.option();e&&(this._$validationSummary=(0,p.A)("<div>").addClass(G).appendTo(this._getContent()),this._validationSummary=super._createComponent(this._$validationSummary,n.A,{validationGroup:this._getValidationGroup()}))}_prepareItems(e,t,i,n){if(e){const s=[];for(let o=0;o<e.length;o+=1){let r=e[o];const l=_e(i,ce(o,n)),d={item:r,itemIndex:o,path:l},h=this._itemsRunTimeInfo.add(d);if((0,f.Kg)(r)&&(r={dataField:r}),(0,f.Gv)(r)){const e=(0,a.A)({},r);d.preparedItem=e,e.guid=h,this._tryPrepareGroupItemCaption(e),this._tryPrepareGroupItem(e),this._tryPrepareTabbedItem(e,l),this._tryPrepareItemTemplate(e),t&&(e.cssItemClass=L),e.items&&(e.items=this._prepareItems(e.items,t,l)),s.push(e)}else s.push(r)}return s}return e}_isGroupItem(e){return"group"===e.itemType}_tryPrepareGroupItemCaption(e){this._isGroupItem(e)&&(e._prepareGroupCaptionTemplate=t=>{e.captionTemplate&&(e.groupCaptionTemplate=this._getTemplate(t)),e.captionTemplate=this._itemGroupTemplate.bind(this,e)},e._prepareGroupCaptionTemplate(e.captionTemplate))}_tryPrepareGroupItem(e){this._isGroupItem(e)&&(e.alignItemLabels=(0,_.YD)(e.alignItemLabels,!0),e._prepareGroupItemTemplate=t=>{e.template&&(e.groupContentTemplate=this._getTemplate(t)),e.template=this._itemGroupTemplate.bind(this,e)},e._prepareGroupItemTemplate(e.template))}_isTabbedItem(e){return"tabbed"===e.itemType}_tryPrepareTabbedItem(e,t){this._isTabbedItem(e)&&(e.template=this._itemTabbedTemplate.bind(this,e),e.tabs=this._prepareItems(e.tabs,!0,t,!0))}_tryPrepareItemTemplate(e){e.template&&(e.template=this._getTemplate(e.template))}_checkGrouping(e){if(e)for(let t=0;t<e.length;t+=1){const i=e[t];if("group"===i.itemType)return!0}return!1}_renderLayout(){const{items:e}=this.option(),t=this._getContent(),i=this._prepareItems(e),{colCount:a,alignItemLabels:n,screenByWidth:s,colCountByScreen:o}=this.option();this._rootLayoutManager=this._renderLayoutManager(t,this._createLayoutManagerOptions(i,{isRoot:!0,colCount:a,alignItemLabels:n,screenByWidth:s,colCountByScreen:o,onLayoutChanged:e=>{this._alignLabels.bind(this)(this._rootLayoutManager,e)},onContentReady:e=>{this._alignLabels(e.component,e.component.isSingleColumnMode())}}))}_tryGetItemsForTemplate(e){return e.items??[]}_itemTabbedTemplate(e,t,i){const n=(0,p.A)("<div>").appendTo(i),s=(0,a.A)({},e.tabPanelOptions,{dataSource:e.tabs,onItemRendered:t=>{var i,a;null===(i=e.tabPanelOptions)||void 0===i||null===(a=i.onItemRendered)||void 0===a||a.call(i,t),(0,o.I9)(t.itemElement)},itemTemplate:(e,t,i)=>{const{screenByWidth:a}=this.option(),n=(0,p.A)(i),s=(0,_.YD)(e.alignItemLabels,!0),o=this._renderLayoutManager(n,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(e),{colCount:e.colCount,alignItemLabels:s,screenByWidth:a,colCountByScreen:e.colCountByScreen,cssItemClass:e.cssItemClass,onLayoutChanged:t=>{this._alignLabelsInColumn({$container:(0,p.A)(i),layoutManager:o,items:e.items,inOneColumn:t,excludeTabbed:!1})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(e.guid??"",{layoutManager:o}),s&&this._alignLabelsInColumn({$container:n,layoutManager:o,items:e.items,inOneColumn:o.isSingleColumnMode(),excludeTabbed:!1})}}),r=(e,t)=>{Array.isArray(e)&&e.forEach(e=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(e.guid??"",{widgetInstance:t}))},l=this._createComponent(n,lt.Ay,s);(0,p.A)(i).parent().addClass(N),l.on("optionChanged",e=>{const{fullName:t,value:i,component:a}=e;"dataSource"===t&&r(i,a)}),r([{guid:e.guid},...e.tabs??[]],l)}_itemGroupCaptionTemplate(e,t,i){if(e.groupCaptionTemplate){const a=(0,p.A)("<div>").addClass(V).attr("id",i).appendTo(t);return e._renderGroupCaptionTemplate=()=>{var t;const i={component:this,caption:e.caption,name:e.name};null===(t=e.groupCaptionTemplate)||void 0===t||t.render({model:i,container:(0,h.cc)(a)})},void e._renderGroupCaptionTemplate()}e.caption&&(0,p.A)("<span>").addClass(I).text(e.caption).attr("id",i).appendTo(t)}_itemGroupContentTemplate(e,t){const i=(0,p.A)("<div>").addClass($).appendTo(t);if(e.groupContentTemplate)e._renderGroupContentTemplate=()=>{var t;i.empty();const a={formData:this.option("formData"),component:this};null===(t=e.groupContentTemplate)||void 0===t||t.render({model:a,container:(0,h.cc)(i)})},e._renderGroupContentTemplate();else{var a;const n=this._renderLayoutManager(i,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(e),{colCount:e.colCount,colCountByScreen:e.colCountByScreen,alignItemLabels:e.alignItemLabels,cssItemClass:e.cssItemClass}));null===(a=this._itemsRunTimeInfo)||void 0===a||a.extendRunTimeItemInfoByKey(e.guid??"",{layoutManager:n});const s=n._getColCount();this._groupsColCount.includes(s)||this._groupsColCount.push(s),t.addClass(W+s),t.attr(z,s)}}_itemGroupTemplate(e,t,i){var a;const{id:n}=t.editorOptions.inputAttr,s=(0,p.A)("<div>").toggleClass(H,!(null===(a=e.caption)||void 0===a||!a.length)).addClass(w).appendTo(i),o={role:"group",labelledby:n};this.setAria(o,s),(0,p.A)(i).parent().addClass(P),this._itemGroupCaptionTemplate(e,s,n),this._itemGroupContentTemplate(e,s)}_createLayoutManagerOptions(e,t){return xe({form:this,formOptions:this.option(),$formElement:this.$element(),items:e,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:t,onFieldDataChanged:e=>{this._isDataUpdating||this._triggerOnFieldDataChanged(e)},onContentReady:e=>{var i;this._itemsRunTimeInfo.addItemsOrExtendFrom(e.component._itemsRunTimeInfo),null===(i=t.onContentReady)||void 0===i||i.call(t,e)},onDisposing:e=>{const{component:t}=e,i=t.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(i)},onFieldItemRendered:()=>{var e;null===(e=this._validationSummary)||void 0===e||e.refreshValidationGroup()}})}_renderLayoutManager(e,t){const i={lg:t.colCount,md:t.colCount,sm:t.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:(0,g.X)(i,t.colCountByScreen)});const a=(0,p.A)("<div>");a.appendTo(e);const n=this._createComponent(a,st,t);return n.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(n),n}_getValidationGroup(){const{validationGroup:e}=this.option();return e??this}_createComponent(e,t,i){const{readOnly:a}=this.option();return this._extendConfig(i??{},{readOnly:a}),super._createComponent(e,t,i)}_attachSyncSubscriptions(){this.on("optionChanged",e=>{const{fullName:t,name:i}=e;"formData"===t&&((0,f.O9)(e.value)||this._options.silent("formData",e.value={}),this._triggerOnFieldDataChangedByDataSet(e.value)),this._cachedLayoutManagers.length&&(0,v.__)(this._cachedLayoutManagers,(a,n)=>{"formData"===t&&(this._isDataUpdating=!0,n.option("layoutData",e.value),this._isDataUpdating=!1),"readOnly"!==i&&"disabled"!==i||n.option(t,e.value)})})}_optionChanged(e){const{fullName:t}=e,i=t.split(".");i.length>1&&-1!==i[0].search("items")&&this._itemsOptionChangedHandler(e)||i.length>1&&-1!==i[0].search("formData")&&this._formDataOptionChangedHandler(e)||this._defaultOptionChangedHandler(e)}_defaultOptionChangedHandler(e){switch(e.name){case"formData":this.option("items")?(0,f.RI)(e.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":{const{colCount:e}=this.option();"auto"===e&&this._invalidate();break}case"width":super._optionChanged(e),this._rootLayoutManager.option(e.name,e.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":ot.A.removeGroup(e.previousValue||this),this._invalidate();break;default:super._optionChanged(e)}}_itemsOptionChangedHandler(e){const{value:t,fullName:i}=e,a=i.split("."),n=this._getItemPath(a),s=this.option(n),o=i.replace(`${n}.`,""),r=o.split(".")[0].replace(/\[\d+]/,""),l=this._tryCreateItemOptionAction(r,s,s[r],e.previousValue,n);let d=this._tryExecuteItemOptionAction(l)??this._tryChangeLayoutManagerItemOption(i,t);if(!d&&s){this._changeItemOption(s,o,t);const{items:e}=this.option(),i=this._generateItemsFromData(e);this.option("items",i),d=!0}return d}_formDataOptionChangedHandler(e){const t=e.fullName.split("."),{value:i}=e,a=t.slice(1).join("."),n=this.getEditor(a);return n?n.option("value",i):this._triggerOnFieldDataChanged({dataField:a,value:i}),!0}_tryCreateItemOptionAction(e,t,i,a,n){let s=i;return"tabs"===e&&(this._itemsRunTimeInfo.removeItemsByPathStartWith(`${n}.tabs`),s=this._prepareItems(s,!0,n,!0)),Me(e,{item:t,value:s,previousValue:a,itemsRunTimeInfo:this._itemsRunTimeInfo})}_tryExecuteItemOptionAction(e){return null===e||void 0===e?void 0:e.tryExecute()}_updateValidationGroupAndSummaryIfNeeded(e){const t=fe(e);var i;ut.includes(t)&&(ot.A.addGroup(this._getValidationGroup(),!1),this.option("showValidationSummary")&&(null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup()))}_setLayoutManagerItemOption(e,t,i,a){if(this._updateLockCount>0){e._updateLockCount||e.beginUpdate();const t=this._itemsRunTimeInfo.findKeyByPath(a);this.postponedOperations.add(t,()=>(e._disposed||e.endUpdate(),(0,m.cY)().resolve()))}const n=e=>{if(e.component.off("contentReady",n),Ce(a)){const e=ye(a),t=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(e);if(t){const{items:e}=t.option();this._alignLabelsInColumn({items:e,layoutManager:t,$container:t.$element(),inOneColumn:t.isSingleColumnMode(),excludeTabbed:!1})}}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};e.on("contentReady",n),e.option(t,i),this._updateValidationGroupAndSummaryIfNeeded(t)}_tryChangeLayoutManagerItemOption(e,t){const i=e.split("."),a=fe(e);if("items"===a&&i.length>1){const e=this._getItemPath(i),n=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(e);if(n){this._itemsRunTimeInfo.removeItemsByItems(n.getItemsRunTimeInfo());const i=this._prepareItems(t,!1,e);return this._setLayoutManagerItemOption(n,a,i,e),!0}}else if(i.length>2){const e=i.length-2,n=this._getItemPath(i.slice(0,e)),s=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(n);if(s){const o=ve(i[e],a);if("editorType"===a&&s.option(o)!==t)return!1;if("visible"===a){const e=this.option(ve(n,"items"));if(null!==e&&void 0!==e&&e.length){const{items:t}=s.option();e.forEach((e,i)=>{const a=t[i];a.visibleIndex=e.visibleIndex})}}return this._setLayoutManagerItemOption(s,o,t,n),!0}}return!1}_tryChangeLayoutManagerItemOptions(e,t){let i=!1;return this.beginUpdate(),(0,v.__)(t,(t,a)=>(i=this._tryChangeLayoutManagerItemOption(ve(e,t),a),!!i)),this.endUpdate(),i}_getItemPath(e){let t=e[0];for(let i=1;i<e.length;i+=1){if(-1===e[i].search(/items\[\d+]|tabs\[\d+]/))break;t+=`.${e[i]}`}return t}_triggerOnFieldDataChanged(e){this._updateIsDirty(e.dataField??""),this._createActionByOption("onFieldDataChanged")(e)}_triggerOnFieldDataChangedByDataSet(e){e&&(0,f.Gv)(e)&&Object.keys(e).forEach(t=>{this._triggerOnFieldDataChanged({dataField:t,value:e[t]})})}_updateFieldValue(e,t){const{formData:i}=this.option();if((0,f.O9)(i)){const i=this.getEditor(e);if(this.option(`formData.${e}`,t),i){const e=i.option("value");e!==t&&i.option("value",t)}}}_generateItemsFromData(e){const{formData:t}=this.option(),i=[];return!e&&(0,f.O9)(t)&&(0,v.__)(t,e=>{i.push({dataField:e})}),e&&(0,v.__)(e,(e,t)=>{(0,f.Gv)(t)?i.push(t):i.push({dataField:t})}),i}_getItemByField(e,t){const i=(0,f.Gv)(e)?e:this._getFieldParts(e),{fieldName:a}=i,{fieldPath:n}=i;let s=null;return t.length&&(0,v.__)(t,(e,t)=>{const{itemType:i}=t;if(n.length){const e=n.slice();t=this._getItemByFieldPath(e,a,t)}else if(this._isGroupItem(t)&&!t.caption&&!t.name||"tabbed"===i&&!t.name){const e=this._getSubItemField(i);t.items=this._generateItemsFromData(t.items),t=this._getItemByField({fieldName:a,fieldPath:n},t[e])}return!ge(t,a)||(s=t,!1)}),s}_getFieldParts(e){const[t,...i]=e.split(".").reverse();return{fieldName:t,fieldPath:i}}_getItemByFieldPath(e,t,i){const{itemType:a}=i,n=this._getSubItemField(a),s="group"===a||"tabbed"===a||i.title;let o=null;do{if(!s)break;{const a=i.name||i.caption||i.title,s=(0,f.O9)(a),r=me(a);let l="";if(i[n]=this._generateItemsFromData(i[n]),s&&(l=e.pop()),!e.length&&r===l&&(o=this._getItemByField(t,i[n]),o))break;const d=!s||s&&r===l;if(d&&e.length&&(o=this._searchItemInEverySubItem(e,t,i[n]),!o))break}}while(e.length&&!(0,f.O9)(o));return o}_getSubItemField(e){return"tabbed"===e?"tabs":"items"}_searchItemInEverySubItem(e,t,i){let a=null;return(0,v.__)(i,(i,n)=>(a=this._getItemByFieldPath(e.slice(),t,n),!a)),a}_changeItemOption(e,t,i){(0,f.Gv)(e)&&(e[t]=i)}_dimensionChanged(){const e=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==e&&(this._isColCountChanged(this._lastMarkupScreenFactor,e)&&(this._targetScreenFactor=e,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=e)}_isColCountChanged(e,t){let i=!1;return(0,v.__)(this._cachedColCountOptions,(a,n)=>n.colCountByScreen[e]===n.colCountByScreen[t]||(i=!0,!1)),i}_refresh(){const e=`.${dt.An}.${b.zM}:not(.${x.E}) .${dt.VB}`;s.A.trigger(this.$element().find(e),"change"),super._refresh()}_updateIsDirty(e){const t=this.getEditor(e);t&&(t.option("isDirty")?this._dirtyFields.add(e):this._dirtyFields.delete(e),this.option("isDirty",!!this._dirtyFields.size))}updateRunTimeInfoForEachEditor(e){this._itemsRunTimeInfo.each((t,i)=>{const{widgetInstance:a}=i;(0,f.O9)(a)&&D.A.isEditor(a)&&e(a)})}_clear(){this.updateRunTimeInfoForEachEditor(e=>{e.clear(),e.option("isValid",!0)}),ot.A.resetGroup(this._getValidationGroup())}_updateData(e,t,i){const a=i?t:e;(0,f.Gv)(a)?(0,v.__)(a,(t,a)=>{this._updateData(i?`${e}.${t}`:t,a,(0,f.Gv)(a))}):(0,f.Kg)(e)&&this._updateFieldValue(e,t)}registerKeyHandler(e,t){super.registerKeyHandler(e,t),this._itemsRunTimeInfo.each((i,a)=>{(0,f.O9)(a.widgetInstance)&&a.widgetInstance.registerKeyHandler(e,t)})}_focusTarget(){return this.$element().find(`.${E} [tabindex]`).first()}_visibilityChanged(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())}_clearAutoColCountChangedTimeout(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)}_dispose(){this._clearAutoColCountChangedTimeout(),ot.A.removeGroup(this._getValidationGroup()),super._dispose()}clear(){this._clear()}resetValues(){this._clear()}reset(e){this.updateRunTimeInfoForEachEditor(t=>{const{name:i=""}=t.option();e&&i in e?(t.reset(e[i]),this._updateIsDirty(i)):t.reset()}),this._renderValidationSummary()}updateData(e,t){this._updateData(e,t)}getEditor(e){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(e)??this._itemsRunTimeInfo.findWidgetInstanceByName(e)}getButton(e){return this._itemsRunTimeInfo.findWidgetInstanceByName(e)}updateDimensions(){const e=(0,m.cY)();return this._scrollable?this._scrollable.update().done(()=>{e.resolveWith(this)}):e.resolveWith(this),e.promise()}itemOption(e,t,i){const{items:a}=this.option(),n=this._generateItemsFromData(a),s=this._getItemByField(e,n),o=be(n,s);if(s){if(1===arguments.length)return s;switch(arguments.length){case 3:{const e=this._tryCreateItemOptionAction(t,s,i,s[t??""],o);this._changeItemOption(s,t??"",i);const a=ve(o,t);this._tryExecuteItemOptionAction(e)||this._tryChangeLayoutManagerItemOption(a,i)||this.option("items",n);break}default:if((0,f.Gv)(t)&&!this._tryChangeLayoutManagerItemOptions(o,t)){let e=!1;(0,v.__)(t,(t,i)=>{const a=this._tryCreateItemOptionAction(t,s,i,s[t],o);this._changeItemOption(s,t,i),e||this._tryExecuteItemOptionAction(a)||(e=!0)}),e&&this.option("items",n)}}}}validate(){return ot.A.validateGroup(this._getValidationGroup())}getItemID(e){const{formID:t}=this.option();return`dx_${t}_${e||new u.A}`}getTargetScreenFactor(){return this._targetScreenFactor}}(0,l.A)("dxForm",pt);var ct=pt},35032:function(e,t,i){i.d(t,{A:function(){return f}});i(69375),i(82438),i(34840);var a=i(82950),n=i(66529),s=i(71791),o=i(47759),r=i(24714),l=i(66703),d=i(44956),h=i(89214),u=i(93821),p=i(22920),c=i(65997),_=(i(57327),i(54624));class m extends(_.A.inherit({})){ctor(e,t){this.editor=e,this.validator=t,this.validationRequestsCallbacks=[];const i=e=>{this.validationRequestsCallbacks.forEach(t=>t(e))};e.validationRequest.add(i),e.on("disposing",()=>{e.validationRequest.remove(i)})}getValue(){return this.editor.option("value")}getCurrentValidationError(){return this.editor.option("validationError")}bypass(){return this.editor.option("disabled")}applyValidationResults(e){this.editor.option({validationErrors:e.brokenRules,validationStatus:e.status})}reset(){this.editor.clear()}focus(){this.editor.focus()}}var g=m;class v extends p.A{_initOptions(e){super._initOptions.apply(this,arguments),this.option(c.A.initValidationOptions(e))}_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{validationRules:[]})}_init(){super._init(),this._initGroupRegistration(),this.focused=(0,r.A)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}}_initGroupRegistration(){const e=this._findGroup();this._groupWasInit||this.on("disposing",e=>{c.A.removeRegisteredValidator(e.component._validationGroup,e.component)}),this._groupWasInit&&this._validationGroup===e||(c.A.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=e,c.A.registerValidatorInGroup(e,this))}_setOptionsByReference(){super._setOptionsByReference(),(0,d.X)(this._optionsByReference,{validationGroup:!0})}_getEditor(){const e=this.$element()[0];return(0,s.p)(e,"dx-validation-target")}_initAdapter(){const e=this._getEditor();let{adapter:t}=this.option();if(!t){var i;if(e)return t=new g(e,this),null===(i=t)||void 0===i||null===(i=i.validationRequestsCallbacks)||void 0===i||i.push(e=>{var t;null!==(t=this._validationInfo)&&void 0!==t&&t.skipValidation||this.validate(e)}),void this.option("adapter",t);throw u.A.Error("E0120")}const a=t.validationRequestsCallbacks;a&&a.push(e=>{this.validate(e)})}_toggleRTLDirection(e){var t;const{adapter:i}=this.option(),a=(null===i||void 0===i||null===(t=i.editor)||void 0===t?void 0:t.option("rtlEnabled"))??e;super._toggleRTLDirection(a)}_initMarkup(){this.$element().addClass("dx-validator"),super._initMarkup()}_render(){super._render(),this._toggleAccessibilityAttributes()}_toggleAccessibilityAttributes(){const e=this._getEditor();if(e){const t=this.option("validationRules")||[],i=t.some(e=>{let{type:t}=e;return"required"===t})||null;e.isInitialized()&&e.setAria("required",i),e.option("_onMarkupRendered",()=>{e.setAria("required",i)})}}_visibilityChanged(e){e&&this._initGroupRegistration()}_optionChanged(e){switch(e.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(c.A.synchronizeValidationOptions(e,this.option()));break;default:super._optionChanged(e)}}_getValidationRules(){return this._validationRules||(this._validationRules=(0,h.Tj)(this.option("validationRules"),(e,t)=>(0,d.X)({},e,{validator:this,index:t}))),this._validationRules}_findGroup(){const e=this.$element(),{validationGroup:t}=this.option();return t||c.A.findGroup(e,this._modelByElement(e))}_resetValidationRules(){delete this._validationRules}validate(e){var t,i,a,n,s;const{adapter:r,name:l}=this.option(),h=null===r||void 0===r||null===(t=r.bypass)||void 0===t?void 0:t.call(r),u=e&&void 0!==e.value?e.value:null===r||void 0===r||null===(i=r.getValue)||void 0===i?void 0:i.call(r),p=null===r||void 0===r||null===(a=r.getCurrentValidationError)||void 0===a?void 0:a.call(r),_=this._getValidationRules(),m=null===(n=this._validationInfo)||void 0===n?void 0:n.result;if(m&&"pending"===m.status&&m.value===u)return(0,d.X)({},m);let g;return h?g={isValid:!0,status:"valid"}:null!==p&&void 0!==p&&p.editorSpecific?(p.validator=this,g={isValid:!1,status:"invalid",brokenRule:p,brokenRules:[p]}):g=c.A.validate(u,_,l),g.id=(new o.A).toString(),this._applyValidationResult(g,r),null===(s=g.complete)||void 0===s||s.then(e=>{e.id===this._validationInfo.result.id&&this._applyValidationResult(e,r)}),(0,d.X)({},this._validationInfo.result)}reset(){const{adapter:e}=this.option(),t={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null};this._validationInfo.skipValidation=!0,e.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(t,e)}_updateValidationResult(e){if(this._validationInfo.result&&this._validationInfo.result.id===e.id)for(const t in e)"id"!==t&&"complete"!==t&&(this._validationInfo.result[t]=e[t]);else{const t=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=(0,d.X)({},e,{complete:t})}}_applyValidationResult(e,t){const i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(e.validator=this,this._updateValidationResult(e),t.applyValidationResults&&t.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),"pending"===this._validationInfo.result.status)return this._validationInfo.deferred||(this._validationInfo.deferred=(0,l.cY)(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);"pending"!==this._validationInfo.result.status&&(i(e),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(e),this._validationInfo.deferred=null))}focus(){const{adapter:e}=this.option();e&&e.focus&&e.focus()}_useTemplates(){return!1}}(0,n.A)("dxValidator",v);var f=v},43607:function(e,t,i){i(69375);var a=i(82950),n=i(61928),s=i(66529),o=i(39889),r=i(44956),l=i(89214),d=i(22451),h=i(65997);const u="dx-validationsummary-item",p="dx-validationsummary-item-data";class c extends d.Ay{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{focusStateEnabled:!1,noDataText:null})}_setOptionsByReference(){super._setOptionsByReference(),(0,r.X)(this._optionsByReference,{validationGroup:!0})}_init(){super._init(),this._initGroupRegistration()}_initGroupRegistration(){const e=this.$element(),{validationGroup:t}=this.option(),i=t||h.A.findGroup(e,this._modelByElement(e)),a=h.A.addGroup(i,!0);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=i,this.groupSubscription=this._groupValidationHandler.bind(this),a.on("validated",this.groupSubscription)}_unsubscribeGroup(){const e=h.A.getGroupConfig(this._validationGroup);null===e||void 0===e||e.off("validated",this.groupSubscription)}_getOrderedItems(e,t){let i=[];return(0,l.__)(e,(e,a)=>{const n=(0,o.VM)(t,e=>{if(e.validator===a)return!0});n.length&&(i=i.concat(n))}),i}_groupValidationHandler(e){const t=this._getOrderedItems(e.validators,(0,l.Tj)(e.brokenRules,e=>({text:e.message,validator:e.validator,index:e.index})));this.validators=e.validators,(0,l.__)(this.validators,(e,t)=>{if(t._validationSummary!==this){let e=this._itemValidationHandler.bind(this);const i=function(){t.off("validated",e),t._validationSummary=null,e=null};t.on("validated",e),t.on("disposing",i),t._validationSummary=this}}),this.option("items",t)}_itemValidationHandler(e){let{isValid:t,validator:i,brokenRules:a}=e,{items:n}=this.option(),s=!1,r=0;while(r<n.length){const e=n[r];if(e.validator===i){const i=(0,o.VM)(a||[],t=>t.index===e.index)[0];if(t||!i){n.splice(r,1),s=!0;continue}i.message!==e.text&&(e.text=i.message,s=!0)}r++}(0,l.__)(a,(e,t)=>{const a=(0,o.VM)(n,e=>e.validator===i&&e.index===t.index)[0];a||(n.push({text:t.message,validator:i,index:t.index}),s=!0)}),s&&(n=this._getOrderedItems(this.validators,n),this.option("items",n))}_initMarkup(){this.$element().addClass("dx-validationsummary"),super._initMarkup()}_optionChanged(e){"validationGroup"===e.name?this._initGroupRegistration():super._optionChanged(e)}_itemClass(){return u}_itemDataKey(){return p}_postprocessRenderItem(e){n.A.on(e.itemElement,"click",()=>{var t,i;null===(t=e.itemData.validator)||void 0===t||null===(i=t.focus)||void 0===i||i.call(t)})}_dispose(){super._dispose(),this._unsubscribeGroup()}refreshValidationGroup(){this._initGroupRegistration()}}(0,s.A)("dxValidationSummary",c),t.A=c},50404:function(e,t,i){i.d(t,{A:function(){return se}});i(82438),i(57327),i(50020);var a=i(82950),n=i(63029),s=i(22044),o=i(61928),r=i(86498),l=i(96084),d=i(74567),h=i(59025),u=i(82454),p=i(66529),c=i(90218),_=i(47759),m=i(85563),g=i(6815),v=i(30816),f=i(86103),C=i(58936),y=i(1767),b=i(50172),x=i(27996),D=i(68951),A=i(18134),w=i(33892);i(69375),i(12266);class I{constructor(e){this.calendar=e}dateValue(e,t){this.calendar._dateValue(e,t)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,t){this.calendar._updateAriaSelected(e,t);const{currentDate:i=new Date}=this.calendar.option();e[0]&&i.getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,t){var i,a;let n=e,s=t;(0,b.O9)(n)&&!Array.isArray(n)&&(n=[n]),(0,b.O9)(s)&&!Array.isArray(s)&&(s=[s]),n=(null===(i=n)||void 0===i?void 0:i.map(e=>this._convertToDate(e)))??[],s=(null===(a=s)||void 0===a?void 0:a.map(e=>this._convertToDate(e)))??[],this._updateViewsValue(n.filter(e=>null!==e)),this.updateAriaSelected(n,s),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){const t=this.calendar._getDateOption("min"),i=this.calendar._getDateOption("max"),a=(0,b.O9)(t)&&e<t&&!v.A.sameDate(t,e),n=(0,b.O9)(i)&&e>i&&!v.A.sameDate(i,e);return this.calendar._view.isDateDisabled(e)||a||n}_getLowestDateInArray(e){return e.length?new Date(Math.min(...e.map(e=>(null===e||void 0===e?void 0:e.getTime())??1/0))):null}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,t){this.calendar._updateViewsOption(e,t)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){const{selectionMode:e,selectWeekOnClick:t}=this.calendar.option();return!0===t&&"single"!==e}}var V=I;class T extends V{constructor(e){super(e),this.NAME="MultiSelection"}dateOption(e){return"value"===e?this.calendar._getDateOption("value"):this.calendar._getDateOption(e)}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multiple",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){const i=[...this.dateOption("value")],a=i.findIndex(t=>(null===t||void 0===t?void 0:t.toDateString())===e.toDateString());a>-1?i.splice(a,1):i.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(i,t)}updateAriaSelected(e,t){const i=e??this.dateOption("value"),a=t??[];super.updateAriaSelected(i,a)}getDefaultCurrentDate(){const e=this.dateOption("value"),t=e.filter(e=>null!==e);return this._getLowestDateInArray(t)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){let{rowDates:t,event:i}=e;const a=t.filter(e=>!this._isDateDisabled(e));this.dateValue(a,i)}}var S=T,O=i(69135);class M extends O.Ay{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{onClick:void 0,onCaptionClick:void 0,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,D.gx)((0,D.ss)()),options:{type:"default",stylingMode:"text"}},{device:()=>(0,D.Ft)((0,D.ss)()),options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),(0,m.A)(this.element()).addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){const{rtlEnabled:e,type:t,stylingMode:i,focusStateEnabled:a}=this.option();this._prevButton=this._createComponent((0,m.A)("<div>"),A.A,{focusStateEnabled:a,icon:e?"chevronright":"chevronleft",onClick:e=>{var t;null===(t=this._clickAction)||void 0===t||t.call(this,{direction:-1,event:e})},type:t,stylingMode:i,integrationOptions:{}});const n=(0,m.A)(this._prevButton.element()).addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,m.A)("<div>"),A.A,{focusStateEnabled:a,icon:e?"chevronleft":"chevronright",onClick:e=>{var t;null===(t=this._clickAction)||void 0===t||t.call(this,{direction:1,event:e})},type:t,stylingMode:i,integrationOptions:{}});const s=(0,m.A)(this._nextButton.element()).addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,m.A)("<div>").addClass("dx-calendar-caption-button"),A.A,{focusStateEnabled:a,onClick:e=>{var t;null===(t=this._captionClickAction)||void 0===t||t.call(this,{event:e})},type:t,stylingMode:i,template:(e,t)=>{const{text:i}=this.option(),a=i.split(" - ");a.forEach(e=>{(0,m.A)(t).append((0,m.A)("<span>").addClass("dx-button-text").text(e))})},integrationOptions:{}});const o=this._caption.$element();this.$element().append(n).append(o).append(s)}_renderCaption(){var e;const{text:t}=this.option();null===(e=this._caption)||void 0===e||e.option("text",t)}toggleButton(e,t){const i=`_${e}Button`,a=this[i];a&&(a.option("disabled",t),a.$element().toggleClass("dx-calendar-disabled-navigator-link",t))}_optionChanged(e){const{name:t}=e;"text"===t?this._renderCaption():super._optionChanged(e)}}var k=M;class B extends V{constructor(e){super(e),this.NAME="RangeSelection"}dateOption(e){return"value"===e?this.calendar._getDateOption("value")||null:this.calendar._getDateOption(e)}getViewOptions(){const e=this._getValue(),t=this._getDaysInRange(e[0],e[1]);return{value:e,range:t,selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){const[i,a]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0;const{allowChangeSelectionOrder:n,currentSelection:s}=this.calendar.option();if(!0===n){this.calendar._valueSelected=!0;const n=this.calendar._convertToDate(e);"startDate"===s?n>(this.calendar._convertToDate(a)??new Date(0))?this.dateValue([e,null],t):this.dateValue([e,a],t):n>=(this.calendar._convertToDate(i)??new Date(0))?this.dateValue([i,e],t):this.dateValue([e,null],t)}else!i||a?this.dateValue([e,null],t):this.dateValue(i<e?[i,e]:[e,i],t)}updateAriaSelected(e,t){const i=e??this._getValue(),a=t??[];super.updateAriaSelected(i,a)}processValueChanged(e,t){super.processValueChanged(e,t);const i=this._getRange();this._updateViewsOption("range",i)}getDefaultCurrentDate(){const{allowChangeSelectionOrder:e,currentSelection:t}=this.calendar.option(),i=this.dateOption("value");if(e){if("startDate"===t&&i[0])return i[0];if("endDate"===t&&i[1])return i[1]}const a=i.filter(e=>null!==e);return this._getLowestDateInArray(a)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){const e=this.dateOption("value");if(!e.length)return e;let[t,i]=e;return t&&i&&t>i&&([t,i]=[i,t]),[t,i]}_getRange(){const[e,t]=this._getValue();return this._getDaysInRange(e,t)}_getDaysInRange(e,t){if(!e||!t)return[];const{currentDate:i,viewsCount:a}=this.calendar.option(),n=this.calendar._isAdditionalViewDate(i),s=v.A.getFirstMonthDate(i,n?-2:-1),o=v.A.getLastMonthDate(i,n?1:a),r=new Date(Math.max(s.getTime(),e.getTime())),l=new Date(Math.min(o.getTime(),t.getTime()));return[...v.A.getDatesOfInterval(r,l,864e5),l]}_cellHoverHandler(e){const t=this._isMaxZoomLevel(),[i,a]=this._getValue(),{allowChangeSelectionOrder:n,currentSelection:s}=this.calendar.option();if(t){const t=n&&"startDate"===s;if(!i||a||t){if(i||!a||n&&"endDate"===s){if(i&&a){if("startDate"===s&&e.value<i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,i));if("endDate"===s&&e.value>a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(a,e.value))}}else if(e.value<a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,a))}else if(e.value>i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(i,e.value));this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){let{rowDates:t,event:i}=e;const a=t.filter(e=>!this._isDateDisabled(e)),n=a.length?[a[0],a[a.length-1]]:[null,null];this.dateValue(n,i)}}var E=B;class R extends V{constructor(e){super(e),this.NAME="SingleSelection"}dateOption(e){return"value"===e?this.calendar._getDateOption("value"):this.calendar._getDateOption(e)}getViewOptions(){const e=this.dateOption("value")??void 0;return{value:e,range:[],selectionMode:"single"}}selectValue(e,t){this.skipNavigate(),this.dateValue(e,t)}updateAriaSelected(e,t){const i=e??[this.dateOption("value")],a=t??[];super.updateAriaSelected(i,a)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}}var F=R,$=(i(99819),i(34840),i(92324)),P=i(59981),N=i(35754),H=i(71791);const L="td:not(.dx-calendar-week-number-cell)",W=(0,d.b4)(P.U,"dxCalendar"),z=(0,d.b4)(l.n,"dxCalendar"),G={month:u.A.format("dxCalendar-currentDay"),year:u.A.format("dxCalendar-currentMonth"),decade:u.A.format("dxCalendar-currentYear"),century:u.A.format("dxCalendar-currentYearRange")},Y={single:"single",multiple:"multiple",range:"range"};class K extends O.Ay{_getViewName(){return"base"}_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})}_initMarkup(){super._initMarkup(),this._renderImpl()}_renderImpl(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents(),this._updateTableAriaLabel()}_getLocalizedWidgetName(){const e=u.A.format("dxCalendar-ariaWidgetName");return e}_getSingleModeAriaLabel(){const{value:e}=this.option(),t=this._getLocalizedWidgetName(),i=h.A.format(e,"date"),a=u.A.format("dxCalendar-selectedDate",i),n=`${t}. ${a}`;return n}_getRangeModeAriaLabel(){const{value:e}=this.option(),t=this._getLocalizedWidgetName(),[i,a]=e,n=h.A.format(i,"date"),s=h.A.format(a,"date"),o=i&&a?u.A.format("dxCalendar-selectedDateRange",n,s):u.A.format("dxCalendar-selectedDate",n??s),r=`${t}. ${o}`;return r}_getMultipleModeAriaLabel(){const e=this._getLocalizedWidgetName(),t=this._getMultipleRangesText(),i=`${e}. ${t}`;return i}_getMultipleRangesText(){const{value:e}=this.option(),t=e,i=v.A.getRangesByDates(t.map(e=>new Date(e)));if(i.length>2){const e=u.A.format("dxCalendar-selectedDateRangeCount",i.length);return e}const a=u.A.format("dxCalendar-selectedDates"),n=i.map(e=>this._getRangeText(e)).join(", "),s=`${a}: ${n}`;return s}_getRangeText(e){const[t,i]=e,a=h.A.format(t,"date"),n=h.A.format(i,"date"),s=t&&i?u.A.format("dxCalendar-selectedMultipleDateRange",a,n):a;return`${s}`}_getTableAriaLabel(){const{value:e,selectionMode:t}=this.option(),i=!e||Array.isArray(e)&&!e.filter(Boolean).length;if(i)return this._getLocalizedWidgetName();switch(t){case Y.single:return this._getSingleModeAriaLabel();case Y.range:return this._getRangeModeAriaLabel();case Y.multiple:return this._getMultipleModeAriaLabel();default:return this._getSingleModeAriaLabel()}}_updateTableAriaLabel(){const e=this._getTableAriaLabel();this.setAria({label:e},this._$table)}_createTable(){return this._$table=(0,m.A)("<table>"),this.setAria({role:"grid"},this._$table),this._$table}_renderBody(){this.$body=(0,m.A)("<tbody>").appendTo(this._$table);const e={cellDate:this._getFirstCellData(),prevCellDate:null,row:void 0},{rowCount:t,colCount:i}=this.option();for(let a=0,n=t;a<n;a+=1){e.row=this._createRow();for(let t=0,a=i;t<a;t+=1)this._renderCell(e,t);this._renderWeekNumberCell(e)}}_renderWeekNumberCell(e){}_createRow(){const e=$.A.createElement("tr");return this.setAria("role","row",(0,m.A)(e)),this.$body.get(0).appendChild(e),e}_createCell(e,t){const i=$.A.createElement("td"),a=(0,m.A)(i);return i.className=this._getClassNameByDate(e,t),i.setAttribute("data-value",f.A.serializeDate(e,v.A.getShortDateFormat())),(0,H.p)(i,"dxDateValueKey",e),this.setAria({role:"gridcell",selected:!1,label:this.getCellAriaLabel(e)},a),{cell:i,$cell:a}}_renderCell(e,t){const{cellDate:i,prevCellDate:a,row:n}=e;a&&v.A.fixTimezoneGap(a,i),e.prevCellDate=i;const{cell:s,$cell:o}=this._createCell(i,t),{cellTemplate:r}=this.option();(0,m.A)(n).append(s),r?r.render(this._prepareCellTemplateData(i,t,o)):s.innerHTML=this._getCellText(i),e.cellDate=this._getNextCellData(i)}_getClassNameByDate(e,t){let i="dx-calendar-cell";this._isTodayCell(e)&&(i+=" dx-calendar-today"),(this._isDateOutOfRange(e)||this.isDateDisabled(e))&&(i+=" dx-calendar-empty-cell"),this._isOtherView(e)&&(i+=" dx-calendar-other-view");const{selectionMode:a}=this.option();if(a===Y.range){0===t&&(i+=" dx-calendar-cell-start-in-row");const{colCount:a}=this.option();t===a-1&&(i+=" dx-calendar-cell-end-in-row"),this._isStartDayOfMonth(e)&&(i+=" dx-calendar-cell-start"),this._isEndDayOfMonth(e)&&(i+=" dx-calendar-cell-end")}return i}_prepareCellTemplateData(e,t,i){const a=e instanceof Date,n=a?this._getCellText(e):e,s=a?e:void 0,o=this._getViewName();return{model:{text:n,date:s,view:o},container:(0,N.cc)(i),index:t}}_renderEvents(){this._createCellClickAction(),o.A.off(this._$table,W),o.A.on(this._$table,W,L,e=>{(0,m.A)(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellClickAction({event:e,value:(0,m.A)(e.currentTarget).data("dxDateValueKey")})});const{selectionMode:e}=this.option();o.A.off(this._$table,z),e===Y.range&&(this._createCellHoverAction(),o.A.on(this._$table,z,L,e=>{(0,m.A)(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellHoverAction({event:e,value:(0,m.A)(e.currentTarget).data("dxDateValueKey")})})),e!==Y.single&&(this._createWeekNumberCellClickAction(),o.A.on(this._$table,W,".dx-calendar-week-number-cell",e=>{const t=(0,m.A)(e.currentTarget).closest("tr"),i=t.find(".dx-calendar-cell").first().data("dxDateValueKey"),a=t.find(".dx-calendar-cell").last().data("dxDateValueKey"),n=[...v.A.getDatesOfInterval(i,a,864e5),a];this._weekNumberCellClickAction({event:e,rowDates:n})}))}_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick")}_createCellHoverAction(){this._cellHoverAction=this._createActionByOption("onCellHover")}_createWeekNumberCellClickAction(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")}_createDisabledDatesHandler(){const{disabledDates:e}=this.option();this._disabledDatesHandler=Array.isArray(e)?this._getDefaultDisabledDatesHandler(e):e??(()=>!1)}_getDefaultDisabledDatesHandler(e){return()=>!1}_isTodayCell(e){return!1}_isDateOutOfRange(e){return!1}isDateDisabled(e){const t={date:e,view:this._getViewName()};return this._disabledDatesHandler(t)}_isOtherView(e){return!1}_isStartDayOfMonth(e){return!1}_isEndDayOfMonth(e){return!1}_getCellText(e){return""}_getFirstCellData(){return new Date}_getNextCellData(e){return new Date(e)}_renderContouredDate(e){const{focusStateEnabled:t}=this.option();if(!t)return;const{contouredDate:i}=this.option(),a=e??i,n=this._getContouredCell(),s=this._getCellByDate(a);n.removeClass("dx-calendar-contoured-date"),a&&s.addClass("dx-calendar-contoured-date")}_getContouredCell(){return this._$table.find(".dx-calendar-contoured-date")}_renderValue(){if(!this.option("allowValueSelection"))return;let{value:e=[]}=this.option();Array.isArray(e)||(e=[e]),this._updateSelectedClass(e)}_updateSelectedClass(e){var t;this._isRangeMode()&&!this._isMonthView()||(null===(t=this._$selectedCells)||void 0===t||t.forEach(e=>{e.removeClass("dx-calendar-selected-date")}),this._$selectedCells=e.map(e=>this._getCellByDate(e)),this._$selectedCells.forEach(e=>{e.addClass("dx-calendar-selected-date")}))}_renderRange(){var e,t,i,a,n,s,o,r;const{allowValueSelection:l,value:d=[],range:h}=this.option();l&&this._isRangeMode()&&this._isMonthView()&&(null===(e=this._$rangeCells)||void 0===e||e.forEach(e=>{e.removeClass("dx-calendar-cell-in-range")}),null===(t=this._$hoveredRangeCells)||void 0===t||t.forEach(e=>{e.removeClass("dx-calendar-cell-range-hover")}),null===(i=this._$rangeStartHoverCell)||void 0===i||i.removeClass("dx-calendar-cell-range-hover-start"),null===(a=this._$rangeEndHoverCell)||void 0===a||a.removeClass("dx-calendar-cell-range-hover-end"),null===(n=this._$rangeStartDateCell)||void 0===n||n.removeClass("dx-calendar-range-start-date"),null===(s=this._$rangeEndDateCell)||void 0===s||s.removeClass("dx-calendar-range-end-date"),this._$rangeCells=h.map(e=>this._getCellByDate(e)),this._$rangeStartDateCell=this._getCellByDate(d[0]),this._$rangeEndDateCell=this._getCellByDate(d[1]),this._$rangeCells.forEach(e=>{e.addClass("dx-calendar-cell-in-range")}),null===(o=this._$rangeStartDateCell)||void 0===o||o.addClass("dx-calendar-range-start-date"),null===(r=this._$rangeEndDateCell)||void 0===r||r.addClass("dx-calendar-range-end-date"))}_renderHoveredRange(){var e,t,i,a,n;const{allowValueSelection:s,hoveredRange:o}=this.option();s&&this._isRangeMode()&&this._isMonthView()&&(null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach(e=>{e.removeClass("dx-calendar-cell-range-hover")}),null===(t=this._$rangeStartHoverCell)||void 0===t||t.removeClass("dx-calendar-cell-range-hover-start"),null===(i=this._$rangeEndHoverCell)||void 0===i||i.removeClass("dx-calendar-cell-range-hover-end"),this._$hoveredRangeCells=o.map(e=>this._getCellByDate(e)),this._$rangeStartHoverCell=this._getCellByDate(o[0]),this._$rangeEndHoverCell=this._getCellByDate(o[o.length-1]),this._$hoveredRangeCells.forEach(e=>{e.addClass("dx-calendar-cell-range-hover")}),null===(a=this._$rangeStartHoverCell)||void 0===a||a.addClass("dx-calendar-cell-range-hover-start"),null===(n=this._$rangeEndHoverCell)||void 0===n||n.addClass("dx-calendar-cell-range-hover-end"))}_isMonthView(){const{zoomLevel:e}=this.option();return"month"===e}_isRangeMode(){const{selectionMode:e}=this.option();return e===Y.range}_getCurrentDateFormat(){return null}getCellAriaLabel(e){const t=this._getViewName(),i=this._isTodayCell(e),a=this._getCurrentDateFormat(),n=a?`${h.A.format(e,a)}`:this._getCellText(e),s=i?`${n}. ${G[t]}`:n;return s}_getFirstAvailableDate(){const{date:e,min:t}=this.option(),i=v.A.getViewFirstCellDate(this._getViewName(),e)??e;return new Date(t&&i<t?t:i)}_getCellByDate(e){return(0,m.A)()}isBoundary(e){return!1}_optionChanged(e){const{name:t,value:i}=e;switch(t){case"value":this._renderValue(),this._updateTableAriaLabel();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:super._optionChanged(e)}}}var q=K;class U extends q{_getViewName(){return"month"}_getCurrentDateFormat(){return"longdate"}_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{firstDayOfWeek:0,rowCount:6,colCount:7})}_renderImpl(){super._renderImpl(),this._renderHeader()}_renderBody(){super._renderBody(),this._$table.find(".dx-calendar-other-view").addClass("dx-calendar-other-month")}_renderFocusTarget(){}_renderHeader(){const e=(0,m.A)("<tr>"),t=(0,m.A)("<thead>").append(e);this._$table.prepend(t);const{colCount:i,showWeekNumbers:a}=this.option();for(let n=0,s=i;n<s;n+=1)this._renderHeaderCell(n,e);a&&this._renderWeekHeaderCell(e)}_renderHeaderCell(e,t){const{firstDayOfWeek:i=0}=this.option(),{full:a,abbreviated:n}=this._getDayCaption(i+e),s=(0,m.A)("<th>").attr({scope:"col",abbr:a}).text(n);t.append(s)}_renderWeekHeaderCell(e){const t=(0,m.A)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});e.prepend(t)}_renderWeekNumberCell(e){const{showWeekNumbers:t,cellTemplate:i,selectionMode:a,selectWeekOnClick:n}=this.option();if(!t)return;const s=this._getWeekNumber(e.prevCellDate),o=$.A.createElement("td"),r=(0,m.A)(o);o.className="dx-calendar-week-number-cell","single"!==a&&n&&r.addClass("dx-calendar-week-selection"),i?i.render(this._prepareCellTemplateData(s,-1,r)):o.innerHTML=`${s}`,e.row.prepend(o),this.setAria({role:"gridcell",label:`Week ${s}`},r)}_getWeekNumber(e){const{weekNumberRule:t="auto",firstDayOfWeek:i}=this.option();return"auto"===t?v.A.getWeekNumber(e,i,1===i?"firstFourDays":"firstDay"):v.A.getWeekNumber(e,i,t)}getNavigatorCaption(){const{date:e}=this.option();return`${h.A.format(e,"monthandyear")}`}_isTodayCell(e){const{_todayDate:t}=this.option();return v.A.sameDate(e,t())}_isDateOutOfRange(e){const t=this.option("min"),i=this.option("max");return!v.A.dateInRange(e,t,i,"date")}_isOtherView(e){const{date:t}=this.option();return e.getMonth()!==t.getMonth()}_isStartDayOfMonth(e){return v.A.sameDate(e,v.A.getFirstMonthDate(this.option("date")))}_isEndDayOfMonth(e){return v.A.sameDate(e,v.A.getLastMonthDate(this.option("date")))}_getCellText(e){return`${h.A.format(e,"d")}`}_getDayCaption(e){const{colCount:t}=this.option(),i=e%t;return{full:h.A.getDayNames()[i],abbreviated:h.A.getDayNames("abbreviated")[i]}}_getFirstCellData(){const{firstDayOfWeek:e=0,date:t}=this.option(),i=v.A.getFirstMonthDate(t);let a=e-i.getDay();const{colCount:n}=this.option();return a>=0&&(a-=n),i.setDate(i.getDate()+a),i}_getNextCellData(e){const t=new Date(e);return t.setDate(t.getDate()+1),t}_getCellByDate(e){return this._$table.find(`td[data-value='${f.A.serializeDate(e,v.A.getShortDateFormat())}']`)}isBoundary(e){return v.A.sameMonthAndYear(e,this.option("min"))||v.A.sameMonthAndYear(e,this.option("max"))}_getDefaultDisabledDatesHandler(e){return t=>e.some(e=>v.A.sameDate(e,t.date))}}class j extends q{_getViewName(){return"year"}_getCurrentDateFormat(){return"monthandyear"}_isTodayCell(e){const{_todayDate:t}=this.option();return v.A.sameMonthAndYear(e,t())}_isDateOutOfRange(e){return!v.A.dateInRange(e,v.A.getFirstMonthDate(this.option("min")),v.A.getLastMonthDate(this.option("max")))}_isOtherView(){return!1}_isStartDayOfMonth(){return!1}_isEndDayOfMonth(){return!1}_getCellText(e){return h.A.getMonthNames("abbreviated")[e.getMonth()]}_getFirstCellData(){const{date:e}=this.option(),t=new Date(e);return t.setDate(1),t.setMonth(0),t}_getNextCellData(e){const t=new Date(e);return t.setMonth(t.getMonth()+1),t}_getCellByDate(e){const t=new Date(e);return t.setDate(1),this._$table.find(`td[data-value='${f.A.serializeDate(t,v.A.getShortDateFormat())}']`)}getNavigatorCaption(){const{date:e}=this.option();return`${h.A.format(e,"yyyy")}`}isBoundary(e){return v.A.sameYear(e,this.option("min"))||v.A.sameYear(e,this.option("max"))}_renderWeekNumberCell(){}}class X extends q{_getViewName(){return"decade"}_isTodayCell(e){const{_todayDate:t}=this.option();return v.A.sameYear(e,t())}_isDateOutOfRange(e){const{min:t,max:i}=this.option();return!v.A.dateInRange(e.getFullYear(),null===t||void 0===t?void 0:t.getFullYear(),null===i||void 0===i?void 0:i.getFullYear())}_isOtherView(e){const t=new Date(e);return t.setMonth(1),!v.A.sameDecade(t,this.option("date"))}_isStartDayOfMonth(){return!1}_isEndDayOfMonth(){return!1}_getCellText(e){return`${h.A.format(e,"yyyy")}`}_getFirstCellData(){const e=v.A.getFirstYearInDecade(this.option("date"))-1;return v.A.createDateWithFullYear(e,0,1)}_getNextCellData(e){const t=new Date(e);return t.setFullYear(t.getFullYear()+1),t}getNavigatorCaption(){const{date:e}=this.option(),t=v.A.getFirstYearInDecade(e),i=new Date(e),a=new Date(e);return i.setFullYear(t),a.setFullYear(t+9),`${h.A.format(i,"yyyy")}-${h.A.format(a,"yyyy")}`}_isValueOnCurrentView(e,t){return v.A.sameDecade(e,t)}_getCellByDate(e){const t=new Date(e);return t.setDate(1),t.setMonth(0),this._$table.find(`td[data-value='${f.A.serializeDate(t,v.A.getShortDateFormat())}']`)}isBoundary(e){return v.A.sameDecade(e,this.option("min"))||v.A.sameDecade(e,this.option("max"))}_renderWeekNumberCell(){}}class Z extends q{_getViewName(){return"century"}_isTodayCell(e){const{_todayDate:t}=this.option();return v.A.sameDecade(e,t())}_isDateOutOfRange(e){const t=v.A.getFirstYearInDecade(e),i=v.A.getFirstYearInDecade(this.option("min")),a=v.A.getFirstYearInDecade(this.option("max"));return!v.A.dateInRange(t,i,a)}_isOtherView(e){const t=new Date(e);return t.setMonth(1),!v.A.sameCentury(t,this.option("date"))}_isStartDayOfMonth(){return!1}_isEndDayOfMonth(){return!1}_getCellText(e){const t=h.A.format(e,"yyyy"),i=new Date(e);return i.setFullYear(i.getFullYear()+9),`${t} - ${h.A.format(i,"yyyy")}`}_getFirstCellData(){const e=v.A.getFirstDecadeInCentury(this.option("date"))-10;return v.A.createDateWithFullYear(e,0,1)}_getNextCellData(e){const t=new Date(e);return t.setFullYear(t.getFullYear()+10),t}_getCellByDate(e){const t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(v.A.getFirstYearInDecade(t)),this._$table.find(`td[data-value='${f.A.serializeDate(t,v.A.getShortDateFormat())}']`)}getNavigatorCaption(){const{date:e}=this.option(),t=v.A.getFirstDecadeInCentury(e),i=new Date(e),a=new Date(e);return i.setFullYear(t),a.setFullYear(t+99),`${h.A.format(i,"yyyy")}-${h.A.format(a,"yyyy")}`}isBoundary(e){return v.A.sameCentury(e,this.option("min"))||v.A.sameCentury(e,this.option("max"))}_renderWeekNumberCell(){}}var Q={month:U,year:j,decade:X,century:Z};const J=(0,d.b4)(l._,"dxCalendar"),ee={month:3,year:2,decade:1,century:0},te={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"},ie={SingleSelection:F,MultipleSelection:S,RangeSelection:E};class ae extends w.A{_activeStateUnit(){return".dx-calendar-cell"}_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,min:new Date(1e3,0),max:new Date(3e3,0),viewsCount:1,zoomLevel:te.MONTH,maxZoomLevel:te.MONTH,minZoomLevel:te.CENTURY,selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,todayButtonText:u.A.format("dxCalendar-todayButtonText"),showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===c.A.real().deviceType&&!c.A.isSimulator(),options:{focusStateEnabled:!0}}])}_supportedKeys(){return(0,a.A)({},super._supportedKeys(),{rightArrow(e){e.preventDefault(),(0,d.By)(e)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow(e){e.preventDefault(),(0,d.By)(e)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow(e){if(e.preventDefault(),(0,d.By)(e))this._navigateUp();else{if(n.fx.isAnimating(this._view.$element().get(0)))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow(e){if(e.preventDefault(),(0,d.By)(e))this._navigateDown();else{if(n.fx.isAnimating(this._view.$element().get(0)))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home(e){e.preventDefault();const t=this.option("zoomLevel"),i=this.option("currentDate"),a=this._getDateOption("min");if(this._view.isDateDisabled(i))return;const n=v.A.sameView(t,i,a)?a:v.A.getViewFirstCellDate(t,i);this._moveToClosestAvailableDate(n)},end(e){e.preventDefault();const t=this.option("zoomLevel"),i=this.option("currentDate"),a=this._getDateOption("max");if(this._view.isDateDisabled(i))return;const n=v.A.sameView(t,i,a)?a:v.A.getViewLastCellDate(t,i);this._moveToClosestAvailableDate(n)},pageUp(e){e.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown(e){e.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab(){},enter:this._enterKeyHandler})}_enterKeyHandler(e){const{currentDate:t=new Date}=this.option();if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(t)){const i=this._updateTimeComponent(t);this._selectionStrategy.selectValue(i,e)}}else this._navigateDown()}_getSerializationFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value";const{[e]:t}=this.option(),{dateSerializationFormat:i}=this.option();return i||((0,b.kf)(t)?"number":(0,b.Kg)(t)&&""!==t?f.A.getDateSerializationFormat(t):void 0)}_convertToDate(e){return f.A.deserializeDate(e)}_dateValue(e,t){if(t){if("keydown"===t.type){const e=this._view._getContouredCell().get(0);t.target=e}this._saveValueChangeEvent(t)}this._setDateOption("value",e)}_isArrayValue(e,t){return"value"===e&&!this._isSingleMode()}_setDateOption(e,t){const i=this._getSerializationFormat(e),a=this._isArrayValue(e,t)?t.map(e=>f.A.serializeDate(e,i)):f.A.serializeDate(t,i);this.option(e,a)}_getDateOption(e){let{[e]:t}=this.option();if(!this._isArrayValue(e,t))return""===t&&(t=null),this._convertToDate(t);const i=t??[];return i.map(e=>this._convertToDate(e))}_isSingleMode(){const{selectionMode:e}=this.option();return"single"===e}_shiftDate(e,t,i,a){switch(e){case te.MONTH:t.setDate(t.getDate()+i*a);break;case te.YEAR:t.setMonth(t.getMonth()+i*a);break;case te.DECADE:t.setFullYear(t.getFullYear()+i*a);break;case te.CENTURY:t.setFullYear(t.getFullYear()+10*i*a)}}_moveCurrentDateByOffset(e){const{currentDate:t=new Date,zoomLevel:i=te.MONTH}=this.option();let a=new Date(t);this._shiftDate(i,a,e,1);const n=this._getMaxDate(),s=this._getMinDate();let o=this._areDatesInNeighborView(i,a,t),r=(0,C.r4)(a,s,n)&&o;const l=new Date(a);while(r){if(!this._view.isDateDisabled(l)){a=l;break}this._shiftDate(i,l,e,1),o=this._areDatesInNeighborView(i,l,t),r=(0,C.r4)(l,s,n)&&o}if(this._view.isDateDisabled(t)||this._view.isDateDisabled(a)){const t=e>0?1:-1,i=1===t?this._isNextViewDisabled():this._isPrevViewDisabled();i?this._moveToClosestAvailableDate(a):this._waitRenderView(t)}else this._skipNavigate=!0,this.option("currentDate",a)}_isNextViewDisabled(){const{disabled:e}=this._navigator._nextButton.option();return!0===e}_isPrevViewDisabled(){const{disabled:e}=this._navigator._prevButton.option();return!0===e}_areDatesInSameView(e,t,i){switch(e){case te.YEAR:return t.getFullYear()===i.getFullYear();case te.DECADE:return Math.floor(t.getFullYear()/10)===Math.floor(i.getFullYear()/10);case te.CENTURY:return Math.floor(t.getFullYear()/100)===Math.floor(i.getFullYear()/100);case te.MONTH:default:return t.getMonth()===i.getMonth()}}_areDatesInNeighborView(e,t,i){switch(e){case te.YEAR:return Math.abs(t.getFullYear()-i.getFullYear())<=1;case te.DECADE:return Math.abs(t.getFullYear()-i.getFullYear())<=10;case te.CENTURY:return Math.abs(t.getFullYear()-i.getFullYear())<=100;case te.MONTH:default:return((e,t)=>{const i=Math.abs(e-t);return Math.min(i,12-i)})(t.getMonth(),i.getMonth())<=1}}_moveToClosestAvailableDate(e){const{zoomLevel:t=te.MONTH,currentDate:i=new Date}=this.option();let a=new Date(e??i);const n=!this._isDateNotAvailable(a);let s=n,o=n,r=!0,l=!0;const d=new Date(a),h=new Date(a);do{if(s){a=d;break}if(o){a=h;break}this._shiftDate(t,d,1,1),this._shiftDate(t,h,1,-1),r=this._areDatesInSameView(t,d,e??i),l=this._areDatesInSameView(t,h,e??i),s=r&&!this._isDateNotAvailable(d),o=l&&!this._isDateNotAvailable(h)}while(r||l);this.option("currentDate",a)}_isDateNotAvailable(e){const t=this._getMaxDate(),i=this._getMinDate();return!(0,C.r4)(e,i,t)||this._view.isDateDisabled(e)}_init(){super._init(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()}_initSelectionStrategy(){const e=this._getSelectionStrategyName(),t=ie[e];this._selectionStrategy&&this._selectionStrategy.NAME===e||(this._selectionStrategy=new t(this))}_refreshSelectionStrategy(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()}_getSelectionStrategyName(){const{selectionMode:e}=this.option();switch(e){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}}_correctZoomLevel(){const{minZoomLevel:e=te.CENTURY,maxZoomLevel:t=te.MONTH,zoomLevel:i=te.MONTH}=this.option();ee[t]<ee[e]||(ee[i]>ee[t]?this.option("zoomLevel",t):ee[i]<ee[e]&&this.option("zoomLevel",e))}_initCurrentDate(){const{currentDate:e=new Date}=this.option(),t=this._selectionStrategy.getDefaultCurrentDate(),i=(t?this._getNormalizedDate(t):null)??this._getNormalizedDate(e);this.option("currentDate",i)}_getNormalizedDate(e){const t=v.A.normalizeDate(e,this._getMinDate(),this._getMaxDate());return(0,b.O9)(t)?this._getDate(t):e}_initActions(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")}_initTemplates(){this._templateManager.addDefaultTemplates({cell:new g.l(e=>{const t=e.model;(0,m.A)(e.container).append((0,m.A)("<span>").text((null===t||void 0===t?void 0:t.text)||String(t)))})}),super._initTemplates()}_updateCurrentDate(e){n.fx.isAnimating(this._$viewsWrapper.get(0))&&n.fx.stop(this._$viewsWrapper.get(0),!0);const t=this._getMinDate(),i=this._getMaxDate();if(t>i)return void this.option("currentDate",new Date);const a=this._getNormalizedDate(e);if(e.getTime()!==a.getTime())return void this.option("currentDate",new Date(a));const{date:s}=this._view.option();let o=this._getViewsOffset(s,a);0!==o&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(o=0),this._view&&0!==o&&!this._suppressNavigation?this._additionalView?o>2||o<-1?(this._refreshViews(),this._setViewContoured(a),this._updateAriaId(a),this._renderNavigator()):1===o&&this._skipNavigate?(this._setViewContoured(a),this._updateAriaId(a)):this._navigate(o,a):this._navigate(o,a):(this._renderNavigator(),this._setViewContoured(a),this._updateAriaId(a)),this._skipNavigate=!1}_isAdditionalViewDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return!!this._additionalView&&e>=this._additionalView._getFirstAvailableDate()}_getActiveView(e){return this._isAdditionalViewDate(e)?this._additionalView:this._view}_setViewContoured(e){if(this.option("skipFocusCheck")||(0,m.A)(this._$viewsWrapper).is(":focus")){var t;this._view.option("contouredDate",null),null===(t=this._additionalView)||void 0===t||t.option("contouredDate",null);const i=this._isAdditionalViewDate(e)?this._additionalView:this._view;i.option("contouredDate",e)}}_getMinDate(){const{rangeMin:e}=this.option();return e||(this.min||(this.min=this._getDateOption("min")??new Date(1e3,0)),this.min)}_getMaxDate(){const{rangeMax:e}=this.option();return e||(this.max||(this.max=this._getDateOption("max")??new Date(3e3,0)),this.max)}_getViewsOffset(e,t){const{zoomLevel:i}=this.option();if(i===te.MONTH)return this._getMonthsOffset(e,t);let a=1;switch(i){case te.CENTURY:a=100;break;case te.DECADE:a=10;break;default:a=1}return Math.floor(t.getFullYear()/a)-Math.floor(e.getFullYear()/a)}_getMonthsOffset(e,t){const i=t.getFullYear()-e.getFullYear(),a=t.getMonth()-e.getMonth();return 12*i+a}_waitRenderView(e){if(this._alreadyViewRender)return;this._alreadyViewRender=!0;const t=this._getDateByOffset(e*this._getRtlCorrection());this._moveToClosestAvailableDate(t),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}_getRtlCorrection(){const{rtlEnabled:e}=this.option();return e?-1:1}_getDateByOffset(e,t){const{currentDate:i=new Date}=this.option(),a=this._getDate(t??i),n=a.getDate(),s=v.A.getDifferenceInMonth(this.option("zoomLevel"))*e;a.setDate(1),a.setMonth(a.getMonth()+s);const o=v.A.getLastMonthDate(a).getDate();return a.setDate(n>o?o:n),a}_focusTarget(){return this._$viewsWrapper}_focusEventTarget(){return this.$element()}_initMarkup(){this._renderSubmitElement();const e=this.$element();e.addClass("dx-calendar");const{selectionMode:t}=this.option();e.toggleClass("dx-calendar-range","range"===t),this._renderBody(),e.append(this.$body),this._renderViews(),this._renderNavigator(),super._initMarkup(),this._renderEvents(),e.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._updateAriaLabelAndRole(),this._moveToClosestAvailableDate()}_render(){super._render();const{currentDate:e=new Date}=this.option();this._setViewContoured(e)}_renderBody(){this._$viewsWrapper||(this.$body=(0,m.A)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,m.A)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))}_updateAriaLabelAndRole(){const e=this.option("readOnly"),t=this.$element(),i={role:e?"group":void 0,label:e?u.A.format("dxCalendar-readOnlyLabel"):void 0};this.setAria(i,t)}_setAriaReadonly(){}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._view])}_renderViews(){const{zoomLevel:e}=this.option();this.$element().addClass(`dx-calendar-view-${e}`);const{currentDate:t=new Date,viewsCount:i}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",i>1),this._view=this._renderSpecificView(t),(0,x.Vd)()){const e=this._getDateByOffset(-1,t);this._beforeView=this._isViewAvailable(e)?this._renderSpecificView(e):null;const a=this._getDateByOffset(i,t);a.setDate(1),this._afterView=this._isViewAvailable(a)?this._renderSpecificView(a):null}i>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,t))),this._translateViews()}_renderSpecificView(e){const{zoomLevel:t=te.MONTH}=this.option(),i=Q[t],a=(0,m.A)("<div>").appendTo(this._$viewsWrapper),n=this._viewConfig(e),s=this._createComponent(a,i,n);return s}_viewConfig(e){const{firstDayOfWeek:t=h.A.firstDayOfWeekIndex(),showWeekNumbers:i=!1,selectWeekOnClick:n,weekNumberRule:s,zoomLevel:o=te.MONTH,focusStateEnabled:r,hoverStateEnabled:l,disabledDates:d,_todayDate:u}=this.option(),p=(0,b.Tn)(d)?this._injectComponent(d.bind(this)):d;return(0,a.A)({},this._selectionStrategy.getViewOptions(),{date:e,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:t,showWeekNumbers:i,selectWeekOnClick:n,weekNumberRule:s,zoomLevel:o,tabIndex:void 0,focusStateEnabled:r,hoverStateEnabled:l,disabledDates:p,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:u})}_renderEvents(){o.A.off(this._$viewsWrapper,J);const{selectionMode:e}=this.option();"range"===e&&o.A.on(this._$viewsWrapper,J,null,()=>{this._updateViewsOption("hoveredRange",[])})}_injectComponent(e){return t=>e((0,a.A)({},t,{component:this}))}_isViewAvailable(e){const{zoomLevel:t}=this.option(),i=v.A.getViewMinBoundaryDate(t,this._getMinDate()),a=v.A.getViewMaxBoundaryDate(t,this._getMaxDate());return v.A.dateInRange(e,i,a)}_translateViews(){const{viewsCount:e}=this.option();(0,s.Cy)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,e),this._moveViewElement(this._additionalView,1)}_moveViewElement(e,t){e&&(0,s.Cy)(e.$element(),{left:this._getViewPosition(t),top:0})}_getViewPosition(e){const t=this.option("rtlEnabled")?-1:1;return 100*e*t+"%"}_cellClickHandler(e){const t=this.option("zoomLevel"),i=v.A.getViewDown(t),a=this._isMaxZoomLevel();if(i&&!a)this._navigateDown(e.event.currentTarget);else{var n;const t=this._updateTimeComponent(e.value);this._selectionStrategy.selectValue(t,e.event),null===(n=this._cellClickAction)||void 0===n||n.call(this,e)}}_updateTimeComponent(e){const t=new Date(e),i=this._getDateOption("value");return i&&!this._isArrayValue("value",i)&&(t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),t.setSeconds(i.getSeconds()),t.setMilliseconds(i.getMilliseconds())),t}_isMaxZoomLevel(){const{zoomLevel:e=te.MONTH,maxZoomLevel:t}=this.option();return e===t}_navigateDown(e){const{zoomLevel:t,currentDate:i=new Date}=this.option();if(this._isMaxZoomLevel())return;const a=v.A.getViewDown(t);if(!a)return;const{contouredDate:n,date:s}=this._view.option();let o=n??s;e&&(o=(0,m.A)(e).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",o),this.option("zoomLevel",a),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(i))}_renderNavigator(){this._navigator||(this._navigator=this._createComponent((0,m.A)("<div>"),k,this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()}_navigatorConfig(){const{focusStateEnabled:e,rtlEnabled:t}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:e,rtlEnabled:t,tabIndex:void 0}}_navigatorClickHandler(e){const{currentDate:t,viewsCount:i}=this.option();let a=e.direction;if(i>1){const e=this._isAdditionalViewDate(t),i=e&&a<0||!e&&a>0;i&&(a*=2)}const n=this._getDateByOffset(a,t);this._moveToClosestAvailableDate(n)}_navigateUp(){const{zoomLevel:e=te.MONTH,currentDate:t=new Date}=this.option(),i=v.A.getViewUp(e);i&&!this._isMinZoomLevel(e)&&(this.option("zoomLevel",i),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(t)))}_isMinZoomLevel(e){const t=this._getMinDate(),i=this._getMaxDate(),{minZoomLevel:a}=this.option();return!!v.A.sameView(e,t,i)||a===e}_updateButtonsVisibility(){this._navigator.toggleButton("next",!(0,b.O9)(this._afterView)),this._navigator.toggleButton("prev",!(0,b.O9)(this._beforeView))}_renderSwipeable(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),r.A,{onStart:e=>{this._swipeStartHandler(e.event)},onUpdated:e=>{this._swipeUpdateHandler(e.event)},onEnd:e=>{this._swipeEndHandler(e.event)},itemSizeFunc:this._viewWidth.bind(this)}))}_swipeStartHandler(e){n.fx.stop(this._$viewsWrapper.get(0),!0);const{viewsCount:t}=this.option();this._toggleGestureCoverCursor("grabbing"),e.maxLeftOffset=this._getRequiredView("next")?1/t:0,e.maxRightOffset=this._getRequiredView("prev")?1/t:0}_toggleGestureCoverCursor(e){(0,m.A)(".dx-gesture-cover").css("cursor",e)}_getRequiredView(e){const{rtlEnabled:t}=this.option();return"prev"===e?t?this._afterView:this._beforeView:t?this._beforeView:this._afterView}_swipeUpdateHandler(e){const{offset:t}=e;(0,s.Cy)(this._$viewsWrapper,{left:t*this._viewWidth(),top:0}),this._updateNavigatorCaption(t)}_swipeEndHandler(e){this._toggleGestureCoverCursor("auto");const{currentDate:t,rtlEnabled:i}=this.option(),{targetOffset:a}=e,n=a?a/Math.abs(a):0,s=this._isAdditionalViewDate(t),o=s&&(i?-1===n:1===n);if(0===n)return void this._animateWrapper(0,250);const r=-n*this._getRtlCorrection()*(o?2:1);let l=this._getDateByOffset(r);this._isDateInInvalidRange(l)&&(l=n>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",l)}_viewWidth(){if(!this._viewWidthValue){const{viewsCount:e}=this.option();this._viewWidthValue=(0,y.RG)(this.$element())/e}return this._viewWidthValue}_updateNavigatorCaption(e){const t=e*this._getRtlCorrection(),{viewsCount:i}=this.option(),a=i>1;let n=null,s=null;t>.5&&this._beforeView?(n=this._beforeView,a&&(s=this._view)):t<-.5&&this._afterView?(n=a?this._additionalView:this._afterView,s=a?this._afterView:null):(n=this._view,s=a?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(n,s))}_getViewsCaption(e,t){let i=e.getNavigatorCaption();const{viewsCount:a}=this.option();if(a>1&&t){const e=t.getNavigatorCaption();i=`${i} - ${e}`}return i}_isDateInInvalidRange(e){if(this._view.isBoundary(e))return!1;const t=this._getMinDate(),i=this._getMaxDate(),a=v.A.normalizeDate(e,t,i);return a===t||a===i}_renderFooter(){const{showTodayButton:e,todayButtonText:t}=this.option();if(e){const e=this._createComponent((0,m.A)("<div>"),A.A,{focusStateEnabled:this.option("focusStateEnabled"),text:t,onClick:e=>{this._toTodayView(e)},type:(0,D.Ft)((0,D.ss)())?"normal":"default",stylingMode:(0,D.Ft)((0,D.ss)())?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,m.A)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",e)}_renderSubmitElement(){this._$submitElement=(0,m.A)("<input>").attr("type","hidden").appendTo(this.$element());const{value:e}=this.option();this._setSubmitValue(e)}_setSubmitValue(e){if(this._isArrayValue("value",e))return;const t=this._convertToDate(e);this._getSubmitElement().val(f.A.serializeDate(t,"yyyy-MM-dd"))}_getSubmitElement(){return this._$submitElement}_animateShowView(){n.fx.stop(this._view.$element().get(0),!0),this._popAnimationView(this._view,.6,1,250);const{viewsCount:e}=this.option();e>1&&(n.fx.stop(this._additionalView.$element().get(0),!0),this._popAnimationView(this._additionalView,.6,1,250))}_popAnimationView(e,t,i,a){return n.fx.animate(e.$element().get(0),{type:"pop",from:{scale:t,opacity:t},to:{scale:i,opacity:i},duration:a})}_navigate(e,t){if(0!==e&&1!==Math.abs(e)&&this._isViewAvailable(t)){const n=this._renderSpecificView(t);var i,a;if(e>0)null===(i=this._afterView)||void 0===i||i.$element().remove(),this._afterView=n;else null===(a=this._beforeView)||void 0===a||a.$element().remove(),this._beforeView=n;this._translateViews()}const n=this._getRtlCorrection(),s=(0,C._S)(e),o=-n*s*this._viewWidth(),r=this._$viewsWrapper.position().left;r!==o&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(e,t):this._animateWrapper(o,250).done(this._wrapperAnimationEndHandler.bind(this,e,t)))}_animateWrapper(e,t){return n.fx.animate(this._$viewsWrapper.get(0),{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:e},duration:t})}_getDate(e){return new Date(e)}_toTodayView(e){const t=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(t,e.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(t,e.event),this._animateShowView(),this._preventViewChangeAnimation=!1)}_wrapperAnimationEndHandler(e,t){this._rearrangeViews(e),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(t),this._updateAriaId(t),this._selectionStrategy.updateAriaSelected()}_rearrangeViews(e){var t;if(0===e)return;const{viewsCount:i}=this.option();let a=-1,n="_afterView",s="_beforeView",o=1===i?"_view":"_additionalView",r="_view";if(e<0&&(a=1,n="_beforeView",s="_afterView",o="_view",r=1===i?"_view":"_additionalView"),!this[n])return;const l=this[n].option("date");null===(t=this[s])||void 0===t||t.$element().remove(),this[s]=this._renderSpecificView(this._getDateByOffset(a*i,l)),this[r].$element().remove(),1===i?this[r]=this[n]:(this[r]=this[o],this[o]=this[n]);const d=this._getDateByOffset(-a,l);this[n]=this._isViewAvailable(d)?this._renderSpecificView(d):null}_resetLocation(){(0,s.Cy)(this._$viewsWrapper,{left:0,top:0})}_clean(){super._clean(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer}_clearViewWidthCache(){delete this._viewWidthValue}_disposeViews(){var e,t,i;this._view.$element().remove(),null===(e=this._beforeView)||void 0===e||e.$element().remove(),null===(t=this._additionalView)||void 0===t||t.$element().remove(),null===(i=this._afterView)||void 0===i||i.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate}_dispose(){clearTimeout(this._waitRenderViewTimeout),super._dispose()}_refreshViews(){this._resetActiveState(),this._disposeViews(),this._renderViews()}_visibilityChanged(){this._translateViews()}_shouldSkipFocusEvent(e){const{target:t,relatedTarget:i}=e;return Boolean((0,m.A)(t).parents(".dx-calendar").length)&&Boolean((0,m.A)(i).parents(".dx-calendar").length)}_focusInHandler(e){if((0,m.A)(e.target).is(this._$viewsWrapper)){const{currentDate:e=new Date}=this.option();this._setViewContoured(e)}this._shouldSkipFocusEvent(e)||(super._focusInHandler.apply(this,[e]),this._toggleFocusClass(!0,this.$element()))}_focusOutHandler(e){var t;(0,m.A)(e.target).is(this._$viewsWrapper)&&(this._view.option("contouredDate",null),null===(t=this._additionalView)||void 0===t||t.option("contouredDate",null));this._shouldSkipFocusEvent(e)||(super._focusOutHandler.apply(this,[e]),this._toggleFocusClass(!1,this.$element()))}_updateViewsOption(e,t){var i,a,n;this._view.option(e,t),null===(i=this._additionalView)||void 0===i||i.option(e,t),null===(a=this._beforeView)||void 0===a||a.option(e,t),null===(n=this._afterView)||void 0===n||n.option(e,t)}_setViewsMinOption(e){this._restoreViewsMinMaxOptions(),this.option("rangeMin",this._convertToDate(e)),this._updateViewsOption("min",this._getMinDate())}_setViewsMaxOption(e){this._restoreViewsMinMaxOptions(),this.option("rangeMax",this._convertToDate(e)),this._updateViewsOption("max",this._getMaxDate())}_restoreViewsMinMaxOptions(){this._resetActiveState(),this.option({rangeMin:null,rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())}_updateNavigatorLabels(){const{zoomLevel:e=te.MONTH}=this.option(),t=e.charAt(0).toUpperCase()+e.slice(1),i=this._navigator._caption.option("text"),a=u.A.format(`dxCalendar-previous${t}ButtonLabel`),n=u.A.format(`dxCalendar-caption${t}Label`),s=u.A.format(`dxCalendar-next${t}ButtonLabel`);this.setAria("label",a,this._navigator._prevButton.$element()),this.setAria("label",`${i}. ${n}`,this._navigator._caption.$element()),this.setAria("label",s,this._navigator._nextButton.$element())}_updateAriaSelected(e,t){null===t||void 0===t||t.forEach(e=>{e&&this.setAria("selected",!1,this._view._getCellByDate(e))}),null===e||void 0===e||e.forEach(e=>{e&&this.setAria("selected",!0,this._view._getCellByDate(e))});const{viewsCount:i}=this.option();i>1&&(null===t||void 0===t||t.forEach(e=>{e&&this.setAria("selected",!1,this._additionalView._getCellByDate(e))}),null===e||void 0===e||e.forEach(e=>{e&&this.setAria("selected",!0,this._additionalView._getCellByDate(e))}))}_updateAriaId(e){var t;const{currentDate:i=new Date}=this.option(),a=e??i,n=`dx-${new _.A}`,s=this._getActiveView(a),o=s._getCellByDate(a);this.setAria("id",n,o),this.setAria("activedescendant",n),null===(t=this._onContouredChanged)||void 0===t||t.call(this,n)}_suppressingNavigation(e,t){this._suppressNavigation=!0,e.apply(this,t),delete this._suppressNavigation}_optionChanged(e){const{name:t,value:i,previousValue:a}=e;switch(t){case"width":super._optionChanged(e),this._clearViewWidthCache();break;case"min":case"max":{this.min=void 0,this.max=void 0;const{currentDate:e=new Date}=this.option();this._suppressingNavigation(this._updateCurrentDate,[e]),this._refreshViews(),this._renderNavigator();break}case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":case"todayButtonText":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(a)),this._updateCurrentDate(i);break;case"zoomLevel":this.$element().removeClass(`dx-calendar-view-${a}`),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":{const t=v.A.sameDatesArrays(i,a);t||this._selectionStrategy.processValueChanged(i,a),this._setSubmitValue(i),super._optionChanged(e);break}case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",i);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"readOnly":super._optionChanged(e),this._updateAriaLabelAndRole();break;case"skipFocusCheck":break;default:super._optionChanged(e)}}getContouredDate(){const{contouredDate:e}=this._view.option();return e}}(0,p.A)("dxCalendar",ae);var ne=ae,se=ne},86498:function(e,t,i){i.d(t,{A:function(){return c}});var a=i(82950),n=i(61928),s=i(41851),o=i(74567),r=i(89214),l=i(19083),d=i(22920);const h="dxSwipeable",u={onStart:s.ni,onUpdated:s.By,onEnd:s._N,onCancel:"dxswipecancel"};class p extends d.A{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})}_render(){super._render(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()}_attachEventHandlers(){if(this._detachEventHandlers(),this.option("disabled"))return;const{NAME:e}=this;this._createEventData(),(0,r.__)(u,(t,i)=>{const a=this._createActionByOption(t,{context:this}),s=(0,o.b4)(i,e);n.A.on(this.$element(),s,this._eventData,e=>a({event:e}))})}_createEventData(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}}_detachEventHandlers(){n.A.off(this.$element(),`.${h}`)}_optionChanged(e){switch(e.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:super._optionChanged(e)}}_useTemplates(){return!1}}(0,l.UU)(p,h);var c=p},90550:function(e,t,i){var a=i(24039);t.A=a.A},92638:function(e,t,i){i(69375);var a=i(82950),n=i(66529),s=i(85563),o=i(58368),r=i(89214),l=i(82196),d=i(50172),h=i(27996),u=i(22451),p=i(88641);const c={row:"minWidth",col:"minHeight"},_={row:"maxWidth",col:"maxHeight"},m={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},g={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},v={row:"row",col:"column"},f=(e,t,i)=>{const a=(0,l.CC)(t,i);if(e.style[(0,l.jA)(t)]=a,!(0,h.Vd)()){if(""===a||!(0,d.O9)(a))return;const i=(0,o._k)(t),n=`${i}: ${a};`;(0,l.eC)(e,n,!1)}};class C extends p.A{_renderVisible(e,t){super._renderVisible(e),(0,d.O9)(t)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:t})}}class y{constructor(e,t){this._$element=e,this._option=t}renderBox(){this._$element.css({display:`${(0,l.Rb)("flexDirection")}flex`});const e=this._option("direction")??"row";f(this._$element.get(0),"flexDirection",v[e])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){const e=this._option("align")??"start";return e in m?m[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){const e=this._option("crossAlign")??"start";return e in g?g[e]:e}renderItems(e){const t=(0,l.Rb)("flexDirection"),i=this._option("direction")??"row";(0,r.__)(e,function(){const e=(0,s.A)(this),a=e.data("dxBoxItemData");e.css({display:`${t}flex`}).css(_[i],a.maxSize??"none").css(c[i],a.minSize??"0"),f(e.get(0),"flexBasis",a.baseSize??0),f(e.get(0),"flexGrow",a.ratio??0),f(e.get(0),"flexShrink",(0,d.O9)(a.shrink)?a.shrink:1),e.children().each((e,t)=>((0,s.A)(t).css({width:"auto",height:"auto",display:`${(0,l.Rb)("flexDirection")}flex`,flexBasis:0}),f(t,"flexGrow",1),f(t,"flexDirection",(0,s.A)(t)[0].style.flexDirection??"column"),!0))})}}class b extends u.Ay{_getDefaultOptions(){return(0,a.A)({},super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initializeRenderQueue()}_initLayout(){this._layout=new y(this.$element(),e=>this.option(e))}_initializeRenderQueue(){const{_queue:e}=this.option();this._queue=e??[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(e,t){this._queue.push({$item:e,config:t})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(e){super._renderItems(e),this._processRenderQueue(),this._layout.renderItems(this._itemElements())}_processRenderQueue(){if(this._queueIsNotEmpty()){const e=this._shiftItemFromQueue(),{itemTemplate:t,itemHoldTimeout:i,onItemHold:n,onItemClick:s,onItemContextMenu:o,onItemRendered:r}=this.option();e&&this._createComponent(e.$item,b,(0,a.A)({itemTemplate:t,itemHoldTimeout:i,onItemHold:n,onItemClick:s,onItemContextMenu:o,onItemRendered:r,_queue:this._queue},e.config)),this._processRenderQueue()}}_renderItemContent(e){var t;const i=null===(t=e.itemData)||void 0===t?void 0:t.node;return i?this._renderItemContentByNode(e,i):super._renderItemContent(e)}_postprocessRenderItem(e){var t;const i=null===(t=e.itemData)||void 0===t?void 0:t.box;i&&this._pushItemToQueue(e.itemContent,i)}_createItemByTemplate(e,t){const{itemData:i}=t;return i.box?e.source?e.source():(0,s.A)():super._createItemByTemplate(e,t)}_itemOptionChanged(e,t,i,a){"visible"===t&&this._onItemStateChanged({name:t,state:i,oldState:!1!==a}),super._itemOptionChanged(e,t,i,a)}_optionChanged(e){const{name:t}=e;switch(t){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(e)}}_itemOptions(){const e=super._itemOptions();return e.fireItemStateChangedAction=e=>{this._onItemStateChanged(e)},e}}b.ItemClass=C,(0,n.A)("dxBox",b),t.A=b},93865:function(e,t,i){i.d(t,{A:function(){return Ge}});var a=i(66529),n=(i(82438),i(50020),i(82950)),s=i(61928),o=i(74567),r=i(59025),l=i(77527),d=i(89449),h=i(12625),u=i(35167),p=i(90218),c=i(26228),_=i(29518),m=i(58936),g=i(50172),v=(i(99819),i(82454)),f=i(39904),C=i(30816),y=i(86103),b=i(44956),x=i(89214),D=i(23845),A=i(27996),w=i(46361),I=i(39889),V=i(50404),T=i(68951),S=i(54624),O=i(85563);class M extends(S.A.inherit({})){ctor(e){this.dateBox=e}widgetOption(e){var t;return null===(t=this._widget)||void 0===t?void 0:t.option.apply(this._widget,arguments)}_renderWidget(e){e=e||(0,O.A)("<div>"),this._widget=this._createWidget(e),this._widget.$element().appendTo(this._getWidgetContainer())}_createWidget(e){const t=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(e,t,i)}_getWidgetOptions(){S.A.abstract()}_getWidgetName(){S.A.abstract()}getDefaultOptions(){return{mode:"text"}}getDisplayFormat(e){S.A.abstract()}supportedKeys(){}getKeyboardListener(){}customizeButtons(){}getParsedText(e,t){const i=r.A.parse(e,t);return i||r.A.parse(e)}renderInputMinMax(){}renderOpenedState(){this._updateValue()}popupConfig(e){S.A.abstract()}_dimensionChanged(){var e;null===(e=this._getPopup())||void 0===e||e.repaint()}renderPopupContent(){const e=this._getPopup();this._renderWidget();const t=e.$content().parent();s.A.off(t,"mousedown"),s.A.on(t,"mousedown",this._preventFocusOnPopup.bind(this))}_preventFocusOnPopup(e){e.preventDefault()}_getWidgetContainer(){return this._getPopup().$content()}_getPopup(){return this.dateBox._popup}popupShowingHandler(){}popupHiddenHandler(){}_updateValue(e){var t;null===(t=this._widget)||void 0===t||t.option("value",this.dateBoxValue())}useCurrentDateByDefault(){}getDefaultDate(){return new Date}textChangedHandler(){}renderValue(){this.dateBox.option("opened")&&this._updateValue()}getValue(){return this._widget.option("value")}isAdaptivityChanged(){return!1}dispose(){const e=this._getPopup();e&&e.$content().empty()}dateBoxValue(e,t){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}var k=M;class B extends k{ctor(e){super.ctor(e),this.NAME="Calendar"}getDefaultOptions(){return(0,n.A)({},super.getDefaultOptions(),{todayButtonText:this.dateBox.option("todayButtonText")??v.A.format("dxCalendar-todayButtonText")})}supportedKeys(){const e=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow(){if(this.option("opened"))return!0},leftArrow(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){const t=this._getContouredValue(),i=this._lastActionElement,a=this._closeDropDownByEnter();return a&&t&&"calendar"===i&&this.dateBoxValue(t,e),a&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!a}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:e,end:e}}getDisplayFormat(e){return e||"shortdate"}_closeDropDownByEnter(){return!0}_getWidgetName(){return V.A}_getContouredValue(){return this._widget._view.option("contouredDate")}getKeyboardListener(){return this._widget}_getWidgetOptions(){const{disabledDates:e,min:t,max:i,todayButtonText:a}=this.dateBox.option();return(0,b.X)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:t,max:i,onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:(0,g.Tn)(e)?this._injectComponent(e.bind(this.dateBox)):e,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0,todayButtonText:a})}_injectComponent(e){const t=this;return function(i){return(0,b.X)(i,{component:t.dateBox}),e(i)}}_refreshActiveDescendant(e){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",e.actionValue)}_getTodayButtonConfig(){const e=this.dateBox.option("buttonsLocation"),t="default"===e,i=t?["bottom","center"]:(0,I.T6)(e),a=(0,T.gx)()?"text":"outlined";return{widget:"dxButton",toolbar:i[0],location:"after"===i[1]?"before":i[1],options:{onClick:e=>{this._widget._toTodayView(e)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:a}}}_isCalendarVisible(){const{calendarOptions:e}=this.dateBox.option();return(0,g.RI)(e)||!1!==e.visible}_getPopupToolbarItems(e){const t="useButtons"===this.dateBox.option("applyValueMode"),i=t&&this._isCalendarVisible();if(i){const t=this._getTodayButtonConfig();return[t,...e]}return e}popupConfig(e){return(0,b.X)(!0,e,{position:{collision:"flipfit flip"},width:"auto"})}_valueChangedHandler(e){const{value:t}=e,i=e.previousValue;C.A.sameDate(t,i)&&C.A.sameHoursAndMinutes(t,i)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),e.event)}_updateValue(e){this._widget&&this._widget.option("value",this.dateBoxValue())}textChangedHandler(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)}_cellClickHandler(e){const{dateBox:t}=this;"instantly"===t.option("applyValueMode")&&(t.option("opened",!1),this.dateBoxValue(this.getValue(),e.event))}}var E=B,R=(i(69375),i(1767)),F=i(92638),$=i(33892),P=i(11697),N=i(24039);const H=["year","day","month","day"],L=["hours","minutes","seconds","milliseconds"],W=864e5,z=31536e6,G=function(e){const t=typeof e;return"string"===t?"format":"object"===t&&void 0!==e.type?e.type:null},Y={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:W,ONE_YEAR:z,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){const e=new Date;return new Date(e.getFullYear()+50,e.getMonth(),e.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:()=>"yyyy-MM-dd",components:H},time:{getStandardPattern:()=>"HH:mm",components:L},datetime:{getStandardPattern(){let e;return function(){const t=(0,O.A)("<input>").attr("type","datetime");t.val("2000-01-01T01:01Z"),t.val()&&(e="yyyy-MM-ddTHH:mmZ")}(),e||(e="yyyy-MM-ddTHH:mm:ssZ"),Y.FORMATS_INFO.datetime.getStandardPattern=function(){return e},e},components:[...H,...L]},"datetime-local":{getStandardPattern:()=>"yyyy-MM-ddTHH:mm:ss",components:[...H,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat(e,t){const i=Y.FORMATS_INFO[t].getStandardPattern();return y.A.serializeDate(e,i)},fromStandardDateFormat(e){const t=y.A.dateParser(e);return(0,g.$P)(t)?t:void 0},getMaxMonthDay:(e,t)=>new Date(e,t+1,0).getDate(),mergeDates(e,t,i){if(!t)return t||null;if(!e||isNaN(e.getTime())){const t=new Date(null);e=new Date(t.getFullYear(),t.getMonth(),t.getDate())}const a=new Date(e.valueOf()),n=Y.FORMATS_INFO[i];return(0,x.__)(n.components,function(){const e=Y.DATE_COMPONENTS_INFO[this];a[e.setter](t[e.getter]())}),a},getLongestCaptionIndex(e){let t,i=0,a=0;for(t=0;t<e.length;++t)e[t].length>a&&(i=t,a=e[t].length);return i},formatUsesMonthName:e=>r.A.formatUsesMonthName(e),formatUsesDayName:e=>r.A.formatUsesDayName(e),getLongestDate(e,t,i){const a=G(e);let n=9;a&&!Y.formatUsesMonthName(a)||(n=Y.getLongestCaptionIndex(t));const s=new Date(1888,n,21,23,59,59,999);if(!a||Y.formatUsesDayName(a)){const e=s.getDate()-s.getDay()+Y.getLongestCaptionIndex(i);s.setDate(e)}return s},normalizeTime(e){e.setSeconds(0),e.setMilliseconds(0)}};Y.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter(e,t){const i=new Date(t.getTime());return i.setFullYear(e),r.A.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter(e,t){const i=new Date(t.getTime());return i.setDate(e),r.A.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:e=>r.A.getMonthNames()[e],startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:e=>r.A.format(new Date(0,0,0,e),"hour"),startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:e=>r.A.format(new Date(0,0,0,0,e),"minute"),startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:e=>r.A.format(new Date(0,0,0,0,0,e),"second"),startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:e=>r.A.format(new Date(0,0,0,0,0,0,e),"millisecond"),startValue:0,endValue:999}};var K=Y;const q=function(e,t,i){U(e,t,i)},U=function(e,t,i){e.css("transform",`rotate(${t}deg) translate(0,${i}px)`)};class j extends $.A{_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5})}_getValue(){const{value:e}=this.option();return e||new Date}_init(){super._init(),this.$element().addClass("dx-timeview")}_render(){super._render(),this._renderBox(),this._updateTime()}_renderBox(){const e=(0,O.A)("<div>").appendTo(this.$element()),t=[];this.option("_showClock")&&t.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),t.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(e,F.A,{height:"100%",width:"100%",direction:"col",items:t})}_renderClock(e,t,i){this._$hourArrow=(0,O.A)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,O.A)("<div>").addClass("dx-timeview-minutearrow");const a=(0,O.A)(i);a.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",a)}_updateClock(){const e=this._getValue(),t=e.getHours()/12*360+e.getMinutes()/60*30,i=e.getMinutes()/60*360;q(this._$hourArrow,t,this.option("_arrowOffset")),q(this._$minuteArrow,i,this.option("_arrowOffset"))}_getBoxItems(e){const t=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,O.A)("<div>").addClass("dx-timeview-time-separator").text(r.A.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return e&&t.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),t}_renderField(){const e=!this.option("use24HourFormat");return this._createHourBox(e),this._createMinuteBox(),e&&this._createFormat12Box(),this._createComponent((0,O.A)("<div>").addClass("dx-timeview-field"),F.A,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(e)}).$element()}_createHourBox(e){this._hourBox=this._createComponent((0,O.A)("<div>"),N.A,(0,n.A)({min:-1,max:e?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:e=>this._keyboardHandler(e)},this._getNumberBoxConfig())),this._hourBox.setAria("label","hours")}_isPM(){return!this.option("use24HourFormat")&&1===this._format12.option("value")}_onHourBoxValueChanged(e){let{value:t,component:i}=e;const a=this._getValue(),n=new Date(a);let s=this._convertMaxHourToMin(t);i.option("value",s),this._isPM()&&(s+=12),n.setHours(s),K.normalizeTime(n),this.option("value",n)}_convertMaxHourToMin(e){const t=this.option("use24HourFormat")?24:12;return(t+e)%t}_createMinuteBox(){this._minuteBox=this._createComponent((0,O.A)("<div>"),N.A,(0,n.A)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{let{value:t,component:i}=e;const a=(60+t)%60;i.option("value",a);const n=new Date(this._getValue());n.setMinutes(a),K.normalizeTime(n),this.option("value",n)}},this._getNumberBoxConfig())),this._minuteBox.setAria("label","minutes")}_createFormat12Box(){const e=r.A.getPeriodNames();this._format12=this._createComponent((0,O.A)("<div>").addClass("dx-timeview-format12"),P.A,{items:[{value:-1,text:e[0]},{value:1,text:e[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{let{value:t}=e;const i=this._getValue().getHours(),a=new Date(this._getValue()),n=(i+12*t)%24;a.setHours(n),this.option("value",a)},dropDownOptions:{container:this.$element()},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")}),this._format12.setAria("label","type")}_refreshFormat12(){if(this.option("use24HourFormat"))return;const e=this._getValue(),t=e.getHours(),i=t>=12,a=i?1:-1;this._silentEditorValueUpdate(this._format12,a)}_silentEditorValueUpdate(e,t){e&&(e._suppressValueChangeAction(),e.option("value",t),e._resumeValueChangeAction())}_getNumberBoxConfig(){const{stylingMode:e}=this.option();return{showSpinButtons:!0,displayValueFormatter:e=>(e<10?"0":"")+e,stylingMode:e}}_normalizeHours(e){return this.option("use24HourFormat")?e:e%12||12}_updateField(){const e=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,e),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()}_updateTime(){this.option("_showClock")&&this._updateClock(),this._updateField()}_visibilityChanged(e){e&&this._updateTime()}_optionChanged(e){switch(e.name){case"value":this._updateTime(),super._optionChanged(e);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:super._optionChanged(e)}}}(0,a.A)("dxTimeView",j);var X=j;const Z=(0,A.zk)(),Q="dx-datebox-datetime-time-side";class J extends E{ctor(e){super.ctor(e),this.NAME="CalendarWithTime"}getDefaultOptions(){return(0,n.A)({},super.getDefaultOptions(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})}_closeDropDownByEnter(){return C.A.sameDate(this._getContouredValue(),this.widgetOption("value"))}getDisplayFormat(e){return e||"shortdateshorttime"}_is24HourFormat(){return r.A.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))}_getContouredValue(){const e=super._getContouredValue();return this._updateDateTime(e)}_renderWidget(){super._renderWidget(),this._timeView=this.dateBox._createComponent((0,O.A)("<div>"),X,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})}renderOpenedState(){super.renderOpenedState();const e=this._getPopup();e&&e.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(()=>{var e;null===(e=this._getPopup())||void 0===e||e.repaint()},0)}isAdaptivityChanged(){const e=this._isShrinkView(),t=this._currentAdaptiveMode;return e!==t?(this._currentAdaptiveMode=e,void 0!==t):super.isAdaptivityChanged()}_updateValue(e){let t=this.dateBoxValue();t||e||(t=new Date,K.normalizeTime(t)),super._updateValue(),this._timeView&&(t&&this._timeView.option("value",t),this._timeView.option("use24HourFormat",this._is24HourFormat()))}_isSmallScreen(){return(0,R.RG)(Z)<=573}_isShrinkView(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()}_getBoxItems(){const e=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||e.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),e}renderPopupContent(){super.renderPopupContent(),this._currentAdaptiveMode=this._isShrinkView();const e=this._getPopup().$content();this._box=this.dateBox._createComponent((0,O.A)("<div>").appendTo(e),F.A,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,t,i){const a=(0,O.A)("<div>");switch(e.name){case"calendar":a.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(Q),a.append(this._timeView.$element()));break;case"time":a.append(this._timeView.$element()),(0,O.A)(i).addClass(Q)}return a}.bind(this)})}popupConfig(e){const t=super.popupConfig(e);return(0,b.X)(t,{width:"auto"})}_preventFocusOnPopup(e){(0,O.A)(e.target).hasClass("dx-texteditor-input")||(super._preventFocusOnPopup.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())}_updateDateTime(e){const{value:t}=this._timeView.option();return e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}getValue(){let e=this._widget.option("value")??this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)}dispose(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),super.dispose()}}var ee=J,te=(i(57327),i(63029)),ie=i(22044),ae=i(59981),ne=i(81218);function se(e,t){if((0,g.Qd)(e)){const t=(0,I.YD)(e.left,e.x),i=(0,I.YD)(e.top,e.y);return{left:(0,g.O9)(t)?t:void 0,top:(0,g.O9)(i)?i:void 0}}const{isVertical:i,isHorizontal:a}=new ne.D(t);return{left:a&&(0,g.O9)(e)?e:void 0,top:i&&(0,g.O9)(e)?e:void 0}}var oe=i(68554);class re extends oe.A{_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){s.A.on((0,O.A)(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(!this.option("showOnClick"))return;const e=(0,o.b4)(ae.U,this.NAME),t=this._createActionByOption("onClick");s.A.off((0,O.A)(this.container()),e),s.A.on((0,O.A)(this.container()),e,e=>{t({event:e})})}_renderItems(){const e=this.option("items")||[];let t=(0,O.A)();(0,O.A)(this.content()).empty(),e.forEach(e=>{t=t.add((0,O.A)("<div>").addClass("dx-dateview-item").append(e))}),(0,O.A)(this.content()).append(t),this._$items=t,this.update()}_renderSelectedItemFrame(){(0,O.A)("<div>").addClass("dx-dateview-item-selected-frame").append((0,O.A)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,O.A)(this.container()))}_renderSelectedValue(e){const t=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(t)}),this._renderActiveStateItem()}_fitIndex(e){const t=this.option("items")||[],i=t.length;return e>=i?i-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){const e=this._getItemSelector(),t=(0,o.b4)(ae.U,this.NAME);s.A.off(this.$element(),t,e),s.A.on(this.$element(),t,e,this._itemClickHandler.bind(this))}_getItemSelector(){return".dx-dateview-item"}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){const e=this.option("selectedIndex");(0,x.__)(this._$items,function(t){(0,O.A)(this).toggleClass("dx-dateview-item-selected",e===t)})}_shouldScrollToNeighborItem(){return"desktop"===p.A.real().deviceType&&this._isWheelScrolled}_moveTo(e){const{top:t,left:i}=se(e),a=this.scrollOffset(),n={x:a.left-i,y:a.top-t};if(this._isVisible()&&(n.x||n.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){const e=this;te.fx.stop((0,O.A)(this.content())),te.fx.animate((0,O.A)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(n.y)},complete(){(0,ie.fw)((0,O.A)(e.content())),e.handleMove({delta:n})}}),delete this._animation}else this.handleMove({delta:n})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){const t=this.option("items").length;return Math.max(Math.min(e,t-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){const t=this.scrollOffset().top,i=e*this._itemHeight(),a=t-i;if(this._isInNullNeighborhood(a))return e;const n=a>0?1:-1,s=this._fitSelectedIndexInRange(e+n);return s}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;const t=this.scrollOffset().top/this._itemHeight();return Math.round(t)}_endActionHandler(){const e=this.option("selectedIndex"),t=this._getNewSelectedIndex(e);t===e?this._renderSelectedValue(t):this.option("selectedIndex",t),this._isWheelScrolled=!1}_itemHeight(){const e=this._$items.first();return(0,R.Oq)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,O.A)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,t){var i;null===(i=this._selectedIndexChanged)||void 0===i||i.call(this,{value:e,previousValue:t,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){const e=this.option("selectedIndex"),t=this._fitIndex(e);t===e?this._renderActiveStateItem():this.option("selectedIndex",t)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,a.A)("dxDateViewRoller",re);var le=re;const de={date:"date",datetime:"datetime",time:"time"},he={year:"year",month:"month",day:"day",hours:"hours"};class ue extends $.A{_valueOption(){const{value:e}=this.option(),t=new Date(e);return!e||isNaN(t)?this._getDefaultDate():t}_getDefaultDate(){const e=new Date,{type:t}=this.option();return t===de.date?new Date(e.getFullYear(),e.getMonth(),e.getDate()):e}_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{minDate:K.MIN_DATEVIEW_DEFAULT_DATE,maxDate:K.MAX_DATEVIEW_DEFAULT_DATE,type:de.date,value:new Date,applyCompactClass:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:e=>"desktop"!==e.deviceType,options:{applyCompactClass:!0}}])}_render(){super._render(),this.$element().addClass("dx-dateview");const{type:e}=this.option();this._toggleFormatClasses(e),this._toggleCompactClass()}_toggleFormatClasses(e,t){this.$element().addClass(`dx-dateview-${e}`),t&&this.$element().removeClass(`dx-dateview-${t}`)}_toggleCompactClass(){const{applyCompactClass:e}=this.option();this.$element().toggleClass("dx-dateview-compact",e)}_wrapper(){return this._$wrapper}_renderContentImpl(){this._$wrapper=(0,O.A)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())}_renderRollers(){this._$rollersContainer||(this._$rollersContainer=(0,O.A)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};const e=this;(0,x.__)(e._rollerConfigs,t=>{const i=(0,O.A)("<div>").appendTo(e._$rollersContainer).addClass(`dx-dateviewroller-${e._rollerConfigs[t].type}`);e._rollers[e._rollerConfigs[t].type]=e._createComponent(i,le,{items:e._rollerConfigs[t].displayItems,selectedIndex:e._rollerConfigs[t].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart(i){const a=i.component;a._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t])},onEnd(e){const t=e.component;t._toggleActive(!1)},onClick(i){const a=i.component;a._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t]),e._setRollerState(e._rollerConfigs[t],a.option("selectedIndex")),a._toggleActive(!1)},onSelectedIndexChanged(i){const a=i.component;e._setRollerState(e._rollerConfigs[t],a.option("selectedIndex"))}})}),e._$rollersContainer.appendTo(e._wrapper())}_createRollerConfigs(e){const t=this;e=e||t.option("type"),t._rollerConfigs={},r.A.getFormatParts(K.FORMATS_MAP[e]).forEach(e=>{t._createRollerConfig(e)})}_createRollerConfig(e){const t=K.DATE_COMPONENTS_INFO[e],i=this._calculateRollerConfigValueRange(e),{startValue:a}=i,{endValue:n}=i,{formatter:s}=t,o=this._getCurrentDate(),r={type:e,setValue:t.setter,valueItems:[],displayItems:[],getIndex:e=>e[t.getter]()-a};for(let l=a;l<=n;l++)r.valueItems.push(l),r.displayItems.push(s(l,o));r.selectedIndex=r.getIndex(o),this._rollerConfigs[e]=r}_setActiveRoller(e){const t=e&&this._rollers[e.type];(0,x.__)(this._rollers,function(){this.toggleActiveState(this===t)})}_updateRollersPosition(){const e=this;(0,x.__)(this._rollers,function(t){const i=e._rollerConfigs[t].getIndex(e._getCurrentDate());this.option("selectedIndex",i)})}_setRollerState(e,t){if(t!==e.selectedIndex){const i=e.valueItems[t],{setValue:a}=e;let n=new Date(this._getCurrentDate()),s=n.getDate();const o=this.option("minDate"),r=this.option("maxDate");e.type===he.month?s=Math.min(s,K.getMaxMonthDay(n.getFullYear(),i)):e.type===he.year&&(s=Math.min(s,K.getMaxMonthDay(i,n.getMonth()))),n.setDate(s),n[a](i);const l=C.A.normalizeDate(n,o,r);n=K.mergeDates(l,n,"time"),n=C.A.normalizeDate(n,o,r),this.option("value",n),e.selectedIndex=t}e.type===he.year&&this._refreshRollers(),e.type===he.month&&(this._refreshRoller(he.day),this._refreshRoller(he.hours))}_refreshRoller(e){const t=this._rollers[e];if(t){this._createRollerConfig(e);const i=this._rollerConfigs[e];e!==he.day&&i.displayItems.toString()===t.option("items").toString()||t.option({items:i.displayItems,selectedIndex:i.selectedIndex})}}_getCurrentDate(){const e=this._valueOption(),t=this.option("minDate"),i=this.option("maxDate");return C.A.normalizeDate(e,t,i)}_calculateRollerConfigValueRange(e){const t=this._getCurrentDate(),{minDate:i,maxDate:a}=this.option(),n=C.A.sameYear(t,i),s=n&&t.getMonth()===i.getMonth(),o=C.A.sameYear(t,a),r=o&&t.getMonth()===a.getMonth(),l=s&&t.getDate()===i.getDate(),d=r&&t.getDate()===a.getDate(),h=K.DATE_COMPONENTS_INFO[e];let{startValue:u}=h,{endValue:p}=h;return e===he.year&&(u=i.getFullYear(),p=a.getFullYear()),e===he.month&&(n&&(u=i.getMonth()),o&&(p=a.getMonth())),e===he.day&&(p=K.getMaxMonthDay(t.getFullYear(),t.getMonth()),n&&s&&(u=i.getDate()),o&&r&&(p=a.getDate())),e===he.hours&&(u=l?i.getHours():u,p=d?a.getHours():p),{startValue:u,endValue:p}}_refreshRollers(){this._refreshRoller(he.month),this._refreshRoller(he.day),this._refreshRoller(he.hours)}_optionChanged(e){switch(e.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(e.value,e.previousValue);break;case"visible":super._optionChanged(e),e.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:super._optionChanged(e)}}_clean(){super._clean(),delete this._$rollersContainer}}(0,a.A)("dxDateView",ue);var pe=ue;const ce=(0,A.zk)();class _e extends k{ctor(e){super.ctor(e),this.NAME="DateView"}getDefaultOptions(){return(0,n.A)({},super.getDefaultOptions(),{openOnFieldClick:!0,applyButtonText:v.A.format("OK"),"dropDownOptions.showTitle":!0})}getDisplayFormat(e){return e||K.FORMATS_MAP[this.dateBox.option("type")]}popupConfig(e){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:e.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device(e){const{platform:t}=e;return"generic"===t||"ios"===t},options:{width:"auto",height:"auto"}},{device(e){const{platform:t}=e,{phone:i}=e;return"generic"===t&&i},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:ce}}}]}}_renderWidget(){if((0,D.L2)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))return void(this._widget&&(this._widget.$element().remove(),this._widget=null));const e=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{const t=(0,O.A)("<div>").appendTo(e.$content());this._widget=this._createWidget(t)}this._widget.$element().appendTo(this._getWidgetContainer())}_getWidgetName(){return pe}renderOpenedState(){super.renderOpenedState(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())}_getWidgetOptions(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*K.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}}var me=_e,ge=(i(55101),i(13819)),ve=i(12590);const fe=(0,A.zk)(),Ce={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)};class ye extends k{ctor(e){super.ctor(e),this.NAME="List"}supportedKeys(){return{space:I.lQ,home:I.lQ,end:I.lQ}}getDefaultOptions(){return(0,n.A)({},super.getDefaultOptions(),{applyValueMode:"instantly"})}getDisplayFormat(e){return e||"shorttime"}popupConfig(e){return e}getValue(){const e=this._widget.option("selectedIndex");if(-1===e)return this.dateBox.option("value");const t=this._widgetItems[e];return this._getDateByItemData(t)}useCurrentDateByDefault(){return!0}getDefaultDate(){return new Date(null)}popupShowingHandler(){this.dateBox._dimensionChanged()}_renderWidget(){super._renderWidget(),this._refreshItems()}_getWidgetName(){return ve.A}_getWidgetOptions(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}}_refreshActiveDescendant(e){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",e.actionValue)}_refreshItems(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)}renderOpenedState(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())}dispose(){super.dispose(),clearTimeout(this._asyncScrollTimeout)}_updateValue(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())}_setSelectedItemsByValue(){const e=this.dateBoxValue(),t=this._getDateIndex(e);-1===t?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",t)}_scrollToSelectedItem(){this._widget.scrollToItem(this._widget.option("selectedIndex"))}_getDateIndex(e){let t=-1;for(let i=0,a=this._widgetItems.length;i<a;i++)if(this._areDatesEqual(e,this._widgetItems[i])){t=i;break}return t}_areDatesEqual(e,t){return(0,g.$P)(e)&&(0,g.$P)(t)&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()}_getTimeListItems(){let e=this.dateBox.dateOption("min")||this._getBoundaryDate("min");const t=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null;let a=t-e;const n=e.getMinutes()%this.dateBox.option("interval");return a<0?[]:(a>K.ONE_DAY&&(a=K.ONE_DAY),i-e<K.ONE_DAY||(e=this._getBoundaryDate("min"),e.setMinutes(n),i&&Math.abs(i-t)<K.ONE_DAY&&(a=(60*t.getHours()+Math.abs(t.getMinutes()-n))*K.ONE_MINUTE)),this._getRangeItems(e,new Date(e),a))}_getRangeItems(e,t,i){const a=[],n=this.dateBox.option("interval");while(t-e<=i)a.push(new Date(t)),t.setMinutes(t.getMinutes()+n);return a}_getBoundaryDate(e){const t=Ce[e],i=new Date((0,I.YD)(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.getHours(),t.getMinutes())}_timeListItemTemplate(e){const t=this.dateBox.option("displayFormat");return r.A.format(e,this.getDisplayFormat(t))}_listItemClickHandler(e){if("useButtons"===this.dateBox.option("applyValueMode"))return;const t=this._getDateByItemData(e.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(t,e.event)}_getDateByItemData(e){let t=this.dateBox.option("value");const i=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),s=e.getFullYear(),o=e.getMonth(),r=e.getDate();return t?(t=this.dateBox.option("dateSerializationFormat")?y.A.deserializeDate(t):new Date(t),t.setHours(i),t.setMinutes(a),t.setSeconds(n),t.setFullYear(s),t.setMonth(o),t.setDate(r)):t=new Date(s,o,r,i,a,0,0),t}getKeyboardListener(){return this._widget}_updatePopupHeight(){var e;const t=(0,ge.b)(this.dateBox.option("dropDownOptions.height"));if(void 0===t||"auto"===t){this.dateBox._setPopupOption("height","auto");const e=(0,R.P$)(this._widget.$element()),t=.45*(0,R.Oq)(fe);this.dateBox._setPopupOption("height",Math.min(e,t))}null===(e=this.dateBox._timeList)||void 0===e||e.updateDimensions()}getParsedText(e,t){let i=super.getParsedText(e,t);return i&&(i=K.mergeDates(i,new Date(null),"date")),i}}var be=ye;class xe extends k{ctor(e){super.ctor(e),this.NAME="Native"}popupConfig(e){return(0,n.A)({},e,{width:"auto"})}getParsedText(e){return e?"datetime"===this.dateBox.option("type")?new Date(e.replace(/-/g,"/").replace("T"," ").split(".")[0]):K.fromStandardDateFormat(e):null}renderPopupContent(){}_getWidgetName(){}_getWidgetOptions(){}_getDateBoxType(){let{type:e}=this.dateBox.option();return K.SUPPORTED_FORMATS.includes(e)?"datetime"!==e||(0,D.L2)(e)||(e="datetime-local"):e="date",e}customizeButtons(){const e=this.dateBox.getButton("dropDown");p.A.real().android&&e&&e.on("click",()=>{this.dateBox._input().get(0).click()})}getDefaultOptions(){return{mode:this._getDateBoxType()}}getDisplayFormat(e){const t=this._getDateBoxType();return e||K.FORMATS_MAP[t]}renderInputMinMax(e){const t=this.dateBox.option("type"),i={datetime:"yyyy-MM-ddTHH:mm:ss",date:"yyyy-MM-dd",time:"HH:mm:ss"}[t]??"yyyy-MM-dd";e.attr({min:y.A.serializeDate(this.dateBox.dateOption("min"),i),max:y.A.serializeDate(this.dateBox.dateOption("max"),i)})}}var De=xe;const Ae=(0,A.zk)(),we="dx-show-invalid-badge",Ie="dx-clear-button-area",Ve={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Te={date:"date",datetime:"datetime",time:"time"},Se={calendar:"Calendar",dateView:"DateView",native:"Native",calendarWithTime:"CalendarWithTime",list:"List"},Oe={Calendar:E,DateView:me,Native:De,CalendarWithTime:ee,List:be};class Me extends w.A{_supportedKeys(){return(0,n.A)({},super._supportedKeys(),this._strategy.supportedKeys())}_renderButtonContainers(){super._renderButtonContainers.apply(this,arguments),this._strategy.customizeButtons()}_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{type:"date",showAnalogClock:!0,value:null,displayFormat:null,interval:30,disabledDates:null,pickerType:Ve.calendar,invalidDateMessage:v.A.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:v.A.format("validation-range"),applyButtonText:v.A.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device(){const e=p.A.real(),{platform:t}=e;return"ios"===t||"android"===t},options:{pickerType:Ve.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])}_initOptions(e){this._userOptions=(0,b.X)({},e),super._initOptions(e),this._updatePickerOptions()}_updatePickerOptions(){let{pickerType:e}=this.option();const{type:t}=this.option();e!==Ve.list||t!==Te.datetime&&t!==Te.date||(e=Ve.calendar),t===Te.time&&e===Ve.calendar&&(e=Ve.list),this._pickerType=e,this._setShowDropDownButtonOption()}_setShowDropDownButtonOption(){const{platform:e}=p.A.real(),t="android"===e&&c.A.mozilla,i=this._isNativeType();let a="generic"!==e||!i;i&&t&&(a=!1),this.option({showDropDownButton:a})}_init(){this._initStrategy(),this.option((0,b.X)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,super._init()}_toLowerCaseFirstLetter(e){return e.charAt(0).toLowerCase()+e.substr(1)}_initStrategy(){const e=this._getStrategyName(this._getFormatType()),t=Oe[e];this._strategy&&this._strategy.NAME===e||(this._strategy=new t(this))}_getFormatType(){const e=this.option("type"),t=/h|m|s/g.test(e),i=/d|M|Y/g.test(e);let a="";return i&&(a+=Te.date),t&&(a+=Te.time),a}_getStrategyName(e){const t=this._pickerType;return t===Ve.rollers?Se.dateView:t===Ve.native?Se.native:e===Te.date?Se.calendar:e===Te.datetime?Se.calendarWithTime:Se.list}_initMarkup(){this.$element().addClass("dx-datebox"),super._initMarkup(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())}_render(){super._render(),this._formatValidationIcon()}_renderDimensions(){super._renderDimensions(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()}_dimensionChanged(){super._dimensionChanged(),this._updatePopupHeight()}_updatePopupHeight(){var e,t;this._popup&&(null===(e=(t=this._strategy)._updatePopupHeight)||void 0===e||e.call(t))}_refreshFormatClass(){const e=this.$element();(0,x.__)(Te,(t,i)=>{e.removeClass(`dx-datebox-${i}`)});const{type:t}=this.option();e.addClass(`dx-datebox-${t}`)}_refreshPickerTypeClass(){const e=this.$element();(0,x.__)(Ve,(t,i)=>{e.removeClass(`dx-datebox-${i}`)}),e.addClass(`dx-datebox-${this._pickerType}`)}_formatValidationIcon(){if(!(0,A.Vd)())return;const e=this._input().get(0),t=this.option("rtlEnabled"),i=this._getClearButtonWidth(),a=this._getLongestElementDimensions(),n=parseFloat(Ae.getComputedStyle(e).width)-i,s=a.width>n,{style:o}=e,{_showValidationIcon:r}=this.option();this.$element().toggleClass(we,!s&&r),s?(void 0===this._storedPadding&&(this._storedPadding=t?a.leftPadding:a.rightPadding),t?o.paddingLeft=0:o.paddingRight=0):t?o.paddingLeft=`${this._storedPadding}px`:o.paddingRight=`${this._storedPadding}px`}_getClearButtonWidth(){let e=0;if(this._isClearButtonVisible()&&""===this._input().val()){const t=this.$element().find(`.${Ie}`).get(0);e=parseFloat(Ae.getComputedStyle(t).width)}return e}_getLongestElementDimensions(){const e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=r.A.format(K.getLongestDate(e,r.A.getMonthNames(),r.A.getDayNames()),e),i=this._input(),a=i.get(0),n=(0,_.D2)(i,t),s=void 0!==this._storedPadding,o=s?this._storedPadding:0;n.appendTo(this.$element());const l=parseFloat(Ae.getComputedStyle(n.get(0)).width),d=parseFloat(Ae.getComputedStyle(a).paddingRight),h=parseFloat(Ae.getComputedStyle(a).paddingLeft),u=l+h+d+o;return n.remove(),{width:u,leftPadding:h,rightPadding:d}}_getKeyboardListeners(){var e;return super._getKeyboardListeners().concat([null===(e=this._strategy)||void 0===e?void 0:e.getKeyboardListener()])}_renderPopup(){var e;super._renderPopup(),null===(e=this._popup)||void 0===e||e.$wrapper().addClass("dx-datebox-wrapper"),this._renderPopupWrapper()}_getPopupToolbarItems(){var e,t;const i=super._getPopupToolbarItems();return(null===(e=(t=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(t,i))??i}_popupConfig(){const e=super._popupConfig();return(0,n.A)({},this._strategy.popupConfig(e),{title:this._getPopupTitle(),dragEnabled:!1})}_renderPopupWrapper(){if(!this._popup)return;const e=this.$element(),t=(0,b.X)({},Te,Ve);(0,x.__)(t,(t,i)=>{e.removeClass(`dx-datebox-wrapper-${i}`)});const{type:i}=this.option();this._popup.$wrapper().addClass(`dx-datebox-wrapper-${i}`).addClass(`dx-datebox-wrapper-${this._pickerType}`).addClass("dx-dropdowneditor-overlay")}_renderPopupContent(){super._renderPopupContent(),this._strategy.renderPopupContent()}_popupShowingHandler(){super._popupShowingHandler(),this._strategy.popupShowingHandler()}_popupShownHandler(){super._popupShownHandler(),this._strategy.renderOpenedState()}_popupHiddenHandler(){super._popupHiddenHandler(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()}_visibilityChanged(e){e&&this._formatValidationIcon()}_clearValueHandler(e){this.option("text",""),super._clearValueHandler(e)}_readOnlyPropValue(){if(this._pickerType===Ve.rollers)return!0;const{platform:e}=p.A.real(),t=this._isNativeType()&&("ios"===e||"android"===e);if(t){const{readOnly:e}=this.option();return e}return super._readOnlyPropValue()}_isClearButtonVisible(){return super._isClearButtonVisible()&&!this._isNativeType()}_renderValue(){const e=this.dateOption("value");return this.option("text",this._getDisplayedText(e)),this._strategy.renderValue(),super._renderValue()}_setSubmitValue(){const e=this.dateOption("value"),{type:t,dateSerializationFormat:i}=this.option(),a=K.SUBMIT_FORMATS_MAP[t],n=i?y.A.serializeDate(e,i):K.toStandardDateFormat(e,a);this._getSubmitElement().val(n)}_getDisplayedText(e){const{mode:t}=this.option();let i;if("text"===t){const t=this._strategy.getDisplayFormat(this.option("displayFormat"));i=r.A.format(e,t)}else{const a=this._getFormatByMode(t);i=a?r.A.format(e,a):K.toStandardDateFormat(e,t)}return i}_getFormatByMode(e){return(0,D.L2)(e)?null:K.FORMATS_MAP[e]}_valueChangeEventHandler(e){const{text:t,type:i,validationError:a}=this.option(),n=this.dateOption("value");if(t===this._getDisplayedText(n))return void this._recallInternalValidation(n,a);const s=this._getParsedDate(t),o=n??this._getDateByDefault(),r=K.mergeDates(o,s,i),l=s&&"time"===i?r:s;if(this._applyInternalValidation(l).isValid){const i=this._getDisplayedText(r);o&&r&&o.getTime()===r.getTime()&&i!==t?this._renderValue():this.dateValue(r,e)}}_recallInternalValidation(e,t){t&&!t.editorSpecific||(this._applyInternalValidation(e),this._applyCustomValidation(e))}_getDateByDefault(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()}_getParsedDate(e){const t=this._strategy.getDisplayFormat(this.option("displayFormat")),i=this._strategy.getParsedText(e,t);return i??void 0}_applyInternalValidation(e){const t=this.option("text"),i=!!t&&null!==e,a=!!e&&(0,g.$P)(e)&&!isNaN(e.getTime()),n=a&&C.A.dateInRange(e,this.dateOption("min"),this.dateOption("max"),this.option("type")),s=!i&&!e||n;let o="";const{invalidDateMessage:r,dateOutOfRangeMessage:l}=this.option();return a?n||(o=l):o=r,this._updateInternalValidationState(s,o),{isValid:s,isDate:a}}_updateInternalValidationState(e,t){this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:t}})}_applyCustomValidation(e){this.validationRequest.fire({editor:this,value:this._serializeDate(e)})}_isValueChanged(e){const t=this.dateOption("value"),i=t&&t.getTime(),a=e&&e.getTime();return i!==a}_isTextChanged(e){const t=this.option("text"),i=e&&this._getDisplayedText(e)||"";return t!==i}_renderProps(){super._renderProps(),this._input().attr("autocomplete","off")}_renderOpenedState(){this._isNativeType()||super._renderOpenedState(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()}_getPopupTitle(){const{placeholder:e}=this.option();if(e)return e;const{type:t}=this.option();return t===Te.time?v.A.format("dxDateBox-simulatedDataPickerTitleTime"):t===Te.date||t===Te.datetime?v.A.format("dxDateBox-simulatedDataPickerTitleDate"):""}_refreshStrategy(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()}_applyButtonHandler(e){const t=this._strategy.getValue();this.dateValue(t,e.event),super._applyButtonHandler()}_dispose(){var e;super._dispose(),null===(e=this._strategy)||void 0===e||e.dispose()}_isNativeType(){return this._pickerType===Ve.native}_updatePopupTitle(){var e;null===(e=this._popup)||void 0===e||e.option("title",this._getPopupTitle())}_optionChanged(e){switch(e.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":super._optionChanged.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions(),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions(),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":super._optionChanged.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":{const e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break}case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":case"todayButtonText":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(e.value),super._optionChanged.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),super._optionChanged.apply(this,arguments);break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:super._optionChanged.apply(this,arguments)}}_getSerializationFormat(){const{value:e}=this.option();return this.option("dateSerializationFormat")&&(0,f.A)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,g.kf)(e)?"number":(0,g.Kg)(e)&&""!==e?y.A.getDateSerializationFormat(e):void 0}_updateValue(e){super._updateValue(),this._applyInternalValidation(e??this.dateOption("value"))}dateValue(e,t){const i=this._isValueChanged(e);if(i&&t&&this._saveValueChangeEvent(t),!i){const{text:t}=this.option();this._isTextChanged(e)?this._updateValue(e):""===t&&this._applyCustomValidation(e)}return this.dateOption("value",e)}dateOption(e,t){if(1===arguments.length)return y.A.deserializeDate(this.option(e));this.option(e,this._serializeDate(t))}_serializeDate(e){const t=this._getSerializationFormat();return y.A.serializeDate(e,t)}_clearValue(){const e=this.option("value");super._clearValue(),null===e&&this._applyCustomValidation(null)}clear(){const e=this.option("value");super.clear(),null===e&&this._applyInternalValidation(null)}}var ke=Me;const Be=e=>e.getMonth()+1,Ee=(e,t)=>{const i=e.getDate(),a=Ne("M",e),n=(0,m.df)(parseInt(t),a.min,a.max);e.setMonth(n-1,1);const{min:s,max:o}=Ne("dM",e),r=(0,m.df)(i,s,o);e.setDate(r)},Re={a:e=>e.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:Be,L:Be,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds",x:"getTimezoneOffset"},Fe=(0,b.X)({},(0,h.rt)(),{a:(e,t)=>{const i=e.getHours(),a=i>=12;a!==!!parseInt(t)&&e.setHours((i+12)%24)},d:(e,t)=>{const i=Ne("dM",e).max;t>i&&e.setMonth(e.getMonth()+1),e.setDate(t)},h:(e,t)=>{const i=e.getHours()>=12;e.setHours(+t%12+(i?12:0))},M:Ee,L:Ee,E:(e,t)=>{t<0||e.setDate(e.getDate()-e.getDay()+parseInt(t))},y:(e,t)=>{const i=e.getFullYear(),a=String(t).length,n=String(Ne("y",e).max).length,s=parseInt(String(i).substr(0,n-a)+t);e.setFullYear(s)},x:e=>e}),$e=e=>Re[e]||(()=>e),Pe=(e,t)=>{const i=t.regexp.exec(e);let a=0,n=0;const s=[];for(let o=1;o<i.length;o++){a=n,n=a+i[o].length;const e=t.patterns[o-1].replace(/^'|'$/g,""),r=$e(e[0]);s.push({index:o-1,isStub:e===i[o],caret:{start:a,end:n},pattern:e,text:i[o],limits:function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return Ne(e[0],...i)},setter:Fe[e[0]]||I.lQ,getter:r})}return s},Ne=(e,t,i)=>{const a={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1},x:{min:0,max:0}};return a[i||e]||a.getAmPm},He=(e,t)=>{for(let i=0;i<e.length;i++){const a=e[i].caret.end>=t;if(!e[i].isStub&&a)return i}return null};class Le extends ke{_supportedKeys(){const e=super._supportedKeys(),t=t=>{const i=e[(0,o.YD)(t)];return null===i||void 0===i?void 0:i.apply(this,[t])},i=(e,i)=>this._shouldUseOriginalHandler(e)?t.apply(this,[e]):i.apply(this,[e]);return(0,n.A)({},e,{del:e=>i(e,e=>{this._revertPart(1),this._isAllSelected()||e.preventDefault()}),backspace:e=>i(e,e=>{this._revertPart(-1),this._isAllSelected()||e.preventDefault()}),home:e=>i(e,e=>{this._selectFirstPart(),e.preventDefault()}),end:e=>i(e,e=>{this._selectLastPart(),e.preventDefault()}),escape:e=>i(e,()=>{this._revertChanges()}),enter:e=>i(e,()=>{this._enterHandler()}),leftArrow:e=>i(e,e=>{this._selectNextPart(-1),e.preventDefault()}),rightArrow:e=>i(e,e=>{this._selectNextPart(1),e.preventDefault()}),upArrow:e=>i(e,e=>{this._upDownArrowHandler(1),e.preventDefault()}),downArrow:e=>i(e,e=>{this._upDownArrowHandler(-1),e.preventDefault()})})}_shouldUseOriginalHandler(e){const t=this.option("opened")&&e&&!["backspace","del"].includes((0,o.YD)(e));return!this._useMaskBehavior()||t||e&&e.altKey}_upDownArrowHandler(e){this._setNewDateIfEmpty();const t=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue(),a=i-t;this._loadMaskValue(this._initialMaskValue),this._changePartValue(a+e,!0)}_changePartValue(e,t){const i=this._getActivePartProp("pattern"),a=/^a{1,5}$/.test(i);a?this._toggleAmPm():this._partIncrease(e,t)}_toggleAmPm(){const e=this._getActivePartProp("text"),t=l.A.getPeriodNames().indexOf(e),i=1^t;this._setActivePartValue(i)}_getDefaultOptions(){return(0,n.A)({},super._getDefaultOptions(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})}_isSingleCharKey(e){let{originalEvent:t,alt:i}=e;const a=t.data||t.key;return"string"===typeof a&&1===a.length&&!i&&!(0,o.By)(t)}_isSingleDigitKey(e){var t;const i=null===(t=e.originalEvent)||void 0===t?void 0:t.data;return 1===(null===i||void 0===i?void 0:i.length)&&parseInt(i,10)}_useBeforeInputEvent(){return p.A.real().android}_keyInputHandler(e,t){const i=this._input().val();this._processInputKey(t),e.preventDefault();const a=i!==this._input().val();a&&s.A.trigger(this._input(),"input")}_keyboardHandler(e){let{key:t}=e.originalEvent;const i=super._keyboardHandler(e);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(c.A.chrome&&"Process"===e.key&&0===e.code.indexOf("Digit")?(t=e.code.replace("Digit",""),this._processInputKey(t),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(e)&&this._keyInputHandler(e.originalEvent,t)),i}_maskBeforeInputHandler(e){this._maskInputHandler=null;const{inputType:t}=e.originalEvent;"insertCompositionText"===t&&(this._maskInputHandler=()=>{this._renderSelectedPart()});const i="deleteContentBackward"===t,a="deleteContentForward"===t;if(i||a){const e=i?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(e)}}if(!this._useMaskBehavior()||!this._isSingleCharKey(e))return;const n=e.originalEvent.data;return this._keyInputHandler(e,n),!0}_keyPressHandler(e){const{originalEvent:t}=e;"insertCompositionText"===(null===t||void 0===t?void 0:t.inputType)&&this._isSingleDigitKey(e)&&(this._processInputKey(t.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),super._keyPressHandler(e),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)}_processInputKey(e){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(e))?this._searchString(e):this._searchNumber(e)}_isAllSelected(){const e=this._caret(),{text:t}=this.option();return e.end-e.start===t.length}_getFormatPattern(){if(this._formatPattern)return this._formatPattern;const e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=(0,g.Kg)(e)&&!r.A._getPatternByFormat(e);return this._formatPattern=t?e:(0,d.g)(t=>r.A.format(t,e)),this._formatPattern}_setNewDateIfEmpty(){if(!this._maskValue){const{type:e}=this.option(),t="time"===e?new Date(null):new Date;this._maskValue=t,this._initialMaskValue=t,this._renderDateParts()}}_partLimitsReached(e){const t=String(e).length,i=this._getActivePartProp("pattern").length,a=1===i,n=a?t:Math.min(i,t),s=this._searchValue.length===n,o=parseInt(`${this._searchValue}0`)>e;return s||o}_searchNumber(e){const{max:t}=this._getActivePartLimits(),i=String(t).length;this._searchValue=(this._searchValue+e).substr(-i),isNaN(this._searchValue)&&(this._searchValue=e),this._setActivePartValue(this._searchValue),this._partLimitsReached(t)&&this._selectNextPart(1)}_searchString(e){if(!isNaN(parseInt(this._getActivePartProp("text"))))return;const t=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+e.toLowerCase(),a=t.max-t.min;for(let n=0;n<=a;n++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(n+1),0===this._getActivePartProp("text").toLowerCase().indexOf(i))return void(this._searchValue=i);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(e))}_clearSearchValue(){this._searchValue=""}_revertPart(e){if(!this._isAllSelected()){const t=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(t),this._selectNextPart(e)}this._clearSearchValue()}_useMaskBehavior(){const{mode:e}=this.option();return this.option("useMaskBehavior")&&"text"===e}_prepareRegExpInfo(){this._regExpInfo=(0,h.wu)(this._getFormatPattern(),r.A);const{regexp:e}=this._regExpInfo,{source:t}=e,{flags:i}=e,a=new RegExp(/(\{[0-9]+,?[0-9]*\})/),n=t.split(a).map(e=>a.test(e)?e:u.A.convertDigits(e,!1)).join("");this._regExpInfo.regexp=new RegExp(n,i)}_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()}_renderMask(){super._renderMask(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())}_renderDateParts(){if(!this._useMaskBehavior())return;const e=this.option("text")||this._getDisplayedText(this._maskValue);e&&(this._dateParts=Pe(e,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}_detachMaskEvents(){s.A.off(this._input(),".dateBoxMask")}_attachMaskEvents(){s.A.on(this._input(),(0,o.b4)("dxclick","dateBoxMask"),this._maskClickHandler.bind(this)),s.A.on(this._input(),(0,o.b4)("paste","dateBoxMask"),this._maskPasteHandler.bind(this)),s.A.on(this._input(),(0,o.b4)("drop","dateBoxMask"),()=>{this._renderSelectedPart()}),s.A.on(this._input(),(0,o.b4)("compositionend","dateBoxMask"),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&s.A.on(this._input(),(0,o.b4)("beforeinput","dateBoxMask"),this._maskBeforeInputHandler.bind(this))}_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()}_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))}_selectFirstPart(){this.option("text")&&this._dateParts&&(this._activePartIndex=-1,this._selectNextPart(1))}_hasMouseWheelHandler(){return!0}_onMouseWheel(e){this._useMaskBehavior()&&this._partIncrease(e.delta>0?1:-1,e)}_selectNextPart(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.option("text")||this._disposed)return;e&&(this._initialMaskValue=new Date(this._maskValue));let t=(0,m.df)(this._activePartIndex+e,0,this._dateParts.length-1);if(this._dateParts[t].isStub){const i=0===t&&e<0||t===this._dateParts.length-1&&e>0;if(!i)return void this._selectNextPart(e>=0?e+1:e-1);t=this._activePartIndex}this._activePartIndex!==t&&this._clearSearchValue(),this._activePartIndex=t,this._caret(this._getActivePartProp("caret"))}_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"}_getActivePartLimits(e){const t=this._getActivePartProp("limits");return t(this._maskValue,e&&this._getRealLimitsPattern())}_getActivePartValue(e){e=e||this._maskValue;const t=this._getActivePartProp("getter");return(0,g.Tn)(t)?t(e):e[t]()}_addLeadingZeroes(e){const t=/^0+/.exec(this._searchValue),i=this._getActivePartLimits(),a=String(i.max).length;return((t&&t[0]||"")+String(e)).substr(-a)}_setActivePartValue(e,t){t=t||this._maskValue;const i=this._getActivePartProp("setter"),a=this._getActivePartLimits();e=(0,m.r4)(e,a.min,a.max)?e:e%10,e=this._addLeadingZeroes((0,m.df)(e,a.min,a.max)),(0,g.Tn)(i)?i(t,e):t[i](e),this._renderDisplayText(this._getDisplayedText(t)),this._renderDateParts()}_getActivePartProp(e){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][e]}_loadMaskValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=e&&new Date(e),this._initialMaskValue=e&&new Date(e)}_saveMaskValue(){const e=this._maskValue&&new Date(this._maskValue),{type:t}=this.option();e&&"date"===t&&e.setHours(0,0,0,0),this._initialMaskValue=new Date(e),this._applyInternalValidation(e).isValid&&this.dateOption("value",e)}_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()}_renderDisplayText(e){super._renderDisplayText(e),this._useMaskBehavior()&&this.option("text",e)}_partIncrease(e,t){this._setNewDateIfEmpty();const{max:i,min:a}=this._getActivePartLimits(t);let n=e+this._getActivePartValue();n>i?n=this._applyLimits(n,{limitBase:a,limitClosest:i,max:i}):n<a&&(n=this._applyLimits(n,{limitBase:i,limitClosest:a,max:i})),this._setActivePartValue(n)}_applyLimits(e,t){let{limitBase:i,limitClosest:a,max:n}=t;const s=(e-a)%n;return s?i+s-1*(0,m._S)(s):a}_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=He(this._dateParts,this._caret().start),this._isAllSelected()||(this._clearSearchValue(),(0,g.O9)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))}_maskCompositionEndHandler(e){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}}_maskPasteHandler(e){const t=this._replaceSelectedText(this.option("text"),this._caret(),(0,_.KR)(e)),i=r.A.parse(t,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),e.preventDefault()}_isDateValid(e){return(0,g.$P)(e)&&!isNaN(e)}_isValueDirty(){const e=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(e&&e.getTime())}_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&s.A.trigger(this._input(),"change")}_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)}_focusOutHandler(e){const t=this._useMaskBehavior()&&!e.isDefaultPrevented();t?(this._fireChangeEvent(),super._focusOutHandler(e),this._selectFirstPart()):super._focusOutHandler(e)}_valueChangeEventHandler(e){const t=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(e),t?null===this._maskValue&&this._loadMaskValue(t):this._maskValue=null,this._saveMaskValue()):super._valueChangeEventHandler(e)}_optionChanged(e){switch(e.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":super._optionChanged(e),this._renderMask();break;case"value":this._loadMaskValue(),super._optionChanged(e),this._renderDateParts();break;case"emptyDateValue":break;default:super._optionChanged(e)}}_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue}clear(){this._clearMaskState(),this._activePartIndex=0,super.clear()}_clean(){super._clean(),this._detachMaskEvents(),this._clearMaskState()}}var We=Le;(0,a.A)("dxDateBox",We);var ze=We,Ge=ze},94680:function(e,t,i){i.d(t,{A:function(){return s}});var a=i(27735),n=a.A,s=n},98741:function(e,t,i){i.d(t,{A:function(){return u}});i(82438),i(99819);var a=i(66529),n=i(33276),s=i(85563),o=i(65997),r=i(43607),l=i(35032);class d extends n.A{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),o.A.addGroup(this,!1)}_initMarkup(){const e=this.$element();e.addClass("dx-validationgroup"),e.find(".dx-validator").each((e,t)=>{l.A.getInstance((0,s.A)(t))._initGroupRegistration()}),e.find(".dx-validationsummary").each((e,t)=>{r.A.getInstance((0,s.A)(t)).refreshValidationGroup()}),super._initMarkup()}validate(){return o.A.validateGroup(this)}reset(){return o.A.resetGroup(this)}_dispose(){o.A.removeGroup(this),this.$element().removeClass("dx-validationgroup"),super._dispose()}_useTemplates(){return!1}}(0,a.A)("dxValidationGroup",d);var h=d,u=h}}]);