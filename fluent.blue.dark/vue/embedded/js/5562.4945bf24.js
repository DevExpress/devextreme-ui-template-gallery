"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[5562],{5330:function(e,t,s){s(69375),s(82438),s(12266),s(99819),s(57327),s(50020),s(74786),s(64727);var i=s(82950),a=s(59981),n=s(61928),r=s(74567),l=s(82454),o=s(15045),d=s(66529),h=s(90218),u=s(35754),_=s(71791),c=s(47759),p=s(85563),g=s(64743),m=s(74035),v=s(39889),T=s(66703),f=s(29518),C=s(44956),x=s(89214),I=s(92886),S=s(1767),A=s(50172),E=s(27996),y=s(93821),b=s(11697),V=s(4973),D=s(55509);function F(e,t){return(e||t)&&!(e&&t)}class O extends b.A{_supportedKeys(){const e=super._supportedKeys(),t=e=>this._list._keyboardHandler(e),s=this.option("rtlEnabled");return(0,i.A)({},e,{backspace(e){if(!this._isCaretAtTheStart())return;this._processKeyboardEvent(e),this._isTagRemoved=!0;const t=this._$focusedTag||this._tagElements().last();this._$focusedTag&&this._moveTagFocus("prev",!0),0!==t.length&&(this._preserveFocusedTag=!0,this._removeTagElement(t),delete this._preserveFocusedTag)},upArrow:(s,i)=>s.altKey||!this._list?e.upArrow.call(this,s):t(i),downArrow:(s,i)=>s.altKey||!this._list?e.downArrow.call(this,s):t(i),del(e){if(!this._$focusedTag||!this._isCaretAtTheStart())return;this._processKeyboardEvent(e),this._isTagRemoved=!0;const t=this._$focusedTag;this._moveTagFocus("next",!0),this._preserveFocusedTag=!0,this._removeTagElement(t),delete this._preserveFocusedTag},enter(e,s){var i;const a=null!==(null===(i=this._list)||void 0===i?void 0:i.option("focusedElement"))&&!0===this.option("opened"),n=this.option("acceptCustomValue")&&!a;if(n)return e.preventDefault(),void(""!==this._searchValue()&&this._customItemAddedHandler(e));this.option("opened")&&(this._saveValueChangeEvent(e),t(s),e.preventDefault())},space(e,s){const i=this.option("opened"),a=this._shouldRenderSearchEvent();i&&!a&&(this._saveValueChangeEvent(e),t(s),e.preventDefault())},leftArrow(e){if(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&s&&!this._$focusedTag)return;e.preventDefault();const t=s?"next":"prev";this._moveTagFocus(t),this.option("multiline")||this._scrollContainer(t)},rightArrow(e){if(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&!s&&!this._$focusedTag)return;e.preventDefault();const t=s?"prev":"next";this._moveTagFocus(t),!this.option("multiline")&&this._scrollContainer(t)}})}_processKeyboardEvent(e){e.preventDefault(),e.stopPropagation(),this._saveValueChangeEvent(e)}_isEmpty(){return 0===this._getValue().length}_updateTagsContainer(e){this._$tagsContainer=e.addClass("dx-tag-container")}_allowSelectItemByTab(){return!1}_isCaretAtTheStart(){const e=(0,V.A)(this._input());return 0===(null===e||void 0===e?void 0:e.start)&&0===e.end}_updateInputAriaActiveDescendant(e){this.setAria("activedescendant",e,this._input())}_moveTagFocus(e,t){if(!this._$focusedTag){const t=this._tagElements();return this._$focusedTag="next"===e?t.first():t.last(),this._toggleFocusClass(!0,this._$focusedTag),void this._updateInputAriaActiveDescendant(this._$focusedTag.attr("id"))}const s=this._$focusedTag[e](".dx-tag");s.length>0?(this._replaceFocusedTag(s),this._updateInputAriaActiveDescendant(s.attr("id"))):(t||"next"===e&&this._isEditable())&&(this._clearTagFocus(),this._updateInputAriaActiveDescendant())}_replaceFocusedTag(e){this._toggleFocusClass(!1,this._$focusedTag),this._$focusedTag=e,this._toggleFocusClass(!0,this._$focusedTag)}_clearTagFocus(){this._$focusedTag&&(this._toggleFocusClass(!1,this._$focusedTag),this._updateInputAriaActiveDescendant(),delete this._$focusedTag)}_focusClassTarget(e){return e&&e.length&&e[0]!==this._focusTarget()[0]?e:super._focusClassTarget()}_getLabelContainer(){return this._$tagsContainer}_getFieldElement(){return this._input()}_scrollContainer(e){if(this.option("multiline")||!(0,E.Vd)())return;if(!this._$tagsContainer)return;const t=this._getScrollPosition(e);this._$tagsContainer.scrollLeft(t)}_getScrollPosition(e){return"start"===e||"end"===e?this._getBorderPosition(e):this._$focusedTag?this._getFocusedTagPosition(e):this._getBorderPosition("end")}_getBorderPosition(e){const{rtlEnabled:t}=this.option(),s=F("end"===e,t),i=t?-1:1;return F(s,!t)?0:i*(this._$tagsContainer.get(0).scrollWidth-(0,S.Ot)(this._$tagsContainer))}_getFocusedTagPosition(e){const t=this.option("rtlEnabled"),s=F("next"===e,t);let{left:i}=this._$focusedTag.position(),a=this._$tagsContainer.scrollLeft();return s&&(i+=(0,S.Ot)(this._$focusedTag,!0)-(0,S.Ot)(this._$tagsContainer)),F(s,i<0)&&(a+=i),a}_setNextValue(){}_getDefaultOptions(){return(0,C.X)(super._getDefaultOptions(),{value:[],showDropDownButton:!1,maxFilterQueryLength:1500,tagTemplate:"tag",selectAllText:l.A.format("dxList-selectAll"),hideSelectedItems:!1,selectedItems:[],selectAllMode:"page",onSelectAllValueChanged:null,maxDisplayedTags:void 0,showMultiTagOnly:!0,onMultiTagPreparing:null,multiline:!0,useSubmitBehavior:!0})}_init(){super._init(),this._selectedItems=[],this._initSelectAllValueChangedAction()}_initActions(){super._initActions(),this._initMultiTagPreparingAction()}_initMultiTagPreparingAction(){this._multiTagPreparingAction=this._createActionByOption("onMultiTagPreparing",{beforeExecute:e=>{this._multiTagPreparingHandler(e.args[0])},excludeValidators:["disabled","readOnly"]})}_multiTagPreparingHandler(e){const{length:t}=this._getValue();this.option("showMultiTagOnly")?e.text=l.A.getFormatter("dxTagBox-selected")(t):e.text=l.A.getFormatter("dxTagBox-moreSelected")(t-this.option("maxDisplayedTags")+1)}_initDynamicTemplates(){super._initDynamicTemplates(),this._templateManager.addDefaultTemplates({tag:new g.U((e,t)=>{const s=(0,p.A)("<div>").addClass("dx-tag-content");(0,p.A)("<span>").text(t.text??t).appendTo(s),(0,p.A)("<div>").addClass("dx-tag-remove-button").appendTo(s),e.append(s)},["text"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter})})}_toggleSubmitElement(e){e?(this._renderSubmitElement(),this._setSubmitValue()):(this._$submitElement&&this._$submitElement.remove(),delete this._$submitElement)}_renderSubmitElement(){this.option("useSubmitBehavior")&&(this._$submitElement=(0,p.A)("<select>").attr({multiple:"multiple","aria-label":"Selected items"}).css("display","none").appendTo(this.$element()))}_setSubmitValue(){if(!this.option("useSubmitBehavior"))return;const e=this._getValue(),t=[];for(let s=0,i=e.length;s<i;s++){const i=this._shouldUseDisplayValue(e[s]);t.push((0,p.A)("<option>").val(i?this._displayGetter(e[s]):e[s]).attr("selected","selected"))}this._getSubmitElement().empty().append(t)}_initMarkup(){this._tagElementsCache=(0,p.A)();const e=!this.option("multiline");this.$element().addClass("dx-tagbox").toggleClass("dx-tagbox-only-select",!(this.option("searchEnabled")||this.option("acceptCustomValue"))).toggleClass("dx-tagbox-single-line",e);const t={role:"application",roledescription:l.A.format("dxTagBox-ariaRoleDescription")};this.setAria(t,this.$element()),this._initTagTemplate(),super._initMarkup()}_getNewLabelId(e,t,s){if(!e)return t;if(s){if(e===t)return;return e.split(" ").filter(e=>e!==t).join(" ")}return`${e} ${t}`}_updateElementAria(e,t){const s=!e;if(s)return void this.setAria("labelledby",void 0,this.$element());const i=this.$element().attr("aria-labelledby"),a=this._getNewLabelId(i,e,t);this.setAria("labelledby",a,this.$element())}_render(){super._render(),this._renderTagRemoveAction(),this._renderSingleLineScroll(),this._scrollContainer("start")}_initTagTemplate(){this._tagTemplate=this._getTemplateByOption("tagTemplate")}_renderField(){const e=!(0,A.O9)(this.option("fieldTemplate"));this.$element().toggleClass("dx-tagbox-default-template",e).toggleClass("dx-tagbox-custom-template",!e),super._renderField()}_renderTagRemoveAction(){const e=this._createAction(this._removeTagHandler.bind(this)),t=(0,r.b4)(a.U,"dxTagBoxTagRemove");n.A.off(this._$tagsContainer,t),n.A.on(this._$tagsContainer,t,".dx-tag-remove-button",t=>{e({event:t})})}_renderSingleLineScroll(){const e=(0,r.b4)("dxmousewheel",this.NAME),t=this.$element(),s=this.option("multiline");n.A.off(t,e),"desktop"===h.A.real().deviceType?s||n.A.on(t,e,this._tagContainerMouseWheelHandler.bind(this)):this._$tagsContainer&&this._$tagsContainer.css("overflowX",s?"":"auto")}_tagContainerMouseWheelHandler(e){const t=this._$tagsContainer.scrollLeft(),s=-.3*e.delta;if(!(0,r.By)(e)&&(0,D.f)(this._$tagsContainer,s,!0))return this._$tagsContainer.scrollLeft(t+s),!1}_renderEvents(){super._renderEvents();const e=this._input(),t=(0,r.b4)("keydown",this.NAME);n.A.on(e,t,e=>{const t=(0,r.YD)(e);!this._isControlKey(t)&&this._isEditable()&&this._clearTagFocus()})}_popupWrapperClass(){return`${super._popupWrapperClass()} dx-tagbox-popup-wrapper`}_renderInput(){super._renderInput(),this._renderPreventBlurOnInputClick()}_renderPreventBlurOnInputClick(){const e=(0,r.b4)("mousedown","dxTagBox");n.A.off(this._inputWrapper(),e),n.A.on(this._inputWrapper(),e,e=>{e.target!==this._input()[0]&&this._isFocused()&&e.preventDefault()})}_renderInputValueImpl(){return this._renderMultiSelect()}_loadInputValue(){return(0,T.z7)()}_clearTextValue(){this._input().val(""),this._toggleEmptinessEventHandler(),this.option("text","")}_focusInHandler(e){this._preventNestedFocusEvent(e)||this._scrollContainer("end"),super._focusInHandler(e)}_renderInputValue(){return this.option("displayValue",this._searchValue()),super._renderInputValue(...arguments)}_restoreInputText(e){e||this._clearTextValue()}_focusOutHandler(e){this._preventNestedFocusEvent(e)||(this._clearTagFocus(),this._scrollContainer("start")),super._focusOutHandler(e)}_initSelectAllValueChangedAction(){this._selectAllValueChangeAction=this._createActionByOption("onSelectAllValueChanged")}_renderList(){super._renderList(),this._setListDataSourceFilter()}_canListHaveFocus(){const{applyValueMode:e}=this.option();return"useButtons"===e}_listConfig(){const e=this.option("showSelectionControls")?"all":"multiple";return(0,C.X)(super._listConfig(),{maxFilterLengthInRequest:this.option("maxFilterQueryLength"),selectionMode:e,selectAllText:this.option("selectAllText"),onSelectAllValueChanged:e=>{let{value:t}=e;this._selectAllValueChangeAction({value:t})},selectAllMode:this.option("selectAllMode"),selectedItems:this._selectedItems,onFocusedItemChanged:null})}_renderMultiSelect(){const e=(0,T.cY)();return this._updateTagsContainer(this._$textEditorInputContainer),this._renderInputSize(),this._renderTags().done(e.resolve).fail(e.reject),e.promise()}_listItemClickHandler(e){!this.option("showSelectionControls")&&this._clearTextValue();const{applyValueMode:t}=this.option();"useButtons"!==t&&(super._listItemClickHandler(e),this._saveValueChangeEvent(void 0))}_shouldClearFilter(){const e=super._shouldClearFilter(),t=this.option("showSelectionControls");return!t&&e}_renderInputSize(){const e=this._input(),t=e.val(),s=(0,A.Kg)(t)&&t;let i,a="";const n=this.option("searchEnabled")||this.option("acceptCustomValue");if(s&&n){const s=(0,f.D2)(e,t,{includePaddings:!0});s.insertAfter(e),a=(0,S.Ot)(s)+5,s.remove()}else t||(i=1);e.css("width",a),e.attr("size",i??"")}_renderInputSubstitution(){super._renderInputSubstitution(),this._updateWidgetHeight()}_getValue(){const{value:e}=this.option();return e||[]}_multiTagRequired(){const e=this._getValue(),{maxDisplayedTags:t}=this.option();return(0,A.O9)(t)&&e.length>t}_renderMultiTag(e){const t=`dx-${new c.A}`,s=(0,p.A)("<div>").attr("id",t).addClass("dx-tag").addClass("dx-tagbox-multi-tag"),i={multiTagElement:(0,u.cc)(s),selectedItems:this.option("selectedItems")};if(this._multiTagPreparingAction(i),i.cancel)return!1;s.data("dxTagData",i.text),s.insertBefore(e),this._tagTemplate.render({model:i.text,container:(0,u.cc)(s)});const a=i.text;return this._setTagAria(s,a),this._updateElementAria(t),s}_getFilter(e){const t=this._dataController.filter(),s=e.getCombinedFilter(this.option("valueExpr"),t),i=encodeURI(JSON.stringify(s)).length,a=this.option("maxFilterQueryLength");if(i<=a)return s;y.A.log("W1019",a)}_getFilteredItems(e){var t,s;null===(t=this._loadFilteredItemsPromise)||void 0===t||t.reject();const i=new I.H(e),a=null===(s=this._list)||void 0===s?void 0:s.option("selectedItems"),n=!!a&&this._list._dataController.isLoaded(),r=a||this.option("selectedItems"),l=i.getLocalFilter(this._valueGetter),d=r.filter(l),h=d.length===e.length,u=(0,T.cY)(),_=this._dataController;if(!this._dataSource)return u.resolve([]).promise();if((!this._isDataSourceChanged||n)&&h&&!this._isDataSourceOptionChanged)return u.resolve(d).promise();const{customQueryParams:c,expand:p,select:g}=_.loadOptions(),m=this._getFilter(i);return _.loadFromStore({filter:m,customQueryParams:c,expand:p,select:g}).done((e,t)=>{if(this._isDataSourceChanged=!1,this._isDataSourceOptionChanged=!1,this._disposed)return void u.reject();const{data:s}=(0,o.Xp)(e,t),i=_.applyMapFunction(s);u.resolve(i.filter(l))}).fail(u.reject),this._loadFilteredItemsPromise=u,u.promise()}_createTagsData(e,t){const s=[],i={},a="this"===this._valueGetterExpr(),{acceptCustomValue:n}=this.option(),r={};t.forEach(e=>{const t=a?JSON.stringify(e):this._valueGetter(e);r[t]=e});const l=[];e.forEach((e,t)=>{const o=r[a?JSON.stringify(e):e];if(a&&!(0,A.O9)(o)){if(!this._dataSource)return;l.push(this._loadItem(e,i).done(i=>{const a=this._createTagData(i,e);s.splice(t,0,a)}).fail(()=>{if(n){const i=this._createTagData(void 0,e);s.splice(t,0,i)}}))}else{const i=this._createTagData(o,e);s.splice(t,0,i)}});const o=(0,T.cY)();return T.z7.apply(this,l).always(()=>{o.resolve(s)}),o.promise()}_createTagData(e,t){if((0,A.O9)(e))return this._selectedItems.push(e),e;const s=this.option("selectedItem"),i=this._valueGetter(s)===t?s:t;return i}_isGroupedData(){return this.option("grouped")&&!this._dataController.group()}_getItemsByValues(e){const t=[];return e.forEach(e=>{const s=this._getItemFromPlain(e);(0,A.O9)(s)&&t.push(s)}),t}_getFilteredGroupedItems(e){const t=(0,T.cY)();return this._filteredGroupedItemsLoadPromise&&this._dataController.cancel(this._filteredGroupedItemsLoadPromise.operationId),this._dataController.items().length?t.resolve(this._getItemsByValues(e)):this._filteredGroupedItemsLoadPromise=this._dataController.load().done(()=>{t.resolve(this._getItemsByValues(e))}).fail(()=>{t.resolve([])}).always(()=>{this._filteredGroupedItemsLoadPromise=void 0}),t.promise()}_loadTagsData(){const e=this._getValue(),t=(0,T.cY)();this._selectedItems=[];const s=this._isGroupedData()?this._getFilteredGroupedItems(e):this._getFilteredItems(e);return s.done(s=>{const i=this._createTagsData(e,s);i.always(e=>{t.resolve(e)})}).fail(t.reject.bind(this)),t.promise()}_renderTags(){const e=(0,T.cY)();let t=!1;return this._shouldGetItemsFromPlain(this._valuesToUpdate)&&(this._selectedItems=this._getItemsFromPlain(this._valuesToUpdate),this._selectedItems.length===this._valuesToUpdate.length&&(this._tagsToRender=this._selectedItems,this._renderTagsImpl(),t=!0,e.resolve())),t||this._loadTagsData().done(t=>{this._disposed?e.reject():(this._tagsToRender=t,this._renderTagsImpl(),e.resolve())}).fail(e.reject),e.promise()}_renderTagsImpl(){this._renderField(),this._shouldUpdateSelectedItems()&&this.option("selectedItems",this._selectedItems.slice());const e=this._getFieldTemplate();e||(this._cleanTags(),this._renderTagsCore())}_shouldGetItemsFromPlain(e){return e&&this._dataController.isLoaded()&&e.length<=this._getPlainItems().length}_getItemsFromPlain(e){let t=this._getSelectedItemsFromList(e);const s=0===t.length&&e.length>0||t.length<e.length;if(s){const s=this._getPlainItems();t=this._filterSelectedItems(s,e)}return t}_getSelectedItemsFromList(e){const{selectedItems:t}=this._list?this._list.option():{selectedItems:[]};let s=[];return e.length===(null===t||void 0===t?void 0:t.length)&&(s=this._filterSelectedItems(t,e)),s}_filterSelectedItems(e,t){const s=e.filter(e=>{let s;for(let i=0;i<t.length;i++)if(s=t[i],(0,A.Gv)(s)){if(this._isValueEquals(e,s))return!0}else if(this._isValueEquals(this._valueGetter(e),s))return!0;return!1},this);return s}_processDataSourceChanging(){this._isDataSourceOptionChanged=!0,super._processDataSourceChanging()}_integrateInput(){super._integrateInput();const e=this.$element().find(".dx-texteditor-input-container");this._updateTagsContainer(e),this._renderTagRemoveAction(),this._renderTagsCore()}_renderTagsCore(){var e;this._renderTagsElements(this._tagsToRender),this._renderEmptyState(),this._preserveFocusedTag||this._clearTagFocus(),null===(e=this._popup)||void 0===e||e.refreshPosition()}_shouldUpdateSelectedItems(){var e,t;const{selectedItems:s}=this.option();if((0,A.O9)(s)&&s.length!==(null===(e=this._selectedItems)||void 0===e?void 0:e.length))return!0;const i=(0,m._N)(s,this._selectedItems);return i.length!==(null===(t=this._selectedItems)||void 0===t?void 0:t.length)}_renderTagsElements(e){const t=this._multiTagRequired()&&this._renderMultiTag(this._input()),s=this.option("showMultiTagOnly"),i=this.option("maxDisplayedTags");e.forEach((e,a)=>{if(t&&s||t&&!s&&a-i>=-1)return!1;this._renderTag(e,t||this._input())}),this._isFocused()&&this._scrollContainer("end"),this._refreshTagElements()}_cleanTags(){if(this._multiTagRequired())this._tagElements().remove();else{const e=this._tagElements(),t=this.option("selectedItems")??[],s=t.map(e=>this._valueGetter(e));(0,x.__)(e,(e,t)=>{const i=(0,p.A)(t),a=i.data("dxTagData");s.includes(a)||i.remove()})}this._updateElementAria()}_renderEmptyState(){const e=!(this._getValue().length||this._selectedItems.length||this._searchValue());this._toggleEmptiness(e),this._renderDisplayText()}_renderDisplayText(){this._renderInputSize()}_refreshTagElements(){this._tagElementsCache=this.$element().find(".dx-tag")}_tagElements(){return this._tagElementsCache}_applyTagTemplate(e,t){this._tagTemplate.render({model:e,container:(0,u.cc)(t)})}_renderTag(e,t){const s=this._valueGetter(e);if(!(0,A.O9)(s))return;let i=this._getTag(s);const a=this._displayGetter(e),n=this._getItemModel(e,a);if(i){const e=i.data("dxTagDisplayValue");(0,A.O9)(a)&&!(0,v.RL)(e,a)&&(i.empty(),this._applyTagTemplate(n,i)),this._updateElementAria(i.attr("id"))}else{const r=`dx-${new c.A}`;i=this._createTag(s,t,r,a),this._setTagAria(i,(0,A.O9)(a)?a:s),(0,A.O9)(e)?this._applyTagTemplate(n,i):this._applyTagTemplate(s,i),this._updateElementAria(r)}}_setTagAria(e,t){const s={role:"button",label:t,roledescription:l.A.format("dxTagBox-tagRoleDescription")};this.setAria(s,e)}_getItemModel(e,t){return(0,A.Gv)(e)&&(0,A.O9)(t)?e:(0,v.YD)(t,"")}_getTag(e){const t=this._tagElements(),s=t.length;let i=!1;for(let a=0;a<s;a++){const s=t[a],n=(0,_.p)(s,"dxTagData");if(e===n||(0,v.RL)(e,n)){i=(0,p.A)(s);break}}return i}_createTag(e,t,s,i){return(0,p.A)("<div>").attr("id",s).addClass("dx-tag").data("dxTagData",e).data("dxTagDisplayValue",i).insertBefore(t)}_toggleEmptinessEventHandler(){this._toggleEmptiness(!this._getValue().length&&!this._searchValue().length)}_customItemAddedHandler(e){super._customItemAddedHandler(e),this._clearTextValue()}_removeTagHandler(e){const t=e.event;t.stopPropagation(),this._saveValueChangeEvent(t);const s=(0,p.A)(t.target).closest(".dx-tag");this._removeTagElement(s)}_removeTagElement(e){if(e.hasClass("dx-tagbox-multi-tag")){if(this.option("showMultiTagOnly"))this.clear();else{const{maxDisplayedTags:e}=this.option();this.option("value",this._getValue().slice(0,e))}return}const t=e.data("dxTagData"),s=e.attr("id");this._removeTagWithUpdate(t),this._updateElementAria(s,!0),this._refreshTagElements()}_updateField(){}_removeTagWithUpdate(e){const t=this._getValue().slice();this._removeTag(t,e),this.option("value",t),this.option("selectedItem",null),0===t.length&&this._clearTagFocus()}_getCurrentValue(){return this._lastValue()}_selectionChangeHandler(e){const{applyValueMode:t}=this.option();if("useButtons"===t)return;const s=this._getValue().slice();if((0,x.__)(e.removedItems||[],(e,t)=>{this._removeTag(s,this._valueGetter(t))}),(0,x.__)(e.addedItems||[],(e,t)=>{this._addTag(s,this._valueGetter(t))}),this._updateWidgetHeight(),!(0,v.RL)(this._list.option("selectedItemKeys"),this.option("value"))){const e=this._list._getSelectionChangeEvent();e&&this._saveValueChangeEvent(e),this.option("value",s)}this._list._saveSelectionChangeEvent(void 0)}_removeTag(e,t){const s=this._valueIndex(t,e);s>=0&&e.splice(s,1)}_addTag(e,t){const s=this._valueIndex(t);s<0&&e.push(t)}_fieldRenderData(){return this._selectedItems.slice()}_completeSelection(e){this.option("showSelectionControls")||this._setValue(e)}_setValue(e){var t;if(null===e)return;const{applyValueMode:s}=this.option(),i="useButtons"===s,a=this._valueIndex(e),{selectedItemKeys:n}=(null===(t=this._list)||void 0===t?void 0:t.option())||{selectedItemKeys:[]},r=(i?n??[]:this._getValue()).slice();var l;(a>=0?r.splice(a,1):r.push(e),i)?null===(l=this._list)||void 0===l||l.option("selectedItemKeys",r):this.option("value",r)}_isSelectedValue(e,t){return this._valueIndex(e,null,t)>-1}_valueIndex(e,t,s){let i=-1;return s&&"object"!==typeof e&&(s.indexByValues||(s.indexByValues={},t=t||this._getValue(),t.forEach((e,t)=>{s.indexByValues[e]=t})),e in s.indexByValues)?s.indexByValues[e]:(t=t||this._getValue(),(0,x.__)(t,(t,s)=>{if(this._isValueEquals(e,s))return i=t,!1}),i)}_lastValue(){const e=this._getValue(),t=e[e.length-1];return t??null}_shouldRenderSearchEvent(){const{searchEnabled:e,acceptCustomValue:t}=this.option();return e||t}_searchHandler(e){this.option("searchEnabled")&&e&&!this._isTagRemoved&&(super._searchHandler(arguments),this._setListDataSourceFilter()),this._updateWidgetHeight(),delete this._isTagRemoved}_updateWidgetHeight(){const e=this.$element(),t=(0,S.Oq)(e);this._renderInputSize();const s=(0,S.Oq)(e);this._popup&&this.option("opened")&&this._isEditable()&&s!==t&&this._popup.repaint()}_refreshSelected(){var e;(null===(e=this._list)||void 0===e?void 0:e.getDataSource())&&this._list.option("selectedItems",this._selectedItems)}_resetListDataSourceFilter(){const e=this._dataController;delete this._userFilter,e.filter(null),e.reload()}_setListDataSourceFilter(){if(!this.option("hideSelectedItems")||!this._list)return;const e=this._dataController,t=this._valueGetterExpr();if((0,A.Kg)(t)&&"this"!==t){const t=this._dataSourceFilterExpr();void 0===this._userFilter&&(this._userFilter=e.filter()||null),this._userFilter&&t.push(this._userFilter),t.length?e.filter(t):e.filter(null)}else e.filter(this._dataSourceFilterFunction.bind(this));e.load()}_dataSourceFilterExpr(){const e=[];return this._getValue().forEach(t=>e.push(["!",[this._valueGetterExpr(),t]])),e}_dataSourceFilterFunction(e){const t=this._valueGetter(e);let s=!0;return(0,x.__)(this._getValue(),(e,i)=>{if(this._isValueEquals(i,t))return s=!1,!1}),s}_dataSourceChangedHandler(){this._isDataSourceChanged=!0,super._dataSourceChangedHandler.apply(this,arguments)}_applyButtonHandler(e){this._saveValueChangeEvent(e.event),this.option("value",this._getSortedListValues()),this._clearTextValue(),super._applyButtonHandler(),this._cancelSearchIfNeed()}_getSortedListValues(){const e=this._getListValues(),{value:t}=this.option(),s=t||[],i=e.length?(0,m._N)(s,e):[],a=i.length?(0,m.R3)(e,s):e;return i.concat(a)}_getListValues(){return this._list?this._getPlainItems(this._list.option("selectedItems")).map(e=>this._valueGetter(e)):[]}_setListDataSource(){const e=this._getValue();super._setListDataSource();const{value:t}=this.option();e!==t&&this.option("value",e),this._refreshSelected()}_renderOpenedState(){super._renderOpenedState();const{applyValueMode:e}=this.option();"useButtons"!==e||this.option("opened")||this._refreshSelected()}clear(){this._restoreInputText();const e=this._getDefaultOptions().value,{value:t}=this.option();e&&0===e.length&&t&&e.length===t.length||super.clear()}_clean(){super._clean(),delete this._valuesToUpdate,delete this._tagTemplate,delete this._tagsToRender}_getSelectedItemsDifference(e,t){if(!e.length)return{addedItems:[],removedItems:t.slice()};if(!t.length)return{addedItems:e.slice(),removedItems:[]};const s=t.reduce((e,t)=>{const s=this._valueGetter(t);return e[s]=t,e},{}),i=[];return e.forEach(e=>{const t=this._valueGetter(e);s[t]||i.push(e),delete s[t]}),{addedItems:i,removedItems:Object.values(s)}}_optionChanged(e){const{name:t,value:s,previousValue:i}=e;switch(t){case"onSelectAllValueChanged":this._initSelectAllValueChangedAction();break;case"onMultiTagPreparing":this._initMultiTagPreparingAction(),this._renderTags();break;case"hideSelectedItems":s?this._setListDataSourceFilter():this._resetListDataSourceFilter();break;case"useSubmitBehavior":this._toggleSubmitElement(s);break;case"displayExpr":super._optionChanged(e),this._initTemplates(),this._invalidate();break;case"tagTemplate":this._initTagTemplate(),this._invalidate();break;case"selectAllText":this._setListOption("selectAllText",this.option("selectAllText"));break;case"readOnly":case"disabled":super._optionChanged(e),!s&&this._refreshEvents();break;case"value":this._valuesToUpdate=s,super._optionChanged(e),this._valuesToUpdate=void 0,this._setListDataSourceFilter();break;case"maxDisplayedTags":case"showMultiTagOnly":this._renderTags();break;case"selectAllMode":this._setListOption(t,s);break;case"selectedItem":case"maxFilterQueryLength":break;case"selectedItems":this._selectionChangedAction(this._getSelectedItemsDifference(s,i));break;case"multiline":this.$element().toggleClass("dx-tagbox-single-line",!s),this._renderSingleLineScroll();break;default:super._optionChanged(e)}}_getActualSearchValue(){return super._getActualSearchValue()||this._searchValue()}_popupHidingHandler(){super._popupHidingHandler(),this._clearFilter()}}(0,d.A)("dxTagBox",O)},7465:function(e,t,s){var i=s(66529),a=s(90218),n=s(85563),r=s(66703),l=s(44956),o=s(50172),d=s(92240),h=s(33892),u=(s(82438),s(99819),s(39889)),_=s(22451);class c extends _.Ay{_focusTarget(){return(0,n.A)(this.element()).parent()}_nullValueSelectionSupported(){return!0}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,l.X)(e,d.A._dataExpressionDefaultOptions(),{_itemAttributes:{role:"radio"}})}_initMarkup(){super._initMarkup(),(0,u.zE)(()=>{this._itemElements().addClass("dx-radiobutton")})}_keyboardEventBindingTarget(){return this._focusTarget()}_postprocessRenderItem(e){const{itemData:{html:t},itemElement:s}=e;if(!t){const e=(0,n.A)("<div>").addClass("dx-radiobutton-icon");(0,n.A)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(e);const t=(0,n.A)("<div>").append(e).addClass("dx-radio-value-container");(0,n.A)(s).prepend(t)}super._postprocessRenderItem(e)}_processSelectableItem(e,t){super._processSelectableItem(e,t),e.toggleClass("dx-radiobutton-checked",t).find(".dx-radiobutton-icon").first().toggleClass("dx-radiobutton-icon-checked",t),this.setAria("checked",t,e)}_refreshContent(){this._prepareContent(),this._renderContent()}_supportedKeys(){const e=super._supportedKeys();return(0,l.X)({},e,{enter(t){return t.preventDefault(),e.enter.apply(this,arguments)},space(t){return t.preventDefault(),e.space.apply(this,arguments)}})}_itemElements(){return this._itemContainer().children(this._itemSelector())}_setAriaSelectionAttribute(){}}var p=c;class g extends h.A{_dataSourceOptions(){return{paginate:!1}}_activeStateUnit(){return".dx-radiobutton"}_feedbackHideTimeout(){return 100}_defaultOptionsRules(){const e=super._defaultOptionsRules();return e.concat([{device:{tablet:!0},options:{layout:"horizontal"}},{device:()=>"desktop"===a.A.real().deviceType&&!a.A.isSimulator(),options:{focusStateEnabled:!0}}])}_fireContentReadyAction(e){e&&super._fireContentReadyAction()}_focusTarget(){return this.$element()}_getAriaTarget(){return this.$element()}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,l.X)(e,(0,l.X)(d.A._dataExpressionDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,layout:"vertical"}))}_getItemValue(e){return this._valueGetter?this._valueGetter(e):e.text}_getSubmitElement(){return this._$submitElement}_init(){super._init(),this._initDataExpressions()}_initMarkup(){(0,n.A)(this.element()).addClass("dx-radiogroup"),this._renderSubmitElement(),this.setAria("role","radiogroup"),this._renderRadios(),this._renderLayout(),super._initMarkup()}_itemClickHandler(e){let{itemElement:t,event:s,itemData:i}=e;if(this.itemElements().is(t)){const e=this._getItemValue(i);e!==this.option("value")&&(this._saveValueChangeEvent(s),this.option("value",e))}}_getSelectedItemKeys(e){const t="this"!==this.option("valueExpr"),s=t&&null===e||(0,o.O9)(e);return s?[e]:[]}_setSelection(e){const t=this._unwrappedValue(e);this._setCollectionWidgetOption("selectedItemKeys",this._getSelectedItemKeys(t))}_renderValidationState(){var e;super._renderValidationState(),null===(e=this._validationMessage)||void 0===e||e.$content().attr("role","alert")}_optionChanged(e){const{name:t,value:s}=e;switch(this._dataExpressionOptionChanged(e),t){case"dataSource":this._invalidate();break;case"focusStateEnabled":case"accessKey":case"tabIndex":this._setCollectionWidgetOption(t,s);break;case"disabled":super._optionChanged(e),this._setCollectionWidgetOption(t,s);break;case"valueExpr":this._setCollectionWidgetOption("keyExpr",this._getCollectionKeyExpr());break;case"value":this._setSelection(s),this._setSubmitValue(s),super._optionChanged(e);break;case"items":this._setSelection(this.option("value"));break;case"itemTemplate":case"displayExpr":break;case"layout":this._renderLayout(),this._updateItemsSize();break;default:super._optionChanged(e)}}_render(){super._render(),this._updateItemsSize()}_renderLayout(){const{layout:e}=this.option(),t=(0,n.A)(this.element());t.toggleClass("dx-radiogroup-vertical","vertical"===e),t.toggleClass("dx-radiogroup-horizontal","horizontal"===e)}_renderRadios(){this._areRadiosCreated=(0,r.cY)();const e=(0,n.A)("<div>").appendTo(this.$element()),{displayExpr:t,accessKey:s,focusStateEnabled:i,itemTemplate:a,tabIndex:l,value:o}=this.option();this._createComponent(e,p,{onInitialized:e=>{let{component:t}=e;this._radios=t},onContentReady:e=>{this._fireContentReadyAction(!0)},onItemClick:this._itemClickHandler.bind(this),displayExpr:t,accessKey:s,dataSource:this._dataSource,focusStateEnabled:i,itemTemplate:a,keyExpr:this._getCollectionKeyExpr(),noDataText:"",scrollingEnabled:!1,selectByClick:!1,selectionMode:"single",selectedItemKeys:this._getSelectedItemKeys(o),tabIndex:l}),this._areRadiosCreated.resolve()}_renderSubmitElement(){this._$submitElement=(0,n.A)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue()}_setOptionsByReference(){super._setOptionsByReference(),(0,l.X)(this._optionsByReference,{value:!0})}_setSubmitValue(e){e=e??this.option("value");const t="this"===this.option("valueExpr")?this._displayGetter(e):e;this._$submitElement.val(t)}_setCollectionWidgetOption(e,t){this._areRadiosCreated.done(this._setWidgetOption.bind(this,"_radios",arguments))}_updateItemsSize(){const{layout:e}=this.option();if("horizontal"===e){var t;null===(t=this.itemElements())||void 0===t||t.css("height","auto")}else{var s;const e=this.option("items").length;null===(s=this.itemElements())||void 0===s||s.css("height",100/e+"%")}}focus(){var e;null===(e=this._radios)||void 0===e||e.focus()}itemElements(){var e;return null===(e=this._radios)||void 0===e?void 0:e._itemElements()}}g.include(d.A),(0,i.A)("dxRadioGroup",g)}}]);