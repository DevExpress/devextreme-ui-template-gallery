"use strict";(self["webpackChunkvue_ui_teplate_gallery"]=self["webpackChunkvue_ui_teplate_gallery"]||[]).push([[467],{4362:function(e,t,i){i.d(t,{k:function(){return y}});i(82438),i(99819);var n=i(93076),o=i(59981),s=i(24906),r=i(74567),l=i(92324),a=i(85563),d=i(26228),u=i(44956),c=i(94360),h=i(63825),p=i(64219),g=i(91125),m=i(20338);const _="dx-editor-inline-block",C="dxDataGridEditorFactory",f=(0,r.b4)([o.U,"focusin"].join(" "),C),v="dx-hidden",x=(0,p.A)(g.Ay.ViewController);class w extends x{init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._columnsResizerController=this.getController("columnsResizer"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsController=this.getController("columns"),this._validatingController=this.getController("validating"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView"),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),s.A.on(this._subscribedContainerRoot,f,this._updateFocusHandler),this._attachContainerEventHandlers()}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),s.A.off(this._subscribedContainerRoot,f,this._updateFocusHandler)}_getFocusedElement(e){const t=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",i=["td[tabindex]:focus",`${t}`,"input:focus","button:focus","textarea:focus","div[tabindex]:focus",".dx-lookup-field:focus",".dx-checkbox:focus",".dx-switch:focus",".dx-dropdownbutton .dx-buttongroup:focus",".dx-adaptive-item-text:focus"].join(","),n=e.find(i);return this.elementIsInsideGrid(n)&&n}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){const e=this.component&&this.component.$element();if(e){let t=this._getFocusedElement(e);if(t&&t.length){let e;if(!t.hasClass("dx-cell-focus-disabled")&&!t.hasClass("dx-row")){const i=t.closest(`${this._getFocusCellSelector()}, .dx-cell-focus-disabled`);i.get(0)!==t.get(0)&&(e=this._needHideBorder(i),t=i)}if(t.length&&!t.hasClass("dx-cell-focus-disabled"))return void this.focus(t,e)}}this.loseFocus()}_needHideBorder(e){const t=this._rowsView.element(),i=e.closest(t).length>0,n=this._editingController.isEditing();return e.hasClass(_)||i&&!n}_updateFocus(e){const t=this,i=e&&e.event&&(0,a.A)(e.event.target).hasClass(t.addWidgetPrefix("focus-overlay"));t._isFocusOverlay=t._isFocusOverlay||i,clearTimeout(t._updateFocusTimeoutID),t._updateFocusTimeoutID=setTimeout(()=>{delete t._updateFocusTimeoutID,t._isFocusOverlay||t._updateFocusCore(),t._isFocusOverlay=!1})}updateFocusOverlaySize(e,t){e.hide();const i=n.A.calculate(e,(0,u.X)({collision:"fit"},t));i.h.oversize>0&&(0,h.iT)(e,(0,h.Ot)(e)-i.h.oversize),i.v.oversize>0&&(0,h.NG)(e,(0,h.P$)(e)-i.v.oversize),e.show()}callbackNames(){return["focused"]}getFocusOverlayContainer(e){return e.closest(`.${this.addWidgetPrefix("content")}`)}getFocusOverlaySize(e){const t=(0,c.N)(e.get(0));return{width:t.right-t.left+1,height:t.bottom-t.top+1}}updateFocusOverlay(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this._$focusOverlay.addClass(v);else if(e.length){const t=d.A.mozilla?"right bottom":"left top",i=e.hasClass(this.addWidgetPrefix("invalid")),o=e.hasClass("dx-cell-modified")&&!i,s=this.getFocusOverlayContainer(e),r=this.getFocusOverlaySize(e);this._$focusOverlay.removeClass(v).toggleClass("dx-focused-cell-invalid",i).toggleClass("dx-focused-cell-modified",o).appendTo(s),(0,h.NG)(this._$focusOverlay,r.height),(0,h.iT)(this._$focusOverlay,r.width);const l={precise:!0,my:t,at:t,of:e,boundary:s.length&&s};this.updateFocusOverlaySize(this._$focusOverlay,l),n.A.setup(this._$focusOverlay,l),this._$focusOverlay.css("visibility","visible")}}renderFocusOverlay(e,t){m.A.isElementInCurrentGrid(this,e)&&(this._$focusOverlay||(this._$focusOverlay=(0,a.A)("<div>").addClass(this.addWidgetPrefix("focus-overlay"))),this.updateFocusOverlay(e,t))}focus(e,t){const i=this;if(void 0===e)return i._$focusedElement;e&&(e.is(i._$focusedElement)||i._$focusedElement&&i._$focusedElement.removeClass("dx-focused"),i._$focusedElement=e,clearTimeout(i._focusTimeoutID),i._focusTimeoutID=setTimeout(()=>{delete i._focusTimeoutID,i.renderFocusOverlay(e,t),e.addClass("dx-focused"),i.focused.fire(e)}))}refocus(){const e=this.focus();this.focus(e)}resize(){const e=this._$focusedElement;e&&this.focus(e)}loseFocus(e){this._$focusedElement&&this._$focusedElement.removeClass("dx-focused"),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(v)}_getContainerRoot(){var e;const t=null===(e=this.component)||void 0===e?void 0:e.$element(),i=l.A.getRootNode(null===t||void 0===t?void 0:t.get(0));return i.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||i.host?i:l.A.getDocument()}_attachContainerEventHandlers(){const e=this,t=e.component&&e.component.$element();t&&s.A.on(t,(0,r.b4)("keydown",C),t=>{"tab"===(0,r.YD)(t)&&e._updateFocusHandler(t)})}getFocusOverlay(){return this._$focusOverlay}hasOverlayElements(){var e;return!(null===(e=this._$focusOverlay)||void 0===e||!e.length)&&!this._$focusOverlay.hasClass(v)}}const y={defaultOptions:()=>({}),controllers:{editorFactory:w}}},6977:function(e,t,i){i.d(t,{xU:function(){return F},mY:function(){return R},EJ:function(){return P}});i(69375),i(82438),i(12266),i(57327),i(74786),i(34840),i(32225);var n=i(24906),o=i(69357),s=i(63027),r=i(85563),l=i(26228),a=i(39889),d=i(80028),u=i(44956),c=i(89214),h=i(94360),p=i(63825),g=i(70781),m=i(97991),_=i(50172),C=i(27996),f=i(57064),v=i(20230),x=i(20338),w=i(16480),y=i(29410),b=i(95506);const I=(e,t)=>e.command&&e.type!==b.ML?"":x.A.formatValue(t,e),S="dx-freespace-row",A="dx-last-row-border";function E(e){return e?Math.round(e.scrollWidth()-e.clientWidth()):0}function R(e){let{rowType:t,column:i}=e;return"group"===t&&(0,_.O9)(i.groupIndex)&&!i.showWhenGrouped&&!i.command}function O(e){let{element:t,watch:i,getter:s,callBack:r}=e;if(i){const e=i(s,r);n.A.on(t,o.N,e)}}const T=function(e,t){const i=(0,g.Im)(t.text)&&"data"===t.rowType,{text:n}=t,o=e.get(0);i?x.A.setEmptyText(e):t.column.encodeHtml?o.textContent=n:o.innerHTML=n},V=function(e){const t=e.getScrollable();return t?Math.ceil(parseFloat((0,r.A)(t.content()).css("paddingBottom"))):0};class F extends y.n{init(){super.init(),this._editingController=this.getController("editing"),this._resizingController=this.getController("resizing"),this._columnsResizerController=this.getController("columnsResizer"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._validatingController=this.getController("validating"),this._errorHandlingController=this.getController("errorHandling"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowHeight=0,this._scrollTop=0,this._scrollLeft=-1,this._scrollRight=0,this._hasHeight=void 0,this._contentChanges=[],this._dataController.loadingChanged.add((e,t)=>{this.setLoading(e,t)}),this._dataController.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_getDefaultTemplate(e){return"empty"===e.command?function(e){e.html("&nbsp;")}:T}renderFocusState(e){}_getDefaultGroupTemplate(e){const t=this.option("summary.texts");return function(i,n){const{data:o}=n;let s=`${n.column.caption}: ${n.text}`;const r=i.get(0);n.summaryItems&&n.summaryItems.length&&(s+=` ${x.A.getGroupRowSummaryText(n.summaryItems,t)}`),o&&(n.groupContinuedMessage&&n.groupContinuesMessage?s+=` (${n.groupContinuedMessage}. ${n.groupContinuesMessage})`:n.groupContinuesMessage?s+=` (${n.groupContinuesMessage})`:n.groupContinuedMessage&&(s+=` (${n.groupContinuedMessage})`)),e.encodeHtml?r.textContent=s:r.innerHTML=s}}_update(e){}_updateCell(e,t){if(R(t)){const t=e.is(`.${this.addWidgetPrefix(w.Nv.groupRowContainer)}`),i=t?e.parent():e;i.addClass("dx-group-cell")}super._updateCell.apply(this,arguments)}_getCellTemplate(e){const t=this,{column:i}=e;let n;return n=R(e)?i.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:t._getDefaultGroupTemplate(i)}:("data"===e.rowType||i.command)&&i.cellTemplate?i.cellTemplate:{allowRenderToDetachedContainer:!0,render:t._getDefaultTemplate(i)},n}_createRow(e,t){const i=super._createRow.apply(this,arguments);if(e){const t="group"===e.rowType,n="data"===e.rowType;n&&i.addClass("dx-data-row"),n&&this.option("showRowLines")&&i.addClass("dx-row-lines"),this.option("showColumnLines")&&i.addClass("dx-column-lines"),!1===e.visible&&i.hide(),t&&(i.addClass("dx-group-row"),this.setAriaExpandedAttribute(i,e))}return i}_rowPrepared(e,t,i){"data"===t.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(i)&&e.addClass("dx-row-alt"),O({element:e.get(0),watch:t.watch,getter:()=>this._isAltRow(this._dataController.getRowByKey(i.key)),callBack:t=>{e.toggleClass("dx-row-alt",t)}})),this._setAriaRowIndex(t,e),O({element:e.get(0),watch:t.watch,getter:()=>t.rowIndex,callBack:()=>this._setAriaRowIndex(t,e)})),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,t){if(!t.is("tr"))return;const{component:i}=this,n="standard"===i.option("scrolling.mode")&&!x.A.isVirtualRowRendering(i);let o=e.rowIndex+1;n?o=i.pageIndex()*i.pageSize()+o:o+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",o,t)}setAriaExpandedAttribute(e,t){const i=t.isExpanded?this.localize("dxDataGrid-ariaExpandedRow"):this.localize("dxDataGrid-ariaCollapsedRow");this.setAria("roledescription",i,e)}_afterRowPrepared(e){const t=e.args[0],i=this._dataController,s=i.getVisibleRows()[t.rowIndex],r=this.option("integrationOptions.watchMethod");if(!t.data||"data"!==t.rowType||t.isNewRow||!this.option("twoWayBindingEnabled")||!r||!s)return;const l=r(()=>i.generateDataValues(t.data,t.columns),()=>{i.repaintRows([s.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});n.A.on(t.rowElement,o.N,l)}_renderScrollable(e){const t=this,i=t.element();if(i.children().length||i.append("<div>"),!e&&t._loadPanel||t._renderLoadPanel(i,i.parent(),t._dataController.isLocalStore()),(e||!t.getScrollable())&&t._dataController.isLoaded()){const e=t.getColumns();let n=!0;for(let t=0;t<e.length;t++)if(!e[t].width&&!e[t].minWidth){n=!1;break}(t.option("columnAutoWidth")||t._hasHeight||n||t._columnsController._isColumnFixing())&&t._renderScrollableCore(i)}}_handleScroll(e){const t=this.option("rtlEnabled"),i=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;let n=e.scrollOffset.left;t&&(this._scrollRight=E(e.component)-this._scrollLeft,i&&(n=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire(Object.assign({},e.scrollOffset,{left:n}),this.name)}_renderScrollableCore(e){const t=this._createScrollableOptions(),i=this._handleScroll.bind(this);t.onScroll=i,this._scrollable=this._createComponent(e,f.A,t),this._scrollableContainer=this._scrollable&&(0,r.A)(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return x.A.renderLoadPanel.apply(this,arguments)}_renderContent(e,t,i){return e.empty().append(t),this._findContentElement()}_updateContent(e,t,i){return this._contentChanges.push({newTableElement:e,change:t,isFixedTableRendering:i}),this.waitAsyncTemplates().done(()=>{const e=this._contentChanges;this._contentChanges=[],e.forEach(e=>{let{newTableElement:t,change:i,isFixedTableRendering:n}=e;const o=this.getTableElement(n),s=this._findContentElement(n),r=null===i||void 0===i?void 0:i.changeType,l=[],a=this.option("highlightChanges"),d=this.addWidgetPrefix("row-inserted-animation");"update"===r?((0,c.__)(i.rowIndices,(e,n)=>{var s;const r=this._getRowElements(t).eq(e),u=null===(s=i.changeTypes)||void 0===s?void 0:s[e],c=i.items&&i.items[e];l.push(()=>{const t=this._getRowElements(o),s=t.eq(n);switch(u){case"update":if(c){var l;const t=null===(l=i.columnIndices)||void 0===l?void 0:l[e];(0,_.O9)(c.visible)&&c.visible!==s.is(":visible")?s.toggle(c.visible):t?this._updateCells(s,r,t,c):s.replaceWith(r)}break;case"insert":if(t.length)s.length?r.insertBefore(s):r.insertAfter(t.last());else if(o){const e=r.is("tbody")?o:o.children("tbody");r.prependTo(e)}a&&i.isLiveUpdate&&r.addClass(d);break;case"remove":s.remove()}})}),(0,c.__)(l,function(){this()}),t.remove()):(this.setTableElement(t,n),s.addClass(this.addWidgetPrefix("content")),this._setGridRole(s),this._renderContent(s,t,n))})}).fail(()=>{this._contentChanges=[]})}_getGridRoleName(){return"grid"}_setGridRole(e){var t;const i=!(null!==(t=this._dataController)&&void 0!==t&&t.isEmpty()),n=this._getGridRoleName();null!==e&&void 0!==e&&e.length&&i&&this.setAria("role",n,e)}_createEmptyRow(e,t,i){const n=this;let o;const s=n._createRow(),r=t?this.getFixedColumns():this.getColumns();s.addClass(e).toggleClass("dx-column-lines",n.option("showColumnLines"));for(let l=0;l<r.length;l++)o=n._createCell({column:r[l],rowType:"freeSpace",columnIndex:l,columns:r}),(0,_.kf)(i)&&o.css("height",i),s.append(o);return n.setAria("role","presentation",s),s}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,t,i){const n=this._getBodies(e),o=!n.length||t.is("tbody"),s=o?e:n;if("top"===i){if(s.first().prepend(t),o){const e=s.children("colgroup");s.prepend(e)}}else s.last().append(t)}_renderFreeSpaceRow(e,t){let i=this._createEmptyRow(S);i=this._wrapRowIfNeed(e,i,"refresh"===(null===t||void 0===t?void 0:t.changeType)),this._appendEmptyRow(e,i)}_checkRowKeys(e){const t=this,i=t._getRows(e),n=t._dataController.store()&&t._dataController.store().key();n&&i.some(e=>{if("data"===e.rowType&&void 0===e.key)return t._dataController.fireError("E1046",n),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){e=e||this._tableElement;const t=e.children("tbody").children().not(".dx-virtual-row").not(`.${S}`);return t.toArray().reduce((e,t)=>e+(0,h.N)(t).height,0)}_updateRowHeight(){const e=this,t=e.getTableElement(),i=e._dataController.items().length;if(t&&e._needUpdateRowHeight(i)){const n=e._getRowsHeight(t);e._rowHeight=n/i}}_findContentElement(e){let t=this.element();const i=this.getScrollable();if(t)return i&&(t=(0,r.A)(i.content())),t.children().first()}_getRowElements(e){const t=super._getRowElements(e);return t&&t.not(`.${S}`)}_getFreeSpaceRowElements(e){const t=e||this.getTableElements();return t&&t.children("tbody").children(`.${S}`)}_getNoDataText(){return this.option("noDataText")}_rowClick(e){const t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,u.X)({evaluate(e){const i=(0,d.Hz)(e);return i(t.data)}},e,t))}_rowDblClick(e){const t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,u.X)({},e,t))}_getColumnsCountBeforeGroups(e){for(let t=0;t<e.length;t++)if("groupExpand"===e[t].type)return t;return 0}_getGroupCellOptions(e){const t=this._getColumnsCountBeforeGroups(e.columns),i=(e.row.groupIndex||0)+t;return{columnIndex:i,colspan:e.columns.length-i-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,t){"group"===t.row.rowType?this._renderGroupedCells(e,t):t.row.values&&super._renderCells(e,t)}_renderGroupedCells(e,t){const{row:i}=t;let n;const{columns:o}=t,{rowIndex:s}=i;let r;const l=this._getGroupCellOptions(t);for(let u=0;u<=l.columnIndex;u++)u===l.columnIndex&&o[u].allowCollapsing&&"infinite"!==t.scrollingMode?(r=!!i.isExpanded,n=o[u]):(r=null,n={command:"expand",cssClass:o[u].cssClass,fixed:o[u].fixed}),this._needRenderCell(u,t.columnIndices)&&this._renderCell(e,{value:r,row:i,rowIndex:s,column:n,columnIndex:u,columnIndices:t.columnIndices,change:t.change});const a=(0,h.n)(this.option("rtlEnabled")),d=(0,u.X)({},o[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:a});l.colspan>1&&(d.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,t.columnIndices)&&this._renderCell(e,{value:i.values[i.groupIndex],row:i,rowIndex:s,column:d,columnIndex:l.columnIndex+1,columnIndices:t.columnIndices,change:t.change})}_renderRows(e,t){const i=this,n=i.option("scrolling.mode");super._renderRows(e,(0,u.X)({scrollingMode:n},t)),i._checkRowKeys(t.change),i._renderFreeSpaceRow(e,t.change),i._hasHeight||i.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,t,i){const{row:n}=t,o=(0,u.X)({columns:t.columns},n),s=this._createRow(n,"tbody");s.appendTo(e),this.renderTemplate(s,i,o,!0,t.change),this._rowPrepared(s,o,t.row)}_renderRow(e,t){const{row:i}=t,{rowTemplate:n}=this.option(),o=this.option("dataRowTemplate");"data"===i.rowType&&o?this._renderDataRowByTemplate(e,t,o):"data"!==i.rowType&&"group"!==i.rowType||(0,_.O9)(i.groupIndex)||!n?super._renderRow(e,t):this.renderTemplate(e,n,(0,u.X)({columns:t.columns},i),!0)}_renderTable(e){const t=this,i=super._renderTable(e),n=function(){const e=t.getScrollable();e&&t.element().closest((0,C.zk)().document).length&&(t.resizeCompleted.remove(n),e._visibilityChanged(!0))};return(0,_.O9)(t.getTableElement())?t._renderScrollable():(t.setTableElement(i),t._renderScrollable(!0),t.resizeCompleted.add(n)),i}_createTable(){const e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){const t=this.element();t.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),t.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",t);const i=this._renderTable({change:e}),n=this._updateContent(i,e);return super._renderCore(e),this._lastColumnWidths=null,n}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){const t=this,{column:i}=e,{row:n}=e,{data:o}=n,s=n&&n.summaryCells,{value:r}=e,l=x.A.getDisplayValue(i,r,o,n.rowType),a=super._getCellOptions(e);if(a.value=r,a.oldValue=e.oldValue,a.displayValue=l,a.row=n,a.key=n.key,a.data=o,a.rowType=n.rowType,a.values=n.values,a.text=I(i,l),a.rowIndex=n.rowIndex,a.summaryItems=s&&s[e.columnIndex],a.resized=i.resizedCallbacks,(0,_.O9)(i.groupIndex)&&!i.command){const e=t.option("grouping.texts"),i=t.option("scrolling.mode");"virtual"!==i&&"infinite"!==i&&(a.groupContinuesMessage=o&&o.isContinuationOnNextPage&&e&&e.groupContinuesMessage,a.groupContinuedMessage=o&&o.isContinuation&&e&&e.groupContinuedMessage)}return a}_toggleDraggableSourceColumnClass(e,t,i,n){const o=this._columnsController,s=o.getColumns(),l=s&&s[i],a=l&&l.isBand&&l.index;(0,c.__)(e,(s,l)=>{if(!(0,r.A)(l).hasClass("dx-group-row"))for(let r=0;r<t.length;r++)if(((0,_.kf)(a)&&o.isParentBandColumn(t[r].index,a)||t[r].index===i)&&(e.eq(s).children().eq(r).toggleClass(this.addWidgetPrefix(v.N.draggableColumn),n),!(0,_.kf)(a)))break})}_getDevicePixelRatio(){return(0,C.zk)().devicePixelRatio}renderNoDataText(){return x.A.renderNoDataText.apply(this,arguments)}getCellOptions(e,t){const i=this._dataController.items()[e];let n,o;return i&&(o=(0,_.Kg)(t)?this._columnsController.columnOption(t):this._columnsController.getVisibleColumns()[t],o&&(n=this._getCellOptions({value:o.calculateCellValue(i.data),rowIndex:i.rowIndex,row:i,column:o}))),n}getRow(e){if(e>=0){const t=this._getRowElements();if(t.length>e)return(0,r.A)(t[e])}}updateFreeSpaceRowHeight(e){const t=this._dataController,i=t.items(!0).length,n=this._findContentElement(),o=this._getFreeSpaceRowElements(e);if(o&&n&&t.totalCount()>=0){let s=!1;if(i>0)if(this._hasHeight)o.hide(),(0,a.OX)(()=>{const t=this.getScrollbarWidth(!0),i=(0,p.Oq)(this.element())-t,r=(0,p.P$)(n),l=i-r>0,d=this._getRowsHeight(n.children().first()),u=e||this.getTableElements(),c=Math.ceil(parseFloat(u.css("borderTopWidth"))),h=this._getHeightCorrection(),g=i-d-c-h;l&&(0,a.zE)(()=>{o.css("height",g),s=!0,o.show()}),(0,a.zE)(()=>this._updateLastRowBorder(s))});else{const n=t.pageSize()-i,r=this.option("scrolling.mode");n>0&&t.pageCount()>1&&"virtual"!==r&&"infinite"!==r&&((0,m.k$)(o,n*this._rowHeight),s=!0),!s&&e?(0,m.k$)(o,0):o.toggle(s),this._updateLastRowBorder(s)}else o.css("height",0),o.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){const e=l.A.webkit&&this._getDevicePixelRatio()>=2,t=l.A.chrome&&l.A.version>=91,i=l.A.mozilla&&l.A.version>=70&&!this.option("showRowLines");return e||i||t?1:0}_columnOptionChanged(e){const{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}_handleDataChanged(e){const t=this;switch(e.changeType){case"refresh":case"prepend":case"append":case"update":t.render(null,e);break;default:t._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,p.RG)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){const t=this._scrollableContainer&&this._scrollableContainer.get(0);let i=0;return t&&(e?(i=t.clientHeight?t.offsetHeight-t.clientHeight:0,i+=V(this)):i=t.clientWidth?t.offsetWidth-t.clientWidth:0),i>0?i:0}_fireColumnResizedCallbacks(){const e=this._lastColumnWidths||[],t=[],i=this.getColumns();for(let n=0;n<i.length;n++)t[n]=i[n].visibleWidth,i[n].resizedCallbacks&&!(0,_.O9)(i[n].groupIndex)&&e[n]!==t[n]&&i[n].resizedCallbacks.fire(t[n]);this._lastColumnWidths=t}_updateLastRowBorder(e){this.option("showBorders")&&!e?this.element().addClass(A):this.element().removeClass(A)}_updateScrollable(){const e=f.A.getInstance(this.element());e&&(e.update(),this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){const e=this.getScrollable(),t=e&&e.scrollOffset().left,i=this.option("rtlEnabled");if(i){const i=E(e),n=i-t;n!==this._scrollRight&&(this._scrollLeft=i-this._scrollRight)}this._scrollLeft>=0&&t!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){const e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),(0,a.zE)(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),(0,a.OX)(()=>{e._updateScrollable()})})}scrollTo(e){const t=this.element(),i=t&&f.A.getInstance(t);i&&i.scrollTo(e)}height(e){const t=this,i=this.element();if(0===arguments.length)return i?(0,p.P$)(i,!0):0;(0,_.O9)(e)&&i&&(t.hasHeight("auto"!==e),(0,m.k$)(i,e))}hasHeight(e){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=e}setLoading(e,t){const i=this;let n=i._loadPanel;const o=i._dataController,s=i.option("loadPanel")||{},r=o.isLoaded()?s.animation:null,l=i.element();if((0,C.Vd)()&&(!n&&void 0!==t&&o.isLocalStore()&&"auto"===s.enabled&&l&&(i._renderLoadPanel(l,l.parent()),n=i._loadPanel),n)){const o={message:t||s.text,animation:r,visible:e};e&&(o.position=x.A.calculateLoadPanelPosition(l)),clearTimeout(i._hideLoadingTimeoutID),n.option("visible")&&!e?i._hideLoadingTimeoutID=setTimeout(()=>{n.option(o)},200):n.option(o)}}toggleDraggableColumnClass(e,t){const i=this._getRowElements().not(".dx-group-row")||[];this._toggleDraggableSourceColumnClass(i,this.getColumns(),e,t)}_getCellElementsCore(e){const t=super._getCellElementsCore.apply(this,arguments);if(t){const e=t.filter(".dx-group-cell").index();if(e>=0&&t.length>e+1)return t.slice(0,e+1)}return t}_getBoundaryVisibleItemIndex(e,t){const i=this;let n=0,o=0,s=0,l=i._scrollTop;const a=i._findContentElement(),d=a&&a.offset().top,u=this._dataController.items(),c=i.getTableElement();if(u.length&&c){const a=i._getRowElements(c).filter(":visible");if(!e){const e=(0,p.P$)(this._hasHeight?this.element():(0,C.zk)());l+=e}for(n=0;n<u.length;n++){o=s;const i=(0,r.A)(a).eq(n);if(i.length&&(s=i.offset(),s=(e?s.top:s.top+(0,p.P$)(i))-d,s>l)){n&&(t||2*l<Math.round(s+o))&&n--;break}}n&&n===u.length&&n--}return n}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){const e=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[e])return t[e].data}_scrollToElement(e,t){const i=this.getScrollable();i&&i.scrollToElement(e,t)}optionChanged(e){const t=this;switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":t._invalidate(!0,!0),e.handled=!0;break;case"scrolling":t._rowHeight=null,t._tableElement=null,e.handled=!0;break;case"rtlEnabled":t._rowHeight=null,t._tableElement=null;break;case"loadPanel":t._tableElement=null,t._invalidate(!0,"loadPanel.enabled"!==e.fullName),e.handled=!0;break;case"noDataText":t.renderNoDataText(),e.handled=!0}}setAriaOwns(e,t,i){const n=this._findContentElement(),o=this.getTableElement();null!==o&&void 0!==o&&o.length&&this.setAria("owns",`${e??""} ${o.attr("id")??""} ${t??""}`.trim(),n)}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(e,t){}getFixedContentElement(){var e;const t=this.addWidgetPrefix("content-fixed");return null===(e=this.element())||void 0===e?void 0:e.children(`.${t}`)}_restoreErrorRow(e){}isElementInside(e){const t=e.closest(`.${this.addWidgetPrefix("rowsview")}`);return t.is(this.element())}_renderIcons(e,t){return e}normalizeScrollLeft(e){const t=this.getScrollable();return this.option("rtlEnabled")&&t?(0,p.RG)(t.$content())-(0,p.RG)(t.$element())-e:e}}const P={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:s.A.format("Loading"),width:200,height:90,showIndicator:!0,showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:s.A.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:F}}},7064:function(e,t,i){i.d(t,{E:function(){return p}});var n=i(24906),o=i(5827),s=i(85563),r=i(66703),l=i(94360),a=i(17484),d=i(91125),u=i(20338),c=i(68055),h=i(28170);class p extends d.Ay.ViewController{constructor(){super(...arguments),this.needToRestoreFocus=!1}_applyColumnIndexBoundaries(e){const t=this._columnsController.getVisibleColumns(null,!0).length;return e<0?e=0:e>=t&&(e=t-1),e}unsubscribeFromKeyDownEvent(){this.keyDownListener&&o.QJ.off(this.keyDownListener)}subscribeToKeyDownEvent(){const e=this.getFocusedViewElement();e&&(this.keyDownListener=o.QJ.on(e,null,e=>this.keyDownHandler(e)))}unsubscribeFromFocusinEvent(){const e=this.getFocusedViewElement();e&&n.A.off(e,"focusin",this.focusinHandlerContext)}subscribeToFocusinEvent(){const e=this.getFocusedViewElement(),t=this.getFocusinSelector();e&&n.A.on(e,"focusin",t,this.focusinHandlerContext)}getScrollPadding(e){const t=(0,l.N)(e.get(0)),i=this.getContainerBoundingRect(e);return{left:i.left-t.left,right:t.right-i.right}}getVirtualCellWidth(){var e;const t=this._columnsController.getVisibleColumns(void 0,!0),i=u.A.getColumnWidths(t),n=(null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex)??0;return i[n]??0}getNextCellLocation(e,t){var i;const n=this.getScrollable(),o=this._isVirtualColumnRender();if(!n||null===e&&!o)return 0;if(null===e){const e="previous"===t||"previousInRow"===t,i=e!==this.option("rtlEnabled")?-1:1;return n.scrollLeft()+i*this.getVirtualCellWidth()}const r=this.getScrollPadding((0,s.A)(n.container()));return(0,a.n)(e[0],"horizontal",(0,s.A)(null===(i=this.getFocusedView())||void 0===i?void 0:i.getContent())[0],n.scrollOffset(),r,this.addWidgetPrefix("table"))}resizeCompleted(){}getColumnIndexOffset(e){let t=0;const i=this._columnsController.getVisibleColumns()[e];return null!==i&&void 0!==i&&i.fixed?t=this._getFixedColumnIndexOffset(i):e>=0&&(t=this._columnsController.getColumnIndexOffset()),t}getFocusedViewElement(){var e;return null===(e=this.getFocusedView())||void 0===e?void 0:e.element()}keyDownHandler(e){}initKeyDownHandler(){this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}getFocusinSelector(){return""}focusinHandler(e){}initHandlers(){var e,t;const i=this.getFocusedView();var n,o;(this.unsubscribeFromKeyDownEvent(),null===i||void 0===i||null===(e=i.renderCompleted)||void 0===e||e.remove(this.renderCompletedWithContext),null===(t=this._resizeController)||void 0===t||null===(t=t.resizeCompleted)||void 0===t||t.remove(this.resizeCompletedWithContext),this.isKeyboardEnabled())&&(null===i||void 0===i||null===(n=i.renderCompleted)||void 0===n||n.add(this.renderCompletedWithContext),null===(o=this._resizeController)||void 0===o||null===(o=o.resizeCompleted)||void 0===o||o.add(this.resizeCompletedWithContext))}getFocusedView(){}_getCell(e){}_getRowIndex(e){return null===e||void 0===e?void 0:e.index()}getCellIndex(e,t){return null===e||void 0===e?void 0:e.index()}_getFixedColumnIndexOffset(e){const t=this._columnsController.getVisibleColumns(null,!0).length,i=(0,h.Jx)(this,e)?t-this._columnsController.getVisibleColumns().length:0;return i}getNewVisibleIndex(e,t,i){return"previous"===i?e-1:e+1}_getCellPosition(e,t){const i=(0,h.c9)(e)&&e.closest("tr");if((0,h.c9)(i)){const n=this._getRowIndex(i);let o=this.getCellIndex(e,n);return o+=this.getColumnIndexOffset(o),t&&(o=this.getNewVisibleIndex(o,n,t),o=this._applyColumnIndexBoundaries(o)),{rowIndex:n,columnIndex:o}}}_getColumnByCellElement(e,t){const i=this.getCellIndex(e),n=i+this._columnsController.getColumnIndexOffset();return this._columnsController.getVisibleColumns(t,!0)[n]}processOnKeyDown(e){const{originalEvent:t}=e,i={handled:!1,event:t};return this.executeAction("onKeyDown",i),e.ctrl=t.ctrlKey,e.alt=t.altKey,e.shift=t.shiftKey,!!i.handled}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}_updateFocusedCellPosition(e,t){const i=this._getCellPosition(e,t);return i&&(!e.length||i.rowIndex>=0&&i.columnIndex>=0)&&this.setFocusedCellPosition(i.rowIndex,i.columnIndex),i}renderCompleted(e){this.initKeyDownHandler(),this.unsubscribeFromFocusinEvent(),this.subscribeToFocusinEvent()}getScrollable(){return this._rowsView.getScrollable()}scrollLeft(e){const t=this.getScrollable();if(!t||t.scrollLeft()===e)return(0,r.cY)().resolve().promise();const i=(0,r.cY)(),n=()=>{var o;t.off("scroll",n);const s=this._rowsView.normalizeScrollLeft(e);if(null!==(o=this._columnsController)&&void 0!==o&&o.isNeedToRenderVirtualColumns(s)){const e=()=>{this._rowsView.renderCompleted.remove(e),i.resolve()};this._rowsView.renderCompleted.add(e)}else i.resolve()};return t.on("scroll",n),t.scrollTo({left:e}),i.promise()}scrollToNextCell(e,t){const i=this.getNextCellLocation(e,t);return this.scrollLeft(i)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}getContainerBoundingRect(e){const t=(0,l.N)(e.get(0));return{left:t.left,right:t.right}}init(){this._columnsController=this.getController("columns"),this._resizeController=this.getController("resizing"),this._rowsView=this.getView("rowsView"),this._focusedCellPosition={},this.isKeyboardEnabled()&&this.createAction("onKeyDown"),this.renderCompletedWithContext=this.renderCompletedWithContext??this.renderCompleted.bind(this),this.resizeCompletedWithContext=this.resizeCompletedWithContext??this.resizeCompleted.bind(this),this.focusinHandlerContext=this.focusinHandlerContext??this.focusinHandler.bind(this),this.initHandlers()}dispose(){o.QJ.off(this.keyDownListener)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedCellPosition(e,t){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(t)}optionChanged(e){switch(e.name){case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this.init(),e.handled=!0;break;case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_getFocusedCell(){return(0,s.A)(this._getCell(this._focusedCellPosition))}getDirectionByKeyName(e){const t=this.option("rtlEnabled");switch(e){case"leftArrow":return t?c.OP.Next:c.OP.Previous;case"rightArrow":return t?c.OP.Previous:c.OP.Next;default:return c.OP.Next}}}},8782:function(e,t,i){i.d(t,{O:function(){return m}});i(82438),i(12266);var n=i(74567),o=i(85563),s=i(94360),r=i(50172),l=i(16480),a=i(44171),d=i(26662),u=i(68055),c=(i(69375),i(57327),i(91125));class h extends c.xI{constructor(){super(...arguments),this.keyboardNavigationControllers=[]}registerKeyboardNavigationController(e){this.keyboardNavigationControllers.push(e)}updateFocusPosition(e,t){(0,r.O9)(t)?e.updateFocusPosition(t):this.keyboardNavigationControllers.forEach(t=>{t!==e&&t.updateFocusPosition()})}}var p=i(56041);class g extends p.e{constructor(){super(...arguments),this.isOutsideVisibleArea=(e,t)=>{const i=(0,s.N)(e.get(0)),n=Math.round(i.left),o=Math.round(i.right),r=this.getContainerBoundingRect(t);return n<r.left||o>r.right}}leftRightKeysHandler(e){const{originalEvent:t}=e;if((0,n.By)(t)){const i=(0,o.A)(t.target).closest("td"),n=this.getDirectionByKeyName(e.keyName),s=this._getRowIndex(i.parent()),r=this._getColumnByCellElement(i,s);this.canReorderColumn(r,n,s)&&this.moveColumn(r,n,s),null===t||void 0===t||t.preventDefault()}}getColumnVisibleIndexCorrection(e,t,i){return 0}getNewVisibleIndex(e,t,i){const n=super.getNewVisibleIndex(e,t,i),o=this.getColumnVisibleIndexCorrection(e,t,i);return n+o}getDraggableColumns(e,t){var i;const n=this._columnsController,o=null===(i=n.getVisibleColumns(t,!0))||void 0===i?void 0:i.filter(t=>t.ownerBand===(null===e||void 0===e?void 0:e.ownerBand)&&(!(0,r.O9)(t.type)||n.isCustomCommandColumn(t)));if(null!==e&&void 0!==e&&e.fixed){const t=(0,d.iR)(n,e);if(t!==l.Xn.Sticky)return o.filter(e=>e.fixed&&(0,d.iR)(n,e)===t)}return o.filter(e=>!e.fixed||e.fixedPosition===l.Xn.Sticky)}keyDownHandler(e){let t=super.keyDownHandler(e);if(t)return!0;switch(e.keyName){case"tab":this.tabKeyHandler(e),t=!0;break;case"leftArrow":case"rightArrow":this.leftRightKeysHandler(e),t=!0}return t}tabKeyHandler(e){}getCellIndex(e){return this._columnHeadersView.getCellIndex(e)}_getCell(e){var t;const i=this.getColumnIndexOffset(e.columnIndex),n=e.columnIndex>=0?e.columnIndex-i:-1;return null===(t=this._columnHeadersView)||void 0===t?void 0:t.getCell({rowIndex:e.rowIndex,columnIndex:n})}getFocusedView(){return this.getView("columnHeadersView")}focusinHandler(e){this._updateFocusedCellPosition((0,o.A)(e.target))}getFocusinSelector(){return".dx-header-row > td"}getFocusableColumns(e,t){const i=this._columnsController.getVisibleColumns(e),n=i.filter(e=>!(0,r.O9)(e.type)||this._columnsController.isCustomCommandColumn(e));return(0,r.O9)(t)?n.filter(e=>e.ownerBand===t):n}init(){super.init(),this._columnHeadersView=this.getView("columnHeadersView")}canReorderColumn(e,t,i){const n=this._columnHeadersView.isColumnReorderingEnabled(e);if(!n)return!1;const o=this.getDraggableColumns(e,i),s=e.index===o[0].index,r=e.index===o[o.length-1].index;return t===u.OP.Next?!r:!s}getFirstFocusableVisibleIndex(){const e=this.getFocusableColumns();return null!==e&&void 0!==e&&e.length?this._columnsController.getVisibleIndex(e[0].index):-1}restoreFocus(){const e=this._getFocusedCell(),t=a.O.isFixedCell(e,this.addWidgetPrefix.bind(this));if(t)return void super.restoreFocus();const i=e.length&&this.isOutsideVisibleArea(e,(0,o.A)(this._columnHeadersView.getContent()));i?this.scrollToNextCell(e).then(()=>{super.restoreFocus()}):super.restoreFocus()}needToFocus(){return this.needToRestoreFocus}}const m={controllers:{headersKeyboardNavigation:g,columnFocusDispatcher:h}}},10391:function(e,t,i){i.d(t,{A:function(){return u}});i(69375);var n=i(89214),o=i(50172);const s=["year","month","day"],r=["year","month","day","hour","minute"],l=e=>"date"===e||"datetime"===e,a=e=>{var t;let i,n=[];const a=["year","month","day","hour","minute","second"],d=null===(t=e.headerFilter)||void 0===t?void 0:t.groupInterval,u="quarter"===d?"month":d;return l(e.dataType)&&null!==d?(n="datetime"===e.dataType?r:s,i=a.indexOf(u),i>=0?(n=a.slice(0,i),n.push(d),n):n):(0,o.O9)(d)?Array.isArray(d)?d:[d]:void 0},d=e=>{var t;return null!==(t=e.calculateDisplayValue)&&void 0!==t&&t.context?e.calculateDisplayValue:null};var u=function(){const e=(e,t)=>{let i=e.dataField||e.selector;return"search"===t&&(i=e.displayField||d(e)||i),i},t=function(t,i){const n=this;let s,r,a;const d=e(n,i);if(Array.isArray(t)&&(0,o.O9)(t[0])&&(0,o.O9)(t[1]))return r=[d,">=",t[0]],a=[d,"<=",t[1]],l(n.dataType)&&(u=t[1],u.getHours()+u.getMinutes()+u.getSeconds()+u.getMilliseconds()<1)&&(s=new Date(t[1].getTime()),"date"===n.dataType&&s.setDate(t[1].getDate()+1),a=[d,"<",s]),[r,"and",a];var u},i=function(t,i,s){const r=this;let l,d,u;const c=(e=>(0,o.$P)(e)?[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]:(0,n.Tj)(`${e}`.split("/"),(e,t)=>1===t?Number(e)-1:Number(e)))(t),h=e(r,s);var p;"headerFilter"===s?u=null===(p=a(r))||void 0===p?void 0:p[c.length-1]:"datetime"===r.dataType&&(u="minute");switch(u){case"year":l=new Date(c[0],0,1),d=new Date(c[0]+1,0,1);break;case"month":l=new Date(c[0],c[1],1),d=new Date(c[0],c[1]+1,1);break;case"quarter":l=new Date(c[0],3*c[1],1),d=new Date(c[0],3*c[1]+3,1);break;case"hour":l=new Date(c[0],c[1],c[2],c[3]),d=new Date(c[0],c[1],c[2],c[3]+1);break;case"minute":l=new Date(c[0],c[1],c[2],c[3],c[4]),d=new Date(c[0],c[1],c[2],c[3],c[4]+1);break;case"second":l=new Date(c[0],c[1],c[2],c[3],c[4],c[5]),d=new Date(c[0],c[1],c[2],c[3],c[4],c[5]+1);break;default:l=new Date(c[0],c[1],c[2]),d=new Date(c[0],c[1],c[2]+1)}switch(i){case"<":return[h,"<",l];case"<=":return[h,"<",d];case">":return[h,">=",d];case">=":return[h,">=",l];case"<>":return[[h,"<",l],"or",[h,">=",d]];default:return[[h,">=",l],"and",[h,"<",d]]}},s=function(t,i,n){const s=e(this,n),r=a(this);if("headerFilter"===n&&r&&(0,o.O9)(t)){const e=`${t}`.split("/"),i=Number(e[e.length-1]),n=r[e.length-1],o=[s,">=",i],l=[s,"<",i+n],a=[o,"and",l];return a}return[s,i||"=",t]};return{defaultCalculateFilterExpression(n,r,a){var d;const u=this,c=e(u,a),h=u.calculateDisplayValue&&"search"===a,p=h&&(null===(d=u.lookup)||void 0===d?void 0:d.dataType)||u.dataType;let g=null;if("headerFilter"!==a&&"filterBuilder"!==a||null!==n)if("string"!==p||u.lookup&&!h){if("between"===r)return t.apply(u,[n,a]);if(l(p)&&(0,o.O9)(n))return i.apply(u,arguments);if("number"===p)return s.apply(u,arguments);g=[c,r||"=",n]}else g=[c,r||"contains",n];else g=[c,r||"=",null],"string"===p&&(g=[g,"="===r?"or":"and",[c,r||"=",""]]);return g},getGroupInterval:a}}()},11810:function(e,t,i){i.d(t,{Qu:function(){return H}});i(69375),i(82438),i(42521),i(2989),i(99819),i(74786);var n=i(63029),o=i(24906),s=i(39332),r=i(96004),l=i(74567),a=i(92324),d=i(85563),u=i(24714),c=i(44956),h=i(89214),p=i(94360),g=i(63825),m=i(50172),_=i(61334),C=i(22984);const f=e=>{const t=[];return(0,C.__)(e,(e,i)=>{const n=null===i||void 0===i?void 0:i.getBoundingRect();n&&t.push({draggingPanel:i,boundingRect:n})}),t.length?t:null};var v=i(91125),x=i(20338),w=i(20230);const y="columns-separator-transparent",b="dxDataGridResizingReordering",I=function(e){return e.option("allowColumnResizing")||e.getController("columns").isColumnOptionUsed("allowResizing")},S=function(e){return e.option("allowColumnReordering")||e.getController("columns").isColumnOptionUsed("allowReordering")};class A extends v.Ay.View{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}_renderCore(){const e=super._renderCore();return this.element().addClass(this.addWidgetPrefix("tracker")),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){const e=this;e._positionChanged=function(t){const i=e.element();null!==i&&void 0!==i&&i.hasClass(e.addWidgetPrefix("tracker"))&&(i.css({top:t.top}),(0,g.k$)(i,t.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}isVisible(){return I(this)}show(){this.element().show()}hide(){var e;null===(e=this.element())||void 0===e||e.hide()}setHeight(e){(0,g.k$)(this.element(),e)}}class E extends v.Ay.View{_renderSeparator(){}_renderCore(e){const t=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),t}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){const t=this.element();if(t){if(!(0,m.O9)(e))return(0,g.Oq)(t);(0,g.k$)(t,e)}}width(e){const t=this.element();if(t){if(!(0,m.O9)(e))return(0,g.RG)(t);(0,g.zj)(t,e)}}}class R extends E{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=I(this),this.hide(!0))),super.optionChanged(e)}_renderSeparator(){super._renderSeparator();const e=this.element();e.addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){const e=this;let t;e._positionChanged=function(i){t=e.element(),t&&(t.css({top:i.top}),(0,g.k$)(t,i.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=I(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(S(this)||I(this))}show(){const e=this,t=this.element();t&&!e._isShown&&(e._isTransparent?t.removeClass(e.addWidgetPrefix(y)):t.show()),super.show()}hide(e){const t=this.element(),i=this.addWidgetPrefix(y);t&&(this._isShown||e)&&(this._isTransparent?(t.addClass(i),t.css("left",""),t.show()):(t.hasClass(i)&&t.removeClass(i),t.hide())),super.hide()}moveByX(e){const t=this.element();t&&t.css("left",null===e?0:e-this._parentElement().offset().left)}changeCursor(e){e=(0,m.O9)(e)?e:"";const t=this.element();t&&t.css("cursor",e)}}class O extends E{init(){super.init();const e=this.getController("data");e.loadingChanged.add(e=>{e||this.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass("dx-block-separator").html("&nbsp;")}hide(){const e=this,t=this._parentElement(),i=this.element();i&&this._isShown&&i.css("display","none"),t&&!t.children(".dx-block-separator").length&&t.prepend(e.element()),super.hide()}isVisible(){const e=this.option("groupPanel"),t=this.option("columnChooser");return(null===e||void 0===e?void 0:e.visible)||(null===t||void 0===t?void 0:t.enabled)}show(e){const t=this.element();if(t&&!this._isShown)switch(e){case"group":this.element().css("display","block");break;case"columnChooser":!function(e){n.fx.stop(t,!0),n.fx.animate(t,{type:"slide",from:{width:0,display:e.display},to:e,duration:300,easing:"swing"})}({width:"100%",display:"block"});break;default:t.css("display","")}super.show()}}class T extends v.Ay.View{getSourceDraggingPanel(){const{sourceLocation:e,draggingPanels:t}=this._dragOptions;return t.find(t=>t.getName()===e)}updateDragElement(){const{columnElement:e,sourceColumn:t}=this._dragOptions,i=this.getSourceDraggingPanel(),n=this.element();n.empty().css({textAlign:null===e||void 0===e?void 0:e.css("textAlign"),height:e&&(0,g.Oq)(e),width:e&&(0,g.RG)(e),whiteSpace:null===e||void 0===e?void 0:e.css("whiteSpace")}).addClass(this.addWidgetPrefix("drag-action")),i.renderDragCellContent(n,t)}init(){super.init();const e=this.getController("data");this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._columnsController=this.getController("columns"),this._isDragging=!1,e.loadingChanged.add(e=>{const t=this.element();!e&&t&&t.hide()})}isDragging(){return this._isDragging}_getDraggingPanelByPos(e){let t;return(0,h.__)(this._dragOptions.draggingPanelBoundingRects,(i,n)=>{let{draggingPanel:o,boundingRect:s}=n;if(s&&(void 0===s.bottom||e.y<s.bottom)&&(void 0===s.top||e.y>s.top)&&(void 0===s.left||e.x>s.left)&&(void 0===s.right||e.x<s.right))return t=o,!1}),t}_renderCore(){this.element().addClass(`${this.addWidgetPrefix("drag-header")} ${this.addWidgetPrefix("text-content")} dx-widget`).hide()}_resetTargetColumnOptions(){const e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,t){return(0,m.O9)(e)?{columnIndex:t,rowIndex:e}:t}dispose(){const e=this.element();this._dragOptions=null,null===e||void 0===e||e.parent().find(`.${this.addWidgetPrefix("drag-header")}`).remove()}isVisible(){const e=this._columnsController.getCommonSettings();return this.option("showColumnHeaders")&&(S(this)||e.allowGrouping||e.allowHiding)}dragHeader(e){const{columnElement:t}=e,i=Object.assign({},e,{draggingPanelBoundingRects:f(e.draggingPanels)});this._isDragging=!0,this._dragOptions=i,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:t,sourceLocation:e.sourceLocation};const n=a.A.getDocument();this._onSelectStart=n.onselectstart,n.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.updateDragElement(),this.element().appendTo(_.A.getSwatchContainer(t))}moveHeader(e){const t=e.event,{that:i}=t.data,n=(0,l.rw)(t),o=!!i._columnsResizerViewController&&i._columnsResizerViewController.isResizing(),s=i._dragOptions;if(i._isDragging&&!o){const e=i.element(),o=Math.abs(n.x-s.columnElement.offset().left-s.deltaX),r=Math.abs(n.y-s.columnElement.offset().top-s.deltaY);if(e.is(":visible")||o>5||r>5){e.show();const t=n.x-s.deltaX,o=n.y-s.deltaY;e.css({left:t,top:o}),i.dockHeader(n)}t.preventDefault()}}dockHeader(e){const t=this,i=t._getDraggingPanelByPos(e),n=t._controller,o=t._dropOptions,s=t._dragOptions;if(i){const r=t.option("rtlEnabled"),l="columnChooser"===i.getName(),a=l?"y":"x",u=i.getName(),h="headers"===u?s.rowIndex:void 0,{sourceColumn:p}=s,g=i.getColumnElements(h,null===p||void 0===p?void 0:p.ownerBand)||[],m=s.pointsByTarget=s.pointsByTarget||{},_="columnChooser"===u?[]:m[u]||n._generatePointsByColumns((0,c.X)({},s,{targetDraggingPanel:i,columns:i.getColumns(h),columnElements:g,isVerticalOrientation:l,startColumnIndex:"headers"===u?(0,d.A)(g[0]).index():0}));if(m[u]=_,o.targetLocation=u,_.length>0)for(let i=0;i<_.length;i++){const s=_[i+1]&&(_[i][a]+_[i+1][a])/2;if(void 0===s||(r&&"x"===a?e[a]>s:e[a]<s)){o.targetColumnIndex=t._getVisibleIndexObject(h,_[i].columnIndex),g[i]?(o.targetColumnElement=g.eq(i),o.isLast=!1):(o.targetColumnElement=g.last(),o.isLast=!0),o.posX=_[i].x,o.posY=_[i].y,n.dock(o);break}}else t._resetTargetColumnOptions(),n.dock(o)}}dropHeader(e){const t=e.event,{that:i}=t.data,n=i._controller;i.element().hide(),n&&i._isDragging&&n.drop(i._dropOptions),i.element().appendTo(i._parentElement()),i._dragOptions=null,i._dropOptions=null,i._isDragging=!1,a.A.getDocument().onselectstart=i._onSelectStart||null}}const V=function(e){return"widget"!==e.option("columnResizingMode")};class F extends v.Ay.ViewController{callbackNames(){return["resizeStarted"]}init(){this._subscribesToCallbacks=[],I(this)&&this._init()}dispose(){this._unsubscribes(),super.dispose()}optionChanged(e){super.optionChanged(e),"allowColumnResizing"===e.name&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}_isHeadersRowArea(e){if(this._columnHeadersView){const t=this._columnHeadersView.element();if(t){const i=t.offset().top,n=this._columnHeadersView.getHeadersRowHeight();return e>=i&&e<=i+n}}return!1}_isRtlParentStyle(){var e;const t=this.option("rtlEnabled");return t&&"rtl"===(null===(e=this._$parentContainer)||void 0===e?void 0:e.parent().css("direction"))}_correctColumnIndexForPoint(e,t,i){e.columnIndex-=t}_pointCreated(e,t,i){const n=V(this),o=this.option("rtlEnabled"),s=this._isRtlParentStyle(),r=n||!o||s?1:0,l=(null===i||void 0===i?void 0:i.length)??t.length;if(e.index>=r&&e.index<l+(n||o&&!s?0:1)){this._correctColumnIndexForPoint(e,r,t);const i=t[e.columnIndex]||{},o=t[e.columnIndex+1]||{};return!(n?i.allowResizing&&o.allowResizing:i.allowResizing)}return!0}_getTargetPoint(e,t,i){if(e)for(let n=0;n<e.length;n++)if((e[n].x!==e[0].x||!e[n+1]||e[n].x!==e[n+1].x)&&e[n].x-i<=t&&t<=e[n].x+i)return e[n];return null}getSeparatorOffsetX(e){var t;const i=V(this),n=this.option("rtlEnabled"),o=this._isRtlParentStyle(),s=e[0].getBoundingClientRect().width,r=(null===(t=e.offset())||void 0===t?void 0:t.left)??0;return r+((i||o)&&n?0:s)}_moveSeparator(e){var t;const i=e.event,n=i.data,o=n._columnsSeparatorView.width(),s=V(n),r=o/2,a=n._$parentContainer.offset(),d=a.left,u=(0,l.rw)(i),c=this._isRtlParentStyle(),h=null===(t=n._draggingHeaderView)||void 0===t?void 0:t.isDragging();if(n._isResizing&&n._resizingInfo){if((d<=u.x||!s&&c)&&(!s||u.x<=d+(0,g.RG)(n._$parentContainer))&&n._updateColumnsWidthIfNeeded(u.x)){const e=n._columnHeadersView.getColumnElements().eq(n._resizingInfo.currentColumnIndex);if(e.length){const t=this.getSeparatorOffsetX(e);n._columnsSeparatorView.moveByX(t),n._tablePositionController.update(n._targetPoint.y),i.preventDefault()}}}else h||(n._isHeadersRowArea(u.y)?(n._previousParentOffset&&(n._previousParentOffset.left===a.left&&n._previousParentOffset.top===a.top||n.pointsByColumns(null)),n._targetPoint=n._getTargetPoint(n.pointsByColumns(),u.x,o),n._previousParentOffset=a,n._isReadyResizing=!1,n._targetPoint?(n._columnsSeparatorView.changeCursor("col-resize"),n._columnsSeparatorView.moveByX(n._targetPoint.x-r),n._tablePositionController.update(n._targetPoint.y),n._isReadyResizing=!0,i.preventDefault()):(n._columnsSeparatorView.changeCursor(),n._columnsSeparatorView.moveByX(null))):(n.pointsByColumns(null),n._isReadyResizing=!1,n._columnsSeparatorView.changeCursor(),n._columnsSeparatorView.moveByX(null)))}_endResizing(e){const t=e.event,i=t.data;i._isResizing&&(i.pointsByColumns(null),i._resizingInfo=null,i._columnsSeparatorView.hide(),i._columnsSeparatorView.changeCursor(),i._trackerView.hide(),i._isReadyResizing=!1,i._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){const t=this._targetPoint.columnIndex,i=this._getNextColumnIndex(t),n=this._columnHeadersView.getHeaderElement(t),o=this._columnHeadersView.getHeaderElement(i);this._resizingInfo={startPosX:e,currentColumnIndex:t,currentColumnWidth:null!==n&&void 0!==n&&n.length?(0,p.N)(n[0]).width:0,nextColumnIndex:i,nextColumnWidth:null!==o&&void 0!==o&&o.length?(0,p.N)(o[0]).width:0,needToInvertResizing:this._needToInvertResizing(n)}}_startResizing(e){const t=e.event,i=t.data,n=(0,l.rw)(t);if((0,l.kH)(t)&&(i._isHeadersRowArea(n.y)?(i._targetPoint=i._getTargetPoint(i.pointsByColumns(),n.x,10),i._targetPoint&&(i._columnsSeparatorView.moveByX(i._targetPoint.x-i._columnsSeparatorView.width()/2),i._isReadyResizing=!0)):i._isReadyResizing=!1),i._isReadyResizing){i._setupResizingInfo(n.x),i._isResizing=!0,i._tablePositionController.update(i._targetPoint.y),i._columnsSeparatorView.show(),i._trackerView.show();const e=i.component.getScrollable();e&&i._isRtlParentStyle()&&(i._scrollRight=(0,g.RG)(e.$content())-(0,g.RG)(e.container())-e.scrollLeft()),this.resizeStarted.fire(),t.preventDefault(),t.stopPropagation()}this.isResizing()&&this._editorFactoryController.loseFocus()}_generateColumnsTopYIndex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this,i=t._columnsController.getRowCount(),n={},o=e=>{const t=Math.ceil(e.x);return n[t]||(n[t]=e.y),!0};for(let s=0;s<i-1;s++){const i=t._columnHeadersView.getColumnElements(s);i&&i.length>0&&x.A.getPointsByColumns(i,o,!1,0,e)}return n}_generatePointsByColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this,i=t._generateColumnsTopYIndex(e),n=t._columnsController?t._columnsController.getVisibleColumns():[],o=t._columnHeadersView.getColumnElements();t._pointsByColumns=[],o&&o.length>0&&(t._pointsByColumns=x.A.getPointsByColumns(o,e=>t._pointCreated((e=>{const t=Math.ceil(e.x);return i[t]&&(e.y=i[t]),e})(e),n,o),!1,0,e))}_needToInvertResizing(e){const t=this.option("rtlEnabled"),i=this._isRtlParentStyle(),n=V(this);return(n||i)&&t}_unsubscribeFromEvents(){this._moveSeparatorHandler&&o.A.off(a.A.getDocument(),(0,l.b4)(r.A.move,b),this._moveSeparatorHandler),this._startResizingHandler&&o.A.off(this._$parentContainer,(0,l.b4)(r.A.down,b),this._startResizingHandler),this._endResizingHandler&&(o.A.off(this._columnsSeparatorView.element(),(0,l.b4)(r.A.up,b),this._endResizingHandler),o.A.off(a.A.getDocument(),(0,l.b4)(r.A.up,b),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),o.A.on(a.A.getDocument(),(0,l.b4)(r.A.move,b),this,this._moveSeparatorHandler),o.A.on(this._$parentContainer,(0,l.b4)(r.A.down,b),this,this._startResizingHandler),o.A.on(this._columnsSeparatorView.element(),(0,l.b4)(r.A.up,b),this,this._endResizingHandler),o.A.on(a.A.getDocument(),(0,l.b4)(r.A.up,b),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){let t,i=!1,n=this._rowsView.contentWidth();const o=this._resizingInfo,s=this._columnsController,r=s.getVisibleColumns(),l=this._columnsSeparatorView.width(),a=V(this),d=a&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),u=this._isRtlParentStyle(),c=r[o.currentColumnIndex],h=r[o.nextColumnIndex],{needToInvertResizing:p}=o;function _(e){return(0,m.Kg)(e)&&e.endsWith("%")}function C(e,t,i,n){if(e){const o=e.width;o&&(n=_(o)),n?(s.columnOption(e.index,"visibleWidth",t),s.columnOption(e.index,"width",`${(t/i*100).toFixed(3)}%`)):(s.columnOption(e.index,"visibleWidth",null),s.columnOption(e.index,"width",t))}}t=e-o.startPosX,p&&(t=-t);let{cellWidth:f,nextCellWidth:v}=function(e){let t,i,n;const s=o.currentColumnWidth+e,r=(null===c||void 0===c?void 0:c.minWidth)||l,d={};return s>=r?d.cellWidth=s:(d.cellWidth=r,n=!0),a&&(i=o.nextColumnWidth-e,t=(null===h||void 0===h?void 0:h.minWidth)||l,i>=t?d.nextCellWidth=n?o.nextColumnWidth-(e+r-s):i:(d.nextCellWidth=t,d.cellWidth=o.currentColumnWidth+(e-t+i))),d}(t);if(i=c.width!==f,i){if(s.beginUpdate(),f=Math.floor(f),n=function(e,t){const i=t.every(e=>e.width);if(i){const i=t.reduce((e,t)=>(_(t.width)&&(e+=parseFloat(t.width)),e),0);i>100&&(e=e/i*100)}return e}(n,r),C(c,f,n,d),a)v=Math.floor(v),C(h,v,n,d);else{const e=this._columnHeadersView.getColumnWidths();e[o.currentColumnIndex]=f;const t=e.reduce((e,t)=>e+t,0)>this._rowsView.contentWidth();if(!t){const e=x.A.getLastResizableColumnIndex(r);e>=0&&s.columnOption(r[e].index,"visibleWidth","auto")}for(let i=0;i<e.length;i++)r[i]&&r[i]!==c&&void 0===r[i].width&&s.columnOption(r[i].index,"width",e[i])}if(s.endUpdate(),!a){this.component.updateDimensions();const e=this.component.getScrollable();if(e&&u){const t=(0,g.RG)(e.$content())-(0,g.RG)(e.container())-this._scrollRight;e.scrollTo({left:t})}}}return i}_subscribeToCallback(e,t){e.add(t),this._subscribesToCallbacks.push({callback:e,handler:t})}_unsubscribeFromCallbacks(){for(let e=0;e<this._subscribesToCallbacks.length;e++){const t=this._subscribesToCallbacks[e];t.callback.remove(t.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){const e=()=>{this._isResizing||this.pointsByColumns(null)},t=e=>{this._scrollLeft!==e.left&&(this._scrollLeft=e.left,this.pointsByColumns(null))};this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._columnHeadersView=this.getView("columnHeadersView"),this._trackerView=this.getView("trackerView"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._editorFactoryController=this.getController("editorFactory"),this._draggingHeaderView=this.component.getView("draggingHeaderView"),this._$parentContainer=this.component.$element(),this._subscribeToCallback(this._columnHeadersView.renderCompleted,e),this._subscribeToCallback(this._columnHeadersView.resizeCompleted,e),this._subscribeToCallback(this._columnsSeparatorView.renderCompleted,()=>{this._unsubscribeFromEvents(),this._subscribeToEvents()}),this._subscribeToCallback(this._rowsView.renderCompleted,()=>{this._rowsView.scrollChanged.remove(t),this._rowsView.scrollChanged.add(t)});let i=0!==this._rowsView.getScrollbarWidth(),n=0;this._subscribeToCallback(this._tablePositionController.positionChanged,e=>{if(this._isResizing&&!this._rowsView.isResizing){const t=0!==this._rowsView.getScrollbarWidth();i!==t||n&&n!==e.height?(i=t,n=e.height,this.component.updateDimensions()):this._rowsView.updateFreeSpaceRowHeight()}n=e.height})}isResizing(){return this._isResizing}pointsByColumns(e){if(void 0===e)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=e}}class P extends v.Ay.ViewController{constructor(e){super(e),this.positionChanged=(0,u.A)()}init(){super.init(),this._columnsResizerController=this.getController("columnsResizer"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView"),this._pagerView=this.getView("pagerView"),this._rowsView.resizeCompleted.add(()=>{if(this.option("allowColumnResizing")){const e=this._columnsResizerController._targetPoint;this.update(e?e.y:null)}})}update(e){const t={},i=this._columnHeadersView.element(),n=null===i||void 0===i?void 0:i.offset(),o=(null===n||void 0===n?void 0:n.top)||0,s=(0,m.O9)(e)?Math.abs(e-o):0,r=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),a=this._rowsView?this._rowsView.height()-l:0,d=this.component.getView("draggingHeaderView");t.height=r;const u=this._columnsResizerController.isResizing()||d.isDragging();u&&(t.height+=a-s),null!==e&&null!==i&&void 0!==i&&i.length&&(t.top=i[0].offsetTop+s),this.positionChanged.fire(t)}}class D extends v.Ay.ViewController{init(){var e,t;super.init(),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._columnHeadersView=this.getView("columnHeadersView"),this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._draggingHeaderView=this.getView("draggingHeaderView"),this._rowsView=this.getView("rowsView"),this._blockSeparatorView=this.getView("blockSeparatorView"),this._headerPanelView=this.getView("headerPanel"),this._columnChooserView=this.getView("columnChooserView");const i=()=>{if(this._draggingHeaderView){const e=[this._columnChooserView,this._columnHeadersView,this._headerPanelView];this._unsubscribeFromEvents(this._draggingHeaderView,e),this._subscribeToEvents(this._draggingHeaderView,e)}};this._columnHeadersView.renderCompleted.add(i),null===(e=this._headerPanelView)||void 0===e||e.renderCompleted.add(i),null===(t=this._columnChooserView)||void 0===t||t.renderCompleted.add(i)}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}_generatePointsByColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._columnHeadersView.getColumnElements();this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e);const n=x.A.getPointsByColumns(e.columnElements,t=>this._pointCreated({point:t,columns:e.columns,location:e.targetDraggingPanel.getName(),sourceColumn:e.sourceColumn,cells:i}),e.isVerticalOrientation,e.startColumnIndex,t);return n}checkIsCustomGroupColumnPosition(e){let t=!0;for(let i=0;i<e.columns.length;i+=1){const n=e.columns[i];if("expand"===n.command&&!t)return!0;n.command||(t=!1)}return!1}_pointCreated(e){let{point:t,columns:i,location:n,sourceColumn:o}=e;const s=i[t.columnIndex],r=i[t.columnIndex-1],l="expand"===(null===r||void 0===r?void 0:r.command),a="expand"===(null===s||void 0===s?void 0:s.command)&&"expand"!==(null===r||void 0===r?void 0:r.command),d=o&&!o.allowReordering,u=!(null!==s&&void 0!==s&&s.allowReordering)&&!(null!==r&&void 0!==r&&r.allowReordering);switch(n){case"columnChooser":return!0;case"headers":if(d)return!0;if(!a)return l||u;if(this.isCustomGroupColumnPosition)return!1;while("expand"===(null===(c=i[t.columnIndex])||void 0===c?void 0:c.command)){var c;t.columnIndex+=1}return!1;default:return 0===i.length}}_subscribeToEvents(e,t){const i=this;(0,h.__)(t,(n,r)=>{if(r){let n;const a=r.getRowCount?r.getRowCount():1,u=r.getName(),c=function(a,c){if(!c)return;const h=(0,d.A)(c),p=n[a];p&&r.allowDragging(p)&&(h.addClass(i.addWidgetPrefix("drag-action")),o.A.on(h,(0,l.b4)(s.ni,b),i.createAction(n=>{const o=n.event,s=(0,l.rw)(o);e.dragHeader({deltaX:s.x-(0,d.A)(o.currentTarget).offset().left,deltaY:s.y-(0,d.A)(o.currentTarget).offset().top,sourceColumn:p,index:p.index,columnIndex:a,columnElement:h,sourceLocation:u,draggingPanels:t,rowIndex:i._columnsController.getRowIndex(p.index,!0)})})),o.A.on(h,(0,l.b4)(s.Cy,b),{that:e},i.createAction(e.moveHeader)),o.A.on(h,(0,l.b4)(s._N,b),{that:e},i.createAction(e.dropHeader)))};for(let e=0;e<a;e++){const t=r.getColumnElements(e)||[];t.length&&(n=r.getColumns(e)||[],(0,h.__)(t,c))}}})}_unsubscribeFromEvents(e,t){const i=this;(0,h.__)(t,(e,t)=>{if(t){const e=t.getColumnElements()||[];(0,h.__)(e,(e,t)=>{const n=(0,d.A)(t);o.A.off(n,(0,l.b4)(s.ni,b)),o.A.off(n,(0,l.b4)(s.Cy,b)),o.A.off(n,(0,l.b4)(s._N,b)),n.removeClass(i.addWidgetPrefix("drag-action"))})}})}_getSeparator(e){return"headers"===e?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){const t=this._blockSeparatorView,i=this._columnsSeparatorView;this._animationColumnIndex=void 0,t&&t.hide(),"block"!==e&&i&&i.hide()}allowDrop(e){return this._columnsController.allowMoveColumn(this.addColumnIndexOffset(e.sourceColumnIndex),this.addColumnIndexOffset(e.targetColumnIndex),e.sourceLocation,e.targetLocation)}drag(e){const{sourceIndex:t}=e,{sourceLocation:i}=e,{sourceColumnElement:n}=e,o=this._columnHeadersView,s=this._rowsView;n&&(n.addClass(this.addWidgetPrefix(w.N.draggableColumn)),"headers"===i&&(o&&o.toggleDraggableColumnClass(t,!0),s&&s.toggleDraggableColumnClass(t,!0)))}dock(e){const t=this,i=(0,m.Gv)(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:n}=e,{targetLocation:o}=e,s=t._getSeparator(o),r=i>=0;t._columnHeadersView.element().find(".dx-header-row").toggleClass(t.addWidgetPrefix("drop-highlight"),"headers"!==n&&"headers"===o&&!r),s&&(t.allowDrop(e)&&r?"group"===o||"columnChooser"===o?function(){t._animationColumnIndex!==i&&(t.hideSeparators(),s.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),t._animationColumnIndex=i,s.show(o))}():(t.hideSeparators("block"),t._tablePositionController.update(e.posY),s.moveByX(e.posX-s.width()),s.show()):t.hideSeparators())}addColumnIndexOffset(e){const t=this._columnsController.getColumnIndexOffset();return(0,m.Gv)(e)?Object.assign({},e,{columnIndex:e.columnIndex+t}):e+t}drop(e){const{sourceColumnElement:t}=e;if(t&&(t.removeClass(this.addWidgetPrefix(w.N.draggableColumn)),this._columnHeadersView.toggleDraggableColumnClass(e.sourceIndex,!1),this._rowsView.toggleDraggableColumnClass(e.sourceIndex,!1),this._columnHeadersView.element().find(".dx-header-row").removeClass(this.addWidgetPrefix("drop-highlight"))),this.allowDrop(e)){const t=this._getSeparator(e.targetLocation);t&&t.hide(),this._columnsController.moveColumn(this.addColumnIndexOffset(e.sourceColumnIndex),this.addColumnIndexOffset(e.targetColumnIndex),e.sourceLocation,e.targetLocation)}}}const k=e=>class extends e{_needUpdateRowHeight(e){const t=this.option("wordWrapEnabled"),i=this._columnsResizerController.isResizing();return super._needUpdateRowHeight.apply(this,arguments)||e>0&&!!t&&!!i}},B=e=>class extends e{renderFocusOverlay(){if(!this._columnsResizerController.isResizing())return super.renderFocusOverlay.apply(this,arguments)}},H={views:{columnsSeparatorView:R,blockSeparatorView:O,draggingHeaderView:T,trackerView:A},controllers:{draggingHeader:D,tablePosition:P,columnsResizer:F},extenders:{views:{rowsView:k},controllers:{editorFactory:B}}}},15551:function(e,t,i){i.d(t,{S:function(){return z}});i(82438),i(12266),i(99819),i(50020);var n=i(59981),o=i(24906),s=i(96004),r=i(74567),l=i(39889),a=i(92324),d=i(35754),u=i(85563),c=i(26228),h=i(66703),p=i(63825),g=i(50172),m=i(96283),_=i(5548),C=i(29018);i(34840);const f=(e,t)=>e.length===t.length&&!Object.keys(e).some(i=>e[i]!==t[i]),v=(e,t)=>(0,l.RL)(e,t,{maxDepth:4}),x=(e,t,i,n)=>{let o=e,s=t;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const l=n(t,o);return l||(o=t,s=i(...o)),s}},w={compareType:"reference"},y=function(e){let{compareType:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,i=null;return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];if(!i){const n=e(...o);return i=x(o,n,e,"reference"===t?f:v),n}return i(...o)}};var b=i(25831),I=i(20338),S=i(68055);const A=e=>void 0!==e.attr(S.iw.dragCell),E=e=>[`[${S.iw.ariaColIndex}="${e+1}"]`,`:not([${S.iw.dragCell}])`,":not([aria-hidden=true])"].join(""),R=(e,t)=>e.filter(E(t)).first(),O={isDragCell:A,getCellToFocus:R};var T=i(7064),V=i(28170),F=i(98026);class P extends T.E{constructor(){super(...arguments),this._needNavigationToCell=!1}init(){var e,t;(this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnResizerController=this.getController("columnsResizer"),this._rowsView=this.getView("rowsView"),super.init(),this._memoFireFocusedCellChanged=y(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=y(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.focusOutHandlerContext=this.focusOutHandlerContext??this.focusOutHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._canceledCellPosition=null,this.isKeyboardEnabled())?(m.rK(),null===(e=this._editorFactory)||void 0===e||e.focused.add(this.focusedHandlerWithContext)):(m.WX(),null===(t=this._editorFactory)||void 0===t||t.focused.remove(this.focusedHandlerWithContext));this.initDocumentHandlers()}dispose(){super.dispose(),this._resetFocusedView(),o.A.off(a.A.getDocument(),(0,r.b4)(s.A.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),m.WX()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable()&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}focusinHandler(e){const t=(0,u.A)(e.target),i=(0,u.A)(e.relatedTarget).closest(this._rowsView.element()).length,n=t.is("a");if(e.relatedTarget&&n&&!i&&this._isEventInCurrentGrid(e)){let i=this._getFocusedCell();i=(0,V.c9)(i)?i:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),t.closest(i).length||(e.preventDefault(),o.A.trigger(i,"focus"))}const s=t.is("td"),r=(this.option("focusedRowIndex")??-1)<0;s&&r&&this._updateFocusedCellPosition(t)}focusOutHandler(e){const{relatedTarget:t}=e;this._toggleInertAttr(!1),t&&!this.isInsideFocusedView((0,u.A)(t))&&(this._isNeedFocus=!1,this._isHiddenFocus=!1,this._isNeedScroll=!1)}subscribeToRowsViewFocusEvent(){var e;const t=null===(e=this._rowsView)||void 0===e?void 0:e.element();o.A.on(t,"focusin",this.focusinHandlerContext),o.A.on(t,"focusout",this.focusOutHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e;const t=null===(e=this._rowsView)||void 0===e?void 0:e.element();o.A.off(t,"focusin",this.focusinHandlerContext),o.A.off(t,"focusout",this.focusOutHandlerContext)}resizeCompleted(){var e;if(this.navigationToCellInProgress()&&this._resizeController.resetLastResizeTime(),!this.needToRestoreFocus)return;const t=(null===(e=this._rowsView)||void 0===e||null===(e=e.getScrollable())||void 0===e?void 0:e.scrollLeft())??0;this._columnsController.isNeedToRenderVirtualColumns(t)||(this.needToRestoreFocus=!1,this.focusFirstOrLastCell())}renderCompleted(e){const t=this._rowsView.element(),i=!e||"refresh"===e.changeType,n=this._focusedView&&this._focusedView.name===this._rowsView.name;let o=!1;const s=e&&("append"===e.changeType||"prepend"===e.changeType),r=(0,u.A)(a.A.getRootNode(t.get&&t.get(0))),l=r.find(":focus"),d=this._isFocusedElementCorrect(l,t,e);if(this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),n&&d&&(o=this._isNeedFocus?!s:this._isHiddenFocus&&i&&!(null!==e&&void 0!==e&&e.virtualColumnsScrolling),o)){var c;const t=!(null===e||void 0===e||null===(c=e.event)||void 0===c||!c.type),i=(null===e||void 0===e?void 0:e.virtualColumnsScrolling)&&t;this._updateFocus(!0,i)}}_isFocusedElementCorrect(e,t,i){if(e.length&&!e.closest(t).length)return!1;if(!e.length&&null!==i&&void 0!==i&&i.virtualColumnsScrolling){var n;const e=(null===(n=this._focusedCellPosition)||void 0===n?void 0:n.columnIndex)??-1;return this._isColumnRendered(e)}return!0}initHandlers(){this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),super.initHandlers()}initDocumentHandlers(){const e=a.A.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(e=>{var t;const i=(0,u.A)(e.event.target),n=`.${this.addWidgetPrefix(S.a0)}`,o=`.${this.addWidgetPrefix(S.D)}`,s=`.${S.OQ}`,r=!!i.closest(n).length&&!(0,_.A1)(i);if(r)return void e.event.preventDefault();const l=this._isEventInCurrentGrid(e.event)&&!!i.closest(o).length,a=!!i.closest(s).length,d=!(null===(t=this._columnResizerController)||void 0===t||!t.isResizing());if(!l&&!a&&!d){const e=!this._focusedView||0===i.closest(this._focusedView.element()).length;e&&this._resetFocusedCell(!0),this._resetFocusedView()}}),o.A.off(e,(0,r.b4)(s.A.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&o.A.on(e,(0,r.b4)(s.A.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){const e=this._getRowsViewElement(),t=!this._dataController.getVisibleRows().length;t&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){const e=(0,V.Fr)()?n.U:s.A.down,t=this._getRowsViewElement();this._pointerEventAction&&o.A.off(t,(0,r.b4)(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){const e=(0,V.Fr)()?n.U:s.A.down,t=this._getRowsViewElement(),i=`.${b.sN} > td, .${b.sN}`;o.A.on(t,(0,r.b4)(e,"dxDataGridKeyboardNavigation"),i,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}isRowFocusType(){return this.focusType===S.dR}isCellFocusType(){return this.focusType===S.l0}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType=S.dR)}setCellFocusType(){this.focusType=S.l0}executeTabKey(e,t){const i=this._editingController.isEditing(),n=e.shift?"previous":"next",o=e.originalEvent.target,{editingOptions:s,isLastValidCell:r}=t;let l=t.isOriginalHandlerRequired;if(s&&o&&!l)if(i){if(!this._editingCellTabHandler(e,n))return}else this._targetCellTabHandler(e,n)&&(l=!0);if(l){const e=this._getFocusedCell(),t=e.is(S.DT);return r&&!t&&this._toggleInertAttr(!0),this._editorFactory.loseFocus(),void(this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell()))}e.originalEvent.preventDefault()}keyDownHandler(e){var t;let i=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;let n=this.processOnKeyDown(e);const o=null===(t=this._editingController)||void 0===t?void 0:t.isEditing(),{originalEvent:s}=e;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!S.lW.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!n){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,o),n=!0;break;case"upArrow":case"downArrow":e.ctrl?m.sf("rowsView",this,s):this._upDownKeysHandler(e,o),n=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),n=!0;break;case"space":n=this._spaceKeyHandler(e,o);break;case"A":(0,r.By)(e.originalEvent)?(this._ctrlAKeyHandler(e,o),n=!0):n=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e),n=!0;break;case"enter":this._enterKeyHandler(e,o),n=!0;break;case"escape":n=this._escapeKeyHandler(e,o);break;case"F":(0,r.By)(e.originalEvent)?(this._ctrlFKeyHandler(e),n=!0):n=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),n=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(n=this._beginFastEditing(s,!0));break;case"home":case"end":this.homeOrEndKeyHandler(e)}n||this._beginFastEditing(s)||(this._isNeedFocus=!1,this._isNeedScroll=!1,i=!1),i&&s.stopPropagation()}}_closeEditCell(){const e=(0,h.cY)();return setTimeout(()=>{this._editingController.closeEditCell().always(e.resolve)}),e}_leftRightKeysHandler(e,t){const i=this.getVisibleRowIndex(),{originalEvent:n}=e,o=this._focusedView&&this._focusedView.getRow(i),s=this._getDirectionCodeByKey(e.keyName),r=this._isFastEditingStarted(),l=(!t||r)&&(0,V.Xy)(o);if(!l)return;null===n||void 0===n||n.preventDefault(),this.setCellFocusType(),r&&this._closeEditCell();const a=()=>{const e=this._getNextCell(s);(0,V.c9)(e)&&this._arrowKeysHandlerFocusCell(n,e,s)};this._isVirtualColumnRender()?this._processVirtualHorizontalPosition(s,e).done(a):a()}isInsideMasterDetail(e){const t=e.closest(`.${S.B6}`);return!!t.get(0)&&this.elementIsInsideGrid(t)&&!e.is(t)}_upDownKeysHandler(e,t){var i,n;const o=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(o),r=e.originalEvent,l="upArrow"===e.keyName,a=this._dataController.dataSource(),d=null===(i=this._editingController)||void 0===i||null===(n=i.isEditRowByIndex)||void 0===n?void 0:n.call(i,o),c=this._isFastEditingStarted(),h=this.isInsideMasterDetail((0,u.A)(null===r||void 0===r?void 0:r.target)),g=(!d||!t||c)&&s&&!(0,V.D2)(s)&&!h;if(g){if(c&&this._closeEditCell(),!this._navigateNextCell(r,e.keyName)&&this._isVirtualRowRender()&&l&&a&&!a.isLoading()){const e=(0,p.P$)(s),t=this._focusedCellPosition.rowIndex-1;this._scrollBy(0,-e,t,r)}r&&r.preventDefault()}}_pageUpDownKeyHandler(e){const t=this._dataController.pageIndex(),i=this._dataController.pageCount(),n=this.option("paging.enabled"),o="pageUp"===e.keyName,s=o?-1:1,r=this._rowsView.getScrollable();n&&!this._isVirtualScrolling()?(o?t>0:t<i-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(t+s),e.originalEvent.preventDefault()):r&&(0,p.Oq)(r.container())<(0,p.Oq)(r.$content())&&(this._scrollBy(0,(0,p.Oq)(r.container())*s),e.originalEvent.preventDefault())}_spaceKeyHandler(e,t){const i=this.getVisibleRowIndex(),n=(0,u.A)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!t){const t="row"===this._getElementType(n)&&this.isRowFocusType()&&(0,V.Xy)(n),o=n.hasClass(S.uc);return o&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(t||n.parent().hasClass(S.Z8)||n.hasClass(this.addWidgetPrefix(S.D)))&&(this._selectionController.changeItemSelection(i,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0)}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,t){t||e.alt||"multiple"!==this.option("selection.mode")||!this.option("selection.allowSelectAll")||(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_toggleInertAttr(e){}_tabKeyHandler(e){const t=e.shift?"previous":"next",i=e.originalEvent.target,n=this._focusedView&&this._focusedView.element(),o=this.option("editing"),s=(0,g.O9)(this._focusedCellPosition)&&!(0,g.RI)(this._focusedCellPosition),r=!(!e.shift||!s)&&this._isFirstValidCell(this._focusedCellPosition),l=!(e.shift||!s)&&this._isLastValidCell(this._focusedCellPosition),a=(0,u.A)(i).hasClass(this.addWidgetPrefix(S.D)),d=!s||r||l,c=o&&i&&!d,h=c&&a,p=c&&this._isVirtualColumnRender(),m={editingOptions:o,isLastValidCell:l,isOriginalHandlerRequired:d};this._handleTabKeyOnMasterDetailCell(i,t)||((0,u.A)(n).addClass(S.uZ),h&&this._resetFocusedCell(),p?this._processVirtualHorizontalPosition(t,e).done(()=>{this.executeTabKey(e,m)}):this.executeTabKey(e,m))}_getMaxVerticalOffset(){const e=this.component.getScrollable();return e?e.scrollHeight()-(0,p.Oq)(this._rowsView.element()):0}_getMaxHorizontalOffset(){const e=this.component.getScrollable();return e?e.scrollWidth()-(0,p.RG)(this._rowsView.element()):0}_isColumnRendered(e){const t=this._columnsController.getVisibleColumns(null,!0),i=this._columnsController.getVisibleColumns(),n=t[e];let o=!1;return n&&(o=i.indexOf(n)>=0),o}_isFixedColumn(e){const t=this._columnsController.getVisibleColumns(null,!0),i=t[e];return!!i&&!!i.fixed}_isColumnVirtual(e){const t=e-this._columnsController.getColumnIndexOffset(),i=this._columnsController.getVisibleColumns(),n=i[t];return!!n&&"virtual"===n.command}_processVirtualHorizontalPosition(e,t){const i=this.getColumnIndex();let n,o=0,s=!1;switch(e){case"next":case"nextInRow":{const t=this._getVisibleColumnCount();n=i+1,o=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===e?t===n||this._isFixedColumn(i)&&!this._isColumnRendered(n):t>n&&this._isFixedColumn(i)&&!this._isColumnRendered(n);break}case"previous":case"previousInRow":if(n=i-1,o=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===e){const e=this._columnsController.getColumnIndexOffset(),t=n<0&&0===e;s=t||this._isFixedColumn(i)&&!this._isColumnRendered(n)}else s=n>=0&&this._isFixedColumn(i)&&!this._isColumnRendered(n)}return s?(t.originalEvent.preventDefault(),this.scrollLeft(o)):(0,g.O9)(n)&&(0,g.O9)(e)&&this._isColumnVirtual(n)?(t.originalEvent.preventDefault(),this.scrollToNextCell(null,e)):(0,h.cY)().resolve().promise()}_editingCellTabHandler(e,t){const i=e.originalEvent.target,n=this._getCellElementFromTarget(i),o=n.is(S.DT);if(this.isOriginalTabHandlerRequired(n,e))return!1;if(o)return!this._targetCellTabHandler(e,t);this._updateFocusedCellPosition(n);const s=this._getElementType(i),r=this._getNextCellByTabKey(e.originalEvent,t,s),l=r.$cell;if(!l||this._handleTabKeyOnMasterDetailCell(l,t))return!1;let a=!1;const d=this._getColumnByCellElement(l);if(null!==d&&void 0!==d&&d.allowEditing){const e=l.parent(),t=this._getLocalRowIndex(e),i=this._dataController.items()[t],n=!i||"data"===i.rowType;a=this._editingController.allowUpdating({row:i})?n:null===i||void 0===i?void 0:i.isNewRow}a||this._closeEditCell();const u=this._focusCell(l,!r.isHighlighted);if(u){const t=this._isRowEditMode();!t&&a?this._editFocusedCell():this._focusInteractiveElement(l,e.shift)}return!0}isOriginalTabHandlerRequired(e,t){const i=t.originalEvent.target,n=this._getElementType(i),o=(0,V.vg)(e,!t.shift);return"cell"===n&&0!==o.length&&i!==o.get(0)}_targetCellTabHandler(e,t){const i=e.originalEvent;let n=i.target,o=this._getElementType(n),s=this._getCellElementFromTarget(n);if(!(0,V.qQ)(this,s)&&this.isOriginalTabHandlerRequired(s,e))return!0;void 0===this._focusedCellPosition.rowIndex&&(0,u.A)(n).hasClass(b.sN)&&this._updateFocusedCellPosition(s),this.isRowFocusType()&&(this.setCellFocusType(),"row"===o&&(0,V.Xy)((0,u.A)(n))&&(n=this.getFirstValidCellInRow((0,u.A)(n)),o=this._getElementType(n)));const r=this._getNextCellByTabKey(i,t,o);return s=r.$cell,!!s&&(s=this._checkNewLineTransition(i,s),!!s&&(this._focusCell(s,!r.isHighlighted),(0,V.qQ)(this,s)||this._focusInteractiveElement(s,e.shift),!1))}_getNextCellByTabKey(e,t,i){let n=this._getNextCell(t,i);const o=n&&this._fireFocusedCellChanging(e,n,!0);return!o||o.cancel?{}:(o.$newCellElement&&(n=o.$newCellElement),{$cell:n,isHighlighted:o.isHighlighted})}_checkNewLineTransition(e,t){const i=this.getVisibleRowIndex(),n=t.parent();if(i!==this._getRowIndex(n)){const i=this._getCellPosition(t),o=this._fireFocusedRowChanging(e,n);if(o.cancel)return;o.rowIndexChanged&&i&&(this.setFocusedColumnIndex(i.columnIndex),t=this._getFocusedCell())}return t}_enterKeyHandler(e,t){var i,n;const o=this.getVisibleRowIndex(),s=this._dataController.getKeyByRowIndex(o),r=null===(i=this._focusedView)||void 0===i?void 0:i.getRow(o),l=this._getFocusedCell(),a=this.option("grouping.allowCollapsing")&&(0,V.mY)(r),d=this.option("masterDetail.enabled")&&(null===l||void 0===l?void 0:l.hasClass(S.ID)),u=null===l||void 0===l?void 0:l.hasClass(S.R7);if(a||d){const e=this._dataController.items()[o],t=(null===e||void 0===e?void 0:e.data)&&!e.data.isContinuation;(0,g.O9)(s)&&t&&this._dataController.changeRowExpand(s)}else u?(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(s),this._updateFocusedCellPosition(l)):null!==(n=this.getMasterDetailCell(l))&&void 0!==n&&n.is(l)?l.is(":focus")&&this.focusFirstInteractiveElementInside(l):null!==l&&void 0!==l&&l.hasClass(S.OM)||this._processEnterKeyForDataCell(e,t)}focusFirstInteractiveElementInside(e){e.find(S.tD).get(0).focus()}_processEnterKeyForDataCell(e,t){const i=this._getEnterKeyDirection(e),n=this._allowEditingOnEnterKey();t||!n&&i?this._handleEnterKeyEditingCell(e.originalEvent).done(()=>{"next"===i||"previous"===i?this._targetCellTabHandler(e,i):"upArrow"!==i&&"downArrow"!==i||this._navigateNextCell(e.originalEvent,i)}):n&&this._startEditing(e)}_getEnterKeyDirection(e){const t=this.option("keyboardNavigation.enterKeyDirection"),i=e.shift;return"column"===t?i?"upArrow":"downArrow":"row"===t?i?"previous":"next":void 0}_handleEnterKeyEditingCell(e){const t=(0,h.cY)(),{target:i}=e,n=this._getCellElementFromTarget(i),s=this._isRowEditMode();return this._updateFocusedCellPosition(n),s?(this._focusEditFormCell(n),setTimeout(this._editingController.saveEditData.bind(this._editingController)),t.resolve()):(o.A.trigger((0,u.A)(i),"change"),this._closeEditCell().always(t.resolve),e.preventDefault()),t}_escapeKeyHandler(e,t){const i=this._getCellElementFromTarget(e.originalEvent.target);if(t)return this._updateFocusedCellPosition(i),this._isRowEditMode()?(this._focusEditFormCell(i),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault(),!0;const n=this.getMasterDetailCell(i);return!!n&&(this._focusCell(n),!0)}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){const t=this._headerPanel.getSearchTextEditor();t&&(t.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){const e=this._editingController.isEditing(),t=this.getVisibleRowIndex(),i=this._focusedView&&this._focusedView.getRow(t);!e&&(0,V.Xy)(i)&&this._startEditing()}_navigateNextCell(e,t){const i=this._getNextCell(t),n=this._getDirectionCodeByKey(t),o=i&&this._isCellValid(i),s=!!o&&this._arrowKeysHandlerFocusCell(e,i,n);return s}_arrowKeysHandlerFocusCell(e,t,i){const n="prevRow"===i||"nextRow"===i,o=this._fireFocusChangingEvents(e,t,n,!0);return t=o.$newCellElement,!(o.cancel||!this._isCellValid(t))&&(this._focus(t,!o.isHighlighted),!0)}_beginFastEditing(e,t){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(t)this._startEditing(e,S._7);else{const{key:t}=e,i=e.keyCode||e.which,n=t||i&&String.fromCharCode(i);!n||1!==n.length&&n!==S._7||this._startEditing(e,n)}return!0}isQuickNavigationPossible(){var e,t,i;const n=this.getVisibleRowIndex(),o=null===(e=this._rowsView)||void 0===e?void 0:e.getRow(n),s=this.option("dataRowTemplate"),r=null===(t=this._editingController)||void 0===t||null===(i=t.isEditRowByIndex)||void 0===i?void 0:i.call(t,n);return!r&&!s&&(0,V.Xy)(o)}getFirstOrLastColumnIndex(e){const t=this._columnsController.getVisibleColumns(null,!0),i=e=>this.isFocusableColumn(e);return e?t.findIndex(i):t.findLastIndex(i)}getFirstOrLastRowIndex(e){var t;const i=this._isVirtualScrolling()?this._dataController.totalItemsCount():null===(t=this._dataController.items(!0))||void 0===t?void 0:t.length;return e?0:i-1}calculateScrollLeft(e){var t;const i=e?0:this._getMaxHorizontalOffset(),n=null===(t=this._columnsController)||void 0===t?void 0:t.isNeedToRenderVirtualColumns(i);return n?i:-1}calculateScrollTop(e){const t=this._getMaxVerticalOffset(),i=t>0,n=this._isVirtualRowRender();return n&&i?e?0:t:-1}scrollTo(e){var t;const i=null===(t=this._rowsView)||void 0===t?void 0:t.getScrollable();null===i||void 0===i||i.scrollTo(e)}focusFirstOrLastCell(e){var t;const i=this._getFocusedCell();this._focusElement(i,!0,e),null===(t=this._rowsView.getScrollable())||void 0===t||t.update()}navigateToFirstOrLastRow(e,t){const i=this.calculateScrollTop(e),n=this.getFirstOrLastRowIndex(e),o=this.getFirstOrLastColumnIndex(e);this.silentUpdateFocusedCellPosition({columnIndex:o,rowIndex:n}),i>=0?(this._needNavigationToCell=!0,this.scrollTo({top:i})):this.navigateToFirstOrLastCell(e,t)}homeOrEndKeyHandler(e){if(!this.isQuickNavigationPossible())return;const t="home"===e.keyName,{originalEvent:i}=e;(0,r.By)(i)?this.navigateToFirstOrLastRow(t,i):this.navigateToFirstOrLastCell(t,i),i.preventDefault()}isFocusableColumn(e){return e.type!==S.ER}navigateToFirstOrLastCell(e,t){const i=this.getFirstOrLastColumnIndex(e);if(this._needNavigationToCell=!1,i<0)return;const n=this.calculateScrollLeft(e);this.silentUpdateFocusedCellPosition({columnIndex:i}),n>=0?(this.needToRestoreFocus=!0,this.scrollTo({left:n})):this.focusFirstOrLastCell(t)}isQuickNavigationToFirstCell(){var e;const t=this.getFirstOrLastColumnIndex(!0);return(null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex)===t}_pointerEventHandler(e){var t;const i=e.event||e;let n=(0,u.A)(i.currentTarget);const o=null===(t=this._rowsView)||void 0===t?void 0:t.element(),s=n.parent(),r=(0,u.A)(i.target).is(S.tD),l=!!(0,u.A)(i.target).closest(`.${S.FP}`).length,a=n.hasClass(S.ID);this._isEventInCurrentGrid(i)&&(l||!this._isCellValid(n,!r)&&!a?n.is("td")&&this._resetFocusedCell():(n=this._isInsideEditForm(n)?(0,u.A)(i.target):n,this._focusView(),(0,u.A)(o).removeClass(S.uZ),s.hasClass(S.xR)?(this._updateFocusedCellPosition(n),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this.getMasterDetailCell(n)?this._updateFocusedCellPosition(n):this._clickTargetCellHandler(i,n)))}_clickTargetCellHandler(e,t){const i=this._getColumnByCellElement(t),n=this._isCellEditMode(),o=this._editingController.isEditing();this.setCellFocusType();const s=this._fireFocusChangingEvents(e,t,!0);if(t=s.$newCellElement,s.cancel)this.setRowFocusType(),this.setFocusedRowIndex(s.prevRowIndex),o&&n&&this._closeEditCell();else{if(s.resetFocusedRow)return void this._focusController._resetFocusedRow();if(s.rowIndexChanged&&(t=this._getFocusedCell()),s.isHighlighted||n||this.setRowFocusType(),this._updateFocusedCellPosition(t),this._allowRowUpdating()&&n&&i&&i.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{t=this._getFocusedCell();const n=e&&(0,u.A)(e.target).closest(`${S.Jb}, td`),r=n&&n.not(t).is(S.Jb),l=!(null!==i&&void 0!==i&&i.command)&&o&&t.hasClass(b.su),a=!l&&(!s.isHighlighted||r);this._focus(t,a,r)}}}_allowRowUpdating(){const e=this.getVisibleRowIndex(),t=this._dataController.items()[e];return this._editingController.allowUpdating({row:t},"click")}focus(e){let t;const i=this.option("focusedRowEnabled"),n=this._isCellElement((0,u.A)(e));e||(t=`.${this.addWidgetPrefix(S.D)} .dx-row[tabindex]`,i||(t+=`, .${this.addWidgetPrefix(S.D)} .dx-row > td[tabindex]`),e=this.component.$element().find(t).first()),e&&this._focusElement((0,u.A)(e),n)}getFocusedView(){return this.getView("rowsView")}setupFocusedView(){this.isKeyboardEnabled()&&!(0,g.O9)(this._focusedView)&&this._focusView()}_focusElement(e,t,i){const n=(0,u.A)(this._getRowsViewElement()),o=e.closest(n),s=this.isRowFocusType();let r={};!o.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||(0,V.mY)(e))&&(this.setCellFocusType(),r=this._fireFocusChangingEvents(i,e,!0,t),e=r.$newCellElement,s&&!r.isHighlighted&&this.setRowFocusType()),r.cancel||(this._focus(e,!r.isHighlighted),("row"!==this._getElementType(e)||(0,V.Ti)(e))&&this._focusInteractiveElement(e)))}isInsideFocusedView(e){var t;return 0!==e.closest(null===(t=this._focusedView)||void 0===t?void 0:t.element()).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,t){if(!e)return;const i=(0,V.vg)(e,t);I.A.focusAndSelectElement(this,i)}_focus(e,t,i){const n=e&&!e.hasClass(b.sN)?e.closest(`.${b.sN}`):e;if(n&&(0,V.jv)(n))return;const s=this._focusedView,r=s&&s.element();let l;this._isHiddenFocus=t;const a=(0,V.mY)(n)||(0,V.x0)(n)||this.isRowFocusType();a?(l=n,s&&this.setFocusedRowIndex(this._getRowIndex(n))):this._isCellElement(e)&&(l=e,this._updateFocusedCellPosition(e)),l&&(r&&r.find(".dx-row[tabindex], .dx-row > td[tabindex]").filter((e,t)=>I.A.isElementInCurrentGrid(this,(0,u.A)(t))).not(l).removeClass(S.iK).removeClass(S.bF).removeAttr("tabindex"),o.A.one(l,"blur",e=>{e.relatedTarget&&l.removeClass(S.iK).removeClass(S.bF)}),i||(this._applyTabIndexToElement(l),o.A.trigger(l,"focus")),t?(l.addClass(S.iK),a&&e.addClass(S.iK)):this._editorFactory.focus(l))}_updateFocus(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())return void this._editingController._focusEditingCell();let i=this._getFocusedCell();const n=this._editingController.isEditing();if(!this.getMasterDetailCell(i)||this._isRowEditMode()){if(this._hasSkipRow(i.parent())){const e=this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow";i=this._getNextCell(e)}if((0,V.c9)(i))if(i.is("td")||i.hasClass(this.addWidgetPrefix(S.VQ))){const o=i.is(S.DT),s=i.find(":focus"),r=(0,V.c9)(s),l=this._getColumnByCellElement(i);if(!e&&o||!this._editorFactory.focus())r||!this._isNeedFocus&&!this._isHiddenFocus||this._focus(i,this._isHiddenFocus,t);else{if(o&&r)return void I.A.focusAndSelectElement(this,s);!r&&this._focus(i,!1,t)}!n||null!==l&&void 0!==l&&l.showEditorAlways||this._focusInteractiveElement.bind(this)(i)}else o.A.trigger(i,"focus")}})}_needFocusEditingCell(){const e=this._editingController.getEditMode()===b.eN,t=this._editingController.getEditMode()===b.yx,i=e&&this._editingController.hasChanges(),n=t&&this._editingController.isNewRowInEditMode(),o=this._getFocusedCell();return(0===o.children().length||o.find(b.gn).length>0)&&(i||n)}_updateFocusedCellPositionByTarget(e){var t;const i=this._getElementType(e);if("row"===i&&(0,g.O9)(null===(t=this._focusedCellPosition)||void 0===t?void 0:t.columnIndex)){const t=(0,u.A)(e);this._focusedView&&(0,V.mY)(t)&&this.setFocusedRowIndex(this._getRowIndex(t))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_focusCell(e,t){if(this._isCellValid(e))return this._focus(e,t),!0}_focusEditFormCell(e){e.hasClass(S.B6)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var t;const i=this._getFocusedCell();(0,V.c9)(i)&&i.removeAttr("tabindex").removeClass(S.iK),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(t=this._focusedView)||void 0===t||t.renderFocusState({preventScroll:e})}restoreFocusableElement(e,t){const i=this;let n,s;const r=(0,g.O9)(e),l=this._rowsView.element(),{columnIndex:a}=i._focusedCellPosition,d=i._dataController.getRowIndexOffset();e=r?e:this._rowsView.getTopVisibleItemIndex()+d,r?(s=this._rowsView.getRow(e-d),n=i._fireFocusedRowChanging(t,s),!n.cancel&&n.rowIndexChanged&&(e=n.newRowIndex)):(i._editorFactory.loseFocus(),i._applyTabIndexToElement(l),o.A.trigger(l,"focus")),r&&n.cancel||i.setFocusedCellPosition(e,a),r&&i._updateFocus()}silentUpdateFocusedCellPosition(e){this._focusedCellPosition=Object.assign({},this._focusedCellPosition??{},e)}_getNewPositionByCode(e,t,i){let n,{columnIndex:o}=e,{rowIndex:s}=e;if(void 0===e.rowIndex&&"next"===i)return{columnIndex:0,rowIndex:0};switch(i){case"nextInRow":case"next":n=this._getVisibleColumnCount(),o<n-1&&"row"!==t&&this._hasValidCellAfterPosition({columnIndex:o,rowIndex:s})?o++:this._isLastRow(s)||"next"!==i||(o=0,s++);break;case"previousInRow":case"previous":o>0&&"row"!==t&&this._hasValidCellBeforePosition({columnIndex:o,rowIndex:s})?o--:s>0&&"previous"===i&&(s--,n=this._getVisibleColumnCount(),o=n-1);break;case"upArrow":s=s>0?s-1:s;break;case"downArrow":s=this._isLastRow(s)?s:s+1}return{columnIndex:o,rowIndex:s}}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e;const t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.rowIndex;return!(0,g.O9)(t)||t<0?-1:t-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e;const t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex;return(0,g.O9)(t)?t-this._columnsController.getColumnIndexOffset():-1}_isCellByPositionValid(e){const t=(0,u.A)(this._getCell(e));return this._isCellValid(t)}_isLastRow(e){const t=this._dataController;if(this._isVirtualRowRender())return e>=t.getMaxRowIndex();const i=Math.max(...t.items().map((e,t)=>!1!==e.visible?t:-1));return e===i}_isFirstValidCell(e){let t=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(t=t||!this._hasValidCellBeforePosition(e)),t}_hasValidCellBeforePosition(e){let{columnIndex:t}=e,i=!1;while(t>0&&!i){const n={columnIndex:--t,rowIndex:e.rowIndex};i=this._isCellByPositionValid(n)}return i}_hasValidCellAfterPosition(e){let{columnIndex:t}=e,i=!1;const n=this._getVisibleColumnCount();while(t<n-1&&!i){const n={columnIndex:++t,rowIndex:e.rowIndex};i=this._isCellByPositionValid(n)}return i}_isLastValidCell(e){const t=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:i}=e,n={columnIndex:t,rowIndex:i},o=this._dataController.getVisibleRows(),s=o&&o[i],r=this._isLastRow(i);if(!r)return!1;const l="group"===(null===s||void 0===s?void 0:s.rowType)||"groupFooter"===(null===s||void 0===s?void 0:s.rowType);return!!(l&&e.columnIndex>0)||(e.columnIndex===this._getVisibleColumnCount()-1||!this._isCellByPositionValid(n)&&this._isLastValidCell(n))}_isCellValid(e,t){if((0,V.c9)(e)){const i=e.parent(),n=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset(),o=this._getColumnByCellElement(e),s=this._getVisibleColumnCount(),r=this._editingController,l=(0,V.s9)(i),a=o&&o.showWhenGrouped,d=o&&!e.hasClass(S.ID)&&(0,V.Xy)(i),u=function(){return!l&&o&&(!(0,g.O9)(o.groupIndex)||a&&d)||parseInt(e.attr("colspan"),10)>1},c=O.isDragCell(e);if(c)return!1;if(this.getMasterDetailCell(e))return!0;if(s>n&&u()){const e=this._dataController.items(),n=this._rowsView.getRowIndex(i),s=e[n],l=r&&this._isCellEditMode()&&r.isEditing(),a=r&&r.isEditRow(n),d=a||l;return o.command?this._isLegacyNavigation()?!d&&"expand"===o.command:!l&&(a?"select"!==o.command:!d):(!l||!s||"data"===s.rowType)&&(!d||o.allowEditing||t)}}}getFirstValidCellInRow(e,t){const i=this,n=e.find("> td");let o,s;t=t||0;for(let r=t;r<n.length;++r)if(o=n.eq(r),i._isCellValid(o)){s=o;break}return s}_getNextCell(e,t,i){const n=i||this._focusedCellPosition,o=this.isRowFocusType(),s=o||["next","previous"].includes(e);let r,l;if(this._focusedView&&n){const i=this._getNewPositionByCode(n,t,e);r=(0,u.A)(this._getCell(i));const a="previous"===e?this._isFirstValidCell(i):this._isLastValidCell(i);if((0,V.c9)(r)&&!this._isCellValid(r)&&this._isCellInRow(i,s)&&!a&&(r=o?this.getFirstValidCellInRow(r.parent(),i.columnIndex):this._getNextCell(e,"cell",i)),l=(0,V.c9)(r)&&r.parent(),this._hasSkipRow(l)){const t=this._getRowIndex(l);if(this._isLastRow(t))return null;r=this._getNextCell(e,"row",{columnIndex:n.columnIndex,rowIndex:t})}return(0,V.c9)(r)?r:null}return null}_startEditing(e,t){const i=this._focusedCellPosition,n=this.getVisibleRowIndex(),o=this.getVisibleColumnIndex(),s=this._dataController.items()[n],r=this._columnsController.getVisibleColumns()[o];this._isAllowEditing(s,r)&&(this._isRowEditMode()?this._editingController.editRow(n):i&&this._startEditCell(e,t))}_isAllowEditing(e,t){return this._editingController.allowUpdating({row:e})&&t&&t.allowEditing}_editFocusedCell(){const e=this.getVisibleRowIndex(),t=this.getVisibleColumnIndex();return this._editingController.editCell(e,t)}_startEditCell(e,t){this._fastEditingStarted=(0,g.O9)(t);const i=this._editFocusedCell(),n=(0,g.uF)(i),o=this._isFastEditingStarted();if(!o||!n&&!i)return;const s=n&&t===S._7?"":t,r=n?i:(0,h.cY)().resolve(),l=this._rowsView.waitAsyncTemplates(!0);(0,h.z7)(r,l).done(()=>{this._editingCellHandler(e,s)})}_editingCellHandler(e,t){var i;const n=this._getFocusedCell().find(S.tD).eq(0),s=n.get(0);if(!s)return;const l=(0,r.lh)(e,{type:"keydown",target:s}),a=(0,r.lh)(e,{type:"keypress",target:s}),d=(0,r.lh)(e,{type:"input",target:s});if(d.originalEvent&&(d.originalEvent=(0,r.lh)(d.originalEvent,{data:t})),null===(i=s.select)||void 0===i||i.call(s),o.A.trigger(n,l),!l.isDefaultPrevented()&&(o.A.trigger(n,a),!a.isDefaultPrevented())){const e=c.A.mozilla?25:0;setTimeout(()=>{const e=this._getKeyPressInputValue(n,t);n.val(e);const i=n.closest(`.${S.qF}`);o.A.off(i,"focusout"),o.A.one(i,"focusout",()=>{o.A.trigger(n,"change")}),o.A.trigger(n,d)},e)}}_getKeyPressInputValue(e,t){const i=e.val();return"-"===t&&"-0"===i?"-0":t}_fireFocusChangingEvents(e,t,i,n){let o={};const s=this._getCellPosition(t)??{};return this.isCellFocusType()&&(o=this._fireFocusedCellChanging(e,t,n),o.cancel||(s.columnIndex=o.newColumnIndex,s.rowIndex=o.newRowIndex,n=o.isHighlighted,t=(0,u.A)(this._getCell(s)))),!o.cancel&&i&&t&&(o=this._fireFocusedRowChanging(e,t.parent()),o.cancel||(s.rowIndex=o.newRowIndex,o.isHighlighted=n)),o.$newCellElement=(0,u.A)(this._getCell(s)),o.$newCellElement.length||(o.$newCellElement=t),o}_fireFocusedCellChanging(e,t,i){const n=this.option("focusedColumnIndex"),o=this.option("focusedRowIndex"),s=this._getCellPosition(t),r=s?s.columnIndex:-1,l=s?s.rowIndex:-1,a=this._dataController.getVisibleRows(),d=this._columnsController.getVisibleColumns(),c={cellElement:t,prevColumnIndex:n,prevRowIndex:o,newColumnIndex:r,newRowIndex:l,rows:a,columns:d,event:e,isHighlighted:i||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",c),c.newColumnIndex===r&&c.newRowIndex===l||(c.$newCellElement=(0,u.A)(this._getCell({columnIndex:c.newColumnIndex,rowIndex:c.newRowIndex}))),c.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:r}),c}_fireFocusedCellChanged(e){const t=this._rowsView.getCellIndex(e),i=null===e||void 0===e?void 0:e.parent().data("options"),n=null===i||void 0===i?void 0:i.key;this._memoFireFocusedCellChanged(n,t)}_memoFireFocusedCellChanged(e,t){const i=this._getFocusedCell(),n=null===i||void 0===i?void 0:i.parent(),o=this.getRowIndex(),s=Math.min(this._getLocalRowIndex(n),this._dataController.items().length-1),r=this._editingController.isEditCell(s,t);if(r)return;const l=this._dataController.items()[s],a=this._columnsController.getVisibleColumns()[t];this.executeAction("onFocusedCellChanged",{cellElement:i?(0,d.cc)(i):void 0,columnIndex:t,rowIndex:o,row:l,column:a})}_fireFocusedRowChanging(e,t){const i=this._getRowIndex(t),n=this.option("focusedRowIndex"),o=this._dataController.loadingOperationTypes(),s={rowElement:t,prevRowIndex:n,newRowIndex:i,event:e,rows:this._dataController.getVisibleRows(),cancel:!1},r=o.sorting||o.grouping||o.filtering||o.paging;return!this._dataController||this._dataController.isLoading()&&r?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),s.cancel||s.newRowIndex===i||(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var e;const t=this.option("focusedRowEnabled"),i=this.option("focusedRowKey"),n=null===(e=this._focusController)||void 0===e?void 0:e.getFocusedRowIndexByKey(i);!t||(0,g.O9)(i)&&n<0||this._memoFireFocusedRowChanged(i,n)}_memoFireFocusedRowChanged(e,t){const i=t-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:t<0?void 0:this._rowsView.getRowElement(i),rowIndex:t,row:t<0?void 0:this._dataController.getVisibleRows()[i]})}_isEventInCurrentGrid(e){return I.A.isElementInCurrentGrid(this,(0,u.A)(e.target))}_isRowEditMode(){const e=this._editingController.getEditMode();return e===b.cy||e===b.oX}_isCellEditMode(){const e=this._editingController.getEditMode();return e===b.eN||e===b.yx}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_applyTabIndexToElement(e){const t=this.option("tabIndex")??0;e.attr("tabindex",t)}_getCell(e){if(this._focusedView&&e){const t=this._dataController.getRowIndexOffset(),i=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],n=i&&i.fixed?this._getFixedColumnIndexOffset(i):this._columnsController.getColumnIndexOffset(),o=e.rowIndex>=0?e.rowIndex-t:-1,s=e.columnIndex>=0?e.columnIndex-n:-1;return this._focusedView.getCell({rowIndex:o,columnIndex:s})}}_getRowIndex(e){let t=this._getLocalRowIndex(e);return t>=0&&(t+=this._dataController.getRowIndexOffset()),t}_getLocalRowIndex(e){const t=this._rowsView.getRowIndex(e);return t}getCellIndex(e,t){return this._rowsView.getCellIndex(e,t)}_hasSkipRow(e){const t=e&&e.get(0);return t&&"none"===t.style.display}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){let t;switch(e){case"upArrow":t="prevRow";break;case"downArrow":t="nextRow";break;case"leftArrow":t=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":t=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return t}_isVirtualScrolling(){const e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e}_isVirtualRowRender(){return this._isVirtualScrolling()||I.A.isVirtualRowRendering(this)}_scrollBy(e,t,i,n){const o=this,s=this._rowsView.getScrollable();if(o._focusedCellPosition){const e=function(){s.off("scroll",e),setTimeout(o.restoreFocusableElement.bind(o,i,n))};s.on("scroll",e)}return s.scrollBy({left:e,top:t})}_isInsideEditForm(e){const t=(0,u.A)(e).closest(`.${this.addWidgetPrefix(b.BL)}`);return t.length&&this.elementIsInsideGrid(t)}getMasterDetailCell(e){const t=(0,u.A)(e).closest(`.${S.B6}`);return t.length&&this.elementIsInsideGrid(t)?t:null}_processNextCellInMasterDetail(e,t){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,t){if(this.getMasterDetailCell(e)){this._updateFocusedCellPosition((0,u.A)(e),t);const i=this._getNextCell(t,"row");return this._processNextCellInMasterDetail(i,(0,u.A)(e)),!0}return!1}_getElementType(e){return(0,u.A)(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,t){const{columnIndex:i}=e,n=this._getVisibleColumnCount();return t?i>=0&&i<=n-1:i>0&&i<n-1}_isCellElement(e){return e.length&&"TD"===e[0].tagName}_getCellElementFromTarget(e){const t=this._getElementType(e),i=(0,u.A)(e);let n;return n="cell"===t?i.closest(`.${b.sN} > td`):i.children().not(`.${S.ID}`).first(),n}_getRowsViewElement(){var e;return null===(e=this._rowsView)||void 0===e?void 0:e.element()}_processCanceledEditCellPosition(e,t){if(this._canceledCellPosition){const i=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===t;return this._canceledCellPosition=null,i}}updateFocusedRowIndex(){const e=this._dataController,t=this.getVisibleRowIndex(),i=e.items(),n=i.length?i.length-1:-1,o=e.getRowIndexOffset();n>=0&&t>n&&this.setFocusedRowIndex(n+o)}needNavigationToCell(){return this._needNavigationToCell}navigationToCellInProgress(){return this.needToRestoreFocus||this.needNavigationToCell()}}const D=e=>class extends e{_rowClick(e){const t=this._editingController.getEditRowIndex(),i=this._keyboardNavigationController.isKeyboardEnabled();t===e.rowIndex&&this._keyboardNavigationController.setCellFocusType();const n=((0,V.Fr)()||!i)&&this.option("focusedRowEnabled");n&&this._triggerPointerDownEventHandler(e,!i),super._rowClick.apply(this,arguments)}_triggerPointerDownEventHandler(e,t){const{originalEvent:i}=e.event;if(i){const n=(0,u.A)(i.target),o=this.getCellIndex(n),s=this._columnsController.getVisibleColumns()[o],l=this._dataController.items()[e.rowIndex];if(this._keyboardNavigationController._isAllowEditing(l,s)||t){const e=(0,r.lh)(i,{currentTarget:i.target});this._keyboardNavigationController._pointerEventHandler(e)}}}renderFocusState(e){if(super.renderFocusState(e),this._keyboardNavigationController.navigationToCellInProgress())return;const{preventScroll:t,pageSizeChanged:i}=e??{},n=this.element();n&&!(0,C["in"])(n)&&n.attr("tabindex",null),i&&this._keyboardNavigationController.updateFocusedRowIndex();let o=this._keyboardNavigationController.getVisibleRowIndex();(!(0,g.O9)(o)||o<0)&&(o=0);const s=this.getCellElements(o);this._keyboardNavigationController.isKeyboardEnabled()&&null!==s&&void 0!==s&&s.length&&this.updateFocusElementTabIndex(s,t)}updateFocusElementTabIndex(e,t){const i=e.eq(0).parent();if((0,V.mY)(i))this._keyboardNavigationController._applyTabIndexToElement(i);else{let t=this._keyboardNavigationController.getColumnIndex();(!(0,g.O9)(t)||t<0)&&(t=0),this._updateFocusedCellTabIndex(e,t)}}_updateFocusedCellTabIndex(e,t){const i=this._keyboardNavigationController,n=e?e.length:-1,o=function(e){const t=!!i.getMasterDetailCell(e),n=i._isCellValid(e);if(!t&&n&&i._isCellElement(e))return i._applyTabIndexToElement(e),i.setCellFocusType(),!0},s=O.getCellToFocus(e,t);if(s.length)o(s);else{n<=t&&(t=n-1);for(let i=t;i<n;++i)if(o((0,u.A)(e[i])))break}}renderDelayedTemplates(e){super.renderDelayedTemplates.apply(this,arguments),this.waitAsyncTemplates().done(()=>{this._renderFocusByChange(e)})}_renderFocusByChange(e){const{operationTypes:t,repaintChangesOnly:i}=e??{},{fullReload:n,pageSize:o}=t??{};if(!e||!i||n||o){const e=(0,V.TZ)(this);this.renderFocusState({preventScroll:e,pageSizeChanged:o})}}_renderCore(e){const t=super._renderCore.apply(this,arguments);return this._renderFocusByChange(e),t}_editCellPrepared(e){var t;const i=this._getEditorInstance(e),n=null===(t=this._keyboardNavigationController)||void 0===t?void 0:t._isFastEditingStarted();i&&n&&this._handleEditingNavigationMode(i),super._editCellPrepared.apply(this,arguments)}_handleEditingNavigationMode(e){["downArrow","upArrow"].forEach(t=>{const i=e._supportedKeys()[t];e.registerKeyHandler(t,t=>{const n="true"===e._input().attr("aria-expanded");if(n)return i&&i.call(e,t)})}),e.registerKeyHandler("leftArrow",l.lQ),e.registerKeyHandler("rightArrow",l.lQ);const t=e.NAME===S.J7&&e.option("useMaskBehavior");t&&e.registerKeyHandler("enter",l.lQ)}_getEditorInstance(e){const t=e.find(".dx-texteditor").eq(0);return I.A.getWidgetInstance(t)}_handleScroll(e){super._handleScroll(e),this._keyboardNavigationController.needNavigationToCell()&&this._keyboardNavigationController.navigateToFirstOrLastCell(this._keyboardNavigationController.isQuickNavigationToFirstCell())}init(){super.init(),this._resizeController=this.getController("resizing")}},k=e=>class extends e{editCell(e,t){if(this._keyboardNavigationController._processCanceledEditCellPosition(e,t))return!1;const i=super.editCell(e,t);return i&&this._keyboardNavigationController.setupFocusedView(),i}editRow(e){const t=this._keyboardNavigationController.getVisibleColumnIndex(),i=this._columnsController.getVisibleColumns()[t];(i&&i.type||this.option("editing.mode")===b.oX)&&this._keyboardNavigationController._resetFocusedCell(),super.editRow(e)}addRow(e){return this._keyboardNavigationController.setupFocusedView(),this._keyboardNavigationController.setCellFocusType(),super.addRow.apply(this,arguments)}getFocusedCellInRow(e){let t=super.getFocusedCellInRow(e);const i=this._dataController.getRowIndexOffset(),n=this._keyboardNavigationController._focusedCellPosition.rowIndex-i;if(this._keyboardNavigationController.isKeyboardEnabled()&&n===e){const e=this._keyboardNavigationController._getFocusedCell();(0,V.c9)(e)&&!e.hasClass(S.OM)&&(t=e)}return t}_processCanceledEditingCell(){this.closeEditCell().done(()=>{this._keyboardNavigationController._updateFocus()})}closeEditCell(){const e=this._keyboardNavigationController;e._fastEditingStarted=!1;const t=super.closeEditCell.apply(this,arguments),i=this._getFocusedElement(),n=!!i.closest(`.${this.addWidgetPrefix(b.zy)}`).length;return n||e._updateFocus(),t}_getFocusedElement(){var e,t;const i=(0,u.A)(null===(e=(t=this.component).element)||void 0===e?void 0:e.call(t)),n=i.find(":focus");return n}_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,super._delayedInputFocus.apply(this,arguments)}_isEditingStart(){const e=super._isEditingStart.apply(this,arguments);if(e&&!this._keyboardNavigationController._isNeedFocus){const e=this._keyboardNavigationController._getFocusedCell();this._keyboardNavigationController._focus(e,!0)}return e}},B=e=>class extends e{_correctRowIndices(e){const t=this._keyboardNavigationController._focusedCellPosition;if(super._correctRowIndices.apply(this,arguments),t&&t.rowIndex>=0){const i=e(t.rowIndex);i&&(t.rowIndex+=i,this._editorFactoryController.refocus())}}getMaxRowIndex(){let e=this.items().length-1;const t=this.virtualItemsCount();if(t){const i=this.getRowIndexOffset();e+=i+t.end}return e}},H=e=>class extends e{_showHiddenCellsInView(e){let{viewName:t,$cells:i,isCommandColumn:n}=e;super._showHiddenCellsInView.apply(this,arguments),t===S.sQ&&!n&&i.each((e,t)=>{const i=(0,u.A)(t);(0,V.Pv)(i)&&i.attr("tabindex",0)})}_hideVisibleCellInView(e){let{viewName:t,$cell:i,isCommandColumn:n}=e;super._hideVisibleCellInView.apply(this,arguments),t===S.sQ&&!n&&(0,V.Pv)(i)&&i.removeAttr("tabindex")}_hideVisibleColumnInView(e){let{view:t,isCommandColumn:i,visibleIndex:n}=e;super._hideVisibleColumnInView({view:t,isCommandColumn:i,visibleIndex:n}),t.name===S.ae&&this._rowsView.renderFocusState({preventScroll:(0,V.TZ)(this)})}},z={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:P},extenders:{views:{rowsView:D},controllers:{editing:k,data:B,adaptiveColumns:H,keyboardNavigation:F.g}}}},16086:function(e,t,i){var n=i(77856);t.A=n.Ay},16480:function(e,t,i){i.d(t,{Nv:function(){return s},Xn:function(){return o},oc:function(){return n}});const n=2;var o;!function(e){e.Left="left",e.Right="right",e.Sticky="sticky"}(o||(o={}));const s={stickyColumn:"sticky-column",stickyColumnLeft:"sticky-column-left",stickyColumnRight:"sticky-column-right",stickyColumnBorderRight:"sticky-column-border-right",stickyColumnBorderLeft:"sticky-column-border-left",stickyColumns:"sticky-columns",firstHeader:"first-header",columnNoBorder:"column-no-border",groupRowContainer:"group-row-container",focusedFixedElement:"dx-focused-fixed-element",focused:"dx-focused",hidden:"dx-hidden"}},17413:function(e,t,i){i.d(t,{CI:function(){return S}});i(69375),i(82438),i(12266),i(99819),i(57327),i(50020),i(74786);var n=i(63027),o=i(85563),s=i(39889),r=i(44956),l=i(89214),a=i(63825),d=i(50172),u=i(98793),c=i(2308),h=i(67813),p=i(91125),g=i(29410);const m={columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,sortOrder:void 0,mode:"dragAndDrop",width:250,height:260,get title(){return n.A.format("dxDataGrid-columnChooserTitle")},get emptyPanelText(){return n.A.format("dxDataGrid-columnChooserEmptyText")},container:void 0}},_="column-chooser-mode-drag",C="column-chooser-mode-select",f=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],v=function(e,t){const i=[],n=e.isSelectMode(),o=e.option("columnChooser.selection.recursive");return t.length&&(0,l.__)(t,(e,t)=>{const s={text:t.caption,cssClass:t.cssClass,allowHiding:t.allowHiding,expanded:!0,id:t.index,disabled:!1===t.allowHiding,parentId:(0,d.O9)(t.ownerBand)?t.ownerBand:null},r=o&&t.hasColumns;n&&!r&&(s.selected=t.visible),i.push(s)}),i};class x extends p.Ay.ViewController{init(){super.init(),this._rowsView=this.getView("rowsView")}renderShowColumnChooserButton(e){const t=this,i=t.addWidgetPrefix("column-chooser-button"),n=t.option("columnChooser.enabled"),s=e.find(`.${i}`);let r;n?s.length?s.show():(r=(0,o.A)("<div>").addClass(i).appendTo(e),t._createComponent(r,u.A,{icon:"column-chooser",onClick(){t.getView("columnChooserView").showColumnChooser()},hint:t.option("columnChooser.title"),integrationOptions:{}})):s.hide()}getPosition(){var e;const t=this.option("columnChooser.position");return(0,d.O9)(t)?t:{my:"right bottom",at:"right bottom",of:null===(e=this._rowsView)||void 0===e?void 0:e.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}}class w extends g.n{optionChanged(e){"columnChooser"===e.name?(this._initializePopupContainer(),this.render(null,"full")):super.optionChanged(e)}publicMethods(){return["showColumnChooser","hideColumnChooser"]}_resizeCore(){}_initializePopupContainer(){const e=this,t=e.addWidgetPrefix("column-chooser"),i=e.element().addClass(t),n=e.option("columnChooser"),o=this._columnChooserController.getPosition(),s={visible:!1,shading:!1,showCloseButton:!0,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:t},toolbarItems:[{text:n.title,toolbar:"top",location:"before"}],position:o,width:n.width,height:n.height,rtlEnabled:e.option("rtlEnabled"),container:n.container,_loopFocus:!0};(0,d.O9)(this._popupContainer)?this._popupContainer.option(s):(e._popupContainer=e._createComponent(i,c.A,s),e._popupContainer.on("optionChanged",t=>{"visible"===t.name&&e.renderCompleted.fire()})),this.setPopupAttributes()}setPopupAttributes(){const e=this.isSelectMode(),t=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:n.A.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix(_),!e).toggleClass(this.addWidgetPrefix(C),e),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),e&&!t&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))}_renderCore(e){if(this._popupContainer){const t=!this.isSelectMode();this._columnChooserList&&"full"!==e?t&&this._updateItems():this._renderTreeView()}}_renderTreeView(){var e,t,i;const n=this,o=this._popupContainer.$content(),l=this.option("columnChooser"),a=this.isSelectMode(),u=(0,d.O9)(l.allowSearch)?l.allowSearch:null===(e=l.search)||void 0===e?void 0:e.enabled,c=(0,d.O9)(l.searchTimeout)?l.searchTimeout:null===(t=l.search)||void 0===t?void 0:t.timeout,p={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:u,searchTimeout:c,searchEditorOptions:null===(i=l.search)||void 0===i?void 0:i.editorOptions};if((0,r.X)(p,a?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)p.searchEnabled||(p.searchValue=""),this._columnChooserList.option(p),this._updateItems();else{this._columnChooserList=this._createComponent(o,h.A,p),this._updateItems();let e=0;this._columnChooserList.on("optionChanged",t=>{const i=t.component.getScrollable();e=i.scrollTop()}),this._columnChooserList.on("contentReady",t=>{(0,s.OX)(()=>{const i=t.component.getScrollable();i.scrollTo({y:e}),n.renderCompleted.fire()})})}}_prepareDragModeConfig(){const e=this.option("columnChooser");return{noDataText:e.emptyPanelText,activeStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(e,t,i){(0,o.A)(i).text(e.text).parent().addClass(e.cssClass).addClass("dx-column-chooser-item")}}}_prepareSelectModeConfig(){const e=this,t=this.option("columnChooser.selection")??{};let i=!1;return{selectByClick:t.selectByClick,selectNodesRecursive:t.recursive,showCheckBoxesMode:t.allowSelectAll?"selectAll":"normal",onSelectionChanged:t=>{if(i)return;const n=(e=>{const t=(e,i)=>e.reduce((e,i)=>(e.push(i),i.children.length&&t(i.children,e),e),i);return t(e,[])})(t.component.getNodes());t.component.beginUpdate(),i=!0,((e,t)=>{t.filter(e=>!1===e.itemData.allowHiding).forEach(t=>e.component.selectItem(t.key))})(t,n),t.component.endUpdate(),i=!1,e.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(t=>{t.forEach(t=>{const i=t.itemData.id,n=!1!==t.selected;e._columnsController.columnOption(i,"visible",n)})})(n),e.component.endUpdate(),this._isUpdatingColumnVisibility=!1}}}_updateItems(){const e=this.isSelectMode(),t=this._columnsController.getChooserColumns(e),i=v(this,t);this._columnChooserList.option("items",i)}_updateItemsSelection(e){const t=null===e||void 0===e?void 0:e.map(e=>this._columnsController.columnOption(e));this._columnChooserList.beginUpdate(),null===t||void 0===t||t.forEach(e=>{let{visible:t,index:i}=e;t?this._columnChooserList.selectItem(i):this._columnChooserList.unselectItem(i)}),this._columnChooserList.endUpdate()}_columnOptionChanged(e){super._columnOptionChanged(e);const{optionNames:t}=e,i=this.isSelectMode(),n=this.isColumnVisibilityOnlyUpdated(t),o=this._isUpdatingColumnVisibility&&n;if(!i||!this._columnChooserList||o)return;const s=(0,d.O9)(e.columnIndex)?[e.columnIndex]:e.columnIndices,r=f.some(e=>t[e]),l=r||e.changeTypes.columns&&t.all;l&&(this._updateItemsSelection(s),n||this._updateItems())}isColumnVisibilityOnlyUpdated(e){const t=Object.keys(e??{}).filter(e=>"length"!==e);return 1===t.length&&"visible"===t[0]}getColumnElements(){var e;const t=[],i=this.isSelectMode(),n=this._columnsController.getChooserColumns(i),s=null===(e=this._popupContainer)||void 0===e?void 0:e.$content(),r=null===s||void 0===s?void 0:s.find(".dx-treeview-node");return r&&n.forEach(e=>{const i=r.filter(`[data-item-id = '${e.index}']`),n=i.length?i.children(".dx-column-chooser-item").get(0):null;t.push(n)}),(0,o.A)(t)}getName(){return"columnChooser"}getColumns(){return this._columnsController.getChooserColumns()}allowDragging(e){const t=this._columnsController.isParentColumnVisible(e.index),i=!e.visible&&e.allowHiding;return this.isColumnChooserVisible()&&t&&i}allowColumnHeaderDragging(e){const t=!this.isSelectMode();return t&&this.isColumnChooserVisible()&&e.allowHiding}getBoundingRect(){var e;const t=null===(e=this._popupContainer)||void 0===e?void 0:e.$overlayContent();if(null!==t&&void 0!==t&&t.is(":visible")){const e=t.offset();return{left:e.left,top:e.top,right:e.left+(0,a.Ot)(t),bottom:e.top+(0,a.P$)(t)}}return null}showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show()}hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()}isColumnChooserVisible(){const e=this._popupContainer;return null===e||void 0===e?void 0:e.option("visible")}isSelectMode(){return"select"===this.option("columnChooser.mode")}hasHiddenColumns(){const e=this.option("columnChooser.enabled"),t=this.getColumns().filter(e=>!e.visible);return e&&t.length}}const y=e=>class extends e{_getToolbarItems(){const e=super._getToolbarItems();return this._appendColumnChooserItem(e)}_appendColumnChooserItem(e){const t=this,i=t.option("columnChooser.enabled");if(i){const i=function(){t.component.getView("columnChooserView").showColumnChooser()},n=function(e){(0,o.A)(e.element).addClass(t._getToolbarButtonClass(t.addWidgetPrefix("column-chooser-button")))},s=t.option("columnChooser.title"),r={widget:"dxButton",options:{icon:"column-chooser",onClick:i,hint:s,text:s,onInitialized:n,elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40};e.push(r)}return e}optionChanged(e){"columnChooser"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}},b=e=>class extends e{allowMoveColumn(e,t,i,n){const o="select"===this.option("columnChooser.mode"),s=o&&"columnChooser"===n;return!s&&super.allowMoveColumn(e,t,i,n)}},I=e=>class extends e{allowDragging(e){const t=!this._columnChooserView.isSelectMode(),i=this._columnChooserView.isColumnChooserVisible();return t&&i&&e.allowHiding||super.allowDragging(e)}},S={defaultOptions:()=>m,controllers:{columnChooser:x},views:{columnChooserView:w},extenders:{views:{headerPanel:y,columnHeadersView:I},controllers:{columns:b}}}},18574:function(e,t,i){i(69375),i(82438),i(50020);var n=i(50172),o=i(30816),s=i(38943),r=i(30090),l=i(11188);i(67337);t.A=(0,l.A)({format:function(e,t){const i=(0,n.Kg)(t)&&""!==t||(0,n.Qd)(t)||(0,n.Tn)(t),o=(0,n.kf)(e)||(0,n.$P)(e);return i&&o?(0,n.Tn)(t)?t(e):((0,n.Kg)(t)&&(t={type:t}),(0,n.kf)(e)?s.A.format(e,t):(0,n.$P)(e)?r.A.format(e,t):void 0):(0,n.O9)(e)?e.toString():""},getTimeFormat:function(e){return e?"longtime":"shorttime"},_normalizeFormat:function(e){return Array.isArray(e)?1===e.length?e[0]:function(t){return e.map(function(e){return r.A.format(t,e)}).join(" ")}:e},getDateFormatByDifferences:function(e,t){const i=[],n=t&&e.millisecond&&!(e.year||e.month||e.day);if(n){const e=function(e){return e.getSeconds()+e.getMilliseconds()/1e3+"s"};i.push(e)}else e.millisecond&&i.push("millisecond");if((e.hour||e.minute||!n&&e.second)&&i.unshift(this.getTimeFormat(e.second)),e.year&&e.month&&e.day)return t&&"month"===t?"monthandyear":(i.unshift("shortdate"),this._normalizeFormat(i));if(e.year&&e.month)return"monthandyear";if(e.year&&e.quarter)return"quarterandyear";if(e.year)return"year";if(e.quarter)return"quarter";if(e.month&&e.day){if(t){const e=function(e){return r.A.getMonthNames("abbreviated")[e.getMonth()]+" "+r.A.format(e,"day")};i.unshift(e)}else i.unshift("monthandday");return this._normalizeFormat(i)}if(e.month)return"month";if(e.day){if(t)i.unshift("day");else{const e=function(e){return r.A.format(e,"dayofweek")+", "+r.A.format(e,"day")};i.unshift(e)}return this._normalizeFormat(i)}return this._normalizeFormat(i)},getDateFormatByTicks:function(e){let t,i,n;if(e.length>1)for(t=o.A.getDatesDifferences(e[0],e[1]),n=1;n<e.length-1;n++)i=o.A.getDatesDifferences(e[n],e[n+1]),t.count<i.count&&(t=i);else t={year:!0,month:!0,day:!0,hour:e[0].getHours()>0,minute:e[0].getMinutes()>0,second:e[0].getSeconds()>0,millisecond:e[0].getMilliseconds()>0};const s=this.getDateFormatByDifferences(t);return s},getDateFormatByTickInterval:function(e,t,i){let s;const r=function(e,t,i){switch(t){case"year":case"quarter":e.month=i;case"month":e.day=i;case"week":case"day":e.hour=i;case"hour":e.minute=i;case"minute":e.second=i;case"second":e.millisecond=i}};i=(0,n.Kg)(i)?i.toLowerCase():i;const l=o.A.getDatesDifferences(e,t);e!==t&&function(e,t,i){!i.getMilliseconds()&&i.getSeconds()?i.getSeconds()-t.getSeconds()===1&&(e.millisecond=!0,e.second=!1):!i.getSeconds()&&i.getMinutes()?i.getMinutes()-t.getMinutes()===1&&(e.second=!0,e.minute=!1):!i.getMinutes()&&i.getHours()?i.getHours()-t.getHours()===1&&(e.minute=!0,e.hour=!1):!i.getHours()&&i.getDate()>1?i.getDate()-t.getDate()===1&&(e.hour=!0,e.day=!1):1===i.getDate()&&i.getMonth()?i.getMonth()-t.getMonth()===1&&(e.day=!0,e.month=!1):!i.getMonth()&&i.getFullYear()&&i.getFullYear()-t.getFullYear()===1&&(e.month=!0,e.year=!1)}(l,e>t?t:e,e>t?e:t),s=o.A.getDateUnitInterval(l),r(l,s,!0),s=o.A.getDateUnitInterval(i||"second"),r(l,s,!1),l[{week:"day"}[s]||s]=!0;const a=this.getDateFormatByDifferences(l);return a}})},20013:function(e,t,i){i.d(t,{J:function(){return l}});var n=i(85563),o=i(63825),s=i(50172),r=i(55258);const l=(e,t)=>{const i=e.offset();if(void 0===i)return;const l=(0,n.A)((0,r.zk)()),{top:a}=i;let d=0;const u=l.scrollTop(),c=(0,o.yV)(l);if((0,s.kf)(t)){if(t<a)return a-t;d=c-t+u}else{const t=a-u,i=c-t-(0,o.P$)(e);d=Math.max(t,i)}return.9*d}},20230:function(e,t,i){i.d(t,{N:function(){return n}});const n={draggableColumn:"draggable-column"}},20338:function(e,t,i){i.d(t,{A:function(){return $}});i(69375),i(82438),i(12266),i(99819),i(91020),i(57327),i(50020),i(34840),i(57147);var n=i(24906),o=i(59715),s=i(15045),r=i(29386),l=i(85563),a=i(39889),d=i(80028),u=i(66703),c=i(44956),h=i(89214),p=i(94360),g=i(63825),m=i(70781),_=i(50172),C=i(98064),f=i(27996),v=i(18574),x=i(50856),w=i(10391),y=i(47018),b=i(95506);const I=e=>"originalCallback"in e?e.originalCallback:e,S=e=>"columnIndex"in e?e.columnIndex??null:void 0,A=(e,t)=>{const i=I(e),n=I(t),o=S(e),s=S(t),r=i===n,l=void 0!==o,a=o===s;return r&&(!l||a)},E=(e,t)=>"string"===typeof e&&"string"===typeof t?e===t:"function"===typeof e&&"function"===typeof t&&A(e,t),R=(e,t)=>"function"===typeof e&&"function"===typeof t&&A(e,t),O="scrolling.legacyMode",T="scrolling.rowRenderingMode",V={year:e=>e&&e.getFullYear(),month:e=>e&&e.getMonth()+1,day:e=>e&&e.getDate(),quarter:e=>e&&Math.floor(e.getMonth()/3)+1,hour:e=>e&&e.getHours(),minute:e=>e&&e.getMinutes(),second:e=>e&&e.getSeconds()},F=function(){const e=arguments[1],t=this.calculateCellValue(e);if(!(0,_.O9)(t))return null;if(P(this.dataType)){const e=arguments[0];return V[e](t)}if("number"===this.dataType){const e=arguments[0];return Math.floor(Number(t)/e)*e}};function P(e){return"date"===e||"datetime"===e}const D=function(e){e.get(0).textContent=""},k=function(e){e=e||[];const t=(0,r.st)(e);for(let i=0;i<e.length;i++)e&&e[i]&&void 0!==e[i].isExpanded&&(t[i].isExpanded=e[i].isExpanded),e&&e[i]&&void 0!==e[i].groupInterval&&(t[i].groupInterval=e[i].groupInterval);return t},B=function(e,t){const i=v.A.format(e,t.format)||e&&e.toString()||"",n={value:e,valueText:t.getDisplayFormat?t.getDisplayFormat(i):i,target:t.target||"row",groupInterval:t.groupInterval};return t.customizeText?t.customizeText.call(t,n):n.valueText},H=function(e,t){const i=e.displayFormat||e.columnCaption&&t[`${e.summaryType}OtherColumn`]||t[e.summaryType];return B(e.value,{format:e.valueFormat,getDisplayFormat:t=>i?(0,m.GP)(i,t,e.columnCaption):t,customizeText:e.customizeText})},z=function(e){const t=e.data&&e.data(),i=t&&t.dxComponents,n=i&&i[0];return n&&t[n]},M=function(e,t,i){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!M(e[n],t[n],i))return!1;return!0}return(0,_.Tn)(e)&&e.columnIndex>=0&&(0,_.Tn)(t)&&t.columnIndex>=0?e.columnIndex===t.columnIndex&&(0,d.ao)(e.filterValue,void 0,i)===(0,d.ao)(t.filterValue,void 0,i)&&(0,d.ao)(e.selectedFilterOperation,void 0,i)===(0,d.ao)(t.selectedFilterOperation,void 0,i):(0,d.ao)(e,void 0,i)==(0,d.ao)(t,void 0,i)},N=e=>({index:e.index,columnIndex:e.columnIndex,x:e.x,y:e.y}),L=(e,t,i)=>{let n=!1;if(i&&(n=i(t)),!n){const i=N(t);e.push(i)}},W=e=>e.map(e=>{const t=e.visibleWidth||e.width;return(0,y.kf)(t)?parseFloat(t):50});function K(e){return Array.isArray(e)||(e=[e]),e.map((t,i)=>(0,_.Kg)(t)?{selector:t,isExpanded:i<e.length-1}:t)}var $={renderNoDataText(e){const t=this;if(e=e||this.element(),!e)return;const i=t.addWidgetPrefix("nodata");let n=e.find(`.${i}`).last();const o=this._dataController.isEmpty(),s=this._dataController.isLoading();n.length||(n=(0,l.A)("<span>").addClass(i)),n.parent().is(e)||n.appendTo(e),o&&!s?n.removeClass("dx-hidden").text(t._getNoDataText()):n.addClass("dx-hidden")},renderLoadPanel(e,t,i){const n=this;let o;n._loadPanel&&n._loadPanel.$element().remove(),o=n.option("loadPanel"),o&&("auto"===o.enabled?!i:o.enabled)?(o=(0,c.X)({shading:!1,message:o.text,container:t,zIndex:1e3},o),n._loadPanel=n._createComponent((0,l.A)("<div>").appendTo(t),x.A,o)):n._loadPanel=null},calculateLoadPanelPosition(e){const t=(0,l.A)((0,f.zk)());return(0,g.Oq)(e)>(0,g.Oq)(t)?{of:t,boundary:e,collision:"fit"}:{of:e}},getIndexByKey(e,t,i){let n=-1;if(void 0!==e&&Array.isArray(t)){i=arguments.length<=2?"key":i;for(let o=0;o<t.length;o++){const s=(0,_.O9)(i)?t[o][i]:t[o];if((0,a.RL)(e,s)){n=o;break}}}return n},combineFilters(e,t){let i=[];t=t||"and";for(let o=0;o<e.length;o++){var n;if(e[o]){if(1===(null===(n=e[o])||void 0===n?void 0:n.length)&&"!"===e[o][0]){if("and"===t)return["!"];if("or"===t)continue}i.length&&i.push(t),i.push(e[o])}}if(1===i.length&&(i=i[0]),i.length)return i},checkChanges(e,t){let i=0;for(let n=0;n<t.length;n++)e[t[n]]&&i++;return e.length&&e.length===i},equalFilterParameters:M,proxyMethod(e,t,i){e[t]||(e[t]=function(){const e=this._dataSource;return e?e[t].apply(e,arguments):i})},formatValue:B,getFormatOptionsByColumn:(e,t)=>({format:e.format,getDisplayFormat:e.getDisplayFormat,customizeText:e.customizeText,target:t,trueText:e.trueText,falseText:e.falseText}),getDisplayValue(e,t,i,n){if(e.displayValueMap&&void 0!==e.displayValueMap[t])return e.displayValueMap[t];if(e.calculateDisplayValue&&i&&"group"!==n)return e.calculateDisplayValue(i);const o=e.lookup&&e.type!==b.ML&&("group"!==n||!e.calculateGroupValue&&!e.calculateDisplayValue);return o?e.lookup.calculateCellValue(t):t},getGroupRowSummaryText(e,t){let i="(";for(let n=0;n<e.length;n++){const o=e[n];i+=(n>0?", ":"")+H(o,t)}return i+")"},getSummaryText:H,normalizeSortingInfo:k,getFormatByDataType(e){switch(e){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(e,t){let i=[];const n=e.dataField||e.name,o=w.A.getGroupInterval(e);return o?((0,h.__)(o,(s,r)=>{i.push(t?{selector:n,groupInterval:r,isExpanded:s<o.length-1}:F.bind(e,r))}),i):(t?i=[{selector:n,isExpanded:!1}]:(i=function(t){let i=e.calculateCellValue(t);return void 0!==i&&""!==i||(i=null),i},e.sortingMethod&&(i=[{selector:i,compare:e.sortingMethod.bind(e)}])),i)},equalSortParameters(e,t,i){if(e=k(e),t=k(t),Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!E(e[n].selector,t[n].selector)||e[n].desc!==t[n].desc||e[n].groupInterval!==t[n].groupInterval||!i&&Boolean(e[n].isExpanded)!==Boolean(t[n].isExpanded))return!1;return!0}return(!e||!e.length)===(!t||!t.length)},getPointsByColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=[],r=e.length;let l,a,d={left:0,top:0},u={width:0,height:0},c=n;for(let g=0;g<=r;g++){var h;g<r&&(l=e.eq(g),d=l.offset(),u=(0,p.N)(l.get(0)),a="rtl"===l.css("direction"));const n=d.left+u.width,m=d.top+u.height,_={index:c,columnIndex:c,item:null===(h=l)||void 0===h?void 0:h.get(0),x:i||a===(g===r)?d.left:n,y:i&&g===r?m:d.top};if(!i&&g>0){const i=e.eq(g-1).offset(),{width:n}=(0,p.N)(e[g-1]),r=a?i.left:i.left+n;if(i.top<_.y&&(_.y=i.top),o&&Math.round(r)!==Math.round(_.x)){const i=Object.assign({},_,{item:e[g-1],x:r});a?(_.isRightBoundary=!0,i.isLeftBoundary=!0):(_.isLeftBoundary=!0,i.isRightBoundary=!0),L(s,i,t)}}L(s,_,t),c++}return s},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(e,t){const i=(0,l.A)(e);if(!(0,_.O9)(t.value)||t.data&&t.data.isContinuation||t.row.isNewRow)D(i);else{const e=t.component.getView("rowsView");i.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,l.A)("<div>").addClass(t.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(i),e.setAria("label",t.value?e.localize("dxDataGrid-ariaCollapse"):e.localize("dxDataGrid-ariaExpand"),i)}}}),setEmptyText:D,isDateType:P,getSelectionRange(e){try{if(e)return{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd}}catch(t){}return{}},setSelectionRange(e,t){try{e&&e.setSelectionRange&&e.setSelectionRange(t.selectionStart,t.selectionEnd)}catch(i){}},focusAndSelectElement(e,t){const i=t.is(":focus");n.A.trigger(t,"focus");const o=e.option("editing.selectTextOnEditStart"),s=t.get(0);if(!i&&o&&t.is(".dx-texteditor-input")&&!t.is("[readonly]")){const e=z(t.closest(".dx-texteditor"));(0,u.z7)(e&&e._loadItemDeferred).done(()=>{s.select()})}},getWidgetInstance:z,getLastResizableColumnIndex(e,t){const i=e.some(e=>e&&!e.command&&!e.fixed&&!1!==e.allowResizing);let n;for(n=e.length-1;e[n];n--){const o=e[n],s=t&&t[n],r=!i||!1!==o.allowResizing;if(!o.command&&!o.fixed&&"adaptiveHidden"!==s&&r)break}return n},isElementInCurrentGrid(e,t){if(t&&t.length){const i=t.closest(`.${e.getWidgetContainerClass()}`).parent();return i.is(e.component.$element())}return!1},isVirtualRowRendering(e){const t=e.option(T),i="virtual"===e.option("scrolling.mode"),n="infinite"===e.option("scrolling.mode");return!(!1!==e.option(O)||!i&&!n)||"virtual"===t},getPixelRatio:e=>e.devicePixelRatio||1,getContentHeightLimit(e){return e.mozilla?8e6:15e6/this.getPixelRatio((0,f.zk)())},normalizeLookupDataSource(e){let t;return e.items?t=e.items:(t=e.dataSource,(0,_.Tn)(t)&&!C.A.isWrapped(t)&&(t=t({}))),(0,s.ho)(t)},getWrappedLookupDataSource(e,t,i){if(!t)return[];const n=this.normalizeLookupDataSource(e.lookup);if(e.calculateCellValue!==e.defaultCalculateCellValue)return n;const s=t.remoteOperations().groupPaging,r=e.displayField&&(0,_.Kg)(e.displayField);let l,a,d;const c=(e,t)=>{const i=t.skip??0,n=t.take?i+t.take:e.length;return e.slice(i,n)},h=Object.assign({},n,{__dataGridSourceFilter:i,load:h=>{const p=new u.cY;return(n=>{const o=K(r?[e.dataField,e.displayField]:e.dataField),h=new u.cY,p=l&&(!s||n.skip===d&&n.take===a);return p?h.resolve(c(l,n)):(d=n.skip,a=n.take,t.load({filter:i,group:o,take:s?n.take:void 0,skip:s?n.skip:void 0}).done(e=>{l=e,h.resolve(s?e:c(e,n))}).fail(h.fail)),h})(h).done(t=>{if(0===t.length)return void p.resolve([]);const i=this.combineFilters(t.flatMap(e=>e.key).map(t=>[e.lookup.valueExpr,t]),"or"),s=new o.A(Object.assign({},n,h,{filter:this.combineFilters([i,h.filter],"and"),paginate:!1}));s.load().done(p.resolve).fail(p.fail)}).fail(p.fail),p},key:e.lookup.valueExpr,byKey(t){const i=(0,u.cY)();return this.load({filter:[e.lookup.valueExpr,"=",t]}).done(e=>{i.resolve(e[0])}),i.promise()}});return h},logHeaderFilterDeprecatedWarningIfNeed(e){const t=e._logDeprecatedOptionWarning.bind(e);(0,_.O9)(e.option("headerFilter.allowSearch"))&&t("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),(0,_.O9)(e.option("headerFilter.searchTimeout"))&&t("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});const i="dxPivotGrid"===e.NAME?"dataSource.fields":"columns",n=e.option(i);if(!Array.isArray(n))return;const o=e=>{e.forEach(e=>{var n;const s=e.headerFilter||{};(0,_.O9)(s.allowSearch)&&t(`${i}[].headerFilter.allowSearch`,{since:"23.1",alias:`${i}[].headerFilter.search.enabled`}),(0,_.O9)(s.searchMode)&&t(`${i}[].headerFilter.searchMode`,{since:"23.1",alias:`${i}[].headerFilter.search.mode`}),null!==(n=e.columns)&&void 0!==n&&n.length&&o(e.columns)})};o(n)},getComponentBorderWidth(e,t){const i=e.option("showBorders")?Math.ceil((0,g.Ot)(t)-(0,g.hh)(t)):0;return i},isCustomCommandColumn(e,t){const i=e.filter(e=>e.type===t.type);return!!i.length},isEqualSelectors:E,isSelectorEqualWithCallback:R,getColumnWidths:W}},23581:function(e,t,i){i.d(t,{P:function(){return I},X:function(){return S}});i(69375),i(82438),i(2989),i(12266),i(57327),i(50020),i(34840),i(64727);var n=i(94041),o=i(45599),s=i(85563),r=i(240),l=i(39889),a=i(66703),d=i(44956),u=i(89214),c=i(50172),h=i(93821),p=i(95506),g=i(91125),m=i(20338),_=i(743),C=i(15045),f=i(69385);const v="_dataSourceChangedHandler",x="_getSpecificDataSourceOption",w="_normalizeDataSource",y=e=>class extends e{postCtor(){this.on("disposing",()=>{this._disposeDataSource()})}_refreshDataSource(){this._initDataSource(),this._loadDataSource()}_initDataSource(){let e,t,i=x in this?this[x]():this.option("dataSource");this._disposeDataSource(),i&&(i instanceof _.q?(this._isSharedDataSource=!0,this._dataSource=i):(e="_dataSourceOptions"in this?this._dataSourceOptions():{},t=this._dataSourceType?this._dataSourceType():_.q,i=(0,C.ho)(i,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new t((0,d.X)(!0,{},e,i))),w in this&&(this._dataSource=this[w](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())}_initDataController(){var e;const t=null===(e=this.option)||void 0===e?void 0:e.call(this,"_dataController"),i=this._dataSource;this._dataController=t||new f.A(i)}_addDataSourceHandlers(){v in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()}_addReadyWatcher(){this.readyWatcher=function(e){this._ready&&this._ready(!e)}.bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)}_addDataSourceChangeHandler(){const e=this._dataSource;this._proxiedDataSourceChangedHandler=function(t){this[v](e.items(),t)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)}_addDataSourceLoadErrorHandler(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)}_addDataSourceLoadingChangedHandler(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)}_loadDataSource(){const e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())}_loadSingle(e,t){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)}_isLastPage(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize}_isDataSourceLoading(){return this._dataSource&&this._dataSource.isLoading()}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)}getDataSource(){return this._dataSource||null}},b=function(e,t,i){const n=e._dataSource;if(n){if(void 0!==i){const o=e._getPagingOptionValue(t);if(o!==i){"pageSize"===t&&n.pageIndex(0),n[t](i),e._skipProcessingPagingChange=!0,e.option(`paging.${t}`,i),e._skipProcessingPagingChange=!1;const o=n.pageIndex();return e._isPaging="pageIndex"===t,n["pageIndex"===t?"load":"reload"]().done(()=>{e._isPaging=!1,e.pageChanged.fire(o)})}return(0,a.cY)().resolve().promise()}return n[t]()}return"pageIndex"===t&&void 0!==i?(0,a.cY)().resolve().promise():0};class I extends(y(g.Ay.Controller)){init(){this._items=[],this._cachedProcessedItems=null,this._columnsController=this.getController("columns"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._errorHandlingController=this.getController("errorHandling"),this._filterSyncController=this.getController("filterSync"),this._applyFilterController=this.getController("applyFilter"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._focusController=this.getController("focus"),this._headerFilterController=this.getController("headerFilter"),this._selectionController=this.getController("selection"),this._stateStoringController=this.getController("stateStoring"),this._validatingController=this.getController("validating"),this._isPaging=!1,this._currentOperationTypes=null,this._dataChangedHandler=e=>{this._currentOperationTypes=this._dataSource.operationTypes(),this._handleDataChanged(e),this._currentOperationTypes=null},this._columnsChangedHandler=this._handleColumnsChanged.bind(this),this._loadingChangedHandler=this._handleLoadingChanged.bind(this),this._loadErrorHandler=this._handleLoadError.bind(this),this._customizeStoreLoadOptionsHandler=this._handleCustomizeStoreLoadOptions.bind(this),this._changingHandler=this._handleChanging.bind(this),this._dataPushedHandler=this._handleDataPushed.bind(this),this._columnsController.columnsChanged.add(this._columnsChangedHandler),this._isLoading=!1,this._isCustomLoading=!1,this._repaintChangesOnly=void 0,this._changes=[],this.createAction("onDataErrorOccurred"),this.dataErrorOccurred.add(e=>this.executeAction("onDataErrorOccurred",{error:e})),this._refreshDataSource(),this.postCtor()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if("dataErrorOccurred"===e)return{stopOnFalse:!0}}publicMethods(){return["_disposeDataSource","beginCustomLoading","byKey","clearFilter","endCustomLoading","filter","getCombinedFilter","getDataByKeys","getDataSource","getKeyByRowIndex","getRowIndexByKey","getVisibleRows","keyOf","pageCount","pageIndex","pageSize","refresh","repaintRows","totalCount"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){const t=e.value!==e.previousValue;if(t){const t=this.store();t&&(t._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){const t=this;let i,n;function o(){e.handled=!0}if("dataSource"===e.name&&e.name===e.fullName&&this._handleDataSourceChange(e))o();else switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":o();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":o(),t.reset();break;case"paging":if(i=t.dataSource(),i&&(n=t._setPagingOptions(i),n)){const e=i.pageIndex();this._isPaging=n.isPageIndexChanged,i.load().done(()=>{this._isPaging=!1,t.pageChanged.fire(e)})}o();break;case"rtlEnabled":t.reset();break;case"columns":i=t.dataSource(),i&&i.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,i.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,t){if(!this._dataSource)return e;let i=e??this._dataSource.filter();const n=this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined();if(n){const e=this._calculateAdditionalFilter();i=e?m.A.combineFilters([e,i]):i}const o=this._dataSource.remoteOperations().filtering||t;return i=this._columnsController.updateFilter(i,o),i}waitReady(){return this._updateLockCount?(this._readyDeferred=new a.cY,this._readyDeferred):(0,a.z7)()}_endUpdateCore(){const e=this._changes;if(e.length){this._changes=[];const t=e.every(e=>e.repaintChangesOnly);this.updateItems(1===e.length?e[0]:{repaintChangesOnly:t})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var t;const i=this._columnsController,n=this._dataSource,{storeLoadOptions:o}=e;e.isCustomLoading&&!o.isLoadingAll||(o.filter=this.combinedFilter(o.filter),1===(null===(t=o.filter)||void 0===t?void 0:t.length)&&"!"===o.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),i.isDataSourceApplied()||i.updateColumnDataTypes(n),this._columnsUpdating=!0,i.updateSortingGrouping(n,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,o.sort=i.getSortDataSourceParameters(),o.group=i.getGroupDataSourceParameters(),n.sort(o.sort),n.group(o.group),o.sort=i.getSortDataSourceParameters(!n.remoteOperations().sorting),e.group=i.getGroupDataSourceParameters(!n.remoteOperations().grouping))}_handleColumnsChanged(e){const t=this,{changeTypes:i}=e,{optionNames:n}=e;let o,s,r;const l=function(e){var i,o;t._columnsController.columnsChanged.remove(l);const s=n.visible||t._columnsController.getVisibleColumns().some(e=>e.showEditorAlways);t.updateItems({repaintChangesOnly:!s&&t.option("repaintChangesOnly"),event:null===e||void 0===e||null===(i=e.changeTypes)||void 0===i?void 0:i.event,virtualColumnsScrolling:null===e||void 0===e||null===(o=e.changeTypes)||void 0===o?void 0:o.virtualColumnsScrolling})};if(i.sorting||i.grouping)t._dataSource&&!t._columnsUpdating&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload());else if(i.columns){s=t._columnsController.columnOption(e.columnIndex,"filterValues"),(n.filterValues||n.filterType&&Array.isArray(s)||n.filterValue||n.selectedFilterOperation||n.allowFiltering)&&(o=t._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(s)||void 0===e.columnIndex||(0,c.O9)(o)||!n.selectedFilterOperation||n.filterValue)&&(t._applyFilter(),r=!0));const i=["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"];if(t._needApplyFilter||m.A.checkChanges(n,i)||t._columnsController.columnsChanged.add(l),(0,c.O9)(n.visible)){const i=t._columnsController.columnOption(e.columnIndex);i&&((0,c.O9)(i.filterValue)||(0,c.O9)(i.filterValues))&&(t._applyFilter(),r=!0)}}r||!i.filtering||this._needApplyFilter||t.reload()}_handleDataChanged(e){const t=this,i=t._dataSource,n=t._columnsController;let o=!1;this._useSortingGroupingFromColumns=!1,i&&!t._isDataSourceApplying&&(t._isDataSourceApplying=!0,(0,a.z7)(t._columnsController.applyDataSource(i)).done(()=>{t._isLoading&&t._handleLoadingChanged(!1),o&&e&&e.isDelayed&&(e.isDelayed=!1),t._isDataSourceApplying=!1;const i=t._needApplyFilter;t._needApplyFilter=!1,i&&!t._isAllDataTypesDefined&&(()=>{const e=t._calculateAdditionalFilter();return e&&e.length})()?(h.A.log("W1005",t.component.NAME),t._applyFilter()):t.updateItems(e,!0)}).fail(()=>{t._isDataSourceApplying=!1}),t._isDataSourceApplying&&(o=!0,t._handleLoadingChanged(!0)),t._needApplyFilter=!t._columnsController.isDataSourceApplied(),t._isAllDataTypesDefined=n.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.dataErrorOccurred.fire(h.A.Error.apply(h.A,t))}_setPagingOptions(e){const t=this.option("paging.pageIndex"),i=this.option("paging.pageSize"),n=this.option("paging.enabled"),o=this.option("scrolling.mode"),s="infinite"===o,r="virtual"===o,l=n||r||s;let a=!1,d=!1,u=!1;return e.requireTotalCount(!s),void 0!==n&&e.paginate()!==l&&(e.paginate(l),a=!0),void 0!==i&&e.pageSize()!==i&&(e.pageSize(i),d=!0),void 0!==t&&e.pageIndex()!==t&&(e.pageIndex(t),u=!0),!!(a||d||u)&&{isPaginateChanged:a,isPageSizeChanged:d,isPageIndexChanged:u}}_getSpecificDataSourceOption(){const e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){const e=this,t=this._dataSource;super._initDataSource();const i=e._dataSource;if(e._useSortingGroupingFromColumns=!0,e._cachedProcessedItems=null,i){const t=e._setPagingOptions(i);this._isPaging=null===t||void 0===t?void 0:t.isPageIndexChanged,e.setDataSource(i)}else t&&e.updateItems()}_loadDataSource(){const e=this,t=e._dataSource,i=new a.cY;return(0,a.z7)(this._columnsController.refresh(!0)).always(()=>{t?t.load().done(function(){e._isPaging=!1,i.resolve.apply(i,arguments)}).fail(i.reject):i.resolve()}),i.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){const t=this._items,i="append"===e.changeType&&t.length>0?t[t.length-1]:null;return(0,c.O9)(null===i||void 0===i?void 0:i.dataIndex)?i.dataIndex+1:0}_processItems(e,t){const i=this,n=i.getRowIndexDelta(),{changeType:o}=t,s=i._columnsController.getVisibleColumns(null,"loadingAll"===o),r=this.getDataIndex(t),l={visibleColumns:s,dataIndex:r},a=[];return(0,u.__)(e,(e,t)=>{(0,c.O9)(t)&&(l.rowIndex=e-n,t=i._processItem(t,l),a.push(t))}),a}_processItem(e,t){return e=this._generateDataItem(e,t),e=this._processDataItem(e,t),e.dataIndex=t.dataIndex++,e}_generateDataItem(e,t){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,t){return e.values=this.generateDataValues(e.data,t.visibleColumns),e}generateDataValues(e,t,i){const n=[];let o;for(let s=0;s<t.length;s++){const r=t[s];o=i?void 0:null,r.command&&r.type!==p.ML||(r.calculateCellValue?o=r.calculateCellValue(e):r.dataField&&(o=e[r.dataField])),n.push(o)}return n}_applyChange(e){const t=this;"update"===e.changeType?t._applyChangeUpdate(e):t.items().length&&e.repaintChangesOnly&&"refresh"===e.changeType?t._applyChangesOnly(e):"refresh"===e.changeType&&t._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){const t=e.rowIndices.slice(0),i=this.getRowIndexDelta();t.sort((e,t)=>e-t);for(let n=0;n<t.length;n++){let o=t[n];e.allowInvisibleRowIndices&&(o+=i),o<0&&(t.splice(n,1),n--)}return t}_applyChangeUpdate(e){const t=this,{items:i}=e,n=t._getRowIndices(e),o=t.getRowIndexDelta(),s=t.option("repaintChangesOnly");let r,a=-1,d=0;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];const c=function(e,t,i){let n=e&&t&&(0,l.RL)(e.key,t.key);return n&&i&&(n=e.rowType===t.rowType&&("detail"!==t.rowType||e.isEditing===t.isEditing)),n};(0,u.__)(n,(n,l)=>{let u;if(l+=d+o,a===l)return;a=l;const h=t._items[l],p=t._items[l+1],g=i[l],m=i[l+1],_=c(h,p)||c(g,m);if(g&&(g.rowIndex=l,e.items.push(g)),h&&g&&c(h,g,_))r="update",t._items[l]=g,h.visible!==g.visible?e.items.splice(-1,1,{visible:g.visible}):s&&!e.isFullUpdate&&(u=t._partialUpdateRow(h,g,l-o));else if(g&&!h||m&&c(h,m,_))r="insert",t._items.splice(l,0,g),d++;else if(h&&!g||p&&c(g,p,_))r="remove",t._items.splice(l,1),d--,a=-1;else{if(!g)return;r="update",t._items[l]=g}e.rowIndices.push(l-o),e.changeTypes.push(r),e.columnIndices.push(u)})}_isCellChanged(e,t,i,n,o){if(JSON.stringify(e.values[n])!==JSON.stringify(t.values[n]))return!0;function s(e,t){return!!e.modifiedValues&&void 0!==e.modifiedValues[t]}return s(e,n)!==s(t,n)}_getChangedColumnIndices(e,t,i,n){let o;if(e.rowType===t.rowType){if("group"!==t.rowType&&"groupFooter"!==t.rowType&&(o=[],"detail"!==t.rowType))for(let s=0;s<e.values.length;s++)this._isCellChanged(e,t,i,s,n)&&o.push(s);if("group"===t.rowType&&e.cells){const i=t.isExpanded===e.isExpanded&&t.data.isContinuation===e.data.isContinuation&&t.data.isContinuationOnNextPage===e.data.isContinuationOnNextPage;i&&(o=e.cells.map((e,t)=>{var i;return"groupExpand"!==(null===(i=e.column)||void 0===i?void 0:i.type)?t:-1}).filter(e=>e>=0))}}return o}_partialUpdateRow(e,t,i,n){var o;let s=this._getChangedColumnIndices(e,t,i,n);return null!==(o=s)&&void 0!==o&&o.length&&this.option("dataRowTemplate")&&(s=void 0),s&&(e.cells&&e.cells.forEach((e,i)=>{const n=s.indexOf(i)>=0;!n&&e&&e.update&&e.update(t)}),t.update=e.update,t.watch=e.watch,t.cells=e.cells,n&&(t.oldValues=e.values),e.update&&e.update(t)),s}_isItemEquals(e,t){if(JSON.stringify(e.values)!==JSON.stringify(t.values))return!1;if(["modified","isNewRow","removed","isEditing"].some(i=>e[i]!==t[i]))return!1;if("group"===e.rowType||"groupFooter"===e.rowType){var i,n,o,s;const r=e.isExpanded===t.isExpanded,l=JSON.stringify(e.summaryCells)===JSON.stringify(t.summaryCells),a=(null===(i=e.data)||void 0===i?void 0:i.isContinuation)===(null===(n=t.data)||void 0===n?void 0:n.isContinuation)&&(null===(o=e.data)||void 0===o?void 0:o.isContinuationOnNextPage)===(null===(s=t.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!r||!l||!a)return!1}return!0}_applyChangesOnly(e){const t=[],i=[],n=[],o=[],s={},l=(null===e||void 0===e?void 0:e.isLiveUpdate)??!0;function a(e){if(e)return`${e.rowType},${JSON.stringify(e.key)}`}const d=this._items,u=d.slice();e.items.forEach((e,t)=>{const i=a(e);s[i]=t,e.rowIndex=t});const c=(0,r.p)({oldItems:u,newItems:e.items,getKey:a,isItemEquals:(e,t)=>!!this._isItemEquals(e,t)&&(e.cells&&(e.update&&e.update(t),e.cells.forEach(e=>{e&&e.update&&e.update(t,!0)})),!0)});c?(c.forEach(e=>{switch(e.type){case"update":{const{index:s}=e,r=e.data,{oldItem:a}=e,u=this._partialUpdateRow(a,r,s,l);t.push(s),n.push("update"),o.push(r),d[s]=r,i.push(u);break}case"insert":t.push(e.index),n.push("insert"),o.push(e.data),i.push(void 0),d.splice(e.index,0,e.data);break;case"remove":t.push(e.index),n.push("remove"),d.splice(e.index,1),o.push(e.oldItem),i.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=t,e.columnIndices=i,e.changeTypes=n,e.items=o,u.length&&(e.isLiveUpdate=!0),this._correctRowIndices(e=>{const t=this._rowIndexOffset||0,i=this.getRowIndexOffset(),n=u[e-t],o=a(n),r=s[o];return r>=0?r+i-e:0})):this._applyChangeFull(e)}_correctRowIndices(e){}_afterProcessItems(e,t){return e}_updateItemsCore(e){let t;const i=this._dataSource,n=e.changeType||"refresh";if(e.changeType=n,i){const n=this._cachedProcessedItems;e.useProcessedItemsCache&&n?t=n:(t=e.items||i.items(),t=this._beforeProcessItems(t),t=this._processItems(t,e),this._cachedProcessedItems=t),t=this._afterProcessItems(t,e),e.items=t;const o=this._items.length===t.length&&this._items;this._applyChange(e);const s=this.getRowIndexDelta();(0,u.__)(this._items,(e,i)=>{i.rowIndex=e-s,o&&(i.cells=o[e].cells??[]);const n=t[e];n&&(i.loadIndex=n.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){const t=this.getVisibleRows(),i=this.dataSource();i&&e.changes.forEach(e=>{if("insert"===e.type&&e.index>=0){let i=0;for(let n=0;n<e.index;n++){const e=t[n];!e||"data"!==e.rowType&&"group"!==e.rowType||i++}e.index=i}})}updateItems(e,t){e=e||{};const i=this;if(e.isFirstRender=!i.changed.fired(),void 0!==i._repaintChangesOnly)e.repaintChangesOnly=e.repaintChangesOnly??i._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||i._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=i.option("repaintChangesOnly");else if(t){const t=i.dataSource().operationTypes();e.repaintChangesOnly=t&&!t.grouping&&!t.filtering&&i.option("repaintChangesOnly"),e.isDataChanged=!0,t&&(t.reload||t.paging||t.groupExpanding)&&(e.needUpdateDimensions=!0)}!i._updateLockCount||e.cancel?(i._updateItemsCore(e),e.cancel||i._fireChanged(e)):i._changes.push(e)}loadingOperationTypes(){const e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,l.zE)(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){const e=this._dataSource;return e?(e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})):(new a.cY).resolve()}resetFilterApplying(){this._isFilterApplying=!1}filter(e){var t;const i=this._dataSource,n=null===i||void 0===i?void 0:i.filter(),o=null===i||void 0===i||null===(t=i.loadOptions)||void 0===t||null===(t=t.call(i))||void 0===t?void 0:t.langParams;if(0===arguments.length)return n;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,m.A.equalFilterParameters(n,e,o)||(i&&i.filter(e),this._applyFilter())}clearFilter(e){const t=this,i=t._columnsController,n=function(e){const t=i.columnCount();for(let n=0;n<t;n++)i.columnOption(n,e,void 0)};if(t.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":t.filter(null);break;case"search":t.searchByText("");break;case"header":n("filterValues");break;case"row":n("filterValue")}else t.filter(null),t.searchByText(""),n("filterValue"),n("bufferedFilterValue"),n("filterValues");t.component.endUpdate()}_fireDataSourceChanged(){const e=this,t=function(){e.changed.remove(t),e.dataSourceChanged.fire()};e.changed.add(t)}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,t){const i=this._getDataSourceAdapter(),n=i.create(this.component);return n.init(e,t),n}isLocalStore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store();return e instanceof n.A}isCustomStore(e){return e=e||this.store(),e instanceof o.XI}_createDataSourceAdapter(e){let t=this.option("remoteOperations");const i=e.store(),n={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,c.Gv)(t)&&t.groupPaging&&(t=(0,d.X)({},n,t)),"auto"===t&&(t=this.isLocalStore(i)||this.isCustomStore(i)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===t&&(t=n),this._createDataSourceAdapterCore(e,t)}setDataSource(e){const t=this,i=t._dataSource;!e&&i&&(i.cancelAll(),i.changed.remove(t._dataChangedHandler),i.loadingChanged.remove(t._loadingChangedHandler),i.loadError.remove(t._loadErrorHandler),i.customizeStoreLoadOptions.remove(t._customizeStoreLoadOptionsHandler),i.changing.remove(t._changingHandler),i.pushed.remove(t._dataPushedHandler),i.dispose(t._isSharedDataSource)),e&&(e=t._createDataSourceAdapter(e)),t._dataSource=e,e&&(t._fireDataSourceChanged(),t._isLoading=!e.isLoaded(),t._needApplyFilter=!0,t._isAllDataTypesDefined=t._columnsController.isAllDataTypesDefined(),e.changed.add(t._dataChangedHandler),e.loadingChanged.add(t._loadingChangedHandler),e.loadError.add(t._loadErrorHandler),e.customizeStoreLoadOptions.add(t._customizeStoreLoadOptionsHandler),e.changing.add(t._changingHandler),e.pushed.add(t._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){const e=this._dataSource;return e&&e.store()}loadAll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this,n=new a.cY,o=i._dataSource;if(o)if(e){const s={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:t?null:i.getCombinedFilter(),group:o.group(),sort:o.sort()}};o._handleDataLoaded(s),(0,a.z7)(s.data).done(e=>{var t;e=i._beforeProcessItems(e),n.resolve(i._processItems(e,{changeType:"loadingAll"}),null===(t=s.extra)||void 0===t?void 0:t.summary)}).fail(n.reject)}else if(o.isLoading())n.reject();else{const e=(0,d.X)({},o.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});o.load(e).done((e,t)=>{e=i._beforeProcessItems(e),e=i._processItems(e,{changeType:"loadingAll"}),n.resolve(e,t&&t.summary)}).fail(n.reject)}else n.resolve([]);return n}getKeyByRowIndex(e,t){const i=this.items(t)[e];if(i)return i.key}getRowIndexByKey(e,t){return m.A.getIndexByKey(e,this.items(t))}getRowByKey(e){var t;return null===(t=this.items())||void 0===t?void 0:t[this.getRowIndexByKey(e)]}keyOf(e){const t=this.store();if(t)return t.keyOf(e)}byKey(e){const t=this.store(),i=this.getRowIndexByKey(e);let n;if(t)return i>=0&&(n=(new a.cY).resolve(this.items()[i].data)),n||t.byKey(e)}key(){const e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){const t=this,i=new a.cY,n=[],o=[];return(0,u.__)(e,(e,i)=>{n.push(t.byKey(i).done(t=>{o[e]=t}))}),a.z7.apply(s.A,n).always(()=>{i.resolve(o)}),i}pageIndex(e){return b(this,"pageIndex",e)}pageSize(e){return b(this,"pageSize",e)}isCustomLoading(){return this._isCustomLoading}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e??"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){!0===e?e={reload:!0,changesOnly:!0}:e||(e={reload:!0,lookup:!0});const t=this,i=t.getDataSource(),{changesOnly:n}=e,o=new a.cY,s=function(){t._repaintChangesOnly=!!n};return(0,a.z7)(!e.lookup||t._columnsController.refresh()).always(()=>{e.load||e.reload?(i&&i.on("customizeLoadResult",s),(0,a.z7)(t.reload(e.reload,n)).always(()=>{i&&i.off("customizeLoadResult",s),t._repaintChangesOnly=void 0}).done(o.resolve).fail(o.reject)):(t.updateItems({repaintChangesOnly:e.changesOnly}),o.resolve())}),o.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this._dataSource&&this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher),this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,t){e=Array.isArray(e)?e:[e],(e.length>1||(0,c.O9)(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!t})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&("paging.pageIndex"===e||"paging.pageSize"===e)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){const e=this.pageIndex(),t=this.pageCount();return e===t-1}load(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.load()}reload(e,t){var i;return null===(i=this._dataSource)||void 0===i?void 0:i.reload(e,t)}push(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return null===(e=this._dataSource)||void 0===e?void 0:e.push(...i)}itemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.hasKnownLastPage())}isLoaded(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded())}totalCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalCount():0}hasLoadOperation(){var e;const t=(null===(e=this._dataSource)||void 0===e?void 0:e.operationTypes())??{};return Object.keys(t).some(e=>t[e])}isViewportChanging(){return!1}}const S={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:I}}},24860:function(e,t,i){i.d(t,{x:function(){return I}});i(69375),i(82438),i(99819),i(57327),i(32225);var n=i(85563),o=i(94360),s=i(63825),r=i(35626),l=i(28170),a=i(20338),d=i(48525),u=i(83159),c=i(6977),h=i(16480),p=i(44171),g=i(26662);const m=e=>class extends e{_addStickyColumnBorderLeftClass(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;const s=(0,g.lN)(this._columnsController,t,i,n,o);s&&p.O.addStickyColumnBorderLeftClass(e,this.addWidgetPrefix.bind(this))}_addStickyColumnBorderRightClass(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;const s=(0,g.hr)(this._columnsController,t,i,n,o);s&&p.O.addStickyColumnBorderRightClass(e,this.addWidgetPrefix.bind(this))}updateBorderCellClasses(e,t,i){const n=this._columnsController,o="rowsView"===this.name,s=(0,g.Uz)(n,t,i,o),r=null===n||void 0===n?void 0:n.isFirstColumn(t,i);p.O.toggleColumnNoBorderClass(e,s,this.addWidgetPrefix.bind(this)),p.O.toggleFirstHeaderClass(e,r,this.addWidgetPrefix.bind(this))}_updateBorderClasses(){const e="columnHeadersView"===this.name,t=this._getRowElementsCore().not(`.${d.N.detailRow}`).toArray();t.forEach((t,i)=>{const o=e?i:null,s=(0,n.A)(t).children("td").toArray();let l=this.getColumns(o);l=(0,g.L8)(this._columnsController,l),s.forEach((e,t)=>{const i=(0,n.A)(e),s=l[t];s.visibleWidth!==r.o&&this.updateBorderCellClasses(i,s,o)})})}_renderCore(e){const t=super._renderCore(e),i=this.element(),n=this.hasStickyColumns();return p.O.toggleStickyColumnsClass(i,n,this.addWidgetPrefix.bind(this)),n?t.done(()=>{this.setStickyOffsets()}):t}_createCell(e){const{column:t}=e,{rowType:i}=e,n=super._createCell(e),o=this.hasStickyColumns(),s="header"===i?e.rowIndex:null,r="groupFooter"===i||"totalFooter"===i||"group"===i,l=t.command&&"expand"===t.command;if(o&&!(0,g.zR)(this._columnsController,t)&&(this.updateBorderCellClasses(n,t,s),t.fixed)){const e=(0,g.iR)(this._columnsController,t);if(p.O.addStickyColumnClass(n,e,this.addWidgetPrefix.bind(this)),!r&&!l)switch(e){case h.Xn.Right:this._addStickyColumnBorderLeftClass(n,t,s,!1,h.Xn.Right);break;case h.Xn.Sticky:this._addStickyColumnBorderLeftClass(n,t,s,!0),this._addStickyColumnBorderRightClass(n,t,s,!0);break;default:this._addStickyColumnBorderRightClass(n,t,s,!1,h.Xn.Left)}}return n}setStickyOffsets(e,t){const i=this._columnsController,n=this.option("rtlEnabled"),o=this.option("showColumnHeaders");let s=this.getColumnWidths(void 0,e),r=this.getColumns(o?e:void 0);r=(0,g.L8)(this._columnsController,r),n&&(r=n?[...r].reverse():r,s=n?[...s].reverse():s),r.forEach((o,l)=>{if(o.fixed){const a=n?r.length-l-1:l,d=(0,g.HO)(i,r,s,l,t);t&&(t[o.index]=d);const u=(0,g.pr)(d);this.setCellProperties(u,a,e)}})}setColumnWidths(e){const t=this.hasStickyColumns(),i=this.getController("columnsResizer"),n=null===i||void 0===i?void 0:i.isResizing();super.setColumnWidths(e),t&&n&&this.setStickyOffsets()}_resizeCore(){const e=this.hasStickyColumns(),t=this.getController("adaptiveColumns"),i=null===t||void 0===t?void 0:t.getHidingColumnsQueue();super._resizeCore.apply(this,arguments),e&&(this.setStickyOffsets(),null!==i&&void 0!==i&&i.length&&this._updateBorderClasses())}hasStickyColumns(){var e;const t=null===(e=this._columnsController)||void 0===e?void 0:e.getStickyColumns();return!0!==this.option("columnFixing.legacyMode")&&!!t.length}},_=e=>class extends(m(e)){setStickyOffsets(){const e={},t=this._getRows();for(let n=0;n<t.length;n++){var i;const o="filter"===(null===t||void 0===t||null===(i=t[n])||void 0===i?void 0:i.rowType);super.setStickyOffsets(n,o?void 0:e)}}getContextMenuItems(e){const{column:t}=e,i=this._columnsController,n=this.option("columnFixing");let o=super.getContextMenuItems(e);if(e.row&&"header"===e.row.rowType&&!0===n.enabled&&t&&t.allowFixing){const e=e=>{switch(e.itemData.value){case"none":this._columnsController.columnOption(t.index,"fixed",!1);break;case"left":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"right"});break;case"sticky":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"sticky"})}},s=[{text:n.texts.leftPosition,icon:n.icons.leftPosition,value:"left",disabled:t.fixed&&(!t.fixedPosition||"left"===t.fixedPosition),onItemClick:e},{text:n.texts.rightPosition,icon:n.icons.rightPosition,value:"right",disabled:t.fixed&&"right"===t.fixedPosition,onItemClick:e}];!0===this.option("columnFixing.legacyMode")||i.isVirtualMode()||s.push({text:n.texts.stickyPosition,icon:n.icons.stickyPosition,value:"sticky",disabled:t.fixed&&t.fixedPosition===h.Xn.Sticky,onItemClick:e}),o=o||[],o.push({text:n.texts.fix,icon:n.icons.fix,beginGroup:!0,items:s},{text:n.texts.unfix,icon:n.icons.unfix,value:"none",disabled:!t.fixed,onItemClick:e})}return o}},C=e=>class extends(m(e)){_getMasterDetailWidth(){const e=(0,s.RG)(this.component.$element())??0,t=a.A.getComponentBorderWidth(this,this._$element);return e-t-this.getScrollbarWidth()}_renderMasterDetailCell(e,t,i){const n=super._renderMasterDetailCell(e,t,i);if(this.hasStickyColumns()){const e=`.${this.addWidgetPrefix(d.N.detailContainer)}`,t=n.find(e);t.addClass(this.addWidgetPrefix(h.Nv.stickyColumnLeft)),(0,s.zj)(t,this._getMasterDetailWidth())}return n}_updateMasterDetailWidths(){const e=this._getRowElements().children(`.${d.N.detailCell}`).children(`.${this.addWidgetPrefix(d.N.detailContainer)}`),t=this._getMasterDetailWidth();(0,s.zj)(e,`${t}px`)}setStickyOffsets(e,t){super.setStickyOffsets(e,t),this.setStickyOffsetsForGroupCells()}setStickyOffsetsForGroupCells(){const e=this._columnsController.getGroupColumns();let t=this.getColumns(),i=this.getColumnWidths();const o=this._getColumnsCountBeforeGroups(t),s=this.option("rtlEnabled");s&&(t=s?[...t].reverse():t,i=s?[...i].reverse():i);const r=this.getTableElement();e.forEach(e=>{const l=o+e.groupIndex+1,a=s?t.length-l-1:l,d=(0,g.HO)(this._columnsController,t,i,a),u=(0,g.pr)(d),c=r.children().children(".dx-group-row").find(`.dx-group-cell[aria-colindex='${l+1}']`);for(let t=0;t<c.length;t+=1){const e=c.get(t),i=(0,n.A)(e).find(".dx-datagrid-group-row-container").get(0);Object.assign(e.style,u),Object.assign(i.style,u)}})}_resizeCore(){const e=this.hasStickyColumns();super._resizeCore.apply(this,arguments),e&&this._updateMasterDetailWidths()}_renderCellContent(e,t,i){const o=this.hasStickyColumns(),s=(0,c.mY)(t),r=(0,u.s)(t),l=s||r;if(!o||!l)return super._renderCellContent(e,t,i);const a=(0,n.A)("<div>").toggleClass(this.addWidgetPrefix(h.Nv.groupRowContainer),s).toggleClass(this.addWidgetPrefix(d.N.detailContainer),r).appendTo(e);return super._renderCellContent(a,t,i)}_renderGroupSummaryCellsCore(e,t,i,n){super._renderGroupSummaryCellsCore(e,t,i,n);const o=`.${this.addWidgetPrefix(h.Nv.stickyColumn)}`;e.parent().find(o).length&&p.O.doesGroupCellEndInFirstColumn(e)&&p.O.addStickyColumnBorderRightClass(e,this.addWidgetPrefix.bind(this))}_handleScroll(e){const t=this.hasStickyColumns();if(super._handleScroll(e),t){const e=this.getController("editorFactory"),t=e.hasOverlayElements();if(t){const t=e.focus();e.focus(t)}}}_scrollToElement(e,t){let i=t;const o=this.getScrollable(),s=this.hasStickyColumns();if(s&&o){const t=p.O.isFixedCell(e,this.addWidgetPrefix.bind(this));if(!e.is("td")||t)return;const s=null===e||void 0===e?void 0:e.closest("tr"),r=null===s||void 0===s?void 0:s.children();i=p.O.getScrollPadding(r,(0,n.A)(o.container()),this.addWidgetPrefix.bind(this))}super._scrollToElement(e,i)}},f=e=>class extends(m(e)){},v=e=>class extends e{getSeparatorOffsetX(e){var t;const i=null===(t=this._columnHeadersView)||void 0===t?void 0:t.hasStickyColumns();if(i){const t=(0,n.A)(this._columnHeadersView.getContent()),i=p.O.isFixedCellPinnedToRight(e,t,this.addWidgetPrefix.bind(this)),s="widget"===this.option("columnResizingMode");var o;if(s&&i)return(null===(o=e.offset())||void 0===o?void 0:o.left)??0}return super.getSeparatorOffsetX(e)}_correctColumnIndexForPoint(e,t,i){const o=this.option("rtlEnabled"),s="widget"===this.option("columnResizingMode"),r=Math.max(e.index-1,0),l=i[r],a=this._getNextColumnIndex(r),d=i[a];if(s&&!(0,g.OS)(e,l,d)){const t=(0,n.A)(this._columnHeadersView.getContent()),i=p.O.isFixedCellPinnedToRight((0,n.A)(e.item),t,this.addWidgetPrefix.bind(this));if(i)return void(e.columnIndex-=o?1:0)}super._correctColumnIndexForPoint(e,t,i)}_needToInvertResizing(e){const t=super._needToInvertResizing(e),i="widget"===this.option("columnResizingMode");if(!t&&i){const t=(0,n.A)(this._columnHeadersView.getContent());return p.O.isFixedCellPinnedToRight(e,t,this.addWidgetPrefix.bind(this))}return t}_generatePointsByColumns(){var e;const t=null===(e=this._columnHeadersView)||void 0===e?void 0:e.hasStickyColumns();super._generatePointsByColumns(t)}_pointCreated(e,t,i){var n;const o=null===(n=this._columnHeadersView)||void 0===n?void 0:n.hasStickyColumns(),s=super._pointCreated(e,t,i),r=(null===i||void 0===i?void 0:i.length)??t.length,l=o&&r>0;if(l&&!s){const n=t[e.index-1],o=this._getNextColumnIndex(e.index-1),s=t[o];return p.O.noNeedToCreateResizingPoint(this._columnHeadersView,{point:e,column:n,nextColumn:s,cells:i},this.addWidgetPrefix.bind(this))}return s}},x=e=>class extends e{_generatePointsByColumns(e){var t;const i=null===(t=this._columnHeadersView)||void 0===t?void 0:t.hasStickyColumns(),{sourceLocation:n,sourceColumn:o,targetDraggingPanel:s}=e,r="headers"===n&&"headers"===(null===s||void 0===s?void 0:s.getName());if(i&&r){const t=(0,g.iR)(this._columnsController,o);switch(!0){case o.fixed&&t===h.Xn.Left:e.columnElements=p.O.getLeftFixedCells(e.columnElements,this.addWidgetPrefix.bind(this)),e.startColumnIndex=e.columnElements.eq(0).index();break;case o.fixed&&t===h.Xn.Right:e.columnElements=p.O.getRightFixedCells(e.columnElements,this.addWidgetPrefix.bind(this)),e.startColumnIndex=e.columnElements.eq(0).index();break;default:e.columnElements=p.O.getNonFixedAndStickyCells(e.columnElements,this.addWidgetPrefix.bind(this)),e.startColumnIndex=e.columnElements.eq(0).index()}}return super._generatePointsByColumns(e,i)}_pointCreated(e){let{point:t,columns:i,location:o,sourceColumn:s,cells:r}=e;const l=this._columnHeadersView.hasStickyColumns(),a=l&&"headers"===o&&(null===r||void 0===r?void 0:r.length)&&(!s.fixed||s.fixedPosition===h.Xn.Sticky),d=super._pointCreated({point:t,columns:i,location:o,sourceColumn:s});return a&&!d?p.O.noNeedToCreateReorderingPoint(t,r,(0,n.A)(this._columnHeadersView.getContent()),this.addWidgetPrefix.bind(this)):d}},w=e=>class extends e{getOverlayContainerIfNeeded(e){const t=this._rowsView.hasStickyColumns(),i=p.O.isFixedCell(e,this.addWidgetPrefix.bind(this));if(t&&i)return e.closest(`.${this.addWidgetPrefix(h.Nv.stickyColumns)}`)}updateFocusOverlaySize(e,t){const i=this._rowsView.hasStickyColumns();i||super.updateFocusOverlaySize(e,t)}getFocusOverlaySize(e){const t=this._rowsView.hasStickyColumns();if(t){const t=(0,o.N)(e.get(0)),i=p.O.isLastCell(e),n=p.O.isFixedCell(e,this.addWidgetPrefix.bind(this));return{width:t.right-t.left+(i||n?0:1),height:t.bottom-t.top}}return super.getFocusOverlaySize(e)}getValidationMessageContainer(e){return this.getOverlayContainerIfNeeded(e)??super.getValidationMessageContainer(e)}getRevertButtonContainer(e){return this.getOverlayContainerIfNeeded(e)??super.getRevertButtonContainer(e)}getFocusOverlayContainer(e){return this.getOverlayContainerIfNeeded(e)??super.getFocusOverlayContainer(e)}overlayPositionedHandler(e,t){const i=this.getView("columnHeadersView"),o=i.hasStickyColumns();if(super.overlayPositionedHandler(e,t),o){const t=(0,n.A)(e.element).closest("td");if(!p.O.isFixedCell(t,this.addWidgetPrefix.bind(this))){const t=e.component.$wrapper(),o=e.component.$content(),s=p.O.isOutsideVisibleArea(o,(0,n.A)(i.getColumnElements()),(0,n.A)(i.getContent()),this.addWidgetPrefix.bind(this));t.css("zIndex",s?1:(null===this||void 0===this?void 0:this.getOverlayBaseZIndex())??0)}}}updateFocusOverlay(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){const t=p.O.isFixedCell(e,this.addWidgetPrefix.bind(this));this._$focusOverlay.toggleClass(h.Nv.focusedFixedElement,t);const i=(0,l.mY)(e),n=(0,l.x0)(e),o=(0,l.ML)(e);(t||i||n||o)&&this._$focusOverlay.toggleClass(h.Nv.focusedFixedElement,!0)}super.updateFocusOverlay(e,t)}},y=e=>class extends e{resize(){const e=super.resize(),t=this._columnHeadersView.hasStickyColumns();return t&&null!==this&&void 0!==this&&this.hasResizeTimeout()&&this._rowsView.setStickyOffsets(),e}},b=e=>class extends e{getContainerBoundingRect(e){var t;const i=null===(t=this._columnHeadersView)||void 0===t?void 0:t.hasStickyColumns();if(i){const t=(0,n.A)(this._columnHeadersView.getColumnElements());return p.O.getNonFixedAreaBoundingRect(t,e,this.addWidgetPrefix.bind(this))}return super.getContainerBoundingRect(e)}tabKeyHandler(e){var t,i;let{originalEvent:o,shift:s}=e;const r=null===(t=this._columnHeadersView)||void 0===t?void 0:t.hasStickyColumns(),l=null===(i=this.getView("rowsView"))||void 0===i?void 0:i.getScrollable();if(!r||!l)return;const a=(0,n.A)(o.target).closest("td"),d=p.O.getNextHeaderCell(a,s?"previous":"next"),u=p.O.isFixedCell(d,this.addWidgetPrefix.bind(this));if(u)return;const c=d.length&&this.isOutsideVisibleArea(d,(0,n.A)(this._columnHeadersView.getContent()));c&&this.scrollToNextCell(d)}},I={extenders:{views:{columnHeadersView:_,rowsView:C,footerView:f},controllers:{columnsResizer:v,draggingHeader:x,editorFactory:w,resizing:y,headersKeyboardNavigation:b}}}},25831:function(e,t,i){i.d(t,{A2:function(){return q},AV:function(){return w},BL:function(){return l},BX:function(){return W},CA:function(){return O},CN:function(){return m},D9:function(){return h},G3:function(){return a},HG:function(){return te},Lb:function(){return U},MN:function(){return P},Mc:function(){return M},Mw:function(){return S},NT:function(){return Y},OM:function(){return z},OQ:function(){return ie},Os:function(){return I},Q6:function(){return D},QN:function(){return ae},Qz:function(){return c},VQ:function(){return re},X9:function(){return B},Xe:function(){return y},Xh:function(){return H},Z8:function(){return ne},Zm:function(){return j},aT:function(){return ue},al:function(){return he},bO:function(){return N},cK:function(){return ce},cy:function(){return f},do:function(){return d},dx:function(){return $},eN:function(){return v},gJ:function(){return k},gM:function(){return Q},gU:function(){return r},gn:function(){return _},iK:function(){return G},iq:function(){return oe},jP:function(){return K},kd:function(){return u},lR:function(){return de},nN:function(){return A},oJ:function(){return X},oX:function(){return x},pO:function(){return E},pR:function(){return b},qB:function(){return J},qR:function(){return R},r8:function(){return Z},sN:function(){return o},se:function(){return g},su:function(){return n},tp:function(){return p},uz:function(){return s},vo:function(){return le},vw:function(){return ee},wi:function(){return T},yP:function(){return F},yQ:function(){return V},yu:function(){return L},yx:function(){return C},zy:function(){return se}});const n="dx-editor-cell",o="dx-row",s="dx-cell-modified",r="dx-selection",l="edit-form",a="insert",d="remove",u="editing.popup",c="editing.form",h="editing.editRowKey",p="editing.editColumnName",g="targetComponent",m="input:not([type='hidden'])",_=`[tabindex]:not([disabled]), ${m}:not([disabled])`,C="batch",f="row",v="cell",x="form",w="popup",y="first",b="last",I="pageBottom",S="pageTop",A="viewportBottom",E="viewportTop",R=["batch","row","cell","form","popup"],O=["row","form","popup"],T=["batch","cell"],V=["batch","row","cell"],F=["row","form"],P="readonly",D="dx-link",k="dx-link-icon",B="dx-selection",H="dx-edit-button",z="dx-command-edit",M="dx-command-edit-with-icons",N="__DX_INSERT_INDEX__",L="dx-row-inserted",W="dx-row-modified",K="dx-cell-modified",$="dxDataGridEditing",G="dx-cell-focus-disabled",q="update",U="click",j={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},X={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},Y={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},Q={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},J=["edit","save","cancel","delete","undelete"],Z="editing.changes",ee="focus-overlay",te="addrow-button",ie="dx-dropdowneditor-overlay",ne="dx-data-row",oe="dx-row-removed",se="filter-row",re="edit-form-item",le="edit-popup",ae="edit-popup-form",de="dx-scrollable-container",ue="dx-button",ce="form-buttons-container",he="dx-edit-row"},26662:function(e,t,i){i.d(t,{HO:function(){return m},L8:function(){return d},OS:function(){return w},Uz:function(){return C},hr:function(){return x},iR:function(){return l},lN:function(){return v},pr:function(){return f},zR:function(){return a}});i(82438),i(99819),i(57327),i(50020),i(34840);var n=i(50172),o=i(20338),s=i(35626),r=i(16480);const l=(e,t)=>{const{fixedPosition:i}=t,n=e.option("rtlEnabled"),s=t.command&&"expand"===t.command,l=t.command&&!o.A.isCustomCommandColumn(e._columns,t);return l&&n&&!s?i===r.Xn.Right?r.Xn.Left:r.Xn.Right:i??r.Xn.Left},a=function(e,t){return e.isVirtualMode()&&!!t.fixed&&t.fixedPosition===r.Xn.Sticky},d=function(e,t){return t.map(t=>a(e,t)?Object.assign({},t,{fixed:!1,fixedPosition:""}):t)},u=function(e,t){return t.visibleWidth!==s.o&&(!t.isBand||!!e.getVisibleDataColumnsByBandColumn(t.index).length)},c=function(e,t){return!t.some(t=>!t.fixed&&u(e,t))},h=function(e,t,i,o,s,l){const a=t[o],d=(0,n.O9)(a.ownerBand),h=s===r.Xn.Right,p=a.fixedPosition===r.Xn.Sticky,g=h?t.slice(o+1):t.slice(0,o).reverse(),m=h?i.slice(o+1):i.slice(0,o).reverse();let _=0,C=0,f=!c(e,g)&&p&&g.length?1:0;var v;return g.forEach((t,i)=>{if(!t.fixed||(0,n.O9)(l)&&a.ownerBand!==t.ownerBand)u(e,t)||(C+=1);else{const n=t.fixedPosition===r.Xn.Sticky;_+=m[i]??t.visibleWidth,p&&n&&!c(e,g.slice(i+1))&&(i!==C?(f+=1,C=i+1):C+=1)}}),d&&(0,n.O9)(l)?(_+=(null===l||void 0===l||null===(v=l[a.ownerBand])||void 0===v?void 0:v[s])??0,_):_-f*r.oc},p=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const l=e.option("rtlEnabled"),a=l!==o?"isLastColumn":"isFirstColumn";if(t.fixedPosition===r.Xn.Sticky){const i=e.getParentColumn(t)??t;if(e[a](i,0))return!1}return e[a](t,i,n,s)},g=function(e,t,i,n){const o=e.getVisibleIndex(t.index,n);return null===i||void 0===i?void 0:i.slice(0,o).reverse().find(t=>u(e,t))},m=function(e,t,i,n,o){const s={},a=t[n];if(a){const d=l(e,a);switch(d){case r.Xn.Sticky:{const l=h(e,t,i,n,r.Xn.Left,o),a=h(e,t,i,n,r.Xn.Right,o);s.left=l,s.right=a;break}case r.Xn.Right:{const l=h(e,t,i,n,r.Xn.Right,o);s.right=l;break}default:{const l=h(e,t,i,n,r.Xn.Left,o);s.left=l}}}return s},_=function(e,t,i,n){const o=g(e,t,i,n),s=l(e,t),d=o&&l(e,o);return!(null===o||void 0===o||!o.fixed)&&!a(e,o)&&(!t.fixed||s===r.Xn.Sticky||d===r.Xn.Sticky)},C=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e.getVisibleColumns(n?null:i),s=e.getParentColumn(t);if(s){const n=e.isFirstColumn(t,i,!0);return n&&_(e,s,e.getVisibleColumns(0),0)}return _(e,t,o,i)},f=function(e){const t={};return(0,n.O9)(e.left)&&(t.left=`${e.left}px`),(0,n.O9)(e.right)&&(t.right=`${e.right}px`),t},v=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return p(e,t,i,n,!1,o)},x=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return p(e,t,i,n,!0,o)},w=function(e,t,i){const o=(0,n.O9)(e.isLeftBoundary)||(0,n.O9)(e.isRightBoundary);return!o&&!!t&&!!i&&t.fixed!==i.fixed}},28170:function(e,t,i){i.d(t,{D2:function(){return h},Fr:function(){return C},Jx:function(){return v},ML:function(){return u},Pv:function(){return f},TZ:function(){return x},Ti:function(){return c},Xy:function(){return p},c9:function(){return _},jv:function(){return g},mY:function(){return l},qQ:function(){return m},s9:function(){return d},vg:function(){return y},x0:function(){return a}});i(82438),i(12266),i(99819);var n=i(62192),o=i(50172),s=i(25831),r=i(68055);function l(e){return e&&e.hasClass(r.aO)}function a(e){return e&&e.hasClass("dx-datagrid-group-footer")}function d(e){return e&&e.hasClass(r.hg)}function u(e){return e&&e.hasClass(r.eq)}function c(e){return null===e||void 0===e?void 0:e.hasClass(s.al)}function h(e){return e&&e.hasClass(r.hg)&&e.hasClass(r.BL)}function p(e){return e&&e.hasClass(r.Z8)}function g(e){return!e||e.hasClass(r.xR)||e.hasClass(r.A5)}function m(e,t){return!e._isRowEditMode()&&t&&!t.hasClass(r.uc)&&t.hasClass(s.su)}function _(e){return(0,o.O9)(e)&&e.length>0}function C(){return"desktop"!==n.A.current().deviceType}function f(e){return!!e.parent(`.${r.mu}`).length}function v(e,t){const i=e.option("rtlEnabled");return i?!("right"===t.fixedPosition||(0,o.O9)(t.command)&&!(0,o.O9)(t.fixedPosition)):!(!(0,o.O9)(t.fixedPosition)||"left"===t.fixedPosition)}function x(e){const t=e.getController("keyboardNavigation");return!!t._isVirtualScrolling()&&e.option("focusedRowIndex")===t.getRowIndex()}function w(e){return e.find(r.tD).filter(":visible")}function y(e,t){const i=w(e);return t?i.last():i.first()}},29219:function(e,t,i){i.d(t,{a:function(){return a}});i(82438),i(12266);var n=i(39889),o=i(25831);const s=e=>class extends e{isRowEditMode(){return this.getEditMode()===o.cy}_afterCancelEditData(e){const t=this._dataController;this.isRowBasedEditMode()&&e>=0?t.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,t){const i=this.isRowBasedEditMode(),s=this.isPopupEditMode(),r=!s&&t.row&&(0,n.RL)(t.row.key,this.option(o.D9));if(i)switch(e.name){case"edit":return!r&&this.allowUpdating(t);case"delete":return super._isDefaultButtonVisible(e,t)&&!r;case"save":case"cancel":return r;default:return super._isDefaultButtonVisible(e,t)}return super._isDefaultButtonVisible(e,t)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){const{allowCancelEditing:t}=e??{};if(this.isRowBasedEditMode()){const e=this.getChanges().filter(e=>"update"===e.type).length>0;this.init(),t&&e&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){const e=super._isEditColumnVisible(),t=this.option("editing"),i=this.isRowEditMode(),n=t.allowUpdating||t.allowAdding;return e||i&&n}_focusEditorIfNeed(){const e=this.getEditMode();if(this._needFocusEditor){if(o.yP.includes(e)){const e=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(e,()=>{e&&this.component.focus(e)})}this._needFocusEditor=!1}}},r=e=>class extends e{_getChangedColumnIndices(e,t,i,n){if(!this._editingController.isRowBasedEditMode()||e.isEditing===t.isEditing)return super._getChangedColumnIndices.apply(this,arguments)}},l=e=>class extends e{_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const i=this._editingController,n=i.isEditRow(e.rowIndex);n&&(t.addClass(o.al),t.removeClass(o.gU),"detail"===e.rowType&&t.addClass(this.addWidgetPrefix(o.BL)))}return t}_update(e){super._update(e),"updateSelection"===e.changeType&&this.getTableElements().children("tbody").children(`.${o.al}`).removeClass(o.gU)}},a={extenders:{controllers:{editing:s,data:r},views:{rowsView:l}}}},29410:function(e,t,i){i.d(t,{n:function(){return B},W:function(){return k}});i(69375),i(82438),i(12266),i(99819),i(57327),i(50020),i(32225),i(64727),i(69033),i(68903),i(21018),i(1415),i(4448),i(58871),i(56539);var n=i(59981),o=i(24906),s=i(18692),r=i(96004),l=i(69357),a=i(92324),d=i(35754),u=i(71791),c=i(47759),h=i(85563),p=i(26228),g=i(39889),m=i(66703),_=i(44956),C=i(89214),f=i(94360),v=i(63825),x=i(97991),w=i(50172),y=i(27996),b=i(89651);const I=e=>class extends e{_applyColumnState(e){var t;const i=this.option("rtlEnabled"),n=this._getColumnAlignment(e.column.alignment,i),o=(0,_.X)(!0,{columnAlignment:n},e),s=o.rootElement.hasClass("dx-group-panel-item"),r=this._createIndicatorContainer(o,s),l=(0,h.A)("<span>").addClass(this._getIndicatorClassName(e.name)),a=null===(t=this.component)||void 0===t?void 0:t.getController("columns"),d=(null===a||void 0===a?void 0:a.getHeaderContentAlignment(n))||n;return o.container=r,o.indicator=l,this._renderIndicator(o),r[!s&&e.showColumnLines||"left"!==d?"prependTo":"appendTo"](e.rootElement),l}_getIndicatorClassName(e){}_getColumnAlignment(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=t||this.option("rtlEnabled");return e&&"center"!==e?e:(0,f.n)(i)}_createIndicatorContainer(e,t){let i=this._getIndicatorContainer(e.rootElement);const n="left"===e.columnAlignment?"right":"left";return i.length||(i=(0,h.A)("<div>").addClass("dx-column-indicators")),this.setAria("role","presentation",i),i.css("float",e.showColumnLines&&!t?n:null)}_getIndicatorContainer(e){return e&&e.find(".dx-column-indicators")}_getIndicatorElements(e){const t=this._getIndicatorContainer(e);return null===t||void 0===t?void 0:t.children()}_renderIndicator(e){const t=e.container,i=e.indicator;t&&i&&t.append(i)}_updateIndicators(e){const t=this,i=t.getColumns(),n=t.getColumnElements();let o;if(n&&i.length===n.length)for(let s=0;s<i.length;s++){o=n.eq(s),t._updateIndicator(o,i[s],e);const r=o.parent().data("options");r&&r.cells&&(r.cells[o.index()].column=i[s])}}_updateIndicator(e,t,i){if(!t.command)return this._applyColumnState({name:i,rootElement:e,column:t,showColumnLines:this.option("showColumnLines")})}};var S=i(91125),A=i(20338);const E="dx-master-detail-row",R="dxCellHintVisible",O={render(e){e.container.append(e.content)}},T=function(e,t){let i,l,a;function u(e){return setTimeout(()=>{i=l=null},e)}o.A.on(t,"touchstart touchend",".dx-row",t=>{var n;null!==t&&void 0!==t&&null!==(n=t.event)&&void 0!==n&&n.target&&!A.A.isElementInCurrentGrid(e,(0,h.A)(t.event.target))||(clearTimeout(a),"touchstart"===t.type?(i=t.target,l=t.currentTarget,a=u(1e3)):a=u())}),o.A.on(t,[n.U,s.U,r.A.down].join(" "),".dx-row",e.createAction(t=>{var o;const{event:s}=t;null!==t&&void 0!==t&&null!==(o=t.event)&&void 0!==o&&o.target&&!A.A.isElementInCurrentGrid(e,(0,h.A)(s.target))||(i&&(s.target=i,s.currentTarget=l),(0,h.A)(s.target).closest("a").length||(t.rowIndex=e.getRowIndex(s.currentTarget),t.rowIndex>=0&&(t.rowElement=(0,d.cc)((0,h.A)(s.currentTarget)),t.columns=e.getColumns(),s.type===r.A.down?e._rowPointerDown(t):s.type===n.U?e._rowClick(t):e._rowDblClick(t))))}))},V=function(e){return"auto"===e?"":(0,w.kf)(e)?`${e}px`:e},F=function(e,t,i){e.style.width=e.style.maxWidth="auto"===t.width?"":i},P=function(e,t){if(!e||!t)return;const i=e.attributes,n=t.attributes;let o;for(o=0;o<i.length;o++){const n=i[o].nodeName;t.hasAttribute(n)||e.removeAttribute(n)}for(o=0;o<n.length;o++)e.setAttribute(n[o].nodeName,n[o].nodeValue)},D=function(e){e.resolve()},k=e=>"number"===typeof e?`${e.toFixed(3)}px`:"adaptiveHidden"===e?"0.0001px":e;class B extends(I(S.Ay.View)){init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnChooserController=this.getController("columnChooser"),this._editorFactoryController=this.getController("editorFactory"),this._selectionController=this.getController("selection"),this._columnChooserView=this.getView("columnChooserView"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}dispose(){if((0,y.Vd)()){var e,t;const i=(0,y.zk)();null===(e=this._templateTimeouts)||void 0===e||e.forEach(e=>i.clearTimeout(e)),null===(t=this._templateTimeouts)||void 0===t||t.clear()}}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":this._invalidate(!0,!0),e.handled=!0;break;case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this._invalidate(!0,!0),e.handled=!0}}_createScrollableOptions(){const e=this.option("scrolling");let t=this.option("scrolling.useNative");const i=(0,_.X)({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===t&&(t=!0),"auto"===t?(delete i.useNative,delete i.useSimulatedScrollbar):(i.useNative=!!t,i.useSimulatedScrollbar=!t),i}_updateCell(e,t){t.rowType&&this._cellPrepared(e,t)}_needToSetCellWidths(){return this.option("columnAutoWidth")}_createCell(e){const{column:t}=e,i=t.alignment||(0,f.n)(this.option("rtlEnabled")),n=this._needToSetCellWidths(),o=a.A.createElement("td");o.style.textAlign=i;const s=(0,h.A)(o);return t.cssClass&&s.addClass(t.cssClass),Array.isArray(t.elementAttr)&&t.elementAttr.forEach(e=>{let{name:t,value:i}=e;s.attr(t,i)}),"expand"===t.command&&(s.addClass(t.cssClass),s.addClass(this.addWidgetPrefix("group-space"))),t.colspan>1?s.attr("colSpan",t.colspan):!t.isBand&&"auto"!==t.visibleWidth&&n&&((t.width||t.minWidth)&&(o.style.minWidth=V(t.minWidth||t.width)),t.width&&F(o,t,V(t.width))),s}_createRow(e,t){t=t||"tr";const i=(0,h.A)(`<${t}>`).addClass("dx-row");return"tr"===t&&this.setAria("role","row",i),i}_isAltRow(e){return e&&e.dataIndex%2===1}_createTable(e,t){const i=(0,h.A)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!t?(i.attr("id",`dx-${new c.A}`).append(this._createColGroup(e)),p.A.safari&&i.append((0,h.A)("<thead>").append("<tr>")),this.setAria("role","presentation",i)):this.setAria("hidden",!0,i),this.setAria("role","presentation",(0,h.A)("<tbody>").appendTo(i)),t)return i;p.A.mozilla&&o.A.on(i,"mousedown","td",e=>{e.ctrlKey&&e.preventDefault()}),this.option("cellHintEnabled")&&o.A.on(i,"mousemove",".dx-row > td",this.createAction(e=>{const t=e.event,i=(0,h.A)(t.target),n=(0,h.A)(t.currentTarget),o=n.parent(),s=this._columnsController.getVisibleColumns(),r=o.data("options"),l=n.index(),a=r&&r.cells&&r.cells[l],d=a?a.column:s[l],u=o.hasClass("dx-header-row"),c=o.hasClass("dx-data-row"),p=o.hasClass(E),g=o.hasClass("dx-group-row"),m=o.hasClass(this.addWidgetPrefix("filter-row")),_=c&&(!d||d.cellTemplate),C=c&&a&&(r.isEditing||a.isEditing||(null===d||void 0===d?void 0:d.showEditorAlways)),f=u&&(!d||d.headerCellTemplate),v=g&&(!d||d.groupIndex&&d.groupCellTemplate),x=!p&&!m&&!C&&!_&&!f&&!v;if(x){i.data(R)&&(i.removeAttr("title"),i.data(R,!1));const e=i[0].scrollWidth-i[0].clientWidth;e>0&&!(0,w.O9)(i.attr("title"))&&(i.attr("title",i.text()),i.data(R,!0))}}));const r=e=>{const t=(0,h.A)(e.currentTarget),i=(0,h.A)(e.target).closest(".dx-field-item-content"),n=t.parent(),o=n.data("options"),s=o&&o.cells&&o.cells[t.index()];if(!t.closest("table").is(e.delegateTarget))return;const r=(0,_.X)({},s,{cellElement:(0,d.cc)(t),event:e,eventType:e.type});if(r.rowIndex=this.getRowIndex(n),i.length){const e=i.data("dx-form-item");e.column&&(r.column=e.column,r.columnIndex=this._columnsController.getVisibleIndex(r.column.index))}return r};return o.A.on(i,"mouseover",".dx-row > td",e=>{const t=r(e);t&&this.executeAction("onCellHoverChanged",t)}),o.A.on(i,"mouseout",".dx-row > td",e=>{const t=r(e);t&&this.executeAction("onCellHoverChanged",t)}),o.A.on(i,n.U,".dx-row > td",e=>{const t=r(e);t&&this.executeAction("onCellClick",t)}),o.A.on(i,s.U,".dx-row > td",e=>{const t=r(e);t&&this.executeAction("onCellDblClick",t)}),T(this,i),i}_rowPointerDown(e){}_rowClick(){}_rowDblClick(){}_createColGroup(e){const t=(0,h.A)("<colgroup>");for(let i=0;i<e.length;i++){const n=e[i].colspan||1;for(let o=0;o<n;o++)t.append(this._createCol(e[i]))}return t}_createCol(e){let t=e.visibleWidth||e.width;"adaptiveHidden"===t&&(t="0.0001px");const i=(0,h.A)("<col>");return(0,x.zj)(i,t),i}renderDelayedTemplates(e){const t=this._delayedTemplates,i=t.filter(e=>!e.async),n=t.filter(e=>e.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(i,!1,e),this._renderDelayedTemplatesCoreAsync(n)}_renderDelayedTemplatesCoreAsync(e){if(e.length){const t=(0,y.zk)().setTimeout(()=>{this._templateTimeouts.delete(t),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(t)}}_renderDelayedTemplatesCore(e,t,i){const n=new Date;while(e.length){const o=e.shift(),{options:s}=o,r=a.A.getRootNode((0,h.A)(s.container).get(0)),l=this.needWaitAsyncTemplates();if((!t||(0,h.A)(s.container).closest(r).length||l)&&(i&&(s.change=i),o.template.render(s)),t&&new Date-n>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,t){const i=this;let n;if(e&&e.render&&!(0,w.Kb)(e))n={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(t){e.render(t.container,t.model,t.change),t.deferred&&t.deferred.resolve()}};else if((0,w.Tn)(e))n={render(t){const i=e((0,d.cc)(t.container),t.model,t.change);i&&(i.nodeType||(0,w.Kb)(i))&&t.container.append(i),t.deferred&&t.deferred.resolve()}};else{const t=(0,w.Kg)(e)?e:(0,h.A)(e).attr("id");t?(i._templatesCache[t]||(i._templatesCache[t]=i.getTemplate(e)),n=i._templatesCache[t]):n=i.getTemplate(e)}return n}renderTemplate(e,t,i,n,s){const r=this._processTemplate(t,i),{column:a}=i,d="data"===i.rowType,u=new m.cY,c={container:e,model:i,deferred:u,onRendered:()=>{this.isDisposed()?u.reject():u.resolve()}};if(r){i.component=this.component;const t=a&&(a.renderAsync&&d||this.option("renderAsync")&&(!1!==a.renderAsync&&(a.command||a.showEditorAlways)&&d||"filter"===i.rowType)),s=i.renderAsync??t;!r.allowRenderToDetachedContainer&&!n||s?this._delayedTemplates.push({template:r,options:c,async:s}):r.render(c),this._templateDeferreds.add(u),o.A.on(e,l.N,D.bind(null,u))}else u.reject();return u.promise().always(()=>{this._templateDeferreds.delete(u)})}_getBodies(e){return(0,h.A)(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var t;const i=!!this.option().rowTemplate;return i&&!(null===(t=this._getBodies(e))||void 0===t||!t.filter(".dx-row").length)}_wrapRowIfNeed(e,t,i){const n=i?e||this._tableElement:this._tableElement||e,o=this._needWrapRow(n);if(o){const e=(0,h.A)("<tbody>").addClass(t.attr("class"));return this.setAria("role","presentation",e),e.append(t)}return t}_appendRow(e,t,i){i=i||O,i.render({content:t,container:e})}_resizeCore(){const e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){const t=this.element().parent();return t&&!t.parent().length||this.renderDelayedTemplates(e),(new m.cY).resolve()}_renderTable(e){e=e||{},e.columns=this._columnsController.getVisibleColumns();const t=e.change&&e.change.changeType,i=this._createTable(e.columns,"append"===t||"prepend"===t||"update"===t);return this._renderRows(i,e),i}_renderRows(e,t){const i=this,n=i._getRows(t.change),o=t.change&&t.change.columnIndices||[],s=t.change&&t.change.changeTypes||[];for(let r=0;r<n.length;r++)i._renderRow(e,(0,_.X)({row:n[r],columnIndices:o[r],changeType:s[r]},t))}_renderRow(e,t){t.columnIndices||(t.row.cells=[]);const i=this._createRow(t.row),n=this._wrapRowIfNeed(e,i);"remove"!==t.changeType&&this._renderCells(i,t),this._appendRow(e,n);const o=(0,_.X)({columns:t.columns},t.row);this._addWatchMethod(o,t.row),this._rowPrepared(n,o,t.row)}_needRenderCell(e,t){return!t||t.indexOf(e)>=0}_renderCells(e,t){const i=this;let n=0;const{row:o}=t,{columns:s}=t;for(let r=0;r<s.length;r++)this._needRenderCell(r,t.columnIndices)&&i._renderCell(e,(0,_.X)({column:s[r],columnIndex:n,value:o.values&&o.values[n],oldValue:o.oldValues&&o.oldValues[n]},t)),s[r].colspan>1?n+=s[r].colspan:n++}_updateCells(e,t,i,n){var o;const s=this,r=e.children(),l=t.children(),a=this.option("highlightChanges"),d=this.addWidgetPrefix("cell-updated-animation");null!==n&&void 0!==n&&null!==(o=n.node)&&void 0!==o&&o.hasChildren&&r.each(function(){s.setAria("expanded",n.isExpanded,(0,h.A)(this))}),i.forEach((e,t)=>{const i=r.eq(e),n=l.eq(t);i.replaceWith(n),a&&!n.hasClass("dx-command-expand")&&n.addClass(d)}),P(e.get(0),t.get(0))}_setCellAriaAttributes(e,t,i){var n;const{row:o}=i,s="freeSpace"===t.rowType,r="group"===t.rowType,l=null===o||void 0===o||null===(n=o.node)||void 0===n?void 0:n.hasChildren;if(s)return;this.setAria("role","gridcell",e),l&&this.setAria("expanded",o.isExpanded,e);const a=this._columnsController.getColumnIndexOffset(),d=r?t.columnIndex+1:t.columnIndex+a+1;this.setAria("colindex",d,e)}_renderCell(e,t){const i=this._getCellOptions(t);if(t.columnIndices){if(t.row.cells){const e=t.row.cells.findIndex(e=>e.columnIndex===i.columnIndex);t.row.cells[e]=i}}else t.row.cells.push(i);const n=this._createCell(i);return this._setCellAriaAttributes(n,i,t),this._renderCellContent(n,i,t),e.get(0).appendChild(n.get(0)),n}_renderCellContent(e,t,i){const n=this._getCellTemplate(t);(0,m.z7)(!n||this.renderTemplate(e,n,t,void 0,i.change)).done(()=>{this._updateCell(e,t)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){const t={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,rowIndex:e.row.rowIndex,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(t),t}_addWatchMethod(e,t){if(!this.option("repaintChangesOnly"))return;const i=[];return t=t||e,t.watch=t.watch||function(e,n,o){let s=e(t.data);const r=function(i){i&&o&&o(i);const r=e(t.data);JSON.stringify(s)!==JSON.stringify(r)&&(i&&n(r),s=r)};return i.push(r),function(){const e=i.indexOf(r);e>=0&&i.splice(e,1)}},t.update=t.update||function(t,n){t&&(this.data=e.data=t.data,this.rowIndex=e.rowIndex=t.rowIndex,this.dataIndex=e.dataIndex=t.dataIndex,this.isExpanded=e.isExpanded=t.isExpanded,e.row&&!n&&(e.row=t)),i.forEach(e=>{e(t)})},t!==e&&(e.watch=t.watch.bind(t)),e}_cellPrepared(e,t){t.cellElement=(0,d.cc)((0,h.A)(e)),this.executeAction("onCellPrepared",t)}_rowPrepared(e,t,i){(0,u.p)(e.get(0),"options",t),t.rowElement=(0,d.cc)(e),this.executeAction("onRowPrepared",t)}_columnOptionChanged(e){const{optionNames:t}=e;if(A.A.checkChanges(t,["width","visibleWidth"])){const e=this._columnsController.getVisibleColumns(),i=e.map(e=>e.visibleWidth||e.width);return void this.setColumnWidths({widths:i,optionNames:t})}this._requireReady||this.render()}getCellIndex(e,t){const i=e.length?e[0].cellIndex:-1;return i}getTableElements(){return this._tableElement||(0,h.A)()}getTableElement(e){return this._tableElement}setTableElement(e,t){this._tableElement=e}_afterRowPrepared(e){}_handleDataChanged(e){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){const e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){const t=this.element(),i=t&&t.children(`.${this.addWidgetPrefix("scroll-container")}`).not(`.${this.addWidgetPrefix("content-fixed")}`);(0,w.O9)(e)&&(0,w.O9)(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,i&&i.scrollLeft(e.left))}getContent(e){var t;return null===(t=this._tableElement)||void 0===t?void 0:t.parent()}_removeContent(e){const t=this.getContent(e);null!==t&&void 0!==t&&t.length&&t.remove()}handleScroll(e){const t=(0,h.A)(e.target).scrollLeft();t!==this._scrollLeft&&this.scrollChanged.fire({left:t},this.name)}_wrapTableInScrollContainer(e,t){const i=(0,h.A)("<div>"),n=this.option("scrolling.useNative");return(!1===n||"auto"===n&&!b.Ay.nativeScrolling)&&i.addClass(this.addWidgetPrefix("scrollable-simulated")),o.A.on(i,"scroll",this.handleScroll.bind(this)),i.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix("scroll-container")).append(e).appendTo(this.element()),this.setAria("role","presentation",i),i}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new m.cY,i=e||this.needWaitAsyncTemplates();if(!i||!(0,w.O9)(this._templateDeferreds))return t.resolve();const n=()=>m.z7.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?t.reject():this._templateDeferreds.size>0?n():t.resolve()}).fail(t.reject);return n(),t.promise()}_updateContent(e,t,i){return this.waitAsyncTemplates().done(()=>{this._removeContent(i),this.setTableElement(e,i),this._wrapTableInScrollContainer(e,i)})}_findContentElement(e){}_getWidths(e){if(!e)return[];const t=[],i=e.toArray();return i.forEach(e=>{let i=e.offsetWidth;if(e.getBoundingClientRect){const t=(0,f.N)(e);t.width>e.offsetWidth-1&&(i=t.width)}t.push(i)}),t}getColumnWidths(e,t){if((this.option("forceApplyBindings")||g.lQ)(),e=e??this.getTableElement(),e){const t=e.children("tbody:not(.dx-header)").children();for(let e=0;e<t.length;e++){const i=t.eq(e),n=i.hasClass("dx-group-row"),o=i.hasClass(E),s=i.hasClass("dx-error-row"),r="none"!==i.get(0).style.display&&!i.hasClass("dx-state-invisible"),l=!n&&!o&&!s;if(r&&l){const e=i.children("td"),t=this._getWidths(e);return t}}}return[]}getVisibleColumnIndex(e,t){return e}setCellPropertiesCore(e,t,i){const n=t.hasClass("dx-group-row")?t.find(`td[aria-colindex='${i+1}']:not(.dx-group-cell)`):t.find("td").eq(i);for(let o=0;o<n.length;o+=1){const t=n.get(o);Object.assign(t.style,e)}}setCellProperties(e,t,i){const n=this.getTableElement();if(null===n||void 0===n||!n.length)return;const o=n.children().children(".dx-row").not(`.${E}`);if((0,w.O9)(i))this.setCellPropertiesCore(e,o.eq(i),t);else for(let s=0;s<o.length;s++){const i=this.getVisibleColumnIndex(t,s);i>=0&&this.setCellPropertiesCore(e,o.eq(s),i)}}setColumnWidths(e){let{widths:t,optionNames:i}=e;const n=this.getTableElement();if(null===n||void 0===n||!n.length||!t)return;const o=this.getColumns(),s=this._needToSetCellWidths(),r=n.children("colgroup").children("col");r.toArray().forEach(e=>e.removeAttribute("style")),o.forEach((e,i)=>{if(s&&e.width&&!e.command){const t={},n=V(e.visibleWidth||e.width),o=V(e.minWidth||n);t.width="auto"===e.width?"":n,t.maxWidth=t.width,t.minWidth=o,this.setCellProperties(t,i)}const n=k(t[i]);(0,w.O9)(n)&&(0,x.zj)(r.eq(i),n)})}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){if(e<0)return;const t=this._getRowElements().eq(e);return t.children()}_getCellElement(e,t){const i=this.getCellElements(e),n=this._getVisibleColumnIndex(i,e,t);if(null===i||void 0===i||!i.length||n<0)return;const o=i.eq(n);return o.length>0?o:void 0}_getRowElement(e){const t=this;let i=(0,h.A)();const n=t.getTableElements();if(C.__(n,(n,o)=>{i=i.add(t._getRowElements((0,h.A)(o)).eq(e))}),i.length)return i}getCellElement(e,t){const i=this._getCellElement(e,t);if(i)return(0,d.cc)(i)}getRowElement(e){const t=this._getRowElement(e);let i=[];if(t&&!(0,d.cc)(t).get)for(let n=0;n<t.length;n++)i.push(t[n]);else i=t;return i}_getVisibleColumnIndex(e,t,i){if((0,w.Kg)(i)){const e=this._columnsController.columnOption(i,"index");return this._columnsController.getVisibleIndex(e)}return i}getColumnElements(){}getColumns(e,t){return this._columnsController.getVisibleColumns(e)}getCell(e,t,i){const n=t||this._getRowElements();let o;var s;if(n.length>0&&e.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(e.rowIndex=e.rowIndex<n.length?e.rowIndex:n.length-1),o=i||this.getCellElements(e.rowIndex),(null===(s=o)||void 0===s?void 0:s.length)>0))return o.eq(o.length>e.columnIndex?e.columnIndex:o.length-1)}getRowsCount(){const e=this.getTableElement();return e&&1===e.length?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement(),e){const t=this.option().rowTemplate||this.option("dataRowTemplate"),i=t&&e.find("> tbody.dx-row");return i&&i.length?i:e.find("> tbody > .dx-row, > .dx-row")}return(0,h.A)()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){const t=this.element(),i=this.option("rtlEnabled");t&&t.css({paddingLeft:i?e:"",paddingRight:i?"":e})}isScrollbarVisible(e){const t=this.element(),i=this._tableElement;return!(!t||!i)&&(e?(0,v.Ot)(i)-(0,v.RG)(t)>0:(0,v.P$)(i)-(0,v.Oq)(t)>0)}isDisposed(){var e;return null===(e=this.component)||void 0===e?void 0:e._disposed}renderDragCellContent(e,t){e.text(t.caption??"")}}},29644:function(e,t,i){i.d(t,{N2:function(){return x},DD:function(){return W},nF:function(){return w},lG:function(){return R}});i(82438),i(12266),i(57327);var n=i(47018),o=i(91125),s=i(20338),r=(i(50020),i(34840),i(95506));const l=()=>({type:r.ML,command:r.ML,cssClass:r.Nv.aiColumn,fixed:!1,encodeHtml:!0,minWidth:120}),a=e=>e.filter(e=>"data"===e.rowType).map(e=>e.data),d=(e,t,i)=>{const n={};for(const o of e){const e=o[i];e in t||(n[e]=o)}return n},u=e=>{var t;return"ai"===e.type&&(!(null!==(t=e.ai)&&void 0!==t&&t.mode)||"auto"===e.ai.mode)},c=(e,t)=>e.startsWith("ai.popup")||"ai"===e&&(0,n.O9)(null===t||void 0===t?void 0:t.popup),h=(e,t)=>e.startsWith("ai.editorOptions")||"ai"===e&&(0,n.O9)(null===t||void 0===t?void 0:t.editorOptions),p=(e,t)=>"ai.prompt"===e||"ai"===e&&(0,n.O9)(null===t||void 0===t?void 0:t.prompt),g=(e,t)=>{const i=["showHeaderMenu","noDataText","emptyText"],n=i.map(e=>`ai.${e}`).includes(e);if(n)return!0;if("ai"!==e)return!1;const o=Object.keys(t);return o.some(e=>i.includes(e))},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"header";return"header"===t&&e.type===r.ML},_=e=>{var t;return!1!==(null===e||void 0===e||null===(t=e.ai)||void 0===t?void 0:t.showHeaderMenu)};var C=i(93821);i(74786);class f extends o.xI{constructor(){super(...arguments),this.cache={}}clearCache(e){this.cache[e]=void 0}clearCacheByKey(e,t){const i=this.cache[e];i&&(i[t]=void 0)}getCachedResponse(e,t){const i=this.cache[e];return i?t.reduce((e,t)=>{const n=i[t];return void 0!==n&&""!==n&&(e[t]=n),e},{}):{}}setCachedResponse(e,t){const i=this.cache[e]??{};this.cache[e]=i,Object.entries(t).forEach(e=>{let[t,n]=e;i[t]=n})}getCachedString(e,t){var i;return null===(i=this.cache[e])||void 0===i?void 0:i[t]}isEmptyCache(e){return 0===Object.keys(this.cache[e]??{}).length}}class v extends o.xI{constructor(){super(...arguments),this.aborts={}}getAIIntegration(e){e||C.A.log("E1066");const t=this.columnsController.columnOption(e,"ai.aiIntegration");if(t)return t;const i=this.option("aiIntegration");return i||(C.A.log("E1067",e),null)}isRequestAwaitingCompletion(e){return!!this.aborts[e]}processCommandCompletion(e){this.abortRequest(e)}getAICommandCallbacks(e,t,i){const n={onComplete:t=>{var n;this.isRequestAwaitingCompletion(e)&&(this.aiColumnCacheController.setCachedResponse(e,t.data),this.processCommandCompletion(e),null===i||void 0===i||null===(n=i.onComplete)||void 0===n||n.call(i,t))},onError:t=>{var n;const o=(null===t||void 0===t?void 0:t.message)??t;this.showError(o),this.processCommandCompletion(e),null===i||void 0===i||null===(n=i.onError)||void 0===n||n.call(i,t)}};return n}init(){this.columnsController=this.getController("columns"),this.dataController=this.getController("data"),this.errorHandlingController=this.getController("errorHandling"),this.aiColumnCacheController=new f(this.component),this.aiColumnCacheController.init(),this.createAction("onAIColumnRequestCreating")}sendRequestCore(e){let{columnName:t,useCache:i,needToShowLoadPanel:n,callbacks:o}=e;const s=this.getAIIntegration(t);if(!s)return;const r=this.columnsController.getColumnByName(t);if(null===r||void 0===r||!r.ai)return;const{prompt:l}=r.ai;if(!l)return;this.isRequestAwaitingCompletion(t)&&(this.abortRequest(t),o.onRequestCanceled());const u=this.dataController.items(),c=a(u),h={column:r,useCache:i,cancel:!1,additionalInfo:{},data:c};if(this.executeAction("onAIColumnRequestCreating",h),h.cancel)return;const p=this.dataController.key();let g={};if(h.useCache){const e=c.map(e=>e[p]);g=this.aiColumnCacheController.getCachedResponse(t,e)}const m=d(h.data,g,p),_=0===Object.keys(m).length;if(_)return;o.onRequestSending(n);const C=s.generateGridColumn({text:l,data:m,additionalInfo:h.additionalInfo},this.getAICommandCallbacks(t,g,o));this.aborts[t]=C}isAnyRequestAwaitingCompletion(){return Object.values(this.aborts).some(e=>!!e)}abortRequest(e){var t,i;null===(t=(i=this.aborts)[e])||void 0===t||t.call(i),this.aborts[e]=void 0}showError(e){var t;null===(t=this.errorHandlingController)||void 0===t||t.showToastError(e)}getAIColumnText(e,t){return this.aiColumnCacheController.getCachedString(e,t)}clearAIColumn(e){this.aiColumnCacheController.clearCache(e)}clearAIColumnByKey(e,t){this.aiColumnCacheController.clearCacheByKey(e,t)}dispose(){super.dispose(),Object.keys(this.aborts).forEach(e=>this.abortRequest(e))}}class x extends o.xI{getDefaultCellValue(e,t){var i,n;return void 0===t?(null===(n=e.ai)||void 0===n?void 0:n.emptyText)??null:(null===(i=e.ai)||void 0===i?void 0:i.noDataText)??null}_endCustomLoadingIfNoPendingRequests(){this.aiColumnIntegrationController.isAnyRequestAwaitingCompletion()||this.dataController.endCustomLoading()}addAICommandColumn(){const e=this,{dataController:t,aiColumnIntegrationController:i}=this;this.columnsController.addCommandColumn(Object.assign({},l(),{calculateCellValue(n){const o=t.keyOf(n),s=i.getAIColumnText(this.name,o),r=e.getDefaultCellValue(this,s);return s||r}}))}subscribeToDataSourceChanged(){var e;this.dataSourceChangedHandler=this.handleDataSourceChanged.bind(this),null===(e=this.dataController.dataSource())||void 0===e||e.changed.add(this.dataSourceChangedHandler)}unsubscribeFromDataControllerChanged(){this.dataControllerChangedHandler&&this.dataController.changed.remove(this.dataControllerChangedHandler)}subscribeToDataControllerChanged(){this.getAIColumns().length&&s.A.isVirtualRowRendering(this)&&(this.dataControllerChangedHandler=this.dataControllerChangedHandler??this.handleDataControllerChanged.bind(this),this.dataController.changed.add(this.dataControllerChangedHandler))}handleDataControllerChanged(){this.dataController.isViewportChanging()&&this.sendRequests()}unsubscribeFromStoreEvents(){const e=this.dataController.store();this.storeUpdatedHandler&&(null===e||void 0===e||e.off("updated",this.storeUpdatedHandler)),this.storeRemovedHandler&&(null===e||void 0===e||e.off("removed",this.storeRemovedHandler)),this.storeBeforePushHandler&&(null===e||void 0===e||e.off("beforePush",this.storeBeforePushHandler))}subscribeToStoreEvents(){const e=this.dataController.store();e&&(this.storeUpdatedHandler=this.storeUpdatedHandler??this.handleStoreUpdated.bind(this),this.storeRemovedHandler=this.storeRemovedHandler??this.handleStoreRemoved.bind(this),this.storeBeforePushHandler=this.storeBeforePushHandler??this.handleStoreBeforePush.bind(this),e.on("updated",this.storeUpdatedHandler),e.on("removed",this.storeRemovedHandler),e.on("beforePush",this.storeBeforePushHandler))}handleStoreUpdated(e){this.clearAIColumnsByKey(e)}handleStoreRemoved(e){this.clearAIColumnsByKey(e)}handleStoreBeforePush(e){let{changes:t}=e;t.forEach(e=>{let{key:t}=e;(0,n.O9)(t)&&this.clearAIColumnsByKey(t)})}updateAICells(){this.dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}checkStoreKey(){const e=this.dataController.store();return!(e&&!e.key())||(this.dataController.fireError("E1042","AI Column"),!1)}clearAIColumnsByKey(e){const t=this.getAIColumns();t.forEach(t=>{this.aiColumnIntegrationController.clearAIColumnByKey(t.name,e)})}sendRequests(){const e=this.getAIColumns();if(e.length&&this.checkStoreKey())for(const t of e)u(t)&&this.sendRequest(t.name,!0)}handleDataSourceChanged(e){"loadError"!==(null===e||void 0===e?void 0:e.changeType)&&this.sendRequests()}callbackNames(){return["aiRequestCompleted","aiRequestRejected"]}init(){this.columnsController=this.getController("columns"),this.dataController=this.getController("data"),this.aiColumnIntegrationController=new v(this.component),this.aiColumnIntegrationController.init(),this.aiColumnOptionChangedHandler=this.aiColumnOptionChanged.bind(this),this.columnsController.aiColumnOptionChanged.add(this.aiColumnOptionChangedHandler),this.subscribeToDataSourceChanged(),this.unsubscribeFromStoreEvents(),this.subscribeToStoreEvents(),this.unsubscribeFromDataControllerChanged(),this.subscribeToDataControllerChanged(),this.addAICommandColumn()}getAIColumns(){return this.columnsController.getColumns().filter(e=>"ai"===e.type)}publicMethods(){return["abortAIColumnRequest","sendAIColumnRequest","refreshAIColumn","clearAIColumn","getAIColumnText"]}abortAIColumnRequest(e){this.aiColumnIntegrationController.abortRequest(e),this._endCustomLoadingIfNoPendingRequests()}sendRequest(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.checkStoreKey())return;const n=this.getRequestCallbacks();this.aiColumnIntegrationController.sendRequestCore({columnName:e,useCache:t,needToShowLoadPanel:i,callbacks:n})}sendAIColumnRequest(e){this.sendRequest(e,!1)}refreshAIColumn(e){this.sendRequest(e,!1)}getRequestCallbacks(){return{onRequestSending:e=>{e&&this.dataController.beginCustomLoading()},onComplete:e=>{this._endCustomLoadingIfNoPendingRequests(),this.aiRequestCompleted.fire(e),this.updateAICells()},onError:e=>{this._endCustomLoadingIfNoPendingRequests(),this.aiRequestRejected.fire(e)},onRequestCanceled:()=>{this._endCustomLoadingIfNoPendingRequests()}}}clearAIColumn(e){this.abortAIColumnRequest(e),this.aiColumnIntegrationController.clearAIColumn(e),this.columnsController.columnOption(e,"ai.prompt",""),this.updateAICells()}getAIColumnText(e,t){return this.aiColumnIntegrationController.getAIColumnText(e,t)}aiColumnOptionChanged(e,t,i){const n=p(t,i);var o;n&&e.name&&(this.aiColumnIntegrationController.clearAIColumn(e.name),null!==(o=e.ai)&&void 0!==o&&o.prompt||this.updateAICells())}dispose(){var e;super.dispose(),null===(e=this.dataController.dataSource())||void 0===e||e.changed.remove(this.dataSourceChangedHandler),this.unsubscribeFromStoreEvents(),this.unsubscribeFromDataControllerChanged()}}class w extends o.WO{init(){this.aiPromptEditorView=this.getView("aiPromptEditorView")}show(e,t){return this.aiPromptEditorView.show(e,t)}hide(){return this.aiPromptEditorView.hide()}}i(99819);var y=i(63027),b=i(85563),I=i(12438),S=i(27665);const A=()=>(0,S.N)(r.iv),E=()=>(0,b.A)("<div>").addClass(r.Nv.aiColumnHeaderContent),R=e=>class extends e{getDropDownButtonItems(e){var t,i;return[{key:"autoFill",icon:r.RN.autoFill,text:y.A.format("dxDataGrid-aiDropDownAutofill")},{key:"regenerate",icon:r.RN.regenerate,text:y.A.format("dxDataGrid-aiPromptEditorRegenerateButton"),disabled:!(null!==(t=e.ai)&&void 0!==t&&t.prompt)},{key:"clear",icon:r.RN.clear,text:y.A.format("dxDataGrid-aiDropDownClear"),disabled:!(null!==(i=e.ai)&&void 0!==i&&i.prompt)}]}getDropDownButtonInstance(e){return I.A.getInstance(e.find(`.${r.Nv.aiColumnHeaderButton}`)[0])}getDropDownButtonConfig(e,t){const i="right"===e.alignment?"left":"right";return{showArrowIcon:!1,icon:"overflow",stylingMode:"text",useItemTextAsTitle:!1,items:this.getDropDownButtonItems(e),onItemClick:i=>{const{key:n}=i.itemData;switch(n){case"autoFill":this.aiPromptEditorController.show(t[0],e);break;case"regenerate":this.aiColumnController.sendRequest(e.name,!1);break;case"clear":this.aiColumnController.clearAIColumn(e.name)}},dropDownOptions:{width:180,position:{of:t[0],at:`${i} bottom`,my:`${i} top`},onShown:()=>{this.activeDropDownButtonInstance=this.getDropDownButtonInstance(t)},onHidden:()=>{this.activeDropDownButtonInstance=null},onDisposing:()=>{this.activeDropDownButtonInstance=null}}}}renderHeaderDropDownButton(e,t){const i=(0,b.A)("<div>").addClass(r.Nv.aiColumnHeaderButton).appendTo(t);this._createComponent(i,I.A,this.getDropDownButtonConfig(e,t))}renderAIHeader(e,t){const i=A(),n=E(),o=this.createCellContent(e,t);o.text(t.caption??""),n.append(i).append(o).appendTo(e)}getHeaderDefaultTemplate(e,t){m(t.column)?this.renderAIHeader(e,t.column):super.getHeaderDefaultTemplate(e,t)}_processTemplate(e,t){const i=super._processTemplate(e,t),n=m(t.column,t.rowType)&&_(t.column);return i&&n?{render:e=>{i.render(e),this.renderHeaderDropDownButton(e.model.column,(0,b.A)(e.container))}}:i}aiColumnOptionChanged(e,t,i){const n=p(t,i);if(n){const t=this._columnsController.getVisibleIndex(e.index),i=this.getHeaderElement(t),n=this.getDropDownButtonInstance(i);null===n||void 0===n||n.option("items",this.getDropDownButtonItems(e))}}init(){super.init(),this.aiColumnController=this.getController("aiColumn"),this.aiPromptEditorController=this.getController("aiPromptEditor"),this.columnsResizer=this.getController("columnsResizer"),this.columnsResizer.resizeStarted.add(()=>{var e;null===(e=this.activeDropDownButtonInstance)||void 0===e||e.close(),this.aiPromptEditorController.hide()}),this.aiColumnOptionChangedHandler=this.aiColumnOptionChanged.bind(this),this._columnsController.aiColumnOptionChanged.add(this.aiColumnOptionChangedHandler)}renderDragCellContent(e,t){t.type!==r.ML?super.renderDragCellContent(e,t):this.renderAIHeader(e,t)}};var O=i(52334),T=i(74805),V=i(89021),F=i(23605);const P={width:360,height:"auto",visible:!1},D={aiDialog:"dx-aidialog",aiPromptEditor:"dx-ai-prompt-editor",aiPromptEditorTextArea:"dx-ai-prompt-editor__text-area",aiPromptEditorRefreshButton:"dx-ai-prompt-editor__refresh-button",aiPromptEditorApplyButton:"dx-ai-prompt-editor__apply-button",aiPromptEditorStopButton:"dx-ai-prompt-editor__stop-button",aiPromptEditorProgressBar:"dx-ai-prompt-editor__progressbar"},k=0,B=1,H=2,z=e=>e??"",M=(e,t)=>z(e)!==z(t);class N{constructor(e){this.options=e,this.currentAction=null;const{container:t,createComponent:i}=e;t.addClass(D.aiPromptEditor),this.prompt=z(e.prompt),this.popupInstance=i(t,T.A,this.getPopupConfig())}updateButtonOption(e,t,i){this.popupInstance.option(`toolbarItems[${e}].options.${t}`,i)}updateToolbarItemVisibility(e,t){this.popupInstance.option(`toolbarItems[${e}].visible`,t)}getTextAreaConfig(){return Object.assign({value:this.prompt,height:110,stylingMode:"outlined",onValueChanged:e=>{this.updateButtonOption(B,"disabled",!e.value||e.value===this.prompt),this.updateButtonOption(k,"disabled",!e.value||e.value!==this.prompt)},placeholder:y.A.format("dxDataGrid-aiPromptEditorPlaceholder"),valueChangeEvent:"input change keyup"},this.options.editorOptions)}getPopupConfig(){return Object.assign({},P,{shading:!1,shadingColor:"transparent",dragEnabled:!0,hideOnOutsideClick:!0,showCloseButton:!0,title:y.A.format("dxDataGrid-aiPromptEditorTitle"),wrapperAttr:{class:`${D.aiPromptEditor} ${D.aiDialog}`},contentTemplate:e=>{const t=(0,b.A)("<div>").addClass(D.aiPromptEditorTextArea).appendTo(e),i=(0,b.A)("<div>").addClass(D.aiPromptEditorProgressBar).appendTo(e);this.editorInstance=this.options.createComponent(t,F.A,this.getTextAreaConfig()),this.progressBar=this.options.createComponent(i,V.A,{value:!1,visible:!1,showStatus:!1,width:"100%"})},toolbarItems:[{toolbar:"bottom",location:"before",widget:"dxButton",options:this.getRegenerateDataButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this.getApplyButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",visible:!1,options:this.getStopButtonConfig()}]},this.options.popupOptions)}getApplyButtonConfig(){return{type:"default",icon:"arrowright",stylingMode:"contained",text:y.A.format("dxDataGrid-aiPromptEditorApplyButton"),disabled:!this.editorInstance||!M(this.prompt,this.editorInstance.option("value")),elementAttr:{class:D.aiPromptEditorApplyButton},onClick:this.options.onSubmit}}getRegenerateDataButtonConfig(){return{icon:"refresh",stylingMode:"outlined",text:y.A.format("dxDataGrid-aiPromptEditorRegenerateButton"),disabled:!this.prompt,elementAttr:{class:D.aiPromptEditorRefreshButton},onClick:this.options.onRefresh}}getStopButtonConfig(){return{type:"default",icon:"square",stylingMode:"contained",text:y.A.format("dxDataGrid-aiPromptEditorStopButton"),elementAttr:{class:D.aiPromptEditorStopButton},onClick:this.options.onStop}}setPrompt(e){this.prompt=z(e)}toggleDisableState(e){const t=this.getEditorValue();this.updateButtonOption(k,"disabled",!!e||M(this.prompt,t)),this.updateButtonOption(B,"disabled",!!e||!M(this.prompt,t)),this.editorInstance.option("disabled",e),this.popupInstance.option("shading",e),this.popupInstance.option("hideOnOutsideClick",!e)}getEditorValue(){return this.editorInstance.option("value")}show(){return this.popupInstance.show()}hide(){return this.popupInstance.hide()}isVisible(){return!0===this.popupInstance.option("visible")}toggleApplyButtonVisibility(e){this.updateToolbarItemVisibility(B,e),this.updateToolbarItemVisibility(H,!e)}setLoading(e){this.progressBar.option("visible",e)}updatePrompt(e){this.setPrompt(e),this.editorInstance.option("value",e)}updateStateOnAction(e){switch(this.currentAction=e,e){case"apply":case"regenerate":this.setLoading(!0),this.toggleDisableState(!0),this.toggleApplyButtonVisibility(!1);break;case"stop":this.setLoading(!1),this.toggleDisableState(!1),this.toggleApplyButtonVisibility(!0)}}updateOptions(e){this.options=e,this.updatePrompt(z(e.prompt)),this.popupInstance.option(this.getPopupConfig())}isApplying(){return"apply"===this.currentAction}}var L=i(66692);class W extends o.Ss{getAIPromptEditorConfig(e){var t,i,n;const o="right"===e.alignment?"left":"right",s=this.columnsController.getVisibleIndex(e.index);return{prompt:(null===(t=e.ai)||void 0===t?void 0:t.prompt)??"",container:this.element(),createComponent:this._createComponent.bind(this),onSubmit:()=>{this.promptEditorInstance.updateStateOnAction("apply"),this.columnsController.columnOption(e.index,"ai.prompt",this.promptEditorInstance.getEditorValue(),!0)},onStop:()=>{this.promptEditorInstance.updateStateOnAction("stop"),this.aiColumnController.abortAIColumnRequest(e.name)},onRefresh:()=>{this.promptEditorInstance.updateStateOnAction("regenerate"),this.aiColumnController.sendRequest(e.name,!1,!1)},popupOptions:Object.assign({container:O.A.getBody(),onHiding:()=>{this.promptEditorInstance.updateStateOnAction("stop"),this.aiColumnController.abortAIColumnRequest(e.name)},position:{my:`${o} top`,at:`${o} bottom`,of:(0,L.n1)(s),collision:"fit",boundary:this.component.element()}},null===(i=e.ai)||void 0===i?void 0:i.popup),editorOptions:Object.assign({},null===(n=e.ai)||void 0===n?void 0:n.editorOptions)}}updatePromptEditorInstance(e){const t=this.getAIPromptEditorConfig(e);this.promptEditorInstance?this.promptEditorInstance.updateOptions(t):this.promptEditorInstance=new N(t)}ensureAIPromptEditorVisibility(){const e=this.aiColumnController.getAIColumns(),t=e.filter(e=>{var t;return null===(t=e.ai)||void 0===t||null===(t=t.popup)||void 0===t?void 0:t.visible});t.length>0&&this.updatePromptEditorInstance(t[0])}init(){this.columnsController=this.getController("columns"),this.aiColumnController=this.getController("aiColumn"),this.aiColumnController.aiRequestCompleted.add(()=>{var e,t;null===(e=this.promptEditorInstance)||void 0===e||e.updatePrompt(this.promptEditorInstance.getEditorValue()),null===(t=this.promptEditorInstance)||void 0===t||t.updateStateOnAction("stop")}),this.aiColumnController.aiRequestRejected.add(()=>{var e;null===(e=this.promptEditorInstance)||void 0===e||e.updateStateOnAction("stop")}),this.renderCompleted.add(()=>{this.ensureAIPromptEditorVisibility()}),this.aiColumnOptionChangedHandler=this.aiColumnOptionChanged.bind(this),this.columnsController.aiColumnOptionChanged.add(this.aiColumnOptionChangedHandler)}show(e,t){const i=(0,b.A)(e);return null!==i&&void 0!==i&&i.length&&(null===t||void 0===t?void 0:t.type)===r.ML?(this.updatePromptEditorInstance(t),this.promptEditorInstance.show()):Promise.resolve(!1)}hide(){var e;return null===(e=this.promptEditorInstance)||void 0===e?void 0:e.hide()}getPromptEditorInstance(){return this.promptEditorInstance}aiColumnOptionChanged(e,t,i){var n;const o=p(t,i);var s,r;o&&(null===(s=this.promptEditorInstance)||void 0===s||s.updatePrompt(i));o&&(u(e)||null!==(n=this.promptEditorInstance)&&void 0!==n&&n.isApplying())&&this.aiColumnController.sendRequest(e.name,!1,!(null!==(r=this.promptEditorInstance)&&void 0!==r&&r.isVisible()));const l=c(t,i),a=h(t,i);(l||a)&&this.updatePromptEditorInstance(e),g(t,i)}}},31236:function(e,t,i){i.d(t,{o:function(){return V}});i(69375),i(82438),i(99819),i(57327),i(50020),i(74786),i(34840),i(32225);var n=i(22044),o=i(24906),s=i(97522),r=i(63027),l=i(85563),a=i(26228),d=i(44956),u=i(89214),c=i(94360),h=i(63825),p=i(97991),g=i(50172),m=i(57064),_=i(20338),C=i(29410);const f="dx-master-detail-row",v=function(e){let t=-1;return(0,u.__)(e,(e,i)=>{if("transparent"===i.command)return t=e,!1}),t},x=function(e,t,i){let n=0;if(e&&t&&i)for(let o=0;o<e.length;o++)"transparent"===e[o].command?n+=e[o].colspan:(t[n]<i[o]&&(t[n]=i[o]),n++);return t},w=e=>class extends e{init(){super.init(),this._isFixedTableRendering=!1,this._isFixedColumns=!1}_createCol(e){return super._createCol(e).toggleClass("dx-col-fixed",!(!this._isFixedTableRendering||!(e.fixed||e.command&&"transparent"!==e.command)))}isIndicesArray(e){return Array.isArray(e)&&e.length>0}_correctColumnIndicesForFixedColumns(e,t){var i;const n=null===t||void 0===t?void 0:t.columnIndices;if(!this.isIndicesArray(n))return;const o=v(e),s=e[o].colspan,r=o+s,l=null===t||void 0===t||null===(i=t.items)||void 0===i?void 0:i.map(e=>{let{rowType:t}=e;return t});t.columnIndices=n.map((e,t)=>{if(!this.isIndicesArray(e))return e;const i=l&&"group"===l[t];return i?[...e]:e.reduce((e,t)=>{switch(!0){case t<o:e.push(t);break;case t>=r:e.push(t-s+1)}return e},[])})}_partialUpdateFixedTable(e,t){const i=this._fixedTableElement,n=this._getRowElementsCore(i),o=i.children("colgroup");o.replaceWith(this._createColGroup(e));for(let s=0;s<t.length;s++)this._partialUpdateFixedRow((0,l.A)(n[s]),e,t[s])}_partialUpdateFixedRow(e,t,i){const n=e.get(0).childNodes,o=v(t),s=t[o],r=this._columnsController.getColumnIndexOffset();let l,a=r+1,{colspan:d}=s;if(e.hasClass(f)){var u;n[0].setAttribute("colspan",null===(u=this._columnsController.getVisibleColumns())||void 0===u?void 0:u.length)}else{if(e.hasClass("dx-group-row")){l=this._getGroupCellOptions({row:i,columns:this._columnsController.getVisibleColumns()});const e=i.summaryCells.length>0;if(e){const e=this._getAlignByColumnCellCount(l.colspan,{columns:this._columnsController.getVisibleColumns(),row:i,isFixed:!0});d=l.colspan-e}else d=l.colspan-Math.max(0,n.length-(l.columnIndex+2))}for(let e=0;e<n.length;e++){const t=l?e===l.columnIndex+1:e===o;n[e].setAttribute("aria-colindex",a),t?(n[e].setAttribute("colspan",d),a+=d):a++}}}_renderTable(e){let t;const i=this.getFixedColumns();this._isFixedColumns=this.isFixedColumns();const n=super._renderTable(e);if(this._isFixedColumns){var o;const n=null===e||void 0===e?void 0:e.change,r=this._getRowElements(this._fixedTableElement),l=(null===n||void 0===n?void 0:n.virtualColumnsScrolling)&&r.length===(null===n||void 0===n||null===(o=n.items)||void 0===o?void 0:o.length);if(this._isFixedTableRendering=!0,l&&!0!==this.option("scrolling.legacyMode")){var s;this._partialUpdateFixedTable(i,null===e||void 0===e||null===(s=e.change)||void 0===s?void 0:s.items),this._isFixedTableRendering=!1}else{const o=null===n||void 0===n?void 0:n.columnIndices;this._correctColumnIndicesForFixedColumns(i,n),t=this._createTable(i),this._renderRows(t,(0,d.X)({},e,{columns:i})),this._updateContent(t,n,!0),o&&(n.columnIndices=o),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return n}_renderRow(e,t){let i,{cells:n}=t.row;if(super._renderRow.apply(this,arguments),this._isFixedTableRendering&&n&&n.length){i=0;const e=t.row.cells||[];n=n.slice(),t.row.cells=n;for(let t=0;t<e.length;t++)e[t].column&&"transparent"===e[t].column.command?i=(e[t].column.colspan||1)-1:n[t+i]=e[t]}}_createCell(e){const t=this,{column:i}=e,n=i&&i.command,{rowType:o}=e,s=super._createCell.apply(t,arguments);let r,l,d;(t._isFixedTableRendering||"filter"===o)&&(r=t.getFixedColumns(),d=v(r),l=r[d-1]),t._isFixedTableRendering?"transparent"===n&&(s.addClass("dx-pointer-events-none").toggleClass("dx-first-cell",0===d||l&&"expand"===l.command).toggleClass("dx-last-cell",r.length&&d===r.length-1),"freeSpace"!==o&&_.A.setEmptyText(s)):"filter"===o&&s.toggleClass("dx-first-cell",e.columnIndex===d);const u=t.option("rowAlternationEnabled")&&e.isAltRow,c="multiple"===t.option("selection.mode")&&0===e.columnIndex&&"header"===e.rowType;return a.A.mozilla&&e.column.fixed&&"group"!==e.rowType&&!u&&!c&&s.addClass("dx-col-fixed"),s}_wrapTableInScrollContainer(e,t){const i=super._wrapTableInScrollContainer.apply(this,arguments);return(this._isFixedTableRendering||t)&&i.addClass(this.addWidgetPrefix("content-fixed")),i}_renderCellContent(e,t){let i;const{column:n}=t,o=this._isFixedTableRendering,s="group"===t.rowType&&(0,g.O9)(n.groupIndex);if(o&&s&&!n.command&&!n.groupCellTemplate&&e.css("pointerEvents","none"),!o&&this._isFixedColumns){if(i=n.fixed||n.command&&!1!==n.fixed,s&&(i=!1,t.row.summaryCells&&t.row.summaryCells.length)){var r;const e=this._columnsController.getVisibleColumns(),o=(null===(r=this._getAlignByColumnCellCount)||void 0===r?void 0:r.call(this,n.colspan,{columns:e,row:t.row,isFixed:!0}))??0;if(o>0){const t=v(this._columnsController.getFixedColumns());i=e.length-o<t}}if(i){if(n.command&&"buttons"!==n.type||"group"===t.rowType)return void e.html("&nbsp;").addClass(n.cssClass);e.addClass("dx-hidden-cell")}}"transparent"!==n.command&&super._renderCellContent.apply(this,arguments)}getContent(e){var t;return e?null===(t=this._fixedTableElement)||void 0===t?void 0:t.parent():super.getContent.apply(this,arguments)}_getCellElementsCore(e){const t=super._getCellElementsCore.apply(this,arguments),i=null===t||void 0===t?void 0:t.parent().hasClass("dx-group-row"),n="columnHeadersView"===this.name?e:void 0;if(this._fixedTableElement&&t){const o=this.getFixedColumns(n),s=this._getRowElements(this._fixedTableElement).eq(e).children("td");(0,u.__)(s,(e,r)=>{if(i)t[e]&&"hidden"!==r.style.visibility&&(t[e]=r);else{const i=o[e];if(i)if("transparent"===i.command)s.eq(e).hasClass("dx-master-detail-cell")&&(t[e]=r||t[e]);else{const e=this._columnsController.getVisibleIndexByColumn(i,n);t[e]=r||t[e]}}})}return t}getColumnWidths(e,t){const i=super.getColumnWidths(e,t),n=this.getFixedColumns(),o=this._fixedTableElement&&i.length?super.getColumnWidths(this._fixedTableElement):void 0;return x(n,i,o)}getTableElement(e){e=this._isFixedTableRendering||e;const t=e?this._fixedTableElement:super.getTableElement();return t}setTableElement(e,t){this._isFixedTableRendering||t?this._fixedTableElement=e.addClass("dx-pointer-events-none"):super.setTableElement(e)}getColumns(e){const t=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(e):super.getColumns(e,t)}getRowIndex(e){const t=this._fixedTableElement;return t&&t.find(e).length?this._getRowElements(t).index(e):super.getRowIndex(e)}getTableElements(){let e=super.getTableElements.apply(this,arguments);return this._fixedTableElement&&(e=(0,l.A)([e.get(0),this._fixedTableElement.get(0)])),e}getFixedColumns(e){return this._columnsController.getFixedColumns(e)}getFixedColumnsOffset(){let e,t={left:0,right:0};if(this._fixedTableElement){e=this.getTransparentColumnElement();const i=e.position();t={left:i.left,right:(0,h.Ot)(this.element(),!0)-((0,h.Ot)(e,!0)+i.left)}}return t}getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".dx-pointer-events-none").first()}getFixedTableElement(){return this._fixedTableElement}_resizeCore(){super._resizeCore(),this.synchronizeRows()}setColumnWidths(e){var t;const{widths:i}=e,n=this._columnsController.getVisibleColumns(),o=(null===i||void 0===i?void 0:i.length)&&n.some(e=>(0,g.O9)(e.visibleWidth)),s=null===(t=e.optionNames)||void 0===t?void 0:t.width;if(super.setColumnWidths(e),this._fixedTableElement){const e=null===i||void 0===i?void 0:i.some(e=>"auto"===e||!(0,g.O9)(e)),t=e&&(!o||!this.isScrollbarVisible(!0)),s=t?n:this.getFixedColumns();this.setFixedTableColumnWidths(s,i)}const r=this.option("wordWrapEnabled"),l=o||s&&r;l&&this.synchronizeRows()}setFixedTableColumnWidths(e,t){if(!this._fixedTableElement||!t)return;const i=this._fixedTableElement.children("colgroup").children("col");i.toArray().forEach(e=>e.removeAttribute("style"));let n=0;e.forEach(e=>{if(e.colspan)return void(n+=e.colspan);const o=(0,C.W)(t[n]);(0,g.O9)(o)&&(0,p.zj)(i.eq(n),o),n+=1})}_getClientHeight(e){const t=e.getBoundingClientRect&&(0,c.N)(e);return t&&t.height?t.height:e.clientHeight}synchronizeRows(){const e=[],t=[];let i,n,o,s;this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){const r=this._getClientHeight(this._tableElement.get(0)),l=this._getClientHeight(this._fixedTableElement.get(0));if(n=this._getRowElements(this._tableElement),o=this._getRowElements(this._fixedTableElement),s=this._findContentElement(),r!==l){for(s&&s.css("height",r),n.css("height",""),o.css("height",""),i=0;i<n.length;i++)e.push(this._getClientHeight(n.get(i))),t.push(this._getClientHeight(o.get(i)));for(i=0;i<n.length;i++){const s=e[i],r=t[i];s>r?o.eq(i).css("height",s):s<r&&n.eq(i).css("height",r)}s&&s.css("height","")}}})}setScrollerSpacing(e,t){const i=this.option("rtlEnabled");super.setScrollerSpacing(e),this.element().children(`.${this.addWidgetPrefix("content-fixed")}`).css({paddingLeft:i?e:"",paddingRight:i?"":e})}isFixedColumns(){const e=this.getFixedColumns(),t=this.option("columnFixing.legacyMode");return!0===t&&!!e.length}},y=e=>class extends(w(e)){_getRowVisibleColumns(e){return this._isFixedTableRendering?this.getFixedColumns(e):super._getRowVisibleColumns(e)}getFixedColumnElements(e){const t=this;if(!this._isFixedColumns)return;if((0,g.O9)(e))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(e).children();const i=t.getColumnElements(),n=t.getTransparentColumnElement();if(i&&n&&n.length){var o;const e=v(t.getFixedColumns());[].splice.apply(i,[e,null===(o=n.get(0))||void 0===o?void 0:o.colSpan,n.get(0)])}return i}getColumnWidths(e,t){const i=this;let n;const o=super.getColumnWidths(e,t),s=i.getFixedColumnElements(),r=i.getFixedColumns();return i._fixedTableElement&&(n=s&&s.length?i._getWidths(s):super.getColumnWidths(i._fixedTableElement)),x(r,o,n)}},b=e=>class extends(w(e)){dispose(){super.dispose.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}optionChanged(e){super.optionChanged(e),"hoverStateEnabled"===e.name&&this._isFixedColumns&&(e.value?this._attachHoverEvents():this._detachHoverEvents())}_detachHoverEvents(){const e=this.element();this._fixedTableElement&&this._tableElement&&o.A.off(e,"mouseover mouseout",".dx-data-row")}_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&o.A.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(e=>{const{event:t}=e,i=this.getRowIndex((0,l.A)(t.target).closest(".dx-row")),n="mouseover"===t.type;i>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(i).toggleClass("dx-state-hover",n),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(i).toggleClass("dx-state-hover",n))}))}_getScrollDelay(){var e;const t=null===(e=this._resizingController)||void 0===e?void 0:e.hasResizeTimeout();return t?this.option("scrolling.updateTimeout"):a.A.mozilla?60:0}_findContentElement(e){let t,i;const n=this.addWidgetPrefix("content"),r=this.element();if(e=this._isFixedTableRendering||e,r&&e){t=r.children(`.${n}`);const e=this.getScrollable();return!t.length&&e&&(t=(0,l.A)("<div>").addClass(n),o.A.on(t,"scroll",t=>{const{target:n}=t,o=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{i=(0,l.A)(n).scrollTop(),e.scrollTo({y:i})},o)}),o.A.on(t,s.U,t=>{const n=(0,l.A)(t.target).closest(".dx-scrollable");let o=!1;if(e&&e.$element().is(n))o=!0;else{const e=n.length&&m.A.getInstance(n.get(0)),t=e&&e.scrollHeight()-e.clientHeight()>0;o=e&&!t}if(o){i=e.scrollTop(),e.scrollTo({y:i-t.delta});const n=e.scrollTop()+e.clientHeight(),o=e.scrollHeight()+this.getScrollbarWidth(),s=e.scrollTop()>0&&n<o;if(s)return!1}}),t.appendTo(r)),t}return super._findContentElement()}_updateScrollable(){super._updateScrollable();const e=this.getScrollable();if(null!==e&&void 0!==e&&e._disposed)return;const t=e&&e.scrollOffset().top;this._updateFixedTablePosition(t)}_renderContent(e,t,i){return this._isFixedTableRendering||i?e.empty().addClass(`${this.addWidgetPrefix("content")} ${this.addWidgetPrefix("content-fixed")}`).append(t):super._renderContent(e,t)}_getGroupCellOptions(e){return this._isFixedTableRendering?super._getGroupCellOptions((0,d.X)({},e,{columns:this._columnsController.getVisibleColumns()})):super._getGroupCellOptions(e)}_renderGroupedCells(e,t){return super._renderGroupedCells(e,(0,d.X)({},t,{columns:this._columnsController.getVisibleColumns()}))}_renderGroupSummaryCells(e,t){this._isFixedTableRendering?super._renderGroupSummaryCells(e,(0,d.X)({},t,{columns:this._columnsController.getVisibleColumns()})):super._renderGroupSummaryCells(e,t)}_hasAlignByColumnSummaryItems(e,t){const i=super._hasAlignByColumnSummaryItems.apply(this,arguments),n=t.columns[e];return t.isFixed?n.fixed&&(i||"right"===n.fixedPosition):i&&(!this._isFixedColumns||!n.fixed)}_renderGroupSummaryCellsCore(e,t,i,n){let o;if(this._isFixedTableRendering){t.isFixed=!0,o=this._getAlignByColumnCellCount(i,t),t.isFixed=!1;const s=t.columns.length-o;t=(0,d.X)({},t,{columns:this.getFixedColumns()});const r=v(t.columns);s<r?(o-=t.columns[r].colspan-1||0,i-=t.columns[r].colspan-1||0):n>0&&e.css("visibility","hidden"),n=o}super._renderGroupSummaryCellsCore(e,t,i,n)}_getSummaryCellIndex(e,t){if(this._isFixedTableRendering){const i=v(t);return e>i&&(e+=t[i].colspan-1),e}return super._getSummaryCellIndex.apply(this,arguments)}_renderCore(e){this._detachHoverEvents();const t=super._renderCore(e),i=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",i),this.option("hoverStateEnabled")&&i&&this._attachHoverEvents(),t}setAriaOwns(e,t,i){if(i){var n;const i=this.addWidgetPrefix("content-fixed"),o=null===(n=this.element())||void 0===n?void 0:n.children(`.${i}`),s=this.getFixedTableElement();o.length&&null!==s&&void 0!==s&&s.length&&this.setAria("owns",`${e??""} ${s.attr("id")??""} ${t??""}`.trim(),o)}else super.setAriaOwns.apply(this,arguments)}toggleDraggableColumnClass(e,t){if(super.toggleDraggableColumnClass(e,t),this.isFixedColumns()){const i=this._getRowElements(this._fixedTableElement);this._toggleDraggableSourceColumnClass(i,this.getFixedColumns(),e,t)}}getCellIndex(e){const t=this._fixedTableElement;let i=0;if(t&&e.is("td")&&e.closest(t).length){const t=this.getFixedColumns();return(0,u.__)(t,(t,n)=>{if(t===e[0].cellIndex)return!1;n.colspan?i+=n.colspan:i++}),i}return super.getCellIndex.apply(this,arguments)}_updateFixedTablePosition(e,t){if(this._fixedTableElement&&this._tableElement){let i;this._fixedTableElement.parent().scrollTop(e),t&&this._editorFactoryController&&(i=this._editorFactoryController.focus(),i&&this._editorFactoryController.focus(i))}}setScrollerSpacing(e,t){const i=this,n={marginBottom:0},o=i.element().children(`.${this.addWidgetPrefix("content-fixed")}`);if(o.length&&i._fixedTableElement){o.css(n),i._fixedTableElement.css(n),n[i.option("rtlEnabled")?"marginLeft":"marginRight"]=e,n.marginBottom=t;const s=i._scrollable&&i._scrollable.option("useNative");(s?o:i._fixedTableElement).css(n)}}_getElasticScrollTop(e){let t=0;if(e.scrollOffset.top<0)t=-e.scrollOffset.top;else if(e.reachedBottom){const i=(0,l.A)(e.component.content()),n=(0,l.A)(e.component.container()),o=Math.max(i.get(0).clientHeight-n.get(0).clientHeight,0);t=Math.min(o-e.scrollOffset.top,0)}return Math.floor(t)}_applyElasticScrolling(e){if(this._fixedTableElement){const t=this._getElasticScrollTop(e);0!==Math.ceil(t)?(0,n.Cy)(this._fixedTableElement,{top:t}):this._fixedTableElement.css("transform","")}}_handleScroll(e){this._updateFixedTablePosition(e.scrollOffset.top,!0),this._applyElasticScrolling(e),super._handleScroll(e)}_updateContentPosition(e){super._updateContentPosition.apply(this,arguments),e||this._updateFixedTablePosition(this._scrollTop)}_afterRowPrepared(e){this._isFixedTableRendering||super._afterRowPrepared(e)}_scrollToElement(e,t){const i=this.isFixedColumns()?this.getFixedColumnsOffset():t;super._scrollToElement(e,i)}},I=e=>class extends(w(e)){},S=function(e,t,i){const n=v(t),o=e.length-t.length;return(0,u.__)(i,(e,t)=>{t.index>n&&(t.columnIndex+=o,t.index+=o)}),i},A=e=>class extends e{_generatePointsByColumns(e,t){const i=e.columns,{targetDraggingPanel:n}=e;if(n&&"headers"===n.getName()&&n.isFixedColumns()&&e.sourceColumn.fixed){e.rowIndex||(e.columnElements=n.getFixedColumnElements(0)),e.columns=n.getFixedColumns(e.rowIndex);const o=super._generatePointsByColumns(e,t);return S(i,e.columns,o),o}return super._generatePointsByColumns(e,t)}_pointCreated(e){let{point:t,columns:i,location:n,sourceColumn:o,cells:s}=e;const r=super._pointCreated({point:t,columns:i,location:n,sourceColumn:o,cells:s}),l=i[t.columnIndex],a=this._columnHeadersView.getTransparentColumnElement();if(!r&&"headers"===n&&a&&a.length){const e=(0,c.N)(a.get(0));return o&&o.fixed?"right"===o.fixedPosition?t.x<e.right:t.x>e.left:!(!l||!l.fixed||"right"===l.fixedPosition)||(t.x<e.left||t.x>e.right)}return r}},E=e=>class extends e{_generatePointsByColumns(e){const t=this,i=t._columnsController,n=i&&t._columnsController.getVisibleColumns(),o=i&&t._columnsController.getFixedColumns(),s=v(o),r=n.length-o.length,l=t._columnHeadersView.getFixedColumnElements();super._generatePointsByColumns(e),l&&l.length>0&&(t._pointsByFixedColumns=_.A.getPointsByColumns(l,e=>(e.index>s&&(e.columnIndex+=r,e.index+=r),t._pointCreated(e,n))))}_getTargetPoint(e,t,i){const n=this._columnHeadersView.getTransparentColumnElement();if(n&&n.length){const e=(0,c.N)(n.get(0));if(t<=e.left||t>=e.right)return super._getTargetPoint(this._pointsByFixedColumns,t,i)}return super._getTargetPoint(e,t,i)}},R=e=>class extends e{_setAriaOwns(){var e,t,i;super._setAriaOwns.apply(this,arguments);const n=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getFixedTableElement(),o=null===(t=this._footerView)||void 0===t?void 0:t.getFixedTableElement();null===(i=this._rowsView)||void 0===i||i.setAriaOwns(null===n||void 0===n?void 0:n.attr("id"),null===o||void 0===o?void 0:o.attr("id"),!0)}},O=e=>class extends e{_toggleInertAttr(e){var t;const i=null===(t=this._rowsView)||void 0===t?void 0:t.getFixedContentElement();e?null===i||void 0===i||i.attr("inert",!0):null===i||void 0===i||i.removeAttr("inert")}},T=e=>class extends e{getValidationMessageContainer(e){const t=this._rowsView.isFixedColumns();return t?this._rowsView.element():super.getValidationMessageContainer(e)}},V={defaultOptions:()=>({columnFixing:{enabled:!1,legacyMode:!1,texts:{fix:r.A.format("dxDataGrid-columnFixingFix"),unfix:r.A.format("dxDataGrid-columnFixingUnfix"),leftPosition:r.A.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:r.A.format("dxDataGrid-columnFixingRightPosition"),stickyPosition:r.A.format("dxDataGrid-columnFixingStickyPosition")},icons:{fix:"fix-column",unfix:"unfix-column",leftPosition:"fix-column-left",rightPosition:"fix-column-right",stickyPosition:"stick-column"}}}),extenders:{views:{columnHeadersView:y,rowsView:b,footerView:I},controllers:{draggingHeader:A,columnsResizer:E,resizing:R,keyboardNavigation:O,editorFactory:T}}}},31514:function(e,t,i){i.d(t,{_:function(){return E},a:function(){return R}});i(69375),i(82438),i(12266),i(99819),i(57327),i(50020),i(34840);var n=i(30090),o=i(63027),s=i(743),r=i(15045),l=i(39904),a=i(85563),d=i(24714),u=i(80028),c=i(66703),h=i(44956),p=i(89214),g=i(36947),m=i(50172),_=i(98064),C=i(45175),f=i(10391),v=i(93821),x=i(96846),w=i(95506),y=i(91125),b=i(20338),I=i(16480),S=i(69287),A=i(66692);class E extends y.Ay.Controller{getCommonColumnSettings(e){switch(!0){case!(null!==e&&void 0!==e&&e.type):return this.option("commonColumnSettings");case(null===e||void 0===e?void 0:e.type)===w.ML:return this.getAIColumnSettings();default:return{}}}getAIColumnSettings(){return{allowHiding:!0,ai:{mode:"auto",showHeaderMenu:!0}}}init(e){this._dataController=this.getController("data"),this._focusController=this.getController("focus"),this._stateStoringController=this.getController("stateStoring");const t=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!t,this._isColumnsFromOptions?((0,A.BF)(this,t?(0,A.Cp)(this,t):[]),(0,A.Tp)(this)):(0,A.BF)(this,this._columnsUserState?(0,A.Cp)(this,this._columnsUserState):this._columns),(0,A.yF)(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):(0,A.kJ)(this),this._checkColumns()}_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:S.ID,allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){let t,i=[];const n=function(e,t){if(!e||!t)return e;for(let i=0;i<e.length;i++){const o=n(e[i].items||e[i].collapsedItems,t-1);if(o&&o.length)return o}};return e&&e.items().length>0&&(t=b.A.normalizeSortingInfo(e.group()).length,i=n(e.items(),t)||[]),i}_endUpdateCore(){!this._skipProcessingColumnsChange&&(0,A.of)(this)}callbackNames(){return["columnsChanged","aiColumnOptionChanged"]}getColumnByPath(e,t){const i=this;let n;const o=[];return e.replace(S.vK,(e,t)=>(o.push(parseInt(t)),"")),o.length&&(n=t?o.reduce((e,t)=>e&&e.columns&&e.columns[t],{columns:t}):(0,A.CO)(i,o)),n}optionChanged(e){let t;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value===e.previousValue||this.option("columns")||Array.isArray(e.value)&&Array.isArray(e.previousValue)||(this._columns=[]);break;case"columns":t=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),t=!0)),t&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":{e.handled=!0;const t="columnWidth"===e.fullName&&["width"];this.reinit(t);break}case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){let t={};const i=this.getColumnByPath(e.fullName),n=this.getColumnOptionNameByFullName(e.fullName);i&&(n?t[n]=e.value:t=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(i.index,t),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){const{component:t}=this;"width"===e.fullName.replace(S.vK,"")&&t._updateLockCount&&(t._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex","getColumns"]}applyDataSource(e,t,i){const n=this,o=e&&e.isLoaded();if(n._dataSource=e,!n._dataSourceApplied||0===n._dataSourceColumnsCount||t||n.option("regenerateColumnsByVisibleItems")){if(o){if(!n._isColumnsFromOptions){const t=(0,A.l8)(n,e);t.length&&((0,A.BF)(n,t),n._dataSourceColumnsCount=n._columns.length,(0,A.Tp)(n))}return n.updateColumns(e,t,i)}n._dataSourceApplied=!1,(0,A.kJ)(n)}else if(o&&!n.isAllDataTypesDefined(!0)&&n.updateColumnDataTypes(e))return(0,A.D6)(n,"columns"),(0,A.of)(n),(new c.cY).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,(0,A.IP)(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){const t=this.getCommonColumnSettings(e),i=this.option("grouping")??{},n=this.option("groupPanel")??{};return(0,h.X)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:i.autoExpandAll,allowCollapsing:i.allowCollapsing,allowGrouping:n.allowColumnDragging&&n.visible||i.contextMenuEnabled},t)}isColumnOptionUsed(e){for(let t=0;t<this._columns.length;t++)if(this._columns[t][e])return!0}isAllDataTypesDefined(e){const t=this._columns;if(!t.length)return!1;for(let i=0;i<t.length;i++)if((t[i].dataField||t[i].calculateCellValue!==t[i].defaultCalculateCellValue)&&(!t[i].dataType||e&&t[i].deserializeValue&&void 0===t[i].serializationFormat))return!1;return!0}getColumns(){return this._columns}getColumnByName(e){return this.getColumns().find(t=>t.name===e)}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){const e=[];return this._columns.forEach(t=>{(0,m.O9)(t.groupIndex)&&!t.type&&(e[t.groupIndex]=t)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=(0,m.O9)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,t){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,m.O9)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{const t=(0,h.X)(!0,{},e);return(0,m.O9)(t.dataField)||(t.dataField=t.name),t.filterOperations=e.filterOperations!==e.defaultFilterOperations?t.filterOperations:null,t})}getColumnIndexOffset(){return 0}getStickyColumns(e){const t=this.getVisibleColumns(e,!0);return t.filter(e=>e.fixed)}_getFixedColumnsCore(){const e=this,t=[],i=e.getRowCount(),n=e._isColumnFixing(),o={command:"transparent"};let s,r,l,a=0;if(n)for(let d=0;d<=i;d++){s=0,l=null,r=null;const i=e.getVisibleColumns(d,!0);for(let t=0;t<i.length;t++){const n=i[t-1],o=i[t];o.fixed&&o.fixedPosition!==I.Xn.Sticky?n&&n.fixed&&(0,A.Yv)(e,n)!==(0,A.Yv)(e,o)?(0,m.O9)(r)||(r=t):l=o.fixedPosition:(0===d&&(o.isBand&&o.colspan?a+=o.colspan:a++),s++,(0,m.O9)(r)||(r=t))}if(0===d&&(0===s||s>=i.length))return[];(0,m.O9)(r)||(r="right"===l?0:i.length),t[d]=i.slice(0),o.colspan||(o.colspan=a),t[d].splice(r,s,o)}return t.map(e=>e.map(e=>{const t=Object.assign({},e);return t.headerId&&(t.headerId+="-fixed"),t}))}_isColumnFixing(){let e=this.option("columnFixing.enabled");return!e&&(0,p.__)(this._columns,(t,i)=>{if(i.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){let e,t=this._getExpandColumnsCore();const i=t.filter(e=>0===e.groupIndex)[0],n=i&&i.fixed,o=this._isColumnFixing(),s=this.option("rtlEnabled");return t.length&&(e=this.columnOption("command:expand")),t=(0,p.Tj)(t,t=>(0,h.X)({},Object.assign({},t,{ownerBand:void 0}),{visibleWidth:null,minWidth:null,cellTemplate:(0,m.O9)(t.groupIndex)?null:t.cellTemplate,headerCellTemplate:null,fixed:!(!(0,m.O9)(t.groupIndex)||!n)||o,fixedPosition:s?"right":"left"},e,{index:t.index,type:t.type||S.D5})),t}getBandColumnsCache(){if(!this._bandColumnsCache){const e=this._columns,t={},i={};let n=!0;e.forEach(o=>{const{ownerBand:s}=o;let r=(0,m.Gv)(s)?s.index:s;const l=e[r];o.hasColumns&&(n=!1),o.colspan&&(o.colspan=void 0),o.rowspan&&(o.rowspan=void 0),l?i[o.index]=l:r=-1,t[r]=t[r]||[],t[r].push(o)}),this._bandColumnsCache={isPlain:n,columnChildrenByIndex:t,columnParentByIndex:i}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return(0,m.O9)(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){const e=this._columns;return e.some(e=>{const t=this._isColumnVisible(e),i=this._isColumnInGroupPanel(e),n=!!e.command;return t&&!i&&!n})}_compileVisibleColumnsCore(){const e=this.getBandColumnsCache(),t=(0,A.y1)(this,this._columns,this._commandColumns,!0);(0,A.QT)(this,t,e);const i=this._getIndexedColumns(t),n=this._getVisibleColumnsFromIndexed(i),o=!this.hasVisibleDataColumns();return o&&this._columns.length&&n[n.length-1].push({command:"empty",type:"empty"}),n}_getIndexedColumns(e){const t=this.option("rtlEnabled"),i=this.getRowCount(),n=(0,A.y$)(e.length),o=this.getBandColumnsCache(),s=[],r=[];for(let l=0;l<i;l+=1)r[l]=[{}],s[l]=[{},{},{}];return e.forEach(e=>{let i,{visibleIndex:l}=e;const a=(0,A.VN)(e.index,o.columnParentByIndex),d=this._isColumnVisible(e),u=this._isColumnInGroupPanel(e);if(d&&!u){const o=a.length;var c,h;if(l<0)l=-l,i=r[o];else if(e.fixed=(null===(c=a[0])||void 0===c?void 0:c.fixed)??e.fixed,e.fixedPosition=(null===(h=a[0])||void 0===h?void 0:h.fixedPosition)??e.fixedPosition,e.fixed&&e.fixedPosition!==I.Xn.Sticky){const n=!!e.command&&!b.A.isCustomCommandColumn(this._columns,e);let r="right"===e.fixedPosition;t&&!n&&(r=!r),i=r?s[o][2]:s[o][0]}else i=s[o][1];if(a.length){l=(0,A.um)(l,n);for(let e=a.length-1;e>=0;e-=1)l=(0,A.um)(a[e].visibleIndex,n)+l}i[l]=i[l]||[],i[l].push(e)}}),{positiveIndexedColumns:s,negativeIndexedColumns:r}}_getVisibleColumnsFromIndexed(e){let{positiveIndexedColumns:t,negativeIndexedColumns:i}=e;const n=[],o=this.getRowCount(),s=(0,A.y1)(this,this.getExpandColumns(),this._columns);let r=0,l=0;for(let a=0;a<o;a+=1){n.push([]),(0,g.ap)(i[a],(e,t)=>{n[a].unshift.apply(n[a],t)});const e=n[a].length,o=t[a];o.forEach(e=>{(0,g.ap)(e,(e,t)=>{n[a].push.apply(n[a],t)})}),l<=a&&(l+=A.dk.call(this,n[a],s,S.Lz,e)),r<=a&&(r+=A.dk.call(this,n[a],s,S.D5,e))}return n.push((0,A.KN)(n)),n}getInvisibleColumns(e,t){const i=this;let n,o=[];return e=e||i._columns,(0,p.__)(e,(e,s)=>{if(s.ownerBand===t)return s.isBand?(n=s.visible?i.getInvisibleColumns(i.getChildrenByBandColumn(s.index),s.index):i.getChildrenByBandColumn(s.index),void(n.length&&(o.push(s),o=o.concat(n)))):void(s.visible||o.push(s))}),o}getChooserColumns(e){const t=e?this.getColumns():this.getInvisibleColumns(),i=t.filter(e=>e.showInColumnChooser),n=this.option("columnChooser.sortOrder");return(0,A.CQ)(i,n)}allowMoveColumn(e,t,i,n){const o=(0,A.u8)(this,e,i),s=this._columns[o];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(i===n?i!==S.Hl&&(e=(0,m.Gv)(e)?e.columnIndex:e,t=(0,m.Gv)(t)?t.columnIndex:t,e!==t&&e+1!==t):i===S.As&&n!==S.Hl||n===S.As?s&&s.allowGrouping:i!==S.Hl&&n!==S.Hl||s&&s.allowHiding)}moveColumn(e,t,i,n){const o=this,s={};let r;const l=(0,A.u8)(o,e,i),a=(0,A.u8)(o,t,n);let d;if(l>=0){const e=o._columns[l];if(t=(0,m.Gv)(t)?t.columnIndex:t,d=a>=0?o._columns[a].groupIndex:-1,(0,m.O9)(e.groupIndex)&&i===S.As&&(d>e.groupIndex&&d--,n!==S.As?s.groupIndex=void 0:(r=e.groupIndex,delete e.groupIndex,(0,A.lh)(o))),n===S.As)s.groupIndex=(0,A.AI)(o,e,d),e.groupIndex=r;else if(t>=0){const t=o._columns[a];t&&e.ownerBand===t.ownerBand?(0,A.Tk)(o,e)^(0,A.Tk)(o,t)?s.visibleIndex=S.Is:s.visibleIndex=t.visibleIndex:s.visibleIndex=S.Is}const u=n!==S.Hl;e.visible!==u&&(s.visible=u),o.columnOption(e.index,s)}}allowColumnSorting(e){const t=this.option("sorting"),i="single"===(null===t||void 0===t?void 0:t.mode)||"multiple"===(null===t||void 0===t?void 0:t.mode);return i&&(null===e||void 0===e?void 0:e.allowSorting)}changeSortOrder(e,t){const i=this,n={},o=i.option("sorting"),s=null===o||void 0===o?void 0:o.mode,r="single"===s||!t,l=i._columns[e];this.allowColumnSorting(l)&&(r&&!(0,m.O9)(l.groupIndex)&&(0,p.__)(i._columns,function(t){t!==e&&this.sortOrder&&((0,m.O9)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),(0,A.nq)(t)?l.sortOrder!==t&&(n.sortOrder=t):"none"===t?l.sortOrder&&(n.sortIndex=void 0,n.sortOrder=void 0):function(e){if("ctrl"===t){if(!("sortOrder"in e)||!("sortIndex"in e))return!1;n.sortOrder=void 0,n.sortIndex=void 0}else(0,m.O9)(e.groupIndex)||(0,m.O9)(e.sortIndex)?n.sortOrder="desc"===e.sortOrder?"asc":"desc":n.sortOrder="asc"}(l)),i.columnOption(l.index,n)}getSortDataSourceParameters(e){const t=[],i=[];return(0,p.__)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,m.O9)(this.sortIndex)&&!(0,m.O9)(this.groupIndex)&&(t[this.sortIndex]=this)}),(0,p.__)(t,function(){const t=this&&this.sortOrder;if((0,A.nq)(t)){const t={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(t.compare=this.sortingMethod.bind(this)),i.push(t)}}),i.length>0?i:null}getGroupDataSourceParameters(e){const t=[];return(0,p.__)(this.getGroupColumns(),function(){const i=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(i){const e={selector:i,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(e.compare=this.sortingMethod.bind(this)),t.push(e)}}),t.length>0?t:null}refresh(e){const t=[];return(0,p.__)(this._columns,function(){const{lookup:i}=this;if(i&&!this.calculateDisplayValue){if(e&&i.valueMap)return;i.update&&t.push(i.update())}}),c.z7.apply(a.A,t).done(A.LS.bind(null,this))}_updateColumnOptions(e,t){var i,n;const o=this._reinitAfterLookupChanges&&(null===(i=this._previousColumns)||void 0===i?void 0:i[t]);e.selector=e.selector??(t=>e.calculateCellValue(t)),e.selector.columnIndex=t,e.selector.originalCallback=o?(null===(n=this._previousColumns[t].selector)||void 0===n?void 0:n.originalCallback)??e.selector:e.selector,(0,p.__)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(i,n)=>{const o=e[n];if((0,m.Tn)(o))if(o.originalCallback)e[n].context.column=e;else{const i={column:e};e[n]=function(e){return o.call(i.column,e)},e[n].originalCallback=o,e[n].columnIndex=t,e[n].context=i}}),(0,m.Kg)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=(0,u.Hz)(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),(0,A.hs)(e,e.dataType);const{lookup:s}=e;s&&(0,A.hs)(s,s.dataType);const r=s?s.dataType:e.dataType;r&&(e.alignment=e.alignment||(0,A.LF)(r,this.option("rtlEnabled")),e.format=e.format||b.A.getFormatByDataType(r),e.customizeText=e.customizeText||(0,A._e)(r),e.defaultFilterOperations=e.defaultFilterOperations||!s&&S.cH[r]||[],(0,m.O9)(e.filterOperations)||(0,A.ck)(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,m.O9)(e.showEditorAlways)?e.showEditorAlways:"boolean"===r&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){const t=this,i=t.option("dateSerializationFormat"),n=t._getFirstItems(e);let o=!1;return(0,p.__)(t._columns,(e,s)=>{if(s.type===w.ML)return;let r,l,a,d,u;const{lookup:c}=s;if(b.A.isDateType(s.dataType)&&void 0===s.serializationFormat&&(s.serializationFormat=i),c&&b.A.isDateType(c.dataType)&&void 0===s.serializationFormat&&(c.serializationFormat=i),s.calculateCellValue&&n.length){if(!s.dataType||c&&!c.dataType){for(r=0;r<n.length;r++)l=s.calculateCellValue(n[r]),s.dataType||(u=(0,A.W_)(l),a=a||u,a&&u&&a!==u&&(a="string")),c&&!c.dataType&&(u=(0,A.W_)(b.A.getDisplayValue(s,l,n[r])),d=d||u,d&&u&&d!==u&&(d="string"));(a||d)&&(a&&(s.dataType=a),c&&d&&(c.dataType=d),o=!0)}if(void 0===s.serializationFormat||c&&void 0===c.serializationFormat)for(r=0;r<n.length;r++)l=s.calculateCellValue(n[r],!0),void 0===s.serializationFormat&&(s.serializationFormat=(0,A.Gh)(s.dataType,l)),c&&void 0===c.serializationFormat&&(c.serializationFormat=(0,A.Gh)(c.dataType,c.calculateCellValue(l,!0)))}t._updateColumnOptions(s,e)}),o}_customizeColumns(e){const t=this,i=t.option("customizeColumns");if(i){const n=e.some(e=>(0,m.Gv)(e.ownerBand));n&&(0,A.kJ)(t),i(e),(0,A.BF)(t,(0,A.Cp)(t,e))}}updateColumns(e,t,i){if(t||this.updateSortingGrouping(e),!e||e.isLoaded()){const t=e?e.sort()||[]:this.getSortDataSourceParameters(),n=e?e.group()||[]:this.getGroupDataSourceParameters(),o=null===e||void 0===e?void 0:e.lastLoadOptions().filter;i||this._customizeColumns(this._columns),(0,A.kJ)(this);const s=this._columns;return(0,c.z7)(this.refresh(!0)).always(()=>{this._columns===s&&(this._updateChanges(e,{sorting:t,grouping:n,filtering:o}),(0,A.of)(this))})}}_updateChanges(e,t){var i;const n=null===e||void 0===e||null===(i=e.loadOptions)||void 0===i||null===(i=i.call(e))||void 0===i?void 0:i.langParams;e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),b.A.equalSortParameters(t.sorting,this.getSortDataSourceParameters())||(0,A.D6)(this,"sorting"),b.A.equalSortParameters(t.grouping,this.getGroupDataSourceParameters())||(0,A.D6)(this,"grouping"),this._dataController&&!b.A.equalFilterParameters(t.filtering,this._dataController.getCombinedFilter(),n)&&(0,A.D6)(this,"filtering"),(0,A.D6)(this,"columns")}updateSortingGrouping(e,t){const i=this;let n;const o=function(e,i,n){(0,p.__)(e,(e,o)=>{if(delete o[n],i)for(let s=0;s<i.length;s++){const{selector:e}=i[s],{isExpanded:r}=i[s];if(e===o.dataField||e===o.name||e===o.displayField||b.A.isEqualSelectors(e,o.selector)||b.A.isSelectorEqualWithCallback(e,o.calculateCellValue)||b.A.isSelectorEqualWithCallback(e,o.calculateGroupValue)||b.A.isSelectorEqualWithCallback(e,o.calculateDisplayValue)){o.sortOrder=t?"sortOrder"in o?o.sortOrder:i[s].desc?"desc":"asc":o.sortOrder||(i[s].desc?"desc":"asc"),void 0!==r&&(o.autoExpandGroup=r),o[n]=s;break}}})};if(e){var s;const r=b.A.normalizeSortingInfo(e.sort()),l=b.A.normalizeSortingInfo(e.group()),a=i.getGroupDataSourceParameters(),d=i.getSortDataSourceParameters(),u=null===(s=this._columnChanges)||void 0===s?void 0:s.changeTypes,c=!b.A.equalSortParameters(r,d),h=t&&!(null!==u&&void 0!==u&&u.sorting),g=t&&!(null!==u&&void 0!==u&&u.grouping),_=!b.A.equalSortParameters(l,a,!0),C=!_&&!b.A.equalSortParameters(l,a);i._columns.length||((0,p.__)(l,(e,t)=>{i._columns.push(t.selector)}),(0,p.__)(r,(e,t)=>{(0,m.Tn)(t.selector)||i._columns.push(t.selector)}),(0,A.BF)(i,(0,A.Cp)(i,i._columns))),!g&&(a||i._hasUserState)||!_&&!C||(o(i._columns,l,"groupIndex"),t&&(_&&(0,A.D6)(i,"grouping"),C&&(0,A.D6)(i,"groupExpanding"),n=!0)),(h||!d&&!i._hasUserState)&&c&&(o(i._columns,r,"sortIndex"),t&&((0,A.D6)(i,"sorting"),n=!0)),n&&(0,A.of)(i)}}updateFilter(e,t,i,n){const o=this;if(!Array.isArray(e))return e;if(e=(0,h.X)([],e),i=void 0!==e.columnIndex?e.columnIndex:i,n=void 0!==e.filterValue?e.filterValue:n,(0,m.Kg)(e[0])&&"!"!==e[0]){const i=o.columnOption(e[0]);t?(0,l.A)().forceIsoDateParsing&&i&&i.serializeValue&&e.length>1&&(e[e.length-1]=i.serializeValue(e[e.length-1],"filter")):i&&i.selector&&(e[0]=i.selector,e[0].columnIndex=i.index)}else(0,m.Tn)(e[0])&&(e[0].columnIndex=i,e[0].filterValue=n,e[0].selectedFilterOperation=e.selectedFilterOperation);for(let s=0;s<e.length;s++)e[s]=o.updateFilter(e[s],t,i,n);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,t,i,n){const o=this,s=o._columns.concat(o._commandColumns),r=(0,A.kn)(s,e);if(r){if(1===arguments.length)return(0,h.X)({},r);if((0,m.Kg)(t)){if(2===arguments.length)return(0,A.JY)(o,r,t);(0,A.JY)(o,r,t,i,n)}else(0,m.Gv)(t)&&(0,p.__)(t,(e,t)=>{(0,A.JY)(o,r,e,t,n)});(0,A.of)(o)}}clearSorting(){const e=this,t=this.columnCount();e.beginUpdate();for(let i=0;i<t;i++)e.columnOption(i,"sortOrder",void 0),delete(0,A.kn)(e._columns,i).sortOrder;e.endUpdate()}clearGrouping(){const e=this,t=this.columnCount();e.beginUpdate();for(let i=0;i<t;i++)e.columnOption(i,"groupIndex",void 0);e.endUpdate()}getVisibleIndex(e,t){const i=this.getVisibleColumns(t);for(let n=i.length-1;n>=0;n--)if(i[n].index===e)return n;return-1}getVisibleIndexByColumn(e,t){const i=this.getVisibleColumns(t),n=i.filter(t=>t.index===e.index&&t.command===e.command)[0];return i.indexOf(n)}getVisibleColumnIndex(e,t){const i=this.columnOption(e,"index");return this.getVisibleIndex(i,t)}addColumn(e){const t=this;let i=(0,A.HA)(t,e);const n=t._columns.length;t._columns.push(i),i.isBand&&(t._columns=(0,A.Cp)(t,t._columns),i=t._columns[n]),i.added=e,(0,A.kJ)(t,i),t.updateColumns(t._dataSource),t._checkColumns()}deleteColumn(e){const t=this,i=t.columnOption(e);if(i&&i.index>=0){if((0,A._w)(t._columns),t._columns.splice(i.index,1),i.isBand){const e=t.getChildrenByBandColumn(i.index).map(e=>e.index);t._columns=t._columns.filter(t=>e.indexOf(t.index)<0)}(0,A.kJ)(t),t.updateColumns(t._dataSource)}}addCommandColumn(e){let t=this._commandColumns.filter(t=>t.command===e.command)[0];t||(t=e,this._commandColumns.push(t))}getUserState(){const e=this._columns,t=[];let i;function n(n,o){void 0!==e[i][o]&&(t[i][o]=e[i][o])}for(i=0;i<e.length;i++)t[i]={},(0,p.__)(S.Cs,n);return t}setName(e){(0,A.r5)(e)||(e.name=e.name||e.dataField||e.type)}setUserState(e){const t=this,i=t._dataSource;let n=t.option("stateStoring.ignoreColumnOptionNames");if(null===e||void 0===e||e.forEach(this.setName),!n){n=[];const e=t.getCommonSettings();t.option("columnChooser.enabled")||n.push("visible"),"none"===t.option("sorting.mode")&&n.push("sortIndex","sortOrder"),e.allowGrouping||n.push("groupIndex"),e.allowFixing||n.push("fixed","fixedPosition"),e.allowResizing||n.push("width","visibleWidth");const i=!t.option("filterPanel.visible");!t.option("filterRow.visible")&&i&&n.push("filterValue","selectedFilterOperation"),!t.option("headerFilter.visible")&&i&&n.push("filterValues","filterType")}t._columnsUserState=e,t._ignoreColumnOptionNames=n,t._hasUserState=!!e,(0,A.D6)(t,"filtering"),t.init(!0),i&&(i.sort(t.getSortDataSourceParameters()),i.group(t.getGroupDataSourceParameters()))}_checkColumns(){const e={},t=[];let i=!1,n=!1;this._columns.forEach(o=>{var s;const{name:r}=o,l=null===(s=o.columns)||void 0===s?void 0:s.length,a=o.allowEditing&&(o.dataField||o.setCellValue)&&!l;r?(e[r]&&t.push(`"${r}"`),e[r]=!0):(0,A.r5)(o)?n=!0:a&&(i=!0)}),t.length&&v.A.log("E1059",t.join(", ")),n&&v.A.log("E1066"),i&&v.A.log("E1060")}_createCalculatedColumnOptions(e,t){let i={},{dataField:o}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(i.isBand=!0,o=null),o){if((0,m.Kg)(o)){const e=(0,u.Hz)(o);i={caption:x.Ay.captionize(o),calculateCellValue(t,i){const n=e(t);return this.deserializeValue&&!i?this.deserializeValue(n):n},setCellValue:A.H6,parseValue(e){const t=this;let i,o;return"number"===t.dataType?(0,m.Kg)(e)&&t.format?i=(0,A.OT)(e.trim(),t.format):(0,m.O9)(e)&&(0,m.kf)(e)&&(i=Number(e)):"boolean"===t.dataType?e===t.trueText?i=!0:e===t.falseText&&(i=!1):b.A.isDateType(t.dataType)?(o=n.A.parse(e,t.format),o&&(i=o)):i=e,i}}}i.allowFiltering=!0}else i.allowFiltering=!!e.calculateFilterExpression;return i.calculateFilterExpression=function(){return f.A.defaultCalculateFilterExpression.apply(this,arguments)},i.defaultFilterOperation="=",i.createFilterExpression=function(e,t){let i;return this.calculateFilterExpression&&(i=this.calculateFilterExpression.apply(this,arguments)),(0,m.Tn)(i)&&(i=[i,"=",!0]),i&&(i.columnIndex=this.index,i.filterValue=e,i.selectedFilterOperation=t),i},o&&(0,m.Kg)(o)||(0,h.X)(!0,i,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),t&&(i.allowFixing=!1),e.dataType&&(i.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in i)&&(i.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&e.type!==w.ML&&(i.lookup={calculateCellValue(e,t){return this.valueExpr&&(e=this.valueMap&&this.valueMap[e]),this.deserializeValue&&!t?this.deserializeValue(e):e},updateValueMap(){if(this.valueMap={},this.items){const e=(0,u.Hz)(this.valueExpr),t=(0,u.Hz)(this.displayExpr);for(let i=0;i<this.items.length;i++){const n=this.items[i],o=t(n);this.valueMap[e(n)]=o,this.dataType=this.dataType||(0,A.W_)(o)}}},update(){const e=this;let{dataSource:t}=e;if(t)if((0,m.Tn)(t)&&!_.A.isWrapped(t)&&(t=t({})),(0,m.Qd)(t)||t instanceof C.A||Array.isArray(t)){if(e.valueExpr){const i=(0,r.ho)(t);return i.paginate=!1,t=new s.q(i),t.load().done(t=>{e.items=t,e.updateValueMap&&e.updateValueMap()})}}else v.A.log("E1016");else e.updateValueMap&&e.updateValueMap()}}),i.resizedCallbacks=(0,d.A)(),e.resized&&i.resizedCallbacks.add(e.resized.bind(e)),(0,p.__)(i,e=>{if((0,m.Tn)(i[e])&&0!==e.indexOf("default")){const t=`default${e.charAt(0).toUpperCase()}${e.substr(1)}`;i[t]=i[e]}}),i}getRowCount(){return this._rowCount=this._rowCount||(0,A.sN)(this),this._rowCount}getRowIndex(e,t){const i=this._columns[e];if(!i)return 0;const n=i.command||this._isColumnInGroupPanel(i),o=i.visible&&!n;if(!t&&!o)return 0;const s=this.getBandColumnsCache();return(0,A.VN)(e,s.columnParentByIndex).length}getChildrenByBandColumn(e,t){const i=this.getBandColumnsCache(),n=(0,A.eK)(e,i.columnChildrenByIndex,!t);return t?n.filter(e=>e.visible&&!e.command).sort((e,t)=>e.visibleIndex-t.visibleIndex):n}getVisibleDataColumnsByBandColumn(e){const t=this.getBandColumnsCache(),i=this.getChildrenByBandColumn(e,t.columnChildrenByIndex);return i.filter(e=>!e.isBand&&e.visible)}isParentBandColumn(e,t){let i=!1;const n=this._columns[e],o=this.getBandColumnsCache(),s=n&&(0,A.VN)(e,o.columnParentByIndex);return s&&(0,p.__)(s,(e,n)=>{if(n.index===t)return i=!0,!1}),i}isParentColumnVisible(e){let t=!0;const i=this.getBandColumnsCache(),n=e>=0&&(0,A.VN)(e,i.columnParentByIndex);return n&&(0,p.__)(n,(e,i)=>(t=t&&i.visible,t)),t}getParentColumn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getBandColumnsCache(),n=(0,A.VN)(e.index,i.columnParentByIndex),o=t?-1:0;return n.at(o)}isFirstColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return(0,A.sw)(this,e,t,i,!1,n)}isLastColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return(0,A.sw)(this,e,t,i,!0,n)}isCustomCommandColumn(e){return b.A.isCustomCommandColumn(this._columns,e)}getColumnId(e){return e.command&&e.type===S.D5?b.A.isCustomCommandColumn(this._columns,e)?`type:${e.type}`:`command:${e.command}`:e.index}getCustomizeTextByDataType(e){return(0,A._e)(e)}getHeaderContentAlignment(e){const t=this.option("rtlEnabled");return t?"left"===e?"right":"left":e}isVirtualMode(){return!1}isNeedToRenderVirtualColumns(e){return!1}getColumnOptionNameByFullName(e){return e.replace(S.vK,"")}}const R={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:o.A.format("dxDataGrid-trueText"),falseText:o.A.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:E}}},31680:function(e,t,i){i.d(t,{A:function(){return R}});i(82438),i(12266),i(99819),i(50020),i(64727);var n=i(24906),o=i(74567),s=i(63027),r=i(66529),l=i(92324),a=i(47759),d=i(85563),u=i(66703),c=i(44956),h=i(50172),p=i(2308),g=i(64219),m=i(67813),_=i(7698),C=i(20013),f=i(82009);const v="dx-filterbuilder-action-icon",x="dx-state-active",w="filterBuilder",y="dx-treeview-node-container",b=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],I={and:"and",or:"or",notAnd:"!and",notOr:"!or"},S=(0,g.A)(class{});class A extends _.A{_getDefaultOptions(){return(0,c.X)(super._getDefaultOptions(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:s.A.format("dxFilterBuilder-and"),or:s.A.format("dxFilterBuilder-or"),notAnd:s.A.format("dxFilterBuilder-notAnd"),notOr:s.A.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:s.A.format("dxFilterBuilder-filterOperationBetween"),equal:s.A.format("dxFilterBuilder-filterOperationEquals"),notEqual:s.A.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:s.A.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:s.A.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:s.A.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:s.A.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:s.A.format("dxFilterBuilder-filterOperationStartsWith"),contains:s.A.format("dxFilterBuilder-filterOperationContains"),notContains:s.A.format("dxFilterBuilder-filterOperationNotContains"),endsWith:s.A.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:s.A.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:s.A.format("dxFilterBuilder-filterOperationIsNotBlank")}})}_optionChanged(e){switch(e.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(e.value!==e.previousValue){const t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:e.value,previousValue:e.previousValue}),this._disableInvalidateForValue=t}break;default:super._optionChanged(e)}}getFilterExpression(){const e=this._getNormalizedFields(),t=(0,c.X)(!0,[],this._model);return(0,f.zk)((0,f.SK)(t),e,this._customOperations,w)}_getNormalizedFields(){return(0,f.NP)(this.option("fields"))}_updateFilter(){this._disableInvalidateForValue=!0;const e=(0,c.X)(!0,[],this._model),t=(0,f.SK)(e),i=(0,f.SK)(this._getModel(this.option("value")));JSON.stringify(i)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()}_init(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),super._init()}_initEditorFactory(){this._editorFactory=new S}_initCustomOperations(){this._customOperations=(0,f.BK)(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)}_getDefaultGroupOperation(){var e;return(null===(e=this.option("groupOperations"))||void 0===e?void 0:e[0])??I.and}_getModel(e){return(0,f.M7)(e,this._customOperations,this._getDefaultGroupOperation())}_initModel(){this._model=this._getModel(this.option("value"))}_initActions(){const e=this;e._actions={},b.forEach(t=>{const i=(0,c.X)({},t.config);e._actions[t.name]=e._createActionByOption(t.name,i)})}executeAction(e,t){const i=this._actions[e];return i&&i(t)}_initMarkup(){this.$element().addClass("dx-filterbuilder"),super._initMarkup(),this._addAriaAttributes(this.$element(),s.A.format("dxFilterBuilder-filterAriaRootElement"),"group"),this._createGroupElementByCriteria(this._model).appendTo(this.$element())}_addAriaAttributes(e,t,i,n,o,s){if(!e||!e.length)return;const r={role:i};t&&(e.text().length>0?r.title=t:r["aria-label"]=t),(0,h.O9)(n)&&(r["aria-haspopup"]=`${n}`),(0,h.O9)(o)&&(r["aria-expanded"]=`${o}`),(0,h.O9)(s)&&(r["aria-level"]=`${s}`),e.attr(r)}_createConditionElement(e,t,i){return(0,d.A)("<div>").addClass("dx-filterbuilder-group").append(this._createConditionItem(e,t,i)).attr("role","group")}_createGroupElementByCriteria(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this._createGroupElement(e,t,i),o=n.find(".dx-filterbuilder-group-content"),s=(0,f.j_)(e);for(let r=0;r<s.length;r++){const t=s[r];(0,f.IZ)(t)?this._createGroupElementByCriteria(t,e,i+1).appendTo(o):(0,f.G3)(t)&&this._createConditionElement(t,e,`${i+1}`).appendTo(o)}return n}_createGroupElement(e,t,i){const n=new a.A,o=(0,d.A)("<div>").addClass("dx-filterbuilder-group-item"),r=(0,d.A)("<div>").addClass("dx-filterbuilder-group-content").attr("id",`${n}`),l=(0,d.A)("<div>").addClass("dx-filterbuilder-group").append(o).append(r);null!=t&&this._createRemoveButton(()=>{(0,f.Ai)(t,e),l.remove(),this._updateFilter()},"group").appendTo(o);let u=i;return 0===i&&(this._addAriaAttributes(l,"","tree"),u+=1),this._addAriaAttributes(o,s.A.format("dxFilterBuilder-filterAriaGroupItem"),"treeitem",null,null,u),o.attr("aria-owns",`${n}`),this._createGroupOperationButton(e).appendTo(o),this._createAddButton(()=>{const t=(0,f.LH)(this._getDefaultGroupOperation());(0,f.B5)(t,e),this._createGroupElement(t,e,i+1).appendTo(r),this._updateFilter()},()=>{const t=this.option("fields")[0],n=(0,f.qB)(t,this._customOperations);(0,f.B5)(n,e),this._createConditionElement(n,e,i+1).appendTo(r),this._updateFilter()},i).appendTo(o),l}_createButton(e){return(0,d.A)("<div>").text(e)}_createGroupOperationButton(e){const t=this._getGroupOperations(e);let i=(0,f.uN)(e,t);const n=i.text,o=t&&t.length<2?this._createButton(n).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:n,menu:{items:t,displayExpr:"text",keyExpr:"value",onItemClick:t=>{i!==t.itemData&&((0,f.rK)(e,t.itemData.value),o.text(t.itemData.text),i=t.itemData,this._updateFilter())},onContentReady(e){e.component.selectItem(i)},cssClass:"dx-filterbuilder-group-operations"}});return this._addAriaAttributes(o,s.A.format("dxFilterBuilder-filterAriaOperationButton"),"combobox",!0,!1),o.addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-group-operation").attr("tabindex",0)}_createButtonWithMenu(e){const t=this,i=function(){t.$element().find(`.${x}`).removeClass(x).attr("aria-expanded","false"),t.$element().find(".dx-overlay .dx-treeview").remove(),t.$element().find(".dx-overlay").remove()},s=this.option("rtlEnabled"),r=s?"right":"left",l=this._createButton(e.caption),u=new a.A;var h;return l.attr("aria-controls",`${u}`),(0,c.X)(e.menu,{id:u,focusStateEnabled:!0,selectionMode:"single",onItemClick:(h=e.menu.onItemClick,function(e){h(e),"dxclick"===e.event.type&&i()}),onHiding(){l.removeClass(x).attr("aria-expanded","false")},position:{my:`${r} top`,at:`${r} bottom`,offset:"0 1",of:l,collision:"flip"},animation:null,onHidden(){i()},cssClass:`dx-filterbuilder-overlay ${e.menu.cssClass}`,rtlEnabled:s}),e.popup={onShown(i){const s=(0,d.A)(i.component.content()),r=s.find(".dx-treeview");r.length&&t._applyAccessibilityAttributes(r),n.A.on(r,"keyup keydown",t=>{const s=(0,o.YD)(t);("keydown"===t.type&&"tab"===s||"keyup"===t.type&&("escape"===s||"enter"===s))&&(i.component.hide(),n.A.trigger(e.menu.position.of,"focus"))});const l=r.dxTreeView("instance");l.focus(),l.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(l,()=>{i(),t._createPopupWithTreeView(e,t.$element()),l.addClass(x).attr("aria-expanded","true")}),l}_hasValueButton(e){const t=(0,f.D3)(this._customOperations,e[1]);return t?!1!==t.hasValue:null!==e[2]}_createOperationButtonWithMenu(e,t){const i=this,n=(0,f.GC)(t,this.option("filterOperationDescriptions"),this._customOperations);let o=(0,f.Zh)((0,f.tg)(e),n);const r=this._createButtonWithMenu({caption:o.text,menu:{items:n,displayExpr:"text",onItemRendered(e){e.itemData.isCustom&&(0,d.A)(e.itemElement).addClass("dx-filterbuilder-menu-custom-operation")},onContentReady(e){e.component.selectItem(o)},onItemClick:n=>{if(o!==n.itemData){o=n.itemData,(0,f.d0)(e,o.value,i._customOperations);const s=r.siblings().filter(".dx-filterbuilder-item-value");i._hasValueButton(e)?(0!==s.length&&s.remove(),i._createValueButton(e,t).appendTo(r.parent())):s.remove(),r.text(o.text),this._updateFilter()}},cssClass:"dx-filterbuilder-operations"}}).addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-operation").attr("tabindex",0);return this._addAriaAttributes(r,s.A.format("dxFilterBuilder-filterAriaItemOperation"),"combobox",!0,!1),r}_createOperationAndValueButtons(e,t,i){this._createOperationButtonWithMenu(e,t).appendTo(i),this._hasValueButton(e)&&this._createValueButton(e,t).appendTo(i)}_createFieldButtonWithMenu(e,t,i){const n=this,o=this.option("allowHierarchicalFields"),r=(0,f.JS)(e,o);let l=(0,f.VI)(i.name||i.dataField,r);const a=function(e,t){return o?(0,f.WI)(e,t):e.caption};t[0]=l.name||l.dataField;const d=this._createButtonWithMenu({caption:a(l,r),menu:{items:r,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:e=>{if(l!==e.itemData){l=e.itemData,t[0]=l.name||l.dataField,t[2]="object"===l.dataType?null:"",(0,f.d0)(t,(0,f.PZ)(l),n._customOperations),d.siblings().filter(".dx-filterbuilder-text").remove(),n._createOperationAndValueButtons(t,l,d.parent());const i=a(l,e.component.option("items"));d.text(i),this._updateFilter()}},onContentReady(e){e.component.selectItem(l)},cssClass:"dx-filterbuilder-fields"}}).addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-field").attr("tabindex",0);return this._addAriaAttributes(d,s.A.format("dxFilterBuilder-filterAriaItemField"),"combobox",!0,!1),d}_createConditionItem(e,t,i){const n=(0,d.A)("<div>").addClass("dx-filterbuilder-group-item"),o=this._getNormalizedFields(),s=(0,f.VI)(e[0],o);return this._addAriaAttributes(n,"","treeitem",null,null,i),this._createRemoveButton(()=>{(0,f.Ai)(t,e);const i=1===n.parent().children().length;i?n.parent().remove():n.remove(),this._updateFilter()},"condition").appendTo(n),this._createFieldButtonWithMenu(o,e,s).appendTo(n),this._createOperationAndValueButtons(e,s,n),n}_getGroupOperations(e){let t=this.option("groupOperations");const i=this.option("groupOperationDescriptions");return t&&t.length||(t=[(0,f.Bd)(e).replace("!","not")]),t.map(e=>({text:i[e],value:I[e]}))}_createRemoveButton(e,t){const i=(0,d.A)("<div>").addClass(v).addClass("dx-icon-remove").addClass("dx-filterbuilder-action").attr("tabindex",0);if(t){const e=s.A.format("dxFilterBuilder-filterAriaRemoveButton",t);this._addAriaAttributes(i,e,"button")}return this._subscribeOnClickAndEnterKey(i,e),i}_createAddButton(e,t,i){let n;const o=this.option("maxGroupLevel");return(0,h.O9)(o)&&i>=o?(n=this._createButton(),this._subscribeOnClickAndEnterKey(n,t)):n=this._createButtonWithMenu({menu:{items:[{caption:s.A.format("dxFilterBuilder-addCondition"),click:t},{caption:s.A.format("dxFilterBuilder-addGroup"),click:e}],displayExpr:"caption",onItemClick(e){e.itemData.click()},cssClass:"dx-filterbuilder-add-condition"}}),this._addAriaAttributes(n,s.A.format("dxFilterBuilder-filterAriaAddButton"),"combobox",!0,!1),n.addClass(v).addClass("dx-icon-plus").addClass("dx-filterbuilder-action").attr("tabindex",0)}_createValueText(e,t,i){const n=this,o=(0,d.A)("<div>").html("&nbsp;").addClass("dx-filterbuilder-item-value-text").attr("tabindex",0).appendTo(i);this._addAriaAttributes(o,s.A.format("dxFilterBuilder-filterAriaItemValue"),"button",!0);const r=e[2],l=(0,f.D3)(n._customOperations,e[1]);return!l&&t.lookup?(0,f.yy)(t,r,e=>{(0,f.rx)(o,e)}):(0,u.z7)((0,f.GT)(t,r,l)).done(e=>{(0,f.rx)(o,e,l)}),n._subscribeOnClickAndEnterKey(o,o=>{"keyup"===o.type&&o.stopPropagation(),n._createValueEditorWithEvents(e,t,i)}),o}_updateConditionValue(e,t,i){const n=e[2]!==t;n&&(e[2]=t),i(),this._updateFilter()}_addDocumentKeyUp(e,t){let i=!1,o=!1;const s=l.A.getDocument(),r=e=>{i||o?o=!1:t(e)};n.A.on(s,"keyup",r);const a=e.find("input");n.A.on(a,"compositionstart",()=>{i=!0}),n.A.on(a,"compositionend",()=>{i=!1,o=!0}),n.A.on(a,"keydown",e=>{229!==e.which&&(o=!1)}),this._documentKeyUpHandler=r}_addDocumentClick(e,t){const i=l.A.getDocument(),o=i=>{this._isFocusOnEditorParts(e,i.target)||(n.A.trigger(e.find("input"),"change"),t())};n.A.on(i,"dxpointerdown",o),this._documentClickHandler=o}_isFocusOnEditorParts(e,t){const i=t||l.A.getActiveElement();return(0,d.A)(i).closest(e.children()).length||(0,d.A)(i).closest(".dx-dropdowneditor-overlay").length}_removeEvents(){const e=l.A.getDocument();(0,h.O9)(this._documentKeyUpHandler)&&n.A.off(e,"keyup",this._documentKeyUpHandler),(0,h.O9)(this._documentClickHandler)&&n.A.off(e,"dxpointerdown",this._documentClickHandler)}_dispose(){this._removeEvents(),super._dispose()}_createValueEditorWithEvents(e,t,i){let s=e[2];const r=()=>(i.empty(),this._removeEvents(),this._createValueText(e,t,i)),l=()=>{this._updateConditionValue(e,s,()=>{r()})},a={value:""===s?null:s,filterOperation:(0,f.tg)(e),setValue(e){s=null===e?"":e},closeEditor:l,text:i.text()};i.empty();const d=this._createValueEditor(i,t,a);n.A.trigger(d.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(d,l),this._addDocumentKeyUp(d,t=>{const l=(0,o.YD)(t);if("tab"===l){if(this._isFocusOnEditorParts(d))return;this._updateConditionValue(e,s,()=>{r(),t.shiftKey&&n.A.trigger(i.prev(),"focus")})}"escape"===l&&n.A.trigger(r(),"focus"),"enter"===l&&this._updateConditionValue(e,s,()=>{n.A.trigger(r(),"focus")})}),this._fireContentReadyAction()}_createValueButton(e,t){const i=(0,d.A)("<div>").addClass("dx-filterbuilder-text").addClass("dx-filterbuilder-item-value");return this._createValueText(e,t,i),i}_createValueEditor(e,t,i){const n=(0,d.A)("<div>").attr("tabindex",0).appendTo(e),o=(0,f.D3)(this._customOperations,i.filterOperation),s=o&&o.editorTemplate?o.editorTemplate:t.editorTemplate;if(s){const e=this._getTemplate(s);e.render({model:(0,c.X)({field:t},i),container:n})}else this._editorFactory.createEditor.call(this,n,(0,c.X)({},t,i,{parentType:w}));return n}_createPopupWithTreeView(e,t){const i=this,n=(0,d.A)("<div>").addClass(e.menu.cssClass).appendTo(t);this._createComponent(n,p.A,{onHiding:e.menu.onHiding,onHidden:e.menu.onHidden,rtlEnabled:e.menu.rtlEnabled,position:e.menu.position,animation:e.menu.animation,contentTemplate(t){const n=(0,d.A)("<div>").appendTo(t);i._createComponent(n,m.A,e.menu),n.attr("id",`${e.menu.id}`),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:()=>(0,C.J)(e.menu.position.of),visible:!0,focusStateEnabled:!1,preventScrollEvents:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),_hideOnParentScrollTarget:n,hideOnOutsideClick:!0,onShown:e.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:e.menu.cssClass,_ignorePreventScrollEventsDeprecation:!0})}_subscribeOnClickAndEnterKey(e,t){n.A.on(e,"dxclick",t),n.A.on(e,"keyup",e=>{"enter"===(0,o.YD)(e)&&t(e)})}_applyAccessibilityAttributes(e){var t;const i=e.closest(".dx-overlay-content");null===i||void 0===i||i.removeAttr("role");const n=null===i||void 0===i||null===(t=i.find)||void 0===t?void 0:t.call(i,`.${y}`);null===n||void 0===n||n.attr("role","presentation")}addWidgetPrefix(e){return`dx-filterbuilder-${e}`}}(0,r.A)("dxFilterBuilder",A);var E=A,R=E},35626:function(e,t,i){i.d(t,{o:function(){return n}});const n="adaptiveHidden"},36091:function(e,t,i){var n=i(35032);t.A=n.A},42521:function(e,t,i){var n=i(5613),o=i(39944),s=i(3770),r=i(96002),l=i(28616),a=i(80939),d=i(88500),u=i(32331),c=i(59475),h=i(20850),p=i(1942),g=!p&&!c("drop",0),m=!p&&!g&&h("drop",RangeError),_=p||g||m,C=u(function(){var e,t,i=this.iterator,n=this.next;while(this.remaining)if(this.remaining--,e=s(o(n,i)),t=this.done=!!e.done,t)return;if(e=s(o(n,i)),t=this.done=!!e.done,!t)return e.value});n({target:"Iterator",proto:!0,real:!0,forced:_},{drop:function(e){var t;s(this);try{t=a(l(+e))}catch(i){d(this,"throw",i)}return m?o(m,this,t):new C(r(this),{remaining:t})}})},42814:function(e,t,i){i.d(t,{J:function(){return g}});i(69375),i(82438),i(12266),i(99819),i(57327);var n=i(63027),o=i(91418),s=i(92324),r=i(85563),l=i(80028),a=i(20338);function d(e){return!!(e.allowSearch??e.allowFiltering)}function u(e,t){const{lookup:i}=e;return e.parseValue?i?e.parseValue.call(i,t):e.parseValue(t):t}const c=e=>class extends e{optionChanged(e){switch(e.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return super.publicMethods().concat(["searchByText"])}_calculateAdditionalFilter(){var e,t,i;const n=null===(e=this._dataController)||void 0===e||null===(t=e.getDataSource)||void 0===t?void 0:t.call(e),o=null===n||void 0===n||null===(i=n.loadOptions)||void 0===i||null===(i=i.call(n))||void 0===i?void 0:i.langParams,s=super._calculateAdditionalFilter(),r=this.calculateSearchFilter(this.option("searchPanel.text"),o);return a.A.combineFilters([s,r])}searchByText(e){this.option("searchPanel.text",e)}calculateSearchFilter(e,t){let i;const n=this._columnsController.getColumns(),s=this.option("searchPanel.searchVisibleColumnsOnly");let r;const c=[];if(!e)return null;function h(e){const t=(0,l.Hz)(r.valueExpr);for(let n=0;n<e.length;n++){const o=t(e[n]);c.push(i.createFilterExpression(o,null,"search"))}}for(let l=0;l<n.length;l++)if(i=n[l],(!s||i.visible)&&d(i)&&i.calculateFilterExpression){var p;r=i.lookup;const n=u(i,e);null!==(p=r)&&void 0!==p&&p.items?(0,o.A)(r.items,{langParams:t}).filter(i.createFilterExpression.call({dataField:r.displayExpr,dataType:r.dataType,calculateFilterExpression:i.calculateFilterExpression},n,null,"search")).enumerate().done(h):void 0!==n&&c.push(i.createFilterExpression(n,null,"search"))}return 0===c.length?["!"]:a.A.combineFilters(c,"or")}},h=e=>class extends e{optionChanged(e){if("searchPanel"===e.name){if("searchPanel.text"===e.fullName){const t=this.getSearchTextEditor();t&&t.option("value",e.value)}else this._invalidate();e.handled=!0}else super.optionChanged(e)}_getToolbarItems(){const e=super._getToolbarItems();return this._prepareSearchItem(e)}_prepareSearchItem(e){const t=this,i=this._dataController,o=this.option("searchPanel");if(o&&o.visible){const s={template(e,s,l){const a=(0,r.A)("<div>").addClass(t.addWidgetPrefix("search-panel")).appendTo(l);t._editorFactoryController.createEditor(a,{width:o.width,placeholder:o.placeholder,parentType:"searchPanel",value:t.option("searchPanel.text"),updateValueTimeout:700,setValue(e){i.searchByText(e)},editorOptions:{inputAttr:{"aria-label":n.A.format(`${t.component.NAME}-ariaSearchInGrid`)}}}),t.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40};e.push(s)}return e}getSearchTextEditor(){const e=this,t=e.element(),i=t.find(`.${e.addWidgetPrefix("search-panel")}`).filter(function(){return(0,r.A)(this).closest(`.${e.addWidgetPrefix("header-panel")}`).is(t)});return i.length?i.dxTextBox("instance"):null}},p=e=>class extends e{init(){super.init.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")}dispose(){clearTimeout(this._highlightTimer),super.dispose()}_getFormattedSearchText(e,t){const i=u(e,t),n=a.A.getFormatOptionsByColumn(e,"search");return a.A.formatValue(i,n)}_getStringNormalizer(){var e,t,i;const n=this.option("searchPanel.highlightCaseSensitive"),o=null===(e=this._dataController)||void 0===e||null===(t=e.getDataSource)||void 0===t?void 0:t.call(e),s=null===o||void 0===o||null===(i=o.loadOptions)||void 0===i||null===(i=i.call(o))||void 0===i?void 0:i.langParams;return e=>(0,l.ao)(e,n,s)}_findHighlightingTextNodes(e,t,i){var n;const o=this;let s,l=t.parent();const a=this._getStringNormalizer(),d=a(i),u=[];if(l.length){if(e)if(e.groupIndex>=0&&!e.showWhenGrouped)s=t;else{const t=o._columnsController.getVisibleIndex(e.index);s=l.children("td").eq(t).find("*")}}else l=(0,r.A)("<div>").append(t);return s=null!==(n=s)&&void 0!==n&&n.length?s:l.find("*"),s.each((e,t)=>{const i=(0,r.A)(t).contents();for(let n=0;n<i.length;n++){const e=i.get(n);if(3===e.nodeType){const t=a(e.textContent??e.nodeValue??"");t.includes(d)&&u.push(e)}}}),u}_highlightSearchTextCore(e,t){const i=this,n=(0,r.A)("<span>").addClass(i.addWidgetPrefix("search-text")),o=e.text(),l=e[0],a=this._getStringNormalizer(),d=a(o).indexOf(a(t));if(d>=0)return l.textContent?l.textContent=o.substr(0,d):l.nodeValue=o.substr(0,d),e.after(n.text(o.substr(d,t.length))),e=(0,r.A)(s.A.createTextNode(o.substr(d+t.length))).insertAfter(n),i._highlightSearchTextCore(e,t)}_highlightSearchText(e,t,i){const n=this,o=this._getStringNormalizer();let s=n.option("searchPanel.text");if(t&&i&&(s=s&&n._getFormattedSearchText(i,s)),s&&n.option("searchPanel.highlightSearchText")){const l=n._findHighlightingTextNodes(i,e,s);l.forEach(e=>{t?o((0,r.A)(e).text())===o(s??"")&&(0,r.A)(e).replaceWith((0,r.A)("<span>").addClass(n.addWidgetPrefix("search-text")).text((0,r.A)(e).text())):n._highlightSearchTextCore((0,r.A)(e),s)})}}_renderCore(){const e=super._renderCore.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),e}_updateCell(e,t){const{column:i}=t,n=i.lookup&&i.lookup.dataType||i.dataType,o="string"!==n;d(i)&&!t.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(e=>{this._highlightSearchText.apply(this,e)}),this._searchParams=[]})),this._searchParams.push([e,o,i])):this._highlightSearchText(e,o,i)),super._updateCell(e,t)}},g={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:n.A.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:c},views:{headerPanel:h,rowsView:p}}}},43536:function(e,t,i){i.d(t,{g:function(){return f},o:function(){return m}});i(69375),i(82438),i(99819);var n=i(63027),o=i(85563),s=i(39889),r=i(66703),l=i(89214),a=i(63825),d=i(50172),u=i(20338),c=i(48525),h=i(83159);const p=e=>class extends e{_getExpandColumnsCore(){const e=super._getExpandColumnsCore();return this.option("masterDetail.enabled")&&e.push({type:"detailExpand",cellTemplate:u.A.getExpandCellTemplate()}),e}},g=function(e){e._expandedItems=[],e._isExpandAll=e.option("masterDetail.autoExpandAll")},m=e=>class extends e{init(){g(this),super.init()}expandAll(e){const t=this;e<0?(t._isExpandAll=!0,t._expandedItems=[],t.updateItems()):super.expandAll.apply(t,arguments)}collapseAll(e){const t=this;e<0?(t._isExpandAll=!1,t._expandedItems=[],t.updateItems()):super.collapseAll.apply(t,arguments)}isRowExpandedHack(){return super.isRowExpanded.apply(this,arguments)}isRowExpanded(e){const t=this,i=u.A.getIndexByKey(e,t._expandedItems);return Array.isArray(e)?super.isRowExpanded.apply(t,arguments):!!(t._isExpandAll^(i>=0&&t._expandedItems[i].visible))}_getRowIndicesForExpand(e){const t=this.getRowIndexByKey(e);return[t,t+1]}_changeRowExpandCore(e){const t=this;let i;if(Array.isArray(e))i=super._changeRowExpandCore.apply(t,arguments);else{const n=u.A.getIndexByKey(e,t._expandedItems);if(n>=0){const{visible:e}=t._expandedItems[n];t._expandedItems[n].visible=!e}else t._expandedItems.push({key:e,visible:!0});t.updateItems({changeType:"update",rowIndices:t._getRowIndicesForExpand(e)}),i=(new r.cY).resolve()}return i}_processDataItemHack(){return super._processDataItem.apply(this,arguments)}_processDataItem(e,t){const i=super._processDataItem.apply(this,arguments);return i.isExpanded=this.isRowExpanded(i.key),void 0===t.detailColumnIndex&&(t.detailColumnIndex=-1,(0,l.__)(t.visibleColumns,(e,i)=>{if("expand"===i.command&&!(0,d.O9)(i.groupIndex))return t.detailColumnIndex=e,!1})),t.detailColumnIndex>=0&&(i.values[t.detailColumnIndex]=i.isExpanded),i}_processItemsHack(){return super._processItems.apply(this,arguments)}_processItems(e,t){const i=this,{changeType:n}=t,o=[];return e=super._processItems.apply(i,arguments),"loadingAll"===n?e:("refresh"===n&&(i._expandedItems=(0,s.VM)(i._expandedItems,e=>e.visible)),(0,l.__)(e,(e,t)=>{o.push(t);const n=u.A.getIndexByKey(t.key,i._expandedItems);"data"===t.rowType&&(t.isExpanded||n>=0)&&!t.isNewRow&&o.push({visible:t.isExpanded,rowType:"detail",key:t.key,data:t.data,values:[]})}),o)}optionChanged(e){const t=this;let i,n;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":{const t=e.value||{},o=e.previousValue||{};i=t.enabled!==o.enabled,n=t.autoExpandAll!==o.autoExpandAll;break}case"masterDetail.template":g(t);break;case"masterDetail.enabled":i=!0;break;case"masterDetail.autoExpandAll":n=!0}(i||n)&&g(t)}super.optionChanged(e)}},_=e=>class extends e{fireContentReadyAction(){super.fireContentReadyAction.apply(this,arguments),this._updateParentDataGrids(this.component.$element())}_updateParentDataGrids(e){const t=e.closest(`.${c.N.detailRow}`);t.length&&(0,r.z7)(this._updateMasterDataGrid(t,e)).done(()=>{this._updateParentDataGrids(t.parent())})}_updateMasterDataGrid(e,t){const i=(0,o.A)(e).data("options"),n=(0,o.A)(e).closest(`.${this.getWidgetContainerClass()}`).parent().data("dxDataGrid");if(i&&n)return this._updateMasterDataGridCore(n,i)}_updateMasterDataGridCore(e,t){var i,n;const s=(0,r.cY)();if(null!==(i=e.getView("rowsView"))&&void 0!==i&&null!==(n=i.isFixedColumns)&&void 0!==n&&n.call(i))this._updateFixedMasterDetailGrids(e,t.rowIndex,(0,o.A)(t.rowElement)).done(s.resolve);else{if(!0===e.option("scrolling.useNative"))return void e.updateDimensions().done(()=>s.resolve(!0));const t=e.getScrollable();t?null===t||void 0===t||t.update().done(()=>s.resolve()):s.resolve()}return s.promise()}_updateFixedMasterDetailGrids(e,t,i){const n=(0,r.cY)(),s=(0,o.A)(e.getRowElement(t)),l=(0,o.A)(e.getView("rowsView").getTableElements()),d=2===(null===s||void 0===s?void 0:s.length)&&(0,a.Oq)(s.eq(0))!==(0,a.Oq)(s.eq(1)),u=2===(null===l||void 0===l?void 0:l.length)&&(0,a.Oq)(l.eq(0))!==(0,a.Oq)(l.eq(1));if(d||u){const t=(0,a.RG)(i);return e.updateDimensions().done(()=>{const o=this.option("columnAutoWidth")&&!0===e.option("scrolling.useNative"),s=o&&t!==(0,a.RG)(i);o&&s?this.updateDimensions().done(()=>n.resolve(!0)):n.resolve(!0)}),n.promise()}return(0,r.cY)().resolve()}_toggleBestFitMode(e){super._toggleBestFitMode.apply(this,arguments);const t=this.option("masterDetail.template");if(!t)return;const i=this._rowsView.getTableElement();if(i){const t=`.${this.addWidgetPrefix(c.N.detailContainer)}, .${c.N.detailCell}`;i.find(t).css("maxWidth",e?0:"")}}},C=e=>class extends e{_getCellTemplate(e){const t=this,{column:i}=e,n=this._editingController,o=n&&n.isEditRow(e.rowIndex);let s;return s="detail"!==i.command||o?super._getCellTemplate.apply(t,arguments):t.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:t._getDefaultTemplate(i)},s}_createRow(e){const t=super._createRow.apply(this,arguments),i=(0,h.s)(e);if(i){const i=this.option("showRowLines");t.addClass(c.N.detailRow).toggleClass(c.N.rowLines,i),(0,d.O9)(e.visible)&&t.toggle(e.visible)}return t}_renderCells(e,t){const{row:i}=t,n=(0,h.s)(i);n?this._needRenderCell(0,t.columnIndices)&&this._renderMasterDetailCell(e,i,t):super._renderCells.apply(this,arguments)}_renderMasterDetailCell(e,t,i){const o=this._columnsController.getVisibleColumns(),s=this._renderCell(e,{value:null,row:t,rowIndex:t.rowIndex,column:{command:"detail"},columnIndex:0,change:i.change});s.addClass(c.N.cellFocusDisabledClass).addClass(c.N.detailCell).attr("colSpan",o.length);const r=t.isEditing;return r||s.attr("aria-roledescription",n.A.format("dxDataGrid-masterDetail")),s}},f={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:p,data:m,resizing:_},views:{rowsView:C}}}},44031:function(e,t,i){i.d(t,{j:function(){return o}});var n=i(96283);const o=function(e,t,i,o,s){let r=e=>{};const l=t.getController("keyboardNavigation");t.option("useLegacyKeyboardNavigation")||l&&!l.isKeyboardEnabled()||("filterPanel"===e&&(r=e=>{t.executeAction("onKeyDown",e)},t.createAction("onKeyDown")),n.js(e,t,i,o,s,r))}},44171:function(e,t,i){i.d(t,{O:function(){return B}});i(82438),i(12266),i(99819),i(32225);var n=i(85563),o=i(94360),s=i(50172),r=i(16480),l=i(26662);const a=(e,t)=>{e.addClass(t(r.Nv.stickyColumnBorderLeft))},d=(e,t)=>{e.addClass(t(r.Nv.stickyColumnBorderRight))},u=(e,t,i)=>{switch(t){case r.Xn.Right:e.addClass(i(r.Nv.stickyColumnRight));break;case r.Xn.Sticky:e.addClass(i(r.Nv.stickyColumn));break;default:e.addClass(i(r.Nv.stickyColumnLeft))}},c=(e,t,i)=>{e.toggleClass(i(r.Nv.firstHeader),t)},h=(e,t,i)=>{e.toggleClass(i(r.Nv.columnNoBorder),t)},p=(e,t,i)=>{e.toggleClass(i(r.Nv.stickyColumns),t)},g=(e,t,i)=>{const n=e.hasClass(i(r.Nv.stickyColumn));if(!n)return!1;const s=parseFloat(e[0].style.left),l=(0,o.N)(e[0]),a=(0,o.N)(t[0]),d=l.left-a.left;return Math.round(s)>=Math.round(d)},m=(e,t,i)=>{const n=e.hasClass(i(r.Nv.stickyColumn));if(!n)return!1;const s=parseFloat(e[0].style.right),l=(0,o.N)(e[0]),a=(0,o.N)(t[0]),d=a.right-l.right;return Math.round(s)>=Math.round(d)},_=(e,t,i)=>g(e,t,i)||m(e,t,i),C=(e,t,i)=>e.hasClass(i(r.Nv.stickyColumnRight))||m(e,t,i),f=(e,t)=>e.hasClass(t(r.Nv.stickyColumnLeft))&&e.hasClass(t(r.Nv.stickyColumnBorderRight)),v=(e,t)=>e.hasClass(t(r.Nv.stickyColumnRight))&&e.hasClass(t(r.Nv.stickyColumnBorderLeft)),x=(e,t)=>e.hasClass(t(r.Nv.stickyColumn)),w=(e,t)=>e.hasClass(t(r.Nv.stickyColumnLeft))||e.hasClass(t(r.Nv.stickyColumnRight))||e.hasClass(t(r.Nv.stickyColumn)),y=(e,t)=>e.filter((e,i)=>(0,n.A)(i).hasClass(t(r.Nv.stickyColumnLeft))),b=(e,t)=>e.filter((e,i)=>(0,n.A)(i).hasClass(t(r.Nv.stickyColumnRight))),I=(e,t)=>e.filter((e,i)=>(0,n.A)(i).hasClass(t(r.Nv.stickyColumn))||!w((0,n.A)(i),t)),S=(e,t,i)=>{const o="rtl"===t.css("direction"),s=o?e.toArray():e.toArray().reverse(),r=s.find(e=>g((0,n.A)(e),t,i)||f((0,n.A)(e),i));return(0,n.A)(r??"")},A=(e,t,i)=>{const o="rtl"===t.css("direction"),s=o?e.toArray().reverse():e.toArray(),r=s.find(e=>m((0,n.A)(e),t,i)||v((0,n.A)(e),i));return(0,n.A)(r??"")},E=(e,t,i)=>{const n=(0,o.N)(t.get(0)),s={left:n.left,right:n.right};if(null!==e&&void 0!==e&&e.length){const n=S(e,t,i),r=A(e,t,i);null!==n&&void 0!==n&&n.length&&(s.left=Math.round((0,o.N)(n[0]).right)),null!==r&&void 0!==r&&r.length&&(s.right=Math.round((0,o.N)(r[0]).left))}return s},R=(e,t,i)=>{let{point:o,column:r,nextColumn:a,cells:d}=t;const{item:u,isLeftBoundary:c,isRightBoundary:h}=o,p=(0,n.A)(u),_=Math.round(o.x),C=e.option("rtlEnabled"),x=(0,s.O9)(c)||(0,s.O9)(h),w=(0,n.A)(d??""),y=(0,n.A)(e.getContent()),b=(null===r||void 0===r?void 0:r.fixed)&&(null===a||void 0===a?void 0:a.fixed),I=E(w,y,i);if(b||(0,l.OS)(o,r,a))return!1;if(x){if(f(p,i)||g(p,y,i))return c;if(v(p,i)||m(p,y,i))return h}const S=_<I.left||_>I.right,A=_===I.left||_===I.right,R=C?0===o.index:o.index===w.length;return S||!R&&A},O=(e,t,i,o)=>{const{item:r,isLeftBoundary:l,isRightBoundary:a}=e,d=(0,n.A)(r),u=Math.round(e.x),c=(0,s.O9)(l)||(0,s.O9)(a),h=E(t,i,o);return g(d,i,o)?c&&!l:m(d,i,o)?c&&!a:u<h.left||u>h.right},T=e=>{const t=e.parent(),i=t.children().filter(t=>t<e.index()),n=e.attr("colspan")-i.length;return 1===n},V=(e,t,i)=>{const n=(0,o.N)(t.get(0)),s=E(e,t,i);return{left:s.left-n.left,right:n.right-s.right}},F=(e,t,i,n)=>{const s=(0,o.N)(e.get(0)),r=Math.round(s.left),l=Math.round(s.right),a=E(t,i,n);return r<a.left||l>a.right},P=e=>{if(!e.is("td"))return!1;const t=e.parent().children().last();return e[0]===t[0]},D=e=>!e.is("[tabindex]"),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",i=e,n=e.parent();do{i="next"===t?i.next():i.prev(),i.length||(n="next"===t?n.next():n.prev(),n.length&&(i="next"===t?n.children().first():n.children().last()))}while(i.length&&D(i));return i},B={toggleFirstHeaderClass:c,toggleColumnNoBorderClass:h,addStickyColumnClass:u,addStickyColumnBorderLeftClass:a,addStickyColumnBorderRightClass:d,doesGroupCellEndInFirstColumn:T,toggleStickyColumnsClass:p,getLeftFixedCells:y,getRightFixedCells:b,getNonFixedAndStickyCells:I,getNonFixedAreaBoundingRect:E,getScrollPadding:V,getNextHeaderCell:k,noNeedToCreateResizingPoint:R,isFixedCellPinnedToRight:C,noNeedToCreateReorderingPoint:O,isFixedCell:w,isStickyCell:x,isStickyCellPinned:_,isOutsideVisibleArea:F,isLastCell:P}},45141:function(e,t,i){i.d(t,{Dy:function(){return V},Mo:function(){return F},WX:function(){return R},Z7:function(){return w},js:function(){return T},rK:function(){return E},sf:function(){return I},zY:function(){return O}});i(82438),i(99819);var n=i(24906),o=i(74567),s=i(92324),r=i(85563),l=i(39889),a=i(44956);const d="dx-state-focused",u="dx-cell-focus-disabled",c=".dx-datagrid-rowsview .dx-row",h=`${c} > td`,p=".dx-treelist-rowsview .dx-row",g=`${p} > td`,m={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:[".dx-row-focused",`${c}[tabindex]`,`${h}[tabindex]`,`${h}`,`${p}[tabindex]`,`${g}[tabindex]`,`${g}`],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]};let _=!1,C=!1,f=null,v=!1;function x(e,t){const i=(0,r.A)(t);let n=(0,r.A)();if(e){const t=null===e||void 0===e?void 0:e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');n=i.find(`[aria-label="${t}"][tabindex]`)}else n=i.find("[tabindex]");return n}function w(e,t){const i=(0,r.A)(e),n=i.attr("aria-label"),o=x(n,t.element()),s=o.index(i);f=(0,a.X)({},{ariaLabel:n,index:s},{viewInstance:t})}function y(e,t,i){const n={event:t,handled:!1};return i?i(n):e._createActionByOption("onKeyDown")(n),n.handled}function b(e,t,i){const n=e??(null===i||void 0===i?void 0:i.getRootNode())??s.A.getDocument();if(!n)return;const o=(0,r.A)(n);for(const s in t){const e=t[s],i=o.find(e).first();if(i.length)return i}}function I(e,t,i){const s=(0,o.YD)(i);if(i.ctrlKey&&("upArrow"===s||"downArrow"===s)){var r,l;const o=Object.keys(m);let a=o.indexOf(e);const d=null===t||void 0===t||null===(r=t.component)||void 0===r||null===(l=r.element)||void 0===l?void 0:l.call(r);while(a>=0&&a<o.length){a+="upArrow"===s?-1:1;const e=o[a],r=m[e],l=b(d,r,i.target);if(null!==l&&void 0!==l&&l.length){l.attr("tabindex",t.option("tabindex")||0),n.A.trigger(l,"focus"),l.removeClass(u);break}}}}function S(e,t,i,n,s,r){const l=y(t,i.originalEvent,r);if(l)return;const a=(0,o.YD)(i);"enter"===a||"space"===a?(w(i.target,t),null===n||void 0===n||n({event:i})):"tab"===a?s.addClass(d):I(e,t,i)}function A(){const e=s.A.getActiveElement();v=e&&!e.closest(`.${d}`)}function E(){n.A.on(s.A.getDocument(),"visibilitychange",A)}function R(){n.A.off(s.A.getDocument(),"visibilitychange",A)}function O(e,t){C=!0,e.focus({preventScroll:t}),C=!1}function T(e,t,i,o,s,a){const{useLegacyKeyboardNavigation:u}=t.option();if(u)return l.lQ;const c=()=>(0,r.A)(t.element()),h=i=>S(e,t,i,s,c(),a),p=()=>{_=!0,c().removeClass(d)},g=()=>{if(v)return void(v=!1);const e=!_&&!C;e&&c().addClass(d),_=!1},m=()=>{_=!1};return n.A.on(i,"keydown",o,h),n.A.on(i,"mousedown",o,p),n.A.on(i,"focusin",o,g),n.A.on(i,"mouseup contextmenu",o,m),()=>{n.A.off(i,"keydown",o,h),n.A.off(i,"mousedown",o,p),n.A.off(i,"focusin",o,g),n.A.off(i,"mouseup contextmenu",o,m)}}function V(e){if(!e.option("useLegacyKeyboardNavigation")&&f){const{viewInstance:e}=f;if(e){const t=x(f.ariaLabel,e.element()),i=t.eq(f.index);f=null,n.A.trigger(i,"focus")}}}function F(e,t){const{useLegacyKeyboardNavigation:i}=e.option();i||t.attr("tabindex",e.option("tabindex")||0)}},46246:function(e,t,i){i.d(t,{k:function(){return m}});i(82438),i(99819);var n=i(63027),o=i(85563),s=i(80028),r=i(50172),l=i(61636),a=(i(57327),i(50020),i(44956));function d(e,t,i){let n=e;return(0,r.Kg)(n)&&(n={name:n}),(0,r.O9)(n.name)&&((0,r.O9)(t[n.name])?n=(0,a.X)(!0,{},t[n.name],n):i.includes(n.name)&&(n=Object.assign({},n,{visible:!1}))),(0,a.X)(!0,{},{location:"after"},n)}function u(e,t,i){if(!(0,r.O9)(t))return e;const n={};return e.forEach(e=>{n[e.name]=e}),t.map(e=>d(e,n,i))}var c=i(29410);const h=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"];class p extends c.n{init(){super.init(),this._editingController=this.getController("editing"),this._headerFilterController=this.getController("headerFilter"),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})}_getToolbarItems(){return[]}_getButtonContainer(){return(0,o.A)("<div>").addClass(this.addWidgetPrefix("toolbar-button"))}_getToolbarButtonClass(e){const t=e?` ${e}`:"";return this.addWidgetPrefix("toolbar-button")+t}_getToolbarOptions(){const e=this.option("toolbar"),t={toolbarOptions:{items:this._getToolbarItems(),visible:null===e||void 0===e?void 0:e.visible,disabled:null===e||void 0===e?void 0:e.disabled,onItemRendered(e){const t=e.itemData.onItemRendered;t&&t(e)}}},i=null===e||void 0===e?void 0:e.items;if(t.toolbarOptions.items=u(t.toolbarOptions.items,i,h),this.executeAction("onToolbarPreparing",t),t.toolbarOptions&&!(0,r.O9)(t.toolbarOptions.visible)){const e=t.toolbarOptions.items;t.toolbarOptions.visible=!(null===e||void 0===e||!e.length)}return t.toolbarOptions}_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{const e=this.element();e.addClass(this.addWidgetPrefix("header-panel"));const t=n.A.format(this.component.NAME+"-ariaToolbar"),i=(0,o.A)("<div>").attr("aria-label",t).appendTo(e);this._toolbar=this._createComponent(i,l.A,this._toolbarOptions)}}_columnOptionChanged(){}_handleDataChanged(){this._requireReady&&this.render()}_isDisabledDefinedByUser(e){var t;const i=null===(t=this.option("toolbar"))||void 0===t?void 0:t.items,n=null===i||void 0===i?void 0:i.find(t=>(null===t||void 0===t?void 0:t.name)===e);return(0,r.O9)(null===n||void 0===n?void 0:n.disabled)}render(){this._toolbarOptions=this._getToolbarOptions(),super.render.apply(this,arguments)}setToolbarItemDisabled(e,t){const i=this._toolbar,n=this._isDisabledDefinedByUser(e);if(!i||n)return;const o=i.option("items")??[],s=o.findIndex(t=>t.name===e);if(s<0)return;const r=i.option(`items[${s}]`);i.option(`items[${s}].disabled`,t),r.options&&i.option(`items[${s}].options.disabled`,t)}updateToolbarDimensions(){var e;null===(e=this._toolbar)||void 0===e||e.updateDimensions()}getHeaderPanel(){return this.element()}getHeight(){return this.getElementHeight()}optionChanged(e){if("onToolbarPreparing"===e.name&&(this._invalidate(),e.handled=!0),"toolbar"===e.name){const o=(0,s.u7)(e.fullName),r=e.fullName.replace(/^toolbar\./,"");if(1===o.length||"visible"===o[1])this._invalidate();else if("items"===o[1]){if(2===o.length)this._invalidate();else if(3===o.length){var t;const i=u(this._getToolbarItems(),[e.value],h)[0];null===(t=this._toolbar)||void 0===t||t.option(r,i)}else if(o.length>=4){var i;null===(i=this._toolbar)||void 0===i||i.option(r,e.value)}}else{var n;null===(n=this._toolbar)||void 0===n||n.option(r,e.value)}e.handled=!0}super.optionChanged(e)}isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)}allowDragging(e){return!1}hasGroupedColumns(){}getContextMenuItems(e){}}const g=e=>class extends e{_updateDimensionsCore(){super._updateDimensionsCore.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}},m={defaultOptions:()=>({}),views:{headerPanel:p},extenders:{controllers:{resizing:g}}}},48525:function(e,t,i){i.d(t,{N:function(){return n}});const n={detailRow:"dx-master-detail-row",detailCell:"dx-master-detail-cell",detailContainer:"master-detail-container",cellFocusDisabledClass:"dx-cell-focus-disabled",rowLines:"dx-row-lines"}},48597:function(e,t,i){i.d(t,{h:function(){return y}});i(69375),i(82438),i(2989),i(12266),i(99819),i(57327),i(64727);var n=i(85563),o=i(39889),s=i(66703),r=i(89214),l=i(50172),a=i(86330),d=i(91125),u=i(20338),c=i(86103);const h=(e,t,i)=>{let{isRemoteFiltering:n,dateSerializationFormat:o,getSelector:s}=i;const{selector:r}=e,a=(0,l.Tn)(r)?r:s(r),d=a?a(t):t[r],u=n&&(0,l.$P)(d)?c.A.serializeDate(d,o):d;return{getter:a,rawValue:d,safeValue:u}},p={getSortFilterValue:h},g=".dx-row.dx-row-focused";class m extends d.Ay.ViewController{getKeyboardController(){return this.getController("keyboardNavigation")}getDataController(){return this.getController("data")}init(){this.component._optionsByReference.focusedRowKey=!0}optionChanged(e){const{name:t,value:i,previousValue:n}=e;switch(t){case"focusedRowIndex":this._focusRowByIndex(i),this.getKeyboardController()._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(i)&&JSON.stringify(i)===JSON.stringify(n))return;this._focusRowByKey(i).done(()=>{this.getKeyboardController()._fireFocusedRowChanged()}),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return["navigateToRow","isRowFocused"]}isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")}_focusRowByIndex(e,t){if(!this.option("focusedRowEnabled"))return;const i=void 0!==e?e:this.option("focusedRowIndex");i<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(i,t)}_focusRowByIndexCore(e,t){const i=this.getDataController().pageSize(),n=()=>{if(this._isValidFocusedRowIndex(e)){let i=e-this.getDataController().getRowIndexOffset(!0);if(!t||t.paging&&!t.filtering){const e=this.getDataController()._getLastItemIndex();i=Math.min(i,e)}const n=this.getDataController().getKeyByRowIndex(i,!0);(0,l.O9)(n)&&!this.isRowFocused(n)&&this.option("focusedRowKey",n)}};if(i>=0)if(this._isLocalRowIndex(e))n();else{const t=Math.floor(e/this.getDataController().pageSize());(0,s.z7)(this.getDataController().pageIndex(t),this.getDataController().waitReady()).done(()=>{n()})}}_isLocalRowIndex(e){const t=this.getKeyboardController()._isVirtualScrolling();if(t){const t=Math.floor(e/this.getDataController().pageSize()),i=this.getDataController().virtualItemsCount(),n=i?i.begin:-1,o=this.getDataController().getVisibleRows().length+this.getDataController().getRowIndexOffset(),s=Math.ceil(o/this.getDataController().pageSize());return n<=e&&s>t}return!0}_setFocusedRowKeyByIndex(e){if(this._isValidFocusedRowIndex(e)){const t=Math.min(e-this.getDataController().getRowIndexOffset(),this.getDataController().items().length-1),i=this.getDataController().getKeyByRowIndex(t);(0,l.O9)(i)&&!this.isRowFocused(i)&&this.option("focusedRowKey",i)}}_focusRowByKey(e){return(0,l.O9)(e)?this._navigateToRow(e,!0):(this._resetFocusedRow(),(0,s.cY)().resolve())}_resetFocusedRow(){const e=this.option("focusedRowKey"),t=(0,l.O9)(e);!t&&this.option("focusedRowIndex")<0||(t&&this.option("focusedRowKey",null),this.getKeyboardController().setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getDataController().updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),this.getKeyboardController()._fireFocusedRowChanged())}_isValidFocusedRowIndex(e){const t=this.getDataController().getVisibleRows()[e];return!t||"data"===t.rowType||"group"===t.rowType}navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e,!1)}_navigateToRow(e,t){const i=this,n=i.isAutoNavigateToFocusedRow(),o=new s.cY,r=this.getView("rowsView");if(void 0===e||!this.getDataController().dataSource())return o.reject().promise();const l=i.getFocusedRowIndexByKey(e);return!n&&t||l>=0?i._navigateTo(e,o,t):this.getDataController().getPageIndexByKey(e).done(n=>{n<0?o.resolve(-1):n===this.getDataController().pageIndex()?this.getDataController().reload().done(()=>{i.isRowFocused(e)&&this.getDataController().getRowIndexByKey(e)>=0?o.resolve(i.getFocusedRowIndexByKey(e)):i._navigateTo(e,o,t)}).fail(o.reject):this.getDataController().pageIndex(n).done(()=>{r.waitAsyncTemplates(!0).done(()=>{i._navigateTo(e,o,t)})}).fail(o.reject)}).fail(o.reject),o.promise()}_navigateTo(e,t,i){const n=this.getDataController().getRowIndexByKey(e),o=u.A.isVirtualRowRendering(this),s=this.isAutoNavigateToFocusedRow();s&&o&&n<0?this._navigateToVirtualRow(e,t,i):this._navigateToVisibleRow(e,t,i)}_navigateToVisibleRow(e,t,i){if(i)this._triggerUpdateFocusedRow(e,t);else{const i=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,t).done(()=>{t.resolve(i)})}}_navigateToVirtualRow(e,t,i){const n=this.getDataController()._rowsScrollController,o=u.A.getIndexByKey(e,this.getDataController().items(!0)),s=this.getView("rowsView").getScrollable();if(n&&s&&o>=0){const s=o+this.getDataController().getRowIndexOffset(!0),r=n.getItemOffset(s),l=()=>{this.getDataController().totalCount()&&!this.getDataController().items().length||(this.component.off("contentReady",l),i?this._triggerUpdateFocusedRow(e,t):t.resolve(s))};this.component.on("contentReady",l),this.getView("rowsView").scrollTopPosition(r)}else t.resolve(-1)}_triggerUpdateFocusedRow(e,t){const i=this.getFocusedRowIndexByKey(e);if(this._isValidFocusedRowIndex(i)){let n;this.option("focusedRowEnabled")?this.getDataController().updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):n=this.getView("rowsView").scrollToRowElement(e),(0,s.z7)(n).done(()=>{this.getKeyboardController().setFocusedRowIndex(i),t&&t.resolve(i)})}else t&&t.resolve(-1)}getFocusedRowIndexByKey(e){const t=this.getDataController().getRowIndexByKey(e,!0);return t>=0?t+this.getDataController().getRowIndexOffset(!0):-1}_focusRowByKeyOrIndex(){const e=this.option("focusedRowKey");let t=this.option("focusedRowIndex");if((0,l.O9)(e)){const i=this.getDataController().getRowIndexByKey(e);i>=0?(this.getKeyboardController()._isVirtualScrolling()&&(t=i+this.getDataController().getRowIndexOffset()),this.getKeyboardController().setFocusedRowIndex(t),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(e=>{t>=0&&e<0?this._focusRowByIndex():t<0&&e>=0&&this.getKeyboardController().setFocusedRowIndex(e)})}else t>=0&&this._focusRowByIndex(t)}isRowFocused(e){const t=this.option("focusedRowKey");if((0,l.O9)(t))return(0,o.RL)(e,this.option("focusedRowKey"))}updateFocusedRow(e){const t=this,i=t.getDataController().getRowIndexByKey(e.focusedRowKey),o=t.getView("rowsView");let s,l;(0,r.__)(o.getTableElements(),(e,o)=>{const r=0===e;s=(0,n.A)(o),t._clearPreviousFocusedRow(s,i);const a=t._prepareFocusedRow({changedItem:t.getDataController().getVisibleRows()[i],$tableElement:s,focusedRowIndex:i});r&&(l=a)}),!e.preventScroll&&l&&o.scrollToElementVertically(l)}_clearPreviousFocusedRow(e,t){const i=e.find(g).filter((t,i)=>{const o=(0,n.A)(i).closest(`.${this.addWidgetPrefix("table")}`);return e.is(o)});if(i.removeClass("dx-row-focused").removeClass("dx-cell-focus-disabled").removeAttr("tabindex"),i.children("td").removeAttr("tabindex"),0!==t){const e=(0,n.A)(this.getView("rowsView").getRowElement(0));e.removeClass("dx-cell-focus-disabled").removeAttr("tabIndex")}}_prepareFocusedRow(e){let t;const{changedItem:i}=e;if(i&&("data"===i.rowType||"group"===i.rowType)){const{focusedRowIndex:i}=e,{$tableElement:o}=e,s=this.option("tabindex")||0,r=this.getView("rowsView");t=(0,n.A)(r._getRowElements(o).eq(i)),t.addClass("dx-row-focused").attr("tabindex",s)}return t}}const _=e=>class extends e{init(){const e=this.option("focusedRowIndex"),t=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),super.init(),this.setRowFocusType(),this._focusedCellPosition={},(0,l.O9)(e)&&e>=0&&(this._focusedCellPosition.rowIndex=e),(0,l.O9)(t)&&t>=0&&(this._focusedCellPosition.columnIndex=t)}setFocusedRowIndex(e){super.setFocusedRowIndex(e),this.option("focusedRowIndex",e)}setFocusedColumnIndex(e){super.setFocusedColumnIndex(e),this.option("focusedColumnIndex",e)}_escapeKeyHandler(e,t){return t||!this.option("focusedRowEnabled")?super._escapeKeyHandler(e,t):!!this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(e.originalEvent.target),!0),!0)}_updateFocusedCellPosition(e,t){const i=super._updateFocusedCellPosition(e,t);return i&&i.columnIndex>=0&&this._fireFocusedCellChanged(e),i}},C=e=>class extends e{renderFocusOverlay(e,t){var i;const n=this.option("focusedRowEnabled");if(!n||null===(i=this._keyboardNavigationController)||void 0===i||!i.isRowFocusType()||this._editingController.isEditing()||this._columnHeadersView.isFilterRowCell(e))super.renderFocusOverlay(e,t);else if(n){const t="row"===this._keyboardNavigationController._getElementType(e);if(t&&!e.hasClass("dx-row-focused")){const t=this._keyboardNavigationController.getFirstValidCellInRow(e);this._keyboardNavigationController.focus(t)}}}},f=e=>class extends e{getSortDataSourceParameters(e,t){let i=super.getSortDataSourceParameters.apply(this,arguments);const n=this._dataController._dataSource,o=this._dataController.store();let s=o&&o.key();const r=n&&n.remoteOperations()||{},l=Object.keys(r).every(e=>!r[e]);if(s&&(this.option("focusedRowEnabled")&&!1!==this._focusController.isAutoNavigateToFocusedRow()||t)){s=Array.isArray(s)?s:[s];const e=s.filter(e=>!this.columnOption(e,"sortOrder"));e.length&&(i=i||[],l?i.push({selector:n.getDataIndexGetter(),desc:!1}):e.forEach(e=>i.push({selector:e,desc:!1})))}return i}},v=e=>class extends e{constructor(){super(...arguments),this._isDataPushed=!1}_applyChange(e){if(!e||"updateFocusedRow"!==e.changeType)return super._applyChange.apply(this,arguments)}_fireChanged(e){super._fireChanged(e);const t=this._isDataPushed;if(this._isDataPushed=!1,this.option("focusedRowEnabled")&&this._dataSource){const i="update"===e.changeType&&e.repaintChangesOnly,n=i&&e.changeTypes&&e.changeTypes.indexOf("remove")>=0;t&&this.isEmpty()?this._focusController._resetFocusedRow():"refresh"===e.changeType&&e.items.length||n?(this._updatePageIndexes(),this._updateFocusedRowIfNeeded(e,t)):"append"===e.changeType||"prepend"===e.changeType?this._updatePageIndexes():i&&this._updateFocusedRowIfNeeded(e,t)}}_handleDataPushed(e){super._handleDataPushed(e);const t=this.option("focusedRowKey");this._isDataPushed=(0,l.O9)(t)&&!!e.length}_updatePageIndexes(){const e=this._lastRenderingPageIndex||0,t=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=t,this._isPagingByRendering=t!==e}isPagingByRendering(){return this._isPagingByRendering}_updateFocusedRowIfNeeded(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.operationTypes||{},{reload:n,fullReload:o,pageIndex:s,paging:r}=i,a=this._keyboardNavigationController._isVirtualScrolling(),d=r&&!a,u=this.option("focusedRowKey"),c=this._focusController.isAutoNavigateToFocusedRow(),h=n&&!1===s,p=this.getRowIndexByKey(u);switch(!0){case t:this._focusController._focusRowByKeyOrIndex();break;case h&&!o&&(0,l.O9)(u):this._focusController._navigateToRow(u,!0).done(e=>{e<0&&this._focusController._focusRowByIndex(void 0,i)});break;case d&&c:{const e=this.option("focusedRowIndex"),t=p>=0,n=e>=0,o=e===p;!n||!o&&t||this._focusController._focusRowByIndex(e,i);break}case d&&!c&&p<0:this.option("focusedRowIndex",-1);break;case i.fullReload:this._focusController._focusRowByKeyOrIndex()}}getPageIndexByKey(e){const t=this,i=new s.cY;return t.getGlobalRowIndexByKey(e).done(e=>{i.resolve(e>=0?Math.floor(e/t.pageSize()):-1)}).fail(i.reject),i.promise()}getGlobalRowIndexByKey(e){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(e):this._calculateGlobalRowIndexByFlatData(e)}_calculateGlobalRowIndexByFlatData(e,t,i){const n=this,o=new s.cY,r=n._dataSource;if(Array.isArray(e)||(0,a.MF)(e))return o.resolve(-1).promise();let l=n._generateFilterByKey(e);return r.load({filter:n._concatWithCombinedFilter(l),skip:0,take:1}).done(s=>{s.length>0?(l=n._generateOperationFilterByKey(e,s[0],i),r.load({filter:n._concatWithCombinedFilter(l,t),skip:0,take:1,requireTotalCount:!0}).done((e,t)=>{o.resolve(t.totalCount)})):o.resolve(-1)}),o.promise()}_concatWithCombinedFilter(e,t){const i=this.getCombinedFilter();return u.A.combineFilters([e,i,t])}_generateBooleanFilter(e,t,i){const{desc:n}=i;switch(!0){case!1===t&&n:return[e,"=",!0];case!1===t&&!n:return[e,"=",null];case!0===t&&!n:case!(0,l.Lm)(t)&&n:return[e,"<>",t];default:return}}_generateOperationFilterByKey(e,t,i){const n=this,o=n.option("dateSerializationFormat"),s=n._dataSource.remoteOperations().filtering,r=n._dataSource.remoteOperations().sorting;let a=n._generateFilterByKey(e,"<"),d=n._columnsController.getSortDataSourceParameters(!s,!0);if(i){const e=n._columnsController.getGroupDataSourceParameters(!s);e&&(d=d?e.concat(d):e)}return d&&d.slice().reverse().forEach(e=>{const{selector:i,desc:d,compare:u}=e,{getter:c,rawValue:h,safeValue:g}=p.getSortFilterValue(e,t,{isRemoteFiltering:s,dateSerializationFormat:o,getSelector:e=>n._columnsController.columnOption(e,"selector")});if(a=[[i,"=",g],"and",a],null===h||(0,l.Lm)(h)){const e=n._generateBooleanFilter(i,g,d);e&&(a=[e,"or",a])}else{const e=d?">":"<";let t;u&&!r?t=t=>"<"===e?u(h,c(t))>=1:u(h,c(t))<=-1:(t=[i,e,g],d||(t=[t,"or",[i,"=",null]])),a=[t,"or",a]}}),a}_generateFilterByKey(e,t){const i=this._dataSource.key();let n=[];if(t||(t="="),Array.isArray(i))for(let o=0;o<i.length;++o){const s=e[i[o]];s&&(n.length>0&&n.push("and"),n.push([i[o],t,s]))}else n=[i,t,e];return n}_getLastItemIndex(){return this.items(!0).length-1}},x=e=>class extends e{_deleteRowCore(e){const t=super._deleteRowCore.apply(this,arguments),i=this._dataController.getKeyByRowIndex(e);t.done(()=>{const e=this._dataController.getRowIndexByKey(i),t=this._dataController.getVisibleRows();-1!==e||t.length||this._focusController._resetFocusedRow()})}},w=e=>class extends e{_createRow(e){const t=super._createRow.apply(this,arguments);return this.option("focusedRowEnabled")&&e&&this._focusController.isRowFocused(e.key)&&t.addClass("dx-row-focused"),t}_checkRowKeys(e){if(super._checkRowKeys.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){const e=this._dataController.store();e&&!e.key()&&this._dataController.fireError("E1042","Row focusing")}}_update(e){"updateFocusedRow"===e.changeType?this.option("focusedRowEnabled")&&this._focusController.updateFocusedRow(e):super._update(e)}updateFocusElementTabIndex(e,t){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(t):super.updateFocusElementTabIndex(e)}_setFocusedRowElementTabIndex(e){const t=this.option("focusedRowKey"),i=this.option("tabIndex")??0,n=this._columnsController;let o=this._dataController.getRowIndexByKey(t),s=this.option("focusedColumnIndex");const r=this._findRowElementForTabIndex(),a=this._dataController.dataSource(),d=null===a||void 0===a?void 0:a.operationTypes(),u=!d||d.paging;(0,l.O9)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),r.attr("tabIndex",i);const c=this.option("focusedRowIndex")-this._dataController.getRowIndexOffset(!0);!u&&o<0&&c>=0&&this._focusController.updateFocusedRow({focusedRowKey:t,preventScroll:e}),o>=0&&!e&&(s<0&&(s=0),o+=this._dataController.getRowIndexOffset(),s+=n.getColumnIndexOffset(),this._keyboardNavigationController.setFocusedCellPosition(o,s),this._focusController.isAutoNavigateToFocusedRow()&&(u||this._dataController.isPagingByRendering()||(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))))}_findRowElementForTabIndex(){const e=this.option("focusedRowKey"),t=this._dataController.getRowIndexByKey(e);return(0,n.A)(this.getRowElement(t>=0?t:0))}scrollToRowElement(e){const t=this._dataController.getRowIndexByKey(e),i=(0,n.A)(this.getRow(t));return this.scrollToElementVertically(i)}scrollToElementVertically(e){const t=this.getScrollable();if(t&&e.length){const i=t.getScrollElementPosition(e,"vertical");return this.scrollTopPosition(i)}return(new s.cY).resolve()}scrollTopPosition(e){const t=new s.cY,i=this.getScrollable();if(i){const n=i.scrollTop(),o=()=>{i.off("scroll",o),t.resolve()};if(e!==n)return i.on("scroll",o),this._dataController.resetFilterApplying(),i.scrollTo({top:e}),t.promise()}return t.resolve()}},y={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:m},extenders:{controllers:{keyboardNavigation:_,editorFactory:C,columns:f,data:v,editing:x},views:{rowsView:w}}}},51592:function(e,t,i){i.d(t,{$O:function(){return V},Py:function(){return R},nx:function(){return F},tO:function(){return T}});i(69375),i(82438),i(2989),i(12266),i(99819),i(57327),i(50020),i(74786);var n=i(59981),o=i(24906),s=i(85997),r=i(74567),l=i(63027),a=i(84558),d=i(85563),u=i(39889),c=i(66703),h=i(44956),p=i(89214),g=i(50172),m=i(93821),_=i(89651),C=i(98463),f=i(91125),v=i(20338);const x="dx-select-checkboxes-hidden",w="selection.showCheckBoxesMode",y="selection.mode",b=function(e,t){const i=e.getView("rowsView"),n=e.getController("selection"),o=(0,d.A)(t.target).closest(".dx-data-row"),s=i.getRowIndex(o);s<0||("onLongTap"===e.option(w)?n.isSelectionWithCheckboxes()?n.stopSelectionWithCheckboxes():n.startSelectionWithCheckboxes():("onClick"===e.option(w)&&n.startSelectionWithCheckboxes(),"always"!==e.option(w)&&n.changeItemSelection(s,{control:!0})))},I=function(e,t){let i=0;const n=e._dataController.store(),o=null===n||void 0===n?void 0:n.key(),s=Array.isArray(o);if(!t.length)return!1;if(s&&Array.isArray(t[0])&&"and"===t[1]){for(let e=0;e<t.length;e++)if(Array.isArray(t[e])){if(t[e][0]!==o[i]||"="!==t[e][1])return!0;i++}return!1}return o!==t[0]},S=(e,t)=>{const{component:i}=t,n=i.getView("rowsView");i.option("renderAsync")&&!i.option("selection.deferred")&&(t.value=i.isRowSelected(t.row.key)),n.renderSelectCheckBoxContainer((0,d.A)(e),t)},A=(e,t)=>{const{column:i}=t,n=(0,d.A)(e),o=t.component.getView("columnHeadersView");n.addClass("dx-editor-cell"),o._renderSelectAllCheckBox(n,i),o._attachSelectAllCheckBoxClickEvent(n)};class E extends f.Ay.Controller{init(){const{deferred:e,selectAllMode:t,mode:i}=this.option("selection")??{};"infinite"!==this.option("scrolling.mode")||e||"multiple"!==i||"allPages"!==t||m.A.log("W1018"),this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._stateStoringController=this.getController("stateStoring"),this._selectionMode=i,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){const t=this.option("selection.deferred");let i=e.filter(e=>"remove"===e.type).map(e=>e.key);if(t){const e=this._dataController.items().filter(e=>e.isSelected).map(e=>e.key);i=i.filter(t=>e.find(e=>(0,u.RL)(e,t)))}i.length&&this.deselectRows(i)}_updateSelectedOnPush(e){const t=this.option("selection.deferred");if(t)return;const i=e.filter(e=>"update"===e.type),n=this.getSelectedRowsData();(0,a.VK)({keyInfo:this._selection.options,data:n,changes:i})}_getSelectionConfig(){const e=this._dataController,t=this._columnsController,i=this.option("selection")??{},{deferred:n}=i,o=this.option("scrolling.mode"),s="virtual"===o||"infinite"===o,r=this.option("selection.allowSelectAll"),l=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:n,alwaysSelectByShift:i.alwaysSelectByShift,maxFilterLengthInRequest:i.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,isVirtualPaging:s,sensitivity:this.option("selection.sensitivity"),allowLoadByRange(){const e=t.getGroupColumns().length>0;return s&&!l&&!e&&r&&!n},key:()=>null===e||void 0===e?void 0:e.key(),keyOf:t=>null===e||void 0===e?void 0:e.keyOf(t),dataFields(){var t;return null===(t=e.dataSource())||void 0===t?void 0:t.select()},load(t){var i;return(null===(i=e.dataSource())||void 0===i?void 0:i.load(t))||(new c.cY).resolve([])},plainItems:t=>e.items(!0),isItemSelected:e=>e.selected,isSelectableItem:e=>"data"===(null===e||void 0===e?void 0:e.rowType)&&!e.isNewRow,getItemData:e=>(0,g.O9)(null===e||void 0===e?void 0:e.rowType)?(null===e||void 0===e?void 0:e.oldData)||(null===e||void 0===e?void 0:e.data):e,filter:()=>e.getCombinedFilter(n),totalCount:()=>e.totalCount(),getLoadOptions(t,i,n){var o;const{sort:s,filter:r}=(null===(o=e.dataSource())||void 0===o?void 0:o.lastLoadOptions())??{};let l=Math.min(t,i),a=Math.max(t,i);(0,g.O9)(n)&&(l=Math.min(n,l),a=Math.max(n,a));const d=a-l+1;return{skip:l,take:d,filter:r,sort:s}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){const e=this._columnsController,t=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:t,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:"dx-command-select",width:"auto",cellTemplate:S,headerCellTemplate:A}),e.columnOption("command:select","visible",t)}_createSelection(){const e=this._getSelectionConfig();return new C.A(e)}_fireSelectionChanged(e){const t=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(t),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){const{isDeferredMode:t}=e,{selectionFilter:i}=e,{selectedItemKeys:n}=e,{removedItemKeys:o}=e;"onClick"===this.option(w)&&((t?i&&I(this,i):n.length>1)?this.startSelectionWithCheckboxes():(t?i&&!i.length:0===n.length&&o.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){const t=this;let i;const n=t.option("selection.deferred"),o=t._selection.selectionFilter(),s=t._dataController,r=s.items(!0),l=s.items();if(!r)return;const a=t.isSelectionWithCheckboxes(),d=t.getChangedItemIndexes(r),u=t.getChangedItemIndexes(l);t._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:o,isDeferredMode:n}),(d.length||a!==t.isSelectionWithCheckboxes())&&s.updateItems({changeType:"updateSelection",itemIndexes:u}),n?(t.option("selectionFilter",o),i={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(t._selectedItemsInternalChange=!0,t.option("selectedRowKeys",e.selectedItemKeys.slice(0)),t._selectedItemsInternalChange=!1,i={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),t._fireSelectionChanged(i)}getChangedItemIndexes(e){const t=this,i=[],n=this.option("selection.deferred");for(let o=0,{length:s}=e;o<s;o++){const s=e[o],r=t.isRowSelected(n?s.data:s.key);t._selection.isDataItem(s)&&s.isSelected!==r&&i.push(o)}return i}callbackNames(){return["selectionChanged"]}optionChanged(e){var t;super.optionChanged(e);const i=!(null===(t=this._selection)||void 0===t||!t.options);switch(e.name){case"selection":{const t=this._selectionMode;if(this.init(),i&&"selection.sensitivity"===e.fullName&&(this._selection.options.sensitivity=e.value),"selection.showCheckBoxesMode"!==e.fullName){const e=this._selectionMode;let i=this.option("selectedRowKeys");t!==e&&("single"===e?i.length>1&&(i=[i[0]]):"multiple"!==e&&(i=[])),this.selectRows(i).always(()=>{this._fireSelectionChanged()})}else this.refresh().always(()=>{this._fireSelectionChanged()});this._columnsController.updateColumns(),e.handled=!0;break}case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":{const t=e.value||[];!Array.isArray(t)||this._selectedItemsInternalChange||!this.component.getDataSource()&&t.length||this.selectRows(t),e.handled=!0;break}}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return"multiple"===this.option(y)&&("always"===this.option(w)||"onClick"===this.option(w)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(w)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){const e=this.option("selectedRowKeys")??[];return!this.option("selection.deferred")&&e.length?this.selectedItemKeys(e):(new c.cY).resolve().promise()}selectedItemKeys(e,t,i,n){return this._selection.selectedItemKeys(e,t,i,n)}getSelectedRowKeys(e){return this._selection.getSelectedItemKeys()}selectRows(e,t){return this.selectedItemKeys(e,t)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){const t=this._dataController.items(),i=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),(0,p.__)(e,function(){const e=t[this];e&&"data"===e.rowType&&i.push(e.key)}),this.selectRows(i)}getSelectedRowsData(e){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,t,i){t=t||{},this.isSelectionWithCheckboxes()&&(t.control=!0);const n=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(n,t,i)}focusedItemIndex(e){const t=this;if(!(0,g.O9)(e))return t._selection._focusedItemIndex;t._selection._focusedItemIndex=e}isSelectionWithCheckboxes(){return"multiple"===this.option(y)&&("always"===this.option(w)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){const e=this;return"multiple"===e.option(y)&&!e.isSelectionWithCheckboxes()&&(e._isSelectionWithCheckboxes=!0,e._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){const e=this;return!!e._isSelectionWithCheckboxes&&(e._isSelectionWithCheckboxes=!1,e._updateSelectColumn(),!0)}}const R=e=>class extends e{init(){const e=this.option("selection.deferred");super.init.apply(this,arguments),e&&this._selectionController._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})}_loadDataSource(){const e=this;return super._loadDataSource().always(()=>{e._selectionController.refresh()})}_processDataItem(e,t){const i=this._selectionController.isSelectColumnVisible(),n=t.isDeferredSelection=void 0===t.isDeferredSelection?this.option("selection.deferred"):t.isDeferredSelection,o=super._processDataItem.apply(this,arguments);if(o.isSelected=this._selectionController.isRowSelected(n?o.data:o.key),i&&o.values)for(let s=0;s<t.visibleColumns.length;s++)if("select"===t.visibleColumns[s].command){o.values[s]=o.isSelected;break}return o}refresh(e){const t=new c.cY;return super.refresh(e).done(()=>{const i=(0,g.Gv)(e)&&!e.selection;i?t.resolve():this._selectionController.refresh().done(t.resolve).fail(t.reject)}).fail(t.reject),t.promise()}_handleDataChanged(e){const t=this.hasLoadOperation();super._handleDataChanged.apply(this,arguments),t&&!this._repaintChangesOnly&&this._selectionController.focusedItemIndex(-1)}_applyChange(e){if(!e||"updateSelection"!==e.changeType)return super._applyChange.apply(this,arguments);e.items.forEach((e,t)=>{const i=this._items[t];i&&(i.isSelected=e.isSelected,i.values=e.values)})}_endUpdateCore(){const e=this._changes,t=e.length>1&&e.every(e=>"updateSelection"===e.changeType);if(t){const t=e.map(e=>e.itemIndexes||[]).reduce((e,t)=>e.concat(t));this._changes=[{changeType:"updateSelection",itemIndexes:t}]}super._endUpdateCore.apply(this,arguments)}},O=e=>class extends e{_contextMenuPrepared(e){const t=e.event;t.originalEvent&&"dxhold"!==t.originalEvent.type||e.items&&e.items.length>0||b(this,t)}},T=e=>class extends e{init(){super.init(),this._selectionController.selectionChanged.add(this._updateSelectAllValue.bind(this))}_isSelectAllCheckBoxVisible(){const e=this._dataController.isEmpty(),t=this.option("selection.allowSelectAll"),i=this._selectionController.isSelectAll();return!e&&(t||!1!==i)}_updateSelectAllValue(){const e=this.element(),t=null===e||void 0===e?void 0:e.find(".dx-select-checkbox");if(e&&t.length&&"multiple"===this.option("selection.mode")){const e=this._selectionController.isSelectAll(),i=this._isSelectAllCheckBoxVisible();t.dxCheckBox("instance").option({visible:i,value:e})}}_handleDataChanged(e){super._handleDataChanged(e),(!e||"refresh"===e.changeType||e.repaintChangesOnly&&"update"===e.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})}_renderSelectAllCheckBox(e,t){const i=this._createSelectAllCheckboxElement(t);return i.appendTo(e),i}_createSelectAllCheckboxElement(e){const t=(0,d.A)("<div>").addClass("dx-select-checkbox");return this.setAria("label",l.A.format("dxDataGrid-ariaSelectAll"),t),this._editorFactoryController.createEditor(t,(0,h.X)({},e,{parentType:"headerRow",dataType:"boolean",value:this._selectionController.isSelectAll(),editorOptions:{visible:this._isSelectAllCheckBoxVisible()},tabIndex:this.option("useLegacyKeyboardNavigation")?-1:this.option("tabIndex")||0,setValue:(e,t)=>{const i=this.option("selection.allowSelectAll");t.component.option("visible",i||!1!==t.component.option("value")),t.event&&this._selectionController.isSelectAll()!==e&&(t.value&&!i?t.component.option("value",!1):t.value?this._selectionController.selectAll():this._selectionController.deselectAll(),t.event.preventDefault())}})),t}_attachSelectAllCheckBoxClickEvent(e){o.A.on(e,n.U,this.createAction(e=>{const{event:t}=e;this._isSelectAllCheckBoxVisible()?((0,d.A)(t.target).closest(".dx-select-checkbox").length||o.A.trigger((0,d.A)(t.currentTarget).children(".dx-select-checkbox"),n.U),t.preventDefault()):t.preventDefault()}))}},V=e=>class extends e{renderSelectCheckBoxContainer(e,t){"data"!==t.rowType||t.row.isNewRow?v.A.setEmptyText(e):(e.addClass("dx-editor-cell"),this._attachCheckBoxClickEvent(e),this._renderSelectCheckBox(e,t))}_renderSelectCheckBox(e,t){const i=(0,d.A)("<div>").addClass("dx-select-checkbox").appendTo(e);return this.setAria("label",l.A.format("dxDataGrid-ariaSelectRow"),i),this._editorFactoryController.createEditor(i,(0,h.X)({},t.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:t.value,setValue(e,t){var i;"keydown"===(null===t||void 0===t||null===(i=t.event)||void 0===i?void 0:i.type)&&o.A.trigger(t.element,n.U,t)},row:t.row})),i}_attachCheckBoxClickEvent(e){o.A.on(e,n.U,this.createAction(function(e){const{event:t}=e,i=this.getRowIndex((0,d.A)(t.currentTarget).closest(".dx-row"));i>=0&&(this._selectionController.startSelectionWithCheckboxes(),this._selectionController.changeItemSelection(i,{shift:t.shiftKey}),(0,d.A)(t.target).closest(".dx-select-checkbox").length&&this._dataController.updateItems({changeType:"updateSelection",itemIndexes:[i]}))}))}_update(e){const t=this,i=t.getTableElements();"updateSelection"===e.changeType?i.length>0&&((0,p.__)(i,(i,n)=>{(0,p.__)(e.itemIndexes||[],(i,o)=>{let s;if(e.items[o]&&(s=t._getRowElements((0,d.A)(n)).eq(o),s.length)){const{isSelected:i}=e.items[o];s.toggleClass("dx-selection",void 0!==i&&i).find(".dx-select-checkbox").dxCheckBox("option","value",i),t.setAria("selected",i,s)}})}),t._updateCheckboxesClass()):super._update(e)}_createTable(){const e=this,t=e.option("selection.mode"),i=super._createTable.apply(e,arguments);return"none"!==t&&("onLongTap"!==e.option(w)&&_.Ay.touch||o.A.on(i,(0,r.b4)(s.A.name,"dxDataGridRowsView"),".dx-data-row",e.createAction(t=>{b(e.component,t.event),t.event.stopPropagation()})),o.A.on(i,"mousedown selectstart",e.createAction(e=>{const{event:t}=e;t.shiftKey&&t.preventDefault()}))),i}_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const{isSelected:i}=e;i&&t.addClass("dx-selection");const n=this.option(y);"none"!==n&&this.setAria("selected",i,t)}return t}_rowClickForTreeList(e){super._rowClick(e)}_rowClick(e){const t=this,i=e.event,n=(0,d.A)(i.target).closest(".dx-selection-disabled").length;t.isClickableElement((0,d.A)(i.target))||(n||"multiple"===t.option(y)&&"always"===t.option(w)||t._selectionController.changeItemSelection(e.rowIndex,{control:(0,r.By)(i),shift:i.shiftKey})&&(i.preventDefault(),e.handled=!0),super._rowClick(e))}isClickableElement(e){const t=e.closest(".dx-command-select").length;return!!t}_renderCore(e){const t=super._renderCore(e);return this._updateCheckboxesClass(),t}_updateCheckboxesClass(){const e=this.getTableElements(),t=this._selectionController.isSelectColumnVisible()&&!this._selectionController.isSelectionWithCheckboxes();(0,p.__)(e,(e,i)=>{(0,d.A)(i).toggleClass(x,t)})}},F={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",deferred:!1,maxFilterLengthInRequest:1500,alwaysSelectByShift:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:E},extenders:{controllers:{data:R,contextMenu:O},views:{columnHeadersView:T,rowsView:V}}}},52042:function(e,t,i){i.d(t,{Qy:function(){return K}});i(69375),i(82438),i(12266),i(57327),i(32225);var n=i(59981),o=i(24906),s=i(30090),r=i(63027),l=i(15045),a=i(91418),d=i(57653),u=i(80028),c=i(66703),h=i(44956),p=i(89214),g=i(94360),m=i(50172),_=i(96283),C=i(10391),f=i(91125),v=i(20338),x=(i(99819),i(34840),i(72552),i(55101),i(85563)),w=i(2308),y=i(12590),b=i(52403);const I=Symbol("HANDLER_DECORATED_KEY");function S(e){e=e||[];for(let t=0;t<e.length;t++)e[t].selected=!1,S(e[t].items)}function A(e){const t="dxTreeView"===e.NAME?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return e.$element().find(t).dxCheckBox("instance")}function E(e,t){const i=e.option("onValueChanged");if(null!==i&&void 0!==i&&i[I])return i;const n=e=>{const{event:n,value:o}=e,s=!!n;switch(null===n||void 0===n||n.stopPropagation(),!0){case s&&!0===o:return void t.selectAll();case s&&!1===o:return void t.unselectAll();default:null===i||void 0===i||i(e)}};return n[I]=!0,n}function R(e){const t=A(e);if(!t)return;const i=E(t,e);t.option("onValueChanged",i)}function O(e,t){if(e.option("searchValue"))return;const i=A(e);i&&null!==t&&void 0!==t&&t.length&&i.option("value",void 0)}function T(e,t,i){if(t^i){if(e.selected=!0,i&&e.items)for(let n=0;n<e.items.length;n++)if(!e.items[n].selected){e.selected=void 0;break}}else(i||e.selected)&&(e.selected=!1,S(e.items))}class V extends f.Ay.View{getPopupContainer(){return this._popupContainer}getListComponent(){return this._listComponent}applyHeaderFilter(e){const t=this.getListComponent(),i=t.option("searchValue"),n=A(t),o=!i&&!e.isFilterBuilder&&(null===n||void 0===n?void 0:n.option("value")),s=[],r=function(e,n,o){(0,p.__)(n,(n,s)=>{if(void 0!==s.selected&&!!s.selected^o){const n=t._getNode(s),o=t._hasChildren(n),r=o&&s.items&&s.items.some(e=>e.selected);if(!i||!r)return void e.push(s.value)}s.items&&s.items.length&&r(e,s.items,o)})};o?("tree"===e.type&&(e.filterType="exclude"),Array.isArray(e.filterValues)&&(e.filterValues=[])):"tree"===e.type&&(e.filterType&&(e.filterType="include"),r(s,t.option("items"),!1),e.filterValues=s),e.filterValues&&!e.filterValues.length&&(e.filterValues=null),e.apply(),this.hideHeaderFilterMenu()}showHeaderFilterMenu(e,t){const i=this;if(t){i._initializePopupContainer(t);const n=i.getPopupContainer();i.hideHeaderFilterMenu(),i.updatePopup(e,t),n.show()}}hideHeaderFilterMenu(){const e=this.getPopupContainer();e&&e.hide()}updatePopup(e,t){const i=this,n=this.option("showColumnLines"),o="right"===t.alignment^!n?"left":"right";i._popupContainer.setAria({role:"dialog",label:r.A.format("dxDataGrid-headerFilterLabel")}),i._popupContainer&&(i._cleanPopupContent(),i._popupContainer.option("position",{my:`${o} top`,at:`${o} bottom`,of:e,collision:"fit fit"}))}_getSearchExpr(e,t){const{lookup:i}=e,{useDefaultSearchExpr:n}=e,o=t.dataSource,s=t.search.searchExpr;if(s)return s;if(n||(0,m.O9)(o)&&!(0,m.Tn)(o))return"text";if(i)return i.displayExpr||"this";if(e.dataSource){const{group:t}=e.dataSource;if(Array.isArray(t)&&t.length>0)return t[0].selector;if((0,m.Tn)(t)&&!e.remoteFiltering)return t}return e.dataField||e.selector}_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()}_initializePopupContainer(e){const t=this,i=t.element(),n=this._normalizeHeaderFilterOptions(e),{hidePopupCallback:o}=e,{height:s,width:r}=n,l={width:r,height:s,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:"dx-header-filter-menu"},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:n.texts.ok,onClick(){t.applyHeaderFilter(e)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:n.texts.cancel,onClick(){t.hideHeaderFilterMenu(),null===o||void 0===o||o()}}}],resizeEnabled:!0,onShowing(i){i.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(e,n),e.onShowing&&e.onShowing(i)},onShown(){t.getListComponent().focus()},onHidden:e.onHidden,onInitialized(e){const{component:t}=e;t.option("animation",t._getDefaultOptions().animation)},_loopFocus:!0};(0,m.O9)(t._popupContainer)?t._popupContainer.option(l):t._popupContainer=t._createComponent(i,w.A,l)}_initializeListContainer(e,t){const i=this,n=i._popupContainer.$content(),o=!e.isFilterBuilder&&t.allowSelectAll,s={searchEnabled:t.search.enabled,searchTimeout:t.search.timeout,searchEditorOptions:t.search.editorOptions,searchMode:t.search.mode||"",dataSource:e.dataSource,onContentReady(){i.renderCompleted.fire()},itemTemplate(t,i,n){const o=(0,x.A)(n);return!1!==e.encodeHtml?o.text(t.text):o.html(t.text)}},r=()=>o&&!1!==i.option("headerFilter.hideSelectAllOnSearch"),l=e=>{switch(!0){case"searchValue"===e.fullName&&r():e.component.option("showCheckBoxesMode",e.value?"normal":"selectAll");break;case"showCheckBoxesMode"===e.fullName:Promise.resolve().then(()=>{e.component.getSearchBoxController().focus()}).catch(()=>{})}},a=e=>{"searchValue"===e.fullName&&r()&&e.component.option("selectionMode",e.value?"multiple":"all")};"tree"===e.type?i._listComponent=i._createComponent((0,x.A)("<div>").appendTo(n),b.A,(0,h.X)(s,{showCheckBoxesMode:o?"selectAll":"normal",onOptionChanged:l,keyExpr:"id"})):i._listComponent=i._createComponent((0,x.A)("<div>").appendTo(n),y.A,(0,h.X)(s,{searchExpr:i._getSearchExpr(e,t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:o?"all":"multiple",onOptionChanged:a,onSelectionChanged(t){const{component:i}=t,n=i.option("items"),o=i.option("selectedItems");if(!i._selectedItemsUpdating&&!i.option("searchValue")&&!e.isFilterBuilder){const t=e.filterValues||[],i="exclude"===e.filterType;0===o.length&&n.length&&(t.length<=1||i&&t.length===n.length-1)?(e.filterType="include",e.filterValues=[]):o.length===n.length&&(e.filterType="exclude",e.filterValues=[])}(0,p.__)(n,(t,i)=>{const n=v.A.getIndexByKey(i,o,null)>=0,s=!!i.selected;if(s!==n){i.selected=n,e.filterValues=e.filterValues||[];const t=v.A.getIndexByKey(i.value,e.filterValues,null);t>=0&&e.filterValues.splice(t,1);const o="exclude"===e.filterType;n^o&&e.filterValues.push(i.value)}}),O(i,e.filterValues)},onContentReady(t){const{component:i}=t,n=i.option("items"),o=[];(0,p.__)(n,function(){this.selected&&o.push(this)}),i._selectedItemsUpdating=!0,i.option("selectedItems",o),i._selectedItemsUpdating=!1,R(i),O(i,e.filterValues)}}))}_normalizeHeaderFilterOptions(e){const t=this.option("headerFilter")||{},i=e.headerFilter||{},n={search:{enabled:t.allowSearch,timeout:t.searchTimeout}},o={search:{enabled:i.allowSearch,mode:i.searchMode,timeout:i.searchTimeout}};return(0,h.X)(!0,{},t,n,i,o)}_renderCore(){this.element().addClass("dx-header-filter-menu")}}const F=function(e){return(0,m.O9)(e.allowHeaderFiltering)?e.allowHeaderFiltering:e.allowFiltering},P=e=>class extends e{optionChanged(e){if("headerFilter"===e.name){const t="columnHeadersView"===this.name;this._invalidate(t,t),e.handled=!0}else super.optionChanged(e)}_applyColumnState(e){let t;const{rootElement:i}=e,{column:n}=e;if("headerFilter"===e.name){if(i.find(".dx-header-filter").remove(),F(n)){t=super._applyColumnState(e).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(n)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0);const i=r.A.format("dxDataGrid-headerFilterIndicatorLabel",n.caption);t.attr("aria-label",i),t.attr("aria-haspopup","dialog"),t.attr("role","button")}return t}return super._applyColumnState(e)}_isHeaderFilterEmpty(e){return!e.filterValues||!e.filterValues.length}_getIndicatorClassName(e){return"headerFilter"===e?"dx-header-filter":super._getIndicatorClassName(e)}_renderIndicator(e){const t=e.container,i=e.indicator;if("headerFilter"===e.name){const n=this.option("rtlEnabled");if(t.children().length&&(!n&&"right"===e.columnAlignment||n&&"left"===e.columnAlignment))return void t.prepend(i)}super._renderIndicator(e)}},D={month:e=>s.A.getMonthNames()[e-1],quarter:e=>s.A.format(new Date(2e3,3*e-1),"quarter")};function k(e,t,i){return t=t||[],i=i||[],e.forEach(e=>{if((0,m.O9)(e.key)){const n=1===t.length;if(t.push(n?e.key-1:e.key),e.items)k(e.items,t,i);else{const e=new Date(Date.UTC.apply(Date,t));i.push(e)}t.pop()}else i.push(null)}),i}function B(e,t){const i=k(e),n=(0,a.A)(i),o=v.A.getHeaderFilterGroupParameters(Object.assign({},t,{calculateCellValue:e=>e}));return d.A.queryByOptions(n,{group:o}).toArray()}function H(e){return"Z"===(null===e||void 0===e?void 0:e.slice(-1))||"'Z'"===(null===e||void 0===e?void 0:e.slice(-3))}const z=function(e,t,i){const n=C.A.getGroupInterval(t),o=v.A.getFormatOptionsByColumn(t,"headerFilter");return n&&(o.groupInterval=n[i],v.A.isDateType(t.dataType)?o.format=D[n[i]]:"number"===t.dataType&&(o.getDisplayFormat=function(){const o={format:t.format,target:"headerFilter"},s=v.A.formatValue(e,o),r=e+n[i],l=v.A.formatValue(r,o);return s&&l?`${s} - ${l}`:""})),o};class M extends f.Ay.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")}_updateSelectedState(e,t){let i=e.length;const n="exclude"===t.filterType;while(i--){const o=e[i];"items"in e[i]&&this._updateSelectedState(e[i].items,t),T(o,v.A.getIndexByKey(e[i].value,t.filterValues,null)>-1,n)}}_normalizeGroupItem(e,t,i){let n,o;const{path:s}=i,{valueSelector:r}=i,{displaySelector:l}=i,{column:a}=i;return r&&l?(n=r(e),o=l(e)):(n=e.key,o=n),e=(0,m.Gv)(e)?(0,h.X)({},e):{},s.push(n),1===s.length?e.value=s[0]:e.value=s.join("/"),e.text=this.getHeaderItemText(o,a,t,i.headerFilterOptions),e}getHeaderItemText(e,t,i,n){let o=v.A.formatValue(e,z(e,t,i));return o||(o=n.texts.emptyValue),o}_processGroupItems(e,t,i,n){const o=this;let s,r;const{column:l}=n,{lookup:a}=l,{level:d}=n;i=i||[],t=t||0,a&&(s=(0,u.Hz)(a.displayExpr),r=(0,u.Hz)(a.valueExpr));for(let u=0;u<e.length;u++)e[u]=o._normalizeGroupItem(e[u],t,{column:n.column,headerFilterOptions:n.headerFilterOptions,displaySelector:s,valueSelector:r,path:i}),"items"in e[u]&&(t!==d&&(0,m.O9)(e[u].value)?o._processGroupItems(e[u].items,t+1,i,n):delete e[u].items),i.pop()}getDataSource(e){var t;const i=this._dataController.dataSource(),n=null===i||void 0===i?void 0:i.remoteOperations().grouping,o=v.A.getHeaderFilterGroupParameters(e,n),s=null===(t=e.headerFilter)||void 0===t?void 0:t.dataSource,r=this.option("headerFilter");let a=!1;const d={component:this.component};if(!i)return;if((0,m.O9)(s)&&!(0,m.Tn)(s))d.dataSource=(0,l.ho)(s);else if(e.lookup)if(a=!0,this.option("syncLookupFilterValues")){this._currentColumn=e;const t=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource=v.A.getWrappedLookupDataSource(e,i,t)}else d.dataSource=v.A.normalizeLookupDataSource(e.lookup);else{const t=Array.isArray(o)?o.length-1:0;this._currentColumn=e;const s=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource={filter:s,group:o,useDefaultSearch:!0,load:o=>{const s=new c.cY;return o.dataField=e.dataField||e.name,i.load(o).done(i=>{const o=n&&H(e.serializationFormat)&&t>3;o&&(i=B(i,e)),h._processGroupItems(i,null,null,{level:t,column:e,headerFilterOptions:r}),s.resolve(i)}).fail(s.reject),s}}}(0,m.Tn)(s)&&s.call(e,d);const u=d.dataSource.postProcess,h=this;return d.dataSource.postProcess=function(t){let i=t;return a&&(i=i.filter(t=>null!==t[e.lookup.valueExpr]),0!==this.pageIndex()||this.searchValue()||(i=i.slice(0),i.unshift(null)),h._processGroupItems(i,null,null,{level:0,column:e,headerFilterOptions:r})),i=u&&u.call(this,i)||i,h._updateSelectedState(i,e),i},d.dataSource}getCurrentColumn(){return this._currentColumn}showHeaderFilterMenu(e,t){const i=this._columnsController,n=(0,h.X)(!0,{},this._columnsController.getColumns()[e]);if(n){const o=i.getVisibleIndex(e),s=t?this.getView("headerPanel"):this.getView("columnHeadersView"),r=s.getColumnElements().eq(t?n.groupIndex:o);this.showHeaderFilterMenuBase({columnElement:r,column:n,applyFilter:!0,apply(){i.columnOption(e,{filterValues:this.filterValues,filterType:this.filterType})}})}}showHeaderFilterMenuBase(e){const t=this,{column:i}=e;if(i){const n=C.A.getGroupInterval(i),o=t._dataController.dataSource(),s=o&&o.remoteOperations().filtering,r=e.onHidden;(0,h.X)(e,i,{type:n&&n.length>1?"tree":"list",remoteFiltering:s,onShowing:t=>{const i=t.component.$overlayContent().dxResizable("instance");i&&i.option("onResizeEnd",t=>{let i=this._columnsController.columnOption(e.dataField,"headerFilter");i=i||{},i.width=t.width,i.height=t.height,this._columnsController.columnOption(e.dataField,"headerFilter",i,!0)})},onHidden:()=>{null===r||void 0===r||r(),(0,_.Dy)(this)}}),e.dataSource=t.getDataSource(e),e.isFilterBuilder&&(e.dataSource.filter=null,e.alignment="right"),t._headerFilterView.showHeaderFilterMenu(e.columnElement,e)}}hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}const N=e=>class extends(P(e)){_renderCellContent(e,t){const i=this;let n;const{column:o}=t;!o.command&&F(o)&&i.option("headerFilter.visible")&&"header"===t.rowType&&(n=i._applyColumnState({name:"headerFilter",rootElement:e,column:o,showColumnLines:i.option("showColumnLines")}),n&&i._subscribeToIndicatorEvent(n,o,"headerFilter")),super._renderCellContent.apply(this,arguments)}_subscribeToIndicatorEvent(e,t,i){"headerFilter"===i&&o.A.on(e,n.U,this.createAction(i=>{i.event.stopPropagation(),(0,_.Z7)(e,this),this._headerFilterController.showHeaderFilterMenu(t.index,!1)}))}_updateIndicator(e,t,i){const n=super._updateIndicator(e,t,i);n&&this._subscribeToIndicatorEvent(n,t,i)}_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")}_needUpdateFilterIndicators(){return!0}_columnOptionChanged(e){const{optionNames:t}=e,i=v.A.checkChanges(t,["filterValues","filterValue"]),n=v.A.checkChanges(t,["filterValues","filterType"]),o=(i||n)&&this._needUpdateFilterIndicators();o&&this._updateHeaderFilterIndicators(),n||super._columnOptionChanged(e)}},L=e=>class extends(P(e)){_createGroupPanelItem(e,t){const i=this,s=super._createGroupPanelItem.apply(i,arguments);let r;return!t.command&&F(t)&&i.option("headerFilter.visible")&&(r=i._applyColumnState({name:"headerFilter",rootElement:s,column:{alignment:(0,g.n)(i.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0,caption:t.caption},showColumnLines:!0}),r&&o.A.on(r,n.U,i.createAction(e=>{const{event:i}=e;i.stopPropagation(),this._headerFilterController.showHeaderFilterMenu(t.index,!0)}))),s}};const W=e=>class extends e{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();const e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),i=this._headerFilterController,n=i.getCurrentColumn();return(0,p.__)(t,(t,i)=>{let o;if((!n||n.index!==i.index)&&F(i)&&i.calculateFilterExpression&&Array.isArray(i.filterValues)&&i.filterValues.length){let t=[];(0,p.__)(i.filterValues,(e,n)=>{Array.isArray(n)?o=n:(i.deserializeValue&&!v.A.isDateType(i.dataType)&&"number"!==i.dataType&&(n=i.deserializeValue(n)),o=i.createFilterExpression(n,"=","headerFilter")),o&&(o.columnIndex=i.index),t.push(o)}),t=v.A.combineFilters(t,"or"),e.push("exclude"===i.filterType?["!",t]:t)}}),v.A.combineFilters(e)}},K={defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:r.A.format("dxDataGrid-headerFilterEmptyValue"),ok:r.A.format("dxDataGrid-headerFilterOK"),cancel:r.A.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:M},views:{headerFilterView:V},extenders:{controllers:{data:W},views:{columnHeadersView:N,headerPanel:L}}}},54954:function(e,t,i){i.d(t,{e:function(){return m}});i(82438),i(99819),i(50020);var n=i(85563),o=i(44956),s=i(39889),r=i(63825),l=i(50172),a=i(71765),d=i(20338);const u={dragCell:"dx-drag-cell"},c={cellFocusDisabled:"dx-cell-focus-disabled",handleIcon:"drag-icon",commandDrag:"dx-command-drag",sortableWithoutHandle:"dx-sortable-without-handle",rowsView:"rowsview",dragView:"dragview"},h=e=>(t,i)=>{const o=(0,n.A)(t);if("data"===i.rowType)return o.addClass(c.cellFocusDisabled),(0,n.A)("<span>").addClass(e(c.handleIcon));d.A.setEmptyText(o)},p={createHandleTemplateFunc:h},g=e=>class extends e{init(){super.init.apply(this,arguments),this._updateHandleColumn()}optionChanged(e){"rowDragging"===e.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),e.handled=!0),super.optionChanged.apply(this,arguments)}_allowReordering(){const e=this.option("rowDragging");return!(!e||!(e.allowReordering||e.allowDropInsideItem||e.group))}_updateHandleColumn(){const e=this.option("rowDragging"),t=this._allowReordering(),i=this._columnsController,n=t&&e.showDragIcons;null===i||void 0===i||i.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:u.dragCell,value:""}],cssClass:c.commandDrag,width:"auto",cellTemplate:this._getHandleTemplate(),visible:n}),null===i||void 0===i||i.columnOption("type:drag","visible",n)}_renderContent(){const e=this.option("rowDragging"),t=this._allowReordering(),i=super._renderContent.apply(this,arguments),s=this._isFixedTableRendering,r=s?"_sortableFixed":"_sortable",l=s?"_sortable":"_sortableFixed",d=e=>{var t;null===(t=this._sortableFixed)||void 0===t||t.$element().css("pointerEvents",e?"auto":"")},u=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",h=this.option("dataRowTemplate")?`> table > tbody${u}`:`> table > tbody > ${u}`;return(t||this[r])&&i.length&&(this[r]=this._createComponent(i,a.A,(0,o.X)({component:this.component,contentTemplate:null,filter:h,cursorOffset:e=>{const{event:t}=e,i=(0,n.A)(this.element()).offset();return{x:t.pageX-i.left}},onDraggableElementShown:t=>{if(e.dragTemplate)return;const i=(0,n.A)(t.dragElement),o=i.children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(o)},dragTemplate:this._getDraggableRowTemplate(),handle:e.showDragIcons&&`.${c.commandDrag}`,dropFeedbackMode:"indicate"},e,{onDragStart:i=>{var n,o;null===(n=this.getController("keyboardNavigation"))||void 0===n||n._resetFocusedCell();const s=i.component.getVisibleRows()[i.fromIndex];i.itemData=null===s||void 0===s?void 0:s.data;const r=s&&"data"===s.rowType;i.cancel=!t||!r,null===(o=e.onDragStart)||void 0===o||o.call(e,i)},onDragEnter:e=>{e.fromComponent!==e.toComponent&&d(!0)},onDragLeave:()=>{d(!1)},onDragEnd:t=>{var i;d(!1),null===(i=e.onDragEnd)||void 0===i||i.call(e,t)},onAdd:t=>{var i;d(!1),null===(i=e.onAdd)||void 0===i||i.call(e,t)},dropFeedbackMode:e.dropFeedbackMode,onOptionChanged:e=>{const t=this._sortableFixed;t&&("fromIndex"!==e.name&&"toIndex"!==e.name||this[l].option(e.name,e.value))}})),i.toggleClass("dx-scrollable-container",s),i.toggleClass(c.sortableWithoutHandle,t&&!e.showDragIcons)),i}_renderCore(e){super._renderCore.apply(this,arguments),e&&"update"===e.changeType&&e.repaintChangesOnly&&d.A.isVirtualRowRendering(this)&&(0,s.OX)(()=>{this._updateSortable()})}_updateSortable(){const e=this._dataController.getRowIndexOffset(),t=e-this._previousOffset;[this._sortable,this._sortableFixed].forEach(i=>{const n=null===i||void 0===i?void 0:i.option("toIndex");(0,l.O9)(n)&&(0,l.O9)(this._previousOffset)&&(null===i||void 0===i||i.option("toIndex",n-t)),null===i||void 0===i||i.option("offset",e),null===i||void 0===i||i.update()}),this._previousOffset=e}_resizeCore(){super._resizeCore.apply(this,arguments),this._updateSortable()}_getDraggableGridOptions(e){const t=this.option(),i=this.getColumns(),o=(0,n.A)(this.getRowElement(e.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:t.columnFixing,columnAutoWidth:t.columnAutoWidth,showColumnLines:t.showColumnLines,columns:i.map(e=>({width:e.width||e.visibleWidth,fixed:e.fixed,fixedPosition:e.fixedPosition})),isDragging:!0,onRowPrepared:e=>{const t=e.component.getView("rowsView");(0,n.A)(e.rowElement).replaceWith(o.eq(t._isFixedTableRendering?1:0).clone())}}}_synchronizeScrollLeftPosition(e){const t=null===e||void 0===e?void 0:e.getScrollable();null===t||void 0===t||t.scrollTo({x:this._scrollLeft})}_getDraggableRowTemplate(){return e=>{const t=this.component.$element(),i=(0,n.A)("<div>");(0,r.zj)(i,(0,r.RG)(t));const o=this._dataController.items(),s=o&&o[e.fromIndex],l=this._getDraggableGridOptions(s);return this._createComponent(i,this.component.NAME,l),i.find(".dx-gridbase-container").children(`:not(.${this.addWidgetPrefix(c.rowsView)})`).hide(),i.addClass(this.addWidgetPrefix(c.dragView)),i}}_getHandleTemplate(){return p.createHandleTemplateFunc(e=>this.addWidgetPrefix(e))}},m={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:g}}}},56041:function(e,t,i){i.d(t,{e:function(){return r}});var n=i(50172),o=i(68055),s=i(7064);class r extends s.E{keyDownHandler(e){return this.processOnKeyDown(e)}getVisibleIndex(e,t){const i=this._columnsController.getVisibleIndex(e.index,t),n=this.getColumnIndexOffset(i);return i>=0?i+n:-1}getNewVisibleIndex(e,t,i){return"previous"===i?e-1:e+2}getNewFocusedColumnIndex(e,t){return t===o.OP.Next?e-1:e}resizeCompleted(){this.needToRestoreFocus&&this.restoreFocus()}resetFocusedCellPosition(){this._focusedCellPosition={}}canReorderColumn(e,t,i){return!1}init(){var e;super.init(),this.columnFocusDispatcher=this.getController("columnFocusDispatcher"),null===(e=this.columnFocusDispatcher)||void 0===e||e.registerKeyboardNavigationController(this)}moveColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.OP.Next,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getFocusedView().getName(),s=this.getVisibleIndex(e,i),r=this.getNewVisibleIndex(s,i,t),l=this.getNewFocusedColumnIndex(r,t);this.updateViewFocusPosition({rowIndex:i,columnIndex:l}),this._columnsController.moveColumn({columnIndex:s,rowIndex:i},{columnIndex:r,rowIndex:i},n,n)}getFirstFocusableVisibleIndex(){return-1}updateViewFocusPosition(e){var t;null===(t=this.columnFocusDispatcher)||void 0===t||t.updateFocusPosition(this,e)}updateFocusPosition(e){this.needToRestoreFocus=!0,(0,n.O9)(e)?this.setFocusedCellPosition(e.rowIndex,e.columnIndex):this.resetFocusedCellPosition()}restoreFocus(){var e;this.needToRestoreFocus=!1,(0,n.RI)(this._focusedCellPosition)&&this.setFocusedCellPosition(0,this.getFirstFocusableVisibleIndex());const t=this._getFocusedCell();null===t||void 0===t||null===(e=t[0])||void 0===e||e.focus({preventScroll:!0})}}},58166:function(e,t,i){i.d(t,{j:function(){return m}});i(69375),i(82438),i(50020),i(74786),i(34840);var n=i(26228),o=i(63825),s=i(50172),r=i(27996),l=i(20338),a=i(44956);function d(e,t,i,n,o,s){i=i||0,n=n||[],s=s||[],n[i]=n[i]||0;const r=e[i],l=s[i]+1||0;let a,u=0;if(r){for(a=l;a<r.length;a++){const l=r[a],c=a+n[i],h=l.colspan||1;if(d(e,t,i+(l.rowspan||1),n,h,s),n[i]+=h-1,u+=h,l.rowspan)for(let e=i+1;e<i+l.rowspan;e++)n[e]=n[e]||0,n[e]+=l.colspan||1;if(!1===t(l,c,i,a))break;if(void 0!==o&&u>=o)break}s[i]=a}}function u(e,t,i){const n=[];d(e,(e,o,s)=>{let r,l=e;const d=l.colspan||1,u=o+d-1>=t&&o<i;if(n[s]=n[s]||[],u)o<t?(r=d-(t-o),o=t):r=d,o+r>i&&(r=i-o),r!==d&&(l=(0,a.X)({},l,{colspan:r})),n[s].push(l);else if(o>i)return!1});for(let o=0;o<n.length;o++)n[o]=n[o]||[];return n}const c=e=>class extends e{_needToSetCellWidths(){let e=super._needToSetCellWidths();if(!e&&this._columnsController.isVirtualMode()){const t=this._columnsController.getColumns();e=t.some(e=>"auto"===e.width)}return e}},h=e=>class extends(c(e)){_resizeCore(){super._resizeCore.apply(this,arguments),this._columnsController.resize()}_handleScroll(e){const t=this.normalizeScrollLeft(e.scrollOffset.left);this._scrollLeft=t,super._handleScroll.apply(this,arguments),this._columnsController.setScrollPosition(t,e.event)}_renderCore(e){if(null!==e&&void 0!==e&&e.virtualColumnsScrolling){var t,i;const e=this._findContentElement(),s=null===(t=this._columnsController)||void 0===t?void 0:t.getFixedColumns(),r=null===(i=this._scrollable)||void 0===i?void 0:i.option("useNative"),a=this.option("columnFixing.legacyMode");if(null!==s&&void 0!==s&&s.length){a&&!r?e.css({minHeight:l.A.getContentHeightLimit(n.A)}):e.css({minHeight:(0,o.Oq)(e)});const t=()=>{this.resizeCompleted.remove(t),e.css({minHeight:""})};this.resizeCompleted.add(t)}}return super._renderCore.apply(this,arguments)}},p=e=>class extends(c(e)){_renderCore(){const e=super._renderCore.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),e}},g=e=>class extends e{init(){super.init.apply(this,arguments),this._resizingController=this.getController("resizing"),this._beginPageIndex=null,this._endPageIndex=null,this._position??(this._position=0),this._virtualVisibleColumns={}}dispose(){clearTimeout(this._changedTimeout),super.dispose.apply(this,arguments)}resetColumnsCache(){super.resetColumnsCache(),this._virtualVisibleColumns={}}getBeginPageIndex(e){const t=this.getVisibleColumns(void 0,!0),i=l.A.getColumnWidths(t);let n=0;for(let o=0;o<i.length;o++){if(n>=e)return Math.floor(o/this.getColumnPageSize());n+=i[o]}return 0}getTotalWidth(){const e=this.option("width");return"number"===typeof e?e:this._resizingController._lastWidth||(0,o.Ot)(this.component.$element())}getEndPageIndex(e){const t=this.getVisibleColumns(void 0,!0),i=l.A.getColumnWidths(t);let n=0;e+=this.getTotalWidth();for(let o=0;o<i.length;o++){if(n>=e)return Math.ceil(o/this.getColumnPageSize());n+=i[o]}return Math.ceil(i.length/this.getColumnPageSize())}getColumnPageSize(){return this.option("scrolling.columnPageSize")}_fireColumnsChanged(e){const t=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2,event:e}}),this._renderTime=new Date-t}getScrollingTimeout(){const e=this.option("scrolling.columnRenderingThreshold"),t=this.option("scrolling.renderAsync");let i=0;return(!(0,s.O9)(t)&&this._renderTime>e||t)&&(i=this.option("scrolling.timeout")),i}resize(){this._setScrollPositionCore(this._position)}_setScrollPositionCore(e,t){const i=this.isNeedToRenderVirtualColumns(e);i&&(this._position=e,this._beginPageIndex=this.getBeginPageIndex(e),this._endPageIndex=this.getEndPageIndex(e),this._fireColumnsChanged(t))}isNeedToRenderVirtualColumns(e){return!!this.isVirtualMode()&&(e<this._position?this._beginPageIndex>this.getBeginPageIndex(e):this._endPageIndex<this.getEndPageIndex(e))}getFixedColumns(e,t){const i=super.getFixedColumns(e);if(this.isVirtualMode()&&!t&&i.length){const e=i.map(e=>e.command).indexOf("transparent");return i[e].colspan=this.getVisibleColumns().length-super.getFixedColumns().length+1,i}return i}_compileVisibleColumns(e,t){var i;if(t||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return super._compileVisibleColumns(e);null===(i=this._columns)||void 0===i||!i.length||(0,s.O9)(this._beginPageIndex)||(0,s.O9)(this._endPageIndex)||(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));const n=this._beginPageIndex,o=this._endPageIndex,r=`${e}-${n}-${o}`;if(this._virtualVisibleColumns[r])return this._virtualVisibleColumns[r];let a=super._compileVisibleColumns();const d=this.getRowCount(),c=this.getColumnPageSize();let h=n*c,p=o*c;const g=this.getFixedColumns(void 0,!0),m=g.map(e=>e.command).indexOf("transparent"),_=g.length?m:0;let C=a.slice(0,_);const f=a.slice(_,h),v=l.A.getColumnWidths(f).reduce((e,t)=>e+t,0);v||(h=0);const x=g.length?g.length-m-1:0;let w=a.slice(a.length-x);const y=a.slice(p,a.length-x),b=l.A.getColumnWidths(y).reduce((e,t)=>e+t,0);if(b||(p=a.length),d>1&&"number"===typeof e){const t=[];for(let e=0;e<=d;e++)t.push(super._compileVisibleColumns(e));C=u(t,0,C.length)[e]||[],w=u(t,a.length-w.length,a.length)[e]||[],a=u(t,h,p)[e]||[]}else a=a.slice(h,p);return v&&(a.unshift({command:"virtual",type:"virtual",width:v}),a=C.concat(a)),b&&(a.push({command:"virtual",type:"virtual",width:b}),a=a.concat(w)),this._virtualVisibleColumns[r]=a,a}getColumnIndexOffset(){let e=0;if(this._beginPageIndex>0){const t=this.getFixedColumns(),i=t.map(e=>e.command).indexOf("transparent"),n=i>=0?i:0;e=this._beginPageIndex*this.getColumnPageSize()-n-1}return e>0?e:0}isVirtualMode(){return(0,r.Vd)()&&"virtual"===this.option("scrolling.columnRenderingMode")}setScrollPosition(e,t){const i=this.getScrollingTimeout();i>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(e,t)},i)):this._setScrollPositionCore(e,t)}},m={defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:g},views:{columnHeadersView:p,rowsView:h}}}},58982:function(e,t,i){i.d(t,{A:function(){return R}});i(82438),i(12266),i(99819);var n=i(62192),o=i(85563),s=i(39889),r=i(89214),l=i(50172),a=i(82185),d=i(88641),u=(i(64727),i(4615));class c extends u.A{_getPlainItems(){const e=this._getItems(),t=(0,r.Tj)(e,function e(t){return t.items?[t].concat((0,r.Tj)(t.items,e)):t});return t.flat()}static _stringifyItem(e){return JSON.stringify(e,(e,t)=>"template"===e?c._getTemplateString(t):t)}static _getTemplateString(e){return"object"===typeof e&&null!==e?(0,o.A)(e).text():String(e)}}var h=c,p=i(3381);const g="dx-menu-item",m=`${g}-content`,_=`${g}-selected`,C=`${g}-wrapper`,f=`${g}-expanded`,v=`${g}-has-text`,x=`${g}-has-icon`,w=`${g}-has-submenu`,y=`${g}-popout`,b=`${y}-container`,I=`${g}-text`,S={show:50,hide:300},A=`${I}-with-url`;class E extends p.A{_activeStateUnit(){return`.${g}`}_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return g}_setAriaSelectionAttribute(e,t){}_selectedItemClass(){return _}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return Object.assign({},super._supportedKeys(),{space:()=>{const{focusedElement:e}=this.option(),t=(0,o.A)(e);t.length&&this._isSelectionEnabled()&&this.selectItem(t[0])},pageUp:s.lQ,pageDown:s.lQ})}_isSelectionEnabled(){const{selectionMode:e}=this.option();return"single"===e}_init(){super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(e,t,i){const{linkAttr:n,url:o}=i;return null===e||void 0===e||e.addClass("dx-icon-with-url"),null===t||void 0===t||t.addClass(A),super._getLinkContainer(e,t,{linkAttr:n,url:o})}_addContent(e,t){const{html:i,url:n}=t;if(n){e.html(i);const n=this._getLinkContainer(this._getIconContainer(t),this._getTextContainer(t),t);e.append(n)}else super._addContent(e,t);e.append(this._getPopoutContainer(t)),this._addContentClasses(t,e.parent())}_getTextContainer(e){const{text:t}=e;if(!t)return(0,o.A)();const i=(0,o.A)("<span>").addClass(I),n=(0,l.Qd)(e)?t:String(e);return i.text(n)}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(e){const{items:t}=e;if(null===t||void 0===t||!t.length)return(0,o.A)();const i=(0,o.A)("<div>").addClass(y),n=(0,o.A)("<span>").addClass(b);return n.append(i),n}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(e){if(!e)return;const t=this._dataAdapter.getNodeByItem(e);t&&this._dataAdapter.toggleSelection(t.internalFields.key,!0)}_renderSelectedItem(){const e=this._dataAdapter.getSelectedNodesKeys(),t=e.length&&e[0],i=this.option("selectedItem");if(!t)return void this._selectByItem(i);const n=this._dataAdapter.getNodeByKey(t);n&&!1!==n.selectable&&(i?i!==n.internalFields.item&&(this._dataAdapter.toggleSelection(t,!1),this._selectByItem(i)):this.option("selectedItem",n.internalFields.item))}_initActions(){}_initMarkup(){super._initMarkup();const{useInkRipple:e}=this.option();e&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,a.XX)()}_toggleActiveState(e,t,i){if(super._toggleActiveState(e,t),!this._inkRipple)return;const n={element:e,event:i};t?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}_getShowSubmenuMode(){const{showSubmenuMode:e}=this.option(),t=(0,l.Gv)(e)?e.name:e;return this._isDesktopDevice()?t:"onClick"}_isDesktopDevice(){return"desktop"===n.A.real().deviceType}_initEditStrategy(){this._editStrategy=new h(this)}_addCustomCssClass(e){const{cssClass:t}=this.option();t&&e.addClass(t)}_hoverStartHandler(e){const t=this._getItemElementByEventArgs(e);if(t&&!this._isItemDisabled(t)&&(e.stopPropagation(),"onHover"===this._getShowSubmenuMode())){const e=this._getSubmenuDelay();0===e?this._showSubmenu(t):(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,t),e))}}_getAvailableItems(e){return super._getAvailableItems(e).filter((e,t)=>"hidden"!==(0,o.A)(t).css("visibility"))}_isItemDisabled(e){return this._disabledGetter(e.data(this._itemDataKey()))}_showSubmenu(e){this._addExpandedClass(e)}_addExpandedClass(e){(0,o.A)(e).addClass(f)}_getSubmenuDelay(){const{showSubmenuMode:e}=this.option(),t=(0,l.Gv)(e)?e.delay:void 0;return(0,l.O9)(t)?(0,l.Gv)(t)?t.show??S.show:t:S.show}_getItemElementByEventArgs(e){let t=(0,o.A)(e.target);if(t.hasClass(this._itemClass())||t.get(0)===e.currentTarget)return t;while(!t.hasClass(this._itemClass()))if(t=t.parent(),t.hasClass("dx-submenu"))return null;return t}_hoverEndHandler(e){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(e){return!(null===e||void 0===e||!e.internalFields.childrenKeys.length)}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(e,t){if(!e.length)return;this.hasIcons=!1;const i=this._renderContainer(this.$element(),null===t||void 0===t?void 0:t[0]);let n=-1,o=-1;(0,r.__)(e,(e,t)=>{const s=!1!==t.visible;s&&n<0&&(n=e);const r=n<e&&(t.beginGroup||e===o);r&&(o=s?e:e+1),e===o&&n<e&&this._renderSeparator(i),this._renderItem(e,t,i)}),this.hasIcons||i.addClass("dx-menu-no-icons")}_renderContainer(e,t){const i=(0,o.A)("<ul>");return this.setAria("role","none",i),i.appendTo(e).addClass("dx-menu-items-container")}_createDOMElement(e){const t=(0,o.A)("<li>");return this.setAria("role","none",t),t.appendTo(e).addClass(C)}_renderItem(e,t,i,n){var o;const{items:s=[]}=this.option(),r=n??this._createDOMElement(i);null!==(o=s[e+1])&&void 0!==o&&o.beginGroup&&r.addClass("dx-menu-last-group-item");const l=super._renderItem(e,t.internalFields.item,r);return t.internalFields.item===this.option("selectedItem")&&l.addClass(_),l.attr("tabIndex",-1),this._hasSubmenu(t)&&this.setAria("haspopup","true",l),l}_renderItemFrame(e,t,i){const n=i.children(`.${g}`);return n.length?n:super._renderItemFrame(e,t,i)}_refreshItem(e,t){const i=this._dataAdapter.getNodeByItem(t);if(!i)return;const n=e.data(this._itemIndexKey()),o=e.closest("ul"),s=e.closest("li");this._renderItem(n,i,o,s)}_addContentClasses(e,t){const i=!!e.text&&!!e.text.length,n=!!e.icon,o=!!e.items&&!!e.items.length;t.toggleClass(v,i),t.toggleClass(x,n),this.hasIcons||(this.hasIcons=n),t.toggleClass(w,o)}_getItemContent(e){let t=super._getItemContent(e);return t.length||(t=e.children(`.${m}`)),t}_postprocessRenderItem(e){const t=(0,o.A)(e.itemElement),i=this._dataAdapter.getSelectedNodesKeys();if(!i.length||!this._selectedGetter(e.itemData)||!this._isItemSelectable(e.itemData))return void this._setAriaSelectionAttribute(t,"false");const n=this._dataAdapter.getNodeByItem(e.itemData);n&&n.internalFields.key===i[0]?(t.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(t,"true")):this._setAriaSelectionAttribute(t,"false")}_isItemSelectable(e){return!1!==e.selectable}_renderSeparator(e){(0,o.A)("<li>").appendTo(e).addClass("dx-menu-separator")}_itemClickHandler(e){if(e._skipHandling)return;const t=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(e,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:t.bind(this)}),e._skipHandling=!0}_isUrlItem(e){return!!e&&"url"in e&&!!e.url}_itemClick(e){var t;const{event:i,itemData:n}=(null===(t=e.args)||void 0===t?void 0:t[0])??{};if(!i)return;const s=this._getItemElementByEventArgs(i),r=null===s||void 0===s?void 0:s.find(".dx-item-url")[0];if(!this._isUrlItem(n)||!r)return;const l=(0,o.A)(i.target).closest(".dx-item-url").length;l||this._clickByLink(r)}_updateSubmenuVisibilityOnClick(e){if(this._updateSelectedItemOnClick(e),"onClick"===this._getShowSubmenuMode()){var t;const i=null===(t=e.args)||void 0===t?void 0:t[0].itemElement;i&&this._addExpandedClass(i)}}_updateSelectedItemOnClick(e){const t=e.args?e.args[0]:e,{itemData:i}=t;if(!i||!this._isItemSelectAllowed(i))return;const n=this._dataAdapter.getSelectedNodesKeys(),o=n.length&&this._dataAdapter.getNodeByKey(n[0]);o&&this._toggleItemSelection(o,!1),o&&o.internalFields.item===i?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(i)}_isItemSelectAllowed(e){const{selectByClick:t}=this.option(),i=this._isSelectionEnabled()&&t;return!this._isContainerEmpty()&&i&&this._isItemSelectable(e)&&!this._itemsGetter(e)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,s.TA)()}_optionChanged(e){switch(e.name){case"showSubmenuMode":break;case"selectedItem":{const t=e.value?this._dataAdapter.getNodeByItem(e.value):null,i=this._dataAdapter.getSelectedNodesKeys()[0];if(t&&t.internalFields.key!==i){if(!1===t.selectable)break;const e=this._dataAdapter.getNodeByKey(i);i&&e&&this._toggleItemSelection(e,!1),this._toggleItemSelection(t,!0)}break}case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(e)}}_toggleItemSelection(e,t){const i=this._getElementByItem(e.internalFields.item);i&&(0,o.A)(i).toggleClass(_),this._dataAdapter.toggleSelection(e.internalFields.key,t)}_getElementByItem(e){let t=(0,o.A)();return(0,r.__)(this._itemElements(),(i,n)=>(0,o.A)(n).data(this._itemDataKey())!==e||(t=n,!1)),t}_updateSelectedItems(){}_updateSelectedItem(e,t){(e||t)&&this._fireSelectionChangeEvent(e,t)}_fireSelectionChangeEvent(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[e],removedItems:[t]})}selectItem(e){const t=(i=e,"object"===typeof i&&"nodeType"in i&&i.nodeType?this._getItemData(e):e);var i;const n=this._dataAdapter.getSelectedNodesKeys()[0],o=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(t);if(s&&s.internalFields.key!==n){const e=this._dataAdapter.getNodeByKey(n);n&&e&&this._toggleItemSelection(e,!1),this._toggleItemSelection(s,!0),this._updateSelectedItem(t,o),this._setOptionWithoutOptionChange("selectedItem",t)}}unselectItem(e){const t=e.nodeType?this._getItemData(e):e,i=this._dataAdapter.getNodeByItem(t),n=this.option("selectedItem");null!==i&&void 0!==i&&i.internalFields.selected&&(this._toggleItemSelection(i,!1),this._updateSelectedItem(null,n),this._setOptionWithoutOptionChange("selectedItem",null))}}E.ItemClass=d.A;var R=E},60915:function(e,t,i){i.d(t,{$:function(){return _}});i(69375),i(82438),i(57327);var n=i(24906),o=i(63027),s=i(85563),r=i(66703),l=i(50172),a=i(97755),d=i(96846),u=i(82009),c=i(44031),h=i(91125),p=i(20338);class g extends h.Ay.View{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync"),this._dataController.dataSourceChanged.add(()=>this.render())}isVisible(){return this.option("filterPanel.visible")&&this._dataController.dataSource()}_renderCore(){const e=this.element();e.empty();const t=!!this._columnsController.getColumns().length;if(!t)return;e.addClass(this.addWidgetPrefix("filter-panel"));const i=(0,s.A)("<div>").addClass(this.addWidgetPrefix("filter-panel-left")).appendTo(e);this._renderFilterBuilderText(e,i)}_renderFilterBuilderText(e,t){const i=this._getFilterElement(),n=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){const o=this._getCheckElement(),s=this._getRemoveButtonElement();return t.append(o).append(i).append(n),void e.append(s)}t.append(i).append(n)}_getCheckElement(){const e=this,t=(0,s.A)("<div>").addClass(this.addWidgetPrefix("filter-panel-checkbox"));return e._createComponent(t,a.A,{value:e.option("filterPanel.filterEnabled"),onValueChanged(t){e.option("filterPanel.filterEnabled",t.value)}}),t.attr("title",this.option("filterPanel.texts.filterEnabledHint")),t}_getFilterElement(){const e=this,t=(0,s.A)("<div>").addClass("dx-icon-filter");return n.A.on(t,"click",()=>e._showFilterBuilder()),(0,c.j)("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_getTextElement(){const e=this,t=(0,s.A)("<div>").addClass(e.addWidgetPrefix("filter-panel-text"));let i;const o=e.option("filterValue");return o?(0,r.z7)(e.getFilterText(o,this._filterSyncController.getCustomFilterOperations())).done(i=>{const n=e.option("filterPanel.customizeText");if(n){const t=n({component:e.component,filterValue:o,text:i});"string"===typeof t&&(i=t)}t.text(i)}):(i=e.option("filterPanel.texts.createFilter"),t.text(i)),n.A.on(t,"click",()=>e._showFilterBuilder()),(0,c.j)("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)}_getRemoveButtonElement(){const e=this,t=()=>e.option("filterValue",null),i=(0,s.A)("<div>").addClass(e.addWidgetPrefix("filter-panel-clear-filter")).text(e.option("filterPanel.texts.clearFilter"));return n.A.on(i,"click",t),(0,c.j)("filterPanel",this,i,void 0,t),e._addTabIndexToElement(i),i}_addTabIndexToElement(e){if(!this.option("useLegacyKeyboardNavigation")){const t=this.option("tabindex")||0;e.attr("tabindex",t)}}optionChanged(e){switch(e.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),e.handled=!0;break;case"filterPanel":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_getConditionText(e,t,i){let n=`[${e}] ${t}`;return(0,l.O9)(i)&&(n+=i),n}_getValueMaskedText(e){return Array.isArray(e)?`('${e.join("', '")}')`:` '${e}'`}_getValueText(e,t,i){const n=new r.cY,o=t&&t.customizeText;if((0,l.O9)(i)||o)if(!o&&e.lookup)(0,u.yy)(e,i,e=>{n.resolve(this._getValueMaskedText(e))});else{const o=Array.isArray(i)?i:p.A.getDisplayValue(e,i,null);(0,r.z7)((0,u.GT)(e,o,t,"filterPanel")).done(e=>{n.resolve(this._getValueMaskedText(e))})}else n.resolve("");return n.promise()}getConditionText(e,t){const i=this,n=e[1],o=new r.cY,s=(0,u.D3)(t.customOperations,n);let l;const a=(0,u.VI)(e[0],t.columns),c=a.caption||"",h=e[2];return l=s?s.caption||d.Ay.captionize(s.name):null===h?(0,u.PQ)("="===n?"isblank":"isnotblank",t.filterOperationDescriptions):(0,u.PQ)(n,t.filterOperationDescriptions),this._getValueText(a,s,h).done(e=>{o.resolve(i._getConditionText(c,l,e))}),o}getGroupText(e,t,i){const n=this,o=new r.cY,s=[],l=(0,u.Bd)(e);return e.forEach(e=>{(0,u.G3)(e)?s.push(n.getConditionText(e,t)):(0,u.IZ)(e)&&s.push(n.getGroupText(e,t,!0))}),r.z7.apply(this,s).done(function(){let e;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];if(l.startsWith("!")){const i=t.groupOperationDescriptions[`not${l.substring(1,2).toUpperCase()}${l.substring(2)}`].split(" ");e=`${i[0]} ${s[0]}`}else e=s.join(` ${t.groupOperationDescriptions[l]} `);i&&(e=`(${e})`),o.resolve(e)}),o}getFilterText(e,t){const i={customOperations:t,columns:this._columnsController.getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return(0,u.G3)(e)?this.getConditionText(e,i):this.getGroupText(e,i)}}const m=e=>class extends e{optionChanged(e){"filterPanel"===e.name?(this._applyFilter(),e.handled=!0):super.optionChanged(e)}},_={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:o.A.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:o.A.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:o.A.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:g},extenders:{controllers:{data:m}}}},64219:function(e,t,i){i.d(t,{A:function(){return V}});i(69375),i(82438),i(12266),i(52087),i(90550),i(97755),i(93251),i(32773);var n=i(24906),o=i(74567),s=i(15045),r=i(62192),l=i(35754),a=i(85563),d=i(26228),u=i(80028),c=i(44956),h=i(50172),p=i(98064);const{isWrapped:g}=p.A,m="dx-editor-inline-block",_=(e,t)=>(0,c.X)(e,{readOnly:t.readOnly,placeholder:t.placeholder,inputAttr:{id:t.id,"aria-labelledby":t["aria-labelledby"]},tabIndex:t.tabIndex},t.editorOptions),C=()=>d.A.mozilla||r.A.real().ios,f=e=>{const t={},i=C(),s=e.sharedData||t;return _({placeholder:e.placeholder,width:e.width,value:e.value,onValueChanged(i){const n="filterRow"===e.parentType||"searchPanel"===e.parentType,o=i.event&&("input"===i.event.type||"keyup"===i.event.type),r=function(t,i){null===e||void 0===e||e.setValue(t.value,i)};clearTimeout(t.valueChangeTimeout),o&&n?s.valueChangeTimeout=t.valueChangeTimeout=setTimeout(()=>{r(i,t.valueChangeTimeout!==s.valueChangeTimeout)},(0,h.O9)(e.updateValueTimeout)?e.updateValueTimeout:0):r(i)},onKeyDown(e){i&&"enter"===(0,o.YD)(e.event)&&n.A.trigger((0,a.A)(e.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===e.parentType?" keyup input":"")},e)};function v(e){var t;if(null!==(t=e.row)&&void 0!==t&&t.watch&&"dataRow"===e.parentType){const t=e.editorOptions||{};let i;e.editorOptions=t;const{onInitialized:n}=t;let o;t.onInitialized=function(e){null===n||void 0===n||n.apply(this,arguments),i=e.component,i.on("disposing",s)};const s=e.row.watch(()=>{var t;return o=e.lookup.dataSource(e.row),null===(t=o)||void 0===t?void 0:t.filter},()=>{i.option("dataSource",o)},t=>{e.row=t})}}const x=e=>{e.editorName="dxDateBox",e.editorOptions=_({value:e.value,onValueChanged(t){e.setValue(t.value)},onKeyDown(e){let{component:t,event:i}=e;const n=t.option("useMaskBehavior");(C()||n)&&"enter"===(0,o.YD)(i)&&(t.blur(),t.focus())},displayFormat:e.format,type:e.dataType,dateSerializationFormat:null,width:"filterBuilder"===e.parentType?void 0:"auto"},e)},w=e=>{const t=f(e),i="searchPanel"===e.parentType;var n;e.editorType&&"dxTextBox"!==e.editorType?t.value=e.value:t.value=(n=e.value,(0,h.O9)(n)?n.toString():""),t.valueChangeEvent+=i?" keyup input search":"",t.mode=t.mode||(i?"search":"text"),e.editorName="dxTextBox",e.editorOptions=t},y=e=>{const t=f(e);t.value=(0,h.O9)(e.value)?e.value:null,e.editorName="dxNumberBox",e.editorOptions=t};function b(e){const{lookup:t}=e;let i,n,o;const r="filterRow"===e.parentType;if(t){i=(0,u.Hz)(t.displayExpr),n=t.dataSource,(0,h.Tn)(n)&&!g(n)&&(n=n(e.row||{}),v(e)),((0,h.Gv)(n)||Array.isArray(n))&&(n=(0,s.ho)(n),r&&(o=n.postProcess,n.postProcess=function(e){return 0===this.pageIndex()&&(e=e.slice(0),e.unshift(null)),o?o.call(this,e):e}));const l=Boolean(t.allowClearing&&!r);e.editorName=e.editorType??"dxSelectBox",e.editorOptions=_({searchEnabled:!0,value:e.value,valueExpr:e.lookup.valueExpr,searchExpr:e.lookup.searchExpr||e.lookup.displayExpr,allowClearing:l,showClearButton:l,displayExpr(t){return null===t?e.showAllText:i(t)},dataSource:n,onValueChanged(t){const i=[t.value];r||i.push(t.component.option("text")),e.setValue.apply(this,i)}},e)}}function I(e){e.editorName="dxCheckBox",e.editorOptions=_({elementAttr:{id:e.id},value:(0,h.O9)(e.value)?e.value:void 0,hoverStateEnabled:!e.readOnly,focusStateEnabled:!e.readOnly,activeStateEnabled:!1,onValueChanged(t){var i;null===(i=e.setValue)||void 0===i||i.call(e,t.value,t)}},e)}const S=e=>{"filterRow"===e.parentType||"filterBuilder"===e.parentType?b((0,c.X)(e,{lookup:{displayExpr(t){return!0===t?e.trueText||"true":!1===t?e.falseText||"false":void 0},dataSource:[!0,!1]}})):I(e)},A=(e,t)=>{const i=(0,a.A)(t.editorElement);if(t.editorName&&t.editorOptions&&i[t.editorName]){if("dxCheckBox"!==t.editorName&&"dxSwitch"!==t.editorName||t.isOnForm||(i.addClass(e.addWidgetPrefix("checkbox-size")),i.parent().addClass(m)),e._createComponent(i,t.editorName,t.editorOptions),"dxDateBox"===t.editorName){const e=i.dxDateBox("instance"),t=e._supportedKeys().enter;e.registerKeyHandler("enter",i=>(e.option("opened")&&t(i),!0))}"dxTextArea"===t.editorName&&i.dxTextArea("instance").registerKeyHandler("enter",e=>{"enter"!==(0,o.YD)(e)||e.ctrlKey||e.shiftKey||e.stopPropagation()})}},E=e=>{e.editorName=e.editorType,e.editorOptions=_({value:e.value,onValueChanged(t){e.setValue(t.value)}},e)},R=e=>{const t={dxDateBox:x,dxCheckBox:I,dxNumberBox:y,dxTextBox:w};if(e.lookup)b(e);else if(e.editorType)(t[e.editorType]??E)(e);else switch(e.dataType){case"date":case"datetime":x(e);break;case"boolean":S(e);break;case"number":y(e);break;default:w(e)}},O=e=>class extends e{createEditor(e,t){t.cancel=!1,t.editorElement=(0,l.cc)(e),(0,h.O9)(t.tabIndex)||(t.tabIndex=this.option("tabIndex")),R(t),this.executeAction("onEditorPreparing",t),t.cancel||("dataRow"!==t.parentType||t.isOnForm||(0,h.O9)(t.editorOptions.showValidationMark)||(t.editorOptions.showValidationMark=!1),A(this,t),this.executeAction("onEditorPrepared",t))}};var T=O,V=T},66575:function(e,t,i){i.d(t,{P:function(){return o}});var n=i(91125);class o extends n.WO{constructor(){super(...arguments),this._toastView=null}init(){this._toastView=this.getView("toastView")}showToast(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null===(t=this._toastView)||void 0===t||t.showToast(e,i)}async hideToast(){var e;await(null===(e=this._toastView)||void 0===e?void 0:e.hideToast())}dispose(){var e;null===(e=this._toastView)||void 0===e||e.dispose()}}},66692:function(e,t,i){i.d(t,{AI:function(){return $},BF:function(){return X},CO:function(){return R},CQ:function(){return me},Cp:function(){return S},D6:function(){return Y},Gh:function(){return P},H6:function(){return ne},HA:function(){return I},IP:function(){return pe},JY:function(){return ee},KN:function(){return oe},LF:function(){return k},LS:function(){return j},OT:function(){return _e},QT:function(){return V},Tk:function(){return ce},Tp:function(){return q},VN:function(){return A},W_:function(){return F},Yv:function(){return re},_e:function(){return H},_w:function(){return he},ck:function(){return y},dk:function(){return le},eK:function(){return E},hs:function(){return D},kJ:function(){return U},kn:function(){return ge},l8:function(){return z},lh:function(){return N},n1:function(){return we},nq:function(){return te},of:function(){return Q},r5:function(){return xe},sN:function(){return se},sw:function(){return ve},u8:function(){return K},um:function(){return de},y$:function(){return ae},y1:function(){return ue},yF:function(){return ie}});i(69375),i(82438),i(2989),i(12266),i(57327),i(50020),i(74786),i(34840);var n=i(38943),o=i(74035),s=i(39889),r=i(80028),l=i(86103),a=i(44956),d=i(89214),u=i(36947),c=i(94360),h=i(50172),p=i(98064),g=i(93821),m=i(35626),_=i(95506),C=i(20338),f=i(16480),v=i(26662),x=i(69287);const w=(e,t)=>{if(null!==e&&void 0!==e&&e._isWarnedAboutUnsupportedProperties)return;if(!t||!Array.isArray(t)||0===(null===t||void 0===t?void 0:t.length))return;let i=null;for(const n of t){if(i)break;if(n&&"object"===typeof n&&null!==n)for(const e of x.NA)if(e in n){i=e;break}}i&&(e&&(e._isWarnedAboutUnsupportedProperties=!0),g.A.log("W1028",i))},y=function(e){e.filterOperations=e.defaultFilterOperations};let b=1;const I=function(e,t,i,n){let o={};if(t){(0,h.Kg)(t)&&(t={dataField:t}),e.setName(t);let s={};if(t.command)s=(0,u.tm)(o,t);else{o=e.getCommonSettings(t),i&&i.name&&i.dataField&&(t=(0,a.X)({},t,{dataField:i.dataField}));const r=e._createCalculatedColumnOptions(t,n);t.type||(s={headerId:"dx-col-"+b++}),s=(0,u.tm)(s,x.Yl,!1,!0),(0,u.tm)(s,o,!1,!0),(0,u.tm)(s,r,!1,!0),(0,u.tm)(s,t,!1,!0),(0,u.tm)(s,{selector:null},!1,!0)}return t.filterOperations===t.defaultFilterOperations&&y(s),s}},S=function(e,t,i,n){let o=[];return t&&(0,d.__)(t,(t,s)=>{const r=(n??0)+o.length,l=e._columnsUserState&&G(s,e._columnsUserState[r])&&e._columnsUserState[r],a=I(e,s,l,i);a&&(i&&(a.ownerBand=i),o.push(a),a.columns&&(w(e,a.columns),o=o.concat(S(e,a.columns,a,o.length)),delete a.columns,a.hasColumns=!0))}),o},A=function(e,t){const i=[];let n=t[e];while(n)i.unshift(n),e=n.index,n=t[e];return i},E=function(e,t,i){let n=[];const o=t[e];if(o)for(let s=0;s<o.length;s++){const e=o[s];(0,h.O9)(e.groupIndex)&&!e.showWhenGrouped||(n.push(e),i&&e.isBand&&(n=n.concat(E(e.index,t,i))))}return n},R=function(e,t){let i,n;const o=e.getBandColumnsCache(),s=function(e){const t=i?i.index:void 0;return e.ownerBand===t};if(o.isPlain)i=e._columns[t[0]];else{n=e._columns.filter(s);for(let o=0;o<t.length;o++)i=n[t[o]],i&&(n=e._columns.filter(s))}return i},O=function(e,t){let i,n=[];const o=e.getBandColumnsCache(),s=function(e){return e.ownerBand===t.ownerBand};if(o.isPlain){const i=e._columns.indexOf(t);i>=0&&(n=[`columns[${i}]`])}else{i=e._columns.filter(s);while(i.length&&-1!==i.indexOf(t))n.unshift(`columns[${i.indexOf(t)}]`),t=o.columnParentByIndex[t.index],i=t?e._columns.filter(s):[]}return n.join(".")},T=function(e,t){let i=0;const n=e.getChildrenByBandColumn(t,!0);return(0,d.__)(n,(t,n)=>{n.isBand?(n.colspan=n.colspan||T(e,n.index),i+=n.colspan||1):i+=1}),i},V=function(e,t,i){let n;for(let o=0;o<t.length;o++){const s=t[o];(s.visible||s.command)&&(s.isBand&&(s.colspan=s.colspan||T(e,s.index)),s.isBand&&s.colspan||(n=e.getRowCount(),s.command||(0,h.O9)(s.groupIndex)&&!s.showWhenGrouped||(n-=A(s.index,i.columnParentByIndex).length),n>1&&(s.rowspan=n)))}},F=function(e){let t=(0,h.NW)(e);return"string"!==t&&"boolean"!==t&&"number"!==t&&"date"!==t&&"object"!==t&&(t=void 0),t},P=function(e,t){switch(e){case"date":case"datetime":return l.A.getDateSerializationFormat(t);case"number":if((0,h.Kg)(t))return"string";if((0,h.kf)(t))return null}},D=function(e,t){e.deserializeValue||(C.A.isDateType(t)&&(e.deserializeValue=function(e){return l.A.deserializeDate(e)},e.serializeValue=function(e){return(0,h.Kg)(e)?e:l.A.serializeDate(e,this.serializationFormat)}),"number"===t&&(e.deserializeValue=function(e){const t=parseFloat(e);return isNaN(t)?e:t},e.serializeValue=function(e,t){return"filter"===t?e:(0,h.O9)(e)&&"string"===this.serializationFormat?e.toString():e}))},k=function(e,t){switch(e){case"number":return"right";case"boolean":return"center";default:return(0,c.n)(t)}},B=function(e){return!0===e.value?this.trueText||"true":!1===e.value?this.falseText||"false":e.valueText||""},H=function(e){if("boolean"===e)return B},z=function(e,t){const i=e._getFirstItems(t);let n;const o={},s=[];for(let r=0;r<i.length;r++)if(i[r])for(n in i[r])(0,h.Tn)(i[r][n])&&!p.A.isWrapped(i[r][n])||(o[n]=!0);for(n in o)if(0!==n.indexOf("__")){const t=I(e,n);s.push(t)}return s},M=function(e){(0,d.__)(e._columns,(e,t)=>{t.index=e}),(0,d.__)(e._columns,(e,t)=>{(0,h.Gv)(t.ownerBand)&&(t.ownerBand=t.ownerBand.index)}),(0,d.__)(e._commandColumns,(e,t)=>{t.index=-(e+1)})},N=function(e,t){(0,o.Il)(e._columns,"groupIndex",t,e=>{const{grouped:t}=e;return delete e.grouped,t})},L=function(e,t){(0,d.__)(e._columns,(e,t)=>{(0,h.O9)(t.sortIndex)&&!te(t.sortOrder)&&delete t.sortIndex}),(0,o.Il)(e._columns,"sortIndex",t,e=>!(0,h.O9)(e.groupIndex)&&te(e.sortOrder))},W=function(e,t){let i;const n=[],s=e.getBandColumnsCache(),r=[],l=e._columns.filter(e=>!e.command);for(let o=0;o<l.length;o++){i=l[o];const e=A(o,s.columnParentByIndex);e.length?r.push(i):n.push(i)}(0,o.Il)(r,"visibleIndex",t),(0,o.Il)(n,"visibleIndex",t)},K=function(e,t,i){const n=(0,h.Gv)(t)?t.rowIndex:null,o=i===x.As?e.getGroupColumns():i===x.Hl?e.getChooserColumns():e.getVisibleColumns(n,!0);let s;return t=(0,h.Gv)(t)?t.columnIndex:t,s=o[t],s&&s.type===x.D5&&(s=e._columns.filter(e=>s.type===e.type)[0]||s),s&&(0,h.O9)(s.index)?s.index:-1},$=function(e,t,i){const n=e.getGroupColumns();let o;if(i>=0)for(o=0;o<n.length;o++)n[o].groupIndex>=i&&n[o].groupIndex++;else for(i=0,o=0;o<n.length;o++)i=Math.max(i,n[o].groupIndex+1);return i};function G(e,t){return e&&t&&t.name===(e.name||e.dataField)&&(t.dataField===e.dataField||e.name)}const q=function(e){const t=e._columnsUserState,i=e._ignoreColumnOptionNames||[],n=e._columns,o={};let s=[],r=!0;const l=[];let a,d,u;function c(e,t){if(t)for(let n=0;n<x.Cs.length;n++){const o=x.Cs[n];i.includes(o)||("dataType"===o?e[o]=e[o]||t[o]:x.bU.includes(o)?o in t&&(e[o]=t[o]):("selectedFilterOperation"===o&&t[o]&&(e.defaultSelectedFilterOperation=e[o]||null),e[o]=t[o]))}}function p(e,t){const i=t.name||t.dataField;let n=o[i]||0;for(let s=0;s<e.length;s++)if(G(t,e[s])){if(!n)return o[i]=o[i]||0,o[i]++,s;n--}return-1}if(t){for(u=0;u<n.length;u++)d=p(t,n[u]),r=r&&d>=0,l.push(d);for(u=0;u<n.length;u++)a=n[u],d=l[u],(e._hasUserState||r)&&c(a,t[d]),d>=0&&(0,h.O9)(t[d].initialIndex)?s[d]=a:s.push(a);let i=!1;for(u=0;u<t.length;u++){const o=t[u];o.added&&p(n,o)<0&&(a=I(e,o.added),c(a,o),s.push(a),o.added.columns&&(i=!0))}i&&(M(e),s=S(e,s)),X(e,s)}},U=function(e,t){M(e),N(e,t),L(e,t),pe(e),W(e,t)},j=function(e){e.resetColumnsCache()};function X(e,t){e._previousColumns=e._columns,e._columns=t,j(e),e.updateColumnDataTypes()}const Y=function(e,t,i,n){const o=e._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:n};i=i||"all",i=i.split(".")[0];const{changeTypes:s}=o;t&&!s[t]&&(s[t]=!0,s.length++);const{optionNames:r}=o;i&&!r[i]&&(r[i]=!0,r.length++),void 0!==n&&n===o.columnIndex||((0,h.O9)(n)&&(o.columnIndices??(o.columnIndices=[]),(0,h.O9)(o.columnIndex)&&o.columnIndices.push(o.columnIndex),o.columnIndices.push(n)),delete o.columnIndex),e._columnChanges=o,j(e)},Q=function(e){const t=e.option("onColumnsChanging"),i=e._columnChanges,n=["dataField","lookup","dataType","columns"];var o;e.isInitialized()&&!e._updateLockCount&&i&&(t&&(e._updateLockCount++,t((0,a.X)({component:e.component},i)),e._updateLockCount--),e._columnChanges=void 0,o=i.optionNames,o&&n.some(e=>o[e])?(e._reinitAfterLookupChanges=null===i||void 0===i?void 0:i.optionNames.lookup,e.reinit(),e._reinitAfterLookupChanges=void 0):e.columnsChanged.fire(i))},J=function(e,t,i,n){const o=n>=0;if(i>=0)o||(t.lastSortOrder=t.sortOrder);else{const i=e.option("sorting.mode");let n=t.lastSortOrder;if("single"===i){const i=e._columns.some(e=>e!==t&&(0,h.O9)(e.sortIndex));i&&(n=void 0)}t.sortOrder=n}},Z=function(e,t){const{value:i}=t,{optionName:n}=t,{prevValue:o}=t,{fullOptionName:s}=t,r=`${s}.${n}`;x.JC[n]||e._skipProcessingColumnsChange===r||(e._skipProcessingColumnsChange=r,e.component._notifyOptionChanged(r,i,o),e._skipProcessingColumnsChange=!1)},ee=function(e,t,i,n,o){const l=(0,r.Hz)(i),a=t.index;let d,u,c;if(3===arguments.length)return l(t,{functionsAsIs:!0});const p=l(t,{functionsAsIs:!0});if(!(0,s.RL)(p,n,{maxDepth:5})){"groupIndex"===i?(u="grouping",J(e,t,n,p)):u="calculateGroupValue"===i?"grouping":"sortIndex"===i||"sortOrder"===i||"calculateSortValue"===i?"sorting":"columns";const s=(0,r.vL)(i);s(t,n,{functionsAsIs:!0});const g=O(e,t);x.Zu[i]&&(U(e,t),n=l(t)),"name"!==i&&"allowEditing"!==i||e._checkColumns(),(0,h.O9)(p)||(0,h.O9)(n)||0===i.indexOf("buffer")||!1===o||(o=!0),o?j(e):(x.Cs.includes(i)||"visibleWidth"===i||(d=e.option("columns"),c=e.getColumnByPath(g,d),(0,h.Kg)(c)&&(c=d[a]={dataField:c}),c&&G(c,t)&&s(c,n,{functionsAsIs:!0})),Y(e,u,i,a)),g&&Z(e,{fullOptionName:g,optionName:i,value:n,prevValue:p}),t.type===_.ML&&e.aiColumnOptionChanged.fire(t,i,n)}};function te(e){return"asc"===e||"desc"===e}const ie=function(e){const t=e._getExpandColumnOptions();e.addCommandColumn(t)},ne=function(e,t){if(!this.dataField)return;const i=this.dataField.split("."),n=i.length-1;this.serializeValue&&(t=this.serializeValue(t));for(let o=0;o<n;o++){const t=i[o];e=e[t]=e[t]||{}}e[i[n]]=t},oe=function(e,t,i){const n=[];return t=t||0,e[t]&&(0,d.__)(e[t],(o,s)=>{s.ownerBand!==i&&s.type!==x.D5||(s.isBand&&s.colspan?n.push.apply(n,oe(e,t+1,s.index)):(!s.command||t<1)&&n.push(s))}),n},se=function(e){let t=1;const i=e.getBandColumnsCache(),{columnParentByIndex:n}=i;return e._columns.forEach(e=>{const i=A(e.index,n),o=i.filter(e=>!e.visible);e.visible&&!o.length&&(t=Math.max(t,i.length+1))}),t},re=function(e,t){const i=e.option("rtlEnabled");return t.command&&!C.A.isCustomCommandColumn(e._columns,t)||!t.fixedPosition?i?"right":"left":t.fixedPosition},le=function(e,t,i,n){let o;const s=this.getRowCount();let r=e[n]&&e[n].rowspan,l=t.filter(e=>e.type===i);return e.forEach((t,n)=>{t.type===i&&(o=n,r=e[n+1]?e[n+1].rowspan:s)}),r>1&&(l=(0,d.Tj)(l,e=>(0,a.X)({},e,{rowspan:r}))),l.unshift.apply(l,(0,h.O9)(o)?[o,1]:[n,0]),e.splice.apply(e,l),r||1},ae=function(e){let t;for(t=0;e>1;t++)e/=10;return t},de=function(e,t){let i=e?e.toString():"0";while(i.length<t)i=`0${i}`;return i},ue=(e,t,i,n)=>{let o,s,r=t.slice().map(e=>(0,a.X)({},e));const l=e._isColumnFixing();let d=i.slice().map(e=>(0,a.X)({fixed:l},e));const u=e=>i.reduce((t,i,o)=>{const s=n&&e.type===x.D5?"expand":e.type;return i.type===s||i.command===e.command?o:t},-1),c=e=>e.command!==i[s].command;for(let h=0;h<t.length;h++)if(o=t[h],s=o&&(o.type||o.command)?u(o):-1,s>=0)if(n)r[h]=(0,a.X)({fixed:l},i[s],o,{calculateCellValue:i[s].calculateCellValue,cssClass:[i[s].cssClass??"",o.cssClass??""].join(" ").trim()}),o.type!==x.D5&&(d=d.filter(c));else{const e={visibleIndex:o.visibleIndex,index:o.index,headerId:o.headerId,allowFixing:0===o.groupIndex,allowReordering:0===o.groupIndex,groupIndex:o.groupIndex};r[h]=(0,a.X)({},o,i[s],o.type===x.D5&&e)}return t.length&&n&&d.length&&(r=r.concat(d)),r},ce=(e,t)=>{const i=t.type&&t.type!==_.ML;return i?e._isColumnFixing():t.fixed&&t.fixedPosition!==f.Xn.Sticky},he=e=>{e.forEach(t=>{(0,h.O9)(t.ownerBand)&&(t.ownerBand=e[t.ownerBand])})},pe=e=>{e._bandColumnsCache=void 0},ge=(e,t)=>{const i=(0,h.Kg)(t)&&t.substr(0,t.indexOf(":"));let n;if(void 0!==t)return i&&(t=t.substr(i.length+1)),i?n=e.filter(e=>`${e[i]}`===t)[0]:["index","name","dataField","caption"].some(i=>(n=e.filter(e=>e[i]===t)[0],!!n)),n},me=(e,t)=>{if("asc"!==t&&"desc"!==t)return e;const i="asc"===t?1:-1;return e.sort((e,t)=>{const n=e.caption||"",o=t.caption||"";return i*n.localeCompare(o)}),e},_e=function(e,t){const i=n.A.parse(e);if((0,h.kf)(i)){const o=n.A.format(i,t),s=n.A.format(i,"decimal");if(o===e||s===e)return i}},Ce=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return t.every((t,s)=>i&&0===s||fe(e,t,s,i,n,o))},fe=function(e,t,i){var n,o;let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0;const a=t.index,d=(u=i,e.getVisibleColumns(u).filter(i=>{let n=!0;return i.visibleWidth!==m.o&&(s&&t?n&&(n=i.ownerBand===t.ownerBand):l&&n&&(n=i.fixed&&(0,v.iR)(e,i)===l),n)}));var u;const c=e.getVisibleIndex(a,i);return r?c===e.getVisibleIndex(null===(n=d[d.length-1])||void 0===n?void 0:n.index,i):c===e.getVisibleIndex(null===(o=d[0])||void 0===o?void 0:o.index,i)},ve=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const r=t.index,l=e.getBandColumnsCache(),a=!(0,h.O9)(t.type)&&A(r,l.columnParentByIndex);return null!==a&&void 0!==a&&a.length?Ce(e,a.concat([t]),n,o,s):n||fe(e,t,i,n,o,s)},xe=function(e){let{type:t=""}=e;return x.cS.includes(t)},we=e=>`.dx-header-row td[aria-colindex="${e+1}"]`},67106:function(e,t,i){i.d(t,{Oz:function(){return A},my:function(){return O}});i(69375),i(82438),i(12266),i(99819),i(50020),i(74786),i(34840);var n=i(63027),o=i(92324),s=i(85563),r=i(26228),l=i(39889),a=i(66703),d=i(89214),u=i(94360),c=i(63825),h=i(50172),p=i(27996),g=i(96283);const m={container:"dx-gridbase-a11y-status-container"},_=e=>{let{statusText:t}=e;return(0,s.A)("<div>").text(t??"").addClass(m.container).attr("role","status")};var C=i(91125),f=i(20338);const v=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView","toastView","aiPromptEditorView"],x={a11yStatusContainer:"e2e-a11y-general-status-container"},w=function(e){return(0,h.Kg)(e)&&e.endsWith("%")},y=function(e){return(0,h.Kg)(e)&&e.endsWith("px")},b=function(e,t){const i=e._rowsView.contentWidth(),n=e._getTotalWidth(t,i);return i-n},I=function(e,t,i,n){return b(e,n.map((e,n)=>n===t?i:e))},S=function(e,t){g.zY(e,!0),f.A.setSelectionRange(e,t)};class A extends C.Ay.ViewController{callbackNames(){return["resizeCompleted"]}init(){this._prevContentMinHeight=null,this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editorFactoryController=this.getController("editorFactory"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView"),this._gridView=this.getView("gridView")}_initPostRenderHandlers(){this._refreshSizesHandler||(this._refreshSizesHandler=e=>{let t=(new a.cY).resolve(null);const i=null===e||void 0===e?void 0:e.changeType,n=null===e||void 0===e?void 0:e.isDelayed,o=i&&"updateSelection"!==i&&"updateFocusedRow"!==i&&"pageIndex"!==i&&!n;this._dataController.changed.remove(this._refreshSizesHandler),this._checkSize()&&(t=this._refreshSizes(e)),o&&(0,a.z7)(t).done(()=>{this._setAriaLabel(e),this.fireContentReadyAction()})},this._dataController.changed.add(()=>{this._dataController.changed.add(this._refreshSizesHandler)}))}_refreshSizes(e){let t=(new a.cY).resolve(null);const i=null===e||void 0===e?void 0:e.changeType,n=null===e||void 0===e?void 0:e.isDelayed,o=this._dataController.items();if(e&&"refresh"!==i&&"prepend"!==i&&"append"!==i){if("update"===i){var s;if(0===(null===(s=e.changeTypes)||void 0===s?void 0:s.length))return t;!(o.length>1||"insert"!==e.changeTypes[0])||0===o.length&&"remove"===e.changeTypes[0]||e.needUpdateDimensions?t=this.resize():(t=new a.cY,this._waitAsyncTemplates().done(()=>{(0,l.OX)(()=>(0,l.zE)(()=>(0,l.OX)(()=>{this._setScrollerSpacing(),this._rowsView.resize(),t.resolve()})))}).fail(t.reject))}}else n||(t=this.resize());return t}fireContentReadyAction(){this.component._fireContentReadyAction()}_getWidgetAriaLabel(){return"dxDataGrid-ariaDataGrid"}_setAriaLabel(e){var t;let i="",o=[];const s=(null===(t=this._columnsController)||void 0===t||null===(t=t._columns)||void 0===t?void 0:t.filter(e=>{let{visible:t}=e;return!!t}).length)??0,r=Math.max(0,this._dataController.totalItemsCount()),l=this._getWidgetAriaLabel();i=n.A.format(l,r,s);const a=n.A.format(this._expandableWidgetAriaId);o=[i],a&&o.push(a);const d=this.component.$element().children(".dx-gridbase-container");this.component.setAria("label",o.join(". "),d),null!==e&&void 0!==e&&e.isFirstRender||this._gridView.setWidgetA11yStatusText(i)}_getBestFitWidths(){var e;const t=this._rowsView,i=this._columnHeadersView;let n=t.getColumnWidths();if(null===(e=n)||void 0===e||!e.length){var o;const e=i.getTableElement();i.setTableElement(null===(o=t.getTableElement())||void 0===o?void 0:o.children(".dx-header")),n=i.getColumnWidths(),i.setTableElement(e)}return n}_setVisibleWidths(e,t){const i=this._columnsController;i.beginUpdate(),(0,d.__)(e,(e,n)=>{const o=i.getColumnId(n);i.columnOption(o,"visibleWidth",t[e])}),i.endUpdate()}_toggleBestFitModeForView(e,t,i){if(!e||!e.isVisible())return;const n=this._rowsView.getTableElements(),o=e.getTableElements();(0,d.__)(n,(e,n)=>{let r;const l=(0,s.A)(n),a=o.eq(e);a&&a.length&&(r=i?a.children("tbody").appendTo(l):l.children(`.${t}`).appendTo(a),r.toggleClass(t,i),r.toggleClass(this.addWidgetPrefix("best-fit"),i))})}_toggleBestFitMode(e){const t=this._rowsView.getTableElement(),i=this._rowsView.getTableElements().eq(1);t&&(t.css("tableLayout",e?"auto":"fixed"),t.children("colgroup").css("display",e?"none":""),(0,d.__)(i.find("tr.dx-group-row"),(t,i)=>{(0,s.A)(i).css("display",e?"none":"")}),i.toggleClass(this.addWidgetPrefix("table-fixed"),!e),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",e),this._toggleBestFitModeForView(this._footerView,"dx-footer",e),this._needStretch()&&(t.get(0).style.width=e?"auto":""))}_toggleContentMinHeight(e){const t=this._rowsView.getScrollable(),i=this._rowsView._findContentElement();!1===(null===t||void 0===t?void 0:t.option("useNative"))&&(!0===e&&(this._prevContentMinHeight=i.get(0).style.minHeight),(0,h.O9)(this._prevContentMinHeight)&&i.css({minHeight:e?f.A.getContentHeightLimit(r.A):this._prevContentMinHeight}))}_synchronizeColumns(){const e=this._columnsController,t=e.getVisibleColumns(),i=this.option("columnAutoWidth"),n=t.some(e=>!(0,h.O9)(e.width));let s,r,a,c=this._needBestFit(),p=!1,g=!1,m=[];!c&&(0,d.__)(t,(e,t)=>{if("auto"===t.width)return c=!0,!1}),(0,d.__)(t,(e,t)=>{if(t.minWidth)return p=!0,!1}),this._toggleContentMinHeight(this._hasHeight),this._setVisibleWidths(t,[]);const _=this.component.$element();c&&(r=o.A.getActiveElement(_.get(0)),a=f.A.getSelectionRange(r),this._toggleBestFitMode(!0),s=!0),_&&_.get(0)&&this._maxWidth&&(delete this._maxWidth,_[0].style.maxWidth=""),(0,l.OX)(()=>{if(c?(m=this._getBestFitWidths(),(0,d.__)(t,(t,i)=>{const n=e.getColumnId(i);e.columnOption(n,"bestFitWidth",m[t],!0)})):p&&(m=this._getBestFitWidths()),(0,d.__)(t,function(e){const{width:t}=this;"auto"!==t&&((0,h.O9)(t)?m[e]=(0,h.kf)(t)||y(t)?parseFloat(t):t:i||(m[e]=void 0))}),s&&(this._toggleBestFitMode(!1),s=!1,r&&r!==o.A.getActiveElement())){const e=(0,u.N)(r).bottom<0;e||S(r,a)}g=this._correctColumnWidths(m,t),i&&(!function(){let e;(0,d.__)(t,(t,i)=>{"groupExpand"===i.type&&(e=m[t])}),(0,d.__)(t,(t,i)=>{"groupExpand"===i.type&&e&&(m[t]=e)})}(),this._needStretch()&&this._processStretch(m,t)),(0,l.zE)(()=>{(c||g||n)&&this._setVisibleWidths(t,m),this._toggleContentMinHeight(!1)})})}_needBestFit(){return this.option("columnAutoWidth")}_needStretch(){return this._columnsController.getVisibleColumns().some(e=>"auto"===e.width&&!e.command)}_getAverageColumnsWidth(e){const t=b(this,e),i=e.filter(e=>void 0===e).length;return t/i}_correctColumnWidths(e,t){const i=this;let n,o=!1,s=!1,r=!1;const l=i.component.$element(),a=i._hasWidth;for(n=0;n<t.length;n++){const l=n,a=t[l],d="adaptiveHidden"===e[l];let u=e[l];const{minWidth:c}=a;if(c)if(void 0===u){const t=i._getAverageColumnsWidth(e);u=t}else if(w(u)){const t=I(i,l,c,e);t<0&&(u=-1)}const p=i._getRealColumnWidth(l,e.map((e,t)=>l===t?u:e));c&&!d&&p<c&&(e[l]=c,r=!0,n=-1),(0,h.O9)(a.width)||(s=!0),w(a.width)&&(o=!0)}if(!s&&e.length){const n=i._rowsView.element(),s=i._rowsView.contentWidth(),d=i._rowsView.getScrollbarWidth(),u=i._getTotalWidth(e,s);if(u<s){const s=f.A.getLastResizableColumnIndex(t,e);if(s>=0&&(e[s]="auto",r=!0,!1===a&&!o)){const e=f.A.getComponentBorderWidth(this,n);i._maxWidth=u+d+e,l.css("maxWidth",i._maxWidth)}}}return r}_processStretch(e,t){const i=this._rowsView.contentWidth(),n=this._getTotalWidth(e,i),o={length:0};if(!e.length)return;(0,d.__)(t,function(t){(this.width||"adaptiveHidden"===e[t])&&(o[t]=!0,o.length++)});const s=i-n,r=Math.floor(s/(e.length-o.length));let l=s-r*(e.length-o.length);if(s>=0)for(let a=0;a<e.length;a++)o[a]||(e[a]+=r,l>0&&(l<1?(e[a]+=l,l=0):(e[a]++,l--)))}_getRealColumnWidth(e,t,i){let n=1;const o=t[e];if(!w(o))return parseFloat(o);const s=t.reduce((e,t,i)=>w(t)?e+parseFloat(t):e,0),r=t.reduce((e,t)=>!t||"adaptiveHidden"===t||w(t)?e:e+parseFloat(t),0);i=i||this._rowsView.contentWidth();const l=i-r,a=s*i/100;return r>0&&a+r>=i&&(n=a>l?l/a:1),parseFloat(o)*i*n/100}_getTotalWidth(e,t){let i=0;for(let n=0;n<e.length;n++){const o=e[n];o&&"adaptiveHidden"!==o&&(i+=this._getRealColumnWidth(n,e,t))}return Math.ceil(i)}_getGroupElement(){return this.component.$element().children().get(0)}updateSize(e){const t=this,i=(0,s.A)(e),n=t.addWidgetPrefix("important-margin");if(void 0===t._hasHeight&&i&&i.is(":visible")&&(0,c.RG)(i)){const e=i.children(`.${t.getWidgetContainerClass()}`);e.length&&e.detach(),t._hasHeight=!!(0,c.Oq)(i);const o=(0,c.RG)(i);i.addClass(n),t._hasWidth=(0,c.RG)(i)===o,i.removeClass(n),e.length&&e.appendTo(i)}}publicMethods(){return["resize","updateDimensions"]}_waitAsyncTemplates(){var e,t,i;return(0,a.z7)(null===(e=this._columnHeadersView)||void 0===e?void 0:e.waitAsyncTemplates(!0),null===(t=this._rowsView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(i=this._footerView)||void 0===i?void 0:i.waitAsyncTemplates(!0))}resize(){if(this.component._requireResize)return(new a.cY).resolve();const e=new a.cY;return this._waitAsyncTemplates().done(()=>{(0,a.z7)(this.updateDimensions()).done(e.resolve).fail(e.reject)}).fail(e.reject),e.promise().done(()=>{this.resizeCompleted.fire()})}updateDimensions(e){const t=this;if(t._initPostRenderHandlers(),!t._checkSize(e))return;const i=t._resizeDeferred,n=t._resizeDeferred=new a.cY;return(0,a.z7)(i).always(()=>{(0,l.zE)(()=>{t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),(0,l.OX)(()=>{(0,l.zE)(()=>{(0,l.OX)(()=>{t._updateDimensionsCore()})})})}).done(n.resolve).fail(n.reject)}),n.promise()}_resetGroupElementHeight(){const e=this._getGroupElement(),t=this._rowsView.getScrollable();!e||!e.style.height||t&&t.scrollTop()||(e.style.height="")}_checkSize(e){const t=this.component.$element(),i=t.is(":visible"),n=this._lastWidth!==(0,c.RG)(t)||this._lastHeight!==(0,c.Oq)(t)||this._devicePixelRatio!==(0,p.zk)().devicePixelRatio;return i&&(!e||n)}_setScrollerSpacingCore(){const e=this,t=e._rowsView.getScrollbarWidth(),i=e._rowsView.getScrollbarWidth(!0);(0,l.zE)(()=>{e._columnHeadersView&&e._columnHeadersView.setScrollerSpacing(t),e._footerView&&e._footerView.setScrollerSpacing(t),e._rowsView.setScrollerSpacing(t,i)})}_setScrollerSpacing(){const e=this._rowsView.getScrollable(),t=!0===this.option("scrolling.useNative");!e||t?(0,l.zE)(()=>{(0,l.OX)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()}_setAriaOwns(){var e,t,i;const n=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getTableElement(),o=null===(t=this._footerView)||void 0===t?void 0:t.getTableElement();null===(i=this._rowsView)||void 0===i||i.setAriaOwns(null===n||void 0===n?void 0:n.attr("id"),null===o||void 0===o?void 0:o.attr("id"))}_updateDimensionsCore(){const e=this,t=e._dataController,i=e._rowsView,n=e.component.$element(),o=this._getGroupElement(),r=(0,c.Oq)(n),a=e.option("height")??n.get(0).style.height,u=!!a&&"auto"!==a,h=parseInt(n.css("maxHeight")),p=h&&r>=h,g=o&&o.scrollHeight===o.offsetHeight;e.updateSize(n),(0,l.zE)(()=>{const r=e._hasHeight||!!h||u;i.hasHeight(r),this._setAriaOwns(),p&&!g&&(0,s.A)(o).css("height",h),t.isLoaded()?(0,l.OX)(()=>{e._updateLastSizes(n),e._setScrollerSpacing(),(0,d.__)(v,(t,i)=>{const n=e.getView(i);n&&n.resize()}),this._editorFactoryController&&this._editorFactoryController.resize()}):i.setLoading(t.isLoading())})}_updateLastSizes(e){this._lastWidth=(0,c.RG)(e),this._lastHeight=(0,c.Oq)(e),this._devicePixelRatio=(0,p.zk)().devicePixelRatio}optionChanged(e){switch(e.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(e.handled=!0);default:super.optionChanged(e)}}resetLastResizeTime(){}}class E extends C.Ay.ViewController{_scrollChangedHandler(e,t,i){for(let n=0;n<e.length;n++)e[n]&&e[n].name!==i&&e[n].scrollTo({left:t.left,top:t.top})}init(){const e=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")];for(let t=0;t<e.length;t++){const i=e[t];i&&i.scrollChanged.add(this._scrollChangedHandler.bind(this,e))}}}class R extends C.Ay.View{init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")}_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())}getView(e){return this.component._views[e]}element(){return this._groupElement}optionChanged(e){const t=this;(0,h.O9)(t._groupElement)&&"showBorders"===e.name?(t._groupElement.toggleClass(t.addWidgetPrefix("borders"),!!e.value),e.handled=!0):super.optionChanged(e)}_renderViews(e){const t=this;(0,d.__)(v,(i,n)=>{const o=t.getView(n);o&&o.render(e)})}_getTableRoleName(){return"group"}render(e){const t=!this._groupElement,i=this._groupElement||(0,s.A)("<div>").addClass(this.getWidgetContainerClass());i.addClass("dx-gridbase-container"),i.toggleClass(this.addWidgetPrefix("borders"),!!this.option("showBorders")),this.setAria("role","presentation",e),this.component.setAria("role",this._getTableRoleName(),i),this._rootElement=e||this._rootElement,t&&(this._groupElement=i,(0,p.Vd)()&&this._resizingController.updateSize(e),i.appendTo(e)),this._a11yGeneralStatusElement||(this._a11yGeneralStatusElement=_({}),this._a11yGeneralStatusElement.attr(x.a11yStatusContainer,"true"),i.append(this._a11yGeneralStatusElement)),this._renderViews(i)}update(){const e=this,t=e._rootElement,i=e._groupElement;t&&i&&(this._resizingController.resize(),e._dataController.isLoaded()&&e._resizingController.fireContentReadyAction())}setWidgetA11yStatusText(e){var t;null===(t=this._a11yGeneralStatusElement)||void 0===t||t.text(e)}}const O={defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:A,synchronizeScrolling:E},views:{gridView:R},VIEW_NAMES:v}},67337:function(e,t,i){i(83923)},68055:function(e,t,i){i.d(t,{A5:function(){return p},B6:function(){return g},BL:function(){return r},D:function(){return o},DT:function(){return w},ER:function(){return B},FP:function(){return A},ID:function(){return _},J7:function(){return b},Jb:function(){return T},Lb:function(){return M},OM:function(){return x},OP:function(){return H},OQ:function(){return m},R7:function(){return C},VQ:function(){return u},Z8:function(){return l},_7:function(){return R},a0:function(){return s},aO:function(){return a},ae:function(){return D},bF:function(){return E},dR:function(){return V},eq:function(){return f},hg:function(){return c},iK:function(){return y},iw:function(){return n},l0:function(){return F},lW:function(){return k},mu:function(){return d},qF:function(){return S},sQ:function(){return P},tD:function(){return O},uZ:function(){return I},uc:function(){return v},xR:function(){return h}});const n={ariaColIndex:"aria-colindex",dragCell:"dx-drag-cell"},o="rowsview",s="table",r="edit-form",l="dx-data-row",a="dx-group-row",d="dx-header-row",u="edit-form-item",c="dx-master-detail-row",h="dx-freespace-row",p="dx-virtual-row",g="dx-master-detail-cell",m="dx-dropdowneditor-overlay",_="dx-command-expand",C="dx-command-adaptive",f="dx-adaptive-item-text",v="dx-command-select",x="dx-command-edit",w="[class^=dx-command]",y="dx-cell-focus-disabled",b="dxDateBox",I="dx-state-focused",S="dx-widget",A="dx-revert-button",E="dx-focused",R="delete",O='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled],.dx-state-readonly)\n',T=`${O}, .dx-dropdowneditor-icon`,V="row",F="cell",P="columnHeadersView",D="rowsView",k=["shift","control","alt"],B="drag";var H,z;!function(e){e.Next="next",e.Previous="previous"}(H||(H={})),function(e){e.Group="group",e.Headers="headers"}(z||(z={}));const M={G:71}},68148:function(e,t,i){i.d(t,{A:function(){return S}});i(69375),i(82438),i(2989),i(12266),i(57327),i(34840),i(57147);var n=i(94041),o=i(84558),s=i(24714),r=i(39889),l=i(66703),a=i(44956),d=i(89214),u=i(50172),c=i(91125),h=i(20338),p=i(80791);const g=function(e,t){if(e&&(e=e.slice(0),t))for(let i=0;i<e.length;i++)e[i]=(0,a.X)({key:e[i].key},e[i]),e[i].items=g(e[i].items,t-1);return e},m=function(e,t,i){let n={reload:!0,fullReload:!0};return t&&(n={sorting:!h.A.equalSortParameters(e.sort,t.sort),grouping:!h.A.equalSortParameters(e.group,t.group,!0),groupExpanding:!h.A.equalSortParameters(e.group,t.group)||t.groupExpand,filtering:!h.A.equalFilterParameters(e.filter,t.filter,e.langParams),pageIndex:e.pageIndex!==t.pageIndex,skip:e.skip!==t.skip,take:e.take!==t.take,pageSize:e.pageSize!==t.pageSize,fullReload:i,reload:!1,paging:!1},n.reload=i||n.sorting||n.grouping||n.filtering,n.paging=n.pageIndex||n.pageSize||n.take),n},_=function(e,t){(0,u.O9)(t)?p.Ay.executeAsync(e,t):e()},C=function(){return{items:{}}},f=function(e,t){const i=h.A.normalizeSortingInfo(e.group||e.storeLoadOptions.group||e.loadOptions.group).length,n=[];if(v(n,e,i))return n;t&&y(n,e,i)},v=function(e,t,i,n){var o;const{storeLoadOptions:s}=t,r=t.take??s.take??0,l=null===(o=t.cachedData)||void 0===o?void 0:o.items;if(r&&l){const o=t.skip??s.skip??0;for(let s=0;s<r;s+=1){const a=n?r-1-s:s,d=a+o,u=l[d];if(void 0===u&&d in l)return!0;const c=x(t,u,i,a,r);if(!c)return!1;e.push(c)}return!0}return!1},x=function(e,t,i,n,o){if(i&&t){const s=0===n&&e.skips||[],r=n===o-1&&e.takes||[];return w(t,i,s,r)}return t},w=function(e,t,i,n){if(t&&e){const o=Object.assign({},e),s=i[0]||0,r=n[0],{items:l}=e;if(l){if(void 0===r&&!l[s])return;o.items=[],i.length&&(o.isContinuation=!0),r&&(o.isContinuationOnNextPage=e.count>r);for(let e=0;void 0===r?l[e+s]:e<r;e+=1){const a=l[e+s],d=e+1===r,u=w(a,t-1,0===e?i.slice(1):[],d?n.slice(1):[]);if(void 0===u)return;o.items.push(u)}}return o}return e},y=function(e,t,i){const n=e.length,{storeLoadOptions:o}=t;if(void 0!==o.skip&&o.take&&!i){const s=[];v(s,t,i,!0);const r=s.length;(n||r)&&(t.skip=t.skip??o.skip,t.take=t.take??o.take),n&&(o.skip+=n,o.take-=n,t.cachedDataPartBegin=e),r&&(o.take-=r,t.cachedDataPartEnd=s.reverse())}},b=function(e,t,i){const{storeLoadOptions:n}=e,o=e.skip??n.skip??0,s=e.take??n.take??0;for(let r=0;r<s;r+=1){const n=r+o,s=e.cachedData.items,l=0===r&&e.skips||[];s[n]=I(s[n],t[r],i,l)}},I=function(e,t,i,n){if(i&&t){const o=Object.assign({},t);delete o.isContinuation,delete o.isContinuationOnNextPage;const s=n[0]||0;return t.items&&(o.items=(null===e||void 0===e?void 0:e.items)||{},t.items.forEach((e,t)=>{const r=t+s,l=0===t?n.slice(1):[];o.items[r]=I(o.items[r],e,i-1,l)})),o}return t};class S extends c.Ay.Controller{init(e,t){const i=this;i._dataSource=e,i._remoteOperations=t||{},i._isLastPage=!e.isLastPage(),i._hasLastPage=!1,i._currentTotalCount=0,i._cachedData=C(),i._lastOperationTypes={},i._eventsStrategy=e._eventsStrategy,i._totalCountCorrection=0,i._isLoadingAll=!1,i.changed=(0,s.A)(),i.loadingChanged=(0,s.A)(),i.loadError=(0,s.A)(),i.customizeStoreLoadOptions=(0,s.A)(),i.changing=(0,s.A)(),i.pushed=(0,s.A)(),i._dataChangedHandler=i._handleDataChanged.bind(i),i._customizeStoreLoadOptionsHandler=i._handleCustomizeStoreLoadOptions.bind(i),i._dataLoadedHandler=i._handleDataLoaded.bind(i),i._loadingChangedHandler=i._handleLoadingChanged.bind(i),i._loadErrorHandler=i._handleLoadError.bind(i),i._pushHandler=i._handlePush.bind(i),i._changingHandler=i._handleChanging.bind(i),e.on("changed",i._dataChangedHandler),e.on("customizeStoreLoadOptions",i._customizeStoreLoadOptionsHandler),e.on("customizeLoadResult",i._dataLoadedHandler),e.on("loadingChanged",i._loadingChangedHandler),e.on("loadError",i._loadErrorHandler),e.on("changing",i._changingHandler),e.store().on("beforePush",i._pushHandler),(0,d.__)(e,(e,t)=>{!i[e]&&(0,u.Tn)(t)&&(i[e]=function(){return this._dataSource[e].apply(this._dataSource,arguments)})})}dispose(e){const t=this._dataSource,i=t.store();t.off("changed",this._dataChangedHandler),t.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),t.off("customizeLoadResult",this._dataLoadedHandler),t.off("loadingChanged",this._loadingChangedHandler),t.off("loadError",this._loadErrorHandler),t.off("changing",this._changingHandler),i&&i.off("beforePush",this._pushHandler),e||t.dispose()}remoteOperations(){return this._remoteOperations}refresh(e,t){const i=this,n=i._dataSource;t.reload&&(i.resetCurrentTotalCount(),i._isLastPage=!n.paginate(),i._hasLastPage=i._isLastPage)}resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0}resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0}resetPagesCache(e){this._cachedData=C()}_needClearStoreDataCache(){const e=this.remoteOperations(),t=m(this._lastLoadOptions||{},{}),i=Object.keys(e).every(i=>!t[i]||!e[i]);return!i}push(e,t){const i=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,o.VK)({keyInfo:i,data:this._cachedStoreData,changes:e}),t||this._applyBatch(e),this.pushed.fire(e)}getDataIndexGetter(){if(!this._dataIndexGetter){let e,t;const i=this.store();this._dataIndexGetter=n=>{const o=t&&t!==this._cachedStoreData;if(!e||o){t=this._cachedStoreData||[],e={};for(let n=0;n<t.length;n++)e[(0,r.GP)(i.keyOf(t[n]))]=n}return e[(0,r.GP)(i.keyOf(n))]}}return this._dataIndexGetter}_getKeyInfo(){return this.store()}_needToCopyDataObject(){return!0}_applyBatch(e,t){const i=this._getKeyInfo(),n=this._dataSource,s=h.A.normalizeSortingInfo(this.group()).length,r="reshape"===this.option("editing.refreshMode"),l="virtual"===this.option("scrolling.mode");e=e.filter(e=>!n.paginate()||"insert"!==e.type||void 0!==e.index);const a=()=>s?this.itemsCount():this.items().length,d=a();(0,o.VK)({keyInfo:i,data:this._items,changes:e,groupCount:s,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,o.VK)({keyInfo:i,data:n.items(),changes:e,groupCount:s,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()});const u=this._currentTotalCount>0||(t||!r)&&l;u&&(this._totalCountCorrection+=a()-d),e.splice(0,e.length)}_handlePush(e){let{changes:t}=e;this.push(t,!0)}_handleChanging(e){this.changing.fire(e),this._applyBatch(e.changes,!0)}_needCleanCacheByOperation(e,t){const i=["filtering","sorting","paging"],n=i.indexOf(e),o=n>=0?i.slice(n):[e];return o.some(e=>t[e])}_customizeRemoteOperations(e,t){let i=this._cachedStoreData,n=this._cachedPagingData,o=this._cachedData;(e.storeLoadOptions.filter&&!e.remoteOperations.filtering||e.storeLoadOptions.sort&&!e.remoteOperations.sorting)&&(e.remoteOperations={filtering:e.remoteOperations.filtering,summary:e.remoteOperations.summary}),t.fullReload?(i=void 0,n=void 0,o=C()):(t.reload?(n=void 0,o=C()):t.groupExpanding&&(o=C()),(0,d.__)(t,(t,o)=>{o&&this._needCleanCacheByOperation(t,e.remoteOperations)&&(i=void 0,n=void 0)})),n&&(e.remoteOperations.paging=!1),e.cachedStoreData=i,e.cachedPagingData=n,e.cachedData=o,e.isCustomLoading||(this._cachedStoreData=i,this._cachedPagingData=n,this._cachedData=o)}_handleCustomizeStoreLoadOptions(e){var t;this._handleDataLoading(e),0!==(null===(t=e.data)||void 0===t?void 0:t.length)&&(e.data=f(e,!0)||e.cachedStoreData)}_handleDataLoading(e){const t=this._dataSource,i=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(e),e.delay=this.option("loadingTimeout"),e.originalStoreLoadOptions=e.storeLoadOptions,e.remoteOperations=(0,a.X)({},this.remoteOperations());const n=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(e.delay=void 0);const o=(0,a.X)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},e.storeLoadOptions),s=m(o,i,n);if(this._customizeRemoteOperations(e,s),!e.isCustomLoading){const i=this._isRefreshing;e.pageIndex=t.pageIndex(),e.lastLoadOptions=o,e.operationTypes=s,this._loadingOperationTypes=s,this._isRefreshing=!0,(0,l.z7)(i||this._isRefreshed||this.refresh(e,s)).done(()=>{this._lastOperationId===e.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{t.cancel(e.operationId)}).always(()=>{this._isRefreshing=!1}),t.cancel(this._lastOperationId),this._lastOperationId=e.operationId,this._isRefreshing&&t.cancel(this._lastOperationId)}this._handleDataLoadingCore(e)}_handleDataLoadingCore(e){const{remoteOperations:t}=e;e.loadOptions={};const i=e.cachedData.extra,n={filter:!t.filtering,sort:!t.sorting,group:!t.grouping,summary:!t.summary,skip:!t.paging,take:!t.paging,requireTotalCount:i&&"totalCount"in i||!t.paging,langParams:!t.filtering||!t.sorting};(0,d.__)(e.storeLoadOptions,(t,i)=>{n[t]&&(e.loadOptions[t]=i,delete e.storeLoadOptions[t])}),i&&(e.extra=i)}_handleDataLoaded(e){const{loadOptions:t}=e,i=e.remoteOperations&&!e.remoteOperations.paging,{cachedData:o}=e,{storeLoadOptions:s}=e,r=!1!==this.option("cacheEnabled")&&s,d=r&&!e.isCustomLoading&&o&&(!i||s.group),c=r&&i,p=c&&!e.isCustomLoading;if(!t)return void this._dataSource.cancel(e.operationId);i&&(e.skip=t.skip,e.take=t.take,delete t.skip,delete t.take),t.group&&(t.group=e.group||t.group);const m=h.A.normalizeSortingInfo(e.group||s.group||t.group).length;var _;(e.cachedDataPartBegin&&(e.data=e.cachedDataPartBegin.concat(e.data)),e.cachedDataPartEnd&&(e.data=e.data.concat(e.cachedDataPartEnd)),d&&f(e))||(c&&e.cachedPagingData?e.data=g(e.cachedPagingData,m):(p&&(this._cachedStoreData?e.mergeStoreLoadData&&(e.data=this._cachedStoreData=this._cachedStoreData.concat(e.data)):this._cachedStoreData=g(e.data,h.A.normalizeSortingInfo(s.group).length)),new n.A(e.data).load(t).done(t=>{e.data=t,p&&(this._cachedPagingData=g(e.data,m))}).fail(t=>{e.data=(new l.cY).reject(t)})),t.requireTotalCount&&i&&(e.extra=(0,u.Qd)(e.extra)?e.extra:{},e.extra.totalCount=e.data.length),e.extra&&e.extra.totalCount>=0&&(!1===s.requireTotalCount||!1===t.requireTotalCount)&&(e.extra.totalCount=-1),!t.data&&(s.requireTotalCount||((null===(_=e.extra)||void 0===_?void 0:_.totalCount)??-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(e),d&&(o.extra=o.extra||(0,a.X)({},e.extra),(0,l.z7)(e.data).done(t=>{b(e,t,m)})));(0,l.z7)(e.data).done(()=>{e.lastLoadOptions&&(this._lastLoadOptions=e.lastLoadOptions,Object.keys(e.operationTypes).forEach(t=>{this._lastOperationTypes[t]=this._lastOperationTypes[t]||e.operationTypes[t]}))}),e.storeLoadOptions=e.originalStoreLoadOptions}_handleDataLoadedCore(e){e.remoteOperations&&!e.remoteOperations.paging&&Array.isArray(e.data)&&(void 0!==e.skip&&(e.data=e.data.slice(e.skip)),void 0!==e.take&&(e.data=e.data.slice(0,e.take)))}_handleLoadingChanged(e){this.loadingChanged.fire(e)}_handleLoadError(e){this.loadError.fire(e),this.changed.fire({changeType:"loadError",error:e})}_loadPageSize(){return this.pageSize()}_handleDataChanged(e){let t;const i=this._dataSource;let n=!1;const o=!e||(0,u.O9)(e.changeType),s=this.itemsCount();o&&(this._isLastPage=!s||!this._loadPageSize()||s<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),i.totalCount()>=0?i.pageIndex()>=this.pageCount()&&(i.pageIndex(this.pageCount()-1),this.pageIndex(i.pageIndex()),this.resetPagesCache(),i.load(),n=!0):o&&(t=i.pageIndex()*this.pageSize()+s,t>this._currentTotalCount&&(this._currentTotalCount=t,0!==i.pageIndex()&&this.option("scrolling.legacyMode")||(this._totalCountCorrection=0)),0===s&&i.pageIndex()>=this.pageCount()&&(i.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(i.load(),n=!0))),n||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(e),this.component._optionCache=void 0)}_scheduleCustomLoadCallbacks(e){const t=this;t._isCustomLoading=!0,e.always(()=>{t._isCustomLoading=!1})}loadingOperationTypes(){return this._loadingOperationTypes}operationTypes(){return this._operationTypes}lastLoadOptions(){return this._lastLoadOptions||{}}isLastPage(){return this._isLastPage}_dataSourceTotalCount(){return this._dataSource.totalCount()}_changeRowExpandCore(e){}changeRowExpand(e){}totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)}totalCountCorrection(){return this._totalCountCorrection}items(){}itemsCount(){return this._dataSource.items().length}totalItemsCount(){return this.totalCount()}pageSize(){const e=this._dataSource;return arguments.length||e.paginate()?e.pageSize.apply(e,arguments):0}pageCount(){const e=this.totalItemsCount()-this._totalCountCorrection,t=this.pageSize();return t&&e>0?Math.max(1,Math.ceil(e/t)):1}hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0}loadFromStore(e,t){const i=this._dataSource,n=new l.cY;if(i)return t=t||i.store(),t.load(e).done((e,t)=>{e&&!Array.isArray(e)&&Array.isArray(e.data)&&(t=e,e=e.data),n.resolve(e,t)}).fail(n.reject),n}isCustomLoading(){return!!this._isCustomLoading}load(e){const t=this,i=t._dataSource,n=new l.cY;if(e){const o=i.store(),s=i.loadOptions(),r={storeLoadOptions:(0,a.X)({},e,{langParams:null===s||void 0===s?void 0:s.langParams}),isCustomLoading:!0};return(0,d.__)(o._customLoadOptions()||[],(e,t)=>{t in r.storeLoadOptions||(r.storeLoadOptions[t]=s[t])}),this._isLoadingAll=e.isLoadingAll,t._scheduleCustomLoadCallbacks(n),i._scheduleLoadCallbacks(n),t._handleCustomizeStoreLoadOptions(r),_(()=>{if(!i.store())return n.reject("canceled");(0,l.z7)(r.data||t.loadFromStore(r.storeLoadOptions)).done((i,s)=>{r.data=i,r.extra=s||{},t._handleDataLoaded(r),e.requireTotalCount&&void 0===r.extra.totalCount&&(r.extra.totalCount=o.totalCount(r.storeLoadOptions)),(0,l.z7)(r.data,r.extra.totalCount).done((e,t)=>{r.extra.totalCount=t,n.resolve(e,r.extra)}).fail(n.reject)}).fail(n.reject)},t.option("loadingTimeout")),n.fail(function(){t._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return i.load()}reload(e){return e?this._dataSource.reload():this._dataSource.load()}getCachedStoreData(){return this._cachedStoreData}isLoaded(){}pageIndex(e){}}},68260:function(e,t,i){i.d(t,{a:function(){return T}});i(69375),i(82438),i(57327);var n=i(66703),o=i(50172),s=i(10391),r=i(93821),l=i(82009),a=i(91125),d=i(20338),u=(i(12266),i(74786),i(63027)),c=i(743),h=i(85563),p=i(44956);function g(e){const t=function(e,t){return t?`${t}/${e}`:e},i=function(e,n){let o=[];return e.forEach(e=>{if(e.items){const s=i(e.items,t(e.text,n));o=o.concat(s)}e.selected&&o.push(t(e.text,n))}),o},o=e&&e.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(e,t,i){const n=[],o=e.length-1;return e&&e.forEach((e,s)=>{if((0,l.G3)(e)||(0,l.IZ)(e)){const t=(0,l.zk)(e,i,[],"headerFilter");n.push(t)}else{const o=(0,l.zk)([t.dataField,"=",e],i,[],"headerFilter");n.push(o)}s!==o&&n.push("or")}),1===n.length?n[0]:n},editorTemplate(t,i){const n=(0,h.A)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(i),s=(0,p.X)(!0,{},e.columnOption(t.field.dataField));return(0,l.rx)(n,t.text&&t.text.split("|")),s.filterType="include",s.filterValues=t.value?t.value.slice():[],o.showHeaderFilterMenuBase({columnElement:n,column:s,apply(){var e;e=this.filterValues,t.setValue(e),o.hideHeaderFilterMenu(),t.closeEditor()},onHidden(){t.closeEditor()},isFilterBuilder:!0}),i},customizeText:function(t,s){s=s||{};const{value:l}=t;let a=e.columnOption(t.field.dataField);const d=a&&a.headerFilter,u=a&&a.lookup,h=s.values||[l];if(d&&d.dataSource||u&&u.dataSource){const e=new n.cY,l=s.items||new n.cY;if(!s.items){a=(0,p.X)({},a,{filterType:"include",filterValues:h});const e=o.getDataSource(a);e.paginate=!1;const i=new c.q(e),n=i.store().key();if(n){const{values:e}=s;if(e&&e.length>1){const t=e.reduce((e,t)=>(e.length&&e.push("or"),e.push([n,"=",t]),e),[]);i.filter(t)}else i.filter([n,"=",t.value])}else t.field.calculateDisplayValue&&r.A.log("W1017");s.items=l,i.load().done(l.resolve)}return l.done(n=>{const o=h.indexOf(t.value);e.resolve(i(n,null)[o])}),e}const g=o.getHeaderItemText(l,a,0,e.option("headerFilter"));return g}}}function m(e){return(0,p.X)(g(e),{name:"anyof",icon:"selectall",caption:u.A.format("dxFilterBuilder-filterOperationAnyOf")})}function _(e){const t=g(e);return(0,p.X)({},t,{calculateFilterExpression(e,i,n){const o=t.calculateFilterExpression(e,i,n);return o&&0!==o.length?"!"===o[0]?o:["!",o]:null},name:"noneof",icon:"unselectall",caption:u.A.format("dxFilterBuilder-filterOperationNoneOf")})}const C=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"];function f(e){return e.name||e.dataField}function v(e){e.forEach(e=>{const t=f(e);if(!(0,o.O9)(t)&&e.allowFiltering)throw new r.A.Error("E1049",e.caption)})}const x=function(){return{filterType:"include",filterValues:void 0}},w=function(e){const t=e.filterValues||[];return!s.A.getGroupInterval(e)&&!(e.headerFilter&&e.headerFilter.dataSource)||1===t.length&&null===t[0]},y=function(e,t){if(!e)return x();let i;const n=e[1],o=e[2],s=Array.isArray(o);if(!s&&!w(t))return x();switch(n){case"anyof":case"=":i="include";break;case"noneof":case"<>":i="exclude";break;default:return x()}return{filterType:i,filterValues:s?o:[o]}},b=function(e){const t=e.filterValue;if((0,o.O9)(t)){const t=e.selectedFilterOperation||e.defaultFilterOperation||(0,l.PZ)(e),i=[f(e),t,e.filterValue];return i}return null},I=function(e){let t,i;const{filterValues:n}=e;return n?(1===n.length&&w(e)&&!Array.isArray(n[0])?(t="exclude"===e.filterType?"<>":"=",i=n[0]):(t="exclude"===e.filterType?"noneof":"anyof",i=n),[f(e),t,i]):null},S=function(e,t,i){const n=y(i,t);e.columnOption(f(t),n)},A=function(e,t,i){let n,s=null===i||void 0===i?void 0:i[1];const r=null===i||void 0===i?void 0:i[2],l=t.filterOperations||t.defaultFilterOperations,a=!l||l.indexOf(s)>=0,d=s===t.defaultFilterOperation,u=C.includes(s),c=null!==r&&""!==r;(a||d)&&u&&c?(d&&!(0,o.O9)(t.selectedFilterOperation)&&(s=t.selectedFilterOperation),n={filterValue:r,selectedFilterOperation:s}):n={filterValue:void 0,selectedFilterOperation:void 0},e.columnOption(f(t),n)};class E extends a.Ay.Controller{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._dataController.isFilterSyncActive()&&(this._columnsController.isAllDataTypesDefined()?this._initSync():this._dataController.dataSourceChanged.add(()=>this._initSync()))}publicMethods(){return["getCustomFilterOperations"]}syncFilterValue(){const e=this,t=this._columnsController.getFilteringColumns();this._skipSyncColumnOptions=!0,t.forEach(t=>{const i=(0,l.fM)(e.option("filterValue"),f(t));if(1===i.length){const e=i[0];S(this._columnsController,t,e),A(this._columnsController,t,e)}else(0,o.O9)(t.filterValues)&&S(this._columnsController,t,null),(0,o.O9)(t.filterValue)&&A(this._columnsController,t,null)}),this._skipSyncColumnOptions=!1}_initSync(){const e=this._columnsController.getColumns(),t=this._dataController.pageIndex();if(v(e),!this.option("filterValue")){const e=this._columnsController.getFilteringColumns(),t=this.getFilterValueFromColumns(e);this._silentOption("filterValue",t)}this.syncFilterValue(),this._dataController.pageIndex(t)}_getSyncFilterRow(e,t){const i=b(t);return(0,o.O9)(i)?(0,l.nJ)(e,i):(0,l.HO)(e,f(t))}_getSyncHeaderFilter(e,t){const i=I(t);return i?(0,l.nJ)(e,i):(0,l.HO)(e,f(t))}getFilterValueFromColumns(e){if(!this._dataController.isFilterSyncActive())return null;const t=["and"];return e&&e.forEach(e=>{const i=I(e),n=b(e);i&&(0,l.B5)(i,t),n&&(0,l.B5)(n,t)}),(0,l.SK)(t)}syncFilterRow(e,t){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),e))}syncHeaderFilter(e){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),e))}getCustomFilterOperations(){const e=this.option("filterBuilder.customOperations")??[];return[m(this.component),_(this.component)].concat(e)}}const R=e=>class extends e{optionChanged(e){switch(e.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this._filterSyncController.syncFilterValue(),e.handled=!0;break;case"filterSyncEnabled":e.handled=!0;break;case"columns":if(this.isFilterSyncActive()){const t=this._columnsController.getColumnByPath(e.fullName);if(t&&!this._filterSyncController._skipSyncColumnOptions){const i=this._parseColumnPropertyName(e.fullName);this._filterSyncController._skipSyncColumnOptions=!0,"filterType"===i?"exclude"!==e.value&&"exclude"!==e.previousValue||this._filterSyncController.syncHeaderFilter(t):"filterValues"===i?this._filterSyncController.syncHeaderFilter(t):["filterValue","selectedFilterOperation"].includes(i)&&this._filterSyncController.syncFilterRow(t,t.filterValue),this._filterSyncController._skipSyncColumnOptions=!1}}super.optionChanged(e);break;default:super.optionChanged(e)}}isFilterSyncActive(){const e=this.option("filterSyncEnabled");return"auto"===e?this.option("filterPanel.visible"):e}skipCalculateColumnFilters(){return((0,o.O9)(this.option("filterValue"))||this._filterSyncController._skipSyncColumnOptions)&&this.isFilterSyncActive()}_calculateAdditionalFilter(){const e=this._columnsController.getFilteringColumns();if(null===e||void 0===e||!e.length||!1===this.option("filterPanel.filterEnabled"))return super._calculateAdditionalFilter();const t=[super._calculateAdditionalFilter()];let i=this.option("filterValue");if(this.isFilterSyncActive()){const e=this._headerFilterController.getCurrentColumn(),t=this._applyFilterController.getCurrentColumnForFiltering(),n=e||t,s=e||(0,o.O9)(null===t||void 0===t?void 0:t.filterValue);s&&i&&(i=(0,l.HO)(i,f(n)))}const n=this._filterSyncController.getCustomFilterOperations(),s=(0,l.zk)(i,e,n,"filterBuilder");return s&&t.push(s),d.A.combineFilters(t)}_parseColumnPropertyName(e){const t=e.match(/.*\.(.*)/);return t?t[1]:null}clearFilter(e){this.component.beginUpdate(),arguments.length>0?("filterValue"===e&&this.option("filterValue",null),super.clearFilter(e)):(this.option("filterValue",null),super.clearFilter()),this.component.endUpdate()}_applyFilter(){return this._filterSyncController._skipSyncColumnOptions?(new n.cY).resolve():super._applyFilter.apply(this,arguments)}},O=e=>class extends e{optionChanged(e){"filterValue"===e.name?this._updateHeaderFilterIndicators():super.optionChanged(e)}_isHeaderFilterEmpty(e){return this._dataController.isFilterSyncActive()?!(0,l.BF)(this.option("filterValue"),f(e)):super._isHeaderFilterEmpty(e)}_needUpdateFilterIndicators(){return!this._dataController.isFilterSyncActive()}},T={defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:E},extenders:{controllers:{data:R},views:{columnHeadersView:O}}}},68350:function(e,t,i){i.d(t,{A:function(){return j}});i(69375),i(82438),i(12266),i(99819),i(57327);var n=i(59981),o=i(24906),s=i(69357),r=i(74567),l=i(63027),a=i(47759),d=i(85563),u=i(39889),c=i(66703),h=i(29518),p=i(44956),g=i(89214),m=i(63825),_=i(50172),C=i(94680),f=i(69274),v=i(95506),x=i(91125),w=i(20338);const y=["ai"];function b(e){const t=((null===e||void 0===e?void 0:e.groupIndex)??-1)>=0;return!0===e.visible&&(!(0,_.O9)(e.type)||y.includes(e.type))&&!e.fixed&&!t}function I(e){return e.filter(b)}const S="rowsView",A="footerView",E=["columnHeadersView",S,A],R="dxDataGridAdaptivity",O="dxDataGrid-ariaAdaptiveExpand",T="dxDataGrid-ariaAdaptiveCollapse",V="scrolling.legacyMode";function F(e,t){return e._columnsController.getColumnId(t)}function P(e){return e.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}function D(e,t){let i;const s=(0,d.A)(e),l=t.component.getController("adaptiveColumns");"data"===t.rowType?(i=(0,d.A)("<span>").addClass(l.addWidgetPrefix("adaptive-more")),o.A.on(i,(0,r.b4)(n.U,R),l.createAction(()=>{l.toggleExpandAdaptiveDetailRow(t.key)})),i.appendTo(s)):w.A.setEmptyText(s)}function k(e){var t;const i=null===(t=e.data)||void 0===t?void 0:t.$nextCell;o.A.off(i,"focus",k),o.A.trigger(i,"dxclick")}class B extends x.Ay.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._rowsView=this.getView("rowsView"),this._columnsController.addCommandColumn({type:"adaptive",command:"adaptive",visible:!0,adaptiveHidden:!0,cssClass:"dx-command-adaptive",alignment:"center",width:"auto",cellTemplate:D,fixedPosition:"right"}),this._columnsController.columnsChanged.add(()=>{const e=!!this.updateHidingQueue(this._columnsController.getColumns()).length;this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),this._hidingColumnsQueue=[],this._hiddenColumns=[],this.createAction("onAdaptiveDetailRowPreparing"),super.init()}optionChanged(e){"columnHidingEnabled"===e.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e.value),super.optionChanged(e)}publicMethods(){return["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"]}_getValueFromCellOptions(e,t){return t.row.values[e]}_isRowEditMode(){const e=this._getEditMode();return"row"===e}_isItemModified(e,t){const i=this._columnsController.getVisibleIndex(e.column.index),n=this._dataController.getRowIndexByKey(t.key),o=this._dataController.items()[n+1];return o&&o.modifiedValues&&(0,_.O9)(o.modifiedValues[i])}_renderFormViewTemplate(e,t,i){const s=this,{column:r}=e,l=s.createAction(()=>{s._editingController.isEditing()&&o.A.trigger(i,n.U)}),a=t.row.data,d=s._columnsController.getVisibleIndex(r.index),u=r.type===v.ML?this._getValueFromCellOptions(d,t):r.calculateCellValue(a),c=w.A.getDisplayValue(r,u,a,t.rowType),g=w.A.formatValue(c,r),m=this._editingController.isCellOrBatchEditMode(),C=s._rowsView;if(r.allowEditing&&this._keyboardNavigationController.isKeyboardEnabled()&&(i.attr("tabIndex",s.option("tabIndex")),m&&(o.A.off(i,"focus",l),o.A.on(i,"focus",l))),r.cellTemplate){const e=(0,p.X)({},t,{value:u,displayValue:c,text:g,column:r});C.renderTemplate(i,r.cellTemplate,e,(0,h.A1)(i)).done(()=>{C._cellPrepared(i,t)})}else{const n=i.get(0);r.encodeHtml?n.textContent=g:n.innerHTML=g,i.addClass("dx-adaptive-item-text"),(0,_.O9)(g)&&""!==g||i.html("&nbsp;"),s._isRowEditMode()||s._isItemModified(e,t)&&i.addClass("dx-item-modified"),C._cellPrepared(i,t)}}_getTemplate(e,t,i){const n=this,{column:r}=e,l=this._editingController;return function(i,a){const u=(0,d.A)(a),c=n._columnsController.getVisibleIndex(r.index),h=(0,p.X)({},t),g=function(){const o=n._isItemEdited(e);h.value=n._getValueFromCellOptions(c,t),o||r.showEditorAlways?l.renderFormEditorTemplate(h,e,i,u,!o):(h.column=r,h.columnIndex=c,n._renderFormViewTemplate(e,h,u))};if(g(),h.watch){const i=h.watch(()=>({isItemEdited:n._isItemEdited(e),value:n._getValueFromCellOptions(c,t)}),()=>{u.contents().remove(),u.removeClass("dx-adaptive-item-text"),g()});o.A.on(u,s.N,i)}}}_isVisibleColumnsValid(e){return!(e<2)&&!(e.length-function(){let t=0;for(let i=0;i<e.length;i++){const n=e[i];n.command&&t++}return t}()<=1)}_calculatePercentWidths(e,t){const i=this;let n=0;return t.forEach((t,o)=>{"adaptiveHidden"!==e[o]&&(n+=i._getItemPercentWidth(t))}),n}_isPercentWidth(e){return(0,_.Kg)(e)&&e.endsWith("%")}_isColumnHidden(e){return this._hiddenColumns.filter(t=>t.index===e.index).length>0}_getAverageColumnsWidth(e,t,i){const n=this;let o=0,s=0;return t.forEach(r=>{if(!n._isColumnHidden(r)){const{width:l}=r;(0,_.O9)(l)&&!isNaN(parseFloat(l))?o+=n._isPercentWidth(l)?n._calculatePercentWidth({visibleIndex:r.visibleIndex,columnsCount:t.length,columnsCanFit:i,bestFitWidth:r.bestFitWidth,columnWidth:l,containerWidth:e}):parseFloat(l):s++}}),(e-o)/s}_calculateColumnWidth(e,t,i,n){const o=F(this,e),s=this._columnsController.columnOption(o,"width"),r=this._columnsController.columnOption(o,"bestFitWidth"),l=i.length;let a;if(s&&"auto"!==s){if(!this._isPercentWidth(s))return parseFloat(s);a=this._calculatePercentWidth({visibleIndex:e.visibleIndex,columnsCount:l,columnsCanFit:n,bestFitWidth:r,columnWidth:s,containerWidth:t})}else{const o=this.option("columnAutoWidth");a=o||e.command?r:this._getAverageColumnsWidth(t,i,n)}return a}_calculatePercentWidth(e){const t=e.visibleIndex<e.columnsCount-1&&e.columnsCanFit,i=e.containerWidth*parseFloat(e.columnWidth)/100,n=e.columnsCanFit&&i<e.bestFitWidth?e.bestFitWidth:i;return t?e.containerWidth*parseFloat(e.columnWidth)/100:n}_getNotTruncatedColumnWidth(e,t,i,n){const o=F(this,e),s=this._columnsController.columnOption(o,"width"),r=this._columnsController.columnOption(o,"bestFitWidth");if(s&&"auto"!==s&&!this._isPercentWidth(s))return parseFloat(s);const l=this._calculateColumnWidth(e,t,i,n);return l<r?null:l}_getItemPercentWidth(e){let t=0;return e.width&&this._isPercentWidth(e.width)&&(t=parseFloat(e.width)),t}_getCommandColumnsWidth(){const e=this,t=e._columnsController.getVisibleColumns();let i=0;return(0,g.__)(t,(t,n)=>{(n.index<0||n.command)&&(i+=e._columnsController.columnOption(F(e,n),"bestFitWidth")||0)}),i}_isItemEdited(e){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){const t=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,i=this._columnsController.getVisibleIndex(e.column.index);return this._editingController.isEditCell(t,i)}{const e=this.option("editing.editRowKey");if((0,u.RL)(e,this._dataController.adaptiveExpandedKey()))return!0}}_getFormItemsByHiddenColumns(e){const t=[];return(0,g.__)(e,(e,i)=>{t.push({column:i,name:i.name,dataField:i.dataField,visibleIndex:i.visibleIndex})}),t}_getAdaptiveColumnVisibleIndex(e){for(let t=0;t<e.length;t++){const i=e[t];if("adaptive"===i.command)return t}}_hideAdaptiveColumn(e,t){const i=this._getAdaptiveColumnVisibleIndex(t);(0,_.O9)(i)&&(e[i]="adaptiveHidden",this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:i}))}_showHiddenCellsInView(e){let{$cells:t,isCommandColumn:i}=e,n=this.addWidgetPrefix("hidden-column");i?(n="dx-command-adaptive-hidden",t.attr({tabIndex:0,"aria-hidden":null}).removeClass(n)):t.removeClass(n)}_showHiddenColumns(){for(let e=0;e<E.length;e++){const t=this.getView(E[e]);if(t&&t.isVisible()&&t.element()){const e=t.name,i=t.element().find(".dx-command-adaptive-hidden");this._showHiddenCellsInView({viewName:e,$cells:i,isCommandColumn:!0});const n=t.element().find(`.${this.addWidgetPrefix("hidden-column")}`);this._showHiddenCellsInView({viewName:e,$cells:n})}}}_toggleGroupAdaptiveRowVisibility(e){const t=this.hasHiddenColumns()||this.getHidingColumnsQueue().length>0;if(!t)return;const i=this.getView(S),n=this._dataController.items();n&&0!==n.length&&n.forEach((t,n)=>{if("detailAdaptive"===t.rowType){const t=(0,d.A)(i.getRowElement(n));t.css("display",e?"none":"")}})}_isCellValid(e){return e&&e.length&&!e.hasClass("dx-master-detail-cell")&&!e.hasClass("dx-group-cell")}_hideVisibleColumn(e){let{isCommandColumn:t,visibleIndex:i}=e;const n=this;E.forEach(e=>{const o=n.getView(e);o&&n._hideVisibleColumnInView({view:o,isCommandColumn:t,visibleIndex:i})})}_hideVisibleColumnInView(e){let{view:t,isCommandColumn:i,visibleIndex:n}=e;const o=t.name;let s;const r=this._columnsController.getVisibleColumns()[n],l=this._editingController&&this._editingController.getEditFormRowIndex();if(t&&t.isVisible()&&r){const e=t.getRowsCount(),a=t._getRowElements();for(let t=0;t<e;t++){const e=t===l&&o===S&&"popup"!==this.option("editing.mode");if(!e){const e="columnHeadersView"===o?this._columnsController.getVisibleIndex(r.index,t):n;if(e>=0){const n=a.eq(t);s=this._findCellElementInRow(n,e),this._isCellValid(s)&&this._hideVisibleCellInView({viewName:o,isCommandColumn:i,$cell:s})}}}}}_findCellElementInRow(e,t){const i=e.children();let n=t,o=!1;if(e.hasClass("dx-group-row")){const i=e.find(".dx-group-cell"),s=i.attr("colspan");if(i.length&&(0,_.O9)(s)){const e=parseInt(s),r=i.index()+e-1;t>r?n=t-e+1:o=!0}}const s=o?void 0:i.eq(n);return s}_hideVisibleCellInView(e){let{$cell:t,isCommandColumn:i}=e;const n=i?"dx-command-adaptive-hidden":this.addWidgetPrefix("hidden-column");t.attr({tabIndex:-1,"aria-hidden":!0}).addClass(n)}_getEditMode(){return this._editingController.getEditMode()}isFormOrPopupEditMode(){const e=this._getEditMode();return"form"===e||"popup"===e}hideRedundantColumns(e,t,i){const n=this;if(this._hiddenColumns=[],n._isVisibleColumnsValid(t)&&i.length){let o=0;const s=n.component.$element();let r=(0,m.RG)(s)-n._getCommandColumnsWidth();const l=function(){return t.filter(e=>!e.command&&0===this._hiddenColumns.filter(t=>t.index===e.index).length)}.bind(this);let a=l();const d=a.length;let u,c,h;do{h=!1,o=0;const d=n._calculatePercentWidths(e,t),p=d<100&&0!==d;for(u=0;u<t.length;u++){const i=t[u];let s=n._getNotTruncatedColumnWidth(i,r,a,p);const l=F(n,i),d=n._columnsController.columnOption(l,"width"),g=n._columnsController.columnOption(l,"minWidth"),m=n._columnsController.columnOption(l,"bestFitWidth");if("adaptiveHidden"!==e[u]){if(!s&&!i.command&&!i.fixed){h=!0;break}d&&"auto"!==d||(s=Math.max(m||0,g||0)),("adaptive"!==i.command||c)&&(o+=s)}else c=!0}if(h=h||o>(0,m.RG)(s),h){const t=i.pop(),o=n._columnsController.getVisibleIndex(t.index);r+=n._calculateColumnWidth(t,r,a,p),n._hideVisibleColumn({visibleIndex:o}),e[o]="adaptiveHidden",this._hiddenColumns.push(t),a=l()}}while(h&&a.length>1&&i.length);d===a.length&&n._hideAdaptiveColumn(e,t)}else n._hideAdaptiveColumn(e,t)}getAdaptiveDetailItems(){return this._$itemContents}getItemContentByColumnIndex(e){let t;for(let i=0;i<this._$itemContents.length;i++){t=this._$itemContents.eq(i);const n=t.data("dx-form-item");if(n&&n.column&&this._columnsController.getVisibleIndex(n.column.index)===e)return t}}toggleExpandAdaptiveDetailRow(e,t){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this._dataController.toggleExpandAdaptiveDetailRow(e,t)}createFormByHiddenColumns(e,t){const i=this,n=(0,d.A)(e),o={items:i._getFormItemsByHiddenColumns(i._hiddenColumns),formID:`dx-${new a.A}`},s=(0,f.gx)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:o}),i._$itemContents=null,i._form=i._createComponent((0,d.A)("<div>").appendTo(n),C.A,(0,p.X)(s,o,{customizeItem(e){const n=e.column||i._columnsController.columnOption(e.name||e.dataField);n&&(e.label=e.label||{},e.label.text=e.label.text||n.caption,e.column=n,e.template=i._getTemplate(e,t,i.updateForm.bind(i))),o.customizeItem&&o.customizeItem.call(this,e)},onContentReady(e){o.onContentReady&&o.onContentReady.call(this,e),i._$itemContents=n.find(".dx-field-item-content")}}))}hasAdaptiveDetailRowExpanded(){return(0,_.O9)(this._dataController.adaptiveExpandedKey())}updateForm(e){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,_.O9)(this._form._contentReadyAction)&&(e&&e.length?this._form.option("items",this._getFormItemsByHiddenColumns(e)):this._form.repaint())}updateHidingQueue(e){const t=this,i=I(e);let n,o;if(t._hidingColumnsQueue=[],t.option("allowColumnResizing")&&"widget"===t.option("columnResizingMode"))return t._hidingColumnsQueue;for(o=0;o<i.length;o++){const e=i[o];(0,_.O9)(e.hidingPriority)&&e.hidingPriority>=0&&(n=!0,t._hidingColumnsQueue[e.hidingPriority]=e)}if(n)t._hidingColumnsQueue.reverse();else if(t.option("columnHidingEnabled"))for(o=0;o<i.length;o++){const e=t._columnsController.getVisibleIndex(i[o].index);t._hidingColumnsQueue[e]=i[o]}return t._hidingColumnsQueue=t._hidingColumnsQueue.filter(Object),t._hidingColumnsQueue}getHiddenColumns(){return this._hiddenColumns}hasHiddenColumns(){return this._hiddenColumns.length>0}getHidingColumnsQueue(){return this._hidingColumnsQueue}isAdaptiveDetailRowExpanded(e){const t=this._dataController;return t.adaptiveExpandedKey()&&(0,u.RL)(t.adaptiveExpandedKey(),e)}expandAdaptiveDetailRow(e){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(e)}collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()}updateCommandAdaptiveAriaLabel(e,t){const i=this._dataController.getRowIndexByKey(e);if(-1===i)return;const n=(0,d.A)(this.component.getRowElement(i));this.setCommandAdaptiveAriaLabel(n,t)}setCommandAdaptiveAriaLabel(e,t){const i=e.find(".dx-command-adaptive");i.attr("aria-label",l.A.format(t))}}const H=e=>class extends e{_isCellValid(e,t){return super._isCellValid(e,t)&&!e.hasClass(this.addWidgetPrefix("hidden-column"))&&!e.hasClass("dx-command-adaptive-hidden")}_processNextCellInMasterDetail(e,t){super._processNextCellInMasterDetail(e,t);const i=this._editingController.isCellOrBatchEditMode(),n=this._editingController.isEditing();n&&e&&i&&!this._isInsideEditForm(e)&&(o.A.off(e,"focus",k),o.A.on(e,"focus",{$nextCell:e},k),o.A.trigger(t,"focus"))}isFocusableColumn(e){return super.isFocusableColumn(e)&&"adaptiveHidden"!==e.visibleWidth}_isCellElement(e){return super._isCellElement(e)||e.hasClass("dx-adaptive-item-text")}},z=e=>class extends e{_getCellTemplate(e){const t=this,{column:i}=e;return"detailAdaptive"===e.rowType&&"detail"===i.command?function(e,i){t._adaptiveColumnsController.createFormByHiddenColumns((0,d.A)(e),i)}:super._getCellTemplate(e)}_createRow(e){const t=super._createRow.apply(this,arguments);return e&&"detailAdaptive"===e.rowType&&e.key===this._dataController.adaptiveExpandedKey()&&t.addClass("dx-adaptive-detail-row"),t}_renderCells(e,t){super._renderCells(e,t);const i=this._adaptiveColumnsController,n=i.getHidingColumnsQueue().length,o=i.getHiddenColumns().length;n&&!o&&P(e).last().addClass("dx-last-data-cell"),"data"===t.row.rowType&&i.setCommandAdaptiveAriaLabel(e,O)}_getColumnIndexByElementCore(e){const t=e.closest(".dx-field-item-content");if(t.length&&t.closest(this.component.$element()).length){const e=t.length?t.first().data("dx-form-item"):null;return e&&e.column&&this._columnsController.getVisibleIndex(e.column.index)}return super._getColumnIndexByElementCore(e)}_cellPrepared(e,t){super._cellPrepared.apply(this,arguments),"detailAdaptive"!==t.row.rowType&&"adaptiveHidden"===t.column.visibleWidth&&e.addClass(this.addWidgetPrefix("hidden-column"))}getCell(e,t){const i=this._dataController.items()[null===e||void 0===e?void 0:e.rowIndex];if("detailAdaptive"===(null===i||void 0===i?void 0:i.rowType)){const i=this._adaptiveColumnsController.getAdaptiveDetailItems();return super.getCell(e,t,i)}return super.getCell.apply(this,arguments)}_getCellElement(e,t){const i=this._dataController.items()[e];return i&&"detailAdaptive"===i.rowType?this._adaptiveColumnsController.getItemContentByColumnIndex(t):super._getCellElement.apply(this,arguments)}getContextMenuItems(e){var t;if(e.row&&"detailAdaptive"===e.row.rowType){const t=this._columnHeadersView,i=(0,d.A)(e.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return e.column=i?i.column:e.column,t.getContextMenuItems&&t.getContextMenuItems(e)}return null===(t=super.getContextMenuItems)||void 0===t?void 0:t.call(this,e)}isClickableElement(e){var t;const i=(null===(t=super.isClickableElement)||void 0===t?void 0:t.call(this,e))??!1;return i||!!e.closest(".dx-command-adaptive").length}},M=e=>class extends e{_updateColumnWidth(e,t){super._updateColumnWidth(e,"adaptiveHidden"===e.visibleWidth?e.bestFitWidth:t)}},N=e=>class extends e{_pointCreated(e,t,i){const n=super._pointCreated(e,t,i),o=t[e.columnIndex]||{},s=this._getNextColumnIndex(e.columnIndex),r=t[s]||{},l=s!==e.columnIndex+1&&r.command,a="adaptiveHidden"===o.visibleWidth||l;return n||a}_getNextColumnIndex(e){const t=this._columnsController.getVisibleColumns();let i=super._getNextColumnIndex(e);while(t[i]&&"adaptiveHidden"===t[i].visibleWidth)i++;return i}},L=e=>class extends e{_pointCreated(e){let{point:t,columns:i,location:n,sourceColumn:o,cells:s}=e;const r=super._pointCreated({point:t,columns:i,location:n,sourceColumn:o,cells:s}),l=i[t.columnIndex-1]||{},a="adaptiveHidden"===l.visibleWidth;return r||a}},W=e=>class extends e{_isRowEditMode(){return"row"===this.getEditMode()}_getFormEditItemTemplate(e,t){return"row"!==this.getEditMode()&&"detailAdaptive"===e.rowType?(e.columnIndex=this._columnsController.getVisibleIndex(t.index),this.getColumnTemplate(e)):super._getFormEditItemTemplate(e,t)}_closeEditItem(e){const t=e.closest(".dx-field-item-content"),i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,n=t.length?t.first().data("dx-form-item"):null,o=n&&n.column&&this._columnsController.getVisibleIndex(n.column.index);this.isEditCell(i,o)||super._closeEditItem(e)}_beforeUpdateItems(e,t){if(!this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()){const i=this._dataController.items(),n=i[t],o=w.A.getIndexByKey(this._dataController.adaptiveExpandedKey(),i);this._isForceRowAdaptiveExpand=!this._adaptiveColumnsController.hasAdaptiveDetailRowExpanded(),o>=0&&e.push(o+1),e.push(t+1),this._dataController.adaptiveExpandedKey(n.key)}}_afterInsertRow(e){super._afterInsertRow.apply(this,arguments),this._adaptiveColumnsController.hasHiddenColumns()&&(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(e,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)}_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveColumnsController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)}_cancelEditAdaptiveDetailRow(){this._adaptiveColumnsController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()}_afterSaveEditData(){super._afterSaveEditData.apply(this,arguments);const e=new c.cY;return this._isRowEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()?(0,c.z7)(this._validatingController.validate(!0)).done(t=>{t&&this._cancelEditAdaptiveDetailRow(),e.resolve()}):e.resolve(),e.promise()}_beforeCancelEditData(){super._beforeCancelEditData(),this._cancelEditAdaptiveDetailRow()}_getRowIndicesForCascadeUpdating(e){const t=super._getRowIndicesForCascadeUpdating.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e.key)&&t.push("detailAdaptive"===e.rowType?e.rowIndex-1:e.rowIndex+1),t}_beforeCloseEditCellInBatchMode(e){const t=this._dataController._adaptiveExpandedKey;if(t){const i=w.A.getIndexByKey(t,this._dataController.items());i>-1&&e.unshift(i)}}editRow(e){return this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.editRow(e)}deleteRow(e){const t=this._dataController.getKeyByRowIndex(e);"batch"===this.getEditMode()&&this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(t)&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.deleteRow(e)}},K=e=>class extends e{init(){super.init(),this._adaptiveExpandedKey=void 0}_processItems(e,t){const{changeType:i}=t;if(e=super._processItems.apply(this,arguments),"loadingAll"===i||!(0,_.O9)(this._adaptiveExpandedKey))return e;const n=w.A.getIndexByKey(this._adaptiveExpandedKey,e),o=!1===this.option(V);if(n>=0){const t=e[n];e.splice(n+1,0,{visible:!0,rowType:"detailAdaptive",key:t.key,data:t.data,node:t.node,modifiedValues:t.modifiedValues,isNewRow:t.isNewRow,values:t.values})}else"refresh"!==i||o&&t.repaintChangesOnly||(this._adaptiveExpandedKey=void 0);return e}_getRowIndicesForExpand(e){const t=super._getRowIndicesForExpand.apply(this,arguments);if(this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e)){const e=t[t.length-1];t.push(e+1)}return t}adaptiveExpandedKey(e){if(!(0,_.O9)(e))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=e}toggleExpandAdaptiveDetailRow(e,t){let i=w.A.getIndexByKey(this._adaptiveExpandedKey,this._items),n=w.A.getIndexByKey(e,this._items);i>=0&&i===n&&!t&&(e=void 0,n=-1);const o=this._adaptiveExpandedKey;this._adaptiveExpandedKey=e,i>=0&&i++,n>=0&&n++;const s=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[i-s,n-s]}),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(e,T),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(o,O)}},$=e=>class extends e{_needHideBorder(e){return super._needHideBorder(e)||(null===e||void 0===e?void 0:e.hasClass("dx-field-item-content"))&&(null===e||void 0===e?void 0:e.find(".dx-checkbox").length)}_getFocusCellSelector(){return`${super._getFocusCellSelector()}, .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content`}_getRevertTooltipsSelector(){return`${super._getRevertTooltipsSelector()}, .dx-field-item-content .${this.addWidgetPrefix("revert-tooltip")}`}},G=e=>class extends e{_isColumnVisible(e){return super._isColumnVisible(e)&&!e.adaptiveHidden}getVisibleDataColumnsByBandColumn(e){return super.getVisibleDataColumnsByBandColumn(e).filter(e=>"adaptiveHidden"!==e.visibleWidth)}},q=e=>class extends e{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}_needBestFit(){return super._needBestFit()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length}_correctColumnWidths(e,t){const i=this._adaptiveColumnsController,n=i.getHiddenColumns(),o=i.updateHidingQueue(this._columnsController.getColumns());i.hideRedundantColumns(e,t,o);const s=i.getHiddenColumns();return i.hasAdaptiveDetailRowExpanded()&&n.length!==s.length&&i.updateForm(s),!s.length&&i.collapseAdaptiveDetailRow(),super._correctColumnWidths.apply(this,arguments)}_toggleBestFitMode(e){this._adaptiveColumnsController._toggleGroupAdaptiveRowVisibility(e),e&&this._adaptiveColumnsController._showHiddenColumns(),super._toggleBestFitMode(e)}_needStretch(){const e=this._adaptiveColumnsController;return super._needStretch.apply(this,arguments)||e.getHidingColumnsQueue().length||e.hasHiddenColumns()}},U=e=>class extends e{getColumnVisibleIndexCorrection(e,t,i){let n=super.getColumnVisibleIndexCorrection(e,t,i),o=this._columnsController.getVisibleColumns(t);o="next"===i?o.slice(e+1):o.slice(0,e).reverse();while("adaptiveHidden"===(null===(s=o)||void 0===s||null===(s=s.shift())||void 0===s?void 0:s.visibleWidth)){var s;n+="next"===i?1:-1}return n}getFocusableColumns(e,t){return super.getFocusableColumns(e,t).filter(e=>"adaptiveHidden"!==e.visibleWidth)}getDraggableColumns(e,t){return super.getDraggableColumns(e,t).filter(e=>"adaptiveHidden"!==e.visibleWidth)}},j={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:B},extenders:{views:{rowsView:z},controllers:{export:M,columnsResizer:N,draggingHeader:L,editing:W,resizing:q,data:K,editorFactory:$,columns:G,keyboardNavigation:H,headersKeyboardNavigation:U}}}},69287:function(e,t,i){i.d(t,{As:function(){return g},Cs:function(){return o},D5:function(){return a},Hl:function(){return m},ID:function(){return r},Is:function(){return l},JC:function(){return s},Lz:function(){return d},NA:function(){return _},Yl:function(){return c},Zu:function(){return p},bU:function(){return n},cH:function(){return h},cS:function(){return C},vK:function(){return u}});const n=["filterValues","filterType","fixed","fixedPosition"],o=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(n),s={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},r="dx-command-expand",l=Number.MAX_SAFE_INTEGER||9007199254740991,a="groupExpand",d="detailExpand",u=/columns\[(\d+)\]\.?/gi,c={visible:!0,showInColumnChooser:!0},h={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},p={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},g="group",m="columnChooser",_=["fixed","fixedPosition","type","buttons"],C=["ai"]},71765:function(e,t,i){var n=i(8362);t.A=n.A},71768:function(e,t,i){i.d(t,{WY:function(){return W}});i(69375),i(82438),i(12266),i(99819),i(57327),i(74786),i(34840),i(64727);var n=i(24906),o=i(96004),s=i(63027),r=i(84558),l=i(85563),a=i(26228),d=i(39889),u=i(66703),c=i(44956),h=i(89214),p=i(63825),g=i(70781),m=i(50172),_=i(98793),C=i(78135),f=i(35328),v=i(69274),x=i(8211),w=i(36091),y=i(93821),b=i(29018),I=i(25831),S=i(91125),A=i(20338);const E="__DX_INSERT_INDEX__",R="row",O="batch",T="cell",V=["popup","form"],F={valid:"valid",invalid:"invalid",pending:"pending"},P=function(e){return(0,m.O9)(e)&&"cancel"!==e},D=function(e,t){return void 0!==e||void 0===e&&t&&!t.isNewRow};class k extends S.Ay.Controller{constructor(){super(...arguments),this._isValidationInProgress=!1,this._disableApplyValidationResults=!1}init(){this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._columnsController=this.getController("columns"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()}initValidationState(){this._validationState=[],this._validationStateCache={}}_rowIsValidated(e){const t=this._getValidationData(null===e||void 0===e?void 0:e.key);return!!t&&!!t.validated}_getValidationData(e,t){const i=(0,d.GP)(e),n=(0,m.Gv)(i);let o;return o=n?this._validationState.filter(t=>(0,d.RL)(t.key,e))[0]:this._validationStateCache[i],!o&&t&&(o={key:e,isValid:!0},this._validationState.push(o),n||(this._validationStateCache[i]=o)),o}_getBrokenRules(e,t){let i;return i=t?t.brokenRules||t.brokenRule&&[t.brokenRule]:e.brokenRules||[],i}_rowValidating(e,t){const i=new u.cY,n=this._editingController.getChangeByKey(null===e||void 0===e?void 0:e.key),o=this._getBrokenRules(e,t),s=t?t.isValid:e.isValid,r={brokenRules:o,isValid:s,key:n.key,newData:n.data,oldData:this._editingController._getOldData(n.key),promise:null,errorText:this.getHiddenValidatorsErrorText(o)};return this.executeAction("onRowValidating",r),(0,u.z7)((0,u.Sx)(r.promise)).always(()=>{e.isValid=r.isValid,e.errorText=r.errorText,i.resolve(r)}),i.promise()}getHiddenValidatorsErrorText(e){const t=[];return(0,h.__)(e,(e,i)=>{const{column:n}=i,o=n&&void 0!==n.groupIndex&&!n.showWhenGrouped,s=n&&n.visible;i.validator.$element().parent().length||s&&!o||t.push(i.message)}),t.join(", ")}validate(e){let t=!0;const i=this._editingController,n=new u.cY,o=[],s=i.getEditMode();if(e=e||s===R,this._isValidationInProgress)return n.resolve(!1).promise();if(this._isValidationInProgress=!0,e){i.addDeferred(n);const e=i.getChanges();(0,h.__)(e,(e,i)=>{let{type:n,key:s}=i;if("remove"!==n){const e=this._getValidationData(s,!0),i=this.validateGroup(e);o.push(i),i.done(i=>{e.validated=!0,t=t&&i.isValid})}})}else if(this._currentCellValidator){const e=this.validateGroup(this._currentCellValidator._findGroup());o.push(e),e.done(e=>{t=e.isValid})}return(0,u.z7)(...o).done(()=>{this._isValidationInProgress=!1,n.resolve(t)}),n.promise()}validateGroup(e){var t;const i=new u.cY,n=e&&x.A.getGroupConfig(e);let o;return null!==n&&void 0!==n&&n.validators.length&&(this.resetRowValidationResults(e),o=x.A.validateGroup(e)),(0,u.z7)((null===(t=o)||void 0===t?void 0:t.complete)||o).done(t=>{(0,u.z7)(this._rowValidating(e,t)).done(i.resolve)}),i.promise()}isRowDataModified(e){return!(0,m.RI)(e.data)}updateValidationState(e){const t=this._editingController.getEditMode(),{key:i}=e,n=this._getValidationData(i,!0);if(V.includes(t))n.isValid=!0;else{if("insert"===e.type&&!this.isRowDataModified(e))return void(n.isValid=!0);this.setDisableApplyValidationResults(!0);const t=x.A.getGroupConfig(n);if(t){const e=x.A.validateGroup(n);(0,u.z7)(e.complete||e).done(e=>{n.isValid=e.isValid,n.brokenRules=e.brokenRules})}else n.brokenRules&&n.brokenRules.length||(n.isValid=!0);this.setDisableApplyValidationResults(!1)}}setValidator(e){this._currentCellValidator=e}renderCellPendingIndicator(e){let t=e.find(".dx-pending-indicator");if(!t.length){const i=e;t=(0,l.A)("<div>").appendTo(i).addClass("dx-pending-indicator"),this._createComponent(t,C.A),e.addClass("dx-validation-pending")}}disposeCellPendingIndicator(e){const t=e.find(".dx-pending-indicator");if(t.length){const i=C.A.getInstance(t);i&&(i.dispose(),i.$element().remove()),e.removeClass("dx-validation-pending")}}validationStatusChanged(e){const{validator:t}=e,i=t.option("validationGroup"),{column:n}=t.option("dataGetter")();this.updateCellValidationResult({rowKey:i.key,columnIndex:n.index,validationResult:e})}validatorInitialized(e){e.component.on("validating",this.validationStatusChanged.bind(this)),e.component.on("validated",this.validationStatusChanged.bind(this))}validatorDisposing(e){const t=e.component,i=t.option("validationGroup"),{column:n}=t.option("dataGetter")(),o=this.getCellValidationResult({rowKey:null===i||void 0===i?void 0:i.key,columnIndex:n.index});P(o)&&o.status===F.pending&&this.cancelCellValidationResult({change:i,columnIndex:n.index})}applyValidationResult(e,t){const{validator:i}=t,s=i.option("validationGroup"),{column:r}=i.option("dataGetter")();if(t.brokenRules&&t.brokenRules.forEach(e=>{e.columnIndex=r.index,e.column=r}),e){const i=this.getCellValidationResult({rowKey:s.key,columnIndex:r.index}),l=P(i)&&i.disabledPendingId===t.id;if(this._disableApplyValidationResults||l)return;if(t.status===F.invalid){const t=e.find(":focus");(0,b["in"])(t)||(n.A.trigger(t,"focus"),n.A.trigger(t,o.A.down))}const a=!r.editCellTemplate&&this._editorFactoryController.getEditorInstance(e);t.status===F.pending?a?a.option("validationStatus",F.pending):this.renderCellPendingIndicator(e):a?a.option("validationStatus",F.valid):this.disposeCellPendingIndicator(e),e.toggleClass(this.addWidgetPrefix("invalid"),t.status===F.invalid)}}_syncInternalEditingData(e){var t;const i=this._editingController,n=i.getChangeByKey(e.key),o=i._getOldData(e.key),s=null===(t=e.row)||void 0===t?void 0:t.oldData;n&&s&&!o&&i._addInternalData({key:e.key,oldData:s})}createValidator(e,t){const i=this._editingController,{column:n}=e;let{showEditorAlways:o}=n;if((0,m.O9)(n.command)||!n.validationRules||!Array.isArray(n.validationRules)||!n.validationRules.length)return;const s=i.getIndexByKey(e.key,i.getChanges());let a=s>-1;if(!a){if(!o){var u;const e=(null===(u=this._columnsController)||void 0===u?void 0:u.getVisibleColumns())||[];o=e.some(e=>e.showEditorAlways)}const t=(0,d.RL)(this.option("editing.editRowKey"),e.key),n=i.isCellOrBatchEditMode()&&i.allowUpdating({row:e.row});var h;if(a=t||n&&o,n&&o)i._addInternalData({key:e.key,oldData:(null===(h=e.row)||void 0===h?void 0:h.oldData)??e.data})}if(a){if(t&&!t.length)return void y.A.log("E1050");this._syncInternalEditingData(e);const o=this._getValidationData(e.key,!0),s=()=>{const t=i.getChangeByKey(null===o||void 0===o?void 0:o.key),s=n.calculateCellValue((null===t||void 0===t?void 0:t.data)||{});return void 0!==s?s:e.value},a=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix("validator"));const d=new w.A(t||(0,l.A)("<div>"),{name:n.caption,validationRules:(0,c.X)(!0,[],n.validationRules),validationGroup:o,adapter:a?null:{getValue:s,applyValidationResults:e=>{this.applyValidationResult(t,e)}},dataGetter(){const e=null===o||void 0===o?void 0:o.key,t=i.getChangeByKey(e),s=i._getOldData(e);return{data:(0,r.lj)(s,null===t||void 0===t?void 0:t.data),column:n}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(a){const t=d.option("adapter");if(t){const n=t.bypass,o=()=>e.row.isNewRow&&!this._isValidationInProgress&&!i.isCellModified(e);t.getValue=s,t.validationRequestsCallbacks=[],t.bypass=()=>n.call(t)||o()}}return d}}setDisableApplyValidationResults(e){this._disableApplyValidationResults=e}getDisableApplyValidationResults(){return this._disableApplyValidationResults}isCurrentValidatorProcessing(e){let{rowKey:t,columnIndex:i}=e;return this._currentCellValidator&&(0,d.RL)(this._currentCellValidator.option("validationGroup").key,t)&&this._currentCellValidator.option("dataGetter")().column.index===i}validateCell(e){const t={rowKey:e.option("validationGroup").key,columnIndex:e.option("dataGetter")().column.index,validationResult:null};let i=this.getCellValidationResult(t);const n=P(i),o=e.option("adapter");if(n){const t=o.getValue();(0,d.RL)(t,i.value)||(i=e.validate())}else i=e.validate();const s=new u.cY;return n&&i.status===F.pending&&(this.updateCellValidationResult(t),o.applyValidationResults(i)),(0,u.z7)(i.complete||i).done(e=>{n&&o.applyValidationResults(e),s.resolve(e)}),s.promise()}updateCellValidationResult(e){let{rowKey:t,columnIndex:i,validationResult:n}=e;const o=this._getValidationData(t);if(!o)return;let s;if(o.validationResults||(o.validationResults={}),n){if(s=(0,c.X)({},n),o.validationResults[i]=s,n.status===F.pending&&(this._editingController.getEditMode()===T&&(s.deferred=new u.cY,s.complete.always(()=>{s.deferred.resolve()}),this._editingController.addDeferred(s.deferred)),this._disableApplyValidationResults))return void(s.disabledPendingId=n.id)}else s=o.validationResults[i];s&&s.disabledPendingId&&delete s.disabledPendingId}getCellValidationResult(e){var t;let{rowKey:i,columnIndex:n}=e;const o=this._getValidationData(i,!0);return null===o||void 0===o||null===(t=o.validationResults)||void 0===t?void 0:t[n]}removeCellValidationResult(e){let{change:t,columnIndex:i}=e;const n=this._getValidationData(null===t||void 0===t?void 0:t.key);n&&n.validationResults&&(this.cancelCellValidationResult({change:t,columnIndex:i}),delete n.validationResults[i])}cancelCellValidationResult(e){let{change:t,columnIndex:i}=e;const n=this._getValidationData(t.key);if(t&&n.validationResults){const e=n.validationResults[i];e&&(e.deferred&&e.deferred.reject("cancel"),n.validationResults[i]="cancel")}}resetRowValidationResults(e){e&&(e.validationResults&&delete e.validationResults,delete e.validated)}isInvalidCell(e){let{rowKey:t,columnIndex:i}=e;const n=this.getCellValidationResult({rowKey:t,columnIndex:i});return P(n)&&n.status===F.invalid}getCellValidator(e){let{rowKey:t,columnIndex:i}=e;const n=this._getValidationData(t),o=n&&x.A.getGroupConfig(n),s=o&&o.validators;return s&&s.filter(e=>{const{column:t}=e.option("dataGetter")();return!!t&&t.index===i})[0]}setCellValidationStatus(e){const t=this.getCellValidationResult({rowKey:e.key,columnIndex:e.column.index});(0,m.O9)(t)?e.validationStatus="cancel"!==t?t.status:"cancel":delete e.validationStatus}}const B=e=>class extends e{processDataItemTreeListHack(e){super.processDataItem.apply(this,arguments)}processItemsTreeListHack(e,t){return super.processItems.apply(this,arguments)}_addChange(e){const t=super._addChange.apply(this,arguments);return t&&"remove"!==e.type&&this._validatingController.updateValidationState(t),t}_handleChangesChange(e){super._handleChangesChange.apply(this,arguments),e.value.forEach(e=>{void 0===this._validatingController._getValidationData(e.key)&&this._validatingController.updateValidationState(e)})}_updateRowAndPageIndices(){const e=this,t=e.getView("rowsView").getTopVisibleItemIndex();let i=t;(0,h.__)(e.getChanges(),(n,o)=>{let{key:s,type:r}=o;const l=this._validatingController._getValidationData(s);l&&!l.isValid&&l.pageIndex!==e._pageIndex&&(l.pageIndex=e._pageIndex,l.rowIndex="insert"===r?t:i,i++)})}_getValidationGroupsInForm(e){const t=this._validatingController._getValidationData(e.key,!0);return{validationGroup:t}}_validateEditFormAfterUpdate(e,t){t&&this._editForm&&this._editForm.validate(),super._validateEditFormAfterUpdate.apply(this,arguments)}_prepareEditCell(e){const{column:t,item:i}=e,n=super._prepareEditCell(e),o=i.isNewRow?void 0:i.key;return n&&t.showEditorAlways&&this._validatingController.updateValidationState({key:o}),n}processItems(e,t){const i=this.getChanges(),n=(e,t)=>{let i=-1;const n="insert"===e.type,{key:o}=e;return(0,h.__)(t,(e,t)=>{if((0,d.RL)(o,n?t.key:this._dataController.keyOf(t)))return i=e,!1}),i};e=super.processItems(e,t);const o=e.length;return this.getEditMode()===O&&"prepend"!==t&&"append"!==t&&i.forEach(t=>{const{key:i}=t,s=this._validatingController._getValidationData(i);s&&t.type&&s.pageIndex===this._pageIndex&&(null===t||void 0===t?void 0:t.pageIndex)!==this._pageIndex&&function(t,i){const s={key:t.key},r=n(t,e);if(r>=0)return;i.rowIndex=i.rowIndex>o?i.rowIndex%o:i.rowIndex;const{rowIndex:l}=i;s[E]=1,e.splice(l,0,s)}(t,s)}),e}processDataItem(e){const t=e.data[E],i=t?e.data.key:e.key,n=this.getEditMode();if(n===O&&t&&i){const t=this.getChanges(),n=A.A.getIndexByKey(i,t);if(n>=0){const o=t[n];if("insert"!==o.type){const t=this._getOldData(o.key);e.data=(0,c.X)(!0,{},t,o.data),e.key=i}}}super.processDataItem.apply(this,arguments)}_createInvisibleColumnValidators(e){const t=this,i=this._columnsController.getColumns(),n=this._columnsController.getInvisibleColumns().filter(e=>!e.isBand),o=this._columnsController.getGroupColumns().filter(e=>!e.showWhenGrouped&&-1===n.indexOf(e)),s=[],l=(e,t)=>this._dataController.getRowIndexByKey(t)>=0&&n.indexOf(e)<0;return n.push(...o),V.includes(this.getEditMode())||(0,h.__)(i,(i,n)=>{e.forEach(e=>{let i;if(!l(n,e.key)){if("insert"===e.type)i=e.data;else if("update"===e.type){const n=t._getOldData(e.key);if(!(0,m.O9)(n))return;i=(0,r.lj)(n,e.data)}if(i){const t=this._validatingController.createValidator({column:n,key:e.key,value:n.calculateCellValue(i)});t&&s.push(t)}}})}),function(){s.forEach(e=>{e.dispose()})}}_beforeSaveEditData(e,t){let i=super._beforeSaveEditData.apply(this,arguments);const n=this._validatingController._getValidationData(null===e||void 0===e?void 0:e.key,!0);if(e){const t="remove"===e.type||n.isValid;i=i||!t}else{const e=this._createInvisibleColumnValidators(this.getChanges());i=new u.cY,this.executeOperation(i,()=>{this._validatingController.validate(!0).done(t=>{switch(e(),this._updateRowAndPageIndices(),this.getEditMode()){case T:t||this._focusEditingCell();break;case O:t||(this._resetEditRowKey(),this._resetEditColumnName(),this._dataController.updateItems())}i.resolve(!t)})})}return i.promise?i.promise():i}_beforeEditCell(e,t,i){const n=super._beforeEditCell(e,t,i);if(this.getEditMode()===T){const i=this._rowsView._getCellElement(e,t),o=i&&i.data("dxValidator"),s=i&&i.closest(".dx-row").data("options"),r=o&&o.option("adapter").getValue();if(o&&D(r,s)){const e=new u.cY;return(0,u.z7)(this._validatingController.validateCell(o),n).done((t,i)=>{e.resolve(t.status===F.valid&&i)}),e.promise()}if(!o)return n}return!1}_afterSaveEditData(e){let t;const i=this.getEditMode()===T;if((0,h.__)(this.getChanges(),(e,i)=>{const n=this._showErrorRow(i);t=t||n}),t){const e=this._rowsView.getScrollable();e&&(e.update(),e.scrollToElement(t))}if(e&&i&&this._needUpdateRow()){const e=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[e]}),this._focusEditingCell()}else if(!e){let e=!0;if(i){const t=this._columnsController.getColumns(),i=t.filter(e=>{var t;return e.showEditorAlways&&(null===(t=e.validationRules)||void 0===t?void 0:t.length)>0}).length>0;e=!i}e&&this._validatingController.initValidationState()}}_handleDataChanged(e){const t=this._validatingController._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===e.changeType&&(0,h.__)(t,(t,i)=>{i.rowIndex+=e.items.length}),super._handleDataChanged(e)}resetRowAndPageIndices(){const e=this._validatingController._validationState;(0,h.__)(e,(e,t)=>{t.pageIndex!==this._pageIndex&&(delete t.pageIndex,delete t.rowIndex)})}_beforeCancelEditData(){this._validatingController.initValidationState(),super._beforeCancelEditData()}_showErrorRow(e){let t;const i=this._dataController.items(),n=this.getIndexByKey(e.key,i),o=this._validatingController._getValidationData(e.key);if((null===o||void 0===o||!o.isValid)&&null!==o&&void 0!==o&&o.errorText&&n>=0)return t=this.getPopupContent(),this._errorHandlingController&&this._errorHandlingController.renderErrorRow(null===o||void 0===o?void 0:o.errorText,n,t)}updateFieldValue(e){const t=new u.cY;return this._validatingController.removeCellValidationResult({change:this.getChangeByKey(e.key),columnIndex:e.column.index}),super.updateFieldValue.apply(this,arguments).done(()=>{const i=this._validatingController.getCellValidator({rowKey:e.key,columnIndex:e.column.index});(0,u.z7)(i&&this._validatingController.validateCell(i)).done(e=>{this._editorFactoryController.refocus(),t.resolve(e)})}),t.promise()}highlightDataCell(e,t){super.highlightDataCell.apply(this,arguments),this._validatingController.setCellValidationStatus(t);const i=!!t.setValue,n=this.isCellModified(t),o=(0,m.O9)(t.validationStatus),s=n&&t.column.setCellValue||i&&!n&&!(t.row.isNewRow||!o);if(s){const i=e.data("dxValidator");i&&(0,u.z7)(this._validatingController.validateCell(i)).done(()=>{this._validatingController.setCellValidationStatus(t)})}}getChangeByKey(e){const t=this.getChanges();return t[A.A.getIndexByKey(e,t)]}isCellModified(e){const t=super.isCellModified(e),i=this.getChangeByKey(e.key),n=!!e.row&&this._validatingController.isInvalidCell({rowKey:e.key,columnIndex:e.column.index});return t||this._validatingController._rowIsValidated(i)&&n}},H=function(e,t){const i=(0,l.A)(t).closest("tr").index(),n=(0,l.A)(e._rowsView.getRowElement(i)).first().children().filter(":not(.dx-hidden-cell)");return e._rowsView._getWidths(n).reduce((e,t)=>e+t,0)},z=function(e){let t,i;return e.some((n,o)=>{if("transparent"===n.command)return t=0===o?-1:o,i=o===e.length-1?-1:o+n.colspan-1,!0}),{startColumnIndex:t,endColumnIndex:i}},M=e=>class extends e{_showRevertButton(e){var t,i;let n=null===(t=this._revertTooltip)||void 0===t?void 0:t.$element();var o,r;if(!e||!e.length)return null===(o=n)||void 0===o||o.remove(),void(this._revertTooltip=void 0);if(e.find(n).length)return void(null===(r=this._revertTooltip)||void 0===r||r.repaint());const a=this.getRevertButtonContainer(e),d=this.addWidgetPrefix("revert-tooltip");null===(i=n)||void 0===i||i.remove(),n=(0,l.A)("<div>").addClass(d).appendTo(e);const u={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:a,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:d},contentTemplate:()=>{const e=(0,l.A)("<div>").addClass("dx-revert-button"),t={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),elementAttr:{id:"dxRevertButton","aria-label":s.A.format("dxDataGrid-ariaRevertButton")},onClick:()=>{this._editingController.cancelEditData()}};return new _.A(e,t).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:e},onPositioned:this.overlayPositionedHandler.bind(this)};this._revertTooltip=new f.A(n,u)}_hideFixedGroupCell(e,t){var i,n;let o,s;const r=null===(i=this._rowsView)||void 0===i||null===(n=i.isFixedColumns)||void 0===n?void 0:n.call(i),a=this._editingController.isFormOrPopupEditMode();if(r&&!a){const i=e.closest(".dx-row").next().data("options");i&&"group"===i.rowType&&(o=(0,l.A)(this._rowsView.getRowElement(i.rowIndex)).last(),s=o.find(".dx-group-cell"),s.length&&"hidden"!==s.get(0).style.visibility&&(s.css("visibility","hidden"),t.onDisposing=function(){s.css("visibility","")}))}}_showValidationMessage(e,t,i){const n=e.find(".dx-dropdowneditor-overlay").data("dxPopup"),o=n&&n.option("visible"),s=o?"top right":`top ${i}`,r=o?"top left":`bottom ${i}`,d=this.getValidationMessageContainer(e);let u="";t&&t.forEach(e=>{u+=(u.length?"<br/>":"")+(0,g.o4)(e)});const c=this.addWidgetPrefix("invalid-message");this._rowsView.element().find(`.${c}`).remove();const h=(0,l.A)("<div>").addClass("dx-invalid-message").addClass("dx-invalid-message-always").addClass(c).html(u).appendTo(e),p={container:d,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{id:"dxInvalidMessage",class:`dx-invalid-message dx-invalid-message-always ${c}`},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!o&&a.A.mozilla?-1:0},my:s,at:r,of:e},onPositioned:t=>{this.overlayPositionedHandler(t,o),this._shiftValidationMessageIfNeed(t.component.$content(),e)}};this._hideFixedGroupCell(e,p),new f.A(h,p)}getValidationMessages(){var e;return null===(e=this._rowsView.element())||void 0===e?void 0:e.find(this._getValidationMessagesSelector())}getRevertButton(){var e;return(0,l.A)(null===(e=this._revertTooltip)||void 0===e?void 0:e.element())}_hideValidationMessage(){var e;const t=null===(e=this._rowsView.element())||void 0===e?void 0:e.find(this._getValidationMessagesSelector());null===t||void 0===t||t.remove()}_normalizeValidationMessagePositionAndMaxWidth(e,t,i){const n=this._columnsController.getFixedColumns();if(!n||!n.length)return;let o;const s=!t&&H(this,e.element),r=e.component.$content(),a=(0,p.Ot)(r,!0),d=!t&&a>s,u=this._rowsView.getCellIndex((0,l.A)(e.element).closest("td")),c=z(n);return t||u!==c.startColumnIndex&&!d?u===c.endColumnIndex&&(o={collision:"none flip",my:"top right",at:t||i?"top left":"bottom right"},t&&(o.offset="-1 0")):o={collision:"none flip",my:"top left",at:i?"top right":"bottom left"},o&&{position:o,maxWidth:d?s-2:void 0}}_shiftValidationMessageIfNeed(e,t){const i=this._revertTooltip&&this._revertTooltip.$content();if(!i)return;const n=e.offset(),o=i.offset();if(n.top===o.top&&n.left+(0,p.RG)(e)>o.left){const n=(0,p.RG)(i)+2;e.css("left",o.left<t.offset().left?-n:n)}}getOverlayBaseZIndex(){return f.A.baseZIndex()}overlayPositionedHandler(e,t){if(!e.component.__skipPositionProcessing){const i=(0,l.A)(e.element).hasClass(this.addWidgetPrefix("revert-tooltip")),n=!i&&this._rowsView.updateFreeSpaceRowHeight(),o=this._normalizeValidationMessagePositionAndMaxWidth(e,i,t);e.component.__skipPositionProcessing=!(!n&&!o),o?e.component.option(o):n&&e.component.repaint()}}_getRevertTooltipsSelector(){const e=this.addWidgetPrefix("revert-tooltip");return`.dx-editor-cell .${e}`}_getValidationMessagesSelector(){const e=this.addWidgetPrefix("invalid-message");return`.dx-editor-cell .${e}, .dx-cell-modified .${e}`}loseFocus(e){e||this._validatingController.setValidator(null),super.loseFocus()}updateCellState(e,t,i){var n;const o=null===e||void 0===e?void 0:e.closest(this._getFocusCellSelector()),s=null!==o&&void 0!==o&&o.is("td")?o:null,r=null===o||void 0===o?void 0:o.closest(".dx-row").data("options"),l=r?this._editingController.getChangeByKey(r.key):null,a=s&&this._columnsController.getVisibleColumns()[s.index()],d=void 0!==(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n[null===a||void 0===a?void 0:a.name])&&!this._editingController.isSaving(),u=[];this._editingController.getEditMode()===T&&((null===t||void 0===t?void 0:t.status)===F.invalid||d?(this._showRevertButton(o),u.push("dxRevertButton")):this._revertTooltip&&this._revertTooltip.$element().remove());const c=t&&t.status===F.invalid;if(c&&s&&a&&t&&t.brokenRules){const e=[];t.brokenRules.forEach(t=>{t.message&&e.push(t.message)}),e.length&&(this._showValidationMessage(o,e,a.alignment||"left"),u.push("dxInvalidMessage"))}this._updateAriaValidationAttributes(o,u),!i&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()}_updateAriaValidationAttributes(e,t){if(0===t.length)return;const i=this._editingController.getEditMode(),n=[T,O,R].includes(i);if(n){const i=this._getCurrentFocusElement(e);i.attr("aria-labelledby",t.join(" ")),i.attr("aria-invalid",!0)}}_getCurrentFocusElement(e){return this._editingController.isEditing()?e.find(I.CN).first():e}focus(e,t){if(!arguments.length)return super.focus();if(this._hideValidationMessage(),null!==e&&void 0!==e&&e.hasClass("dx-row")||null!==e&&void 0!==e&&e.hasClass("dx-master-detail-cell"))return super.focus(e,t);const i=null===e||void 0===e?void 0:e.closest(this._getFocusCellSelector()),n=i&&(i.data("dxValidator")||e.find(`.${this.addWidgetPrefix("validator")}`).eq(0).data("dxValidator")),o=i&&i.closest(".dx-row").data("options"),s=o?this._editingController.getChangeByKey(o.key):null;let r;if(n){this._validatingController.setValidator(n);const i=n.option("adapter").getValue();if(D(i,o)||this._validatingController._rowIsValidated(s))return this._editingController.waitForDeferredOperations().done(()=>{const i=!this._rowsView.isElementInside(e);i||(0,u.z7)(this._validatingController.validateCell(n)).done(i=>{r=i;const{column:n}=r.validator.option("dataGetter")();s&&n&&!this._validatingController.isCurrentValidatorProcessing({rowKey:s.key,columnIndex:n.index})||((0,v.Ft)((0,v.ss)())||r.status!==F.invalid||(t=!0),this.updateCellState(e,r,t),super.focus.call(this,e,t))})}),super.focus(e,t)}return this.updateCellState(e,r,t),super.focus(e,t)}getEditorInstance(e){const t=e.find(".dx-texteditor").eq(0);return A.A.getWidgetInstance(t)}getValidationMessageContainer(e){return e.closest(`.${this.addWidgetPrefix("content")}`)}getRevertButtonContainer(e){return e.closest(`.${this.addWidgetPrefix("content")}`).parent()}hasOverlayElements(){const e=this.getValidationMessages(),t=this.getRevertButton();return super.hasOverlayElements()||!(null===e||void 0===e||!e.length)||!(null===t||void 0===t||!t.length)}},N=e=>class extends e{_getValidationStatus(e){const t=P(e)?e.status:e;return t||F.valid}_isCellChanged(e,t,i,n,o){var s,r;const a=null===(s=e.cells)||void 0===s?void 0:s[n],d=this._getValidationStatus({status:null===a||void 0===a?void 0:a.validationStatus}),u=this._validatingController.getCellValidationResult({rowKey:e.key,columnIndex:n}),c=this._validatingController._getValidationData(e.key),h=this._getValidationStatus(u),p=JSON.stringify(t.modifiedValues)!==JSON.stringify(e.modifiedValues),g=d!==h&&p,m=(0,l.A)(null===a||void 0===a?void 0:a.cellElement).hasClass(this.addWidgetPrefix("invalid")),_=null===a||void 0===a||null===(r=a.column.validationRules)||void 0===r?void 0:r.length,C=e.isEditing!==t.isEditing&&_,f=g||c.isValid&&m;return!(!C&&!f)||super._isCellChanged.apply(this,arguments)}},L=e=>class extends e{updateFreeSpaceRowHeight(e){const t=this;let i,n,o;const s=t.element(),r=s&&s.find(`.${t.addWidgetPrefix("invalid-message")} .dx-overlay-content`);if(super.updateFreeSpaceRowHeight(e),r&&r.length){i=t._getRowElements().filter(":visible"),o=t._getFreeSpaceRowElements(e),n=o.first();const s=i.find(":focus").length>0;if(n&&1===i.length&&(!n.is(":visible")||(0,p.P$)(r)>(0,p.P$)(n))&&s)return o.show(),(0,p.k$)(o,(0,p.P$)(r)),!0}}_formItemPrepared(e,t){super._formItemPrepared.apply(this,arguments),(0,d.OX)(()=>{const i=t.find(".dx-widget").first(),n=i.length&&!i.children().length;n||this._validatingController.createValidator(e,i)})}_cellPrepared(e,t){this._editingController.isFormOrPopupEditMode()||this._validatingController.createValidator(t,e),super._cellPrepared.apply(this,arguments)}_restoreErrorRow(e){this._editingController&&this._editingController.hasChanges()&&this._getRowElements(e).each((e,t)=>{const i=(0,l.A)(t).data("options");if(i){const e=this._editingController.getChangeByKey(i.key);e&&this._editingController._showErrorRow(e)}})}},W={defaultOptions:()=>({editing:{texts:{validationCancelChanges:s.A.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:k},extenders:{controllers:{editing:B,editorFactory:M,data:N},views:{rowsView:L}}}},72717:function(e,t,i){i.d(t,{p:function(){return X},yo:function(){return j},bV:function(){return Q},f4:function(){return J}});i(69375),i(82438),i(12266),i(99819),i(57327),i(50020),i(74786),i(57147),i(32225);var n=i(85563),o=i(26228),s=i(66703),r=i(29518),l=i(89214),a=i(94360),d=i(63825),u=i(50172),c=i(27996),h=i(78135),p=i(93821),g=i(20338),m=i(93076),_=i(24906),C=i(24714);const f="scrolling.legacyMode",v=e=>e.option("scrolling.loadTwoPagesOnStart")||e._controller.isVirtual()||e._controller.getViewportItemIndex()>0,x=e=>e._cache.length?e._cache[0].pageIndex:-1,w=e=>e._cache.length?e._cache[e._cache.length-1].pageIndex:-1,y=(e,t,i)=>{e._isChangedFiring=!0,t(i),e._isChangedFiring=!1},b=(e,t,i)=>{if(e._isDelayChanged)return e._isDelayChanged=!1,y(e,t,i),!0},I=e=>{const t=e._dataOptions.pageSize(),i=e.option("scrolling.preventPreload");if(i)return 0;let n=e._controller.viewportSize();if(e._controller.isVirtualMode()&&e.option("scrolling.removeInvisiblePages")){n=0;const t=e._controller.viewportSize()*e._controller.viewportItemSize();let i=e._controller.getContentOffset();const o=e._controller.getViewportPosition(),s=e._controller.virtualItemsCount(),r=e._dataOptions.totalItemsCount();for(let l=s.begin;l<r;l++){if(i>=o+t)break;const s=e._controller.getItemSizes()[l]||e._controller.viewportItemSize();i+=s,i>=o&&n++}}return t&&n>0?Math.ceil(n/t):1},S=(e,t)=>{const i=e.option("scrolling.preloadEnabled");let n=I(e);const o=e._controller.isAppendMode();return n&&(t?n=i?1:0:(i&&n++,!o&&v(e)||n--)),n},A=e=>{let t=-1;const i=x(e),n=e._dataOptions;if(i<0)t=e._pageIndex;else if(e._cache[e._pageIndex-i]){if(i>=0&&e._controller.viewportSize()>=0){if(i>0){const o=w(e)+1===n.pageCount()&&e._cache.length<S(e)+1,s=o||e._pageIndex===i&&S(e,!0);s&&(t=i-1)}if(t<0){const n=i+e._cache.length<=e._pageIndex+S(e);n&&(t=i+e._cache.length)}}}else t=e._pageIndex;return e._loadingPageIndexes[t]&&(t=-1),t},E=(e,t)=>{const i=e._dataOptions;if(t===e.pageIndex()||!i.isLoading()&&t<i.pageCount()||!i.hasKnownLastPage()&&t===i.pageCount())return i.pageIndex(t),e._loadingPageIndexes[t]=!0,(0,s.z7)(i.load()).always(()=>{e._loadingPageIndexes[t]=!1})},R=(e,t,i,n,o)=>{const s=e._dataOptions,r=s.items().slice();let l=(0,u.Gv)(i)?i:void 0;const a="prepend"===i,d=s.viewportItems();i&&(0,u.Kg)(i)&&!e._isDelayChanged&&(l={changeType:i,items:r},o&&(l.removeCount=o.itemsCount,l.removeCount&&s.correctCount&&(l.removeCount=s.correctCount(d,l.removeCount,a))));let c=o?o.itemsLength:0;c&&s.correctCount&&(c=s.correctCount(d,c,a)),"append"===i?(d.push.apply(d,r),o&&d.splice(0,c)):a?(d.unshift.apply(d,r),o&&d.splice(-c)):e._dataOptions.viewportItems(r),s.updateLoading(),e._lastPageIndex=e.pageIndex(),e._isDelayChanged=n,n||y(e,t,l)};class O{constructor(e,t){this._dataOptions=t,this._controller=e,this._pageIndex=this._lastPageIndex=t.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){const t=this._dataOptions.pageSize(),i=this._dataOptions.pageCount(),n=this._controller.isVirtualMode(),o=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();let r;if(t&&(n||o)&&s>=0){const n=this._controller.viewportSize();if(n&&e+n>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){r=i-1;const e=s%t;r>0&&e>0&&e<n&&r--}else r=i;else{r=Math.floor(e/t);const n=i-1;r=Math.max(r,0),r=Math.min(r,n)}return this.pageIndex(r),this.load()}}pageIndex(e){const t=this._controller.isVirtualMode(),i=this._controller.isAppendMode();return!1!==this.option(f)&&(t||i)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){let t=x(this);return t<0&&(t=void 0!==e?e:this.pageIndex()),t}endPageIndex(){const e=w(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){const e=this._dataOptions;let t;const i=this._controller.isVirtualMode(),n=this._controller.isAppendMode();if(!1!==this.option(f)&&(i||n)){const i=A(this);if(i>=0){const n=E(this,i);n&&(t=new s.cY,n.done(()=>{const e=this._delayDeferred;e?e.done(t.resolve).fail(t.reject):t.resolve()}).fail(t.reject),e.updateLoading())}}else t=e.load();return t||this._lastPageIndex===this.pageIndex()||this._dataOptions.onChanged({changeType:"pageIndex"}),t||(new s.cY).resolve()}loadIfNeed(){const e=this._controller.isVirtualMode(),t=this._controller.isAppendMode();if((e||t)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){const e=this._controller.getViewportPosition();e>0?this._controller._setViewportPositionCore(e):this.load()}}handleDataChanged(e,t){const i=this._dataOptions;let n,o,s=this._cache.length;const r=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(t&&t.changes)y(this,e,t);else if(!1!==this.option(f)&&(r||l)){const t=x(this);if(t>=0&&(r&&t+this._cache.length!==i.pageIndex()&&t-1!==i.pageIndex()&&(s=0,this._cache=[]),l))if(0===i.pageIndex())this._cache=[];else if(i.pageIndex()<w(this))return void y(this,e,{changeType:"append",items:[]});const a={pageIndex:i.pageIndex(),itemsLength:i.items(!0).length,itemsCount:this.itemsCount(!0)};let d;this.option("scrolling.removeInvisiblePages")&&r?o=this._cache.length>Math.max(S(this)+(this.option("scrolling.preloadEnabled")?1:0),2):b(this,e,{isDelayed:!0}),t===i.pageIndex()+1?(o&&(d=this._cache.pop()),n="prepend",this._cache.unshift(a)):(o&&(d=this._cache.shift()),n="append",this._cache.push(a));const u=r&&0===s&&v(this);R(this,e,this._cache.length>1?n:void 0,u,d),this._delayDeferred=this.load().done(()=>{b(this,e)&&this.load()})}else R(this,e,t)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){let t=0;const i=this._controller.isVirtualMode();return!e&&i?this._cache.forEach(e=>{t+=e.itemsCount}):t=this._dataOptions.itemsCount(),t}virtualItemsCount(){let e=x(this);e<0&&(e=this._dataOptions.pageIndex());const t=e*this._dataOptions.pageSize(),i=this._cache.length*this._dataOptions.pageSize(),n=Math.max(0,this._dataOptions.totalItemsCount()-i-t);return{begin:t,end:n}}reset(){this._loadingPageIndexes={},this._cache=[]}}const T="scrolling.legacyMode",V=e=>"virtual"===e.option("scrolling.mode")||e._isVirtual,F=e=>"infinite"===e.option("scrolling.mode")&&!e._isVirtual;function P(e,t,i){let o;const s=[],r=[],a=[];function d(t){const i=t.element?t.$element():t,n=m.A.offset(i);return n?t.scrollTop()-(n.top-e.offset().top):e.offset().top}i=i||e;const u={on(e,t,i){e.on("scroll",i)},off(e,t,i){e.off("scroll",i)}};function h(e){const i="#document"===e.get(0).nodeName,o=e.get(0).nodeType===(0,c.zk)().Node.ELEMENT_NODE;let l=e.data("dxScrollable"),h=u;if(!l&&(l=i&&(0,n.A)((0,c.zk)())||o&&"auto"===e.css("overflowY")&&e,h=_.A,!l))return;const p=function(e){return function(){let i=e.scrollTop()-d(e);i=i>0?i:0,t(i)}}(l);h.on(l,"scroll",p),r.push(e=>{const t=d(l),i=l.scrollTo?"scrollTo":"scrollTop";e-t>=0&&l[i](e+t)}),s.push(l),a.push(()=>{h.off(l,"scroll",p)})}const p=e=>(0,n.A)(e.get(0).parentNode??e.get(0).host);for(o=i.parent();o.length;o=p(o))h(o);return{scrollTo(e){(0,l.__)(r,(t,i)=>{i(e)})},dispose(){(0,l.__)(a,(e,t)=>{t()})}}}class D{constructor(e,t,i){this._dataOptions=t,this.component=e,this._viewportSize=!1===e.option(T)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=i,this.positionChanged=(0,C.A)(),this._dataLoader=new O(this,this._dataOptions)}getItemSizes(){return this._itemSizes}option(e,t){return this.component.option.apply(this.component,arguments)}isVirtual(){return this._isVirtual}virtualItemsCount(){if(V(this)){const e=this._dataOptions,t=e.totalItemsCount();if(!1===this.option(T)&&-1!==t){const i=this.getViewportParams(),n=e.loadedOffset(),o=e.loadedItemCount(),s=Math.max(i.skip,n),r=Math.min(i.take,o),l=Math.max(t-(s+r),0);return{begin:s,end:l}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}}getScrollingTimeout(){const e=this.option("scrolling.renderAsync");let t=0;return(0,u.O9)(e)?e&&(t=this.option("scrolling.timeout")??0):(t=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()),t<this.option("scrolling.renderingThreshold")&&(t=this.option("scrolling.minTimeout")||0)),t}setViewportPosition(e){const t=new s.cY,i=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),i>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),t.resolve()},i):(this._setViewportPositionCore(e),t.resolve()),t.promise()}getViewportPosition(){return this._position}getItemIndexByPosition(e,t,i){e=e??this._position;const n=this.getItemSize();let o=0,s=0;const r=Object.keys(this._itemSizes).concat(-1);for(let l=0;l<r.length&&o<e;l++){const a=parseInt(r[l]);let d=(e-o)/n;if(a<0||s+d<a){s+=d,this._sizeRatio<1&&(0,u.O9)(t)&&(s=t+i/this._viewportItemSize);break}d=a-s,o+=d*n,s+=d;const c=this._itemSizes[a];o+=c,s+=o<e?1:(e-o+c)/c}return Math.round(50*s)/50}isScrollingBack(){return this._isScrollingBack}_setViewportPositionCore(e){const t=this._position||0;this._position=e,t!==this._position&&(this._isScrollingBack=this._position<t);const i=this.getItemIndexByPosition(),n=this.setViewportItemIndex(i);return this.positionChanged.fire(),n}setContentItemSizes(e){const t=this.virtualItemsCount();if(this._contentSize=e.reduce((e,t)=>e+t,0),t){e.forEach((e,i)=>{this._itemSizes[t.begin+i]=e});const i=(t.begin+t.end+this.itemsCount())*this._viewportItemSize,n=g.A.getContentHeightLimit(o.A);this._sizeRatio=i>n?n/i:1}}getItemSize(){return this._viewportItemSize*this._sizeRatio}getItemOffset(e,t){const i=this.virtualItemsCount();let n=e;if(!i)return 0;let o=0;const s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(i=>{n&&(t?i>=s-e:i<e)&&(o+=this._itemSizes[i],n--)}),Math.floor(o+n*this._viewportItemSize*this._sizeRatio)}getContentOffset(e){const t="end"===e,i=this.virtualItemsCount();return i?this.getItemOffset(t?i.end:i.begin,t):0}getVirtualContentSize(){const e=this.virtualItemsCount();return e?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0}getViewportItemIndex(){return this._viewportItemIndex}setViewportItemIndex(e){if(this._viewportItemIndex=e,!1!==this.option(T))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)}viewportItemSize(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize}viewportSize(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize}viewportHeight(e,t){const i=t??this._position,n=this.getItemIndexByPosition(i),o=this.getItemIndexByPosition(i+e,n,e);this.viewportSize(Math.ceil(o-n)),(0,u.O9)(t)||this._viewportItemIndex===n||this._setViewportPositionCore(i)}reset(e){this._dataLoader.reset(),e||(this._itemSizes={})}subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||P(e,e=>{this.viewportItemSize()&&this.setViewportPosition(e)})}dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null}scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)}isVirtualMode(){return V(this)}isAppendMode(){return F(this)}getViewportParams(){const e="virtual"===this.option("scrolling.mode"),t=this._dataOptions.totalItemsCount(),i=this._dataOptions.hasKnownLastPage(),n=i&&this._viewportItemIndex>t?t:this._viewportItemIndex,o=this._viewportSize+n,s=this.option("scrolling.prerenderedRowChunkSize")||1,r=this.isScrollingBack(),l=this.option("scrolling.prerenderedRowCount")??1,a=r?l:0,d=r?0:l,u=Math.floor(Math.max(0,n-a)/s)*s;let c=Math.ceil((o+d-u)/s)*s;if(e){const e=Math.max(0,t-u);c=Math.min(c,e)}return{skip:u,take:c}}itemsCount(){let e=0;return e=this.option(T)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount(),e}pageIndex(){return this._dataLoader.pageIndex(...arguments)}beginPageIndex(){return this._dataLoader.beginPageIndex(...arguments)}endPageIndex(){return this._dataLoader.endPageIndex(...arguments)}pageSize(){return this._dataLoader.pageSize(...arguments)}load(){return this._dataLoader.load(...arguments)}loadIfNeed(){return this._dataLoader.loadIfNeed(...arguments)}handleDataChanged(){return this._dataLoader.handleDataChanged(...arguments)}getDelayDeferred(){return this._dataLoader.getDelayDeferred()}}const k="dx-freespace-row",B="dx-row-inserted",H="scrolling.legacyMode",z=["beginPageIndex","endPageIndex","pageIndex"],M=function(e){return"virtual"===e.option("scrolling.mode")},N=function(e){return"infinite"===e.option("scrolling.mode")},L=function(e){return M(e)||N(e)},W=function(e,t,i,n){for(let o=0;o<t+1;o++){const s=e[i?e.length-1-o:o];s&&!n(s,o===t,i)&&t++}return t},K=function(e,t){return"data"===e.rowType&&!e.isNewRow||"group"===e.rowType&&t.isGroupItemCountable(e.data)},$=function(e){return e.forEach((e,t)=>{e.rowIndex=t}),e},G=function(e){const t=e._virtualScrollController.beginPageIndex(-1);M(e)&&(t<0||e.viewportSize()>=0&&e.getViewportItemIndex()>=0&&(t*e.pageSize()>e.getViewportItemIndex()||t*e.pageSize()+e.itemsCount()<e.getViewportItemIndex()+e.viewportSize())&&e._dataSource.isLoading()?e._isLoading||(e._isLoading=!0,e.loadingChanged.fire(!0)):e._isLoading&&(e._isLoading=!1,e.loadingChanged.fire(!1)))},q=function(e,t,i){if(!1===e.option(H)&&z.includes(t)){const t=e._dataSource;return t.pageIndex.apply(t,i)}const n=e._virtualScrollController;return n[t].apply(n,i)},U=function(e,t){const i=e.toArray().map(e=>(0,n.A)(e).parent(`.${t}`).get(0)).filter(e=>e);i.length&&(e=(0,n.A)(i));const o=t===k?e.length-1:e.length;for(let n=0;n<o;n++)e.eq(n).remove()},j=e=>class extends e{init(){super.init.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new D(this.component,this._getVirtualScrollDataOptions())}dispose(){this._virtualScrollController.dispose(),super.dispose.apply(this,arguments)}_getVirtualScrollDataOptions(){const e=this;return{pageSize:()=>e.pageSize(),totalItemsCount:()=>e.totalItemsCount(),hasKnownLastPage:()=>e.hasKnownLastPage(),pageIndex:t=>e._dataSource.pageIndex(t),isLoading:()=>e._dataSource.isLoading()&&!e.isCustomLoading(),pageCount:()=>e.pageCount(),load:()=>e._dataSource.load(),updateLoading(){G(e)},itemsCount:()=>e.itemsCount(!0),items:()=>e._dataSource.items(),viewportItems(t){return t&&(e._items=t),e._items},onChanged(t){e.changed.fire(t)},changingDuration(){return e.isLoading()?300:e._renderTime||0}}}_handleLoadingChanged(e){!1!==this.option(H)?(M(this)&&!this._isLoadingAll||(this._isLoading=e,super._handleLoadingChanged.apply(this,arguments)),this._startLoadTime=e?new Date:void 0):super._handleLoadingChanged.apply(this,arguments)}_handleLoadError(){!1!==this.option(H)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),super._handleLoadError.apply(this,arguments)}_handleDataChanged(e){if(!1===this.option(H))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void super._handleDataChanged.apply(this,arguments);const t=super._handleDataChanged.bind(this);this._virtualScrollController.handleDataChanged(t,e)}_customizeRemoteOperations(e,t){const i=!1===this.option(H);let n=this.option("scrolling.renderAsync");(0,u.O9)(n)||(n=this._renderTime>=this.option("scrolling.renderingThreshold")),!(M(this)||N(this)&&i)||t.reload||!t.skip&&!i||n||(e.delay=void 0),super._customizeRemoteOperations.apply(this,arguments)}items(){return this._items}_dataSourceTotalCount(e){return!1===this.option(H)&&M(this)&&!e?this._totalCount:super._dataSourceTotalCount()}itemsCount(e){return e||!1===this.option(H)?super.itemsCount():this._virtualScrollController.itemsCount()}load(e){return!1===this.option(H)||e?super.load(e):this._virtualScrollController.load()}isLoading(){return!1===this.option(H)?this._dataSource.isLoading():this._isLoading}isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded}resetPagesCache(e){e||this._virtualScrollController.reset(!0),super.resetPagesCache.apply(this,arguments)}_changeRowExpandCore(){const e=super._changeRowExpandCore.apply(this,arguments);return!1===this.option(H)||(this.resetPagesCache(),G(this)),e}reload(){this._dataSource.pageIndex(this.pageIndex());const e=this._virtualScrollController;if(!1!==this.option(H)&&e){const t=new s.cY;return super.reload.apply(this,arguments).done(i=>{const n=e.getDelayDeferred();n?n.done(t.resolve).fail(t.reject):t.resolve(i)}).fail(t.reject),t}return super.reload.apply(this,arguments)}refresh(e,t){if(!1!==this.option(H)){const{storeLoadOptions:i}=e,n=this._dataSource;t.reload?(this._virtualScrollController.reset(),n.items().length=0,this._isLoaded=!1,G(this),this._isLoaded=!0,N(this)?(this.pageIndex(0),n.pageIndex(0),i.pageIndex=0,e.pageIndex=0,i.skip=0):(n.pageIndex(this.pageIndex()),n.paginate()&&(e.pageIndex=this.pageIndex(),i.skip=this.pageIndex()*this.pageSize()))):N(this)&&i.skip&&this._totalCountCorrection<0&&(i.skip+=this._totalCountCorrection)}return super.refresh.apply(this,arguments)}loadPageCount(e){if(!(0,u.O9)(e))return this._loadPageCount;this._loadPageCount=e}_handleDataLoading(e){const t=this.loadPageCount(),i=this.pageSize(),n=!1===this.option(H),{storeLoadOptions:o}=e,s=(0,u.O9)(o.take);e.loadPageCount=t,!e.isCustomLoading&&n&&s&&t>1&&i>0&&(o.take=t*i),super._handleDataLoading.apply(this,arguments)}_loadPageSize(){return super._loadPageSize.apply(this,arguments)*this.loadPageCount()}beginPageIndex(){return q(this,"beginPageIndex",[...arguments])}endPageIndex(){return q(this,"endPageIndex",[...arguments])}pageIndex(e){return q(this,"pageIndex",[...arguments])}virtualItemsCount(){return q(this,"virtualItemsCount",[...arguments])}getContentOffset(){return q(this,"getContentOffset",[...arguments])}getVirtualContentSize(){return q(this,"getVirtualContentSize",[...arguments])}setContentItemSizes(){return q(this,"setContentItemSizes",[...arguments])}setViewportPosition(){return q(this,"setViewportPosition",[...arguments])}getViewportItemIndex(){return q(this,"getViewportItemIndex",[...arguments])}setViewportItemIndex(e){return q(this,"setViewportItemIndex",[...arguments])}getItemIndexByPosition(){return q(this,"getItemIndexByPosition",[...arguments])}viewportSize(){return q(this,"viewportSize",[...arguments])}viewportItemSize(){return q(this,"viewportItemSize",[...arguments])}getItemSize(){return q(this,"getItemSize",[...arguments])}getItemSizes(){return q(this,"getItemSizes",[...arguments])}loadIfNeed(){return q(this,"loadIfNeed",[...arguments])}},X=e=>class extends e{dispose(){const e=this._rowsScrollController;e&&e.dispose(),super.dispose.apply(this,arguments)}_refreshDataSource(){const e=super._refreshDataSource.apply(this,arguments)||(new s.cY).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e}_loadDataSource(){if(this._rowsScrollController&&L(this)){var e;const{loadPageCount:t}=(0,u.O9)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:0};t>=1&&(null===(e=this._dataSource)||void 0===e||e.loadPageCount(t))}return super._loadDataSource.apply(this,arguments)}getRowPageSize(){const e=this.option("scrolling.rowPageSize"),t=this.pageSize();return t&&t<e?t:e}reload(){const e=this._rowsScrollController||this._dataSource,t=null===e||void 0===e?void 0:e.getItemIndexByPosition(),i=super.reload.apply(this,arguments);return null===i||void 0===i?void 0:i.done(()=>{if(M(this)||g.A.isVirtualRowRendering(this)){const i=this.getRowIndexOffset(),s=Math.floor(t)-i,{component:r}=this,l=r.getScrollable&&r.getScrollable(),a=this.dataSource().operationTypes().sorting;if(l&&!a&&s>=0){var e;const i=r.getRowElement(s),a=(null===i||void 0===i?void 0:i[0])&&(0,n.A)(i[0]);let u=null===a||void 0===a||null===(e=a.position())||void 0===e?void 0:e.top;const c=o.A.chrome&&Number(o.A.version??0)>=91,h=o.A.mozilla||c?1:0;u&&u>h&&(u=Math.round(u+(0,d.P$)(a)*(t%1)),l.scrollTo({y:u}))}}})}initVirtualRows(){const e=g.A.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!e||!e||!1!==this.option(H)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);const t=!M(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(t*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option(H)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new D(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var e;if(!1===this.option(H))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(e=this._dataSource)||void 0===e||e.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option(H)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option(H)&&this._rowsScrollController.load()}_getRowsScrollDataOptions(){const e=this,t=function(t){return K(t,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var t;return M(e)&&(null===(t=e._dataSource)||void 0===t?void 0:t.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount(){return L(e)?e.totalItemsCount():!1===e.option(H)?e._itemCount:e._items.filter(t).length},hasKnownLastPage:()=>!1!==e.option(H)||e.hasKnownLastPage(),pageIndex(t){return void 0!==t&&(e._rowPageIndex=t),e._rowPageIndex},isLoading:()=>e.isLoading(),pageCount(){const e=Math.ceil(this.totalItemsCount()/this.pageSize());return e||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),!this.items().length&&this.totalItemsCount()||e._rowsScrollController.handleDataChanged(t=>{t=t||{},t.changeType=t.changeType||"refresh",t.items=t.items||e._visibleItems,e._visibleItems.forEach((e,t)=>{e.rowIndex=t}),e._fireChanged(t)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(e,i,n)=>W(e,i,n,(e,i,n)=>e.isNewRow?i&&!n:i&&n?!e.isNewRow:t(e)),items(i){let n=e._items;if(e.option(H)){const t=e.dataSource(),i=null===t||void 0===t?void 0:t.virtualItemsCount(),o=i?i.begin:0,s=e.getRowPageSize();let r=e._rowPageIndex*s-o,l=s;if(r<0)return[];r&&(r=this.correctCount(n,r),n=n.slice(r)),l&&(l=this.correctCount(n,l),n=n.slice(0,l))}return i?n.filter(t):n},viewportItems(t){return t&&!1!==e.option(H)&&(e._visibleItems=t),e._visibleItems},onChanged(){},changingDuration(){const t=e.dataSource();return null!==t&&void 0!==t&&t.isLoading()&&!1!==e.option(H)?300:(null===t||void 0===t?void 0:t._renderTime)||0}}}_updateItemsCore(e){const t=this.getRowIndexDelta();if(super._updateItemsCore.apply(this,arguments),!1===this.option(H)&&g.A.isVirtualRowRendering(this))return void("update"===e.changeType&&0===e.rowIndices.length&&e.cancelEmptyChanges&&(e.cancel=!0));const i=this._rowsScrollController;if(i){const n=this._visibleItems,o="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;o||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,o&&i.reset(!0),i.load()):("update"===e.changeType?e.rowIndices.forEach((t,i)=>{const o=e.changeTypes[i],s=e.items[i];"update"===o?n[t]=s:"insert"===o?n.splice(t,0,s):"remove"===o&&n.splice(t,1)}):(n.forEach((e,i)=>{n[i]=this._items[i+t]||n[i]}),e.items=n),$(n))}}_updateLoadViewportParams(){const e=this._rowsScrollController.getViewportParams(),t=this.pageSize();if(e&&!L(this)&&t>0){const i=this.pageIndex()*t;e.skip+=i}this._loadViewportParams=e}_processItems(){const e=super._processItems.apply(this,arguments);if(!1===this.option(H)){const t=this._dataSource;let i,n,o,s=(null===t||void 0===t?void 0:t.lastLoadOptions().skip)??0,r=!1,l=[];e.forEach(e=>{const{rowType:a}=e,d=K(e,t),c="group"===a&&(i||d||"group"!==n&&s>0),h="data"===a&&d&&(i||"group"!==n);if(!e.isNewRow&&(0,u.O9)(i)){const e=o&&!r;!c&&!h||e||s++}(c||h)&&(r=!0),e.isNewRow?l.push(e):(l.forEach(e=>{e.loadIndex=s}),l=[]),e.loadIndex=s,i=d,n=a,o=e.isNewRow}),l.forEach(e=>{e.loadIndex=s})}return e}_afterProcessItems(e){if(this._itemCount=e.filter(e=>K(e,this._dataSource)).length,(0,u.O9)(this._loadViewportParams)){this._updateLoadViewportParams();let t=e;if(this._allItems=e,e.length){const{skipForCurrentPage:i}=this.getLoadPageParams(!0),n=e[0].loadIndex+i,{take:o}=this._loadViewportParams;t=e.filter(e=>{const t=e.isNewRow&&e.loadIndex===n&&0===o,i=e.loadIndex>=n,s=e.loadIndex<n+o||t;return i&&s})}return t}return super._afterProcessItems.apply(this,arguments)}_applyChange(e){const t=this,{items:i}=e,{changeType:n}=e;let{removeCount:o}=e;if(o){const i="prepend"===n;o=W(t._items,o,i,(e,i)=>"data"===e.rowType&&!e.isNewRow||"group"===e.rowType&&(t._dataSource.isGroupItemCountable(e.data)||i)),e.removeCount=o}switch(n){case"prepend":t._items.unshift.apply(t._items,i),o&&t._items.splice(-o);break;case"append":t._items.push.apply(t._items,i),o&&t._items.splice(0,o);break;default:super._applyChange(e)}}items(e){return e?this._allItems||this._items:this._visibleItems||this._items}getRowIndexDelta(){let e=0;if(this.option(H)){const t=this._visibleItems;null!==t&&void 0!==t&&t[0]&&(e=this._items.indexOf(t[0]))}return e<0?0:e}getRowIndexOffset(e,t){let i=0;const n=this.dataSource(),o=this._rowsScrollController,s=!1===this.option(H),r=L(this);if(o&&!e)if(s&&(0,u.O9)(this._loadViewportParams)){const{skipForCurrentPage:e,pageIndex:t}=this.getLoadPageParams(!0),n=this.items(!0);if(i=r?t*this.pageSize():0,n.length){const t=n[0].loadIndex;i+=n.filter(i=>i.loadIndex<t+e).length}}else i=o.beginPageIndex()*o.pageSize();else if(r&&s&&n){var l;const e=n.lastLoadOptions();i=t&&null!==(l=e.skips)&&void 0!==l&&l.length?e.skips.reduce((e,t)=>e+t,0):e.skip??0}else M(this)&&n&&(i=n.beginPageIndex()*n.pageSize());return i}getDataIndex(){return!1===this.option(H)?this.getRowIndexOffset(!0,!0):super.getDataIndex.apply(this,arguments)}viewportSize(){const e=this._rowsScrollController,t=this._dataSource,i=null===e||void 0===e?void 0:e.viewportSize.apply(e,arguments);return!1===this.option(H)?i:null===t||void 0===t?void 0:t.viewportSize.apply(t,arguments)}viewportHeight(e,t){var i;null===(i=this._rowsScrollController)||void 0===i||i.viewportHeight(e,t)}viewportItemSize(){const e=this._rowsScrollController,t=this._dataSource,i=null===e||void 0===e?void 0:e.viewportItemSize.apply(e,arguments);return!1===this.option(H)?i:null===t||void 0===t?void 0:t.viewportItemSize.apply(t,arguments)}setViewportPosition(){const e=this._rowsScrollController,t=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):null===t||void 0===t||t.setViewportPosition.apply(t,arguments)}setContentItemSizes(e){const t=this._rowsScrollController,i=this._dataSource,n=null===t||void 0===t?void 0:t.setContentItemSizes(e);return!1===this.option(H)?n:null===i||void 0===i?void 0:i.setContentItemSizes(e)}getPreloadedRowCount(){const e=this.option("scrolling.preloadedRowCount"),t=this.option("scrolling.preloadEnabled");if((0,u.O9)(e))return e;const i=this.viewportSize();return t?2*i:i}getLoadPageParams(e){var t,i;const n=this.pageSize(),o=this._loadViewportParams,s=null===(t=this._dataSource)||void 0===t?void 0:t.lastLoadOptions(),r=(null===s||void 0===s?void 0:s.pageIndex)||0,l=(null===s||void 0===s?void 0:s.take)||0,a=this._rowsScrollController.isScrollingBack(),d=a?this.getPreloadedRowCount():0,u=a?0:this.getPreloadedRowCount(),c=(null===(i=this._dataSource)||void 0===i?void 0:i.totalCountCorrection())||0,h=Math.max(0,o.skip-d),p=e?r:Math.floor(n?h/n:0),g=p*n,m=o.skip-g,_=o.take+m+u-c,C=e?l:_,f=Math.ceil(n?C/n:0);return{pageIndex:p,loadPageCount:Math.max(1,f),skipForCurrentPage:Math.max(0,m)}}_updateVisiblePageIndex(e){if(!this._rowsScrollController)return;if((0,u.O9)(e))return this._silentOption("paging.pageIndex",e),void this.pageChanged.fire();const t=this._rowsScrollController.getViewportItemIndex(),i=Math.floor(t/this.pageSize());this.pageIndex()!==i&&(this._silentOption("paging.pageIndex",i),this.updateItems({changeType:"pageIndex"}))}_getChangedLoadParams(){const e=this.getLoadPageParams(!0),{pageIndex:t,loadPageCount:i}=this.getLoadPageParams(),n=this._pageIndexIsValid(t);let o=null;return this._isLoading||!n||t===e.pageIndex&&i===e.loadPageCount||(o={pageIndex:t,loadPageCount:i}),o}_pageIndexIsValid(e){let t=!0;return(N(this)&&this.hasKnownLastPage()||M(this))&&(t=e*this.pageSize()<this.totalItemsCount()),t}_loadItems(e,t){const i=L(this),n=this._dataSource,o=this._getChangedLoadParams(),s=(null===n||void 0===n?void 0:n.loadPageCount())??0,r=this.pageSize()*s,l=(null===n||void 0===n?void 0:n.pageIndex())??0,a=(null===o||void 0===o?void 0:o.pageIndex)===l,d=N(this)&&this.totalItemsCount()<r,u="repaint"===this.option("editing.refreshMode"),c=(null===o||void 0===o?void 0:o.pageIndex)>l;let h=!1;if(!n||i&&e&&(u&&t||c||a&&d))return h;if(i&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),i&&o){h=!0,n.pageIndex(o.pageIndex),n.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;const e=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{const t=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(e||t)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return h}loadViewport(e){const{checkLoadedParamsOnly:t,checkLoading:i,viewportIsNotFilled:n}=e??{},o=L(this);if(o||g.A.isVirtualRowRendering(this)){var s;this._updateLoadViewportParams();const e=this._loadItems(i,!n),o=null===(s=this._dataSource)||void 0===s?void 0:s.isCustomLoading(),l=i&&!o&&this._isLoading,a=!(e||l||t);if(a){var r;const e=!(null!==(r=this._editingController)&&void 0!==r&&null!==(r=r.getChanges())&&void 0!==r&&r.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:e,cancelEmptyChanges:!0})}}}updateViewport(){var e;const t=this.viewportSize(),i=this.items().length,n=t>i,o=(null===(e=this._loadViewportParams)||void 0===e?void 0:e.take)??0,s=this._rowsScrollController,r=null===s||void 0===s?void 0:s.getViewportParams().take;(n||o<r)&&!this._isPaging&&i&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:n})}loadIfNeed(){if(!1===this.option(H))return;const e=this._rowsScrollController;e&&e.loadIfNeed();const t=this._dataSource;return null===t||void 0===t?void 0:t.loadIfNeed()}getItemSize(){const e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);const t=this._dataSource;return null===t||void 0===t?void 0:t.getItemSize.apply(t,arguments)}getItemSizes(){const e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);const t=this._dataSource;return null===t||void 0===t?void 0:t.getItemSizes.apply(t,arguments)}getContentOffset(){const e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);const t=this._dataSource;return null===t||void 0===t?void 0:t.getContentOffset.apply(t,arguments)}refresh(e){const t=this._dataSource;return t&&null!==e&&void 0!==e&&e.load&&N(this)&&t.resetCurrentTotalCount(),super.refresh.apply(this,arguments)}topItemIndex(){var e;return null===(e=this._loadViewportParams)||void 0===e?void 0:e.skip}bottomItemIndex(){const e=this._loadViewportParams;return e&&e.skip+e.take}virtualItemsCount(){const e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);const t=this._dataSource;return null===t||void 0===t?void 0:t.virtualItemsCount.apply(t,arguments)}pageIndex(e){const t=L(this),i=this._rowsScrollController;return!1===this.option(H)&&t&&i&&void 0===e?this.option("paging.pageIndex")??0:super.pageIndex.apply(this,arguments)}_fireChanged(e){super._fireChanged.apply(this,arguments);const{operationTypes:t}=e;if(!1===this.option(H)&&L(this)&&t){const{fullReload:i,pageIndex:n}=t;e.isDataChanged&&!i&&n&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}}_getPagingOptionValue(e){let t=super._getPagingOptionValue.apply(this,arguments);return!1===this.option(H)&&L(this)&&(t=this[e]()),t}isEmpty(){return!1===this.option(H)?!this.items(!0).length:super.isEmpty.apply(this,arguments)}isLastPageLoaded(){let e=!1;if(!1===this.option(H)&&L(this)){const{pageIndex:t,loadPageCount:i}=this.getLoadPageParams(!0),n=this.pageCount();e=t+i>=n}else e=super.isLastPageLoaded.apply(this,arguments);return e}reset(){this._itemCount=0,this._allItems=null,super.reset.apply(this,arguments)}_applyFilter(){var e;return null===(e=this._dataSource)||void 0===e||e.loadPageCount(1),super._applyFilter.apply(this,arguments)}getVirtualContentSize(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.getVirtualContentSize.apply(this._dataSource,arguments)}setViewportItemIndex(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.setViewportItemIndex.apply(this._dataSource,arguments)}isViewportChanging(){return this._viewportChanging||super.isViewportChanging()}},Y=e=>class extends e{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._resizeTimeout)}_updateMasterDataGridCore(e){return(0,s.z7)(super._updateMasterDataGridCore.apply(this,arguments)).done(t=>{const i=M(e)&&!1===e.option(H);if(!t&&i){const t=e.getScrollable();t&&e.updateDimensions()}})}hasResizeTimeout(){return(0,u.O9)(this._resizeTimeout)}resetLastResizeTime(){this._lastTime=void 0}resize(){let e;if(M(this)||g.A.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;const t=new Date-this._lastTime,i=this.option("scrolling.updateTimeout");this._lastTime&&t<i?(e=new s.cY,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,super.resize.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},i),this._lastTime=new Date):(e=super.resize.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=super.resize.apply(this);return e}},Q=e=>class extends e{init(){var e;super.init(),this._dataController.pageChanged.add(e=>{const t=this._scrollTop;this.scrollToPage(e??this._dataController.pageIndex()),!1===this.option(H)&&this._scrollTop===t&&this._dataController.updateViewport()}),this._dataController.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(e=this._dataController.stateLoaded)||void 0===e||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()}dispose(){clearTimeout(this._scrollTimeoutID),super.dispose()}_scrollToCurrentPageOnResize(){if(this._dataController.pageIndex()>0){const e=()=>{this.resizeCompleted.remove(e),this.scrollToPage(this._dataController.pageIndex())};this.resizeCompleted.add(e)}}scrollToPage(e){const t=this._dataController?this._dataController.pageSize():0;let i;if(M(this)||N(this)){const n=this._dataController.getItemSize(),o=this._dataController.getItemSizes(),s=e*t;i=s*n;for(const e in o)parseInt(e)<s&&(i+=o[e]-n)}else i=0;this.scrollTo({y:i,x:this._scrollLeft})}renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),super.renderDelayedTemplates.apply(this,arguments)}_renderCore(e){const t=new Date,i=super._renderCore.apply(this,arguments),n=this._dataController._dataSource;if(n&&e){const i=e.items?e.items.length:20,o=this._dataController.viewportSize()||20;g.A.isVirtualRowRendering(this)&&i>0&&!1!==this.option(H)?n._renderTime=(new Date-t)*o/i:n._renderTime=new Date-t}return i}_getRowElements(e){const t=super._getRowElements(e);return null===t||void 0===t?void 0:t.not(".dx-virtual-row")}_removeRowsElements(e,t,i){let o=this._getRowElements(e).toArray();o="append"===i?o.slice(0,t):o.slice(-t),o.map(e=>{const t=(0,n.A)(e);this._errorHandlingController&&this._errorHandlingController.removeErrorRow(t.next()),t.remove()})}_updateContent(e,t){let i;const n=this._findContentElement(),o=null===t||void 0===t?void 0:t.changeType,r=(0,s.cY)(),l=n.children().first();return"append"===o||"prepend"===o?this.waitAsyncTemplates().done(()=>{const n=this._getBodies(e);1===n.length?this._getBodies(l)["append"===o?"append":"prepend"](n.children()):n["append"===o?"appendTo":"prependTo"](l),e.remove(),i=this._getFreeSpaceRowElements(l),U(i,k),t.removeCount&&this._removeRowsElements(l,t.removeCount,o),this._restoreErrorRow(l),r.resolve()}).fail(r.reject):super._updateContent.apply(this,arguments).done(()=>{"update"===o&&this._restoreErrorRow(l),r.resolve()}).fail(r.reject),r.promise().done(()=>{this._updateBottomLoading()})}_addVirtualRow(e,t,i,n){if(!n)return;let o=this._createEmptyRow("dx-virtual-row",t,n);o=this._wrapRowIfNeed(e,o),this._appendEmptyRow(e,o,i)}_updateContentItemSizes(){const e=this._getRowHeights(),t=this._correctRowHeights(e);this._dataController.setContentItemSizes(t)}_updateViewportSize(e,t){(0,u.O9)(e)||(e=this._hasHeight?(0,d.P$)(this.element()):(0,d.P$)((0,c.zk)())),this._dataController.viewportHeight(e,t)}_getRowHeights(){var e,t;const i=null===(e=this._editingController)||void 0===e||null===(t=e.isPopupEditMode)||void 0===t?void 0:t.call(e);let o=this._getRowElements(this._tableElement).toArray();return i&&(o=o.filter(e=>!(0,n.A)(e).hasClass(B))),o.map(e=>(0,a.N)(e).height)}_correctRowHeights(e){const t=this._dataController,i=t._dataSource,n=[],o=t.getVisibleRows();let s=0,r=!0,l=-1;for(let a=0;a<e.length;a++){const t=o[a];(0,u.O9)(t)&&(!1===this.option(H)?(l>=0&&l!==t.loadIndex&&(n.push(s),s=0),l=t.loadIndex):K(t,i)&&(r?r=!1:(n.push(s),s=0)),s+=e[a])}return s>0&&n.push(s),n}_updateContentPosition(e){const t=this._rowHeight||20;if(this._dataController.viewportItemSize(t),M(this)||g.A.isVirtualRowRendering(this)){const t=this._dataController.isEmpty();if(t)return;e||this._updateContentItemSizes();const i=this._dataController.getContentOffset("begin"),o=this._dataController.getContentOffset("end"),s=this.getTableElements(),r=s.children("tbody").children(".dx-virtual-row");U(r,"dx-virtual-row"),s.each((e,t)=>{const s=e>0,r=this._isFixedTableRendering;this._isFixedTableRendering=s,this._addVirtualRow((0,n.A)(t),s,"top",i),this._addVirtualRow((0,n.A)(t),s,"bottom",o),this._isFixedTableRendering=r})}}_isTableLinesDisplaysCorrect(e){const t=e.find(".dx-column-lines").length>0;return t===this.option("showColumnLines")}_isColumnElementsEqual(e,t){let i=e.length===t.length;return i&&(0,l.__)(e,(e,n)=>{if(n.style.width!==t[e].style.width)return i=!1,i}),i}_getCellClasses(e){const t=[],{cssClass:i}=e,n="expand"===e.command;return i&&t.push(i),n&&t.push(this.addWidgetPrefix("group-space")),t}_findBottomLoadPanel(e){const t=e||this.element(),i=null===t||void 0===t?void 0:t.find(`.${this.addWidgetPrefix("bottom-load-panel")}`);if(null!==i&&void 0!==i&&i.length)return i}_updateBottomLoading(){const e=this,t=M(this),i=N(this),o=!e._dataController.hasKnownLastPage()&&e._dataController.isLoaded()&&(t||i),s=e._findContentElement(),r=e._findBottomLoadPanel(s);o?r||(0,n.A)("<div>").addClass(e.addWidgetPrefix("bottom-load-panel")).append(e._createComponent((0,n.A)("<div>"),h.A,{elementAttr:{role:null,"aria-label":null}}).$element()).appendTo(s):r&&r.remove()}_handleScroll(e){const t=!0===this.option(H),i=0===e.scrollOffset.top,n=this._scrollTop!==e.scrollOffset.top,o=n||e.forceUpdateScrollPosition,s=this._hasHeight||!t&&i;if(o&&s&&this._rowHeight){this._scrollTop=e.scrollOffset.top;const t=M(this)||"standard"!==this.option("scrolling.rowRenderingMode");t&&!1===this.option(H)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)}super._handleScroll.apply(this,arguments)}_needUpdateRowHeight(e){return super._needUpdateRowHeight.apply(this,arguments)||e>0&&N(this)&&!g.A.isVirtualRowRendering(this)}_updateRowHeight(){if(super._updateRowHeight.apply(this,arguments),this._rowHeight){this._updateContentPosition();const e=this._hasHeight?(0,d.P$)(this.element()):(0,d.P$)((0,c.zk)());!1===this.option(H)?(this._updateViewportSize(e),this._dataController.updateViewport()):this._dataController.viewportSize(Math.ceil(e/this._rowHeight))}}updateFreeSpaceRowHeight(){const e=super.updateFreeSpaceRowHeight.apply(this,arguments);return e&&this._updateContentPosition(),e}setLoading(e,t){const i=this._dataController,n=i.pageIndex()>0&&i.isLoaded()&&!!this._findBottomLoadPanel(),o=e&&!i.isCustomLoading();!1===this.option(H)&&o&&i.isViewportChanging()||(n&&(e=!1),super.setLoading.call(this,e,t))}isGridDragging(){return this.component.option("isDragging")}throwHeightWarningIfNeed(){const e=this.isGridDragging();if(void 0===this._hasHeight||e)return;const t=!this._hasHeight&&L(this);t&&!this._heightWarningIsThrown&&(this._heightWarningIsThrown=!0,p.A.log("W1025"))}_resizeCore(){const e=this,t=e.element();super._resizeCore(),this.throwHeightWarningIfNeed(),e.component.$element()&&!e._windowScroll&&(0,r.A1)(t)&&(e._windowScroll=P(t,t=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(t)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),!1!==this.option(H)&&e.loadIfNeed()}loadIfNeed(){var e,t;null===(e=this._dataController)||void 0===e||null===(t=e.loadIfNeed)||void 0===t||t.call(e)}_restoreErrorRow(e){var t;!1===this.option(H)&&(null===(t=this._errorHandlingController)||void 0===t||t.removeErrorRow());super._restoreErrorRow.apply(this,arguments)}},J={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{controllers:{data:X,resizing:Y},views:{rowsView:Q}}}},73148:function(e,t,i){i.d(t,{A:function(){return v}});var n=i(24906),o=i(96004),s=i(66529),r=i(92324),l=i(85563),a=i(85302),d=i(50172),u=i(35328),c=i(69274);const h=a.A.add,p=["info","warning","error","success"],g=[],m={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},_={h:0,v:0};h(()=>{const e=r.A.getDocument();n.A.subscribeGlobal(e,o.A.down,e=>{for(let n=g.length-1;n>=0;n-=1){var t,i;if(null===(t=(i=g[n])._proxiedDocumentDownHandler)||void 0===t||!t.call(i,e))return}})});class C extends u.A{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})}_defaultOptionsRules(){const e={displayTime:(0,c.Nt)((0,c.ss)())?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}},t=[{device:e=>"phone"===e.deviceType,options:Object.assign({width:"calc(100vw - 40px)"},e)},{device:e=>"tablet"===e.deviceType,options:Object.assign({width:"auto",maxWidth:"80vw"},e)},{device:e=>(0,c.Nt)((0,c.ss)())&&"desktop"===e.deviceType,options:{minWidth:344,maxWidth:568,displayTime:4e3}}],i=[...super._defaultOptionsRules(),...t];return i}_init(){super._init(),this._posStringToObject()}_renderContentImpl(){const{message:e,type:t}=this.option(),i=this.$content();return i&&(this._message=(0,l.A)("<div>").addClass("dx-toast-message").text(e??"").appendTo(i)),this.setAria("role","alert",this._message),t&&p.includes(t.toLowerCase())&&(null===i||void 0===i||i.prepend((0,l.A)("<div>").addClass("dx-toast-icon"))),super._renderContentImpl()}_render(){var e,t,i;super._render(),null===(e=this.$element())||void 0===e||e.addClass("dx-toast"),null===(t=this.$wrapper())||void 0===t||t.addClass("dx-toast-wrapper");const{type:n}=this.option();var o;n&&(null===(o=this.$content())||void 0===o||o.addClass(`dx-toast-${n.toLowerCase()}`));null===(i=this.$content())||void 0===i||i.addClass("dx-toast-content"),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")}_toggleCloseEvents(e){const t=`dx${e.toLowerCase()}`;n.A.off(this.$content(),t);const i=`closeOn${e}`,o=this.option(i);o&&n.A.on(this.$content(),t,this.hide.bind(this))}_posStringToObject(){const{position:e}=this.option();if(!(0,d.Kg)(e))return;const t=e.split(" ")[0],i=e.split(" ")[1],n=Object.assign({boundaryOffset:_},m[t]);switch(this.option("position",n),i){case"center":case"left":case"right":if(n&&"object"===typeof n){const e=`${n.at} ${i}`,t=`${n.my} ${i}`;this.option("position.at",e),this.option("position.my",t)}}}_show(){const e=super._show();return e.always(()=>{clearTimeout(this._hideTimeout);const{displayTime:e}=this.option();this._hideTimeout=setTimeout(this.hide.bind(this),e)}),e}_overlayStack(){return g}_zIndexInitValue(){return super._zIndexInitValue()+8e3}_dispose(){clearTimeout(this._hideTimeout),super._dispose()}_optionChanged(e){var t;const{name:i,value:n,previousValue:o}=e;switch(i){case"type":var s;if(null===(t=this.$content())||void 0===t||t.removeClass(`dx-toast-${o}`),n)null===(s=this.$content())||void 0===s||s.addClass(`dx-toast-${String(n).toLowerCase()}`);break;case"message":this._message&&this._message.text(n);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:super._optionChanged(e)}}}(0,s.A)("dxToast",C);var f=C,v=f},74714:function(e,t,i){i.d(t,{$:function(){return ie}});i(69375),i(82438),i(12266),i(99819),i(57327);var n=i(24906),o=i(74567),s=i(63027),r=i(85563),l=i(39889),a=i(44956),d=i(89214),u=i(63825),c=i(50172),h=i(47426),p=i(96084),g=i(96004),m=i(66529),_=i(35754),C=i(98793),f=i(35328),v=i(67813),x=i(58982),w=i(20013),y=(i(16086),i(93076)),b=i(77856);class I extends b.Ay{_getMaxUsableSpace(e,t,i){return Math.max(e,t-e-i)}_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:l.lQ})}_initDataAdapter(){const{_dataAdapter:e}=this.option();this._dataAdapter=e,this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();const{_parentKey:e}=this.option(),t=this._dataAdapter.getNodeByKey(e);t&&this._renderItems(this._getChildNodes(t)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,r.A)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,a.X)(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(e){this._showDelimiter(e)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){const{orientation:e}=this.option();return"horizontal"===e}_hoverStartHandler(e){const{onHoverStart:t}=this.option();null===t||void 0===t||t(e),super._hoverStartHandler(e)}_drawSubmenu(e){var t,i,n,o;null===(t=(i=this._actions).onShowing)||void 0===t||t.call(i,{rootItem:(0,_.cc)(e),submenu:this}),super._drawSubmenu(e),null===(n=(o=this._actions).onShown)||void 0===n||n.call(o,{rootItem:(0,_.cc)(e),submenu:this})}_hideSubmenu(e){var t,i,n,o;null===(t=(i=this._actions).onHiding)||void 0===t||t.call(i,{cancel:!0,rootItem:(0,_.cc)(e),submenu:this}),super._hideSubmenu(e),null===(n=(o=this._actions).onHidden)||void 0===n||n.call(o,{rootItem:(0,_.cc)(e),submenu:this})}_getDelimiterWidth(e,t){if(this._isMenuHorizontal()){const i=(0,u.RG)(e),n=(0,u.RG)(t);return i<n?i:n}return 3}_getDelimiterHeight(e,t){if(this._isMenuHorizontal())return 3;const i=(0,u.Oq)(e),n=(0,u.Oq)(t);return i<n?i:n}_showDelimiter(e){if(!this.$contentDelimiter)return;const{position:t}=this.option(),i=this._itemContainer().children(".dx-submenu").eq(0),n=(0,r.A)(null===t||void 0===t?void 0:t.of).find(".dx-context-menu-container-border"),o={of:i,precise:!0},s=e.position,l=s.v.location,a=s.h.location,d=n.offset(),c=Math.round((null===d||void 0===d?void 0:d.left)??0),h=Math.round((null===d||void 0===d?void 0:d.top)??0);this.$contentDelimiter.css("display","block"),(0,u.zj)(this.$contentDelimiter,this._getDelimiterWidth(n,i)),(0,u.k$)(this.$contentDelimiter,this._getDelimiterHeight(n,i)),this._isMenuHorizontal()?l>h?Math.round(a)===c?(o.offset="0 -2.5",o.at="left top",o.my="left top"):(o.offset="0 -2.5",o.at="right top",o.my="right top"):((0,u.k$)(this.$contentDelimiter,5),Math.round(a)===c?(o.offset="0 5",o.at="left bottom",o.my="left bottom"):(o.offset="0 5",o.at="right bottom",o.my="right bottom")):a>c?Math.round(l)===h?(o.offset="-2.5 0",o.at="left top",o.my="left top"):(o.offset="-2.5 0",o.at="left bottom",o.my="left bottom"):Math.round(l)===h?(o.offset="2.5 0",o.at="right top",o.my="right top"):(o.offset="2.5 0",o.at="right bottom",o.my="right bottom"),y.A.setup(this.$contentDelimiter,o)}_getContextMenuPosition(){const{position:e}=this.option();return e}isOverlayVisible(){var e;const{visible:t}=(null===(e=this._overlay)||void 0===e?void 0:e.option())??{};return t}getOverlayContent(){var e;return null===(e=this._overlay)||void 0===e?void 0:e.$content()}}var S=I;const A="dx-menu-adaptive-mode",E=`${A}-overlay-wrapper`,R={show:50,hide:300},O=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class T extends x.A{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,a.X)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){const e=super._itemElements(),t=this._submenuItemElements();return e.add(t)}_submenuItemElements(){const e=this._submenus.length&&this._submenus[0];var t;return e&&e.itemsContainer()?(null===(t=e.itemsContainer())||void 0===t?void 0:t.find(".dx-menu-item"))??(0,r.A)():(0,r.A)()}_focusTarget(){return this.$element()}_isMenuHorizontal(){const{orientation:e}=this.option();return"horizontal"===e}_moveFocus(e){const t=this._getAvailableItems(),i=this._isMenuHorizontal(),n=this._getActiveItem(!0);let o,s;switch(e){case"up":s=i?"showSubmenu":this._getItemsNavigationOperation("prevItem"),o=i?n:t;break;case"down":s=i?"showSubmenu":this._getItemsNavigationOperation("nextItem"),o=i?n:t;break;case"right":s=i?this._getItemsNavigationOperation("nextItem"):"showSubmenu",o=i?t:n;break;case"left":s=i?this._getItemsNavigationOperation("prevItem"):"showSubmenu",o=i?t:n;break;default:return super._moveFocus(e)}const r=this._getKeyboardNavigationAction(s,o),l=r();l&&0!==l.length&&this.option("focusedElement",(0,_.cc)(l))}_getItemsNavigationOperation(e){const{rtlEnabled:t}=this.option();return t?"prevItem"===e?"nextItem":"prevItem":e}_getKeyboardNavigationAction(e,t){let i=l.lQ;switch(e){case"showSubmenu":t.hasClass("dx-state-disabled")||(i=this._showSubmenu.bind(this,t));break;case"nextItem":i=this._nextItem.bind(this,t);break;case"prevItem":i=this._prevItem.bind(this,t)}return i}_clean(){super._clean();const{templatesRenderAsynchronously:e}=this.option();e&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(e){e&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){const{adaptivityEnabled:e,orientation:t}=this.option();return!!e&&"horizontal"===t}_updateItemsWidthCache(){const e=this.$element().find("ul").first().children("li").children(".dx-menu-item");this._menuItemsWidth=this._getSummaryItemsSize("width",e,!0)}_dimensionChanged(){if(!this._isAdaptivityEnabled())return;const e=(0,u.Ot)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>e)}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,d.__)(O,(e,t)=>{this._actions[t]=this._createActionByOption(t)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass("dx-menu"),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_setAriaRole(e){const t=this._isAdaptivityEnabled()&&e?void 0:"menubar";this.setAria({role:t})}_render(){super._render(),this._initAdaptivity()}_isTargetOutOfComponent(e){const t=0!==(0,r.A)(e).closest(".dx-menu").length,i=0!==(0,r.A)(e).closest(".dx-context-menu").length;return!(t||i)}_focusOutHandler(e){const{relatedTarget:t}=e;if(t){const e=this._isTargetOutOfComponent(t);e&&this._hideVisibleSubmenu()}super._focusOutHandler(e)}_renderHamburgerButton(){return this._hamburger=new C.A((0,r.A)("<div>").addClass("dx-menu-hamburger-button"),{icon:"menu",activeStateEnabled:!1,onClick:()=>{this._toggleTreeView()}}),this._hamburger.$element()}_toggleTreeView(e){var t,i;const n=e??!(null!==(t=this._overlay)&&void 0!==t&&null!==(t=t.option())&&void 0!==t&&t.visible);var o;(null===(i=this._overlay)||void 0===i||i.option("visible",n),n)&&(null===(o=this._treeView)||void 0===o||o.focus());this._toggleHamburgerActiveState(n)}_toggleHamburgerActiveState(e){var t;null===(t=this._hamburger)||void 0===t||t.$element().toggleClass("dx-state-active",e)}_toggleAdaptiveMode(e){const t=this.$element().find(".dx-menu-horizontal"),i=this.$element().find(`.${A}`);var n;e?this._hideVisibleSubmenu():(null===(n=this._treeView)||void 0===n||n.collapseAll(),this._overlay&&this._toggleTreeView(e));this._setAriaRole(e),t.toggle(!e),i.toggle(e)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){var t;this._actions.onItemClick(e),null!==(t=e.node)&&void 0!==t&&null!==(t=t.children)&&void 0!==t&&t.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var e;const{rtlEnabled:t}=this.option(),i=t?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>(0,w.J)(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:e=>!(0,r.A)(e.target).closest(".dx-menu-hamburger-button").length,position:{collision:"flipfit",at:`bottom ${i}`,my:`top ${i}`,of:null===(e=this._hamburger)||void 0===e?void 0:e.$element()}}}_getTreeViewOptions(){const e={};(0,d.__)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(t,i)=>{e[i]=this.option(i)}),(0,d.__)(["onItemContextMenu","onSelectionChanged","onItemRendered"],(t,i)=>{e[i]=e=>{this._actions[i](e)}});const{animation:t,selectByClick:i}=this.option();return Object.assign({},e,{dataSource:this.getDataSource(),animationEnabled:!!t,onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:e=>{var t,i,n;null===(t=this._overlay)||void 0===t||t.repaint(),null===(i=(n=this._actions).onSubmenuShown)||void 0===i||i.call(n,e)},onItemCollapsed:e=>{var t,i,n;null===(t=this._overlay)||void 0===t||t.repaint(),null===(i=(n=this._actions).onSubmenuHidden)||void 0===i||i.call(n,e)},selectNodesRecursive:!1,selectByClick:i,expandEvent:"click",_supportItemUrl:!0})}_initAdaptivity(){var e,t;if(!this._isAdaptivityEnabled())return;const{cssClass:i}=this.option(),n=this._renderHamburgerButton();this._treeView=this._createComponent((0,r.A)("<div>"),v.A,this._getTreeViewOptions()),this._overlay=this._createComponent((0,r.A)("<div>"),f.A,this._getAdaptiveOverlayOptions()),null===(e=this._overlay.$content())||void 0===e||e.append(this._treeView.$element()).addClass(A).addClass(i),null===(t=this._overlay.$wrapper())||void 0===t||t.addClass(E),this._$adaptiveContainer=(0,r.A)("<div>").addClass(A),this._$adaptiveContainer.append(n),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}_getDelay(e){const{showFirstSubmenuMode:t}=this.option(),i=(0,c.Gv)(t)?t.delay:void 0;return(0,c.O9)(i)?(0,c.Gv)(i)?i[e]??R[e]:i:R[e]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){const e=(0,r.A)("<div>");return e.appendTo(this.$element()).addClass(this._isMenuHorizontal()?"dx-menu-horizontal":"dx-menu-vertical"),super._renderContainer(e)}_renderSubmenuItems(e,t){const i=this._createSubmenu(e,t);return this._submenus.push(i),this._renderBorderElement(t),i}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(e,t){const i=(0,r.A)("<div>").addClass("dx-context-menu").appendTo(t),n=this._getChildNodes(e),o=this._createComponent(i,S,Object.assign({},this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:e.internalFields.key,items:n,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(t)}));return this._attachSubmenuHandlers(t,o),o}_getSubmenuOptions(){const e=(0,r.A)("<div>"),t=this._isMenuHorizontal(),{itemTemplate:i,orientation:n,selectionMode:o,cssClass:s,selectByClick:l,hoverStateEnabled:a,activeStateEnabled:d,focusStateEnabled:u,animation:c,showSubmenuMode:h,displayExpr:p,disabledExpr:g,selectedExpr:m,itemsExpr:_}=this.option();return{itemTemplate:i,target:e,orientation:n,selectionMode:o,cssClass:s,selectByClick:l,hoverStateEnabled:a,activeStateEnabled:d,focusStateEnabled:u,animation:c,showSubmenuMode:h,displayExpr:p,disabledExpr:g,selectedExpr:m,itemsExpr:_,onFocusedItemChanged:e=>{const{visible:t,focusedElement:i}=e.component.option();t&&this.option("focusedElement",i)},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:t?null:this._moveMainMenuFocus.bind(this,"prevItem"),onLeftLastItem:t?null:this._moveMainMenuFocus.bind(this,"nextItem"),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,t?"prevItem":null),onExpandLastSubmenu:t?this._moveMainMenuFocus.bind(this,"nextItem"):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";const{showFirstSubmenuMode:e}=this.option();return(0,c.Gv)(e)?e.name:e}_moveMainMenuFocus(e){const t=this._getAvailableItems(),i=t.length,n=t.filter(".dx-menu-item-expanded").eq(0);let o=t.index(n);this._hideSubmenu(this._visibleSubmenu),o+="prevItem"===e?-1:1,o>=i?o=0:o<0&&(o=i-1);const s=t.eq(o);this.option("focusedElement",(0,_.cc)(s))}_nestedItemOnSelectionChangedHandler(e){const t=e.addedItems.length&&e.addedItems[0],i=S.getInstance(e.element),{onSelectionChanged:n}=this._actions;null===n||void 0===n||n(e),t&&this._clearSelectionInSubmenus(i),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",t)}_clearSelectionInSubmenus(e){const t=!arguments.length;(0,d.__)(this._submenus,(i,n)=>{const o=n._itemContainer(),s=!o.is(null===e||void 0===e?void 0:e._itemContainer()),r=o.find(`.${this._selectedItemClass()}`);if(s&&r.length||t){r.removeClass(this._selectedItemClass());const e=this._getItemData(r);e&&(e.selected=!1),n._clearSelectedItems()}})}_clearRootSelection(){const e=this.$element().find(".dx-menu-items-container").first().children().children().filter(`.${this._selectedItemClass()}`);if(e.length){const t=this._getItemData(e);t.selected=!1,e.removeClass(this._selectedItemClass())}}_nestedItemOnItemClickHandler(e){var t,i;null===(t=(i=this._actions).onItemClick)||void 0===t||t.call(i,e)}_nestedItemOnItemRenderedHandler(e){var t,i;null===(t=(i=this._actions).onItemRendered)||void 0===t||t.call(i,e)}_attachSubmenuHandlers(e,t){const i=t.getOverlayContent(),s=null===i||void 0===i?void 0:i.find(".dx-submenu"),r=(0,o.b4)(p._,`${this.NAME}_submenu`);t.option({onShowing:this._submenuOnShowingHandler.bind(this,e,t),onShown:this._submenuOnShownHandler.bind(this,e,t),onHiding:this._submenuOnHidingHandler.bind(this,e,t),onHidden:this._submenuOnHiddenHandler.bind(this,e,t)}),(0,d.__)(s,(t,i)=>{n.A.off(i,r),n.A.on(i,r,null,this._submenuMouseLeaveHandler.bind(this,e))})}_submenuOnShowingHandler(e,t,i){var n,o;let{rootItem:s}=i;const r=e.children(".dx-context-menu-container-border"),l=this._getVisibilityChangeEventParams(s,t,e);null===(n=(o=this._actions).onSubmenuShowing)||void 0===n||n.call(o,l),r.show(),e.addClass("dx-menu-item-expanded")}_submenuOnShownHandler(e,t,i){var n,o;let{rootItem:s}=i;const r=this._getVisibilityChangeEventParams(s,t,e);null===(n=(o=this._actions).onSubmenuShown)||void 0===n||n.call(o,r)}_submenuOnHidingHandler(e,t,i){var n,o;const s=e.children(".dx-context-menu-container-border"),r=this._getVisibilityChangeEventParams(i.rootItem,t,e,!0);i.itemData=r.itemData,i.rootItem=r.rootItem,i.submenuContainer=r.submenuContainer,i.submenu=r.submenu,null===(n=(o=this._actions).onSubmenuHiding)||void 0===n||n.call(o,i);const{focusedElement:l}=this.option(),{focusedElement:a}=t.option(),d=this._visibleSubmenu===t,u=l===a;d&&u&&this.option("focusedElement",(0,_.cc)(e)),i.cancel||(d&&(this._visibleSubmenu=null),s.hide(),e.removeClass("dx-menu-item-expanded"))}_submenuOnHiddenHandler(e,t,i){var n,o;let{rootItem:s}=i;const r=this._getVisibilityChangeEventParams(s,t,e,!0);null===(n=(o=this._actions).onSubmenuHidden)||void 0===n||n.call(o,r)}_getVisibilityChangeEventParams(e,t,i,n){let o,s;if(e){const t=n?(0,r.A)(e).closest(".dx-menu-item")[0]:e;o=this._getItemData(t),s=(0,r.A)(t).find(".dx-submenu").first()}else{var l;const e=(0,r.A)(null===(l=t._overlay)||void 0===l?void 0:l.content());o=this._getItemData(i),s=e.find(".dx-submenu").first()}return{itemData:o,rootItem:(0,_.cc)(i),submenuContainer:(0,_.cc)(s),submenu:t}}_submenuMouseLeaveHandler(e,t){var i;const n=(0,r.A)(t.relatedTarget).parents(".dx-context-menu")[0],o=this._getSubmenuByRootElement(e),s=null===o||void 0===o||null===(i=o.getOverlayContent())||void 0===i?void 0:i[0],{hideSubmenuOnMouseLeave:l}=this.option();l&&n!==s&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){var e,t;if(!this._visibleSubmenu)return;const i=(0,r.A)(this._visibleSubmenu.$element().context).hasClass("dx-state-hover"),n=null===(e=this._visibleSubmenu.getOverlayContent())||void 0===e?void 0:e.find(".dx-state-hover").length,o=null===(t=this._visibleSubmenu.getOverlayContent())||void 0===t?void 0:t.get(0).querySelector(":hover");o||n||i||this._visibleSubmenu.hide()}_getSubmenuByRootElement(e){if(!e)return;const t=e.children(".dx-context-menu");return t.length?S.getInstance(t):void 0}getSubmenuPosition(e){const{submenuDirection:t,rtlEnabled:i}=this.option(),n=this._isMenuHorizontal(),o=null===t||void 0===t?void 0:t.toLowerCase(),s={collision:"flip",of:e,precise:!0};switch(o){case"leftortop":s.at="left top",s.my=n?"left bottom":"right top";break;case"rightorbottom":s.at=n?"left bottom":"right top",s.my="left top";break;default:n?(s.at=i?"right bottom":"left bottom",s.my=i?"right top":"left top"):(s.at=i?"left top":"right top",s.my=i?"right top":"left top")}return s}_renderBorderElement(e){(0,r.A)("<div>").appendTo(e).addClass("dx-context-menu-container-border").hide()}_itemPointerHandler(e){const t=(0,r.A)(e.target),i=t.closest(this._itemElements());i.hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerHandler(e)}_hoverStartHandler(e){const t=(0,o.b4)(g.A.move,this.NAME),i=this._getItemElementByEventArgs(e);if(!i||this._isItemDisabled(i))return;const s=this._dataAdapter.getNodeByItem(this._getItemData(i)),r=(0,c.O9)(e.buttons)&&1===e.buttons||!(0,c.O9)(e.buttons)&&1===e.which;if(n.A.off(i,t),this._hasChildren(s)){if("onHover"===this._getShowFirstSubmenuMode()&&!r){const e=this._getSubmenuByElement(i);this._clearTimeouts(),null!==e&&void 0!==e&&e.isOverlayVisible()||(n.A.on(i,t,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}else this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide"))}_hoverEndHandler(e){const t=this._getItemElementByEventArgs(e),i=(0,r.A)(e.relatedTarget);if(super._hoverEndHandler(e),this._clearTimeouts(),!t||this._isItemDisabled(t))return;if(i.hasClass("dx-context-menu-content-delimiter"))return;const{hideSubmenuOnMouseLeave:n}=this.option();n&&!i.hasClass("dx-menu-items-container")&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide")))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu(e){const t=this._getSubmenuByElement(e);if(this._visibleSubmenu!==t&&this._hideVisibleSubmenu(),t){this._clearTimeouts(),this.focus(),t.show();const{focusedElement:e}=t.option();this.option("focusedElement",e)}this._visibleSubmenu=t,this._hoveredRootItem=e}_hideSubmenu(e){e&&e.hide(),this._visibleSubmenu===e&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){var t;if(null!==(t=e.pointers)&&void 0!==t&&t.length)return;const i=(0,r.A)(e.currentTarget);(0,c.O9)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{const e=this._getSubmenuByElement(i);e&&!e.isOverlayVisible()&&this._showSubmenu(i)},this._getDelay("show")))}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(e,t){const i=this._getSubmenuByRootElement(e);if(i)return i;const n=this._dataAdapter.getNodeByItem(t??this._getItemData(e));return n&&this._hasChildren(n)?this._renderSubmenuItems(n,e):void 0}_updateSubmenuVisibilityOnClick(e){var t;const i=null===(t=e.args)||void 0===t?void 0:t[0];if(!i||this._disabledGetter(i.itemData))return;const n=(0,r.A)(i.itemElement),o=this._getSubmenuByElement(n,i.itemData);if(this._updateSelectedItemOnClick(e),this._visibleSubmenu){if(this._visibleSubmenu===o){const{showFirstSubmenuMode:e}=this.option();return void("onClick"===e&&this._hideSubmenu(this._visibleSubmenu))}this._hideSubmenu(this._visibleSubmenu)}o&&(o.isOverlayVisible()||this._showSubmenu(n))}_optionChanged(e){if(O.includes(e.name))this._initActions();else switch(e.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(e);break;case"adaptivityEnabled":e.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":var t,i;if(this._isAdaptivityEnabled())null===(t=this._treeView)||void 0===t||t.option(e.name,e.value),null===(i=this._overlay)||void 0===i||i.option(e.name,e.value);super._optionChanged(e),this._dimensionChanged();break;case"animation":var n;if(this._isAdaptivityEnabled())null===(n=this._treeView)||void 0===n||n.option("animationEnabled",!!e.value);super._optionChanged(e);break;default:var o;if(this._isAdaptivityEnabled()&&(e.name===e.fullName||"items"===e.name))null===(o=this._treeView)||void 0===o||o.option(e.fullName,e.value);super._optionChanged(e)}}_changeSubmenusOption(e){let{name:t,value:i}=e;(0,d.__)(this._submenus,(e,n)=>{n.option(t,i)})}selectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}unselectItem(e){this._hideSubmenu(this._visibleSubmenu),super.unselectItem(e)}}(0,m.A)("dxMenu",T);var V=T,F=V,P=i(96283),D=i(91125),k=i(20338);const B={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},H={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},z="dx-filter-menu",M="input:not([type='hidden'])",N=["date","datetime","number"];function L(e){return"onClick"===e.option("filterRow.applyFilter")}const W=function(e){const t=null===e||void 0===e?void 0:e.children(),i=null===t||void 0===t?void 0:t.data("dxComponents"),n=(null===i||void 0===i?void 0:i.length)&&t.data(i[0]);return n instanceof h.A?n:null},K=function(e,t){let i="",n="";const o=$(e,t),s=k.A.getFormatOptionsByColumn(t,"filterRow");return Array.isArray(o)?(i=k.A.formatValue(o[0],s),n=k.A.formatValue(o[1],s),""!==n&&(i+=` - ${n}`)):(0,c.O9)(o)&&(i=k.A.formatValue(o,s)),i};function $(e,t){if(t)return L(e)&&void 0!==t.bufferedFilterValue?t.bufferedFilterValue:t.filterValue}const G=function(e,t){if(t)return L(e)&&void 0!==t.bufferedSelectedFilterOperation?t.bufferedSelectedFilterOperation:t.selectedFilterOperation},q=function(e,t){return!(t&&N.includes(t.dataType)&&Array.isArray(e))&&void 0!==e},U=function(e,t,i){const n=e._columnsController.columnOption(t),o=$(e,n),s=i.closest(`.${e.addWidgetPrefix("filter-range-overlay")}`).length,r=i.hasClass(e.addWidgetPrefix("filter-range-start"));return o&&Array.isArray(o)&&"between"===G(e,n)?r?o[0]:o[1]:!s&&q(o,n)?o:null},j=function(e,t,i,n){if("between"===G(e,i)){const o=$(e,i);return n.hasClass(e.addWidgetPrefix("filter-range-start"))?[t,Array.isArray(o)?o[1]:void 0]:[Array.isArray(o)?o[0]:o,t]}return t},X=function(e,t){const i=""===t.value?null:t.value,n=t.container,o=e._columnsController.columnOption(t.column.index),s=U(e,o.index,n);if(!(0,c.O9)(s)&&!(0,c.O9)(i))return;e._applyFilterViewController.setHighLight(n,s!==i);const r=L(e)?"bufferedFilterValue":"filterValue",l=j(e,i,o,n),a="between"===G(e,o),d=t.notFireEvent||a&&Array.isArray(l)&&l.includes(void 0);e._columnsController.columnOption(o.index,r,l,d)},Y=e=>class extends e{init(){super.init(),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){switch(e.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;case"syncLookupFilterValues":e.value?this.updateLookupDataSource():this.render(),e.handled=!0;break;default:super.optionChanged(e)}}_updateEditorValue(e,t){const i=W(t);i&&i.option("value",U(this,e.index,t))}_columnOptionChanged(e){const t=this,{optionNames:i}=e;let n,o,s,l;if(k.A.checkChanges(i,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==e.columnIndex){const a=t._columnsController.getVisibleIndex(e.columnIndex),d=t._columnsController.columnOption(e.columnIndex);if(n=t._getCellElement(t.element().find(`.${t.addWidgetPrefix("filter-row")}`).index(),a)??(0,r.A)(),o=n.find(".dx-editor-container").first(),i.filterValue||i.bufferedFilterValue){t._updateEditorValue(d,o);const e=n.find(`.${t.addWidgetPrefix("filter-range-overlay")}`).data("dxOverlay");e&&(s=e.$content().find(".dx-editor-container"),t._updateEditorValue(d,s.first()),t._updateEditorValue(d,s.last())),null!==e&&void 0!==e&&e.option("visible")||t._updateFilterRangeContent(n,K(t,d))}return void((i.selectedFilterOperation||i.bufferedSelectedFilterOperation)&&a>=0&&d&&(l=n.find(".dx-menu"),l.length&&(t._updateFilterOperationChooser(l,d,o),"between"===G(t,d)?t._renderFilterRangeContent(n,d):o.find(".dx-filter-range-content").length&&(t._renderEditor(o,t._getEditorOptions(o,d)),t._hideFilterRange()))))}super._columnOptionChanged(e)}_renderCore(){return this._filterRangeOverlayInstance=null,super._renderCore.apply(this,arguments)}_resizeCore(){var e;super._resizeCore.apply(this,arguments),null===(e=this._filterRangeOverlayInstance)||void 0===e||e.repaint()}isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))}isVisible(){return super.isVisible()||this.isFilterRowVisible()}_initFilterRangeOverlay(e,t){const i=this,s={},l=e.find(".dx-editor-container"),a=i.addWidgetPrefix("filter-range-overlay"),d=(0,r.A)("<div>").addClass(a).appendTo(e);return i._createComponent(d,f.A,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,hideOnParentScroll:!0,_hideOnParentScrollTarget:d,wrapperAttr:{class:a},animation:!1,position:{my:"top",at:"top",of:l.length&&l||e,offset:"0 -1"},contentTemplate(l){let a,d=(0,r.A)("<div>").addClass(`dx-editor-container ${i.addWidgetPrefix("filter-range-start")}`).appendTo(l);return t=i._columnsController.columnOption(t.index),a=i._getEditorOptions(d,t),a.sharedData=s,i._renderEditor(d,a),n.A.on(d.find(M),"keydown",t=>{let s=e.find("[tabindex]").not(t.target).first();"tab"===(0,o.YD)(t)&&t.shiftKey&&(t.preventDefault(),i._hideFilterRange(),s.length||(s=e.prev().find("[tabindex]").last()),n.A.trigger(s,"focus"))}),d=(0,r.A)("<div>").addClass(`dx-editor-container ${i.addWidgetPrefix("filter-range-end")}`).appendTo(l),a=i._getEditorOptions(d,t),a.sharedData=s,i._renderEditor(d,a),n.A.on(d.find(M),"keydown",t=>{"tab"!==(0,o.YD)(t)||t.shiftKey||(t.preventDefault(),i._hideFilterRange(),n.A.trigger(e.next().find("[tabindex]").first(),"focus"))}),(0,r.A)(l).addClass(i.getWidgetContainerClass())},onShown(e){const t=e.component.$content().find(".dx-editor-container").first();n.A.trigger(t.find(M),"focus")},onHidden(){t=i._columnsController.columnOption(t.index),e.find(".dx-menu").parent().addClass("dx-editor-with-menu"),"between"===G(i,t)&&(i._updateFilterRangeContent(e,K(i,t)),i.component.updateDimensions())}})}_updateFilterRangeOverlay(e){const t=this._filterRangeOverlayInstance;null===t||void 0===t||t.option(e)}_showFilterRange(e,t){const i=this,n=e.children(`.${i.addWidgetPrefix("filter-range-overlay")}`);let o=n.length&&n.data("dxOverlay");var s,r;(!o&&t&&(o=i._initFilterRangeOverlay(e,t)),o.option("visible"))||(null===(s=i._filterRangeOverlayInstance)||void 0===s||s.hide(),i._filterRangeOverlayInstance=o,i._updateFilterRangeOverlay({width:(0,u.Ot)(e,!0)+1}),null===(r=i._filterRangeOverlayInstance)||void 0===r||r.show())}_hideFilterRange(){const e=this._filterRangeOverlayInstance;null===e||void 0===e||e.hide()}getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance}_createRow(e){const t=super._createRow(e);return"filter"===e.rowType&&(t.addClass(this.addWidgetPrefix("filter-row")),this.option("useLegacyKeyboardNavigation")||n.A.on(t,"keydown",e=>(0,P.sf)("filterRow",this,e))),t}_getRows(){const e=super._getRows();return this.isFilterRowVisible()&&e.push({rowType:"filter"}),e}_renderFilterCell(e,t){var i;const n=this,{column:o}=t,l=(0,r.A)(e);n.component.option("showColumnHeaders")&&n.setAria("describedby",o.headerId,l),n.setAria("label",s.A.format("dxDataGrid-ariaFilterCell"),l),l.addClass("dx-editor-cell");const a=(0,r.A)("<div>").appendTo(l),d=(0,r.A)("<div>").addClass("dx-editor-container").appendTo(a);if("between"===G(n,o))n._renderFilterRangeContent(l,o);else{const e=n._getEditorOptions(d,o);n._renderEditor(d,e)}const{alignment:u}=o;u&&"center"!==u&&l.find(M).first().css("textAlign",o.alignment),null!==(i=o.filterOperations)&&void 0!==i&&i.length&&n._renderFilterOperationChooser(a,o,d)}_renderCellContent(e,t){const i=this,{column:n}=t;if("filter"===t.rowType)if(n.command)e.html("&nbsp;");else if(n.allowFiltering)return void i.renderTemplate(e,i._renderFilterCell.bind(i),t).done(()=>{i._updateCell(e,t)});super._renderCellContent.apply(this,arguments)}_getEditorOptions(e,t){const i=this,n={editorOptions:{inputAttr:i._getFilterInputAccessibilityAttributes(t)}},o=(0,a.X)(n,t,{value:U(i,t.index,e),parentType:"filterRow",showAllText:i.option("filterRow.showAllText"),updateValueTimeout:"onClick"===i.option("filterRow.applyFilter")?0:700,width:null,setValue(n,o){X(i,{column:t,value:n,container:e,notFireEvent:o})}});return"between"===G(i,t)&&(e.hasClass(i.addWidgetPrefix("filter-range-start"))?o.placeholder=i.option("filterRow.betweenStartText"):o.placeholder=i.option("filterRow.betweenEndText")),o}_getFilterInputAccessibilityAttributes(e){const t=s.A.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":t,"aria-describedby":e.headerId}:{"aria-label":t}}_renderEditor(e,t){e.empty();const i=(0,r.A)("<div>").appendTo(e),n=this._dataController.dataSource();if(t.lookup&&this.option("syncLookupFilterValues")){this._applyFilterViewController.setCurrentColumnForFiltering(t);const e=this._dataController.getCombinedFilter();this._applyFilterViewController.setCurrentColumnForFiltering(null);const o=k.A.getWrappedLookupDataSource(t,n,e),s=Object.assign({},t,{lookup:Object.assign({},t.lookup,{dataSource:o})});return this._editorFactoryController.createEditor(i,s)}return this._editorFactoryController.createEditor(i,t)}_renderFilterRangeContent(e,t){const i=this,o=e.find(".dx-editor-container").first();o.empty();const s=(0,r.A)("<div>").addClass("dx-filter-range-content").attr("tabindex",this.option("tabIndex"));n.A.on(s,"focusin",()=>{i._showFilterRange(e,t)}),s.appendTo(o),i._updateFilterRangeContent(e,K(i,t))}_updateFilterRangeContent(e,t){const i=e.find(".dx-filter-range-content");i.length&&(""===t?i.html("&nbsp;"):i.text(t))}_updateFilterOperationChooser(e,t,i){var o;const l=this;let a;const d=function(){const t=F.getInstance(e);t&&t.option("focusedElement",null),a&&l._focusEditor(i)},u=this._editorFactoryController,c=s.A.format("dxDataGrid-ariaSearchBox");l._createComponent(e,F,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:`${l.getWidgetContainerClass()} dx-cell-focus-disabled ${z}`,showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{name:G(l,t)||c,disabled:!(null!==(o=t.filterOperations)&&void 0!==o&&o.length),icon:B[G(l,t)||"default"],selectable:!1,items:l._getFilterOperationMenuItems(t)}],onItemRendered:e=>{let{itemElement:t,itemData:i}=e;if(null!==i&&void 0!==i&&i.items&&null!==i&&void 0!==i&&i.name){const e=l._getOperationDescriptionFromDescriptor(i.name)||c;this.setAria("label",e,(0,r.A)(t))}},onItemClick(e){var n;const o=e.itemData.name,s=G(l,t);let r=!1;const a=L(l),d={};if(e.itemData.items||o&&o===s)return;o?(d[a?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=o,"between"!==o&&"between"!==s||(r="between"===o,d[a?"bufferedFilterValue":"filterValue"]=null)):(d[a?"bufferedFilterValue":"filterValue"]=null,d[a?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=t.defaultSelectedFilterOperation||null);const u=!(null!==(n=e.itemData)&&void 0!==n&&n.name),c=!u&&void 0;if(l._columnsController.columnOption(t.index,d,void 0,c),l._applyFilterViewController.setHighLight(i,!0),!o){const e=W(i);e&&"dxDateBox"===e.NAME&&!e.option("isValid")&&(e.clear(),e.option("isValid",!0))}r?l._showFilterRange(i.closest(".dx-editor-cell"),t):l._focusEditor(i)},onSubmenuShowing(){a=l._isEditorFocused(i),u.loseFocus()},onSubmenuHiding(){n.A.trigger(e,"blur"),d()},onContentReady(t){n.A.on(e,"blur",()=>{const e=t.component;e._hideSubmenuAfterTimeout(),d()})},rtlEnabled:l.option("rtlEnabled")})}_isEditorFocused(e){return e.hasClass("dx-focused")||e.parents(".dx-focused").length}_focusEditor(e){this._editorFactoryController.focus(e),n.A.trigger(e.find(M),"focus")}_renderFilterOperationChooser(e,t,i){const n=this;let o;n.option("filterRow.showOperationChooser")&&(e.addClass("dx-editor-with-menu"),o=(0,r.A)("<div>").prependTo(e),n._updateFilterOperationChooser(o,t,i))}_getFilterOperationMenuItems(e){var t;const i=this;let n=[{}];const o=i.option("filterRow");if(null!==(t=e.filterOperations)&&void 0!==t&&t.length){const t=e.filterOperations.filter(e=>(0,c.O9)(H[e]));n=(0,d.Tj)(t,t=>({name:t,selected:(G(i,e)||e.defaultFilterOperation)===t,text:i._getOperationDescriptionFromDescriptor(t),icon:B[t]})),n.push({name:null,text:null===o||void 0===o?void 0:o.resetOperationText,icon:B.default})}return n}_getOperationDescriptionFromDescriptor(e){const t=this.option("filterRow"),i=(null===t||void 0===t?void 0:t.operationDescriptions)||{},n=H[e];return i[n]}_handleDataChanged(e){var t,i,n,o,s;const r=null===(t=this._dataController)||void 0===t||null===(i=t.dataSource)||void 0===i?void 0:i.call(t),l=null===r||void 0===r||null===(n=r.lastLoadOptions)||void 0===n?void 0:n.call(r);var a;(super._handleDataChanged.apply(this,arguments),null!==(o=e.operationTypes)&&void 0!==o&&o.filtering||null!==(s=e.operationTypes)&&void 0!==s&&s.fullReload)&&this.updateLookupDataSource((null===(a=e.operationTypes)||void 0===a?void 0:a.filtering)||(null===l||void 0===l?void 0:l.filter))}updateLookupDataSource(e){if(!this.option("syncLookupFilterValues"))return;if(!this.element())return;const t=this._columnsController.getVisibleColumns(),i=this._dataController.dataSource(),n=this._applyFilterViewController,o=this.element().find(`.${this.addWidgetPrefix("filter-row")}`).index();-1!==o&&t.forEach((t,s)=>{if(!t.lookup||t.calculateCellValue!==t.defaultCalculateCellValue)return;const r=this._getCellElement(o,s),a=W(null===r||void 0===r?void 0:r.find(".dx-editor-container"));if(a){n.setCurrentColumnForFiltering(t);const o=this._dataController.getCombinedFilter()||null;n.setCurrentColumnForFiltering(null);const s=a.option("dataSource"),r=!e||!(0,l.RL)(s.__dataGridSourceFilter||null,o);if(r){const e=k.A.getWrappedLookupDataSource(t,i,o);a.option("dataSource",e)}}})}getColumnElements(e,t){var i;const n=this._getRows();return"filter"===(null===n||void 0===n||null===(i=n[e])||void 0===i?void 0:i.rowType)&&arguments.length<2?this.getCellElements(e):super.getColumnElements(e,t)}isFilterRowCell(e){return!!e.closest(`.${this.addWidgetPrefix("filter-row")}`).length}},Q=e=>class extends e{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();const e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),i=this._applyFilterController;return(0,d.__)(t,function(){var t;const n=(null===(t=i.getCurrentColumnForFiltering())||void 0===t?void 0:t.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,c.O9)(this.filterValue)&&!n){const t=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");e.push(t)}}),k.A.combineFilters(e)}};class J extends D.Ay.ViewController{init(){this._columnsController=this.getController("columns")}_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel}setHighLight(e,t){L(this)&&((null===e||void 0===e?void 0:e.toggleClass("dx-highlight-outline",t))&&e.closest(".dx-editor-cell").toggleClass("dx-filter-modified",t),this._getHeaderPanel().enableApplyButton(t))}applyFilter(){const e=this._columnsController.getColumns();this._columnsController.beginUpdate();for(let t=0;t<e.length;t++){const i=e[t];void 0!==i.bufferedFilterValue&&(this._columnsController.columnOption(t,"filterValue",i.bufferedFilterValue),i.bufferedFilterValue=void 0),void 0!==i.bufferedSelectedFilterOperation&&(this._columnsController.columnOption(t,"selectedFilterOperation",i.bufferedSelectedFilterOperation),i.bufferedSelectedFilterOperation=void 0)}this._columnsController.endUpdate(),this.removeHighLights()}removeHighLights(){if(L(this)){const e=this.getView("columnHeadersView").element();e.find(`.${this.addWidgetPrefix("filter-row")} .dx-highlight-outline`).removeClass("dx-highlight-outline"),e.find(`.${this.addWidgetPrefix("filter-row")} .dx-filter-modified`).removeClass("dx-filter-modified"),this._getHeaderPanel().enableApplyButton(!1)}}setCurrentColumnForFiltering(e){this._currentColumn=e}getCurrentColumnForFiltering(){return this._currentColumn}}const Z=e=>class extends e{_startResizing(){const e=this;if(super._startResizing.apply(e,arguments),e.isResizing()){const t=e._columnHeadersView.getFilterRangeOverlayInstance();if(t){const i=t.$element().closest("td").index();i!==e._targetPoint.columnIndex&&i!==e._targetPoint.columnIndex+1||t.$content().hide()}}}_endResizing(){const e=this;let t;if(e.isResizing()){const i=e._columnHeadersView.getFilterRangeOverlayInstance();i&&(t=i.$element().closest("td"),e._columnHeadersView._updateFilterRangeOverlay({width:(0,u.Ot)(t,!0)+1}),i.$content().show())}super._endResizing.apply(e,arguments)}},ee=e=>class extends e{updateFieldValue(e){return e.column.lookup&&(this._needUpdateLookupDataSource=!0),super.updateFieldValue.apply(this,arguments)}_afterSaveEditData(e){var t;this._needUpdateLookupDataSource&&!e&&(null===(t=this.getView("columnHeadersView"))||void 0===t||t.updateLookupDataSource());return this._needUpdateLookupDataSource=!1,super._afterSaveEditData.apply(this,arguments)}_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,super._afterCancelEditData.apply(this,arguments)}},te=e=>class extends e{init(){super.init(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){"filterRow"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_getToolbarItems(){const e=super._getToolbarItems(),t=this._prepareFilterItem();return t.concat(e)}_prepareFilterItem(){const e=this,t=[];if(e._isShowApplyFilterButton()){const i=e.option("filterRow.applyFilterText"),n=e._columnsController.getColumns(),o=!n.filter(e=>void 0!==e.bufferedFilterValue).length,s=function(t){(0,r.A)(t.element).addClass(e._getToolbarButtonClass("dx-apply-button"))},l=function(){e._applyFilterViewController.applyFilter()},a={widget:"dxButton",options:{icon:"apply-filter",disabled:o,onClick:l,hint:i,text:i,onInitialized:s},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10};t.push(a)}return t}_isShowApplyFilterButton(){const e=this.option("filterRow");return!(null===e||void 0===e||!e.visible)&&"onClick"===e.applyFilter}enableApplyButton(e){this.setToolbarItemDisabled("applyFilterButton",!e)}},ie={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:s.A.format("dxDataGrid-filterRowShowAllText"),resetOperationText:s.A.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:s.A.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:s.A.format("dxDataGrid-filterRowOperationEquals"),notEqual:s.A.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:s.A.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:s.A.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:s.A.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:s.A.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:s.A.format("dxDataGrid-filterRowOperationStartsWith"),contains:s.A.format("dxDataGrid-filterRowOperationContains"),notContains:s.A.format("dxDataGrid-filterRowOperationNotContains"),endsWith:s.A.format("dxDataGrid-filterRowOperationEndsWith"),between:s.A.format("dxDataGrid-filterRowOperationBetween"),isBlank:s.A.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:s.A.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:s.A.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:s.A.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:J},extenders:{controllers:{data:Q,columnsResizer:Z,editing:ee},views:{columnHeadersView:Y,headerPanel:te}}}},74805:function(e,t,i){i.d(t,{A:function(){return l}});i(61636);var n=i(66529),o=i(2308);class s extends o.A{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}s.defaultOptions=function(e){o.A.defaultOptions(e)},(0,n.A)("dxPopup",s);var r=s,l=r},77186:function(e,t,i){i.d(t,{j:function(){return r}});var n=i(85563),o=i(73148),s=i(91125);class r extends s.Ss{constructor(){super(...arguments),this._toastInstance=null,this._$toastContainer=null}_createToastInstance(e){return this._toastInstance||(this._$toastContainer||(this._$toastContainer=(0,n.A)("<div>").appendTo(this.component.$element())),this._toastInstance=this._createComponent(this._$toastContainer,o.A,Object.assign({position:{my:"bottom",at:"bottom",of:this.component.$element().get(0)}},e,{visible:!1}))),this._toastInstance}showToast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this._createToastInstance(t);null===i||void 0===i||i.option(Object.assign({},t,{message:e,visible:!0}))}async hideToast(){var e;await(null===(e=this._toastInstance)||void 0===e?void 0:e.hide())}dispose(){this._toastInstance&&(this._toastInstance.dispose(),this._toastInstance=null),this._$toastContainer&&(this._$toastContainer.remove(),this._$toastContainer=null)}}},77856:function(e,t,i){i(69375),i(82438),i(12266),i(99819),i(57327);var n=i(63029),o=i(93076),s=i(97137),r=i(24906),l=i(85997),a=i(74567),d=i(66529),u=i(62192),c=i(92324),h=i(35754),p=i(47759),g=i(85563),m=i(39889),_=i(66703),C=i(29518),f=i(44956),v=i(89214),x=i(63825),w=i(50172),y=i(27996),b=i(69274),I=i(58982),S=i(90775),A=i(29807),E=i(68554);const R="dx-menu-phone-overlay",O=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],T=["up","down","first","last"],V=(0,y.zk)();class F extends I.A{getShowEvent(e){return(0,w.Gv)(e)?null===e.name?null:e.name??"dxcontextmenu":e??null}getShowDelay(e){return(0,w.Gv)(e)?e.delay??0:0}_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{showEvent:"dxcontextmenu",hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null,hideOnParentScroll:!0,visualContainer:V})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,y.Vd)(),options:{animation:null}}])}_initActions(){this._actions={},(0,v.__)(O,(e,t)=>{this._actions[t]=this._createActionByOption(t)||m.lQ})}_setOptionsByReference(){super._setOptionsByReference(),(0,f.X)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){var e;return(null===(e=this._overlay)||void 0===e?void 0:e.$content())??(0,g.A)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){var e;return(null===(e=this._overlay)||void 0===e?void 0:e.$content())??(0,g.A)()}_supportedKeys(){return Object.assign({},super._supportedKeys(),{space:()=>{const{focusedElement:e}=this.option(),t=(0,g.A)(e);this.hide(),t.length&&this._isSelectionEnabled()&&this.selectItem(t[0])},escape:()=>{this.hide()}})}_getActiveItem(e){const t=this._getAvailableItems(),i=t.filter(".dx-state-focused"),n=t.filter(".dx-state-hover"),o=n.closest(".dx-menu-items-container");return o.find(".dx-menu-item").index(i)>=0?i:n.length?n:super._getActiveItem()}_moveFocus(e){const t=this._getItemsByLocation(e),i=this._getActiveItem(!0),n=this.itemsContainer().find(".dx-state-hover"),{focusedElement:o,rtlEnabled:s}=this.option(),r=(0,g.A)(o),l=!!(r.length||null!==n&&void 0!==n&&n.length);let a;switch(e){case"up":var d,u;if(a=l?this._prevItem(t):i,this._setFocusedElement(a),i.is(t.first()))null===(d=(u=this._actions).onLeftFirstItem)||void 0===d||d.call(u,i);break;case"down":var c,h;if(a=l?this._nextItem(t):i,this._setFocusedElement(a),i.is(t.last()))null===(c=(h=this._actions).onLeftLastItem)||void 0===c||c.call(h,i);break;case"right":a=s?this._hideSubmenuHandler():this._expandSubmenuHandler(t,e),this._setFocusedElement(a);break;case"left":a=s?this._expandSubmenuHandler(t,e):this._hideSubmenuHandler(),this._setFocusedElement(a);break;case"first":a=t.first(),this._setFocusedElement(a);break;case"last":a=t.last(),this._setFocusedElement(a);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&0!==e.length&&(this.option("focusedElement",(0,h.cc)(e)),this._scrollToElement(e))}_scrollToElement(e){const t=e.closest(`.${A.fI}`),i=E.A.getInstance(t.get(0));null===i||void 0===i||i.scrollToElement(e)}_getItemsByLocation(e){const t=this._getActiveItem(!0);let i;return T.includes(e)&&(i=t.closest(".dx-menu-items-container").children().children()),i=this._getAvailableItems(i),i}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,w.O9)(this._overlay)){const e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){var e,t;const i=this._getActiveItem(!0),n=i.parents(".dx-menu-item-expanded").first();if(n.length)return this._hideSubmenusOnSameLevel(n),this._hideSubmenu(i.closest(".dx-submenu")),n;null===(e=(t=this._actions).onCloseRootSubmenu)||void 0===e||e.call(t,i)}_expandSubmenuHandler(e,t){var i,n;const o=this._getActiveItem(!0),s=this._getItemData(o),r=this._dataAdapter.getNodeByItem(s),l=this._hasSubmenu(r),a=o.children(".dx-submenu");if(l&&!o.hasClass("dx-state-disabled"))return a.length&&"hidden"!==a.css("visibility")||this._showSubmenu(o),this._nextItem(this._getItemsByLocation(t));null===(i=(n=this._actions).onExpandLastSubmenu)||void 0===i||i.call(n,o)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),this._shownSubmenus=[],super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),this._eventNamespace=`${this.NAME}${new p.A}`,super._initMarkup()}_render(){super._render();const{visible:e}=this.option();this._renderVisibility(e),this._addWidgetClass()}_isTargetOutOfComponent(e){const t=0!==(0,g.A)(e).closest(".dx-context-menu").length;return!t}_focusOutHandler(e){const{relatedTarget:t}=e;if(t){const e=this._isTargetOutOfComponent(t);e&&this.hide()}super._focusOutHandler(e)}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._showContextMenuEventHandler=this._createShowContextMenuEventHandler(),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(this._overlay)return;const e=this._getOverlayOptions();this._overlay=this._createComponent((0,g.A)("<div>").appendTo(this.$element()),S.A,e);const t=this._overlay.$content();t&&(t.addClass("dx-context-menu"),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this._attachContextMenuEvent())}preventShowingDefaultContextMenuAboveOverlay(){const e=this._itemContainer(),t=(0,a.b4)(s.U,this._eventNamespace);r.A.off(e,t,".dx-submenu"),r.A.on(e,t,".dx-submenu",i=>{i.stopPropagation(),i.preventDefault(),r.A.off(e,t,".dx-submenu")})}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){u.A.current().phone&&e.addClass(R)}_createShowContextMenuEventHandler(){const e=this._createAction(e=>{const{showEvent:t}=this.option(),i=this.getShowDelay(t);i?setTimeout(()=>this._show(e.event),i):this._show(e.event)},{validatingTargetName:"target"});return t=>e({event:t,target:(0,g.A)(t.currentTarget)})}_detachShowContextMenuEvents(e,t){const{showEvent:i}=this.option(),n=this.getShowEvent(t??i);if(!n)return;const o=(0,w.Kg)(e),s=(0,a.b4)(n,this._eventNamespace);o?r.A.off(c.A.getDocument(),s,e,this._showContextMenuEventHandler):r.A.off((0,g.A)(e),s,this._showContextMenuEventHandler)}_attachShowContextMenuEvents(){const{showEvent:e,disabled:t}=this.option(),i=this.getShowEvent(e);if(!i||t)return;const n=this._getTarget(),o=(0,w.Kg)(n),s=(0,a.b4)(i,this._eventNamespace);o?r.A.on(c.A.getDocument(),s,n,this._showContextMenuEventHandler):r.A.on(n,s,this._showContextMenuEventHandler)}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,t){const i=t??this._itemContainer();e=(0,g.A)("<div>"),e.appendTo(i).addClass("dx-submenu").css("visibility",t?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);const n=super._renderContainer(e);if(t)return n;const{width:o,height:s}=this.option();return o?n.css("minWidth",o):s?n.css("minHeight",s):n}_renderSubmenuItems(e,t){var i,n;this._renderItems(this._getChildNodes(e),t);const o=t.children(".dx-submenu");null===(i=(n=this._actions).onSubmenuCreated)||void 0===i||i.call(n,{itemElement:(0,h.cc)(t),itemData:e.internalFields.item,submenuElement:(0,h.cc)(o)}),this._initScrollable(o),this.setAria({role:"menu"},o)}_getOverlayOptions(){const{position:e,focusStateEnabled:t,animation:i,hideOnParentScroll:n,visualContainer:o,overlayContainer:s,boundaryOffset:r}=this.option();return{focusStateEnabled:t,animation:i,innerOverlay:!0,hideOnOutsideClick:e=>this._hideOnOutsideClickHandler(e),propagateOutsideClick:!0,hideOnParentScroll:n,deferRendering:!1,container:s,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit",boundary:o,boundaryOffset:r},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:o}}_overlayShownActionHandler(e){var t,i;null===(t=(i=this._actions).onShown)||void 0===t||t.call(i,e)}_overlayHidingActionHandler(e){var t,i;null===(t=(i=this._actions).onHiding)||void 0===t||t.call(i,e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){var t,i;null===(t=(i=this._actions).onHidden)||void 0===t||t.call(i,e)}_shouldHideOnOutsideClick(e){const{hideOnOutsideClick:t}=this.option();return(0,w.Tn)(t)?t(e):t}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(c.A.isDocument(e.target))return!0;const t=this._getActiveItemsContainer(e.target),i=this._getItemsContainers(),n=this._searchActiveItem(e.target),o=this.$element().parents(".dx-menu-item"),s=n[0]===o[0]&&!!n.length&&!!o.length,r=this._isIncludeOverlay(t,i)&&!!n.length;return!r&&!s||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(n),!1)}_getActiveItemsContainer(e){return(0,g.A)(e).closest(".dx-menu-items-container")}_getItemsContainers(){var e;return(null===(e=this._overlay)||void 0===e||null===(e=e.$content())||void 0===e?void 0:e.find(".dx-menu-items-container"))??(0,g.A)()}_searchActiveItem(e){return(0,g.A)(e).closest(".dx-menu-item").eq(0)}_isIncludeOverlay(e,t){let i=!1;return(0,v.__)(t,(t,n)=>{e.is(n)&&!i&&(i=!0)}),i}_hideAllShownChildSubmenus(e){const t=e.find(".dx-submenu"),i=(0,f.X)([],this._shownSubmenus);t.length>0&&(0,v.__)(i,(t,i)=>{const n=this._searchActiveItem(i.context).parent();n.parent().is(e.parent().parent())&&!n.is(e.parent())&&this._hideSubmenu(i)})}_initScrollable(e){this._createComponent(e,E.A,{useKeyboard:!1,_onVisibilityChanged:e=>{e.scrollTo(0)}})}_setSubMenuHeight(e,t){const i=e.find(".dx-menu-items-container"),n=(0,x.P$)(i),o=this._getMaxHeight(t,!1),s=Math.min(n,o);e.css("height",s)}_getMaxUsableSpace(e,t,i){return t}_getMaxHeight(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=(0,x.P$)(V),n=(0,w.Kb)(e),o=c.A.getDocument(),s=(0,w.Gv)(e)&&"length"in e&&e.length&&e[0]===o;if(!n||s)return i;const r=null===e||void 0===e?void 0:e[0].getBoundingClientRect().top,l=(0,x.P$)(e),a=t?this._getMaxUsableSpace(r,i,l):Math.max(r+l,i-r);return a-10}_setOverlayMaxHeight(e){var t;e&&(null===(t=this._overlay)||void 0===t||t.option({maxHeight:()=>{const t=e.find(".dx-menu-items-container"),i=(0,x.P$)(t),n=this._getSubmenuBorderWidth();return i+2*n}}),e.css("height","100%"))}_dimensionChanged(){this._shownSubmenus&&this._shownSubmenus.forEach(e=>{const t=e.closest(".dx-menu-item");this._setSubMenuHeight(e,t),this._scrollToElement(t);const i=this._getSubmenuPosition(t);o.A.setup(e,i)})}_getSubmenuBorderWidth(){return(0,b.AE)((0,b.ss)())?1:0}_showSubmenu(e){const t=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),!this._hasSubmenu(t))return;let i=e.children(".dx-submenu");const n=i.length;super._showSubmenu(e),t&&!n&&(this._renderSubmenuItems(t,e),i=e.children(".dx-submenu")),this._planPostRenderActions(i)}_setSubmenuVisible(e){if(!e)return;const t=null===e||void 0===e?void 0:e.closest(".dx-menu-item");this._setSubMenuHeight(e,t),!this._isSubmenuVisible(e)&&t&&this._drawSubmenu(t)}_hideSubmenusOnSameLevel(e){const t=e.parent(".dx-menu-item-wrapper").siblings().find(".dx-menu-item-expanded");t.length&&(t.removeClass("dx-menu-item-expanded"),this._hideSubmenu(t.find(".dx-submenu")))}_isSubmenuVisible(e){return"visible"===e.css("visibility")}_drawSubmenu(e){var t;const{animation:i}=this.option(),s=i?i.show:{},r=e.children(".dx-submenu"),l=this._getSubmenuPosition(e);null!==(t=this._overlay)&&void 0!==t&&t.option("visible")&&((0,w.O9)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(r)||this._shownSubmenus.push(r),s&&n.fx.stop(r.get(0),!1),o.A.setup(r,l),s&&((0,w.Qd)(s.to)&&(s.to.position=l),this._animate(r.get(0),s)),r.css("visibility","visible"))}_animate(e,t){n.fx.animate(e,t)}_getSubmenuPosition(e){const{submenuDirection:t,rtlEnabled:i}=this.option(),n=null===t||void 0===t?void 0:t.toLowerCase(),o=e.parent(".dx-menu-item-wrapper"),s={collision:"flip",of:o,offset:{h:0,v:-1}};switch(n){case"left":s.at="left top",s.my="right top";break;case"right":s.at="right top",s.my="left top";break;default:i?(s.at="left top",s.my="right top"):(s.at="right top",s.my="left top")}return s}_updateSubmenuVisibilityOnClick(e){var t;if(null===(t=e.args)||void 0===t||!t.length)return;const{itemData:i,itemElement:n}=e.args[0];if(!i)return;const o=this._dataAdapter.getNodeByItem(i);if(!o)return;const s=(0,g.A)(n);let r=s.find(".dx-submenu");const l=this._hasSubmenu(o)&&!r.length;if(l&&(this._renderSubmenuItems(o,s),r=s.find(".dx-submenu")),s.context===r.context&&"visible"===r.css("visibility"))return;this._updateSelectedItemOnClick(e);const a=i&&!1===i.closeMenuOnClick;if(i&&!i.disabled&&!a)if(0===r.length){var d;const t=(0,g.A)(s.parents(".dx-submenu")[0]);this._hideSubmenu(t),!e.canceled&&null!==(d=this._overlay)&&void 0!==d&&d.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(r)&&this._hideSubmenu(r),this._showSubmenu(s)}_hideSubmenu(e){const t=this._shownSubmenus??[];(0,v.__)(t,(t,i)=>{(e.is(i)||(0,C.gR)(e[0],i[0]))&&(i.parent().removeClass("dx-menu-item-expanded"),this._hideSubmenuCore(i))})}_hideSubmenuCore(e){const t=(this._shownSubmenus??[]).indexOf(e),{animation:i}=this.option(),n=i?i.hide:null;t>=0&&(this._shownSubmenus??[]).splice(t,1),this._stopAnimate(e),n&&this._animate(e.get(0),n),e.css("visibility","hidden");const o=e.dxScrollable("instance");o.scrollTo(0),this.option("focusedElement",null)}_stopAnimate(e){n.fx.stop(e.get(0),!0)}_hideAllShownSubmenus(){var e;const t=(0,f.X)([],this._shownSubmenus),i=(null===(e=this._overlay)||void 0===e||null===(e=e.$content())||void 0===e?void 0:e.find(".dx-menu-item-expanded"))??(0,g.A)();i.removeClass("dx-menu-item-expanded"),(0,v.__)(t,(e,t)=>{this._hideSubmenu(t)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){const{name:t,value:i,previousValue:n}=e;if(O.includes(t))this._initActions();else switch(t){case"visible":this._renderVisibility(i);break;case"disabled":case"position":case"submenuDirection":this._invalidate();break;case"showEvent":n&&this._detachShowContextMenuEvents(this._getTarget(),n),this._invalidate();break;case"target":n&&this._detachShowContextMenuEvents(n),this._invalidate();break;case"hideOnOutsideClick":case"hideOnParentScroll":case"visualContainer":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){var t,i;const n={jQEvent:e};let o=(0,_.cY)().reject().promise();if(null===(t=(i=this._actions).onShowing)||void 0===t||t.call(i,n),n.cancel)return o;const s=this._positionContextMenu(e);if(s){var r,a,d,u;if(!this._overlay)this._renderContextMenuOverlay(),null===(u=this._overlay.$content())||void 0===u||u.addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes());const t=(0,g.A)(null===(r=this._overlay)||void 0===r?void 0:r.content()).children(".dx-submenu");this._setOptionWithoutOptionChange("visible",!0),null===(a=this._overlay)||void 0===a||a.option({height:()=>this._getMaxHeight(s.of),position:s}),this._setOverlayMaxHeight(t),this._planPostRenderActions(t,!0),this._overlay&&(o=this._overlay.show()),null===e||void 0===e||e.stopPropagation(),this._setAriaAttributes(),(null===e||void 0===e||null===(d=e.originalEvent)||void 0===d?void 0:d.type)===l.A.name&&this.preventShowingDefaultContextMenuAboveOverlay()}return o}_renderItems(e,t){var i;super._renderItems(e,t);const n=(0,g.A)(null===(i=this._overlay)||void 0===i?void 0:i.content()).children(".dx-submenu");n.length&&this._initScrollable(n)}_setAriaAttributes(){var e;this._overlayContentId=`dx-${new p.A}`,this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},null===(e=this._overlay)||void 0===e?void 0:e.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){const{target:e,position:t}=this.option();return e||(null===t||void 0===t?void 0:t.of)||(0,g.A)(c.A.getDocument())}_getContextMenuPosition(){const{position:e}=this.option();return Object.assign({},e,{of:this._getTarget()})}_positionContextMenu(e){let t=this._getContextMenuPosition();const i=this._isInitialOptionValue("position"),n=this._createActionByOption("onPositioning");null!==e&&void 0!==e&&e.preventDefault&&i&&(t.of=e);const o={position:t,event:e};return n(o),o.cancel?t=null:o.event&&(o.event.cancel=!0,null===e||void 0===e||e.preventDefault()),t}_refresh(){if((0,y.Vd)())if(this._overlay){const{position:e}=this._overlay.option();super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh();else super._refresh()}_hide(){let e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e??(0,_.cY)().reject().promise()}toggle(e){const{visible:t}=this.option();return this._renderVisibility(e??!t)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}_postProcessRenderItems(e,t){t?this._setOverlayMaxHeight(e):this._setSubmenuVisible(e)}}(0,d.A)("dxContextMenu",F),t.Ay=F},79412:function(e,t,i){i.d(t,{pL:function(){return p}});i(82438),i(99819);var n=i(35754),o=i(85563),s=i(89214),r=i(16086),l=i(91125);const a="dx-context-menu",d={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"toolbar"},u=["columnHeadersView","rowsView","footerView","headerPanel"];class c extends l.Ay.ViewController{init(){this.createAction("onContextMenuPreparing")}getContextMenuItems(e){if(!e)return!1;const t=this,i=(0,o.A)(e.target);let r;return(0,s.__)(u,function(){const o=t.getView(this);if(!o)return;const s=o.element(),l=(null===s||void 0===s?void 0:s.is(i))||(null===s||void 0===s?void 0:s.find(i).length);if(l){var a,u,c;const s=i.hasClass("dx-group-row"),l=s?i.find(".dx-group-cell").first():i.closest(".dx-row > td, .dx-row > tr"),h=l.parent(),p=o.getRowIndex(h),g=null===(a=l[0])||void 0===a?void 0:a.cellIndex,m=h.data("options"),_={event:e,targetElement:(0,n.cc)(i),target:d[this],rowIndex:p,row:o._getRows()[p],columnIndex:g,column:null===m||void 0===m||null===(u=m.cells)||void 0===u||null===(u=u[g])||void 0===u?void 0:u.column};if(_.items=null===(c=o.getContextMenuItems)||void 0===c?void 0:c.call(o,_),t.executeAction("onContextMenuPreparing",_),t._contextMenuPrepared(_),r=_.items,r)return!1}}),r}_contextMenuPrepared(e){}}class h extends l.Ay.View{init(){super.init(),this._contextMenuController=this.getController("contextMenu")}_renderCore(){const e=this.element().addClass(a);this.setAria("role","presentation",e),this._createComponent(e,r.A,{onPositioning:e=>{const{event:t}=e,i=e.component,n=this._contextMenuController.getContextMenuItems(t);n?(i.option("items",n),t.stopPropagation()):e.cancel=!0},onItemClick(e){var t,i;null===(t=e.itemData)||void 0===t||null===(i=t.onItemClick)||void 0===i||i.call(t,e)},cssClass:this.getWidgetContainerClass(),target:this.component.$element()})}}const p={defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:c},views:{contextMenuView:h}}},79995:function(e,t,i){i.d(t,{W:function(){return v}});i(69375),i(82438),i(99819),i(57327);var n=i(59981),o=i(24906),s=i(85997),r=i(96004),l=i(74567),a=i(84558),d=i(92324),u=i(85563),c=i(39889),h=i(66703),p=i(29518),g=i(50172),m=i(25831),_=i(86330);const C=e=>class extends e{init(){const e=!this._saveEditorHandler;if(super.init(),e){let e,t;this._pointerUpEditorHandler=()=>{var e;t=null===(e=this._columnsResizerController)||void 0===e?void 0:e.isResizing()},this._pointerDownEditorHandler=t=>e=(0,u.A)(t.target),this._saveEditorHandler=this.createAction(function(i){const{event:n}=i,o=(0,u.A)(n.target),s=n[m.se],{component:r}=this;if((!(0,_.Xl)(e)||e.is(o))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){const e=l(o)||l(null===s||void 0===s?void 0:s.$element()),i=s&&!s._disposed&&s!==this.component,n=!!o.closest(`.${this.addWidgetPrefix(m.HG)}`).length,r=o.hasClass(this.addWidgetPrefix(m.vw)),a=this.isCellEditMode();t||e||r||n&&a&&this.isEditing()||!(0,p.A1)(o)&&!i||this._closeEditItem.bind(this)(o)}function l(e){if(!e)return!1;const t=e.closest(`.${m.OQ}`),i=r.$element();return t.length>0&&0===i.closest(t).length}}),o.A.on(d.A.getDocument(),r.A.up,this._pointerUpEditorHandler),o.A.on(d.A.getDocument(),r.A.down,this._pointerDownEditorHandler),o.A.on(d.A.getDocument(),n.U,this._saveEditorHandler)}}isCellEditMode(){return this.option("editing.mode")===m.eN}isBatchEditMode(){return this.option("editing.mode")===m.yx}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){const t=this.component.$element();let i=this.isEditing();const n=!t||!!e.closest(t).length;if(n){const t=e.closest(`.${m.Z8}`).length;if(t){const t=e.closest(`.${m.sN}> td`),n=this._rowsView.getRowIndex(t.parent()),s=this._rowsView.getCellElements(n);if(null!==s&&void 0!==s&&s.length){var o;const e=s.index(t),r=this._columnsController.getVisibleColumns(),l=null===(o=r[e])||void 0===o?void 0:o.allowEditing,a=this.isEditCell(n,e);i=i&&!l&&!a}}}return i||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var e;const t=this._getVisibleEditColumnIndex(),i=null===(e=this._rowsView)||void 0===e?void 0:e._getCellElement(this._getVisibleEditRowIndex(),t);this._refocusEditCell=!1,clearTimeout(this._inputFocusTimeoutID),i&&!i.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},i,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){const e=(0,g.O9)(this.option(m.D9)),t=(0,g.O9)(this.option(m.tp));return e&&t}return super.isEditing()}_handleEditColumnNameChange(e){const t=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&-1!==t&&(0,g.O9)(e.value)&&e.value!==e.previousValue){const i=this._columnsController.getVisibleColumnIndex(e.value),n=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(i,n,t)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){const t=new h.cY;return this.saveEditData().done(()=>{this.hasChanges()?t.reject("cancel"):this.addRow(e).done(t.resolve).fail(t.reject)}),t.promise()}return super._addRow(e)}editCell(e,t){return this._editCell({rowIndex:e,columnIndex:t})}_editCell(e){const t=new h.cY;let i;return this.executeOperation(t,()=>{i=this._editCellCore(e),(0,h.z7)(i).done(t.resolve).fail(t.reject)}),void 0!==i?i:t.promise()}_editCellCore(e){const t=this._getNormalizedEditCellOptions(e),{columnIndex:i,rowIndex:n,column:o,item:s}=t;if(void 0!==s.key)return!(!o||"data"!==s.rowType&&"detailAdaptive"!==s.rowType||s.removed||!this.isCellOrBatchEditMode())&&(!!this.isEditCell(n,i)||(0,h.z7)(this._beforeEditCell(n,i,s)).done(e=>{e||this._prepareEditCell(t)||this._processCanceledEditingCell()}));this._dataController.fireError("E1043")}_beforeEditCell(e,t,i){if(this.isCellEditMode()&&!i.isNewRow&&this.hasChanges()){const e=new h.cY;return this.saveEditData().always(()=>{e.resolve(this.hasChanges())}),this.addDeferred(e),e}return!1}publicMethods(){const e=super.publicMethods();return e.concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){let{oldColumnIndex:t,oldRowIndex:i,columnIndex:n,rowIndex:o}=e;const s=this._columnsController,r=s.getVisibleColumns(),l=this._dataController.items(),a=l[o];let d;d=(0,g.O9)(t)?r[t]:this._getEditColumn(),(0,g.O9)(i)||(i=this._getVisibleEditRowIndex()),(0,g.Kg)(n)&&(n=s.columnOption(n,"index"),n=s.getVisibleIndex(n));const u=r[n];return{oldColumn:d,columnIndex:n,oldRowIndex:i,rowIndex:o,column:u,item:a}}_prepareEditCell(e){let{item:t,column:i,oldColumn:n,columnIndex:o,oldRowIndex:s}=e;const r={data:null===t||void 0===t?void 0:t.data,cancel:!1,column:i,key:t.isNewRow?void 0:t.key};return!this._isEditingStart(r)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(t.key,!0),this._setEditColumnNameByIndex(o,!0),this._repaintEditCell(i,n,s),i.showEditorAlways||this._addInternalData({key:t.key,oldData:t.oldData??t.data}),!0)}closeEditCell(e,t){let i=(0,h.z7)();const n=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){const o=new h.cY;i=new h.cY,this.executeOperation(o,()=>{this._closeEditCellCore(e,n,t).always(i.resolve)})}return i.promise()}_closeEditCellCore(e,t,i){const n=this._dataController,o=new h.cY,s=o.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!i)return this.saveEditData().done(e=>{this.hasChanges()?o.resolve():this.closeEditCell(!!e).always(o.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),t>=0){const i=[t];this._beforeCloseEditCellInBatchMode(i),e||n.updateItems({changeType:"update",rowIndices:i})}return o.resolve(),s}_resetModifiedClassCells(e){if(this.isBatchEditMode()){const t=this._columnsController.getVisibleColumns().length;e.forEach(e=>{let{key:i}=e;const n=this._dataController.getRowIndexByKey(i);for(let o=0;o<t;o++){const e=this._rowsView._getCellElement(n,o);null===e||void 0===e||e.removeClass(m.uz)}})}}_prepareChange(e,t,i){const n=(0,u.A)(e.cellElement);return this.isBatchEditMode()&&void 0!==e.key&&this._applyModified(n,e),super._prepareChange(e,t,i)}_cancelSaving(e){const t=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),t.updateItems()),super._cancelSaving(e)}optionChanged(e){const{fullName:t}=e;"editing"===e.name&&t===m.tp?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,t,i){const n=this._columnsController.getVisibleColumns();e>-1&&(0,c.zE)(()=>{this._repaintEditCell(n[e],n[t],i)})}_handleEditRowKeyChange(e){if(this.isCellOrBatchEditMode()){const i=this._getVisibleEditColumnIndex(),n=this._getEditRowIndexCorrection(),o=this._dataController.getRowIndexByKey(e.previousValue)+n;var t;if((0,g.O9)(e.value)&&e.value!==e.previousValue)null===(t=this._editCellFromOptionChanged)||void 0===t||t.call(this,i,i,o)}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){const{isNewRow:t}=this._dataController.items()[e],i=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,t).always(()=>{e=this._dataController.getRowIndexByKey(i),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){const{isPageChanged:t}=e??{},i=this.isBatchEditMode()||t&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?i&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return!!this.isBatchEditMode()||super._allowRowAdding(e)}_afterDeleteRow(e,t){const i=this._dataController;return this.isBatchEditMode()?(i.updateItems({changeType:"update",rowIndices:[t,e]}),(new h.cY).resolve()):super._afterDeleteRow(e,t)}_updateEditRow(e,t,i){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,t,i):super._updateEditRow(e,t,i)}_isDefaultButtonVisible(e,t){if(this.isCellOrBatchEditMode()){const i=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,t)&&(!i||!t.row.removed);case"undelete":return i&&this.allowDeleting(t)&&t.row.removed;default:return super._isDefaultButtonVisible(e,t)}}return super._isDefaultButtonVisible(e,t)}_isRowDeleteAllowed(){const e=super._isRowDeleteAllowed();return e||this.isBatchEditMode()}_beforeEndSaving(e){var t;this.isCellEditMode()?"update"!==(null===(t=e[0])||void 0===t?void 0:t.type)&&super._beforeEndSaving(e):(this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e))}prepareEditButtons(e){const t=this.option("editing")??{},i=super.prepareEditButtons(e),n=t.allowUpdating||t.allowAdding||t.allowDeleting;return n&&this.isBatchEditMode()&&(i.push(this.prepareButtonItem(e,"save","saveEditData",21)),i.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),i}_saveEditDataInner(){var e;const t=this._dataController.getVisibleRows()[this.getEditRowIndex()],i=this._getEditColumn(),n=null===i||void 0===i?void 0:i.showEditorAlways,o=this.isCellEditMode()&&!(null!==t&&void 0!==t&&t.isNewRow);let s;return o&&n&&(s=new h.cY,this.addDeferred(s)),super._saveEditDataInner().always(null===(e=s)||void 0===e?void 0:e.resolve)}_applyChange(e,t,i){const n=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:o}=e.column,s=e.column.setCellValue!==e.column.defaultSetCellValue,r=o&&!i&&n&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex);return r?(this._focusEditingCell(),void this._updateEditRow(e.row,!0,s)):super._applyChange(e,t,i)}_applyChangeCore(e,t){const{showEditorAlways:i}=e.column,n=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(i&&!t){if(n)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return t=this._needUpdateRow(e.column),super._applyChangeCore(e,t)}return super._applyChangeCore(e,t)}_processDataItemCore(e,t,i,n,o){const{data:s,type:r}=t;this.isBatchEditMode()&&r===m["do"]&&(e.data=(0,a.lj)(e.data,s)),super._processDataItemCore(e,t,i,n,o)}_processRemoveCore(e,t,i){if(!this.isBatchEditMode()||i)return super._processRemoveCore(e,t,i)}_processRemoveIfError(e,t){if(!this.isBatchEditMode())return super._processRemoveIfError(e,t)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);const t=e>=0?e:0,i=this.getFirstEditableColumnIndex();i>=0&&this.editCell(t,i)}},f=e=>class extends e{_createTable(){const e=super._createTable.apply(this,arguments),t=this._editingController;return t.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&o.A.on(e,(0,l.b4)(s.A.name,"dxDataGridRowsView"),`td:not(.${m.su})`,this.createAction(()=>{t.isEditing()&&t.closeEditCell()})),e}_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const i=this._editingController,n=!!e.removed;i.isBatchEditMode()&&n&&t.addClass(m.iq)}return t}},v={extenders:{controllers:{editing:C},views:{rowsView:f}}}},80141:function(e,t,i){i.d(t,{I:function(){return I}});i(69375),i(82438),i(2989),i(99819),i(34840);var n=i(24906),o=i(69357),s=i(62192),r=i(47759),l=i(85563),a=i(39889),d=i(66703),u=i(29518),c=i(44956),h=i(89214),p=i(50172),g=i(98793),m=i(94680),_=i(2308),C=i(57064),f=i(20338),v=i(25831),x=i(86330);const w=e=>class extends e{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isEditRow(e){return!this.isPopupEditMode()&&super.isEditRow(e)}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isFormEditMode(){const e=this.option("editing.mode");return e===v.oX}getFirstEditableColumnIndex(){const e=this._firstFormItem;if(this.isFormEditMode()&&e){const t=this.option(v.D9),i=this._dataController.getRowIndexByKey(t),n=this._rowsView.getCellElements(i);return this._rowsView._getEditFormEditorVisibleIndex(n,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){const e=super._isEditColumnVisible(),t=this.option("editing");return this.isFormOrPopupEditMode()&&t.allowUpdating||e}_handleDataChanged(e){if(this.isPopupEditMode()){var t,i;const n=this.option("editing.editRowKey"),o=null===e||void 0===e||null===(t=e.items)||void 0===t?void 0:t.some(e=>(0,a.RL)(e.key,n)),s=(null===(i=e.changeTypes)||void 0===i?void 0:i.length)&&e.changeTypes.every(e=>"insert"===e);("refresh"===e.changeType||o&&e.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e;const t=null===(e=this._editPopup)||void 0===e?void 0:e.option("visible");if(this.isPopupEditMode()&&t)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,t,i){const n=this._editForm;var o;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(o=e.update)||void 0===o||o.call(e,e),this._rowsView.renderDelayedTemplates()):n&&(this._updateEditFormDeferred=(new d.cY).done(()=>n.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(e,t,i)}_showEditPopup(e,t){const i="desktop"!==s.A.current().deviceType,o=this.addWidgetPrefix(v.vo),r=(0,c.X)({showTitle:!1,fullScreen:i,wrapperAttr:{class:o},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(v.kd));if(!this._editPopup){const e=(0,l.A)("<div>").appendTo(this.component.$element()).addClass(o);this._editPopup=this._createComponent(e,_.A),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",e=>{var i;(n.A.trigger(e.component.$content().find(v.gn).not(`.${v.lR}`).first(),"focus"),t)&&(null===(i=this._editForm)||void 0===i||i.repaint())})}this._editPopup.option(r),this._editPopup.show(),super._showEditPopup(e,t)}_getPopupEditFormTemplate(e){const t=this.component.getVisibleRows()[e],i={row:t,values:t.values,rowType:t.rowType,key:t.key,rowIndex:e};return this._rowsView._addWatchMethod(i,t),e=>{const t=this.getEditFormTemplate(),n=this._createComponent((0,l.A)("<div>").appendTo(e),C.A);this._$popupContent=(0,l.A)(n.content()),t(this._$popupContent,i,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,l.A)(e).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){const e=this._getVisibleEditRowIndex();if(e>=0){var t,i;const n=null===(t=this._editPopup)||void 0===t?void 0:t.option("animation");null===(i=this._editPopup)||void 0===i||i.option("animation",null),this._showEditPopup(e,!0),void 0!==n&&this._editPopup.option("animation",n)}}_hideEditPopup(){var e;null===(e=this._editPopup)||void 0===e||e.option("visible",!1)}optionChanged(e){if("editing"===e.name&&this.isFormOrPopupEditMode()){const{fullName:t}=e;0===t.indexOf(v.Qz)?(this._handleFormOptionChange(e),e.handled=!0):0===t.indexOf(v.kd)&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var t;if(this.isFormEditMode()){const e=this._getVisibleEditRowIndex();e>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[e]})}else null!==(t=this._editPopup)&&void 0!==t&&t.option("visible")&&0===e.fullName.indexOf(v.Qz)&&this._repaintEditPopup()}_handlePopupOptionChange(e){const t=this._editPopup;if(t){const i=e.fullName.slice(v.kd.length+1);i?t.option(i,e.value):t.option(e.value)}}renderFormEditorTemplate(e,t,i,n,o){const s=this,r=(0,l.A)(n),{column:a}=t,d=(0,x.AU)(t),h=null===e||void 0===e?void 0:e.row,p=null===h||void 0===h?void 0:h.data,g=i.component,m=a.calculateCellValue(p),_=f.A.getDisplayValue(a,m,p,null===h||void 0===h?void 0:h.rowType),{label:C,labelMark:v,labelMode:w}=i.editorOptions||{},y=(0,c.X)({},e,{data:p,cellElement:null,isOnForm:!0,item:t,id:g.getItemID(t.name||t.dataField),column:(0,c.X)({},a,{editorType:d,editorOptions:(0,c.X)({label:C,labelMark:v,labelMode:w},a.editorOptions,t.editorOptions)}),columnIndex:a.index,setValue:!o&&a.allowEditing&&function(e,t){s.updateFieldValue(y,e,t)}});y.value=m,y.displayValue=_,y.text=a.command?"":f.A.formatValue(_,a);const b=this._getFormEditItemTemplate.bind(this)(y,a);return this._rowsView.renderTemplate(r,b,y,!!(0,u.A1)(r)).done(()=>{this._rowsView._updateCell(r,y)}),y}getFormEditorTemplate(e,t){const i=this.component.columnOption(t.name||t.dataField);return(s,r)=>{const a=(0,l.A)(r),{row:d}=e;if(null!==d&&void 0!==d&&d.watch){const r=d.watch(()=>i.selector(d.data),()=>{var i;let n=a.find(".dx-widget").first(),o=n.data("dxValidator");const r=null===(i=o)||void 0===i?void 0:i.option();a.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,t,s,a),n=a.find(".dx-widget").first(),o=n.data("dxValidator"),r&&!o&&n.dxValidator({validationRules:r.validationRules,validationGroup:r.validationGroup,dataGetter:r.dataGetter})});n.A.on(a,o.N,r)}e=this.renderFormEditorTemplate.bind(this)(e,t,s,a)}}getEditFormOptions(e){var t;const i=null===(t=this._getValidationGroupsInForm)||void 0===t?void 0:t.call(this,e),n=this.option("editing.form.customizeItem"),o=this.addWidgetPrefix(v.VQ);let s=this.option("editing.form.items");const l={};if(s)(0,x.Lx)(s,e=>{const t=(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.dataField);t&&(l[t]=!!e.editorType)});else{const e=this._columnsController.getColumns();s=[],(0,h.__)(e,(e,t)=>{t.isBand||t.type||s.push({column:t,name:t.name,dataField:t.dataField})})}return(0,c.X)({},i,{items:s,formID:`dx-${new r.A}`,customizeItem:t=>{let i;const s=t.name||t.dataField;if((t.column||s)&&(i=t.column||this._columnsController.columnOption(t.name?`name:${t.name}`:`dataField:${t.dataField}`)),i){if(t.label=t.label||{},t.label.text=t.label.text||i.caption,"boolean"===i.dataType&&void 0===t.label.visible){const e=this.option("editing.form.labelMode");"floating"!==e&&"static"!==e||(t.label.visible=!0)}t.template=t.template||this.getFormEditorTemplate(e,t),t.column=i,t.isCustomEditorType=l[s],i.formItem&&(0,c.X)(t,i.formItem),void 0===t.isRequired&&i.validationRules&&(t.isRequired=i.validationRules.some(e=>"required"===e.type),t.validationRules=[]);const n=!(0,p.O9)(t.visible)||t.visible;!this._firstFormItem&&n&&(this._firstFormItem=t)}null===n||void 0===n||n.call(this,t),t.cssClass=(0,p.Kg)(t.cssClass)?`${t.cssClass} ${o}`:o}})}getEditFormTemplate(){return(e,t,i)=>{const n=this.option(v.Qz),o=this.getEditFormOptions(t),s=(0,l.A)("<div>").appendTo(e),r=null===i||void 0===i?void 0:i.isPopupForm;if(this._firstFormItem=void 0,r&&s.addClass(this.addWidgetPrefix(v.QN)),this._editForm=this._createComponent(s,m.A,(0,c.X)({},n,o)),!r){const t=(0,l.A)("<div>").addClass(this.addWidgetPrefix(v.cK)).appendTo(e);this._createComponent((0,l.A)("<div>").appendTo(t),g.A,this._getSaveButtonConfig()),this._createComponent((0,l.A)("<div>").appendTo(t),g.A,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var e;this._rowsView.renderDelayedTemplates(),null===(e=this._editPopup)||void 0===e||e.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;null===(e=this._updateEditFormDeferred)||void 0===e||e.resolve()}_beforeEndSaving(e){var t;(super._beforeEndSaving(e),this.isPopupEditMode())&&(null===(t=this._editPopup)||void 0===t||t.hide())}_processDataItemCore(e,t,i,n,o){const{type:s}=t;this.isPopupEditMode()&&s===v.G3&&(e.visible=!1),super._processDataItemCore(e,t,i,n,o)}_editRowFromOptionChangedCore(e,t){const i=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,t,i),i&&this._showEditPopup(t)}},y=e=>class extends e{_updateEditItem(e){this._editingController.isFormEditMode()&&(e.rowType="detail")}_getChangedColumnIndices(e,t,i,n){if(!1!==n||!t.isEditing||!this._editingController.isFormEditMode())return super._getChangedColumnIndices.apply(this,arguments)}},b=e=>class extends e{_renderCellContent(e,t){"data"===t.rowType&&this._editingController.isPopupEditMode()&&!1===t.row.visible||super._renderCellContent.apply(this,arguments)}getCellElements(e){const t=super.getCellElements(e),i=this._editingController,n=i.getEditForm(),o=i.getEditFormRowIndex();return o===e&&t&&n?n.$element().find(`.${this.addWidgetPrefix(v.VQ)}, .${v.aT}`):t}_getVisibleColumnIndex(e,t,i){const n=this._editingController.getEditFormRowIndex();if(n===t&&(0,p.Kg)(i)){const t=this._columnsController.columnOption(i);return this._getEditFormEditorVisibleIndex(e,t)}return super._getVisibleColumnIndex.apply(this,arguments)}_getEditFormEditorVisibleIndex(e,t){let i=-1;return(0,h.__)(e,(e,n)=>{const o=(0,l.A)(n).find(".dx-field-item-content").data("dx-form-item");if(null!==o&&void 0!==o&&o.column&&t&&o.column.index===t.index)return i=e,!1}),i}_isFormItem(e){const t="detail"===e.rowType||"detailAdaptive"===e.rowType,i="data"===e.rowType&&this._editingController.isPopupEditMode();return(t||i)&&e.item}_updateCell(e,t){this._isFormItem(t)?this._formItemPrepared(t,e):super._updateCell(e,t)}_updateContent(){const e=this._editingController,t=e.getEditForm(),i=null===t||void 0===t?void 0:t.option("validationGroup"),n=super._updateContent.apply(this,arguments);return n.done(()=>{const n=e.getEditForm();i&&n&&n!==t&&n.option("validationGroup",i)})}},I={extenders:{controllers:{editing:w,data:y},views:{rowsView:b}}}},80730:function(e,t,i){i.d(t,{y:function(){return c}});i(82438),i(99819);var n=i(59981),o=i(24906),s=i(63027),r=i(85563),l=i(89214),a=i(91125);class d extends a.Ay.ViewController{init(){this._resizingController=this.getController("resizing"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._toastViewController=this.getController("toastViewController"),this._rowsView=this.getView("rowsView")}_createErrorRow(e,t){let i,s;const a=this._renderErrorMessage(e);return t?(i=(0,r.A)("<tr>").attr("role","row").addClass("dx-error-row"),s=(0,r.A)("<div>").addClass("dx-closebutton").addClass(this.addWidgetPrefix("action")),o.A.on(s,n.U,this.createAction(e=>{var i,n;const o=e.event;let s;const a=(0,r.A)(o.currentTarget).closest(".dx-error-row").index();o.stopPropagation(),(0,l.__)(t,(e,t)=>{s=(0,r.A)(t).children("tbody").children("tr").eq(a),this.removeErrorRow(s)}),null===(i=this._resizingController)||void 0===i||null===(n=i.fireContentReadyAction)||void 0===n||n.call(i)})),(0,r.A)("<td>").attr({colSpan:this._columnsController.getVisibleColumns().length,role:"gridcell"}).prepend(s).append(a).appendTo(i),i):a}_renderErrorMessage(e){const t=e.url?e.message.replace(e.url,""):e.message||e,i=(0,r.A)("<div>").attr("role","alert").attr("aria-roledescription",s.A.format("dxDataGrid-ariaError")).addClass("dx-error-message").text(t);return e.url&&(0,r.A)("<a>").attr("href",e.url).text(e.url).appendTo(i),i}renderErrorRow(e,t,i){var n,o;const s=this;let a,d;if(i)return i.find(".dx-error-message").remove(),a=s._createErrorRow(e),i.prepend(a),a;const u=t>=0||!s._columnHeadersView.isVisible()?s._rowsView:s._columnHeadersView,c=u.getTableElements();return(0,l.__)(c,(i,n)=>{if(a=s._createErrorRow(e,c),d=d||a,t>=0){const e=u._getRowElements((0,r.A)(n)).eq(t);s.removeErrorRow(e.next()),a.insertAfter(e)}else{const e=(0,r.A)(n).children("tbody"),t=e.children("tr");s._columnHeadersView.isVisible()?(s.removeErrorRow(t.last()),(0,r.A)(n).append(a)):(s.removeErrorRow(t.first()),e.first().prepend(a))}}),null===(n=this._resizingController)||void 0===n||null===(o=n.fireContentReadyAction)||void 0===o||o.call(n),d}removeErrorRow(e){if(!e){const t=this._columnHeadersView&&this._columnHeadersView.element();if(e=t&&t.find(".dx-error-row"),!e||!e.length){const t=this._rowsView.element();e=t&&t.find(".dx-error-row")}}e&&e.hasClass("dx-error-row")&&e.remove()}optionChanged(e){"errorRowEnabled"===e.name?e.handled=!0:super.optionChanged(e)}showToastError(e){this._toastViewController.showToast(e,{type:"error"})}}const u=e=>class extends e{init(){super.init(),this.dataErrorOccurred.add((e,t)=>{this.option("errorRowEnabled")&&this._errorHandlingController.renderErrorRow(e,void 0,t)}),this.changed.add(e=>{var t,i;e&&"loadError"===e.changeType||this._editingController&&!this._editingController.hasChanges()&&(null===(t=this._errorHandlingController)||void 0===t||null===(i=t.removeErrorRow)||void 0===i||i.call(t))})}},c={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:d},extenders:{controllers:{data:u}}}},82009:function(e,t,i){i.d(t,{B5:function(){return $},M7:function(){return te},qB:function(){return L},LH:function(){return K},BF:function(){return Ee},GC:function(){return M},PQ:function(){return B},WI:function(){return Ce},yy:function(){return re},GT:function(){return ue},D3:function(){return z},PZ:function(){return N},VI:function(){return G},zk:function(){return oe},j_:function(){return A},uN:function(){return T},Bd:function(){return F},JS:function(){return ge},fM:function(){return Ae},BK:function(){return we},NP:function(){return ie},SK:function(){return se},Zh:function(){return H},tg:function(){return ve},G3:function(){return U},IZ:function(){return q},HO:function(){return be},Ai:function(){return W},rx:function(){return Re},rK:function(){return O},nJ:function(){return Se},d0:function(){return fe}});i(69375),i(82438),i(12266),i(57327),i(50020),i(74786),i(34840);var n=i(63027),o=i(743),s=i(13112),r=i(85563),l=i(80028),a=i(66703),d=i(44956),u=i(58368),c=i(50172),h=i(18574),p=i(10391),g=i(93821);function m(e,t){const i=(0,r.A)("<div>").addClass("dx-filterbuilder-range-start"),n=(0,r.A)("<div>").addClass("dx-filterbuilder-range-end");let o=e.value||[];const s=function(e){return e&&e.length>0?e[0]:null},l=function(e){return e&&2===e.length?e[1]:null};t.append(i),t.append((0,r.A)("<span>").addClass("dx-filterbuilder-range-separator").text("")),t.append(n),t.addClass("dx-filterbuilder-range"),this._editorFactory.createEditor.call(this,i,(0,d.X)({},e.field,e,{value:s(o),parentType:"filterBuilder",setValue(t){o=[t,l(o)],e.setValue(o)}})),this._editorFactory.createEditor.call(this,n,(0,d.X)({},e.field,e,{value:l(o),parentType:"filterBuilder",setValue(t){o=[s(o),t],e.setValue(o)}}))}function _(e,t){return{name:"between",caption:e,icon:"range",valueSeparator:"",dataTypes:["number","date","datetime"],editorTemplate:m.bind(t),notForLookup:!0}}const C={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},f={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};var v={getIconByFilterOperation:e=>C[e],getNameByFilterOperation:e=>f[e]};const x={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},w={date:"shortDate",datetime:"shortDateShortTime"},y=["=","<>","isblank","isnotblank"],b=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"];function I(e,t){const i=e.format||w[e.dataType];if((0,c.Lm)(t)){const i=e.trueText||n.A.format("dxDataGrid-trueText"),o=e.falseText||n.A.format("dxDataGrid-falseText");return t?i:o}return"date"===e.dataType||"datetime"===e.dataType?h.A.format(new Date(t),i):h.A.format(t,i)}function S(e){return e&&e.length>1&&"!"===e[0]&&!U(e)}function A(e){return S(e)?e[1]:e}function E(e,t){return S(e)?e[1]=t:e=t,e}function R(e,t){!function(e){return-1!==e.indexOf("!")}(t)?S(e)&&function(e){const t=A(e);e.length=0,[].push.apply(e,t)}(e):S(e)||function(e){const t=e.slice(0);e.length=0,e.push("!",t)}(e)}function O(e,t){R(e,t);const i=A(e);let n;return t=function(e){return-1===e.indexOf("!")?e:e.substring(1)}(t),function(e,t){for(n=0;n<e.length;n++)Array.isArray(e[n])||(e[n]=t)}(i,t),e}function T(e,t){const i=F(e);return t.filter(e=>e.value===i)[0]}function V(e){if(U(e))return"and";let t="";for(let i=0;i<e.length;i++){const n=e[i];if(!Array.isArray(n)){if(t&&t!==n)throw s.sO.Error("E4019");"!"!==n&&(t=n)}}return t}function F(e){const t=A(e);let i=V(t);return i||(i="and"),t!==e&&(i=`!${i}`),i}function P(e){return e.lookup&&y||x[e.dataType||"string"]}function D(e){return Array.isArray(e)&&e.length}function k(e){const t=D(e.filterOperations)?e.filterOperations:P(e);return(0,d.X)([],t)}function B(e,t){const i=v.getNameByFilterOperation(e);return t&&t[i]?t[i]:i}function H(e,t){for(let i=0;i<t.length;i++)if(t[i].value===e)return t[i];throw new g.A.Error("E1048",e)}function z(e,t){const i=e.filter(e=>e.name===t);return i.length?i[0]:null}function M(e,t,i){const n=k(e),o=!!e.lookup;return i.forEach(t=>{if(!e.filterOperations&&-1===n.indexOf(t.name)){const i=t&&t.dataTypes,s=!!o&&!!t.notForLookup;!s&&i&&i.indexOf(e.dataType||"string")>=0&&n.push(t.name)}}),n.map(e=>{const n=z(i,e);return n?{icon:n.icon||"icon-none",text:n.caption||(0,u.Bc)(n.name),value:n.name,isCustom:!0}:{icon:v.getIconByFilterOperation(e)||"icon-none",text:B(e,t),value:e}})}function N(e){return e.defaultFilterOperation||k(e)[0]}function L(e,t){const i=[e.dataField,"",""],n=N(e);return fe(i,n,t),i}function W(e,t){const i=A(e),n=i.indexOf(t);return i.splice(n,1),1!==i.length&&i.splice(n,1),e}function K(e){const t=Q(e),i=t?J(e):e;return t?["!",[i]]:[i]}function $(e,t){const i=A(t),n=F(i);return 1===i.length?i.unshift(e):i.push(e,n),t}function G(e,t){for(let n=0;n<t.length;n++){if(t[n].name===e)return t[n];if(t[n].dataField.toLowerCase()===e.toLowerCase())return t[n]}const i=ge(t,!0).filter(t=>t.dataField.toLowerCase()===e.toLowerCase());if(i.length>0)return i[0];throw new g.A.Error("E1047",e)}function q(e){return!!Array.isArray(e)&&(e.length<2||Array.isArray(e[0])||Array.isArray(e[1]))}function U(e){return!!Array.isArray(e)&&(e.length>1&&!Array.isArray(e[0])&&!Array.isArray(e[1]))}function j(e,t,i){i=i||"and";const n=V(e).toLowerCase()||i;let o=[];for(let s=0;s<e.length;s++)q(e[s])?(o.push(te(e[s],t,i)),o=ee(o,n)):U(e[s])&&(o.push(Y(e[s],t)),o=ee(o,n));return 0===o.length&&(o=ee(o,n)),o}function X(e,t){const i=z(t,e[1]);return i&&i.name===e[1]}function Y(e,t){return X(e,t)||e.length<3&&(e[2]=e[1],e[1]="="),e}function Q(e){return-1!==e.indexOf("not")}function J(e){return e.substring(3).toLowerCase()}function Z(e,t){const i=Q(t);return t=i?J(t):t,i?["!",e,t]:[e,t]}function ee(e,t){const i=Q(t);t=i?J(t):t,e.push(t);let n=e;return i&&(n=["!",n]),n}function te(e,t,i){return i=i||"and",e?(e=(0,d.X)(!0,[],e),U(e)?Z(Y(e,t),i):S(e)?["!",U(e[1])?Z(Y(e[1],t),i):S(e[1])?Z(te(e[1],t),i):j(e[1],t,i)]:j(e,t,i)):K(i)}function ie(e){return e.reduce((e,t)=>{if((0,c.O9)(t.dataField)){const i={};for(const e in t)t[e]&&b.includes(e)&&(i[e]=t[e]);i.defaultCalculateFilterExpression=p.A.defaultCalculateFilterExpression,(0,c.O9)(i.dataType)||(i.dataType="string"),(0,c.O9)(i.trueText)||(i.trueText=n.A.format("dxDataGrid-trueText")),(0,c.O9)(i.falseText)||(i.falseText=n.A.format("dxDataGrid-falseText")),e.push(i)}return e},[])}function ne(e,t,i,n){const o=G(e[0],t),s=Y(e,i),r=i.length&&z(i,s[1]);return r&&r.calculateFilterExpression?r.calculateFilterExpression.apply(r,[s[2],o,t]):o.createFilterExpression?o.createFilterExpression.apply(o,[s[2],s[1],n]):o.calculateFilterExpression?o.calculateFilterExpression.apply(o,[s[2],s[1],n]):o.defaultCalculateFilterExpression.apply(o,[s[2],s[1],n])}function oe(e,t,i,n){if(!(0,c.O9)(e))return null;if(S(e)){const o=oe(e[1],t,i,n);return["!",o]}const o=A(e);if(U(o))return ne(o,t,i,n)||null;let s,r=[];const l=F(o);for(let a=0;a<o.length;a++)q(o[a])?(s=oe(o[a],t,i,n),s&&(a&&r.push(l),r.push(s))):U(o[a])&&(s=ne(o[a],t,i,n),s&&(r.length&&r.push(l),r.push(s)));return 1===r.length&&(r=r[0]),r.length?r:null}function se(e){const t=A(e);let i;if(0===t.length)return null;const n=[];for(i=0;i<t.length;i++)if(q(t[i])){const e=se(t[i]);e?t[i]=e:n.push(t[i])}else U(t[i])&&(xe(t[i])||n.push(t[i]));for(i=0;i<n.length;i++)W(t,n[i]);return 1===t.length?null:(t.splice(t.length-1,1),1===t.length&&(e=E(e,t[0])),0===e.length?null:e)}function re(e,t,i){if(""===t)return void i("");const{lookup:n}=e;if(n.items)i(n.calculateCellValue(t)||"");else{const s=(0,c.Tn)(n.dataSource)?n.dataSource({}):n.dataSource,r=new o.q(s);r.loadSingle(n.valueExpr,t).done(o=>{let s="";o&&(s=n.displayExpr?(0,l.Hz)(n.displayExpr)(o):o),e.customizeText&&(s=e.customizeText({value:t,valueText:s})),i(s)}).fail(()=>{i("")})}}function le(e,t,i,n,o){let s=I(e,t);return e.customizeText&&(s=e.customizeText.call(e,{value:t,valueText:s,target:n})),i&&i.customizeText&&(s=i.customizeText.call(i,{value:t,valueText:s,field:e,target:n},o)),s}function ae(e,t,i,n){const o={values:t};return t.map(t=>le(e,t,i,n,o))}function de(e){return""===e||null===e}function ue(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(de(t))return"";if(Array.isArray(t)){const o=new a.cY;return a.z7.apply(this,ae(e,t,i,n)).done(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.some(e=>!de(e))?t.map(e=>de(e)?"?":e):"";o.resolve(n)}),o}return le(e,t,i,n)}function ce(e,t){return e.some(e=>e.dataField===t)}function he(e,t,i){const{dataField:n}=i;me(n)&&(i.parentId=_e(n),ce(t,i.parentId)||ce(e,i.parentId)||he(e,t,{id:i.parentId,dataType:"object",dataField:i.parentId,caption:pe(i.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:p.A.defaultCalculateFilterExpression})),t.push(i)}function pe(e,t){let i="";if(t)e=e.substring(e.lastIndexOf(".")+1);else if(me(e))return e.split(".").forEach((e,t,n)=>{i+=(0,u.Bc)(e),t!==n.length-1&&(i+=".")}),i;return(0,u.Bc)(e)}function ge(e,t){const i=[];for(let n=0;n<e.length;n++){const o=(0,d.X)(!0,{caption:pe(e[n].dataField,t)},e[n]);o.id=o.name||o.dataField,t?he(e,i,o):i.push(o)}return i}function me(e){return-1!==e.lastIndexOf(".")}function _e(e){return e.substring(0,e.lastIndexOf("."))}function Ce(e,t){if(me(e.dataField)){const i=_e(e.dataField);for(let n=0;n<t.length;n++)if(t[n].dataField===i)return`${Ce(t[n],t)}.${e.caption}`}return e.caption}function fe(e,t,i){let n=z(i,t);return n?(!1===n.hasValue?(e[1]=t,e.length=2):(e[1]=t,e[2]=""),e):("isblank"===t?(e[1]="=",e[2]=null):"isnotblank"===t?(e[1]="<>",e[2]=null):(n=z(i,e[1]),(n||2===e.length||null===e[2])&&(e[2]=""),e[1]=t),e)}function ve(e){let t;return t=null===e[2]?"="===e[1]?"isblank":"isnotblank":e[1],t}function xe(e){return""!==e[2]}function we(e,t,i){const n=(0,d.X)(!0,[],e);let o=-1;return n.some((e,t)=>{if("between"===e.name)return o=t,!0}),-1!==o?n[o]=(0,d.X)(_(t,i),n[o]):n.unshift(_(t,i)),n}function ye(e,t){return e[0]===t}function be(e,t){if(!e||0===e.length)return null;if(U(e)){const i=ye(e,t);return i?null:e}return Ie(e,[t],!1)}function Ie(e,t,i){const n=[],o=S(e);return e.forEach(e=>{U(e)?ye(e,t[0])?i?(n.push(t),i=!1):n.splice(n.length-1,1):n.push(e):(n.length||q(e))&&n.push(e)}),0===n.length?null:(i&&(n.push("and"),n.push(t)),o?["!",1===n.length?n[0]:n]:1===n.length?n[0]:n)}function Se(e,t){if(null===e||0===e.length)return t;if(U(e))return ye(e,t[0])?t:[e,"and",t];const i=F(e);return"and"!==i?[t,"and",e]:Ie(e,t,!0)}function Ae(e,t){if(null===e||0===e.length)return[];if(U(e))return ye(e,t)?[e]:[];const i=F(e);if("and"!==i)return[];const n=e.filter(e=>U(e)&&ye(e,t));return n}function Ee(e,t){return null!==e&&0!==e.length&&(U(e)?e[0]===t:e.some(e=>(U(e)||q(e))&&Ee(e,t)))}const Re=function(e,t,i){if(Array.isArray(t)){const n=t.length-1;e.empty(),t.forEach((t,o)=>{(0,r.A)("<span>").addClass("dx-filterbuilder-text-part").text(t).appendTo(e),o!==n&&(0,r.A)("<span>").addClass("dx-filterbuilder-text-separator").text(i&&i.valueSeparator?i.valueSeparator:"|").addClass("dx-filterbuilder-text-separator-empty").appendTo(e)})}else t?e.text(t):e.text(n.A.format("dxFilterBuilder-enterValueText"))}},83159:function(e,t,i){function n(e){const t=null===e||void 0===e?void 0:e.rowType;return"detail"===t||"detailAdaptive"===t}i.d(t,{s:function(){return n}})},83416:function(e,t,i){i.d(t,{B:function(){return O},l:function(){return F}});i(69375),i(82438),i(2989),i(12266),i(99819),i(57327),i(50020),i(34840);var n=i(59981),o=i(24906),s=i(96004),r=i(69357),l=i(74567),a=i(63027),d=i(84558),u=i(62192),c=i(92324),h=i(47759),p=i(85563),g=i(39889),m=i(66703),_=i(44956),C=i(27665),f=i(89214),v=i(36947),x=i(50172),w=i(55501),y=i(69274),b=i(5548),I=i(91125),S=i(20338),A=i(25831),E=i(86330);class R extends I.Ay.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._validatingController=this.getController("validating"),this._editorFactoryController=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsResizerController=this.getController("columnsResizer"),this._errorHandlingController=this.getController("errorHandling"),this._rowsView=this.getView("rowsView"),this._headerPanelView=this.getView("headerPanel"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>{e.reject("cancel")}),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=new Map),this.component._optionsByReference[A.D9]=!0,this.component._optionsByReference[A.r8]=!0}getEditMode(){const e=this.option("editing.mode")??A.cy;return A.qR.includes(e)?e:A.cy}isCellBasedEditMode(){const e=this.getEditMode();return A.wi.includes(e)}_getDefaultEditorTemplate(){return(e,t)=>{const i=(0,p.A)("<div>").appendTo(e),n=(0,_.X)({},t.column,{value:t.value,setValue:t.setValue,row:t.row,parentType:"dataRow",width:null,readOnly:!t.setValue,isOnForm:t.isOnForm,id:t.id}),o=A.yQ.includes(this.getEditMode());o&&(n["aria-labelledby"]=t.column.headerId),this._editorFactoryController.createEditor(i,n)}}_getNewRowPosition(){const e=this.option("editing.newRowPosition"),t=this.option("scrolling.mode");if("virtual"===t)switch(e){case A.Mw:return A.pO;case A.Os:return A.nN;default:return e}return e}getChanges(){return this.option(A.r8)}getInsertRowCount(){const e=this.option(A.r8);return e.filter(e=>"insert"===e.type).length}resetChanges(){const e=this.getChanges(),t=null===e||void 0===e?void 0:e.length;t&&(this._silentOption(A.r8,[]),this._internalState.clear())}_getInternalData(e){return this._internalState.get((0,g.GP)(e))}_addInternalData(e){const t=this._getInternalData(e.key);return t?(0,_.X)(t,e):(this._internalState.set((0,g.GP)(e.key),e),e)}_getOldData(e){var t;return null===(t=this._getInternalData(e))||void 0===t?void 0:t.oldData}getUpdatedData(e){const t=this._dataController.keyOf(e),i=this.getChanges(),n=S.A.getIndexByKey(t,i);return i[n]?(0,d.lj)(e,i[n].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===A.G3).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===A["do"]).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if("cancel"===e)return;const t=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,t)}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,t){let i=!0;switch(e.name){case"delete":i=this.allowDeleting(t);break;case"undelete":i=!1}return i}isPopupEditMode(){const e=this.option("editing.mode");return e===A.AV}_isButtonVisible(e,t){const{visible:i}=e;return(0,x.O9)(i)?(0,x.Tn)(i)?i.call(e,{component:t.component,row:t.row,column:t.column}):i:this._isDefaultButtonVisible(e,t)}_isButtonDisabled(e,t){const{disabled:i}=e;return(0,x.Tn)(i)?i.call(e,{component:t.component,row:t.row,column:t.column}):!!i}_getButtonConfig(e,t){const i=(0,x.Gv)(e)?e:{},n=(0,E.i_)(e),o=(0,E.N5)(t),s=A.NT[n],r=this.option("editing"),l=A.gM[n],a=!l||r[l];return(0,_.X)({name:n,text:o[n],cssClass:A.Zm[n]},{onClick:s&&(e=>{const{event:i}=e;i.stopPropagation(),i.preventDefault(),setTimeout(()=>{t.row&&a&&this[s]&&this[s](t.row.rowIndex)})})},i)}_getEditingButtons(e){let t;const i=!!e.column.buttons;let n=(e.column.buttons||[]).slice();return i?(t=(0,E.nh)(n,"edit"),t>=0&&((0,E.nh)(n,"save")<0&&n.splice(t+1,0,"save"),(0,E.nh)(n,"cancel")<0&&n.splice((0,E.nh)(n,"save")+1,0,"cancel")),t=(0,E.nh)(n,"delete"),t>=0&&(0,E.nh)(n,"undelete")<0&&n.splice(t+1,0,"undelete")):n=A.qB.slice(),n.map(t=>this._getButtonConfig(t,e))}_renderEditingButtons(e,t,i,n){t.forEach(t=>{this._isButtonVisible(t,i)&&this._createButton(e,t,i,n)})}_getEditCommandCellTemplate(){return(e,t,i)=>{const n=(0,p.A)(e);if("data"===t.rowType){const e=this._getEditingButtons(t);if(this._renderEditingButtons(n,e,t,i),t.watch){const i=t.watch(()=>e.map(e=>({visible:this._isButtonVisible(e,t),disabled:this._isButtonDisabled(e,t)})),()=>{n.empty(),this._renderEditingButtons(n,e,t)});o.A.on(n,r.N,i)}}else S.A.setEmptyText(n)}}isRowBasedEditMode(){const e=this.getEditMode();return A.CA.includes(e)}getFirstEditableColumnIndex(){let e;const t=this._columnsController.getVisibleColumns();return(0,f.__)(t,(t,i)=>{if(i.allowEditing)return e=t,!1}),e}getFirstEditableCellInRow(e){var t;const i=this.getFirstEditableColumnIndex();return null===(t=this._rowsView)||void 0===t?void 0:t._getCellElement(e||0,i)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,t){return S.A.getIndexByKey(e,t)}hasChanges(e){const t=this.getChanges();let i=!1;for(let n=0;n<(null===t||void 0===t?void 0:t.length);n++)if(t[n].type&&(!(0,x.O9)(e)||this._dataController.getRowIndexByKey(t[n].key)===e)){i=!0;break}return i}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),o.A.off(c.A.getDocument(),s.A.up,this._pointerUpEditorHandler),o.A.off(c.A.getDocument(),s.A.down,this._pointerDownEditorHandler),o.A.off(c.A.getDocument(),n.U,this._saveEditorHandler)}_silentOption(e,t){"editing.changes"===e&&(this._changes=(0,v.tm)([],t)),super._silentOption(e,t)}optionChanged(e){if("editing"===e.name){const{fullName:t}=e;if(t===A.D9)this._handleEditRowKeyChange(e);else if(t===A.r8){const t=(0,g.RL)(e.value,this._changes,{maxDepth:4});t||(this._changes=(0,v.tm)([],e.value),this._handleChangesChange(e))}else e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey());e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){const t=this._dataController.getRowIndexByKey(e.value),i=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(e.previousValue)+i;(0,x.O9)(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(t,n):this.cancelEditData()}_handleChangesChange(e){const t=this._dataController,i=e.value;(e.value.length||e.previousValue.length)&&(i.forEach(e=>{if("insert"===e.type)this._addInsertInfo(e);else{var i;const n=t.getCachedStoreData()||(null===(i=t.items())||void 0===i?void 0:i.map(e=>e.data)),o=S.A.getIndexByKey(e.key,n,t.key());this._addInternalData({key:e.key,oldData:n[o]})}}),t.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,x.O9)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){const e=(0,x.O9)(this.option(A.D9));return e}isEditRow(e){return!1}_setEditRowKey(e,t){t?this._silentOption(A.D9,e):this.option(A.D9,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){const t=this._dataController.getKeyByRowIndex(e),i=(0,x.O9)(t)&&(0,g.RL)(this.option(A.D9),t);return i?this._getVisibleEditRowIndex()===e:i}isEditCell(e,t){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===t}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,t,i){let n=-1;const o=this._dataController,s=this._getInsertAfterOrBeforeKey(t);return(0,x.O9)(s)||0!==e.length?(0,x.O9)(s)&&e.some((r,l)=>{const a=i||this._isProcessedItem(r);if((0,x.Gv)(r)&&(a||(0,x.O9)(r[A.bO])?(0,g.RL)(r.key,s)&&(n=l):(0,g.RL)(o.keyOf(r),s)&&(n=l)),n>=0){const i=e[n+1];if(i&&("detail"===i.rowType||"detailAdaptive"===i.rowType)&&(0,x.O9)(t.insertAfterKey))return;return(0,x.O9)(t.insertAfterKey)&&(n+=1),!0}}):n=0,n}_generateNewItem(e){var t;const i={key:e},n=null===(t=this._getInternalData(e))||void 0===t?void 0:t.insertInfo;return null!==n&&void 0!==n&&n[A.bO]&&(i[A.bO]=n[A.bO]),i}_getLoadedRowIndex(e,t,i){let n=this._getInsertRowIndex(e,t,i);const o=this._dataController;if(n<0){const i=this._getNewRowPosition(),s=o.pageIndex(),r=this._getInsertAfterOrBeforeKey(t);i===A.pR||0!==s||(0,x.O9)(r)?i===A.pR&&o.isLastPageLoaded()&&(n=e.length):n=0}return n}processItems(e,t){const{changeType:i}=t;this.update(i);const n=this.getChanges();return n.forEach(t=>{var i;const n=t.type===A.G3;if(!n)return;let{key:o}=t,s=null===(i=this._getInternalData(o))||void 0===i?void 0:i.insertInfo;(0,x.O9)(o)&&(0,x.O9)(s)||(s=this._addInsertInfo(t),o=s.key);const r=this._getLoadedRowIndex(e,t),l=this._generateNewItem(o);r>=0&&e.splice(r,0,l)}),e}processDataItem(e,t,i){const n=t.visibleColumns,o=e.data[A.bO]?e.data.key:e.key,s=this.getChanges(),r=S.A.getIndexByKey(o,s);e.isEditing=!1,r>=0&&this._processDataItemCore(e,s[r],o,n,i)}_processDataItemCore(e,t,i,n,o){const{data:s,type:r}=t;switch(r){case A.G3:e.isNewRow=!0,e.key=i,e.data=s;break;case A.A2:e.modified=!0,e.oldData=e.data,e.data=(0,d.lj)(e.data,s),e.modifiedValues=o(s,n,!0);break;case A["do"]:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){const t=new m.cY;return(0,m.z7)((0,m.Sx)(e.promise)).done(t.resolve).fail((0,E.HQ)(t)).fail(e=>this._fireDataErrorOccurred(e)),t}}_createInsertInfo(){const e={};return e[A.bO]=this._getInsertIndex(),e}_addInsertInfo(e,t){var i;let n;e.key=this.getChangeKeyValue(e);const{key:o}=e;if(n=null===(i=this._getInternalData(o))||void 0===i?void 0:i.insertInfo,!(0,x.O9)(n)){const i=this._getInsertAfterOrBeforeKey(e);n=this._createInsertInfo(),(0,x.O9)(i)||this._setInsertAfterOrBeforeKey(e,t)}return this._addInternalData({insertInfo:n,key:o}),{insertInfo:n,key:o}}getChangeKeyValue(e){if((0,x.O9)(e.key))return e.key;const t=this._dataController.key();let i;return e.data&&t&&!Array.isArray(t)&&(i=e.data[t]),(0,x.O9)(i)||(i=(0,E.fV)()),i}_setInsertAfterOrBeforeKey(e,t){const i=this.getView("rowsView"),n=this._dataController,o=n.items(!0),s=this._getNewRowPosition();switch(s){case A.Xe:case A.pR:break;case A.Mw:o.length&&(e.insertBeforeKey=o[0].key);break;case A.Os:o.length&&(e.insertAfterKey=o[o.length-1].key);break;default:{const t=s===A.nN;let o=t?null===i||void 0===i?void 0:i.getBottomVisibleItemIndex():null===i||void 0===i?void 0:i.getTopVisibleItemIndex();const r=n.getVisibleRows()[o];r&&(!r.isEditing&&"detail"===r.rowType||"detailAdaptive"===r.rowType)&&o++;const l=n.getKeyByRowIndex(o);(0,x.O9)(l)&&(e.insertBeforeKey=l)}}}_getInsertIndex(){let e=0;return this.getChanges().forEach(t=>{var i;const n=null===(i=this._getInternalData(t.key))||void 0===i?void 0:i.insertInfo;(0,x.O9)(n)&&t.type===A.G3&&n[A.bO]>e&&(e=n[A.bO])}),e+1}_getInsertAfterOrBeforeKey(e){return e.insertAfterKey??e.insertBeforeKey}_getPageIndexToInsertRow(){const e=this._getNewRowPosition(),t=this._dataController,i=t.pageIndex(),n=t.pageCount()-1;return e===A.Xe&&0!==i?0:e===A.pR&&i!==n?n:-1}addRow(e){const t=this._dataController,i=t.store();return i?this._addRow(e):(t.fireError("E1052",this.component.NAME),(new m.cY).reject())}_addRow(e){const t=this._dataController,i=t.store(),n=i&&i.key(),o={data:{}},s=this._getVisibleEditRowIndex(),r=new m.cY;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(n||(o.data.__KEY__=String(new h.A)),(0,m.z7)(this._initNewRow(o,e)).done(()=>{this._allowRowAdding()?(0,m.z7)(this._addRowCore(o.data,e,s)).done(r.resolve).fail(r.reject):r.reject("cancel")}).fail(r.reject),r.promise()):((0,m.z7)(this._navigateToNewRow(s)).done(r.resolve).fail(r.reject),r.promise())}_allowRowAdding(e){const t=this._getInsertIndex();return!(t>1)}_addRowCore(e,t,i){const n={data:e,type:A.G3},o=this._getVisibleEditRowIndex(),s=this._addInsertInfo(n,t),{key:r}=s;return this._setEditRowKey(r,!0),this._addChange(n),this._navigateToNewRow(i,n,o)}_navigateToNewRow(e,t,i){const n=new m.cY,o=this._dataController;if(i=i??-1,t=t??this.getChanges().filter(e=>e.type===A.G3)[0],!t)return n.reject("cancel").promise();const s=this._getPageIndexToInsertRow();let r=this._getLoadedRowIndex(o.items(),t,!0);const l=e=>{var i;(0,m.z7)(null===(i=this._focusController)||void 0===i?void 0:i.navigateToRow(e)).done(()=>{r=o.getRowIndexByKey(t.key),n.resolve()})},a=this._getInsertAfterOrBeforeKey(t);return s>=0?o.pageIndex(s).done(()=>{l(t.key)}).fail(n.reject):r<0&&(0,x.O9)(a)?l(a):(o.updateItems({changeType:"update",rowIndices:[e,i,r]}),r=o.getRowIndexByKey(t.key),r<0?l(t.key):n.resolve()),n.done(()=>{var e;null===(e=this._rowsView)||void 0===e||e.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(r),this._afterInsertRow(t.key)})}),n.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var t;const i=this._dataController,n=i.getKeyByRowIndex(e),o=this.getFirstEditableCellInRow(e);null===(t=this._keyboardNavigationController)||void 0===t||t.focus(o),this.option("focusedRowKey",n),this._editCellInProgress=!0,this._delayedInputFocus(o,()=>{e=i.getRowIndexByKey(n),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(e,t){}_getVisibleEditColumnIndex(){const e=this.option(A.tp);return(0,x.O9)(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,t){var i;const n=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(i=n[e])||void 0===i?void 0:i.name,t)}_setEditColumnName(e,t){t?this._silentOption(A.tp,e):this.option(A.tp,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){const e=this.option(A.tp);return this._getColumnByName(e)}_getColumnByName(e){const t=this._columnsController.getVisibleColumns();let i;return(0,x.O9)(e)&&t.some(t=>{if(t.name===e)return i=t,!0}),i}_getVisibleEditRowIndex(e){const t=this._dataController,i=this.option(A.D9),n=t.getRowIndexByKey(i);return-1===n?n:n+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){const t=e?this._getColumnByName(e):this._getEditColumn(),i="adaptiveHidden"===(null===t||void 0===t?void 0:t.visibleWidth);return i?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){const t=this._dataController,i=t.items(),n=i[e],o={data:n&&n.data,cancel:!1},s=this._getVisibleEditRowIndex();if(n)return e===s||void(void 0!==n.key?(n.isNewRow||(o.key=n.key),this._isEditingStart(o)||(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=t.pageIndex(),this._addInternalData({key:n.key,oldData:n.oldData??n.data}),this._setEditRowKey(n.key))):this._dataController.fireError("E1043"))}_editRowFromOptionChanged(e,t){const i=[t,e];this._beforeUpdateItems(i,e,t),this._editRowFromOptionChangedCore(i,e)}_editRowFromOptionChangedCore(e,t,i){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:i})}_focusEditorIfNeed(){}_showEditPopup(e,t){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){const e={text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)};return(0,y.Ft)((0,y.ss)())&&(e.stylingMode="contained",e.type="default"),e}_getCancelButtonConfig(){const e={text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)};return(0,y.Ft)((0,y.ss)())&&(e.stylingMode="outlined"),e}_removeInternalData(e){this._internalState.delete((0,g.GP)(e))}_updateInsertAfterOrBeforeKeys(e,t){const i=e[t];e.forEach(e=>{if(e.type===A.G3){const t=this._getInsertAfterOrBeforeKey(e);(0,g.RL)(t,i.key)&&(e[(0,x.O9)(e.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(i))}})}_removeChange(e){if(e>=0){const t=[...this.getChanges()],{key:i,type:n}=t[e];this._removeInternalData(i),n!==A["do"]&&this._updateInsertAfterOrBeforeKeys(t,e),t.splice(e,1),this._silentOption(A.r8,t),(0,g.RL)(this.option(A.D9),i)&&this._resetEditIndices()}}executeOperation(e,t){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{"rejected"!==e.state()&&(t(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,m.z7)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,t,i){!e||!e.showEditorAlways||t&&!t.showEditorAlways?(this._editCellInProgress=!0,this._needFocusEditor=!0,this._editorFactoryController.loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[i,this._getVisibleEditRowIndex()]})):e!==t&&(this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:[]}))}_delayedInputFocus(e,t,i){const n=()=>{if(t&&t(),e){const t=e.find(A.gn).first();S.A.focusAndSelectElement(this,t)}this._beforeFocusCallback=null};u.A.real().ios||u.A.real().android?n():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),i&&(this._beforeFocusCallback=t),this._inputFocusTimeoutID=setTimeout(n))}_focusEditingCell(e,t,i){const n=this._getVisibleEditColumnIndex();t=t||this._rowsView&&this._rowsView._getCellElement(this._getVisibleEditRowIndex(),n),t&&this._delayedInputFocus(t,e,i)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){const t=this.option("editing"),i=null===t||void 0===t?void 0:t.texts,n=null===t||void 0===t?void 0:t.confirmDelete,o=null===i||void 0===i?void 0:i.confirmDeleteMessage,s=this._dataController.items()[e],r=!this.isEditing()||s.isNewRow;if(s&&r)if(n&&o){const t=i&&i.confirmDeleteTitle,n=(0,x.O9)(t)&&t.length>0;(0,w.lJ)(o,t,n).done(t=>{t&&this._deleteRowCore(e)})}else this._deleteRowCore(e)}_deleteRowCore(e){const t=this._dataController,i=t.items()[e],n=i&&i.key,o=this._getVisibleEditRowIndex();this.refresh();const s=this.getChanges(),r=S.A.getIndexByKey(n,s);return r>=0?s[r].type===A.G3?this._removeChange(r):this._addChange({key:n,type:A["do"]}):this._addChange({key:n,oldData:i.data,type:A["do"]}),this._afterDeleteRow(e,o)}_afterDeleteRow(e,t){return this.saveEditData()}undeleteRow(e){const t=this._dataController,i=t.items()[e],n=this._getVisibleEditRowIndex(),o=i&&i.key,s=this.getChanges();if(i){const i=S.A.getIndexByKey(o,s);if(i>=0){const{data:r}=s[i];(0,x.RI)(r)?this._removeChange(i):this._addChange({key:o,type:A.A2}),t.updateItems({changeType:"update",rowIndices:[n,e]})}}}_fireOnSaving(){const e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);const t=new m.cY;return(0,m.z7)((0,m.Sx)(e.promise)).done(()=>{t.resolve(e)}).fail(e=>{(0,E.HQ)(t),this._fireDataErrorOccurred(e),t.resolve({cancel:!0})}),t}_executeEditingAction(e,t,i){if(this.component._disposed)return null;const n=new m.cY;return this.executeAction(e,t),(0,m.z7)((0,m.Sx)(t.cancel)).done(e=>{e?setTimeout(()=>{n.resolve("cancel")}):i(t).done(n.resolve).fail((0,E.HQ)(n))}).fail((0,E.HQ)(n)),n}_processChanges(e,t,i,n){const o=this._dataController.store();(0,f.__)(n,(s,r)=>{const l=this._getOldData(r.key),{data:a,type:d}=r,u=Object.assign({},r);let c,h;if(!this._beforeSaveEditData(r,s)){switch(d){case A["do"]:h={data:l,key:r.key,cancel:!1},c=this._executeEditingAction("onRowRemoving",h,()=>o.remove(r.key).done(e=>{i.push({type:"remove",key:e})}));break;case A.G3:h={data:a,cancel:!1},c=this._executeEditingAction("onRowInserting",h,()=>o.insert(h.data).done((e,t)=>{(0,x.O9)(t)&&(u.key=t),e&&(0,x.Gv)(e)&&e!==h.data&&(u.data=e),i.push({type:"insert",data:e,index:0})}));break;case A.A2:h={newData:a,oldData:l,key:r.key,cancel:!1},c=this._executeEditingAction("onRowUpdating",h,()=>o.update(r.key,h.newData).done((e,t)=>{e&&(0,x.Gv)(e)&&e!==h.newData&&(u.data=e),i.push({type:"update",key:t,data:e})}))}if(n[s]=u,c){const i=new m.cY;c.always(e=>{t.push({key:r.key,result:e})}).always(i.resolve),e.push(i.promise())}}})}_processRemoveIfError(e,t){const i=e[t];return(null===i||void 0===i?void 0:i.type)===A["do"]&&t>=0&&e.splice(t,1),!0}_processRemove(e,t,i){const n=e[t];if(!i||!n||n.type===A["do"])return this._processRemoveCore(e,t,!i||!n)}_processRemoveCore(e,t,i){return t>=0&&e.splice(t,1),!0}_processSaveEditDataResult(e){let t=!1;const i=this.getChanges(),n=[...i],o=n.length;for(let s=0;s<e.length;s++){const o=e[s].result,r="cancel"===o,l=S.A.getIndexByKey(e[s].key,n),a=n[l],d=o&&o instanceof Error;if(d){if(a&&this._addInternalData({key:a.key,error:o}),this._fireDataErrorOccurred(o),this._processRemoveIfError(n,l))break}else if(this._processRemove(n,l,r)){t=!r;const n=S.A.getIndexByKey(e[s].key,i);this._updateInsertAfterOrBeforeKeys(i,n)}}return n.length<o&&this._silentOption(A.r8,n),t}_fireSaveEditDataEvents(e){(0,f.__)(e,(e,t)=>{let{data:i,key:n,type:o}=t;const s=this._addInternalData({key:n}),r={key:n,data:i};switch(s.error&&(r.error=s.error),o){case A["do"]:this.executeAction("onRowRemoved",(0,_.X)({},r,{data:s.oldData}));break;case A.G3:this.executeAction("onRowInserted",r);break;case A.A2:this.executeAction("onRowUpdated",r)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){const e=new m.cY;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(e):(0,m.z7)(this._beforeSaveEditData()).done(t=>{t?this._resolveAfterSave(e,{cancel:t}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject))}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){let{cancel:t,error:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.z7)(this._afterSaveEditData(t)).done(()=>{e.resolve(i)}).fail(e.reject)}_saveEditDataInner(){const e=new m.cY,t=[],i=[],n=[],o=this._dataController.dataSource();return(0,m.z7)(this._fireOnSaving()).done(s=>{let{cancel:r,changes:l}=s;return r?e.resolve().promise():(this._processChanges(i,t,n,l),i.length?(this._refocusEditCell=!0,null===o||void 0===o||o.beginLoading(),(0,m.z7)(...i).done(()=>{this._processSaveEditDataResult(t)?this._endSaving(n,l,e):(null===o||void 0===o||o.endLoading(),e.resolve())}).fail(t=>{null===o||void 0===o||o.endLoading(),e.resolve(t)}),e.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(e))}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,t,i){const n=this._dataController.dataSource();this._beforeEndSaving(t),null===n||void 0===n||n.endLoading(),this._refreshDataAfterSave(e,t,i)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,t,i){const n=this._dataController,o=this.option("editing.refreshMode"),s="reshape"!==o&&"repaint"!==o;s||n.push(e),(0,m.z7)(n.refresh({selection:s,reload:s,load:"reshape"===o,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(t)}).done(()=>{this._resolveAfterSave(i)}).fail(e=>{this._resolveAfterSave(i,{error:e})})}isSaving(){return this._saving}_updateEditColumn(){const e=this._isEditColumnVisible(),t=this.option("editing.useIcons"),i=A.OM+(t?` ${A.Mc}`:"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:i,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:i})}_isEditColumnVisible(){const e=this.option("editing");return e.allowDeleting}_isEditButtonDisabled(){const e=this.hasChanges(),t=(0,x.O9)(this.option("editing.editRowKey"));return!(t||e)}_updateEditButtons(){const e=this._isEditButtonDisabled();this._headerPanelView&&(this._headerPanelView.setToolbarItemDisabled("saveButton",e),this._headerPanelView.setToolbarItemDisabled("revertButton",e))}_applyModified(e,t){e&&e.addClass(A.jP)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){const e=this.getChanges(),t={cancel:!1,changes:e};this.executeAction("onEditCanceling",t),t.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){const e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){const t=this._dataController;t.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){const t=this._dataController;t&&this._pageIndex!==t.pageIndex()&&("refresh"===e&&this.refresh({isPageChanged:!0}),this._pageIndex=t.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,t){return t?[]:[e.rowIndex]}addDeferred(e){this._deferreds.includes(e)||(this._deferreds.push(e),e.always(()=>{const t=this._deferreds.indexOf(e);t>=0&&this._deferreds.splice(t,1)}))}_prepareChange(e,t,i){var n;const o={},s=null===(n=e.row)||void 0===n?void 0:n.data,r=e.key,l=new m.cY;if(void 0!==r){e.value=t;const n=(0,m.Sx)(e.column.setCellValue(o,t,(0,_.X)(!0,{},s),i));n.done(()=>{l.resolve({data:o,key:r,oldData:s,type:A.A2})}).fail((0,E.HQ)(l)).fail(e=>this._fireDataErrorOccurred(e)),(0,x.O9)(i)&&e.column.displayValueMap&&(e.column.displayValueMap[t]=i),this._updateRowValues(e),this.addDeferred(l)}return l}_updateRowValues(e){if(e.values){const t=this._dataController,i=t.getRowIndexByKey(e.key),n=t.getVisibleRows()[i];n&&(e.row.values=n.values,e.values=n.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,t,i,n){const o=e.key,s=new m.cY;return void 0===o&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,t,i).done(t=>{(0,m.z7)(this._applyChange(e,t,n)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){const t=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());const i=e&&e.setCellValue!==e.defaultSetCellValue,n=t.some(e=>e.calculateCellValue!==e.defaultCalculateCellValue);return i||n}_applyChange(e,t,i){const n=Object.assign({},e,{forceUpdateRow:i});return this._addChange(t,n),this._updateEditButtons(),this._applyChangeCore(e,n.forceUpdateRow)}_applyChangeCore(e,t){const i=e.column.setCellValue!==e.column.defaultSetCellValue,{row:n}=e;n&&(t||i?this._updateEditRow(n,t,i):n.update&&n.update())}_updateEditRowCore(e,t,i){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,t)})}_updateEditRow(e,t,i){t?this._updateRowImmediately(e,t,i):this._updateRowWithDelay(e,i)}_updateRowImmediately(e,t,i){this._updateEditRowCore(e,!t,i),this._validateEditFormAfterUpdate(e,i),t||this._focusEditingCell()}_updateRowWithDelay(e,t){const i=new m.cY;this.addDeferred(i),setTimeout(()=>{var n;const o=(null===(n=this._editForm)||void 0===n?void 0:n.element())||this.component.$element().get(0),s=(0,p.A)(c.A.getActiveElement(o)),r=this._rowsView.getCellIndex(s,e.rowIndex);let l=s.get(0);const a=S.A.getSelectionRange(l);if(this._updateEditRowCore(e,!1,t),this._validateEditFormAfterUpdate(e,t),r>=0){const t=this._rowsView._getCellElement(e.rowIndex,r);this._delayedInputFocus(t,()=>{setTimeout(()=>{var e;l=c.A.getActiveElement(null===(e=this.component.$element())||void 0===e?void 0:e.get(0)),a.selectionStart>=0&&S.A.setSelectionRange(l,a)})})}i.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,t){var i;const n=null===t||void 0===t?void 0:t.row,o=[...this.getChanges()];let s=S.A.getIndexByKey(e.key,o);s<0&&(s=o.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,o.push(e));const r=Object.assign({},o[s]);return r&&(e.data&&(r.data=(0,d.lj)(r.data,e.data)),r.type&&e.data||!e.type||(r.type=e.type),n&&(n.oldData=this._getOldData(n.key),n.data=(0,d.lj)(n.data,e.data))),o[s]=r,this._silentOption(A.r8,o),t&&r!==(null===(i=this.getChanges())||void 0===i?void 0:i[s])&&(t.forceUpdateRow=!0),r}_getFormEditItemTemplate(e,t){return t.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){const{column:t}=e,i=e.row&&e.row.rowIndex;let n;const o=this.isRowBasedEditMode(),s=this.isEditRow(i),r=this.isEditCell(i,e.columnIndex);let l;if(!(t.showEditorAlways||t.setCellValue&&(s&&t.allowEditing||r))||"data"!==e.rowType&&"detailAdaptive"!==e.rowType||t.command)"detail"===t.command&&"detail"===e.rowType&&s&&(n=null===this||void 0===this?void 0:this.getEditFormTemplate(e));else{const i=this.allowUpdating(e);!((i||s)&&t.allowEditing||r)||!s&&o||(t.showEditorAlways&&!o&&(l={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:t},this._isEditingStart(l)),l&&l.cancel||(e.setValue=(t,i)=>{this.updateFieldValue(e,t,i)})),n=t.editCellTemplate||this._getDefaultEditorTemplate()}return n}_createButton(e,t,i,n){let s=A.oJ[t.name];const r=this.option("editing.useIcons"),d=this.option("useLegacyColumnButtonTemplate");let u=(0,p.A)("<a>").attr("href","#").addClass(A.Q6).addClass(t.cssClass);if(t.template&&d)this._rowsView.renderTemplate(e,t.template,i,!0);else{if(t.template)u=(0,p.A)("<span>").addClass(t.cssClass);else if(r&&s||t.icon){s=t.icon||s;const i=C.F(s);"image"===i||"svg"===i?u=C.N(s).addClass(t.cssClass):u.addClass(`dx-icon${"dxIcon"===i?"-":" "}${s}`).attr("title",t.text),u.addClass(A.gJ),e.addClass(A.Mc);const n=this.getButtonLocalizationNames()[t.name];n&&u.attr("aria-label",a.A.format(n))}else u.text(t.text);(0,x.O9)(t.hint)&&u.attr("title",t.hint),this._isButtonDisabled(t,i)?u.addClass("dx-state-disabled"):t.template&&!t.onClick||o.A.on(u,(0,l.b4)("click",A.dx),this.createAction(e=>{var n;null===(n=t.onClick)||void 0===n||n.call(t,(0,_.X)({},e,{row:i.row,column:i.column})),e.event.preventDefault(),e.event.stopPropagation()})),e.append(u),t.template&&(i.renderAsync=!1,this._rowsView.renderTemplate(u,t.template,i,!0,n))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,t,i,n){const o=this.option("editing.texts")??{},s={revert:o.cancelAllChanges,save:o.saveAllChanges,addRow:o.addRow},r={revert:"cancel",save:"save",addRow:"addrow"}[t],l=s[t],a=("save"===r||"cancel"===r)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:t=>{(0,p.A)(t.element).addClass(e._getToolbarButtonClass(`${A.Xh} ${this.addWidgetPrefix(r)}-button`))},icon:`edit-button-${r}`,disabled:a,onClick:()=>{setTimeout(()=>{this[i]()})},text:l,hint:l},showText:"inMenu",name:`${t}Button`,location:"after",locateInMenu:"auto",sortIndex:n}}prepareEditButtons(e){const t=this.option("editing")??{},i=[];return t.allowAdding&&i.push(this.prepareButtonItem(e,"addRow","addRow",20)),i}highlightDataCell(e,t){this.shouldHighlightCell(t)&&e.addClass(A.jP)}_afterInsertRow(e){}_beforeSaveEditData(e){if(e&&!(0,x.O9)(e.key)&&(0,x.O9)(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,t){let i=this.option(`editing.${e}`);return(0,x.Tn)(i)&&(i=i({component:this.component,row:t.row})),i}allowUpdating(e,t){const i=this.option("editing.startEditAction")??A.Lb,n=!(arguments.length>1)||(i===t||"down"===t);return n&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var t,i;const{columnIndex:n}=e;let o=null===e||void 0===e||null===(t=e.row)||void 0===t||null===(t=t.modifiedValues)||void 0===t?void 0:t[n];return null!==e&&void 0!==e&&null!==(i=e.row)&&void 0!==i&&i.isNewRow&&(o=e.value),void 0!==o}isNewRowInEditMode(){const e=this._getVisibleEditRowIndex(),t=this._dataController.items();return e>=0&&t[e].isNewRow}_isRowDeleteAllowed(){}_prepareEditCell(e){return!1}shouldHighlightCell(e){const t=this.isCellModified(e);return t&&e.column.setCellValue&&(this.getEditMode()!==A.cy||!e.row.isEditing)}}const O=e=>class extends e{reload(e,t){return!t&&this._editingController.refresh(),super.reload.apply(this,arguments)}repaintRows(){if(!this._editingController.isSaving())return super.repaintRows.apply(this,arguments)}_updateEditRow(e){const t=this.option(A.D9),i=S.A.getIndexByKey(t,e),n=e[i];var o;n&&(n.isEditing=!0,null===(o=this._updateEditItem)||void 0===o||o.call(this,n))}_updateItemsCore(e){super._updateItemsCore(e),this._updateEditRow(this.items(!0))}_applyChangeUpdate(e){this._updateEditRow(e.items),super._applyChangeUpdate(e)}_applyChangesOnly(e){this._updateEditRow(e.items),super._applyChangesOnly(e)}_processItems(e,t){return e=this._editingController.processItems(e,t),super._processItems(e,t)}_processDataItem(e,t){return this._editingController.processDataItem(e,t,this.generateDataValues),super._processDataItem(e,t)}_processItem(e,t){return e=super._processItem(e,t),e.isNewRow&&(t.dataIndex--,delete e.dataIndex),e}_getChangedColumnIndices(e,t,i,n){if(e.isNewRow===t.isNewRow&&e.removed===t.removed)return super._getChangedColumnIndices.apply(this,arguments)}_isCellChanged(e,t,i,n,o){const s=e.cells&&e.cells[n],r=this._editingController&&this._editingController.isEditCell(i,n);return(!o||!r)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===r)||super._isCellChanged.apply(this,arguments))}needToRefreshOnDataSourceChange(e){const t=Array.isArray(e.value)&&e.value===e.previousValue&&this._editingController.isSaving();return!t}_handleDataSourceChange(e){const t=super._handleDataSourceChange(e),i=this.option("editing.changes"),n=e.value;if(Array.isArray(n)&&i.length){const e=n.map(e=>this.keyOf(e)),t=i.filter(t=>"insert"===t.type||e.some(e=>(0,g.RL)(t.key,e)));t.length!==i.length&&this.option("editing.changes",t);const o=this.option("editing.editRowKey"),s=t.some(e=>"insert"===e.type&&(0,g.RL)(o,e.key));!s&&e.every(e=>!(0,g.RL)(o,e))&&this.option("editing.editRowKey",null)}return t}},T=e=>class extends e{getCellIndex(e,t){if(!e.is("td")&&t>=0){const i=this.getCellElements(t);let n=-1;return(0,f.__)(i,(t,i)=>{(0,p.A)(i).find(e).length&&(n=t)}),n}return super.getCellIndex.apply(this,arguments)}publicMethods(){return super.publicMethods().concat(["cellValue"])}_getCellTemplate(e){const t=this._editingController.getColumnTemplate(e);return t||super._getCellTemplate(e)}_createRow(e){const t=super._createRow.apply(this,arguments);if(e){const i=!!e.removed,n=!!e.isNewRow,o=!!e.modified;n&&t.addClass(A.yu),o&&t.addClass(A.BX),(n||i)&&t.removeClass(A.X9)}return t}_getColumnIndexByElement(e){let t=e.closest("table");const i=this.getTableElements();while(t.length&&!i.filter(t).length)e=t.closest("td"),t=e.closest("table");return this._getColumnIndexByElementCore(e)}_getColumnIndexByElementCore(e){const t=e.closest(`.${A.sN}> td:not(.dx-master-detail-cell)`);return this.getCellIndex(t)}_editCellByClick(e,t){const i=this._editingController,n=(0,p.A)(e.event.target),o=this._getColumnIndexByElement(n),s=this._dataController.items()[e.rowIndex],r=i.allowUpdating({row:s},t)||s&&s.isNewRow,l=this._columnsController.getVisibleColumns()[o],a=i.isEditCell(e.rowIndex,o),d=r&&l&&(l.allowEditing||a),c=this.option("editing.startEditAction")||"click",h=l&&l.showEditorAlways;if(a)return!0;if("down"===t)return(u.A.real().ios||u.A.real().android)&&b.Ay.resetActiveElement(),h&&d&&i.editCell(e.rowIndex,o);if("click"===t&&"dblClick"===c&&this._pointerDownTarget===n.get(0)){const e=!1,t=null===s||void 0===s?void 0:s.isNewRow;i.closeEditCell(e,t)}return d&&t===c?i.editCell(e.rowIndex,o)||i.isEditRow(e.rowIndex):void 0}_rowPointerDown(e){this._pointerDownTarget=e.event.target,this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(e,"down")})}_rowClickTreeListHack(e){super._rowClick.apply(this,arguments)}_rowClick(e){const t=(0,p.A)(e.rowElement).hasClass(this.addWidgetPrefix(A.BL));e.event[A.se]=this.component,this._editCellByClick(e,"click")||t||super._rowClick.apply(this,arguments)}_rowDblClickTreeListHack(e){super._rowDblClick.apply(this,arguments)}_rowDblClick(e){this._editCellByClick(e,"dblClick")||super._rowDblClick.apply(this,arguments)}_cellPrepared(e,t){var i;const n=this._editingController,o=!!t.column.command,s=t.setValue,r=n.isEditRow(t.rowIndex),l=(0,E.d5)(r,t);if((0,E.TG)(r,t)){const{alignment:i}=t.column;e.toggleClass(this.addWidgetPrefix(A.MN),!s).toggleClass(A.iK,!s),i&&e.find(A.CN).first().css("textAlign",i)}l&&this._editCellPrepared(e);const a=!(null===(i=t.column)||void 0===i||!i.cellTemplate);!t.column||o||a&&!n.shouldHighlightCell(t)||n.highlightDataCell(e,t),super._cellPrepared.apply(this,arguments)}_getCellOptions(e){const t=super._getCellOptions(e),{columnIndex:i,row:n}=e;return t.isEditing=this._editingController.isEditCell(t.rowIndex,t.columnIndex),t.removed=n.removed,n.modified&&(t.modified=void 0!==n.modifiedValues[i]),t}_setCellAriaAttributes(e,t,i){super._setCellAriaAttributes(e,t,i),t.removed&&this.setAria("roledescription",a.A.format("dxDataGrid-ariaDeletedCell"),e),t.modified&&this.setAria("roledescription",a.A.format("dxDataGrid-ariaModifiedCell"),e);const n=t.column.allowEditing&&!t.removed&&!t.modified&&"data"===t.rowType&&t.column.calculateCellValue===t.column.defaultCalculateCellValue&&this._editingController.isCellBasedEditMode();n&&this.setAria("roledescription",a.A.format("dxDataGrid-ariaEditableCell"),e)}_createCell(e){const t=super._createCell(e),i=this._editingController.isEditRow(e.rowIndex);return(0,E.TG)(i,e)&&t.addClass(A.su),t}cellValue(e,t,i,n){const o=this.getCellOptions(e,t);if(o){if(void 0===i)return o.value;this._editingController.updateFieldValue(o,i,n,!0)}}dispose(){super.dispose.apply(this,arguments),clearTimeout(this._pointerDownTimeout)}_renderCore(){return super._renderCore.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}_editCellPrepared(){}_formItemPrepared(){}},V=e=>class extends e{optionChanged(e){const{fullName:t}=e;switch(e.name){case"editing":{const i=[A.kd,A.r8,A.tp,A.D9],n=t&&!i.some(e=>e===t);n&&this._invalidate(),super.optionChanged(e);break}case"useLegacyColumnButtonTemplate":e.handled=!0;break;default:super.optionChanged(e)}}_getToolbarItems(){const e=super._getToolbarItems(),t=this._editingController.prepareEditButtons(this);return t.concat(e)}},F={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:A.pO,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:a.A.format("dxDataGrid-editingEditRow"),saveAllChanges:a.A.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:a.A.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:a.A.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:a.A.format("dxDataGrid-editingCancelRowChanges"),addRow:a.A.format("dxDataGrid-editingAddRow"),deleteRow:a.A.format("dxDataGrid-editingDeleteRow"),undeleteRow:a.A.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:a.A.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:R},extenders:{controllers:{data:O},views:{rowsView:T,headerPanel:V}}}},85414:function(e,t,i){i.d(t,{J:function(){return f}});i(69375),i(82438),i(12266),i(99819),i(57327),i(74786),i(32225);var n=i(24906),o=i(63027),s=i(92324),r=i(85563),l=i(66703),a=i(44956),d=i(63825),u=i(50172),c=i(91829),h=i(20230),p=i(44031),g=i(29410);const m={cellContent:"text-content"},_="dx-link";class C extends((0,c._)(g.n)){addCssClassesToCellContent(e,t,i){const n=this._getIndicatorElements(e,!0),o=this._getIndicatorElements(e),s=null===n||void 0===n?void 0:n.length,r=this._getColumnAlignment(t.alignment??""),l=`.${this._getIndicatorClassName("sort")}`,a=`.${this._getIndicatorClassName("sortIndex")}`,d=o.filter(l),u=o.children().filter(a),c=i??e.children(`.${this.addWidgetPrefix(m.cellContent)}`);c.toggleClass("dx-text-content-alignment-"+r,s>0).toggleClass("dx-text-content-alignment-"+("left"===r?"right":"left"),s>0&&"center"===t.alignment).toggleClass("dx-sort-indicator",!!d.length).toggleClass("dx-sort-index-indicator",!!u.length).toggleClass("dx-header-filter-indicator",!!o.filter(`.${this._getIndicatorClassName("headerFilter")}`).length)}createCellContent(e,t){const i=(0,r.A)("<div>").addClass(this.addWidgetPrefix(m.cellContent));this.setAria("role","presentation",i),this.addCssClassesToCellContent(e,t,i);const n=this.option("showColumnLines"),o=this.getController("columns").getHeaderContentAlignment(t.alignment);return n||"right"===o?i.appendTo(e):i.prependTo(e),i}init(){super.init(),this._headerPanelView=this.getView("headerPanel"),this._headerFilterController=this.getController("headerFilter"),this._dataController=this.getController("data"),this._headersKeyboardNavigation=this.getController("headersKeyboardNavigation")}_createTable(){const e=super._createTable.apply(this,arguments);return n.A.on(e,"mousedown selectstart",this.createAction(e=>{const{event:t}=e;t.shiftKey&&t.preventDefault()})),e}_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")}getHeaderDefaultTemplate(e,t){const{column:i}=t,{caption:n}=i,o=!i.command||n&&"expand"!==i.command;if("empty"===i.command)this._renderEmptyMessage(e,t);else if(o){const t=this.createCellContent(e,i);t.text(n)}else i.command&&e.html("&nbsp;")}_renderEmptyMessage(e,t){const i=this._getEmptyHeaderText();if(!i)return void e.html("&nbsp;");const l=this.createCellContent(e,t.column),a=i.includes("{0}");if(a){const[e,t]=i.split("{0}"),a=o.A.format("dxDataGrid-emptyHeaderColumnChooserText"),d=this._columnChooserView,u=(0,r.A)("<a>").text(a).addClass(_);n.A.on(u,"click",this.createAction(()=>d.showColumnChooser())),l.append(s.A.createTextNode(e)).append(u).append(s.A.createTextNode(t))}else l.text(i)}_getEmptyHeaderText(){const e=!!this._columnChooserView.hasHiddenColumns(),t=!!this._headerPanelView.hasGroupedColumns();switch(!0){case e&&t:return o.A.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case t:return o.A.format("dxDataGrid-emptyHeaderWithGroupPanelText");case e:return o.A.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}}_getHeaderTemplate(e){return e.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this.getHeaderDefaultTemplate.bind(this)}}_processTemplate(e,t){const i=this;let n;const{column:o}=t,s=super._processTemplate(e);return n="header"===t.rowType&&s&&o.headerCellTemplate&&!o.command?{render(e){const t=i.createCellContent(e.container,e.model);s.render((0,a.X)({},e,{container:t}))}}:s,n}_handleDataChanged(e){"refresh"===e.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())}_renderCell(e,t){const i=super._renderCell(e,t);if("header"===t.row.rowType&&(i.addClass("dx-cell-focus-disabled"),!this._isLegacyKeyboardNavigation())){const{column:e}=t,n=this._columnsController.isCustomCommandColumn(e);!e||e.type&&!n||i.attr("tabindex",this.option("tabindex")||0)}return i}_setCellAriaAttributes(e,t,i){super._setCellAriaAttributes(e,t,i),"header"===t.rowType&&(t.column.type||this.setAria("role","columnheader",e),!t.column||t.column.command||t.column.isBand||(e.attr("id",t.column.headerId),this.setAria("label",`${o.A.format("dxDataGrid-ariaColumn")} ${t.column.caption}`,e)))}_createRow(e){const t=super._createRow.apply(this,arguments);return t.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===e.rowType&&(t.addClass("dx-header-row"),this._isLegacyKeyboardNavigation()||(0,p.j)("columnHeaders",this,t,"td",this._handleActionKeyDown.bind(this))),t}_processHeaderAction(e,t){}_handleActionKeyDown(e){const{event:t}=e,i=(0,r.A)(t.target);if(this._lastActionElement=t.target,i.is(".dx-header-filter")){const e=this._headerFilterController,t=i.closest("td"),n=this.getColumnIndexByElement(t);n>=0&&e.showHeaderFilterMenu(n,!1)}else{const e=i.closest(".dx-row");this._processHeaderAction(t,e)}t.preventDefault()}_renderCore(){const e=this.element(),t={};if(this._tableElement&&!this._dataController.isLoaded()&&!this._hasRowElements)return(new l.cY).resolve();e.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),this.setAria("role","presentation",e);const i=this._updateContent(this._renderTable({change:t}),t);return e.toggleClass("dx-header-multi-row",this.getRowCount()>1),super._renderCore.apply(this,arguments),i}_renderRows(){const e=this;(e._dataController.isLoaded()||e._hasRowElements)&&(super._renderRows.apply(e,arguments),e._hasRowElements=!0)}_renderRow(e,t){const i=1===this.getRowCount()?null:t.row.rowIndex;t.columns=this.getColumns(i),super._renderRow(e,t)}_createCell(e){const{column:t}=e,i=super._createCell.apply(this,arguments);return t.rowspan>1&&"header"===e.rowType&&i.attr("rowSpan",t.rowspan),i}_getRows(){const e=[],t=this.getRowCount();if(this.option("showColumnHeaders"))for(let i=0;i<t;i++)e.push({rowType:"header",rowIndex:i});return e}_getCellTemplate(e){if("header"===e.rowType)return this._getHeaderTemplate(e.column)}_columnOptionChanged(e){const{changeTypes:t}=e,{optionNames:i}=e;t.grouping||t.groupExpanding?t.grouping&&(this._isGroupingChanged=!0):(super._columnOptionChanged(e),(i.width||i.visible)&&this.resizeCompleted.fire())}_isElementVisible(e){return null===e||void 0===e?void 0:e.visible}_alignCaptionByCenter(e){var t;let i=this._getIndicatorContainer(e,!0);null!==(t=i)&&void 0!==t&&t.length&&(i.filter(".dx-visibility-hidden").remove(),i=this._getIndicatorContainer(e),i.clone().addClass("dx-visibility-hidden").css("float","").insertBefore(e.children(`.${this.addWidgetPrefix(m.cellContent)}`)))}_updateCell(e,t){"header"===t.rowType&&"center"===t.column.alignment&&this._alignCaptionByCenter(e),super._updateCell.apply(this,arguments)}_updateIndicator(e,t,i){const n=super._updateIndicator.apply(this,arguments);return"center"===t.alignment&&this._alignCaptionByCenter(e),this.addCssClassesToCellContent(e,t),n}_getIndicatorContainer(e,t){const i=super._getIndicatorContainer(e);return t?i:i.filter(":not(.dx-visibility-hidden)")}_isSortableElement(e){return!0}getHeadersRowHeight(){const e=this.getTableElement(),t=null===e||void 0===e?void 0:e.find(".dx-header-row");return(null===t||void 0===t?void 0:t.toArray().reduce((e,t)=>e+(0,d.Oq)(t),0))||0}getHeaderElement(e){const t=this.getColumnElements();return(null===t||void 0===t?void 0:t.eq(e))??(0,r.A)("")}getColumnElements(e,t){let i;const n=this._columnsController,o=this.getRowCount();if(this.option("showColumnHeaders")){if(o>1&&(!(0,u.O9)(e)||(0,u.O9)(t))){const o=[];let s=[];return s=(0,u.O9)(t)?n.getChildrenByBandColumn(t,!0):n.getVisibleColumns(),s.forEach(t=>{const s=e??n.getRowIndex(t.index),r=n.getVisibleIndex(t.index,s);i=this._getCellElement(s,r),i&&o.push(i.get(0))}),(0,r.A)(o)}if(!e||e<o)return this.getCellElements(e||0)}}getColumnIndexByElement(e){const t=this.getCellIndex(e),i=e.closest(".dx-row"),{rowIndex:n}=i[0],o=this.getColumns(n)[t];return o?o.index:-1}getVisibleColumnIndex(e,t){const i=this.getColumns()[e];return i?this._columnsController.getVisibleIndex(i.index,t):-1}getColumnWidths(e,t){const i=this.getColumnElements(t);return null!==i&&void 0!==i&&i.length?this._getWidths(i):super.getColumnWidths.apply(this,arguments)}isColumnReorderingEnabled(e){return e.allowReordering&&(this.option("allowColumnReordering")??this._columnsController.isColumnOptionUsed("allowReordering"))}allowDragging(e){const t=e&&this._columnsController.getRowIndex(e.index),i=this.getColumns(t);return this.isColumnReorderingEnabled(e)&&i.length>1}getBoundingRect(){const e=this,t=e.getColumnElements();if(null!==t&&void 0!==t&&t.length){const t=e.getTableElement().offset();return{top:t.top}}return null}getName(){return"headers"}getColumnCount(){const e=this.getColumnElements();return e?e.length:0}isVisible(){return this.option("showColumnHeaders")}optionChanged(e){const t=this;switch(e.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":t._invalidate(!0,!0),e.handled=!0;break;default:super.optionChanged(e)}}getHeight(){return this.getElementHeight()}getContextMenuItems(e){let t;const{column:i}=e;if(e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){const n=this.option("sorting");if(n&&"none"!==n.mode&&null!==i&&void 0!==i&&i.allowSorting){const e=e=>{setTimeout(()=>{this._columnsController.changeSortOrder(i.index,e.itemData.value)})};t=[{text:n.ascendingText,value:"asc",disabled:"asc"===i.sortOrder,icon:"context-menu-sort-asc",onItemClick:e},{text:n.descendingText,value:"desc",disabled:"desc"===i.sortOrder,icon:"context-menu-sort-desc",onItemClick:e},{name:"clearSorting",text:n.clearText,value:"none",disabled:!i.sortOrder,icon:"context-menu-sort-none",onItemClick:e}]}if("header"===e.row.rowType){const i=this.getMoveColumnContextMenuItems(e);null!==i&&void 0!==i&&i.length&&(t=t??[],t.push(...i))}}return t}getRowCount(){var e;return null===(e=this._columnsController)||void 0===e?void 0:e.getRowCount()}toggleDraggableColumnClass(e,t,i){let n,o;const s=this.getRowCount(),r=this._columnsController.getColumns(),l=null===r||void 0===r?void 0:r[e],a=(null===l||void 0===l?void 0:l.isBand)&&l.index,d=(e,i)=>{e.ownerBand===a&&(o.eq(i).toggleClass(this.addWidgetPrefix(h.N.draggableColumn),t),e.isBand&&this.toggleDraggableColumnClass(e.index,t,n+1))};if((0,u.O9)(a))for(i=i||0,n=i;n<s;n++)if(o=this.getCellElements(n),o){const e=this.getColumns(n);e.forEach(d)}}isFilterRowCell(e){return!1}getKeyboardNavigationController(){return this._headersKeyboardNavigation}renderDragCellContent(e,t){e.text(t.caption??"")}}const f={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:C}}},86330:function(e,t,i){i.d(t,{AU:function(){return g},HQ:function(){return s},Lx:function(){return m},MF:function(){return u},N5:function(){return a},TG:function(){return l},Xl:function(){return p},d5:function(){return r},fV:function(){return d},i_:function(){return h},nh:function(){return c}});i(82438),i(57327),i(34840);var n=i(47759),o=i(50172);const s=function(e){return function(t){const i=t instanceof Error?t:new Error(t&&String(t)||"Unknown error");e.reject(i)}},r=function(e,t){return t.isEditing||e&&t.column.allowEditing},l=function(e,t){const i=!!t.column.command,n=r(e,t),o=!i&&(n||t.column.showEditorAlways);return"data"===t.rowType&&o},a=e=>{const t=e.component.option("editing.texts")||{};return{save:t.saveRowChanges,cancel:t.cancelRowChanges,edit:t.editRow,undelete:t.undeleteRow,delete:t.deleteRow,add:t.addRowToNode}},d=()=>`_DX_KEY_${new n.A}`,u=e=>"string"===typeof e&&e.startsWith("_DX_KEY_")&&44===e.length,c=(e,t)=>{let i=-1;return e.some((e,n)=>{if(h(e)===t)return i=n,!0}),i};function h(e){return(0,o.Gv)(e)?e.name:e}function p(e){return e&&(e.is("input")||e.is("textarea"))}const g=e=>{var t;const{column:i}=e;return e.isCustomEditorType?e.editorType:null===(t=i.formItem)||void 0===t?void 0:t.editorType},m=(e,t)=>{e.forEach(e=>{e.items||e.tabs?m(e.items||e.tabs,t):t(e)})}},89021:function(e,t,i){i.d(t,{A:function(){return g}});var n=i(66529),o=i(85563),s=i(50172),r=i(63029),l=i(27996),a=i(33892);class d extends a.A{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{min:0,max:100,value:0})}_initMarkup(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),super._initMarkup()}_render(){super._render(),this._setRangeStyles(this._rangeStylesConfig())}_renderWrapper(){this._$wrapper=(0,o.A)("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())}_renderContainer(){this._$bar=(0,o.A)("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)}_renderRange(){this._$range=(0,o.A)("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)}_renderValue(){const{value:e,min:t,max:i}=this.option();if(t>i)return;if(e<t)return this.option("value",t),void(this._currentRatio=0);if(e>i)return this.option("value",i),void(this._currentRatio=1);const n=t===i?0:(e-t)/(i-t);this._needPreventAnimation||this._setRangeStyles({width:100*n+"%"}),this.setAria({valuemin:this.option("min"),valuemax:i,valuenow:e}),this._currentRatio=n}_rangeStylesConfig(){return{width:100*this._currentRatio+"%"}}_setRangeStyles(e){r.fx.stop(this._$range),e?!this._needPreventAnimation&&(0,l.Vd)()&&r.fx.animate(this._$range,{type:"custom",duration:100,to:e}):this._$range.css({width:0})}_optionChanged(e){switch(e.name){case"value":this._renderValue(),super._optionChanged(e);break;case"max":case"min":this._renderValue();break;default:super._optionChanged(e)}}_dispose(){r.fx.stop(this._$range),super._dispose()}}(0,n.A)("dxTrackBar",d);var u=d;const c="dx-progressbar-animating-segment";class h extends u{_getDefaultOptions(){return Object.assign({},super._getDefaultOptions(),{value:0,statusFormat:e=>`Progress: ${Math.round(100*e)}%`,showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:e=>"android"===e.platform,options:{_animatingSegmentCount:2}}])}_toggleReadOnlyState(){this.setAria("readonly",void 0)}_initMarkup(){this._renderStatus(),this._createCompleteAction(),super._initMarkup(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),(0,o.A)("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range");const{showStatus:e}=this.option();this._toggleStatus(e)}_useTemplates(){return!1}_createCompleteAction(){this._completeAction=this._createActionByOption("onComplete")}_renderStatus(){this._$status=(0,o.A)("<div>").addClass("dx-progressbar-status")}_renderIndeterminateState(){this._$segmentContainer=(0,o.A)("<div>").addClass("dx-progressbar-animating-container");const{_animatingSegmentCount:e}=this.option();for(let t=0;t<e;t+=1)(0,o.A)("<div>").addClass(c).addClass(`${c}-${t+1}`).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)}_toggleStatus(e){const{statusPosition:t}=this.option(),i=t.split(" ");e?"top"===i[0]||"left"===i[0]?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()}_togglePositionClass(){const{statusPosition:e}=this.option(),t=e.split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");let i=`dx-position-${t[0]}`;t[1]&&(i+=`-${t[1]}`),this._$wrapper.addClass(i)}_toggleIndeterminateState(e){var t;e?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),null===(t=this._$segmentContainer)||void 0===t||t.remove(),delete this._$segmentContainer)}_renderValue(){const{value:e,max:t}=this.option();e||0===e?(this._$segmentContainer&&this._toggleIndeterminateState(!1),e===t&&this._completeAction(),super._renderValue(),this._setStatus()):this._toggleIndeterminateState(!0)}_setStatus(){const{statusFormat:e}=this.option();let t=e;t=(0,s.Tn)(t)?t.bind(this):function(e){return e};const i=t(this._currentRatio,this.option("value"));this._$status.text(i)}_dispose(){this._$status.remove(),super._dispose()}_optionChanged(e){const{name:t,value:i}=e;switch(t){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(i);break;case"statusPosition":{const{showStatus:e}=this.option();this._toggleStatus(e);break}case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:super._optionChanged(e)}}}(0,n.A)("dxProgressBar",h);var p=h,g=p},90986:function(e,t,i){i.d(t,{um:function(){return Qe}});var n=i(63027),o=i(50172),s=i(27996),r=i(60550),l=i(20177),a=i(4012),d=i(43748);const u=Object.assign({},d.D,{isGridCompatibilityMode:!1,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:1,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizeSelector:"auto",allowedPageSizes:[5,10],showNavigationButtons:!1,itemCount:1,label:n.A.format("dxPagination-ariaLabel")}),c=Object.assign({},u,{pageSize:5,pageIndex:1,pageIndexChangedInternal:()=>{},pageSizeChangedInternal:()=>{}});var h=i(75196),p=i(45141);const g="dx-pager",m="dx-pagination",_="dx-light-mode",C="dx-pages",f="dx-page-indexes",v="dx-page",x="dx-selection",w="dx-page-size",y="dx-page-sizes",b="dx-page-size dx-selection",I="dx-first-child",S=(0,l.q6)(void 0),A=(0,l.q6)(void 0),E={};class R extends l.eh{constructor(){super(...arguments),this.state={}}getConfig(){return{isGridCompatibilityMode:this.props.isGridCompatibilityMode}}getChildContext(){return Object.assign({},this.context,{[A.id]:this.getConfig()||A.defaultValue})}render(){return this.props.children}}R.defaultProps=E;var O=i(70781);function T(e){return e[A.id]?e[A.id]:A.defaultValue}function V(e){var t;return!(null===(t=T(e))||void 0===t||!t.isGridCompatibilityMode)}function F(e,t){let i=t;return V(e)&&(i=t.replace("dxPagination","dxPager")),n.A.getFormatter(i)()}const P="dx-info",D={pageCount:c.pageCount,pageIndex:c.pageIndex,itemCount:c.itemCount};class k extends l.eh{constructor(){super(...arguments),this.state={},this.refs=null,this.rootElementRef=(0,r._3)()}getInfoText(){return this.props.infoText??F(this.context,"dxPagination-infoText")}getText(){const{pageCount:e,pageIndex:t,itemCount:i}=this.props;return(0,O.GP)(this.getInfoText(),(t+1).toString(),null===e||void 0===e?void 0:e.toString(),null===i||void 0===i?void 0:i.toString())}render(){return(0,r.bF)(1,"div","dx-info",this.getText(),0,null,null,this.props.rootElementRef)}}k.defaultProps=D;i(82438),i(50020);var B=i(86553);const H={className:"",label:"",tabIndex:0,selected:!1};class z extends l.JP{constructor(e){super(e),this.state={},this.refs=null,this.widgetRef=(0,r._3)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}getComponentProps(){return this.props}getKeyboardContext(){return this.context[S.id]?this.context[S.id]:S.defaultValue}componentWillUpdate(e,t,i){super.componentWillUpdate(e,t,i)}createEffects(){return[new l.Lt(this.keyboardEffect,[this.getKeyboardContext(),this.props.onClick]),new l.Lt(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var e,t;null===(e=this._effects[0])||void 0===e||e.update([this.getKeyboardContext(),this.props.onClick]),null===(t=this._effects[1])||void 0===t||t.update([this.props.onClick])}keyboardEffect(){return this.getKeyboardContext().registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,B.Ao)(this.widgetRef.current,this.props.onClick)}render(){return(0,r.bF)(1,"div",this.props.className,this.props.children,0,{tabindex:this.props.tabIndex,role:"button","aria-label":this.props.label,"aria-current":this.props.selected?"page":void 0},null,this.widgetRef)}}z.defaultProps=H;const M={allowedPageSizes:[],pageSize:c.pageSize,pageSizeChangedInternal:c.pageSizeChangedInternal};class N extends l.eh{constructor(e){super(e),this.state={},this.refs=null,this.__getterCache={pageSizesText:void 0},this.state={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}getPageSizesText(){if(void 0!==this.__getterCache.pageSizesText)return this.__getterCache.pageSizesText;const e=(()=>{const{pageSize:e,allowedPageSizes:t}=this.props;return t.map((t,i)=>{const{text:n,value:o}=t,s=o===e,r=(0,a.g)({[s?b:w]:!0,[I]:0===i});return{className:r,click:this.onPageSizeChange(o),label:(0,O.GP)(F(this.context,"dxPagination-pageSize"),o||F(this.context,"dxPagination-pageSizesAllText")),text:n}})})();return this.__getterCache.pageSizesText=e,e}onPageSizeChange(e){return()=>(this.props.pageSizeChangedInternal(e),this.props.pageSize)}componentWillUpdate(e){const t=this.props.pageSize!==e.pageSize||this.props.allowedPageSizes!==e.allowedPageSizes||this.props.pageSizeChangedInternal!==e.pageSizeChangedInternal;t&&(this.__getterCache.pageSizesText=void 0)}render(){return(0,r.nl)(this.getPageSizesText().map(e=>{let{text:t,className:i,label:n,click:o}=e;return(0,r.sO)(2,z,{className:i,label:n,onClick:o,children:t},t)}),0)}}N.defaultProps=M;var L=i(93251),W=i(4603),K=i(69274);const $={label:"",labelMode:(0,K.gx)((0,K.ss)())?"floating":"static"},G={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0,rtlEnabled:!1},q=Object.assign({},d.D,{_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:{},classes:"",name:"",addWidgetClass:!0}),U=Object.assign({},G,{aria:q.aria,classes:q.classes,readOnly:!1,name:"",value:null,validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:{}});var j=i(62192);const X={hoverStateEnabled:!0,activeStateEnabled:!0,focusStateEnabled:"desktop"===j.A.real().deviceType&&!j.A.isSimulator()},Y=Object.assign({},U,X,$,{placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,value:null,isReactComponentWrapper:!0});class Q extends l.eh{constructor(){super(...arguments),this.state={},this.refs=null}get componentProps(){return this.props}render(){return(0,r.sO)(2,W.F,{componentType:L.A,componentProps:this.componentProps,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]})}}Q.defaultProps=Y;function J(e,t){return e+10*Math.max(...t).toString().length}function Z(e){var t;const i=(0,s.zk)();return e?null===(t=i.getComputedStyle)||void 0===t?void 0:t.call(i,e):null}function ee(e){return e?Number(e.replace("px","")):0}function te(e,t){const i=Z(t)??{};return ee(i[e])}function ie(e){const t=te("paddingLeft",e)+te("paddingRight",e),i=te("width",e);return i-t}function ne(e){const t=te("marginLeft",e)+te("marginRight",e),i=te("width",e);return t+i}function oe(e){return te("minWidth",e)}const se={allowedPageSizes:[]},re=Object.assign({},se,{pageSize:c.pageSize,pageSizeChangedInternal:c.pageSizeChangedInternal});class le extends l.JP{constructor(e){super(e),this.state={minWidth:10},this.refs=null,this.updateWidth=this.updateWidth.bind(this)}componentWillUpdate(e,t,i){super.componentWillUpdate(e,t,i)}createEffects(){const e=[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChangedInternal,this.props.allowedPageSizes];return[new l.Lt(this.updateWidth,e)]}updateEffects(){var e;const t=[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChangedInternal,this.props.allowedPageSizes];null===(e=this._effects[0])||void 0===e||e.update(t)}updateWidth(){var e;const t=oe(null===(e=this.props.parentRef)||void 0===e?void 0:e.current);this.setState(e=>({minWidth:t>0?t:e.minWidth}))}getWidth(){var e;return J(this.state.minWidth,null===(e=this.props.allowedPageSizes)||void 0===e?void 0:e.map(e=>e.value))}getInputAttributes(){return{"aria-label":F(this.context,"dxPagination-ariaPageSize")}}render(){const{allowedPageSizes:e,pageSize:t,pageSizeChangedInternal:i}=this.props;return(0,r.sO)(2,Q,{displayExpr:"text",valueExpr:"value",dataSource:e,value:t,valueChange:i,width:this.getWidth(),inputAttr:this.getInputAttributes()})}}le.defaultProps=re;const ae={isLargeDisplayMode:!0,pageSize:c.pageSize,pageSizeChangedInternal:c.pageSizeChangedInternal,allowedPageSizes:c.allowedPageSizes};class de extends l.JP{constructor(e){super(e),this.state={},this.refs=null,this.rootElementRef=(0,r._3)(),this.htmlRef=(0,r._3)(),this.__getterCache={normalizedPageSizes:void 0},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new l.Lt(this.setRootElementRef,[])]}setRootElementRef(){const{rootElementRef:e}=this.props;e&&(e.current=this.htmlRef.current)}getAllText(){return F(this.context,"dxPagination-pageSizesAllText")}getNormalizedPageSizes(){if(void 0!==this.__getterCache.normalizedPageSizes)return this.__getterCache.normalizedPageSizes;const e=this.props.allowedPageSizes.map(e=>"all"===e||0===e?{text:this.getAllText(),value:0}:{text:String(e),value:e});return this.__getterCache.normalizedPageSizes=e,e}componentWillUpdate(e){super.componentWillUpdate(),this.props.allowedPageSizes!==e.allowedPageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){const e=this.getNormalizedPageSizes(),{pageSize:t,pageSizeChangedInternal:i,isLargeDisplayMode:n}=this.props;return(0,r.bF)(1,"div",y,[n&&(0,r.sO)(2,N,{allowedPageSizes:e,pageSize:t,pageSizeChangedInternal:i}),!n&&(0,r.sO)(2,le,{parentRef:this.htmlRef,allowedPageSizes:e,pageSize:t,pageSizeChangedInternal:i})],0,null,null,this.htmlRef)}}de.defaultProps=ae;var ue=i(10846);i(69375);const ce={index:0,selected:!1,className:v};class he extends l.eh{constructor(){super(...arguments),this.state={},this.refs=null}getLabel(){return(0,O.GP)(F(this.context,"dxPagination-page"),this.getValue())}getValue(){return this.props.index+1}getClassName(){return(0,a.g)({[`${this.props.className}`]:!!this.props.className,[x]:!!this.props.selected})}render(){return(0,r.sO)(2,z,{className:this.getClassName(),label:this.getLabel(),onClick:this.props.onClick,selected:this.props.selected,children:this.getValue()})}}he.defaultProps=ce;const pe={maxPagesCount:c.maxPagesCount,pageCount:c.pageCount,pageIndex:c.pageIndex,pageIndexChangedInternal:c.pageIndexChangedInternal};function ge(e,t,i){switch(!0){case 1===e:return"high";case e+t===i-1:return"low";default:return"both"}}function me(e,t,i){let n=[],o=[];switch(i){case"none":n=[...e];break;case"both":n=[0,"low",...e,"high",t-1],o=e.slice(1,-1);break;case"high":n=[0,...e,"high",t-1],o=e.slice(0,-1);break;case"low":n=[0,"low",...e,t-1],o=e.slice(1)}return{slidingWindowIndexes:e,indexesForReuse:o,pageIndexes:n}}function _e(e,t,i,n){const o=[];for(let s=0;s<t;s+=1)o.push(s+e);return me(o,i,n)}class Ce extends l.eh{constructor(e){super(e),this.state={},this.refs=null,this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}getConfig(){return this.context[ue.Q.id]?this.context[ue.Q.id]:ue.Q.defaultValue}getSlidingWindowState(){const e=this.slidingWindowStateHolder;return e||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(e,t){const{indexesForReuse:i}=this.getSlidingWindowState(),n=i.slice(-1)[0]<e-1,o=i.includes(t);return n&&o}generatePageIndexes(){const{pageCount:e,pageIndex:t}=this.props;let i=0;const{slidingWindowIndexes:n}=this.getSlidingWindowState();i=t===n[0]?t-1:t===n[n.length-1]?t+2-4:t<4?1:t>=e-4?e-4-1:t-1;const o=ge(i,4,e),s=_e(i,4,e,o),{pageIndexes:r}=s;return this.slidingWindowStateHolder=s,r}isSlidingWindowMode(){const{maxPagesCount:e,pageCount:t}=this.props;return t<=4||t<=e}onPageClick(e){this.props.pageIndexChangedInternal(e)}getPageIndexes(){const{pageCount:e}=this.props;if(this.isSlidingWindowMode())return _e(0,e,e,"none").pageIndexes;if(this.canReuseSlidingWindow(e,this.props.pageIndex)){const{slidingWindowIndexes:t}=this.getSlidingWindowState(),i=ge(t[0],4,e);return me(t,e,i).pageIndexes}return this.generatePageIndexes()}getPages(){var e;const{pageIndex:t}=this.props,i=e=>{const i="low"===e||"high"===e?null:{index:e,onClick:()=>this.onPageClick(e),selected:t===e};return{key:e.toString(),pageProps:i}},n=this.getPageIndexes(),o=null!==(e=this.getConfig())&&void 0!==e&&e.rtlEnabled?[...n].reverse():n;return o.map(e=>i(e))}render(){const e=this.getPages().map(e=>{let{key:t,pageProps:i}=e;return i?(0,r.sO)(2,he,{index:i.index,selected:i.selected,onClick:i.onClick},t):(0,r.bF)(1,"div","dx-separator",". . .",16,null,t)});return(0,r.nl)(e,0)}}Ce.defaultProps=pe;var fe=i(90550);const ve=Object.assign({},U,X,$,{value:0,isReactComponentWrapper:!0});class xe extends l.eh{constructor(){super(...arguments),this.state={},this.refs=null}get componentProps(){return this.props}render(){return(0,r.sO)(2,W.F,{componentType:fe.A,componentProps:this.componentProps,templateNames:[]})}}xe.defaultProps=ve;const we=`${P}  dx-info-text`,ye={pageIndex:c.pageIndex,pageCount:c.pageCount,pageIndexChangedInternal:c.pageIndexChangedInternal};class be extends l.JP{constructor(e){super(e),this.state={minWidth:10},this.refs=null,this.pageIndexRef=(0,r._3)(),this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}componentWillUpdate(e,t,i){super.componentWillUpdate(e,t,i)}createEffects(){return[new l.Lt(this.updateWidth,[this.state.minWidth])]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.state.minWidth])}updateWidth(){var e;const t=null===(e=this.pageIndexRef.current)||void 0===e?void 0:e.querySelector(".dx-page-index"),i=t?oe(t):0;this.setState(e=>({minWidth:i>0?i:e.minWidth}))}getValue(){return this.props.pageIndex+1}getWidth(){return J(this.state.minWidth,[this.props.pageCount])}getPagesCountText(){return(this.props.pagesCountText??"")||F(this.context,"dxPagination-pagesCountText")}getInputAttributes(){return{"aria-label":F(this.context,"dxPagination-ariaPageNumber")}}selectLastPageIndex(){this.props.pageIndexChangedInternal(this.props.pageCount-1)}valueChange(e){this.props.pageIndexChangedInternal(e-1)}render(){return(0,r.bF)(1,"div","dx-light-pages",[(0,r.sO)(2,xe,{className:"dx-page-index",min:1,max:Math.max(this.props.pageCount,this.getValue()),width:this.getWidth(),value:this.getValue(),valueChange:this.valueChange,inputAttr:this.getInputAttributes()}),(0,r.bF)(1,"span",we,this.getPagesCountText(),0),(0,r.sO)(2,he,{className:"dx-pages-count",selected:!1,index:this.props.pageCount-1,onClick:this.selectLastPageIndex})],4,null,null,this.pageIndexRef)}}be.defaultProps=ye;const Ie={nextEnabledClass:"dx-navigate-button dx-next-button",prevEnabledClass:"dx-navigate-button dx-prev-button",nextDisabledClass:"dx-button-disable dx-navigate-button dx-next-button",prevDisabledClass:"dx-button-disable dx-navigate-button dx-prev-button"},Se={next:"prev",prev:"next"};function Ae(e){return"next"===e?1:-1}const Ee={isLargeDisplayMode:!0,maxPagesCount:c.maxPagesCount,pageCount:c.pageCount,pageIndex:c.pageIndex,pageIndexChangedInternal:c.pageIndexChangedInternal,showNavigationButtons:c.showNavigationButtons,itemCount:c.itemCount};class Re extends l.eh{constructor(e){super(e),this.state={},this.refs=null,this.__getterCache={prevButtonProps:void 0,nextButtonProps:void 0},this.pageIndexChangedInternal=this.pageIndexChangedInternal.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}getConfig(){return this.context[ue.Q.id]?this.context[ue.Q.id]:ue.Q.defaultValue}pageIndexChangedInternal(e){this.canNavigateToPage(e)&&this.props.pageIndexChangedInternal(e)}getButtonProps(e){var t;const i=null!==(t=this.getConfig())&&void 0!==t&&t.rtlEnabled?Se[e]:e,n=this.canNavigateTo(i),o=Ie[`${e}${n?"Enabled":"Disabled"}Class`];return{className:o,tabIndex:n?0:-1,navigate:()=>this.navigateToPage(i)}}canNavigateToPage(e){return this.props.hasKnownLastPage?e>=0&&e<=this.props.pageCount-1:e>=0}getNextPageIndex(e){return this.props.pageIndex+Ae(e)}canNavigateTo(e){return this.canNavigateToPage(this.getNextPageIndex(e))}navigateToPage(e){this.pageIndexChangedInternal(this.getNextPageIndex(e))}getRenderPrevButton(){const{isLargeDisplayMode:e,showNavigationButtons:t}=this.props;return(!e||t)??!1}getRenderNextButton(){return this.getRenderPrevButton()||!this.props.hasKnownLastPage}getPrevButtonProps(){if(void 0!==this.__getterCache.prevButtonProps)return this.__getterCache.prevButtonProps;const e=(()=>this.getButtonProps("prev"))();return this.__getterCache.prevButtonProps=e,e}getNextButtonProps(){if(void 0!==this.__getterCache.nextButtonProps)return this.__getterCache.nextButtonProps;const e=(()=>this.getButtonProps("next"))();return this.__getterCache.nextButtonProps=e,e}componentWillUpdate(e,t,i){const n=this.context[ue.Q.id]!==i[ue.Q.id]||this.props.hasKnownLastPage!==e.hasKnownLastPage||this.props.pageCount!==e.pageCount||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChangedInternal!==e.pageIndexChangedInternal;n&&(this.__getterCache.prevButtonProps=void 0,this.__getterCache.nextButtonProps=void 0)}getPrevButtonLabel(){return F(this.context,"dxPagination-prevPage")}getNextButtonLabel(){return F(this.context,"dxPagination-nextPage")}render(){const{className:e,tabIndex:t,navigate:i}=this.getPrevButtonProps(),{isLargeDisplayMode:n,maxPagesCount:o,pageCount:s,pageIndex:l,pagesCountText:a}=this.props;return(0,r.nl)([this.getRenderPrevButton()&&(0,r.sO)(2,z,{label:this.getPrevButtonLabel(),className:e,tabIndex:t,onClick:i}),n&&(0,r.sO)(2,Ce,{maxPagesCount:o,pageCount:s,pageIndex:l,pageIndexChangedInternal:this.pageIndexChangedInternal}),!n&&(0,r.sO)(2,be,{pageCount:s,pageIndex:l,pageIndexChangedInternal:this.pageIndexChangedInternal,pagesCountText:a}),this.getRenderNextButton()&&(0,r.sO)(2,z,{label:this.getNextButtonLabel(),className:this.getNextButtonProps().className,tabIndex:this.getNextButtonProps().tabIndex,onClick:this.getNextButtonProps().navigate})],0)}}Re.defaultProps=Ee;const Oe=Object.assign({},c,{infoTextVisible:!0,isLargeDisplayMode:!0});class Te extends l.JP{constructor(e){super(e),this.state={},this.refs=null,this.widgetElementRef=(0,r._3)(),this.widgetRootElementRef=(0,r._3)(),this.pagesRef=(0,r._3)(),this.infoTextRef=(0,r._3)(),this.__getterCache={keyboardAction:void 0},this.state={},this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new l.Lt(this.setRootElementRef,[])]}getChildContext(){return Object.assign({},this.context,{[S.id]:this.getKeyboardAction()||S.defaultValue})}setRootElementRef(){const{rootElementRef:e}=this.props;e&&this.widgetRootElementRef&&(e.current=this.widgetRootElementRef.current)}getWidgetRootElement(){var e;return null===(e=this.widgetRootElementRef)||void 0===e?void 0:e.current}createFakeInstance(){return{option:()=>!1,element:()=>this.getWidgetRootElement(),component:this.props._getParentComponentRootNode?{element:()=>{var e,t;return null===(e=(t=this.props)._getParentComponentRootNode)||void 0===e?void 0:e.call(t)}}:{element:()=>this.getWidgetRootElement()},_createActionByOption:()=>e=>{var t,i;null===(t=(i=this.props).onKeyDown)||void 0===t||t.call(i,e)}}}getKeyboardAction(){return{registerKeyboardAction:(e,t)=>{const i=this.createFakeInstance();return(0,p.js)("pager",i,e,void 0,t)}}}getInfoVisible(){const{infoTextVisible:e,showInfo:t}=this.props;return!!t&&e}getPageIndexSelectorVisible(){return 0!==this.props.pageSize}getNormalizedDisplayMode(){const{displayMode:e,lightModeEnabled:t}=this.props;return"adaptive"===e&&void 0!==t?t?"compact":"full":e??"adaptive"}getPagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}getPagesContainerVisibility(){const{pagesNavigatorVisible:e,pageCount:t,hasKnownLastPage:i,showInfo:n,showNavigationButtons:o,showPageSizeSelector:s}=this.props,r="auto"===e&&1===t&&i,l=Boolean(n)||Boolean(o)||!0===s,a=r&&!l,d=a?"hidden":void 0;return d}getIsLargeDisplayMode(){const e=this.getNormalizedDisplayMode();let t=!1;return t="adaptive"===e?this.props.isLargeDisplayMode:"full"===e,t}getClasses(){const e={[`${this.props.className}`]:!!this.props.className,[g]:!!this.props.isGridCompatibilityMode,[m]:!this.props.isGridCompatibilityMode,[_]:!this.getIsLargeDisplayMode()};return(0,a.g)(e)}getAria(){return{role:"navigation",label:this.props.label??""}}componentWillUpdate(e){super.componentWillUpdate(),this.props.onKeyDown!==e.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){const{isGridCompatibilityMode:e,rtlEnabled:t,visible:i,showPageSizeSelector:n,allowedPageSizesRef:o,pageSize:s,pageSizeChangedInternal:l,allowedPageSizes:a,infoTextRef:d,infoText:u,pageCount:c,pageIndex:p,itemCount:g,pagesRef:m,hasKnownLastPage:_,maxPagesCount:v,pageIndexChangedInternal:x,pagesCountText:w,showNavigationButtons:y,style:b,width:I,height:S,elementAttr:A,hint:E,disabled:O,tabIndex:T,accessKey:V,activeStateEnabled:F,focusStateEnabled:P,hoverStateEnabled:D}=this.props,B=(0,r._B)((0,r.sO)(2,h.x0,Object.assign({rootElementRef:this.widgetRootElementRef,rtlEnabled:t,classes:this.getClasses(),visible:i,aria:this.getAria(),style:b,width:I,height:S,hint:E,disabled:O,tabIndex:T,accessKey:V,activeStateEnabled:F,focusStateEnabled:P,hoverStateEnabled:D},A,{children:[n&&(0,r.sO)(2,de,{rootElementRef:o,isLargeDisplayMode:this.getIsLargeDisplayMode(),itemCount:g,pageSize:s,pageSizeChangedInternal:l,allowedPageSizes:a}),this.getPagesContainerVisible()&&(0,r.bF)(1,"div",C,[this.getInfoVisible()&&(0,r.sO)(2,k,{rootElementRef:d,infoText:u,pageCount:c,pageIndex:p,itemCount:g}),this.getPageIndexSelectorVisible()&&(0,r.bF)(1,"div",f,(0,r.sO)(2,Re,{hasKnownLastPage:_,isLargeDisplayMode:this.getIsLargeDisplayMode(),maxPagesCount:v,pageCount:c,pageIndex:p,pageIndexChangedInternal:x,pagesCountText:w,showNavigationButtons:y,itemCount:g}),2,null,null,m)],0,{style:{visibility:this.getPagesContainerVisibility()}})]})));return(0,r.sO)(2,R,{isGridCompatibilityMode:e,children:B})}}Te.defaultProps=Oe;var Ve=i(15407);function Fe(e){let{parent:t,allowedPageSizes:i,pages:n}=e;return t-(i+n)>0}function Pe(e){let{parent:t,allowedPageSizes:i,pages:n,info:o}=e;const s=i+n+o;return t-s>0}function De(e){let{parent:t,allowedPageSizes:i,pages:n,info:o}=e;const s=ie(t),r=ne(i),l=ne(o),a=ne(n);return{parent:s,allowedPageSizes:r,info:l+te("marginLeft",o)+te("marginRight",o),pages:a}}const ke={paginationProps:Object.assign({},c)};class Be extends l.JP{constructor(e){super(e),this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.refs=null,this.parentRef=(0,r._3)(),this.infoTextRef=(0,r._3)(),this.pagesRef=(0,r._3)(),this.allowedPageSizesRef=(0,r._3)(),this.elementsWidth={},this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}componentWillUpdate(e,t,i){super.componentWillUpdate(e,t,i)}createEffects(){return[new l.Lt(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new l.Lt(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.paginationProps,this.props.contentTemplate])]}updateEffects(){var e,t;null===(e=this._effects[0])||void 0===e||e.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(t=this._effects[1])||void 0===t||t.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.paginationProps,this.props.contentTemplate])}subscribeToResize(){const e=()=>{this.getParentWidth()>0&&this.updateAdaptivityProps()};return Ve.A.add(e),()=>{Ve.A.remove(e)}}effectUpdateChildProps(){this.getParentWidth()>0&&this.updateAdaptivityProps()}getContentAttributes(){const{className:e,displayMode:t,isGridCompatibilityMode:i,_getParentComponentRootNode:n,hasKnownLastPage:o,infoText:s,label:r,lightModeEnabled:l,maxPagesCount:a,onKeyDown:d,pageCount:u,pageIndex:c,pageIndexChangedInternal:h,pageSize:p,pageSizeChangedInternal:g,allowedPageSizes:m,pagesCountText:_,pagesNavigatorVisible:C,rtlEnabled:f,showInfo:v,showNavigationButtons:x,showPageSizeSelector:w,itemCount:y,visible:b,style:I,width:S,height:A,elementAttr:E,hint:R,disabled:O,tabIndex:T,accessKey:V,activeStateEnabled:F,focusStateEnabled:P,hoverStateEnabled:D}=this.props.paginationProps;return{pageSize:p,pageIndex:c,pageIndexChangedInternal:h,pageSizeChangedInternal:g,isGridCompatibilityMode:i,_getParentComponentRootNode:n,className:e,showInfo:v,infoText:s,lightModeEnabled:l,displayMode:t,maxPagesCount:a,pageCount:u,pagesCountText:_,visible:b,hasKnownLastPage:o,pagesNavigatorVisible:C,showPageSizeSelector:w,allowedPageSizes:m,rtlEnabled:f,showNavigationButtons:x,itemCount:y,onKeyDown:d,label:r,style:I,width:S,height:A,elementAttr:E,hint:R,disabled:O,tabIndex:T,accessKey:V,activeStateEnabled:F,focusStateEnabled:P,hoverStateEnabled:D}}getParentWidth(){var e;return null!==(e=this.parentRef)&&void 0!==e&&e.current?ne(this.parentRef.current):0}updateAdaptivityProps(){var e,t,i,n;const s=De({parent:null===(e=this.parentRef)||void 0===e?void 0:e.current,allowedPageSizes:null===(t=this.allowedPageSizesRef)||void 0===t?void 0:t.current,info:null===(i=this.infoTextRef)||void 0===i?void 0:i.current,pages:null===(n=this.pagesRef)||void 0===n?void 0:n.current});if(this.actualInfoTextVisible!==this.state.infoTextVisible||this.actualIsLargeDisplayMode!==this.state.isLargeDisplayMode)return;const r=!(0,o.O9)(this.elementsWidth);r&&(this.elementsWidth={}),(r||this.state.isLargeDisplayMode)&&(this.elementsWidth.allowedPageSizes=s.allowedPageSizes,this.elementsWidth.pages=s.pages),(r||this.state.infoTextVisible)&&(this.elementsWidth.info=s.info),this.actualIsLargeDisplayMode=Fe({parent:s.parent,allowedPageSizes:this.elementsWidth.allowedPageSizes,pages:this.elementsWidth.pages}),this.actualInfoTextVisible=Pe(Object.assign({},s,{info:this.elementsWidth.info})),this.setState(()=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(()=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}render(){const{infoTextVisible:e,isLargeDisplayMode:t}=this.state,{props:{contentTemplate:i}}=this;return(0,r._B)((0,r.sO)(2,i,Object.assign({rootElementRef:this.parentRef,allowedPageSizesRef:this.allowedPageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,infoTextVisible:e,isLargeDisplayMode:t},this.getContentAttributes())))}}Be.defaultProps=ke;class He extends l.oe{constructor(e){super(e),this.__getterCache={},this.pageIndexChangedInternal=this.pageIndexChangedInternal.bind(this),this.pageSizeChangedInternal=this.pageSizeChangedInternal.bind(this)}createEffects(){return[(0,l.h2)()]}pageIndexChangedInternal(e){const t=e+1;this.setState(()=>({pageIndex:t})),this.props.pageIndexChangedInternal(t)}getPageIndex(){return this.props.pageIndex-1}pageSizeChangedInternal(e){this.setState(()=>({pageSize:e})),this.props.pageSizeChangedInternal(e)}getClassName(){return(0,a.g)({"dx-datagrid-pager":V(this.context),[`${this.props.className}`]:!!this.props.className})}getPaginationProps(){return Object.assign({},this.props,{className:this.getClassName(),pageIndex:this.getPageIndex(),pageIndexChangedInternal:e=>this.pageIndexChangedInternal(e),pageSizeChangedInternal:e=>this.pageSizeChangedInternal(e)})}render(){return(0,r.sO)(2,Be,{contentTemplate:Te,paginationProps:this.getPaginationProps()})}}He.defaultProps=c;var ze=i(27401),Me=i(59652);function Ne(e){return e<0?1:e}function Le(e){return e<0?0:e}function We(e,t){return e>0&&t>0?Math.max(1,Math.ceil(t/e)):1}function Ke(e,t,i){if(e<1)return 1;const n=We(t,i);return Math.min(e,n)}function $e(e,t,i){const n=Ne(e),o=Le(i),s=We(n,i),r=Ke(t,n,o);return{pageSize:n,pageIndex:r,itemCount:o,pageCount:s}}const Ge=["pageSize","pageIndex","itemCount"];class qe extends Me.X{_optionChanged(e){switch(e.name){case"pageIndex":{const t=this.option("pageIndexChanged");t&&t(e.value);break}case"pageSize":{const t=this.option("pageSizeChanged");t&&t(e.value);break}}super._optionChanged(e)}getPageCount(){return this.option("pageCount")}_validateOptions(e){if(e._skipValidation||this.option("_skipValidation"))return e;const t=super._validateOptions(e);let{pageSize:i,pageIndex:n,itemCount:o}=t,s=(0,ze.A)(t,Ge);void 0===i&&(i=this.option("pageSize")),void 0===n&&(n=this.option("pageIndex")),void 0===o&&(o=this.option("itemCount"));const r=$e(i,n,o);return Object.assign({},s,r)}}class Ue extends qe{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChangedInternal","pageSizeChanged"],["pageIndex","defaultPageIndex","pageIndexChangedInternal","pageIndexChanged"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChanged","pageSizeChangedInternal","defaultPageIndex","pageIndexChanged","pageIndexChangedInternal","isGridCompatibilityMode","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizeSelector","allowedPageSizes","rtlEnabled","showNavigationButtons","itemCount","label","onKeyDown","pageSize","pageIndex","width","height","elementAttr","hint","disabled","tabIndex","accessKey","activeStateEnabled","focusStateEnabled","hoverStateEnabled","_skipValidation","_getParentComponentRootNode"]}}get _viewComponent(){return He}}var je=i(91125);const Xe=function(e){return 1+(parseInt(e.pageIndex())||0)};class Ye extends je.Ay.View{init(){const e=this.getController("data");e.changed.add(t=>{if(t&&t.repaintChangesOnly){const t=this._pager;t?t.option({pageIndex:Xe(e),pageSize:e.pageSize(),pageCount:e.pageCount(),itemCount:e.totalCount(),hasKnownLastPage:e.hasKnownLastPage()}):this.render()}else(!t||"update"!==t.changeType&&"updateSelection"!==t.changeType&&"updateFocusedRow"!==t.changeType)&&(this._pager=null,this.render())})}dispose(){this._pager=null}optionChanged(e){const{name:t}=e,i="pager"===t,n="paging"===t,o="dataSource"===t,r="scrolling"===t,l=this.getController("data");if(i||n||r||o){if(e.handled=!0,l.skipProcessingPagingChange(e.fullName))return;(i||n)&&(this._pageSizes=null),o||(this._pager=null,this._invalidate(),(0,s.Vd)()&&i&&this.component&&this.component.resize())}}_renderCore(){const e=this,t=e.element().addClass(e.addWidgetPrefix("pager")),i=e.option("pager")??{},n=e.getController("data"),r=e.getController("keyboardNavigation"),l={maxPagesCount:10,pageIndex:Xe(n),pageCount:n.pageCount(),pageSize:n.pageSize(),showPageSizeSelector:i.showPageSizeSelector,showInfo:i.showInfo,displayMode:i.displayMode,pagesNavigatorVisible:i.visible,showNavigationButtons:i.showNavigationButtons,label:i.label,allowedPageSizes:e.getPageSizes(),itemCount:n.totalCount(),hasKnownLastPage:n.hasKnownLastPage(),rtlEnabled:e.option("rtlEnabled"),isGridCompatibilityMode:!0,_getParentComponentRootNode:()=>this.component.element(),_skipValidation:!0,pageIndexChanged(e){n.pageIndex()!==e-1&&n.pageIndex(e-1)},pageSizeChanged(e){n.pageSize(e)},onKeyDown:e=>r&&r.executeAction("onKeyDown",e)};(0,o.O9)(i.infoText)&&(l.infoText=i.infoText),this._pager?this._pager.repaint():(0,s.Vd)()?this._pager=e._createComponent(t,Ue,l):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')}getPager(){return this._pager}getPageSizes(){const e=this,t=e.getController("data"),i=e.option("pager"),n=i&&i.allowedPageSizes,s=t.pageSize();return(0,o.O9)(e._pageSizes)&&e._pageSizes.includes(s)||(e._pageSizes=[],i&&(Array.isArray(n)?e._pageSizes=n:n&&s>1&&(e._pageSizes=[Math.floor(s/2),s,2*s]))),e._pageSizes}isVisible(){const e=this.getController("data"),t=this.option("pager");let i=t&&t.visible;const n=this.option("scrolling");return"auto"===i&&(i=(!n||"virtual"!==n.mode&&"infinite"!==n.mode)&&(e.pageCount()>1||e.isLoaded()&&!e.hasKnownLastPage())),!!i}getHeight(){return this.getElementHeight()}}const Qe={defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:n.A.format("dxPager-ariaLabel")}}),views:{pagerView:Ye}}},91125:function(e,t,i){i.d(t,{xI:function(){return x},Ss:function(){return y},WO:function(){return w},Ay:function(){return E}});i(69375),i(82438),i(12266),i(57327),i(74786);var n=i(63027),o=i(85563),s=i(24714),r=i(39889),l=i(89214),a=i(50172),d=i(27996),u=i(93821),c=(i(2989),i(99819),i(27401));const h=["rowsView"],p={borderedTop:"dx-bordered-top-view",borderedBottom:"dx-bordered-bottom-view"},g=e=>{let{columnHeadersView:t,rowsView:i}=e;return null!==t&&void 0!==t&&t.isVisible()?t.element():i.element()},m=e=>{let{filterPanelView:t,footerView:i,rowsView:n}=e;return null!==t&&void 0!==t&&t.isVisible()?t.element():null!==i&&void 0!==i&&i.isVisible()?i.element():n.element()},_=(e,t)=>{const i=Object.values(e).find(e=>{var i;return null===e||void 0===e||null===(i=e.element())||void 0===i?void 0:i.hasClass(t)});return(null===i||void 0===i?void 0:i.element())??null},C=(e,t)=>{var i;if(!Object.keys(t).includes(e))return!1;const{rowsView:n}=t,o=(0,c.A)(t,h);return!!(0,a.O9)(null===n||void 0===n||null===(i=n.element)||void 0===i?void 0:i.call(n))&&Object.values(o).filter(e=>{var t;return null===e||void 0===e||null===(t=e.isVisible)||void 0===t?void 0:t.call(e)}).every(e=>(0,a.O9)(null===e||void 0===e?void 0:e.element()))},f=(e,t)=>{if(!C(e,t))return;const i=_(t,p.borderedTop),n=_(t,p.borderedBottom),o=g(t),s=m(t);i&&!i.is(o)&&i.removeClass(p.borderedTop),n&&!n.is(s)&&n.removeClass(p.borderedBottom),o.hasClass(p.borderedTop)||o.addClass(p.borderedTop),s.hasClass(p.borderedBottom)||s.addClass(p.borderedBottom)};class v{constructor(e){const t=this;t._updateLockCount=0,t.component=e,t._actions={},t._actionConfigs={},(0,l.__)(this.callbackNames()||[],function(e,i){const n=t.callbackFlags(i)||{};n.unique=!0,n.syncStrategy=!0,t[this]=(0,s.A)(n)})}_endUpdateCore(){}init(){}callbackNames(){}callbackFlags(e){}publicMethods(){return[]}beginUpdate(){this._updateLockCount++}endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())}option(e){const{component:t}=this,i=t._optionCache;return 1===arguments.length&&i?(e in i||(i[e]=t.option(e)),i[e]):t.option.apply(t,arguments)}_silentOption(e,t){const{component:i}=this,n=i._optionCache;return n&&(n[e]=t),i._setOptionWithoutOptionChange(e,t)}localize(e){const t=this.component._optionCache;return t?(e in t||(t[e]=n.A.format(e)),t[e]):n.A.format(e)}on(e,t){return this.component.on.apply(this.component,arguments)}off(){return this.component.off.apply(this.component,arguments)}optionChanged(e){e.name in this._actions&&(this.createAction(e.name,this._actionConfigs[e.name]),e.handled=!0)}getAction(e){return this._actions[e]}setAria(e,t,i){const n=i.get(0),o="role"!==e&&"id"!==e?"aria-":"";n.setAttribute?n.setAttribute(o+e,t):i.attr(o+e,t)}_createComponent(e,t,i){return this.component._createComponent(e,t,i)}getController(e){return this.component._controllers[e]}createAction(e,t){if((0,a.Tn)(e)){const i=this.component._createAction(e.bind(this),t);return function(e){i({event:e})}}this._actions[e]=this.component._createActionByOption(e,t),this._actionConfigs[e]=t}executeAction(e,t){const i=this._actions[e];return i&&i(t)}dispose(){const e=this;(0,l.__)(e.callbackNames()||[],function(){e[this].empty()})}addWidgetPrefix(e){const t=this.component.NAME;return`dx-${t.slice(2).toLowerCase()}${e?`-${e}`:""}`}getWidgetContainerClass(){const e="dxDataGrid"===this.component.NAME?null:"container";return this.addWidgetPrefix(e)}elementIsInsideGrid(e){const t=e.closest(`.${this.getWidgetContainerClass()}`).parent();return t.is(this.component.$element())}}class x extends v{}class w extends x{getView(e){return this.component._views[e]}getViews(){return this.component._views}}class y extends v{constructor(e){super(e),this.renderCompleted=(0,s.A)(),this.resizeCompleted=(0,s.A)()}_isReady(){return this.component.isReady()}_endUpdateCore(){super._endUpdateCore(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))}_invalidate(e,t){this._requireRender=!0,this.component._requireResize=(0,d.Vd)()&&(this.component._requireResize||e),this._requireReady=this._requireReady||t}_renderCore(e){}_resizeCore(){}_parentElement(){return this._$parent}element(){return this._$element}getElementHeight(){const e=this.element();if(!e)return 0;const t=parseFloat(e.css("marginTop"))||0,i=parseFloat(e.css("marginBottom"))||0,{offsetHeight:n}=e.get(0);return n+t+i}isVisible(){return!0}getTemplate(e){return this.component._getTemplate(e)}getView(e){return this.component._views[e]}_getBorderedViews(){return{columnHeadersView:this.component._views.columnHeadersView,rowsView:this.component._views.rowsView,filterPanelView:this.component._views.filterPanelView,footerView:this.component._views.footerView}}render(e,t){let i=this._$element;const n=this.isVisible();if((i||e)&&(this._requireReady=!1,i||(i=this._$element=(0,o.A)("<div>").appendTo(e),this._$parent=e),i.toggleClass("dx-hidden",!n),this.component._views&&f(this.name,this._getBorderedViews()),n)){this.component._optionCache={};const e=this._renderCore(t);this.component._optionCache=void 0,e?e.done(()=>{this.renderCompleted.fire(t)}):this.renderCompleted.fire(t)}}resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1}focus(e){this.element().get(0).focus({preventScroll:e})}}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={};return Object.entries(t).forEach(t=>{let[n,o]=t;const s=e[n];if(s)if((0,a.Tn)(o))i[n]=o(s);else{const e=s;i[n]=e.inherit(o)}}),i}function I(e,t,i){const n=i.publicMethods();n&&(0,l.__)(n,(n,o)=>{if(!i[o])throw u.A.Error("E1006",t,o);if(e[o])throw u.A.Error("E1005",o);e[o]=function(){return i[o](...arguments)}})}function S(e,t){const{modules:i}=t,{modulesOrder:n}=t;function o(t){const i={};return(0,l.__)(t,(t,n)=>{const o=new n(e);o.name=t,I(e,t,o),i[t]=o}),i}n&&i.sort((e,t)=>{let i=n.indexOf(e.name),o=n.indexOf(t.name);return i<0&&(i=1e6),o<0&&(o=1e6),i-o});const s={},r={};i.forEach(e=>{let{name:t,controllers:i={},views:n={}}=e;Object.entries(i).forEach(e=>{let[i,n]=e;if(s[i])throw u.A.Error("E1001",t,i);if(!((null===n||void 0===n?void 0:n.prototype)instanceof x))throw u.A.Error("E1002",t,i);s[i]=n}),Object.entries(n).forEach(e=>{let[i,n]=e;if(r[i])throw u.A.Error("E1003",t,i);if(!((null===n||void 0===n?void 0:n.prototype)instanceof y))throw u.A.Error("E1004",t,i);r[i]=n})});const a=i.filter(e=>{let{extenders:t}=e;return!!t}),d=a.reduce((e,t)=>{let{extenders:i}=t;return Object.assign({},e,b(e,null===i||void 0===i?void 0:i.controllers))},s),c=a.reduce((e,t)=>{let{extenders:i}=t;return Object.assign({},e,b(e,null===i||void 0===i?void 0:i.views))},r);e._controllers=o(d),e._views=o(c)}const A=function(e,t,i){i=i||[],e._controllers&&(0,l.__)(e._controllers,function(){this[t]&&this[t].apply(this,i)}),e._views&&(0,l.__)(e._views,function(){this[t]&&this[t].apply(this,i)})};var E={modules:[],View:y,ViewController:w,Controller:x,registerModule(e,t){const{modules:i}=this;for(let n=0;n<i.length;n++)if(i[n].name===e)return;t.name=e,i.push(t)},registerModulesOrder(e){this.modulesOrder=e},unregisterModule(e){this.modules=(0,r.VM)(this.modules,t=>t.name!==e)},processModules:S,callModuleItemsMethod:A}},91762:function(e,t,i){i.d(t,{s:function(){return h}});var n=i(63027),o=i(85563),s=i(44956),r=i(31680),l=i(2308),a=i(14762),d=i(96283),u=i(91125);class c extends u.Ay.View{init(){super.init(),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync")}optionChanged(e){switch(e.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_renderCore(){this._updatePopupOptions()}_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()}_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)}_initPopup(){const e=this;e._disposePopup(),e._filterBuilderPopup=e._createComponent(e.element(),l.A,(0,s.X)({title:n.A.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:t=>e._getPopupContentTemplate(t),onOptionChanged(t){"visible"===t.name&&e.option("filterBuilderPopup.visible",t.value)},toolbarItems:e._getPopupToolbarItems()},e.option("filterBuilderPopup"),{onHidden(){(0,d.Dy)(e),e._disposePopup()}}))}_getPopupContentTemplate(e){const t=(0,o.A)(e),i=(0,o.A)("<div>").appendTo((0,o.A)(e));this._filterBuilder=this._createComponent(i,r.A,(0,s.X)({value:this.option("filterValue"),fields:this._columnsController.getFilteringColumns()},this.option("filterBuilder"),{customOperations:this._filterSyncController.getCustomFilterOperations()})),this._createComponent(t,a.A,{direction:"both"})}_getPopupToolbarItems(){const e=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:n.A.format("OK"),onClick(){const t=e._filterBuilder.option("value");e.option("filterValue",t),e._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:n.A.format("Cancel"),onClick(){e._filterBuilderPopup.hide()}}}]}}const h={defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:n.A.format("dxFilterBuilder-and"),or:n.A.format("dxFilterBuilder-or"),notAnd:n.A.format("dxFilterBuilder-notAnd"),notOr:n.A.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:n.A.format("dxFilterBuilder-filterOperationBetween"),equal:n.A.format("dxFilterBuilder-filterOperationEquals"),notEqual:n.A.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:n.A.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:n.A.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:n.A.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:n.A.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:n.A.format("dxFilterBuilder-filterOperationStartsWith"),contains:n.A.format("dxFilterBuilder-filterOperationContains"),notContains:n.A.format("dxFilterBuilder-filterOperationNotContains"),endsWith:n.A.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:n.A.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:n.A.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:c}}},91829:function(e,t,i){i.d(t,{_:function(){return l}});var n=i(63027),o=i(68055);const s="arrowleft",r="arrowright",l=e=>class extends e{constructor(){super(...arguments),this.isNeedToFocusColumn=!1}getMoveColumnContextMenuItems(e){var t,i;const{column:l,rowIndex:a}=e,d=null===(t=this.isColumnReorderingEnabled)||void 0===t?void 0:t.call(this,null===e||void 0===e?void 0:e.column),u=null===(i=this.getKeyboardNavigationController)||void 0===i?void 0:i.call(this);if(!d||!u)return[];const c=this.option("rtlEnabled"),h=e=>{var t;this.isNeedToFocusColumn=!0,u.moveColumn(l,null===(t=e.itemData)||void 0===t?void 0:t.value,a)};return[{text:c?n.A.format("dxDataGrid-moveColumnToTheRight"):n.A.format("dxDataGrid-moveColumnToTheLeft"),value:o.OP.Previous,beginGroup:!0,disabled:!u.canReorderColumn(l,o.OP.Previous,a),icon:c?r:s,onItemClick:h},{text:c?n.A.format("dxDataGrid-moveColumnToTheLeft"):n.A.format("dxDataGrid-moveColumnToTheRight"),value:o.OP.Next,disabled:!u.canReorderColumn(l,o.OP.Next,a),icon:c?s:r,onItemClick:h}]}}},94075:function(e,t,i){i.d(t,{A:function(){return a}});var n=i(39889),o=i(44956),s=i(89214),r=i(50172),l=i(7698);class a extends l.A{_activeStateUnit(){return".dx-row"}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,s.__)(this.getGridCoreHelper().modules,function(){(0,r.Tn)(this.defaultOptions)&&(0,o.X)(!0,e,this.defaultOptions())}),e}_init(){super._init()}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,o.X)(this._deprecatedOptions,{"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})}_clean(){}_optionChanged(e){this.getGridCoreHelper().callModuleItemsMethod(this,"optionChanged",[e]),e.handled||super._optionChanged(e)}_dimensionChanged(){this.updateDimensions(!0)}_visibilityChanged(e){e&&this.updateDimensions()}_renderContentImpl(){this.getView("gridView").update()}_renderContent(){const e=this;(0,n.zE)(()=>{e._renderContentImpl()})}_dispose(){super._dispose(),this.getGridCoreHelper().callModuleItemsMethod(this,"dispose")}isReady(){return this.getController("data").isReady()}getController(e){return this._controllers[e]}getView(e){return this._views[e]}getGridCoreHelper(){}beginUpdate(){super.beginUpdate(),this.getGridCoreHelper().callModuleItemsMethod(this,"beginUpdate")}endUpdate(){this.getGridCoreHelper().callModuleItemsMethod(this,"endUpdate"),super.endUpdate()}}},94877:function(e,t,i){i.d(t,{u:function(){return A}});var n=i(39889),o=i(66703),s=i(44956),r=i(50172),l=(i(64727),i(82738),i(24906)),a=i(89214),d=i(13278),u=i(27996),c=i(93821),h=i(91125);const p=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,g=function(e){e&&(0,a.__)(e,(t,i)=>{if((0,r.Qd)(i)||Array.isArray(i))g(i);else if("string"===typeof i){const n=p.exec(i);n&&(e[t]=new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])))}})},m=function(e){const t="sessionStorage"===e.type?(0,d.s)():(0,u.zk)().localStorage;if(!t)throw new Error("E1007");return t},_=function(e){return(0,r.O9)(e.storageKey)?e.storageKey:"storage"};class C extends h.Ay.ViewController{getDataController(){return this.getController("data")}getExportController(){return this.getController("export")}getColumnsController(){return this.getController("columns")}init(){return this._state={},this._isLoaded=!1,this._isLoading=!1,this._windowUnloadHandler=()=>{void 0!==this._savingTimeoutID&&this._saveState(this.state())},l.A.on((0,u.zk)(),"visibilitychange",this._windowUnloadHandler),this}optionChanged(e){const t=this;"stateStoring"===e.name?(t.isEnabled()&&!t.isLoading()&&t.load(),e.handled=!0):super.optionChanged(e)}dispose(){clearTimeout(this._savingTimeoutID),l.A.off((0,u.zk)(),"visibilitychange",this._windowUnloadHandler)}_loadState(){const e=this.option("stateStoring");if("custom"===e.type)return e.customLoad&&e.customLoad();try{return JSON.parse(m(e).getItem(_(e)))}catch(t){c.A.log("W1022","State storing",t.message)}}_saveState(e){const t=this.option("stateStoring");if("custom"!==t.type)try{m(t).setItem(_(t),JSON.stringify(e))}catch(i){c.A.log(i.message)}else t.customSave&&t.customSave(e)}publicMethods(){return["state"]}isEnabled(){return this.option("stateStoring.enabled")}isLoaded(){return this._isLoaded}isLoading(){return this._isLoading}load(){this._isLoading=!0;const e=(0,o.Sx)(this._loadState());return e.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(e=>{null===e||(0,r.RI)(e)||this.state(e)}),e}state(e){const t=this;if(!arguments.length)return(0,s.X)(!0,{},t._state);t._state=(0,s.X)({},e),g(t._state)}save(){const e=this;clearTimeout(e._savingTimeoutID),e._savingTimeoutID=setTimeout(()=>{e._saveState(e.state()),e._savingTimeoutID=void 0},e.option("stateStoring.savingTimeout"))}}const f=e=>{const t=e.getView("pagerView"),i=e.getController("data"),n={allowedPageSizes:t?t.getPageSizes():void 0,filterPanel:{filterEnabled:e.option("filterPanel.filterEnabled")},filterValue:e.option("filterValue"),focusedRowKey:e.option("focusedRowEnabled")?e.option("focusedRowKey"):void 0};return(0,s.X)(n,i.getUserState())},v=e=>{const t=e.getController("columns"),i=e.getController("selection"),n=e.getController("export"),o=e.getController("data");t&&t.columnsChanged.add(()=>{e.updateState({columns:t.getUserState()})}),i&&i.selectionChanged.add(t=>{e.updateState({selectedRowKeys:t.selectedRowKeys,selectionFilter:t.selectionFilter})}),o&&(e._initialPageSize=e.option("paging.pageSize"),e._initialFilterValue=e.option("filterValue"),o.changed.add(()=>{const t=f(e);e.updateState(t)})),n&&n.selectionOnlyChanged.add(()=>{e.updateState({exportSelectionOnly:n.selectionOnly()})})},x=(e,t)=>{var i;const n=e.getController("filterSync");if(!n)return null;if(void 0!==t.filterValue)return t.filterValue;const o=null===(i=n.getFilterValueFromColumns)||void 0===i?void 0:i.call(n,t.columns);if((null===o||void 0===o?void 0:o.length)>0)return o;const s=e.getController("columns").getColumns();return e._initialFilterValue??n.getFilterValueFromColumns(s)},w=e=>class extends e{init(){super.init(),this._dataController.stateLoaded.add(()=>{if(this._dataController.isLoaded()&&!this._dataController.getDataSource()){this.setLoading(!1),this.renderNoDataText();const e=this.component.getView("columnHeadersView");e&&e.render(),this.component._fireContentReadyAction()}})}},y=e=>class extends e{init(){return super.init.apply(this,arguments),v(this),this}isLoading(){return super.isLoading()||this.getDataController().isStateLoading()}state(e){const t=super.state.apply(this,arguments);return void 0!==e&&this.applyState((0,s.X)(!0,{},e)),t}updateState(e){if(this.isEnabled()){const t=this.state(),i=(0,s.X)({},t,e),o=(0,n.GP)(t),r=(0,n.GP)(i);(0,n.RL)(o,r)||(e=(0,s.X)(!0,{},e),(0,s.X)(this._state,e),this.save())}else(0,s.X)(this._state,e)}applyState(e){var t;const{allowedPageSizes:i}=e,{searchText:n}=e,{selectedRowKeys:o}=e,{selectionFilter:s}=e,l=this.option("scrolling.mode"),a="virtual"===l||"infinite"===l,d=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),u=null===(t=this.getView("rowsView"))||void 0===t?void 0:t.hasHeight();this.component.beginUpdate(),this.getColumnsController()&&this.getColumnsController().setUserState(e.columns),this.getExportController()&&this.getExportController().selectionOnly(e.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",o||[]),this.option("selectionFilter",s),i&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=i),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",e.focusedRowKey??null)),this.component.endUpdate(),this.option("searchPanel.text",n||""),this.option("filterValue",x(this,e)),this.option("filterPanel.filterEnabled",!e.filterPanel||e.filterPanel.filterEnabled),this.option("paging.pageIndex",(!a||u)&&e.pageIndex||0),this.option("paging.pageSize",a&&!d||!(0,r.O9)(e.pageSize)?this._initialPageSize:e.pageSize),this.getDataController()&&this.getDataController().reset()}},b=e=>class extends e{_shouldReturnVisibleColumns(){const e=super._shouldReturnVisibleColumns.apply(this,arguments);return e&&(!this._stateStoringController.isEnabled()||this._stateStoringController.isLoaded())}},I=e=>class extends e{dispose(){clearTimeout(this._restoreStateTimeoutID),super.dispose()}callbackNames(){return super.callbackNames().concat(["stateLoaded"])}_refreshDataSource(){if(this._stateStoringController.isEnabled()&&!this._stateStoringController.isLoaded()){clearTimeout(this._restoreStateTimeoutID);const e=new o.cY;return this._restoreStateTimeoutID=setTimeout(()=>{this._stateStoringController.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{super._refreshDataSource(),this.stateLoaded.fire(),e.resolve()}).fail(t=>{this.stateLoaded.fire(),this._handleLoadError(t||"Unknown error"),e.reject()})}),e.promise()}this.isStateLoading()||super._refreshDataSource()}isLoading(){return super.isLoading()||this._stateStoringController.isLoading()}isStateLoading(){return(0,r.O9)(this._restoreStateTimeoutID)}isLoaded(){return super.isLoaded()&&!this.isStateLoading()}},S=e=>class extends e{_fireSelectionChanged(e){const t=this.option("selection.deferred");this._stateStoringController.isLoading()&&t||super._fireSelectionChanged.apply(this,arguments)}},A={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:C},extenders:{views:{rowsView:w},controllers:{stateStoring:y,columns:b,data:I,selection:S}}}},95506:function(e,t,i){i.d(t,{ML:function(){return n},Nv:function(){return s},RN:function(){return r},iv:function(){return o}});const n="ai",o="chatsparkleoutline",s={aiColumn:"dx-command-ai",aiColumnHeaderContent:"dx-command-ai-header-content",aiColumnHeaderButton:"dx-command-ai-header-button",aiChatSparkleOutlineIcon:"dx-icon-chatsparkleoutline"},r={autoFill:"chatsparkleoutline",regenerate:"refresh",clear:"trash"}},96028:function(e,t,i){i.d(t,{L:function(){return p}});i(82438),i(34840);var n=i(59981),o=i(24906),s=i(74567),r=i(63027),l=i(85563),a=i(50172);i(99819);const d=e=>class extends e{_applyColumnState(e){const t=this;let i,n;const o=t.option("sorting.mode"),{rootElement:s}=e,{column:r}=e,d=t._getIndicatorContainer(s);if("sort"===e.name){s.find(".dx-sort").remove(),!d.children().length&&d.remove();const u="none"!==o&&r.allowSorting,c=t.getController&&!!t.getController("columns").columnOption("sortIndex:1");return(0,a.O9)(r.groupIndex)||!u&&!(0,a.O9)(r.sortOrder)||(i="asc"===r.sortOrder?"ascending":"descending",n=super._applyColumnState(e).toggleClass("dx-sort-up","asc"===r.sortOrder).toggleClass("dx-sort-down","desc"===r.sortOrder),c&&t.option("sorting.showSortIndexes")&&r.sortIndex>=0&&((0,l.A)("<span>").addClass("dx-sort-index-icon").text(r.sortIndex+1).appendTo(n),n.addClass("dx-sort-index")),u&&e.rootElement.addClass(t.addWidgetPrefix("action"))),this._setAriaSortAttribute(r,i,s,c),n}return super._applyColumnState(e)}_setAriaSortAttribute(e,t,i,n){if(i.removeAttr("aria-roledescription"),e.isGrouped){let t=this.localize("dxDataGrid-ariaNotSortedColumn");(0,a.O9)(e.sortOrder)&&(t="asc"===e.sortOrder?this.localize("dxDataGrid-ariaSortedAscendingColumn"):this.localize("dxDataGrid-ariaSortedDescendingColumn")),this.setAria("roledescription",t,i)}else if((0,a.O9)(e.sortOrder)){if(this.setAria("sort",t,i),n&&e.sortIndex>=0){const t=r.A.format("dxDataGrid-ariaColumnHeader"),n=r.A.format("dxDataGrid-ariaSortIndex",e.sortIndex+1),o=`${t}, ${n}`;this.setAria("roledescription",o,i)}}else this.setAria("sort","none",i)}_getIndicatorClassName(e){return"sort"===e?"dx-sort":"sortIndex"===e?"dx-sort-index-icon":super._getIndicatorClassName(e)}_renderIndicator(e){const{column:t}=e,i=e.container,n=e.indicator;if("sort"===e.name){const o=this.option("rtlEnabled");if((0,a.O9)(t.sortOrder)||n&&n.addClass("dx-sort-none"),i.children().length&&(!o&&"left"===e.columnAlignment||o&&"right"===e.columnAlignment))return void i.prepend(n)}super._renderIndicator(e)}_updateIndicator(e,t,i){if("sort"!==i||!(0,a.O9)(t.groupIndex))return super._updateIndicator.apply(this,arguments)}_getIndicatorElements(e,t){const i=super._getIndicatorElements(e);return t?i:i&&i.not(".dx-sort-none")}};var u=d;const c=e=>class extends(u(e)){optionChanged(e){const t=this;"sorting"===e.name?(t._invalidate(),e.handled=!0):super.optionChanged(e)}_createRow(e){const t=super._createRow(e);return"header"===e.rowType&&o.A.on(t,(0,s.b4)(n.U,"dxDataGridColumnHeadersView"),"td",this.createAction(e=>{this._processHeaderAction(e.event,t)})),t}_processHeaderAction(e,t){if((0,l.A)(e.currentTarget).parent().get(0)!==t.get(0))return;const i=this;let n=null;const o=(0,l.A)(e.currentTarget),r=o.parent().index();let d=-1;[].slice.call(i.getCellElements(r)).some((e,t)=>{if(e===o.get(0))return d=t,!0});const u=i._columnsController.getVisibleColumns(r),c=u[d],h=i.getController("editing"),p=i.option("editing.mode"),g=h&&h.isEditing()&&("batch"===p||"cell"===p);!g&&i._isSortableElement((0,l.A)(e.target))&&(!c||(0,a.O9)(c.groupIndex)||c.command||(e.shiftKey?n="shift":(0,s.By)(e)&&(n="ctrl"),setTimeout(()=>{i._columnsController.changeSortOrder(c.index,n)})))}_renderCellContent(e,t){const i=this,{column:n}=t;n.command||"header"!==t.rowType||i._applyColumnState({name:"sort",rootElement:e,column:n,showColumnLines:i.option("showColumnLines")}),super._renderCellContent.apply(this,arguments)}_columnOptionChanged(e){const{changeTypes:t}=e;1===t.length&&t.sorting?this._updateIndicators("sort"):super._columnOptionChanged(e)}},h=e=>class extends(u(e)){optionChanged(e){const t=this;"sorting"===e.name?(t._invalidate(),e.handled=!0):super.optionChanged(e)}_createGroupPanelItem(e,t){const i=this,r=super._createGroupPanelItem(...arguments);return o.A.on(r,(0,s.b4)(n.U,"dxDataGridHeaderPanel"),i.createAction(()=>{i._processGroupItemAction(t.index)})),i._applyColumnState({name:"sort",rootElement:r,column:{alignment:i.option("rtlEnabled")?"right":"left",allowSorting:t.allowSorting,sortOrder:"desc"===t.sortOrder?"desc":"asc",isGrouped:!0},showColumnLines:!0}),r}_processGroupItemAction(e){setTimeout(()=>this.getController("columns").changeSortOrder(e))}},p={defaultOptions:()=>({sorting:{mode:"single",ascendingText:r.A.format("dxDataGrid-sortingAscendingText"),descendingText:r.A.format("dxDataGrid-sortingDescendingText"),clearText:r.A.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:c,headerPanel:h}}}},96283:function(e,t,i){i.d(t,{Dy:function(){return n.Dy},Mo:function(){return n.Mo},WX:function(){return n.WX},Z7:function(){return n.Z7},js:function(){return n.js},rK:function(){return n.rK},sf:function(){return n.sf},zY:function(){return n.zY}});var n=i(45141)},98026:function(e,t,i){i.d(t,{g:function(){return s}});var n=i(85563),o=i(50172);const s=e=>class extends e{focusinHandler(e){const t=(0,n.A)(e.target);this.translateFocusIfNeed(e,t),super.focusinHandler(e)}focusOutHandler(e){super.focusOutHandler(e),this.makeScrollableFocusableIfNeed()}translateFocusIfNeed(e,t){const i=this.isScrollableNeedFocusable(),n=this._isFixedColumn(0);if(!i||!n)return;const o=this._rowsView.getCell({rowIndex:0,columnIndex:0}),s=!!o.attr("tabindex"),r=t.is(this._$firstNotFixedCell);s&&r&&(e.preventDefault(),this._focus(o))}renderCompleted(e){this._$firstNotFixedCell=this.getFirstNotFixedCell(),this.makeScrollableFocusableIfNeed(),super.renderCompleted(e)}_focus(e,t,i){super._focus(e,t,i),this.makeScrollableFocusableIfNeed()}_tabKeyHandler(e){const t=(0,o.O9)(this._focusedCellPosition)&&!(0,o.RI)(this._focusedCellPosition),i=!t||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),n=this.isScrollableNeedFocusable();var s;i&&n&&(null===(s=this._$firstNotFixedCell)||void 0===s||s.removeAttr("tabIndex"));super._tabKeyHandler(e)}getFirstNotFixedCell(){var e;const t=this._columnsController.getVisibleColumns(),i=t.findIndex(e=>{let{fixed:t}=e;return!t}),n=null===(e=this._editingController)||void 0===e?void 0:e.isEditing();return-1===i||n?void 0:this._rowsView._getCellElement(0,i)}isScrollableNeedFocusable(){var e,t;const i=!!this._rowsView.getScrollable(),n=!(null===(e=this._rowsView._fixedTableElement)||void 0===e||!e.length),o=!(null===(t=this._rowsView.getCellElements(0))||void 0===t||!t.length);return i&&n&&o}makeScrollableFocusableIfNeed(){const e=this.isScrollableNeedFocusable();e&&this._$firstNotFixedCell&&this._applyTabIndexToElement(this._$firstNotFixedCell)}}}}]);